<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>美团社群神卷脚本(青龙面板)</title>
    <link href="/2024/03/07/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC/"/>
    <url>/2024/03/07/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="美团社群神卷脚本"><a href="#美团社群神卷脚本" class="headerlink" title="美团社群神卷脚本"></a>美团社群神卷脚本</h1><h2 id="前情提要（可以手动也可以服务器）"><a href="#前情提要（可以手动也可以服务器）" class="headerlink" title="前情提要（可以手动也可以服务器）"></a>前情提要（可以手动也可以服务器）</h2><p>1.用脚本之前，<font color='red'>请自觉在24小时内删除</font>，仅供学习交流用途，切勿进行商业用途，一切后果自行承担</p><p>2.项目地址：<a href="https://github.com/leafTheFish/DeathNote">leafTheFish&#x2F;DeathNote (github.com)</a></p><p>3.<font color='red'>领到多少全看运气，不要质疑脚本的可用性，如果在意领的少，请你不要使用，能有多少是多少</font></p><p>效果图：</p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/642ecb53590bfc0604ff9738e2b0216c697559838.png" alt="image-20240307020748709"></p><h2 id="部署步骤"><a href="#部署步骤" class="headerlink" title="部署步骤"></a>部署步骤</h2><h3 id="安装虚拟机"><a href="#安装虚拟机" class="headerlink" title="安装虚拟机"></a>安装虚拟机</h3><table><thead><tr><th>主机名</th><th>内存</th><th>硬盘</th><th>cpu</th><th>OS</th><th>ip</th></tr></thead><tbody><tr><td>qianyios</td><td>3G</td><td>100g</td><td>1v1c</td><td>Centos7.9</td><td>192.168.48.128</td></tr></tbody></table><p>自行安装一个虚拟机就行了</p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/615a85db6eb5fce1dd6439cd62b5ab63697559838.png" alt="image-20240307010417382"></p><h3 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h3><p>以下代码可以全部复制运行，直接粘贴到运行窗口</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">rm</span> -<span class="hljs-string">rf</span> /<span class="hljs-string">etc</span>/<span class="hljs-string">yum</span>.<span class="hljs-string">repos</span>.<span class="hljs-string">d</span>/*<br><br><span class="hljs-string">curl</span> -<span class="hljs-string">o</span> /<span class="hljs-string">etc</span>/<span class="hljs-string">yum</span>.<span class="hljs-string">repos</span>.<span class="hljs-string">d</span>/<span class="hljs-string">CentOS-Base</span>.<span class="hljs-string">repo</span> <span class="hljs-string">http</span>://<span class="hljs-string">mirrors</span>.<span class="hljs-string">aliyun</span>.<span class="hljs-string">com</span>/<span class="hljs-string">repo</span>/<span class="hljs-string">Centos-7</span>.<span class="hljs-string">repo</span><br><br><span class="hljs-string">yum</span> <span class="hljs-string">clean</span> <span class="hljs-string">all</span> &amp;&amp; <span class="hljs-string">yum</span> <span class="hljs-string">makecache</span><br><br><span class="hljs-string">systemctl</span> <span class="hljs-string">disable</span> <span class="hljs-string">firewalld</span> <span class="hljs-built_in">--now</span><br><br><span class="hljs-string">sed</span> -<span class="hljs-string">i</span> <span class="hljs-string">&quot;s#SELINUX=enforcing#SELINUX=disabled#g&quot;</span> /<span class="hljs-string">etc</span>/<span class="hljs-string">selinux</span>/<span class="hljs-string">config</span><br><br><span class="hljs-string">setenforce</span> <span class="hljs-string">0</span><br><br><span class="hljs-string">systemctl</span> <span class="hljs-string">enable</span> <span class="hljs-string">chronyd</span> <span class="hljs-built_in">--now</span><br><br><span class="hljs-string">timedatectl</span> <span class="hljs-built_in">set-timezone</span> <span class="hljs-string">Asia</span>/<span class="hljs-string">Shanghai</span><br><br><span class="hljs-string">yum</span> <span class="hljs-string">install</span> -<span class="hljs-string">y</span> <span class="hljs-string">yum-utils</span><br><br><span class="hljs-string">yum</span> <span class="hljs-string">install</span> -<span class="hljs-string">y</span> <span class="hljs-string">device-mapper-persistent-data</span> <span class="hljs-string">lvm2</span><br><br><span class="hljs-string">yum-config-manager</span> <span class="hljs-built_in">--add-repo</span> <span class="hljs-string">https</span>://<span class="hljs-string">download</span>.<span class="hljs-string">docker</span>.<span class="hljs-string">com</span>/<span class="hljs-string">linux</span>/<span class="hljs-string">centos</span>/<span class="hljs-string">docker-ce</span>.<span class="hljs-string">repo</span><br><br><span class="hljs-string">yum</span> <span class="hljs-string">install</span> <span class="hljs-string">docker-ce</span> <span class="hljs-string">docker-ce-cli</span> <span class="hljs-string">containerd</span>.<span class="hljs-string">io</span> -<span class="hljs-string">y</span><br><br><span class="hljs-string">systemctl</span> <span class="hljs-string">enable</span> <span class="hljs-string">docker</span> <span class="hljs-built_in">--now</span><br><br><span class="hljs-string">docker</span> <span class="hljs-built_in">--version</span><br></code></pre></td></tr></table></figure><p>安装过程中出现这些不用管，静静等待他安装完成</p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/e0811f82da3608c6fa58f8b0136badc2697559838.png" alt="image-20240307011242361"></p><p>docker安装成功</p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/a96de9b8e44b1612bdc0d41ebcea329d697559838.png" alt="image-20240307011609793"></p><h3 id="安装青龙面板"><a href="#安装青龙面板" class="headerlink" title="安装青龙面板"></a>安装青龙面板</h3><p>项目地址：<a href="https://github.com/whyour/qinglong">青龙面板</a></p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs livescript">docker run -dit <span class="hljs-string">\</span><br>  -v $PWD/ql/data:/ql/data <span class="hljs-string">\</span><br>  -p <span class="hljs-number">5700</span>:<span class="hljs-number">5700</span> <span class="hljs-string">\</span><br>  -e QlBaseUrl=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-string">\</span><br>  -e QlPort=<span class="hljs-string">&quot;5700&quot;</span> <span class="hljs-string">\</span><br>  --name qinglong <span class="hljs-string">\</span><br>  --hostname qinglong <span class="hljs-string">\</span><br>  --restart <span class="hljs-keyword">unless</span>-stopped <span class="hljs-string">\</span><br>  whyour/qinglong:latest<br></code></pre></td></tr></table></figure><p>直接运行全部，这是一整条命令，所以你要全部复制运行</p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/38799f58767474fc0ec34f616c6fe26d697559838.png" alt="image-20240307012131949"></p><p>这个时候访问网页版，安装青龙面板，你的虚拟机ip加端口(5700)</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">我的是<br>http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.128</span>:<span class="hljs-number">5700</span><br></code></pre></td></tr></table></figure><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/3ac166057cfe2625ddc200d1244a00d9697559838.png" alt="image-20240307012334768"></p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/efcbe58c8fb1bcfee9d84b147c16116e697559838.png" alt="image-20240307013632043"></p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/4442c741b88a4cd6da28a4755c447d44697559838.png" alt="image-20240307013659256"></p><p>大概页面就是这样了</p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/0a94792290da786864f55c453fdcf326697559838.png" alt="image-20240307013733371"></p><h3 id="安装美团脚本"><a href="#安装美团脚本" class="headerlink" title="安装美团脚本"></a>安装美团脚本</h3><p>进入容器</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> exec -it <span class="hljs-number">613</span> bash<br></code></pre></td></tr></table></figure><p>613是刚刚前面提到的容器的名字前三位，其他不变</p><p>方法一：（此为最新脚本，脚本日志能看到版本号，有最新版就重新拉库）</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ql raw https:<span class="hljs-regexp">//</span>raw.githubusercontent.com<span class="hljs-regexp">/leafTheFish/</span>DeathNote<span class="hljs-regexp">/main/m</span>eituanV3.js<br></code></pre></td></tr></table></figure><p>方法二：以上是单独的脚本，如果拉脚本失败的，可以试一下拉整个库</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ql repo https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/leafTheFish/</span>DeathNote.git<br></code></pre></td></tr></table></figure><p>现在进入容器之后，试一下拉取方法二</p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/6412191ffc7237d18a7bcf6fd1536f7e697559838.png" alt="image-20240307014503797"></p><p>访问青龙网页版</p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/ea6151e2c4f8c573facb8d9b4b0972a5697559838.png" alt="image-20240307014635917"></p><h3 id="配置环境变量（重点）"><a href="#配置环境变量（重点）" class="headerlink" title="配置环境变量（重点）"></a>配置环境变量（重点）</h3><p>微信扫码登入你的美团账号（<font color='red'>无毒不盗号哈</font>）介意勿弄</p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/86394ebd0a5a7edc630c25ef0121409d697559838.png" alt="image-20240307022806124"></p><p>这是美团官方的网站，你登入之后，点击右上角更多，复制网站链接出来</p><p>会是下面这样的</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//i</span>.meituan.com<span class="hljs-regexp">/mttouch/</span>page/account?userId=<span class="hljs-number">2827915055</span>&amp;token=AgFpIUuMoh0Nts-GA7EaGOYxxxxxxxxxxx(省略)xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxXs2QBRaqa57ZSZVi0GutQpixOaY0cZgjMyPZH_rzu<br></code></pre></td></tr></table></figure><p>我们提取token&#x3D;后的文字</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">AgFpIUuMoh0Nts-GA7EaGOYxxxxxxxxxxx</span><span class="hljs-params">(省略)</span><span class="hljs-title">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxXs2QBRaqa57ZSZVi0GutQpixOaY0cZgjMyPZH_rzu</span></span><br></code></pre></td></tr></table></figure><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/25062ac4e6173ce952b9d5a5f86a2577697559838.png" alt="image-20240307022839631"></p><p>回到青龙面板-环境变量</p><p>变量名：meituanCookie 值是上面的提取的token</p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/04ae2b8127b2943f0d0ddcd01abfd000697559838.png" alt="image-20240307015807157"></p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/55b0550f5a0262e0ce86955d8409b372697559838.png" alt="image-20240307020007987"></p><p><font color='red'>教程结束</font></p><h2 id="温馨提示（不要忽视）"><a href="#温馨提示（不要忽视）" class="headerlink" title="温馨提示（不要忽视）"></a>温馨提示（不要忽视）</h2><ol><li><p>token会不定时过期，一旦日志提示你token过期，你需要重新扫码登入，提取token回到面板去更新变量的值</p></li><li><p>因为是在虚拟机部署，不用的时候不要挂起，<font color='red'>要关机请退出容器（exit），执行（poweroff）命令</font></p></li></ol><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/ae531a4cb9b3ab76280cdb0af4e5b08b697559838.png" alt="image-20240307022856970"></p><p>等你开机直接开就行，不要做什么操作，直接访问网页就行了</p><p>3.不要乱改定时规则，就是说你可以一天都开着虚拟机，等他自动运行脚本，也可以放到服务器去。</p><p>反正你虚拟机开着，他一到时间就会运行脚本，不用的时候就按照<font color='red'>第二步</font>按顺序关机</p><p><img src="/../img/%E7%BE%8E%E5%9B%A2%E7%A4%BE%E7%BE%A4%E7%A5%9E%E5%8D%B7%E8%84%9A%E6%9C%AC.assets/60f64675eb6decdd00cc79617de1b8b4697559838.png" alt="image-20240307020456921"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Docker</tag>
      
      <tag>Centos 7</tag>
      
      <tag>美团</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>工学云自动签到</title>
    <link href="/2024/02/02/%E5%B7%A5%E5%AD%A6%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0/"/>
    <url>/2024/02/02/%E5%B7%A5%E5%AD%A6%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="工学云自动签到"><a href="#工学云自动签到" class="headerlink" title="工学云自动签到"></a>工学云自动签到</h1><h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>原作者项目：<a href="https://github.com/XuanRanDev/Auto-GongXueYun-2">XuanRanDev&#x2F;Auto-GongXueYun-2: 蘑菇钉 &amp; 工学云 自动打卡</a></p><p><font color='red'>帮作者点一下右上角的star（星星）</font></p><p><img src="/../img/%E5%B7%A5%E5%AD%A6%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0.assets/image-20240202163336873-1708512251528-22.png" alt="image-20240202163336873"></p><p><strong>仅供学习交流测试！您必须在下载或Fork此源码的24小时内删除所有内容！！</strong></p><p><strong>1、请务必认真阅读此文档后继续！</strong></p><p><strong>2、本项目开源&amp;免费，所有开发均仅限于学习交流，禁止用于任何商业用途。</strong></p><p><strong>3、如基于或参考此项目进行二次开发，请注明原作者并使用GPL2.0许可证开源</strong></p><p><strong>4、使用本项目对自己账号有一定的风险，在这里本站不承担任何责任和后果，所有危险后果自负，一切由使用者本人负责<font color='red'>（到这里如果介意了可以退出本站，不用继续看了）</font></strong></p><p style="text-align:center;font-size:22px" >  <font color='red'>效果呈现</font></font></p><p><img src="/../img/%E5%B7%A5%E5%AD%A6%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0.assets/image-20240202174740537-1706867269458-1-1708512251528-21.png" alt="image-20240202174740537"></p><h2 id="使用教程"><a href="#使用教程" class="headerlink" title="使用教程"></a>使用教程</h2><h3 id="服务器部署（可以先用虚拟机测试）"><a href="#服务器部署（可以先用虚拟机测试）" class="headerlink" title="服务器部署（可以先用虚拟机测试）"></a>服务器部署（可以先用虚拟机测试）</h3><blockquote><p>目前已知腾讯云、阿里云以及部分百度云的服务器、云函数IP被工学云拉黑，如果你使用以上云服务商产品不用再费时间了，华为云应该可用，有自己的服务器最好。</p></blockquote><p><font color='red'>以下服务器为centos7.6挂机宝，python36</font></p><p>1.下载源码</p><p><img src="/../img/%E5%B7%A5%E5%AD%A6%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0.assets/image-20240202162848220-1708512251528-24.png" alt="image-20240202162848220"></p><p>2.解压至根目录</p><p><img src="/../img/%E5%B7%A5%E5%AD%A6%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0.assets/image-20240202163014612-1708512251528-23.png" alt="image-20240202163014612"></p><p>3.<font color='cornfloweryellow'>自行安装python环境这里不做解释</font></p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs applescript">python3 <span class="hljs-comment">--version</span><br>which python3<br>pip3 install requests    <span class="hljs-comment">#安装本项目必要模块   </span><br><span class="hljs-comment">#不用版本的Python指令略有不同，自行解决</span><br></code></pre></td></tr></table></figure><p><img src="/../img/%E5%B7%A5%E5%AD%A6%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0.assets/image-20240202163221726-1708512251528-25.png" alt="image-20240202163221726"></p><p>4.创建执行脚本</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gradle">cat &gt;<span class="hljs-regexp">/root/</span>test.sh &lt;&lt;<span class="hljs-string">&#x27;EOF&#x27;</span><br>#! <span class="hljs-regexp">/bin/</span>bash<br><span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/python3 /</span>root<span class="hljs-regexp">/Auto-GongXueYun-2-master/m</span>ain.py<br>EOF<br></code></pre></td></tr></table></figure><p>注意：这里的<code>/usr/bin/python3</code>要和前面的运行的</p><p><code>which python3</code>给出的路径要一样</p><p>5.设置定时任务（centos应该都自带crontab定时工具）</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#加入定时任务</span><br>[root@ser386502002493 ~]<span class="hljs-comment"># crontab -e</span><br><span class="hljs-comment">#写入四行定时任务表达式</span><br><span class="hljs-number">30</span> <span class="hljs-number">8</span> * * <span class="hljs-number">1</span>-<span class="hljs-number">5</span> bash <span class="hljs-regexp">/root/</span>test.sh<br><span class="hljs-number">0</span> <span class="hljs-number">11</span> * * <span class="hljs-number">1</span>-<span class="hljs-number">5</span> bash <span class="hljs-regexp">/root/</span>test.sh<br><span class="hljs-number">06</span> <span class="hljs-number">18</span> * * <span class="hljs-number">1</span>-<span class="hljs-number">5</span> bash <span class="hljs-regexp">/root/</span>test.sh<br><span class="hljs-number">0</span> <span class="hljs-number">23</span> * * <span class="hljs-number">1</span>-<span class="hljs-number">5</span> bash <span class="hljs-regexp">/root/</span>test.sh<br></code></pre></td></tr></table></figure><p>以下是对每行的解释：</p><ol><li><code>30 8 * * 1-5 bash /root/test.sh</code><ul><li>每周一至周五的早上 8:30 执行 <code>/root/test.sh</code> 脚本。</li></ul></li><li><code>0 11 * * 1-5 bash /root/test.sh</code><ul><li>每周一至周五的上午 11:00 执行 <code>/root/test.sh</code> 脚本。</li></ul></li><li><code>06 18 * * 1-5 bash /root/test.sh</code><ul><li>每周一至周五的下午 6:06 执行 <code>/root/test.sh</code> 脚本。</li></ul></li><li><code>0 23 * * 1-5 bash /root/test.sh</code><ul><li>每周一至周五的晚上 11:00 执行 <code>/root/test.sh</code> 脚本。</li></ul></li></ol><p>推荐一个工具<a href="https://cron.ciding.cc/">Cron - 在线Cron表达式生成器 (ciding.cc)</a></p><p><img src="/../img/%E5%B7%A5%E5%AD%A6%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0.assets/image-20240202164254637-1708512251528-26.png" alt="image-20240202164254637"></p><p>保存退出即可</p><blockquote><p><font color='red'>这里就是脚本的执行时间：</font></p><p>比如我八点半上班，脚本就会执行一次，晚上6:00下班，脚本就会在6:18执行一次，<font color='red'>尽量不要整点</font>，有可能打不到卡（和自己时间有冲突的该这两个就行了，每日检查的时间就不用改了）</p><p>至于11点和23点是脚本由的每日检查功能，如果上班和下班没签到成功，就在这两个时间<font color='red'>点</font>进行补签</p></blockquote><p>自己根据自己的工作情况调整</p><p>脚本判断上下班逻辑十二点之前都是上班，十二点之后是下班</p><h3 id="创建用户列表"><a href="#创建用户列表" class="headerlink" title="创建用户列表"></a>创建用户列表</h3><p><font color='red'>创建一个名为user.json的文件放在项目的根目录</font></p><p><img src="/../img/%E5%B7%A5%E5%AD%A6%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0.assets/image-20240202165505789-1708512251528-27.png" alt="image-20240202165505789"></p><p>将以下信息写入user.json这里展示的是两个用户，一个用户可以自行删除一个数据体</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">[</span><br>  <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;enable&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;18666666666&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1111111111&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;keepLogin&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;如果keepLogin为false就不填&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;userId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;如果keepLogin为false就不填&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;planId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;如果keepLogin为false就不填&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;randomLocation&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;user-agent&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;null&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;signCheck&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;country&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;中国&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;province&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;河南省&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;city&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;洛阳市&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;area&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;新安县&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;打卡备注&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;android&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;你的详细地址&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;longitude&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1xx.xxxx&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;latitude&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2x.xxxxx9&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;pushKey&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dhsajifysfsafsdfdsxxxxxx&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;enable&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;18612366&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1111111111&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;keepLogin&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;如果keepLogin为false就不填&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;userId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;如果keepLogin为false就不填&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;planId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;如果keepLogin为false就不填&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;randomLocation&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;user-agent&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;null&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;signCheck&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;country&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;中国&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;province&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;广东省省&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;city&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;广州市&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;area&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;天河区&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;打卡备注&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;android&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;你的详细地址&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;longitude&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1xx.xxxx&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;latitude&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2x.xxxxx9&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;pushKey&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dhsajifysfsafsdfdsxxxxxx&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">]</span><br><br></code></pre></td></tr></table></figure><p>经纬度查询<a href="https://jingweidu.bmcx.com/">经纬度查询 - 坐标拾取系统 (bmcx.com)</a></p><p>pushkey获取方式关注pushplus公众号发送token</p><p><img src="/../img/%E5%B7%A5%E5%AD%A6%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0.assets/image-20240202171929526-1708512251528-28.png" alt="image-20240202171929526"></p><h2 id="推送服务"><a href="#推送服务" class="headerlink" title="推送服务"></a>推送服务</h2><p>因原作者的源码推送服务为第三方服务，pushplsh服务存在一定的推送不到的情况，于是我进行了更换另外一家名为<font color='red'>息知</font>的推送服务</p><ol><li>这里为了方便大家后续操作，<font color='red'>须自行下载我的文件</font>，去替换<font color='red'>原项目</font>的文件，若有一定的Python基础，可自行更换推送服务</li></ol><p><a href="https://qianyios.lanzoul.com/iNF531n2nvof">https://qianyios.lanzoul.com/iNF531n2nvof</a>    密码:6666</p><p><img src="/../img/%E5%B7%A5%E5%AD%A6%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0.assets/image-20240202170907489-1708512251528-29.png" alt="image-20240202170907489"></p><ol start="2"><li>更新用户数据体，为了更完美的贴合我的文件，你需要更新用户列表数据体</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">[</span><br>  <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;enable&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;张三&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;18111111111&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ABX111.&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;keepLogin&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;如果keepLogin为false就不填&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;userId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;如果keepLogin为false就不填&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;planId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;如果keepLogin为false就不填&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;randomLocation&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;user-agent&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;null&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;signCheck&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;country&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;中国&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;province&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;广东省&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;city&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xx市&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;area&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xx县&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;desc&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;android&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;广东省 · xx市 · xx县 · xx镇xxxxxxxx&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;longitude&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1xx.xxxx&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;latitude&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2x.xxxxx9&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;xizhiurl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://xizhi.qqoq.net/XZe0a095cxxxxxxxxxxxxxxxxx41fc1.send&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><blockquote><p>经纬度自行查找</p><p>“longitude”: “1xx.xxxx”,<br>“latitude”: “2x.xxxxx9”,</p></blockquote><p><a href="https://jingweidu.bmcx.com/">经纬度查询 - 坐标拾取系统 (bmcx.com)</a></p><blockquote><p><font color='red'>增加的东西：</font></p><p><font color='red'>“name”</font>: “张三”</p><p><font color='red'>“xizhiurl”</font>: “<a href="https://xizhi.qqoq.net/XZe0a095cxxxxxxxxxxxxxxxxx41fc1.send">https://xizhi.qqoq.net/XZe0a095cxxxxxxxxxxxxxxxxx41fc1.send</a>“<br>息知密钥，后续会说怎么来的</p><p><font color='red'>“address”</font>: “广东省 · xx市 · xx县 · xx镇xxxxxx”,<br>#工学云的地址要加上’ · ‘前后由两个空格,这里写的地址，就会在工学云呈现</p><p><font color='red'>建议开启</font></p><p>“signCheck”: true    每日检查</p></blockquote><p>最后息知密钥的获取方式，关注息知公众号发送密钥即可，然后填入用户数据体</p><p><img src="/../img/%E5%B7%A5%E5%AD%A6%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0.assets/image-20240202171258021-1708512251528-30.png" alt="image-20240202171258021"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>工学云</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OpenStack-Train-三节点部署</title>
    <link href="/2024/01/07/OpenStack-Train-%E4%B8%89%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/"/>
    <url>/2024/01/07/OpenStack-Train-%E4%B8%89%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="7b6d55ebf3dfebeb26bc50a194e3e2a31c25833ba3296b90deba8ed90e096cfa">87f4a57a4c67aa39f7ace552ae5907684f6928fbaeaf7a557c66ffa718c5a88c681abbcc4dba84a3187775bcd863a93a5ce851a089b6ef65066f677ca04283050c0bafb88e5b062baf2d37b474a4e791c26bb1ef00004610d7fd166709389c28f9f9a8af09b47d8af108511984b692199852a4a549cfaeea409ab7bee58f40532d38f619f4c1cdf796257c8cbde08226c52489f98691694e778a1ed3cc0336d16969ce65151893ca07d0a01e9b69730d84b9143060059ca5ea9f199e68b871e7955eec23c69f55757e22dddbc995043b8d147505ca5303a68cd958ba5f50575dea40fe92659d68130fe51a577329246fb1fdfed8c2eb7a6438bad64693ec6edb8ac8b4e14e56cf153d189d86588f4a9167ff241b04e7b2b075c2c1e171b55ddd7f9d272197ca1bd7f39e1f99d814c634291bd5cc23613ae56495dbc1b360936f1bdcaa8dacba6b00d190fa37631a6da6ae0d59934d897901aeb919496f370b9e67d6805029b8a35875de2f462cdb36edc330ceb997734b6be7eb45daad11506d3629d05cd790f7396cc3d6fa0f17bcc52447841a581e499b22cfcfcf5c41501ce8f6e6ef28210d80379f8670e92d58754dcd134646e287e0dfcec875c96233f1b12f2845f1de30bdf6676bb2d35526e35f7f87e3c6330dea0f6daa9715bd0663774e8b989bc1211fd30e3a9263feb7203a44579ffcc9bf6193eb09f5f387134ee07fcb2efa8e9f45871c4fcd832bc3fbba9bb9bf5f186b233d928aeff2b8a52aed534e9bd86d31ddca0e6306de796acf1a47dec491f6dcc198ca55e2469096cb381741e0d0e839cd3202cd30656391c853c6f6cd43670dc4e1bfac084598095c86d02540858bdf1a93d76bcd09928269b569761e24ce7cee943e328aed877431d51c033b5c565cc9ec0cb5a028ba0aa5ee8cbc2a17c4a3dab56db04d54d831a154f68bed8b230fe91e4eec90312a21143ac8e07bdd5c8436421771a27241c96303a649d4291e84aa294ce382c7b06f054d10a23b04f1eb4ebf2c8ef87357e9f06e16a2477b2edee7f1bf6130787d610052863a783d5b5ba0beec25d69a728b6c6cff9e1507c476ae649a6015762a48cde07d661f4a9d8f969dc9d0af370e8003f6224df24cf86ac10a8528d183b218dc5ef7bca060f9628eaa36459c485e069a219f9829e59ec31fb47a94e6ca0cd593b5c7553b4d0299423a3554c61b38c956a1349dada63052c9935d7f408c6dbafe0b4658b34e7344d05387ea83b760bd3597254939738dbdda15887926cf0025f4e9c950ad61468c95ce0239a4aee0400ee0aaf80d8c44ce1200ca2228553da252de818012f841c83716cdba5d822d499efc6af08a9c7d371379ac01bb23e91389af27f041cbd6e07a38342eedc2222dbbc0db1c4d5832e31a40be8a8bc6de8b0d420a1940873559dfb96f26c0db4c53e933f1835a97317b419f1614c75146cf148f54276d623d785becd974c23baba9ad7274b8c3675b64005375085119a3528ea424448e6c89704101e16844cef609269a1941341528fdc62e470ce5d98b5ad0e50108f45fd09f23257c2d63961d3cf62f4da329dd90d9f8daa9d765e0a3541534294f5586a9d0e58dcd2cabc62d0c61a3424d4cb6aee17efc4e84c0d112f9b16aade800ba5ed992be94dc7764d3e23a6d4272aa8edf29b48c3022e2c0d74109332918ab58f224166d63c477620cf3c91f3cec41369375d8ff5f488ca443d00256c43a26d812af7dce60be997898bce03928972987d0a355baf2e7a6dd6478a250276c6f543f6c81127d112b5d4f29c732600a6e6ec19762b056363094d3573ee5087f2cb88980af89712e1f149197044853ec2e4f40391881fee1edfaa613d27683215ec43be0d98ba409cd0cebe58f328d71b46d664bfb3d6c435e2cd11a7c0fa323110d54e800f23d4b8113cdb4b2b1f99e74b59fcc88059b804e1889c8404297102fe71f4140d640b082b3614e9af798ca4fb94fdf65ae4a5a494500a302c80ffdd3f62ca0e57a9f615f33bd530f59968b82058217f3588d04ab2eab0c0239b0a3971112099f21b7621b86f297acf39e52e4035ce07ed9dbe3b1ecd53a36504d750d633b5ba16034cf2fc87d788207bbf87d03f5dfd152f82d10bab0d044f9c716de84f65566fefbc392c020082e3bf8956e1af74e699a7417a11c8708bf75af3235ba4a248a2c35f15c92a49aa004ec721bfac91756147a005d2732c193e32a6ae16bc08eb1bf4bdabebee48564e4c73c0f53dd4861617ff610dbf59ec26d466f84885fcefde2f4df67a558124f44bd90d66dadc0706e92842422972ef29221cef41ce95ba2c388e7b05b9727164bebe9f40fe431b81281a41f98e7a2d3e3ea8da7416782c01dd6b091c3ca723b020067882a38cbf4b0e40010a6f0dd9ca77864914912b330d07c7377937dd6f9520e986c67dfab9b60490d4af82d6e8cfa367e63f32bce5d8f27ee8e3b5b6a3cef5e3c5685a1376e63c51bb4733bc049329740e900fd403ebcfd1532c0f6dec1adfd7114e387a9583c276c5df98f0f1420c1abf50913836f159577f72b97399de6aae8afa0c6fd8a24768c04bd7b8b54040fe21e292d22843c2dbbb89cf29474ce65c429bbe270d1c213745131c22f6a8d9b4c90a9e20ddf7e2bef3bcc27e9b1864db037730de8bf7c9cf0df188fef34f21178cbb7e30b35ddeede8ee1b58d7c7717fe17d43ccb6b9afcd5d4dc8ca25d66bcf4667b912953a60a1931b7d389943f68d01cf9813c99a4ebd03510fe36367c2b674a281538a9f0d16aba00b642e599b94d177f3a4115c567008c57adaf237562a10c563a1c14956dec3ce673262275273a769aa064a7b7a57bf68741cf805f264eedc5dddec3cf862048d6ce9bd884e1ee73216aeba9479db0d647fb0c93e55f93af707916b029267130a0ace79dfecc5b54b707176bbf6f58d1f6380d7d423145bbe62656ff96a2c047b7337df9333465872638586bef1122f6cc88f31edfc1be0fefa7d32567fe2e3f01b949daf9426cee5534656e7891ba5ff08288e008c8b0eb75e44d2ff658176d1ca0dbcea554085b20017c85d2f7866e36422008908b7b7059dab5222e5f7374e56d3b92482b517c67821bd1fa5e2fc2844ce5d78e09b34f6fcbd5ff0656b9320048a1bb1bb9d2d1d25982d2b66a1995accf56df084d538a3262f12fb4a5c198ad437b4e72750ead0142325d357c73a1b5bc1318f699590b5ef173ea95bc5931f099fb317ce9942d14ed4b0397b7ddfcc55ec51ce3c2577523c50376bf7919d7fd58f9a5ab1dd3f43481917912828063593cbb8ae9815998f29bfbf0dfd054b168073c6f4e591a66bf02b75b7d2bdc4d699d331f2110b43aabc4b58ce4217979f6e58141e592d9b97075ebf9e7a972b28f614c873ff008f6c100d394c5d1ba6c13b0569681b0095be0470f1bdf2da13cd6e64935b34218c894c62c175a69a6c92402fe14106024d42123fb196173832f1e8a266099b1b0dbb70a4670a35f633a71acd0c08e099fb0552dcc13dba46abb483524ec447ddba1b3374c8ca78b87b0c74d29408402563e1005783acfc09e1132f637820642f78c3562c700480a0d9d8782301ca6fa97a99ba96207d8412a30030d662a47d73a37e69a7f67c9787a5d0fe324eaf07f74d7a08743c30a6fe5021581428bd79d38b8b8472d04e1728549dc98094a30f219cc11784465df9b82ad4c7c8283407a1a50f8913d85a8c6a24b8c4d15f4304430766abec5043bbe0b5f408c9504226299c3c91e1e011042bf57f5ecea0505cd530275e6b174306e43cfd9b7cb0f62dc3a631e6b7902565db44bf6cb439598e483ecf3c0ee4894778174ea8ec17a186e18fc3047612ac3be21ecab2f3f459143f9ba6ab4b1c226145e150bc87d6b3fc2a771d3483dca58cbde07a4255ec45e29e3ed69df44791da600e0d86eae540a651659a22ad4c813064b5148bdafc2406c3b57d657fb44de0e3deeaf47f75abb82ca7c10f3e0d865a8077a95a6a881a5bf28cbb6a5704774999d7c0ad01b87fd0db8aac14771a06829e73616d11b3be7224b9172b5319685a94bbb84ef9252660544ce5f7fef822881210f3149772d7e63063fef356d288546e32e98b04341a7ca91af6a1b74571fb6140c6d25d4c92342a4c49823692c5748bbe1d8767f9708e2e1e330a0c06040c3a439d20af4855cff7c3e6986b09c2d82554ccc712125d11c0e5cc67f5c76fe16c2b8a51099a0a923b1ff7331f81310b6944f77b6d6582684a4ab7e8efa21594afcd7f10ab92875214ebb542801b0aee61bd158c0b183694f3aca1dcbdccefccbef7be6a7d1ab0b88e31470cebecc3dde616f784e12b6a6adc53df922ae14a67e76d16a8f9ae1586d31462abdb2dbc1fe64b5f4314b9e5a2e4bf6b07f60956fd22515514d9130a838b1be1ada7c138107de4b69c194af354753d3f4570b4ad92fb65d7c1abc0cc2087b7ab76c6ca1f9121c4b5d4f8663791201f49aebe5c1f4a77aa0c8db7257c63285f7a2790af8b0d8de4064863207f3744a1795cc3dc18c10b2e545a956b4995a7a3bea886a6b79d8f3c161fe90bd9b9a5a769ec6785f1223cfddcee42e15fc3c9b9ba9d110cedbcac795edc707ee712004ddb8bf45b3081e9ce5690440936159d1a6b69768f7e4e359b0ac4b773001afefb8b7afec4cce92fe38c87225e38838867c7b28ed8d1cf9690eedc846578a6d0d55af5f76190ac1b218c951d7f8c45a5d0014869e24f374de5cf83a7866d867a04c3f5e30bd48d497e84de4d57d88fa0d9b0cbcbbb11a3951968867c647f021f2d43f0b49a123047279d1ee52ce78c1fbb0027a506776eccb1ec14cfc2bd6d4ea89f5e7a76658d2835f2341f60bb3e691f2e02bc6e57c93aeb9362a631ff0f6084129368db378126fb390ec0de7625de4c53f490d0b589fe51b51561bac70e6b2a897b140337316bc596eb032232a1d6711e6778692aeee6eb6bd39b0652c755221fb38abf2ae82049110da235f793086de47562e8d614ecc660d2b69a95af999307292cfbaa16ce17504fd653fcf67b2bc1ea8891a7ded74d94502a5a335aa30ba928a642a3d74b378b975585c7fb8405ac72174ccdb64ed1d984060883a9880cbc8fb88e33f5e43e29cd55cefb323c14a7dd65a698bdef441b929e947f45446fbdf195cc0ed17dd70d0b8fffaba76d86d5ed31ff113948c9a47446f436252cfb809dd4f47465b7ef306941d4544653365cf68439a9e6564196252e9b7058bebd92190df1b1a2f5f884949545093cb77e0b4ddb53bfd5da274dcd6ba56987c4c51a5775446ddc00ba87add29864a4ced58eccb957cad28a93f685786ccd1d142d01dfd91d75f37545c5716a6717dca24cb4df517e15c53d6e4ce351d3723a78b00b404aa01e868797709be9b41a6db4873769bf5ebd9cabc5d0ab7ef49169b709905931be8c7d5d8cca417082f31df885e0d279778a78f1380df6064116b2b77536ab6ef332a55a7cb6800a2031ce6c29375139f4ac201ff036cdf7648ca9ac4fece283ba938f06ddf6c1674fe963fee6aec096836da182e2cd81d51b1619fda8a39c75e95388634c39f45147c9d7ff2c5b6eba203fa9473bb503883b72537d8c1ab9592fa48a5c1b22222447a8b852fdcf21665e92f00548912af839c7164e557b176cebf2e5124428f1a236d55b924d9a3260ed85a12bef57b59b469d8d78f761d723912a21a4da6e2b4b7cb0e4bd1497c2cee58bbbd585357bb1203f163f02f62f9275a90668e3d1f8235dabeebc2bd5b488781bdf6a99572b40814024b65d8e7b4abf93ce273a4b56e1487e2e09afd41a140a07b4a37df8a26f3f0f7242b01732054bc4fa4777ab89d51df22d99b4c6c84694057689d262ce316b7fbca253f52a215a205059e1c5ae83cc1f298938dcaba5523849950a733ad8caeeedf09bb975e894bcf0ae95da052b81e10b1f4225fc7669ff201507604e805ad217157114a5020f2f7e3c7293e5ba56c762dc5bde984736fa3bb9f6f5ad4cf64e4d41e5b985e692e2a84d3d54443e37bb0a00903ed9aaca75b9b986927ca463053974c0524f0f6dd6c87ebaf1d4d1cb7f3b4b230c17b05d084dc69831663d681e863588ac287b9fa789079994971a2c5372ed29aa46c36f635f64e173cf17c403016f4a71d929ca1f039c7d99bbcdc53877a0511e2a284d7bc20f2ec0e73da5475fb3ea9b016723abed6b961011ac160e5c83b311cb7a2c5b954d67619d98764e8be541bcff070ba70477f44cd54917f165581e846a3cc389b312ba5677194695ff30d20cd3795cd0bc5a8761d7f0c85c5a24c880f50a90b0affa4f336fbc9ce84023a744d0cd2a87b7319b7af016fa162b7c7c7441e2f0bb8fd8c397bf92286e3f5b5c20b45dd4aa3b37cde10fd0e22d2f968c91a20a4fa08e1fa02749c141b83fcc3dbce029be72ae638960f5cf9be9901e8828a708a5f1694f6b6711e6d1072e2bf8433f66e3a3aad3b01993dd9fbc5653ba790034ce5c6b9e239450ee44ad70e1e9a0d0be5d1ac136538b0c6740847edb3d281e737af78fc0e1692db4cc3d6a204023a02ab3a78581ca7f2ca8b03546bea40e3000b23285195d218fb7cff2b8e964e093960dbc0f645f9cfd527cd2b702a1e5318b2d5f8496a4a8b308a6b817b1069f5ba3f91ee85b4ce02583b4682428d9cccae6360cb115fcba1f16b18b83927693e0ac245c00f96d7a5e42281eb63724f4983d725621028397974b5993116ffd3f8beb67300d60945b0c281e0377bfefd7ae0e81e6292590a0af7d30d600949cce3b843a5ff3246d761ed70a216ddb51dc01694b9f1b3e0a004f99c89ce98ef1be156510874915ef15025c62aacfc1e3767bd98bbc725a3dea7fadff338b9166f0b2e42a275996b6ac2072ea4a1c9f0891c735bf79d5871f2a4ea022a04c53ef1ba53f44322cf90859a9db453fef0b4451fe1fa7ffb0a338e1e40d3766986c234de8b0a882f1613c8c7a6ead0f79a1f43060432d1e3c57aac492cf6ea18413a4b0c7ba1f73eca28bb5fb982d318ddf7128404b765a44427f16886db4505e92f8145f57b3d41617fa5753e8572cbb38cedf57e7a5d36d0f2045ab442cd354eb610aebb0cb172d6750c08a6ad84fd3d053cedc85d21f8f090ec183a45ad2f029a776b36e584364c56c5960930201d419eda2a8ff9de52d278af64575c00ec99904a997a8bdedd9f8c9482c3ee730018924da8acec00b1170e84e7c32889e2317c132d2aef6f79f308fcd868187b70be87f24bbca014f5a189f6dba2b4a51aee9a8dce2490861f3133004c9ad8415c4421b5ba5d4ac4c218b541b038a755136f021c6d6bf23a327f72422cd5ccb462c70791b1edc67ccffbeaa28138287593594973f15656d78a5d445aaeb03be1c43ba9375a5db0438cba91cfb8b074ff2e1924a25ddd332af1e2f540272e9c145fbd9d7708923fc7ccc6f58c7018bf48f87979aba7a51e118f99226328efe813f3be4b64a40d3d662478bcdb249744145dd5fd78af82bd988c2c9a0224acb521c1d63d431b88dfe71fc5a5750b436799138ba698f3caa1a6637035dfbba96b0e7d1e30f16d98fff8951a9432a32a2ea3ab3d6dfff6a9fabdaf8ccfc2608e42aee0e9312c805a772972f6057cb597f6ba606e1604078ba41b056262389a22962949ae39bb46a93992be6a8d7c5526017be79a3b7af2cea069dcbf14cd83560272d1af20cd574576737139b51cebedeb758ac48298332b86dc91f20ac02b5a7552537b832963a130ffdb909acab5f4240002aa8d1f241be3bc35c2fd5db45db1874fa28c3a7c9f705dff72a8c1e943bfeb051cd3f422c8d009d82f52966c83b6ab92b56ce7d879f17ba1a2bef2e254614d9b72d2b0a68ee489d31afa4fa729cd0c24b0ef9710633aefd33fa9ffed847886bae663971c9531ffac925d2564c8e7cc9a2edd89ed2469ee5b28f36de3ddac2a1598db84076f7865e90c8fa0bcf2e9947b4dbe439d9e1cc8db85c75825f4261aa3494a166b444331c4119e9851eae23ec2448e6952b4cc774a0071ef4ebc924bf41504e0574d81fe10ea1bb286c546a0ed3251cb71a5649bc06a83975b31e6731f4ee604b5482559ec82d2e421b19401256cfd9880be0b244075d4549a744ff1b6da988475c179085d923cd75c7900090960d22afae9c9cb4a211974355c3d0f0d2c3a09597e2b2638e8b88d25abebb7a1c5b69eb7c79bc2c137961523b180dcb4ae1cb4b68da5dbccdd2c79446ac61d5b4ed960d537ce75189f9e100ed5c606b1dc776bf15ab473f6872c88a4d840a6ad9e818a2134f0082a9dd5af798918ec662c721127b3d404f48d59dff0bb09c1f8c3a3021d1342973ca278f0a772475e7a86a2c2b4b9fee44774bb94c4ac1dc1223e497b974f4d68998f06a3a34ebd6dd2fb51e1545ea0fe8616b603b20e8ef5efe7433d3d6e9e1080c7b9594debb2bf0f727d3cfacbf3a10c8d45d7ab9727d8fc08fa4765d3dcde8cdff94c363064230e4f49e32b21dc6d46f798a0d28f8c2ff8fc921fd16ff4de744d1a4a4ae6617ce5943f602d4d66450f2255c080e36cf60cba94b4f03ffe369a69447981dee5f67ea325c9305f8ec2b4eebccc0a1342cbeb998f4a539fc8cb0d2c5e5d9779896fbc409b5b409dada65cd06c82be47bb26b12a2a029a1c9380260a52485d3f5debd095888df244072d5033000d1496bc5c646ff21c91e9daed3a1521d8b7ceb466016061e66f951de362576b99808325afc25df359b4968f533148e81b43beb075eb789cec7e5c083cec35bdf8216d63e1ec462de2a92a5fceadbbba3763bbecffc952421c48d676c92803c237f64102f53eed44c208a28d9abf3276925afd2bbc93726e31ee6439363406435637c37f6a5e5ea23ccd6cd590421c98cd3dabb25986403fae56d04c165171535fc2d25e82fa4017fd6cf77614e02e3bd1b2053f2e093aa30e7d0d2de05fab7509a383e1e8aafa87ee0d3d133b05442a46db9810ec55e75f1a029d745eea137a16f72d2869b5e01070e85b752ba9aa5fb0c0c4f78f507085869ef9dc84f401e67caadd30d659664a180222e3b65dfb3caab3a2004ddba01cd5eb86e754b11fbbfa91d6832dfcff1db2a62ae1462a47b8935bc1784110c2ad5af0d26fb9d7c904d0d91b6229ac2fe88c32d9de9bb0f14ef2ec916205b23715e6b96558810fbabc2b5d191fca0837e8e06a64d982ff1fa49ef3850d874f699280f2f95d1207a5eae683fe94337c4bfb2cce1a85eed65e6c4fd776fbfb05614b999f30c6911de82f320ddcf6cf748de9485f02397a55ff9a1d6cfe7e4d40426ad262605f95ba2257d961f7fce87688cc234ad7d938dae52e12f3238c83b37f2f499719dc437446c1d3c29562f79b7d12beeeb5fa038535628d79497d97e5ac15d93a0691e4b4e868962f36177a2ba8d9d4ce66b966b93f25b4ac90cc0f8d079afda0d7677a9aa18d090b81dccdd70344ec7e35854fa0796eff536fc50e160628f382d78666089ab9a7e14ec33c1751b01e96853e0c27626ec72721a2b404fd6ce2032254a5caad7d0a8b32c67e6e450ed7c56f61df62f28633b8c1c5733effe246eaf02ea9715af4a3f94ae303521524da7de22e7aa062b4ad3579f4172a03e9b460eed7588889d8bad2db1c8e4ccd0c5c22ef07d13d81d466df9e5b213965e8bcd16a5c4cac34744e96228462cd1751a8988116f594a0edfe5d17203de1da5309a2a45468f3a10cd68430f04e97ace69836df9c68145c92652112b17feb76c42d51fc2f79e120b2574bb6e29c002b7489e93bb0bcb642dff879383f0f09ab56b1cd656dd66d856722419531c1f19a3fad4073c7bb64b467d1228152552bf7ea6eb24f3a8379e65d44f1a5b8bc93f2ff96f7d623a7da9773683062ccfe76baff329af9831c149ce7bbf90af043b888f65132b9249158d8089df6c7668566cd38b07e2b293f358577631d091d6661bbf0ce1ae2c202700aea0ac340a73b4b14f6166de201c2142902cb8ab9170b3c3e4dec69d316b341182ba85c976cb0ca737b339fad53097ef7d049cf4f9e7e89b70fc6d3f71d9c620ee59075336c3e7141186f94314788924aa312bcb32328ce4e9ee6f19bafc3170cfc9e08358529c30b8678118df25343378cc2abac95bfe74d89ce126c329bfc33bec5196414b8b04b0d725e920dca24e27452a8ed88c8538ae8ddde39facb8d65f22bf080033c8252861acf24ed0a1a796780e1880d0c6d4ac6968738dbb3a6c555b0b4f8532f0eed0d48ea28751f72b717ec30b70beaaa2d4e699ac7dfa0eae767552d67b3bdb5ec79d33dd6892ec7cce046a832867bc614bc79b06aeb28d9b27be6ef6b972d006eff168a3b48faac4a16ad66d261409ab2ff195c324ba82ba5721be8bade99afb93f6fa035dc30dd73e0a13bbb225b29814c15beedbca60985b75c21f88199a46ba8d0c4e7da19dd65f4f140155c3606c8749ae08e8e15f99cd6db16ef4605056fbe7eb42d92bcce84a12e9c3490d1bb4eb81e711cb24acba717587cb3546ef3fa1c57693d6819dd436cb43506cec43974de2076d6c3b2e9407508f1d2fb5fb2d2b117695ab196a2464350d61cfdc3e8dbcdcf09cb26523d3bf96fe87a8eae6c1c3f5f42b3a2ee2adcbca004cbdcae942288f7e8acd4429e289aa1c15d49afb9ba18b489c8d2315e40586af4c93374db2fda0f785295bc777b69213c4108fe91fcfea833939e6b19ea4a5d32eb1d01ccebff617f98eb5c9fd2ab8403ad622113495e5228ee2bf15861f45576c5e7b58493fd66e3594123dd620f8a238c272ce01b81a3d1a1ae364dbbeac988f3de05b67d16cf75e9763464c1c43075823a7ca6d37a76ea4325684b8f85bf9217bd2aa1517edda0c53be17dedbc822983b6a17caefbc5621955a5af49bb4931821adef6a88c94fe88c17312a21e7d1a0e679897cff5827bf26a00b4017b57ffc611aafbb08451d00bab20402a08c6ef2386dddd9580d5e8b7032db15863f12928dbf824423301c4eaf0b4c7ed4dd7ee32ee87c791eebd2981f09e06d3b5f0e10df050bc1de5d2e5052ec74a51001e24a9d421280202c9889dd3bec476f3826c99c52dd70a5f829e023830130af4dcc53a40af4fb29beb545de315407035773825aeed5270f01003b66e4ee581222c318afc0c38c20701db4cc064b7261583391ef6027131cd10899df5092055b03d7fefd21afa5332f4dae32efc15c94266f32afe81b42932bf55fdb30b3e232019afb50453a70fc82d6c9c73762d509430ac18acac05db33e6495a98a93b40e19900b56f93de3e916665bf4bdd89af8ac530342ffda7fdeafc03a17694677564113ae838233d1e13016bbc7a409aba852d29af918aef439864c10f4ca1f51255663fcb11e7b3656eda7004bdd405743556e14ddd1461beb0cb34000fa127cc8598e96251c7b40b577218d9b5a37bfc9051aaa2f30530384be14f0b1e4350312cc7a4c6c19643f41d5fec2936a3bee623d2824f8e1f2658a29081d64662a7f2ff09a60ba9092bd95c5500147a5a76d932575691f78ebd01d3f9cef6aaaa204b5683033f4ade90a7992673b03bf1cf0636465b9049f0548b32f1b78ae21bb01436f6121a9f9d779a22319f4f4e8af06ed71e8862cb6d21584a5a8ca133f7718193cadfb2fe792b00c27b1c5621698c585787dab1c0e10296e7858963c6b59b5c3400f9948135bdf5272450b5a6c6804b1b7a95ff88e47c26d64e639f3ec9eb00c6349a1c70e5e45cbaa132aac8389856f4dafbbc72d4348fd7335820cbe812a989e2d51e45316985e6abd06a5514ef29cebe184c6b6f92e8ad847abda468f6e4ea671a41b17db05b33f77d0e6d393ef45056b67ed96b3f307e4c2619147ca2c2d4c4904a9d1b91edc26cbcf4f09f8dbb188e5b0701eb7697c2b882cb2a82403717ea16abc8074fadee32082f37b3e654d5cadce55a245e75f696bae5fa23c66c586b8f0fb7477ccbd1abe8a286b028f8a09bb7ab1aa98678d2fb3e6aa424ac8a9bf9bb321cbe168ea9343e5fc4d3366aa86f2f3d0090dffc0f4c5df7553db2b588da3679d8e552e4cb235b657c678d4cb1c2b2895c6b90d369f696ae4ffa54eb255280d9e1da6a8c73431b9b4ddd0a955cbecb317c459a1934b51a6d827ebc970d3c0d7cf84efd8f7f1bbbb3fd5077158a5bb5b0850e7a1a78e8ff492af12ce65657f735136e472494290beb05670966f0245931b271a4e6ed7278afbc58e327ec72faf765aeb35c20ec3a3b31ed8b91a6c6eaf7f6d7045f500442875f690ba4f540d0085dfbef66ec4089070c8bf0e4b3356544fe76ec978bc19050ae8d6d1c99ccebdfc7b045bd03f8df42ac791c52605d2e6d8ada89e82184452c094d0d21b052aa858e474718672bf27cb50fbf7812ae2b46772ae9d7315194564d03634a837be2b47f1755a963ec36eb542d9b5618c3f87dac7e9bbdde08597724e2029d8d142e23d99c39a24dbc700be38a1e3b5aa37924866a76ef489597c2adef840b4fa21af5922eaca11f84483dbc8d9c3f35324d8484aae361eb1ec5312c73feb9294384c592fd1b393f32c257e1fe4e205f3cce188f1b6924f4b675002483a436c117a2a43800f49bf8515d45ec530c9408b14da8d790aa3ef63449418f27dc85be65f80ba2901bf75e01981c15d6095e02208d6a84a6434b0a415c64de0049c476f0035062f470edf907a4d1ea5c1080b56bc4e8d2a85e085a8ff58e70ea5a1fafbbe89cce7e05ce7e92395fbb46f0df6bd4b65ca6977e39a275a556fbd6aaa61e4a4b595328e4ec78232e431e022bdbc582c201fd16bccd5793f3d2c87d96a51ed16a891ca525bb54e8a9089a2e6a1d34862b539d40d0bdd6fe3db6514b686b87ef1be6fa2bc83281714fb9203f2bce82c4a2bed8a753dc86f0636ce785b54becce2665067e79d87973ad46628cc2cd06ce3a1b1f1b9b9837dd0335b8799f9b26e4eb93f32d1086a1aa46c5421bf231e728f4bf20a42f2df860fc027e86c268d8e78632f72b810dadd710b8a1ba88c4ef739fc335a5dff23292f42e7488fbcd71d94c5b5aa7f03d5608fc47055ca8c686c819c8b6500f2ca2c03f5e02528d41441276fff69bea43e6e84544686f73264c729d89783892c60b62d33e9938ae8515912a9fb7f64bfde858106cb41443b369da9c74dbd62e6224066818313e92dbc0cc86e4ebcf51f3a3c988bd2e3ac186eefd3eaec4b2685c509e362ca0934f26b749ce66ac9930fb7f20433b7649eca56a19db289f9df0d982d07f8dffdc950e9d2261b46fb64e76cc629a6c67f689806934541015527f0ef6f6d956be61823854969549408a64ee9c2e9efb6ce052460c77e2f5a0cd9a3079180bee7caab693a9de5cdd173690d15170884701fb2dc93d837b5da5600eefefa98e47ef5a7c584d255a2d6e408472495f60b6a9f34439f875dec693e459561c60159878867ca4c33d9e756b9d8fb8011fee88d8d0ef774ca536e86eb29a7e1403ad95c42b4a6a389ffd0bbe3674237bb44bdd9ca0356f1a78fbdba6b819741d8ee50abd2a0448d429e5911112954118b32fb1d7843cca0a7c625552eff28a66548fd74a0fba285da9b3f0ee570150471e375e3d2fb19cc5260d9d817b3f16142a1b9f26013254fa807c582aab12b4e6c4ff5fa5b4a98fb7e99f9a54d4b6777f204108c53dc395adc4820d764287c46a1d25f79e06b31f209858a6e4d18fd73a6f2362309962b0f9ea5c1576cea8068c11ab9d040865588683fa6b91f4221c174d24bf7c1c57aef1ba65fdc3776c6bf71b2235209c11ff489e6b0d915a7a8b81406be7205f49178be35187398ad91a22a0df0699e4a27d8a4e2edc2169c72c0729c71e74de80c9a63e6406f9c65f6300219fa5f9a06e59c14401e8622fe103337aac0f92aeae6f6e07d3a0f7a733087849c07ffb0b7345ffc82c5b9729f5b15bc0e68e9cbef65ad135ad86f7476096b436c9184cdda5d87c928904da91b8db46f3e9600ecceb13b4172caa72cc0634371bae2ab2b149cca742626c3b7feff753c76359a271aba6294dd2a26c302c961ae5ef785086425e128c03b27f9677220e16dfb5cf2e4141407072c54eaec18a4b4197ba8422095a3fceed4849891e83dbfec38507c8a623f82740ab459fcf9aed28cd98d0d89f44bbf1b12500c6793a1c2e9af308c5b80ac34a03f579aa0df729ac63973294e7d05aee1f3a750770888a7b6f03a100af495e0f34a912de288e2ee0b71bc5ad32f38fbcdad41aa49a43025dde00fad10f599dfee6ecebfc25bd04ef56a2afdde8d6c2fa130c91ccf91fc63a034cdac1da6bd3b2ef66a0be35e851db5815627783f4d97e0306b69db5151d96a880aa4a86f7ac18c7b26d18702aee5f9f3a7da987cba97634d1068b11cb8455fb453612f15d681ea91798ab2e67c0385640007d697759a406e4ea5bef581ff5086d7a7f73a2321faefd352c3442c5b9468d0eb682d55892744b2e8cd178dbf9e5db16f79046b64246ea63a239bf8c261994c4d4e25c4a4d2b1926a7c96f69f6832a6385c16d2beba9b06a9300d01a91c15c204de8cc64277faf43fa26822ded5eb7298dd46ebe65a9e91db992947a82ec4bb0fa27384c922b33fb6653aeb707d78f5c14a9f6aeab87919bce91ecf164912c0b7fbebb1180db2ee5618d9b65b07e855a2f798370f50fba424a10cb3e5131815c9279275f735ba14f29e662a26110c4052fcb599ab83c56f0628095c71f078197b42459dee79e6ec70820f0b319e47a3c4d124cc484ee8149fe3c56028bddacf55a8694733a503ffd68691bcdc0d99a7da68fa5e2841d6611b897c73ae301f31a092a1364374967f27177ca04e1f31f46f0046eb16d7a1d2bc1f1013a52e2712f24b61a85f0254602313225551791e053e91c6bf073ed05cff559d1e41ea4a42a6edd7b5191232eefe5e10bc34f103aa4d38f99bfc93af4c4d169dfa75729abac6fc10d4140d67139d621151df70bd120868c2a9b048ab9c49b5d6b0fc846e6246a7e8bbbbf6114b9b40f43cb3dff9f0ada642c66101863534672e047b3832323a30054385969a1feed90da98bdba78a2f87bf143c8c86dc44a3264c22bf632a99e8ae1294141b8d268ed0036b045afc91a47e5db345c12683dac41b9fabda253a939cb7f926b60b314757d36b7e69d9a12940d783bd41027b38a2a3241a31650d8f2248a152ed4389b0b4fec53387f5a3b02181e24184b9094d8da2a5c3dff323ebbe989bbeb43e21e8cd9b26fc7e1e7d30f2176939ba270676c28bbd2618aca3adfd11e448cd68468a13dc285634ee7b619f834805d5fd91ad993a392a325383f81a9f581738278f0916fb77118c812a37e9b7b1795875e9df594b280d8843a41e4b90c838e49a3ef06f025026de79498890a3ef5c1299cb83ecd2464bc3d16ee9e8823cb4723c4e01a354552570d1300b990a02610961efc4847899ea9bb0ab6e341de934d031a0c426633610ff157d6f0a203c515ed84bb536fc3a81cb6f97457fafad1eab4e19bb08e3cd60f2e4df3108fca83a52f612aef70a52dbf4030b8b74d07924aedd25bdaf856d62a662978d6aa2f03b16ff81ad80e09aac02223cdfcb2065a0f79241e9db37e27ec7e5564fdb856c6a6bad113209803e8dea43b8d8039af0b017e68c72b19423f14fbfdebb1fa700fe5825a9aa608b312adf9a4b47a594bc4c18218ade454a5617e1d049e356655186fa168a51ca70161a3db44eda5a564e5bb6db828c484576c504c51c38fa879421c0607dd72cfbdc2ad813274aee3224e9ebe846b1ad257e445f1ecad47c8f689e70a4235cdf0cf9ea5b38cef9d41b739eb3c032fb5c2fa1985bc2ed093a4d1d6f4f39794c4cfdcd50e839f27046bea63009936fa71253964b7a88e5b237081e9a8026db88bd1fd00c87203a665cd7a5e36ec8ef5de77e5ebbaa2767554135e98c6b655ccb633cf260fb7e677eb822a5816b6c621c0c1809cd61aced40ee673d5ec3b0b6d45db920eda6c9bf1dce928ffdb07ef3165cc928e46ad91808f5c38758d0dcb3fc1e44acf0b5237473f753ee0a0e6f56a322f0f8db4c5b7fcd36d1fd3abc9f8e2cd3b921c5f43d311001741f1ec77b655ae75d7515a00a479fee5193604f4c6eef66f53fad14d363f812fa4916fbfb5c6a908ad0b013ff71b8efb0faf6ec350bf10b5ea0ab4640571cefee0ab6cf6d35c153901520925b1e9aae77682bb7ceb956a3e3e8fc0a50293ade884a5e1c08bdce3ea086cef61d9f909bc1d6687b5560ee43c9ce6d033d3e8fd179f00d1d736cfec0f248fe10d133d851d04590baba9b392e9b7e401364f628c87d0d438ba0e00a3df62122ce71c96207482249501cecc08be6d22003d4edb4f847ab28b693059420a5b5d2fe00e62a45466af57b01dfa1571208a1903c65214ba94f589cde9abd8d15d5e8ddc01f7334313f1edda4892d2693fffa6973bc17a669bc467382a945f6ab971c16521914359b180f9c1bb389e3e88170bd6cbe992b772327f993c18a53182f0f420cfa8c1d99191dffd4bf5f8b4a75781c993cced0f7f4a1bb590ddc122191851ce38775141d7a806cd53bfdb4e06ea9d2629c3142507d198b4b4ae9ab54c5647de2e2ca299f64d1ffdc22e80edcf012768c66747d43dbc6f585949b185393220ea409507ed4ea362f100a1f62389a255957c0dfc2ebd6ca6dd9239af0e64a6c47f0b077e150c44dd73c79f74cee5743c45f10300514f9af43951ecee199459eec23c065d8b4ac35f4a3712a9b4025df58ea0988682e80814e4ea3152f4cf108016c197e06a229e3cef43993c4db14568ee19de3385e08ae2513fe2b8a2642a35dad3522ab3692ed361541a7e7a61e1944e22e79a7cf2f11194ec25c078bb067e97263def211a3e2c999165b38457107fd7f406fd10b079d53649b4a3795713ef0844b5d95543bae4c9cbeae013fcabe8485daa2baec7b6e6ce5583e4b7a0ce8583e76756dae8a4656e084d7c74ecc809799e66e707ad40ba79301667fbfdd90fdb888339dd26eda2d22c543836dac78810dd80010d36f70182492325acca33836cc9409e379ac286f3dc7aee24eb3233233eb0fdf426efb86527e8b13163ff77c20094310026c9fe2e23c2154c01444bddd3ea33370b049331967090b5f1748fdcde5b2781cf4842f0ce2aea01dca53b0a1d320339e25383f580741f8cc73eaaed039fe92a32917fdbcf2fc03cc83117985f3ea22cf7cb762325011f55e3391a354c67992884046562e8b2f0138ed34e011ace13d0e6bd36b7d111692846167857253a610ee144d36b58f853c57223656cd58dced59f0c0e5f4279c85994da310509cd8d59524a8552627aacc5cce587c13135f1b1629a40f225e9816b64261ff49951165f5068518bf1952e616ba4d23e429b83494e68b84012563e7b30117409207aad80b057affa0abd8b78e51e47e07a508eda1abed38f0dc19d9467ce97fec85e5adf058c26a8b41d29ff51adb7f2864b260f817231c1f2e3115c4d532d4a4258f09232101282579c107cd46b473ea40cfa77ecffd7f6417d3c327eaf1f2c8955cfaf0398031618f9e4808b7e0d6d3b7c70fd5af80c5b4e4993ad918d4c8a4149a0566e4a3ad7d7b9a3bc90431e42be93fa89bdbae8e8550f924fe06be34362e58a4c611b2f567f8c2ed9eef2de26613a02f72a43b5666c894f8f604d5b7a2442249c82210a726e5d11d8b9c2d1bdedd558926bbea2f4b7c1d27ef8d75f8f12d0d23d6a36ece4074cea0de44e2187a20f570199db0df81819d6a979dd2147f5e7c7e22eae63d439a660adcf9ae927e499a8242076d5ebf661045a6b4d947ce20e3b0e063348659560a8a624511f4183d628832899c5228353ac5f25b5d906d38d83d9fb32897e140a4738721814d2dbf35a493f17b68541811347364ac695a9e6b0735b9872c78ef29bcb4edd2680335eea5a2094524c4e122a753ba4ffeb02dd18bae0a02c036e0ae44d1d1012d455636c450956a23d689c273489ef56c090b5469af0c77c7f2a4b84edf3b3d12231a18068622a3d65a62dbefe4c1f24b8bcda31ce8cdf92a7ca8038538710e6d6b26254137a448625eae739108d30b72446051256b67aba274ccc18653861eb4b489077b2d7af92bb18e99cb9ec5863f5b76d4d71f2ff95aa3dd1552c075ebd5d1a1b9a90401c4b559671fa2a0896ad3487326980374a38e30c490b8b498eff74a56fee8fcb275fd9fdaef06c47aa01fdf26ad41323a9ea25414f9c0bc6a7b055e03eb320f44c7fb60cdb156780ddc63f24b224acfba9cf2d827bcb3085a2732e95f8c04aafcd072c63fb94f0c18d1d544d610dae22103d4a3a821cccc04110e470f539d60640d71bd32a8483aad7bca705184b7290119a9969820d5caac89ada7a881c144bf97b8520c742990a822d097f6ca57cc2dc835ee3a389e05773662d809143167d3f987d7b84808b1dc31b516ade1e41f8a11ba896a5f04f3982bfeeda91edd73dcdad8acced043193424a496e748d8706606a83e8f87747067bb528f9b28e2c4b32b3e2964622eb362d48bf90aae65ba4915f33732044ff2afc31b2f98a9a65d0356f2a0a154316bf172bdc0817f6b6202313ce2504a834e7420e1a152a742204669d95c31a08db32edf4d0a07e1ff2f0909fb8f35cc36a4395cee003fa6dc59ce9ede2d7f78a4938df5575792284e28d38366ef11be3aa4bac4e1f9f19b7d1d744d5367a0a4132a674443996b13890a29cb5b2b60c47c902ba16938edaa07b82d15d2cc79ced902704c70c8820361748cef28cc321783c73a778e467f1276922b11da4d2550f311d26d634b70ac4e95c0cd19bea4cd3884ea644c41f475232b05b83c1639f42c5e94e6578305d54a2a716205b4b56f12a169386a80eded9259094770ab8261968178991a6a5ebeaf15b5055987d4fbb8897223f91172458261555485e2bb19ab75894da193b66098fea2811f14f95854b8b8a3291222ea3debe6cbcff1d26824632a4ef435c633c5f804c44277876809af4678c5e4eed6f2057667172eeaea5d11fdf9b025771d57f10e9c02483bcd4eacf7c01baa347238a47dbded350f8490619575bcbe11ec838038144ea23c69bf027f0a42ce3c15f7371921bd6a998ce8b70bd8ee01fb7faf687112f964d7a18dc43b0039dc66412784f24a7368ad8894125a7dadd48acda694cd9a3b0c3776dd5e8e96d59def5bf6a0cd520b37e977d88de949e289b94d52975c59aff7c05a1222198c6b17150270f5b1079bd1b1d04dc3c38cf50075e8eb4ab1b4735a398f94b0620e1f6d7384c4bd9ebac35a2dd6ae6efed1d76ea20e756e0ef3803ea8bdf087de5866807826a0246916d3b5c3f1177eaf5a5d4db41d7e7c085d40a5477d9aca7ca8fd74db6a860253b06ca83b37a3e78f24c21a65c58d6bf67b1538b89b6592bc22836af869863036392dd8ef7a6295b862a5fc9f7ce929a6d429aa9b74cad89fb2f78e24acadaeaa09d5ec956a1ee62d0b06801fb4fc49057254588d49a3d03ed0d9db7de06622524fdb5ae25fe5c09744a1f080d36f7deeeb1d8cd9192c0dcf975cd0993350b64099aaa9473e192539aacb6c78c8cfae0b768d9658d38d85bcb5ec9ebc3e7ac9a2d48a8d92ba1b32aad691126e206d28079ab0d459b7f990ad022298a5fe14e9a3d5cdff50ace4326f787ae0da010adcf0105f02ea95561baa3eb620d4532940c29cffef9b3fc7e28b999fba8f9631643e45be8ce691eb706089809802cd14bd92c79b53c0023fa11b9fbaab01e17f24081eb69aaec6ed1137ef804606a9441df47a44fa8c482f62c6fce4da209bdb2db0fb475a04cd1d9a87c5b9d4efe40b3062216b3e4a2849d5c521f1e5376377230c66294ce4900ffc207346328b6f650dcbf1e5a9743234c42033c45bfdac08ab301f6b33e39be72b114ddfdcf0c21fa9b5d09992bcddbb0cfce5d269409dfd67573a7b6f5f41f9bfc972c82815527284bf64a4410f18d5a7e5c137c66b1a5621625757cacdc2260cb5b02147731a301761bcc20d1b8db2763f620d28692011fd35c07a73b1758598bbd49134054cccd8deed61034bbf945ff2e21f35d131a08f35ae908dbf8f4e109b80ec7c7680528a65162bdc324bb9a42ff2f5a197ef5cb1fb3f94bc10a67101735a0db80630945f85e1d85348e3e73a59b9adfcd1e3c9685fdd6fa0e6b27fdbdd487229390d0a10bba275748d42f367aa7b8924f2e6c22ffcb61b5e74b855d92326f995298debc39e7a4fefb9ab23746cdc06ee0d432604a745a0764ccdb68f2aa04f8de5ed13dc8593c817d11beca886cdc4831f07ba28a73d214aea38ffa8a9f82b0efeca10a3f15e61d684401571d5d344a0df140b453ba8455b01eb12bdf0ff83022fa742f6d5cb0d70c22cd5421891654ba9043119f74bb0695a261b92854b79b792b6de7f1e5be6bba1a5352f1da570d174955ec12d85a0e4a9b68333d82e421f04f11ee2e9ea7da5eda1d7db7cb312acc3b4665fcfe0cc404fb0bb3287408466777707fe15a40c0b84b6138fd3dc466381bf2e4334c8e0c5d5227d47372be365c34f0405b0a4dcc92f81a4353dcd1230349535e2aaf6006740dfd5fe197731087ad7fc18a77ca92c329ad8047241587b07810bdc697d3265bb0d103f22faee12227dade85235d7150b654a9d1b4278e17e84512180daedf523a2f0a8add08178febb78bc1cc5d411e6f635f5928e0b16e0e54198ac29878025397009eb1b3ececa3f8c6f01fbfd80ca3be580a9ef1645164076daffd7caf0052ba5f7fa9a8b44f9bb62d9844bbc4d3daf122b6aa3f9832beb33f88896a6eca17a18881bf8ea908cc46a142155074dbef5a268fc619c67615b6319b3ae96f85d59ad488872ee9927d264b97a331618c8f01099aa779870ab8ec888c4befe03f76b0907ae13b53840a302381a3039a14234516688b935a3c11d3b48171065bdcfbe05ed71cc76a1cffe8affc17cd1412ac41c3096cc5f72ae6515ba0bd9d1f7b276308a7921cfdf083fb0d23dc51fe568f0c779d74feacf337da00f1888f3e1e101227a8d79207f5ce8f58520d4a6b2d289858966f019572a2508cb9b381e599a684797a168ac87045173d1cf649857e921f0258f311177de3334cd48493e6810743a9ad25c25b3b05b1a84b5c4f5804c43ec747135405819a81b3861920a207f14ab7664dacb6cb56308d4de3348394c6551acbe12580ab5a6fe8e2ec14ac3877b3eeabb49a96925af2677f79e48904ee91619c1daceae2da2bb52fc85ae23ff4958b91ca9bc27df456abec7b0850e12e387fc4e31d76f8c74e04cccac8c55dc47b6baf1262ccfc83ec6c7258bb6ccfbf35561b0dd9f95e309372bee690cc87aa498bf32d462a1c66d99622e2766de52a682e9895eefa452abf3e1c2f37d7193fd9e5700fd0a124854f1fd1cf9a2d4f645f1294917dcf039ab898c247754ea04600317481cdfc6ad15d56c8c9b261ac1dae5577daaa4fe81fa9da6495c9a0c2d47979e52d00d0784f5f687470dd93d0db9786a029bd5cbf257ebb73b04a6404f8d1620b38d23ec6cb9570b6409e4ab27a257b1c5ee384a65f4685ded9e9f82319c64e12f65f5eaf6998ab1f2e0231edf054cd130d64784c276ba45da99a2682c92e70e5b4eaaf6563b37ce925a15e4b298cf3b426e10a2e9fef03c712f9eece2c74f2aa99a48f29501ee82c46bb6559eaaa5e5904c7d2d35eb0aad9eb16a751e7ed32b41b081a8e442194a7ef0d1637a0ccc3588ee0a387f3fd6efef18ef3fcccbf69c202b7f4c8e2a831f2c27622e75da62d24a6e46a500278d2f01b31ab03efa3001f3074b22b46f63b0bd589c1d30a97418e9c654788ced73168ead598b22892aa013e97e7a91d7f06d592cf66e368f0348f3882380a542e68d33170580446bbf5bb5043d87a7ef414794ed699989b55346e0910dc00ea584d7a86393af8ccc32cb40416f4c15159759b5dea9686686b64da0772d85845907033bc06ba025af01d2a8ddd7d7323fdae93b3403846bc070eecc4d3d96a5027598a27224b80428b5306fa43d9ba1b33ca7a38f2a914c1ef4dd0ef77adb47b03066237710ddd09b6eb0f9e555cbec81f97cc195c29392734653a6da12eaad65cb10a8f0cf0ca3015deaf44f3ad933a6e6a838f587f228ca2d9ea7ca870e51c2d2b6d33e97d4596812f6185ff513e99f8af41e3fed1f7e66d385a1198bbf8b021568395f5fa5c80e2ae216b64c86e05b50eaa5e75879f3637c6c15292225578165e7e1c19f7ef14ac33dc0ed09c8bceba58de133c83c1d73a9eb0c876d4c40f8a90ef73006a0ec27202d8f0486ea4dcf3686daf8977f933886d213462243025d38cecee061a26624999c5ae5400c61fc5bb43d67fa22ba4f0b877fb5cc04e36a0fbe8b73851c0e3d7e24e544420ffc03b49d57d5473e8fae086c8653f664f328ec0386983000016261caec3fa18d7b17cf2b08b36b3517eb15cdafc7b03a288eb19989f625e2de821c3f67bbf61c308b55aa99637ad768a1268d0e2fa5e4acd9656bdf7e7cc8d1214e27eeb32999f79a333afc899855ac6bc9440a37c390ea5b9b7e5e3c3e4706136c5cd3b60a9c00e33d921e268dd55b606d03c728aedb9cbc8f7ced1b0cdf5a99c75a2837aef697f5887362f92a1dbf2f55444708c71cdee0697c0e4827dfc00b46435e50406f1b1f82b1e622410f969c83f3479ef7c143b483fd1ae017f68d23e9633caf99b996b6819963ac3464fb41745f82c5b4f826ead7142f5a2dd6c6a109822774a01f002e97840c85ab119619944e6af355919c2eff56a77729bcf796d31e49564f72504e71dfab8a83a10b411c97bc8d166ffe461639e774bff45318df7ae563238f39c49b7c48905e33dee1320dc1e8c46b6f7c6ecf59f8e8c72c3d3743dc689012b26e64fbcabb7483f2400d4a1dfcfb039165aaa749210cc9ab17607b168ef9b7985f700e169b2dc33a744dad1d84644867792cc742cdb0503cc23d7579e44276bb925de2446289bf00caf0889a24a18991d335befc4cfea70afe710c728d5a73fe0c883af630e251cffa1bd67432d75fb29726e710dc36853b756078a24bbfb824c263c0d200df36266c3bd94303c5a7a5818b069c4c192c8d64db287a4cf9285e41f4b56434a2af92b5f2c7cc172e8043416959d8b86614be43fdbeb54b51564878e616e472f8e57bd032e6d403d6c2feff800197619278cc726f3b50d8d0563845bc4945863c8c401075fef72ee30ec2917426ad8737b68675f338a6e2f418cf8350ce6af84ad476b3e03c0e51cdcd44593b89f86a04cdf4871f1e9e1667194cf16d18384e12a76b4086cabb8789e8f584b803e4741f77763227ddf871074bc451686291d8d0e9b2ff1d874f52826ddc4a6688220727b812d099c471e8d8987b28ecf8dd3032b71f413fe7259a33540caba0bf4928dfc93543200d66866a030571e085443224004abc52bd37c19b5d4f315bfebe880fd747c98f6d8b5c38ae4bf9c205b06a9549aaba39b60addfd518abba07505be52d499b88c41a65e0923baaf635ded04810501368cdc3955aded6629bad477c447d0ca8c350670b57993a9eb50677918589abf8f9166e1dbb77eb768367142cd404a78e5f528ab99c6aae84b6b213b4401caa6154b86b53a69eaed0cb986485bd6247419aeff05abef088c7a536977782878949425780dbbfa407ffde5df2dc49e7ba7fe6a82580a6f26886882e3dd5808ca184723d05e296d1f0e721756c0e5b517b9a3b213274b416cb4d0fbb35597e6433917f517b72efb41c603b1d2b7c261fa145e31c5c57b98db7fb6e2f37fb5a8f3a27239710a4386ecf8cb5f4f18556071e6151678ba26123bd780f9cc0e0db05148a02b580898c8db879eca900cd8ecca185d0dd90c50cbba7af81a0de3842c90e66878127a58802fb2b552f6604f3be1ace557bd863c52a60964d10be7c363b0d33c70a9131aa9ba84f042969fe2a91222b98954650b094ee01f361128693e6bbe79ac29e07d0548031576a4e7a1969aa9c3e8e922c8c327e5c56f2ec0eed0ccfc8563f686ea279866d59886a522eba9ea355c8d05f32fb23aa655e1e84231d7feaa4c08b7fd1d64db6ffdca2abb213e9d67d6ea52713293cf1dd2350d913b6a5273adedce1afc01cb12dfd395cdba4d823eb8f71937ea1593982e154b7ea347034a010c22b27319eef123866bc5f92c6bba570bc68ccfa006a7c981693b999b8fae9bd31e1950d7b446d8d36660c3c780c882d16686d8e6be77282b564b9a6c26e258492684a4cbcb80728ce2aeba809fa0da81d706878b2720c6b63292dd3789a304a3712fe362c53a034269d5058f4d1abec4070fb83d8bd711a856b00c815386079229592eceb26fb311808a1f6832929afea1a1b0d54e95e57b495b736504cf9a75bd1f58a0e19b93caee225caa526197c427262fa6d0f9c89540f32d3bb14ddec3b585e41efa954e71568ae875e9f74e4375e51be7726c1339eb16faab5aa8c1327a9ab2168f65dfd27730f8415f8e067caaa40f31d7ecb38045acdd6c7e0a5b3833d2d91e81133473ad05a1da20a79681bb4b9817916126821c57e5005e0270c7c963874b16980a3145145728e0bb42243da74ac5b27b6aca8baece9b531640b1d6b52ff125a6a78957689e635958a770ea29e15fabbb8c81b907c8f8384192459ece372728cff9ced599d70bf418748000a02e3bdef5c47dd26b4ff479a634b0169f257c0f086e6de1d0e28dc50c50a27084abe8838cde8646eb47ab06279d69a121eb9379cc1e09ca6fd061596acc1d819fced049555ee3d3c0761b553cc9eca2281585c2139de16bd87569dab6e77327141f1fd3472d639852e104d68049e881a15268181e66bfbab299eb799ce560dbf5f2392e394a3c5a575dd2fb957dd784b18fb2470369b7da4d77aa5562690884a4f779233a382df89826f9ad30d9628e93040d92023b27979fa2b97df748d71392c24baea6f419444473286dc3671300b08409a4aa9d40a52282d12392a5d1ddbf535c900f9d53191bbec6937c70ab4f3e422ac976a5a1f2e7acd6ef73cea7cdbba88504173f0f2a6316488cf7c4ef1bea7d76ff2c12b01a8150bc25b981e3144810051bc5be382687ee641150aaa6b9f72ea4beb896a125faf7cb7f0e4a652df2b0dbd77e6510336698d7a1e239bfb3f9eb547fb54e4e55dc9ccdab005e51ffbe1f5d34671f2860488747728ee23e854c8b4787b5e5c0d514ff8d8c8becc90b60409d4521a0f0751de141f17a50c25f86e6b72693842430afaa8bf0eb76fca357615d6b2dbbd5bc647b67fef98637d83f989b5b383b57942f0beda220f5f919ac905c1781c1d43e3b7b64c59125de3dd1fc90789dba3ddb602c8019ed31d84863c7d38e5d57cf4f1a72f6530d623dafff51b539af1d26f4231c4745a6de4b8793f72a0fb361573f8bbd31e71ae1f4f365ef97719397386df62071b0692bb5eed7a2d878368edac1d572d9d6809a9746cd79a3ef8e484ee335acf9a02940e658ff686c816731afde79d5635c930b621696b4a8e53d2b911ea80eacd85a2f2604ec6f30b2b217d8f5d7044e79cc74b0a679e93b0469d7f6a42d2f207cfb500e49a2e6afff77ef560abf09c3b009c884cfe9cef91dbda864c8ea5066c4b732b637991504529d0ba06c98612d24731b8c1b3d673802655bc259721b7333001cf7f4922760e22088bfb2e2a90711f8a03a6e282cca9db450a67016d87e8538355e967132c5f1deab2af43691d7b6f8e6c03369c258f0ebc15392ad3a946033093871762c01942387d79939c207d44ec598b281bd8ed68f642c5cc7c05ee0688a9fd36ab2ffb26bb303771780f07ba22da0da8991adc469835f3f7beecb1cae44fb4ca99634a6bacbb5770cd15ac0bb8f381a55a6984f22b3e13f265c83cc74e4ce68b9fdd09b2318807d6d96c751367fdee49d11041c8a13a65775bde21c54a65d1d6732098aeb6fcddca129af480cd82e9e77acc8db315f7cfbc420395a8eb4744d962b17b518e089f05e5d369f393370b6999c6f974d8f78e227a9eb946140169bc968f2b3a2a7dc2ac8ea32357f4a00fd90e508589f088bf28adfd281f89d6a4a63d0fbf63d8dbc3a36c24fccccf20890a2302960c3d9cf0e05b6551c3cb2e595f745ab4109364ef9a718bfb16e773954a3f748c1c398b43c0fc88eca783cf2ebb909d5d69500e2c16cdba5281f939b774f7b515f4063c21d1be1a2863e9d0eb85aa88a65cb6e4c0c31a02a26aab37e9edf0832fa0852efc2dafc3d4bb398da2de8b6ad4de5776fc69bd8500252e8a0097d83cdb20279ba0e02f061f8fc8ae49af583a89bd3c52dcfa2ea24814c0fdc443907661fea07a457c66e70703ecb32998df25088eecd53eaba622cdb954f2f3d9831cdd6fe8143dad79636998143c947ca4bed20c5623e6d8edb55fb121c4d4ca0110f239e3096c4749f000a590d3d9d12b3517c1945c05e702d606aff943a18737c953e30bde8e8f71be04deaa0145520ccbfa2067dc196645b14a0198aa1fb08ebf433baf57fd58a7c241df95ea289231d17d5965009c481c2ab2a4eea22f1642f7763ca3d40b9df34056525f1603d8b2b5ab63a49abf43146a6aea2429916773bcffc681a556194ab054b3e473eb2ea558a66834782faeded36cb9c8ea0df0d9e576b82dd2de64ad78f1de6882092d235b04ba1a9f9536d0d3db6117e52636d7a8ef7df1e9df5e9a75b9973bc07d95c6679dcad1f4dd564592006d424e6c6336104c7f1a7ab11c0921bf67c975e87673012b1e016b257c9dde0623014d5d14fdc08d8c6d0bfae5e3e64a218fbe97da32bcd9b03adef2c0a52bac69c5b1dfb4ff2fe8aa1d3cd3fb9402fd5cec6ccc4415533c53634d48d6b5f0d735427353505fe312b69d2d08c15f44ed01b870800c89f1b03e6a0361257521015835b0cda6c9a96acc234fbb4b8a63ea2bd4a0c469fd67ab1f7c203dd81438d707dc45e9018a9ae3e62e7331c05bce444c55ef848184beaff201814cfccaa4cd8f80b4d0324d4b7a243a43160826b21d2ebe806815a1488c285f03b88cd2b575805498bd72426596b535830d83934fc4ef7281a977cb017fc03374b7179be656d12ebae8ec382b6eb2b6373f6cde3a60ec4da3dcb88f9ec8d23d4b6dec98d8f5a3ec7223310bf3fde439c8fb57f3cc7db660c8b003ed1d8ee132f57ffcd1fad2b0ffbb9284ff1b3b56ee32bad624cee3d30a3744c015d54eb330e3c102fa123bf5048ca221e14af740d85e01ea31568497e31c2eaaa5f92b082fd03ed5f29d6b365f733fa0e140c4fb383d9ce14479c700d69f4eb555f81f220fa5fcc895fb694b832d1f650d4741e70753b45c7902f4db432cec02b80f0139cf4a57ec9a0e59c358d216b2c37ae4b7748b01fed25df0ce21c64ca59bf01bae3bb167932ae001c997f315d9c122334b1ea31436e5e3ae407fe6035f53fb878bea2ebd2ce8b7024f36b0fb1b01ffb67799e1545b8eaa427a55303b2b4a526796a9d0fff12ec140f418bb3a06ff00353e87c5f73a56be1d240bb6401bfd418f850323501f8006b1238b0320826894c3ea46b608b095be0a097a63e94ffc811f74f8195de155f5830d727475c9a04896f25ffacea14e83abea111a16bbbbcfbb45f881266a6587fd622384d910b9c8b0113bbee4a7250573e7cdce423beab820a234c1daf5e9db0ef7741fc8b741f5152dd225d83eca390d306046910c6a2e218a867714802d16ec8558a73a12833fd326c89d4d2e3f13235a63bf04238e9b6bee402d8e9ec12667bd8102f605fccb388d776c9f83f560aa94c373570b6c78cade1577c31946270af4bb46a6aa0ac6d6cfd5758f7266c98ccdbb60ea2170e2f728706b40e77669b6dc7ca68461ecd35fde7b9fcbd0b22f01d4461923ed711f513981a1faf0e529b27fb7a523947415cd73f4bee6c24d67e5e62cfff6a75c2874bda65c65032acab8c0683fe056cc6af9518b019d5f0626d8aac1656921994345817caa20b4c782ad819522c030c381d860a9aa437d9063a35433eadec036e360e0a2570ad2d696a4cc13bb3681b6f359485470c5cf3a5cb1acc165d582c2de83998f8d7389ac3331b591bb40b05d009e53e9b8ae42fd34a5fe82c4634f1436aad4ba57d3dc1c535b8dce51ac6fb16cbb95564024e9f28af87b2c8ef84d8090aeddbdecd95731e436122f68bc9a45156483acff0fca26dccc069e1359cb84c4e34e39c0ed0c77b90b8342e386f81816dcdd2ef165c2a4870802e606587c8f8b70c9a9e7b1b8e2baa34c1ef0a4b6c889af350ef103c2470282d414f99e07efe8f39cde6dc7abcbc2d2ffed1f698fb4be52270b21c4461a3b8074e15b8913798b20b158ad35433bbb01cfba4e73fafb092dc05bc836e6717ebb71e714e286a1ce65a0b2ba384a61f98d84bb40ad5c3ee556eb0f33bb6be7713eff9e8ef613d6d4280c6e46b0dc0e459c4ca91a2885b85c5b772bbd3e60ed1818629b374edb6dbc4b9322157bc924e5cdbfee44a26672636b1606792efaa2be538a8dda0792b984a02ff7d53bea2977506799c0a18eaa3c5a3419ad78d617c7ea96034455a3469d578caefe5dbb0e608fdcc193822f2e565106af4054a83259149c2e59fb094db42475bb3a6a74288cbd8275c118465774e74a36114e1b2ea0296770dbf1351bbc31f69321a439be0a91a865cba91e1897ae743fc42a2a667a826adf3d9daf13ff109a952ddcdde41ec52f6b5e2e969eecd810607cb6b38ba0e210bb443629ee8e012535ec7358d2e724c6f6d201c8e5f63dcae9ffc0903da089fb905edbda704d4ea249db18bf932dbf8a787190311e792baec53100ea5e37b8ce46f23759dd9d0fd6892e30cc1e4bbd617e670df2c853409fd954ae0335224c20557971965af7911959351171dd82ec383fcea7eeb8091e71d692d8b8581f3f144dfebc13109bf1f23087e6bafb7b2a45258a04dce8385006b9750e0e83b8101d15ddc2347f3bb845ec74f9a7af7eea6a3fdc0d8cbb94ab46394198e7a3231e02ff1620b6510bbf7787f860acaaa7979894b1aecc627d601b2e46351b4fb76f9ce709d564744c2d75697ff8ef6dbc2a60d828f1f484c1755bbd82ab0ae1d968b9f2a0b0db66edc5a037e6b2fc2f8ff60c14874c94d7ea39cee0adc8c318b17c42d22dd59e28a5bd758bbf496acaacc2d98eea9b35638e617c9a53d91b08c5d8d57ef1acb37d761bd339aa065362f903b0d1a3e93d3d033a2b322666fe236c2f11c6ad285133d7f9e7edb07f5da6e56baff79646a79972092183af546336d0b8e76ce5fd13d48f44724107fcd789297ee37cac24cc134846f434dd2b46a818bab24824a782cf25341992df53cafdf9997e3e15bf743ae9154631d329196f8180642ed6044db2e4b255d8f8fd3242f8dd22a9795a715075cc8f439415d818aa7626cfa4cc9ef4c78e4edc7a98e9f61213370657c523ab7a1347b8e6ec2de8d19683911c955241b44e96bfd336d07f356bd1eeed703d9ea3f3c0e458b9dabfc676c095163243a0a3f0680a548a294cf2c0f9f63a17f1e683b428c395c9d234c4cef09037cef307a4ce9e637eff9e13f59683abea10bb6e5370a50b0980faa696c128bd6bbdbe7af076bdf12dd0d4936919d2a3aed9b7dd1de141433a05f84a459fa14ab65f326f67d050d03175937bc5ad9f40dd4e53c95fafe5623de71b9059cde201d5dba833e4a1ed1246cf485258e33d07cb490983c1dc40e3f73a083df722e4ab39febd7bb19abf89ad73aff93f4daa6325d295e1930b5ef7fc01a6112aa2991f2854776b6aeb02be93ea322341e300a06c32491fdb51853133ea7c9e75c09c5f8c9d29e353ac8578e4bbf83601dc8b0a075b8e50277a5e2be7e70d97480052c6f65ba6f48dc71d67ce4fddf6ac41fc92635620e12f3eaf4c10815c75d622cf54de62b45e11790b40a9b2d39d010108d1082fb11f61472a317dc5c56bddcfdcb62683340197c5091686f2f615e02c1c80ca31720e675febebceb61e27ca74c16460033e2035c0565cb065645f411fff5ab2b13687bb5d6da7fd6ccbb033b55a890760a894581c8531a79a090398331bc1dc2104052153e298dbe0fcebafb51b5c96a07493a3be06022c984378c13452f6f4fab55e89e249960c595b118f9c112fcb3ae3258a7c559728e01d33d7cc6689d83e583e921bb41a07a495dea4e017e5e1b5845e08dddfa48c284ac2f08b6db4e955d51cc4a7e9ea85619180f216142528099d09b9204048e1fc19601288a9c3b6632e3ce40688c620b79d6f7d6658ee47d2d489106723429bcadbc02b65911005d677202b76fd9c279b6bb5f32b4a75a596b8c34bd455d054b4bbb3869f4e1c01a938f7c999a7904cd7f31fbd55bb5c1166d3bce6913916c785878f42268c86ffd9648018366e7b94dbd42a6ce2f3808e2bc24c1a85aff4526cadba1a4dc5772c2c7f0b0854734f224f5b7b8704ce6f9426cdd623d07d37fee75e0c3150e1ecd845a7a39cb64b946cd2022d89aa4db6eb49d3476abde312b3dd6238c43caac42410f68ff18289bb5102d8674bac6990315f886d0040967a2fabdc588e2f4ff0331db162e54c77501bbd3d331620849927e19c7745c65936010165f458fb1cc86c33276aa08172f6a21950e5adb20433a2d781eb65beb01c35f9523b6107bfd9d20e4706db5b685c5676c49c2fa7077ee55af27707cdc186e593a5ed595e65b4ecde83df1b40fb1e683d710c6a3c21b44811707a6ada818f293a62c34861b7581a4faf6e137ba2952a617a1f9b536049f8e28d3bd3645f73794f9a7fe5f7839276501bc73fc2219c408a053a07852089e12bf7444ef0a84f63390188761a698d204e32957e762a70b7e78ee9e3e54de670c844187686f32f135f7afaa32023a7c81b667de38e21ac3cba3518146405973225610632ec5fc4a406fe8d9b3bffcbfbe5042ebc389f5dff51f4b91b07e9ed9166a6c8e3f8efac8fff41cd951ef7e6d5485d5e94ff8c2fa9390aba72251dc7ab063f76446b0fb765e7793f420d3c590d473072444b5ebb0d5362148cf8fe7e59e9d4e5d0136814a283f9d86728344a7f2d7ca266f2c61b8aac6aad3439eca9b3b985682f2bd1e56211e69f2c8839393084e4889f431f2877d9fdfda582fd20fe5a424cc38745da7352f6a22ab3dfd81680577b6efc55a4e8d9b0e2335bbba6315763311c22eb735aa04b13d4d54f03decdd607233ebf65339c2683a4217970ea358b1477da8c739964426fd2ddb4bd1dcbbfd37218b7ebfe0b2bce50aff29b931e0d651b0af3671043caf0d6285b4b6eb313f9bd5b7a3f65c5d16ae0733a431b4ed3ed6cb491b42950e03c50c0eba889b61fc32de224c0a8fc5315f4bce20b828bbb28837ad2b65b45f9075b8f032ebf0803127566e3ef5a1a09ed3154c672ca63b55204f94431af7b6e11cb8eec43cb29114e4d0b988ba5729cc43473072ded348790216a485e19d273b0c178d4a8518d0a7c30a4573c73662e092034cfcfec9fd2538580d9b62f8a506014835415eaabf177881149aba0887758959f970c2c14b8d1599a669a28357050e04b23bb0cfc3ad4d53922186236fdf2f658181f688aa87692706759a6dd5834de8c421e8b89dd5a9a646b8971e59f8b770406b89c415fffaf6727de502def62f21ecd89993c688d9a40824d5a07812b345a0f09683b99af482372575eb9b30d14da1a8a224acde8987f85ea3d05bdf2b3d26935505e0878a2527921783c803411650a4ad52ee475403be1c1c8414662f9c018b26567a0e30c3e06c131d3ba202ec8c9f42aade2d90534374cf1b7207cb2a34dec3bfcd2b7c36c3607b17237438cc1b43d4f9b1f765a26aca46405bf65ae914ccca6974abaf4cedaaaf01dfa728cde24035a71ba7b430403ca445e668d0e9e31dd7bb597f9b8de7beb8a3c9ad63bbb7ed8e78771d582f8f6e564cb1940bf92c300c0b442c21c9ee093c30eb152f2e85ace61d7600e5924946494b2935f66087cf1510c402d11b465764f401e9f1da586d438a0a470a58a4e4a3fe46266552c0d3b4605898c0e538899c25e34db7a59dc1f6813a7d3eab618f800f50736c7b04aada26b14631d11f688b6c6b44037f708ae64e9d94719913ab085b3f614a237b0aba67db1e93ea5b4c2bbed2294ecbf81a57c240009f973814aff543f2224034cff400d654e8c49fcf097b9bbebbf9ffa0a0a7cabc2189f2ee008f12a04d56badc20b78a2903e50cf1050e31151095d1712a7c791ba9e5f5b7f8948be7c8cc57bb7e821c434597c2ab066b2112efb1442b52718271533ac3497665de765b0d1b522bf36f874582ba5713d02d30551c6563a628a2f3ac5022332618f5446494b6248863d6d13b05efcab591ab8b3b29114ccc7fda2cbef56c92ae8bf712e37f033e0e1212a0f8df2972cda4a1016bf5c67de3271a7002c9db8104443617ff44f43a1fa10ffcad311a757c3b22c4eb1c65fc0c4945bc4c830ebb42bdd0ebdc5d04e70b005229bded202c2fb32fc4d78902f4f511f195e5312dcc7e4f7cb2ac39dcdaafc0464472fa8c4cd39a46bf1c0e5ed5c66d4cafbaef629b1d17db8b9312fbb8aa700c7ff3aa2a33a50f05d3c3bd1dd721a6fe52d41947f11b65cca12146a92cea2e835e2080ffe2cc1245ce3a09603f8481dbeefaaa8842a63dba9bc609181ac8401c314c4a3c1b61d78b4cbf3fecd932accdd1724d05a5b22d595e80db5061ac0b5dbe198c61e9e4397b3516c8523a75e173fe11016e4a3b4024eac6137b6533486d174f26b93d1b47aee311e60bed323e0282412be9761f67a469178d7faef2b49b4928827ca476a3570e9fecdc995d666434ac82d6e712f1df0af70d7cfec12ea22b7a1342ec9a9eaa812c18b034724dbc62ace68e926402731d097d843c9b4db40c1a3fbbbb7793e787c6798e67afd697d54998b7fd848c487231b0145ad95628c30c1e1280aa33ca02773798b1ccc3650bf3efaba9250a05510fbdd8801ca71eaca93fe3531269deec68021037a37d95a3e52096483d423dd9fe544f09293d47b3f2736f53c1c30431e80c888363be0cb5d15af0370a9d9db4ccb9b7bc7e697b55809945c79aa17d261ac25f1e3605727aa43001e253cbcd67eac3c91fd2c1513c654c0aff66093014d05945a8a92c0b986fb0094ac9e4fa8b35b144e3a69580b491d76aeaf65e2ed245e8bdd745cf5b63e105c9eafe667b07809e1a40e21f74683784816b8b6e45959a79c7c118af1c7c8fde9f9ffee83afe93cd1f8ca3215a51a817859c00eb0613c8e9221c38ae2f900d6a71b4594befa7e38a8cd2c15d2b356aaf941f887615a108d8841ff162c82d01d347b362b795d4d63e15d1c2fe3422043b15c3f268f55530acc32bd3e3f2e11fe449bb7858a13ef001db5af236d74888c0d22c7cfb4ef16b032542d4fc3d8f44353e896d5fef0a1c8a1ceaca1c0a0fd585d9874b1da6619089a713398aee8ff1e324208b340541867b0a79f74067379ad90ad6c1f2c9e7a520f5c3f97e2cb5fa85fd74fbf3c6687e86524b4f2cf150def7c25408de09b685f0d10728d51edaca617a87fe7b27038e947c7436fac76709219748a6be26973b03889b054724e23634d0cc3ddb6f36b218459b8cec4bcaa76d95f89d04090f2657ed6ce8443c84a17b5ccf151e39cba56356304ac6d60737eabd1d69b055ca3841dce7fe0585d504d817f579fcf4129da1eae36a0f62454eb9fe23c53128640b69f0802179a50f0b2c30d37d364f29401bc90d42bb1f5ec12eff03c624bc45473ddaed992f80a939ddd129b65d76848b73ceb79f05b009a5e83d107af8ea2e48b5f966e287ead5913f4634eaa3be96231d8060d54b3a89a2098a1ab87ac459622136be0e7b2efa209757a156ecb2a67baeb6176f80e9656080fd8c6df5be8f3ffab5cc0c1cfff8150d76a755159470e29ab47b01ac875835f27afe495b00bf4a61285d4563c77e1c97689c1fa59650d55e875a4cafdb1361c5dc4bf8059b2965b68a63b6699cc42417655f583c44ca7f69fbd3d740dc420dac474912ecf9e611a4e20a4bbc3a00741b62dd3b2f93c68d55aceccd940b1381f242379a3d196b16ce3f6e6ca82a18633d535815b2e13398ef386565158f613a371a0ae27f3605e8c1f039aa9d1a16c4091d36b688db899f51f1463d014c7fd17ba2c629b47492aaef8766f2de1f1ec96915dbe9bf928c63c3b402a721b3663db6764cb8284d5c071c733e1bc2343d576e742df1ea55ea0fcb22665878ff15e7b4d3b2e8c5b83052943c2a37c4838146d3ed683320d0d87433fe0348e35cea08d58389235b060104873a186735119109655dacbc2d99739655a2b994af08f3e2553c9678d54df638e7e05a3caab5e65617b354436617d46c3ec82bacda1c91d14cd0ddb83db86595bfd08ff7d5f9d6753e3e6726761038574adb080f4efae5298a0e01e7f09b4672be2294ad442b94f84fdb2fd3cc2554ba54713752caa1c2257c59bf752fbbb33520d8910accc4bd81fe403f327efae2344c2a190ea448f6e81dfe938016e38efe44ffa81cb8676340282e6063e1bec44ea1f810f885252b7b123346ce40ea65222d3d1631293b7906a09ee8ba40f66f447001715d2be217d501d3ea73d29b053d9d40f516ea775a974d0b568aeb6a6533d6f127415acbc30061bd19fe9b0ba6572438eb9314df1ecfd9f1f9df483a5639a891b17c26964e5d687ae236314dc4c917e9d775b3aaa518f087dd594d345d5834720cb236174e190eee35cfa3a42242b9d041851e459f0ae396d79acacb6a38ddd514dde4a4167a640e321d9b64fd4dbb8f7211fe6833dac421469dbf915c77928a05d0b96dc7bd4fb0032f05999de35f81a08611c255ed0498b07724af42f9dfc5c8552ebaadb34b1b968c26f9a2f2ced08dfcd3cf650ede8c4401df5d64f67ec48f9877a327cd1811ce66e71e695b666d04f64f13dd7e0049b4d3377a23425352c57062f14a09e9876e4a9320847ea5d1d805ad3006eedb3e3b0593fbe669709c6851c72f4f1a9bd984c564f9b62fe20ca0f5850976461a12b73058132c22d18dfe4982239657e4802dbceadc86f94f13256e3a8d64a26781551e6442a013e07b3c0a97e4cb2721b9a5e0fba40ada8366e72a04ae6f048a6f1cc0624bbd1cf59270356f351d37978b3f6b984d22559efb2b89302029cb0b1d01da9f88835a8e838534a0056369c7c8cda963b2852aee86ee577afe14e0016c4b21e52198abef9f27822657a116d60a2b9c78593dd91fed4e856383589a0336f38567de0652ab2d11ff1d29518a9159be663bfc9cd791762a5651010d91b007a501aaa9923be6f13326f7f9dfad0f5974f88788958a2776fe724eba8fde4b29ad504ce95fee5dcfb476297f98359a4b2d2c38df3c7385cfb883c57cb379847a9c85389f0eb6f9644d525bfced98870e06f3c8d118de77da2338f4756dd83513c6593e764a15c6a35bf70fb58b8b9fec81d463c4acce16137325d31c02d2781253dce53cd474b1f3bf1b53d8940b3c8875adffb8e1f8c2029e7bd6d4f29688f6ba6fddf254b80115f24794b1b0b59f655fc1fbd3804e4668ca82131e2461ea07cc9db47b59f429c9ebcf6800f8397c2d19ff337a27506fcb4e31583e6c4c635d1293ddb351c1fc7c05e2e9413b67d44bdef02f87d52d9e537cac069fcb3fac68ec448e74a3ef96596941335a7803d3c5fccb983c956c16a46c42643237fe979cfc1b3ed65a67fbcf23a4bf782a5e8464cd8eab2a3dad91f4e16349dea4ebba9488666f4f34a12de39cebdb9bf33d3ab3b310bc8b0398557d707c114300826a68c05327727ec1abb39040bc74787401d95cf1fbed257a8ec210410a71367b3c6f2061c7460ff255dbc08f5a3fcc07e2760c214c21a25fa74d9366e4b819f1933ded23f7a0a38869d0007c9e2fd1760bb648cd0fe73c0a76eb4a0bbf221f66675942aed9fddb405c0cf5a20d76a4a434f2f43d84aaee234a7f2e8614160b9b2a14a0829e0a854a86fac663507746f2ca364e871c38766db6e5f6651525c0e2316bb9f9983f675f9e2d11d5354df5ac4fef4dfd01b9c1c18ab585d8f7d178570d44af176712b852ea5c2f8c0066b5b684f7d0db2304549416b575c0e462b919dfde89b03d98a80457eb5ba5553be4283651d6f0e813891656acd3307202bb5f2e3095d216f5b75c357eb1ff5a5777e33a832377a1771f5a37194c5fc808f910e8c58349b0aed35f6f64c334956a2eac61008d3b02c137edb9a78cfb002005a61c87d8498c2a6a47218ebff8f33e7764e7395b55e89a61d445ed37fbd6d70e9851c7e0e486b6973929a5650340efa31462254bc2db1dfd0d509f93a1ed64b64723338e4a802ac294a20c5d05f10cc1539751a5ba3f34fdbcc4aa26ea4e0b36fa151bc23d6d310d0ee624613120107bbcc552baf1575066623522340ec5a6993585429b70474adb65fbb9df793615ff2d87835f2c6024e3b33561f7cd4e5a241c8a8eb1163a282f39e31ab9cdd010b35782f32484788a857e906c6864a6a25d369248703b24635df589e5c46a44838afe04a8cf0cd31c8ca14acfaa5322bdc3f888b8c849e3375845142418764f22b66c14c4ed7e7aa1e3a0e3493b70a957784406216ed0832e35763172787ad8ab6d07e4394f6fd588e3f337b30bba32b86a9623f1089d474b2413c71fe61b5625a203bf519f299195202d1175186ba9cfe3641e77e71e520fea6fe3e60a78b4048719ae4f189b075910bdcbba15f87ef261b12ee22ac970b2af51ce6ab77d8f44b7818592b36783827f87f55bf69be5e97ffec01a46ade668bd119115743f21863fe698e7618bfe923406b028a95a71702576c239316d8cebccae9bee432184f1f18372792f462ca0d064fbf63b991fb1172c58eae0c856ec986c6efcd1f90a330b20eab6b0b2f7240f0a77ae389534ae7093ed0cf2a56f93ade2e72ff132b592bd890c26d262ba612af972909bc12247d4db12b806c1a552fcdc76e5a05fdc0e9c48f2e2b73350b1c6df07fb11e98184b9ea4102daee0794188ccf7332094bda5afa2d8efeb9fe4c26942367bef091e0e5e6545c781517abbd200a6efa3de2b91f62d7ea6b9200d9f6102e9f7c5004e2da5838d03a3aa86144e175a3d5174f0874f007ce0fa9dd7d04a0d31d93cd1d381c468ca6550a01af4c091101f23865b672df4d7bc9aee327dae53c8ee9301f5f50880d1df894534bfc514a215ebfdba4cd4a4e5b4f71958c22c944ce7df7078e3554042e19330c3a4970c38e098745615c5aeda8c5343f25124e714e93f7372e8a3171df4c6c9d3c714899637cadc286ca60b4e6312e2ca7ba7b1e74b206cd1670c7206201830992d668b68513f2f57e436d9a12c07e45d2a2c30603ea63da17d1be2b7b068e9c1f2928bdbb9da8ce187093d2d1bcf5244b39d8ddfff97822dfbef127bdbc16862c1b0b8c13e662750e71f43ad6fb07c766330260230178d3a0c4381b6dcc6aaba1a5681cd4405daff216dac265c23ca478a2c72086f6060f337d42c1620c65d0255f27538ade32df827894976c633c4f653f3221ad56cb450a31da24c31f2e0202f5b8aa65be73e8678d93d16e01986db0c953a4271756fd85130533dbc9c8242db9365779204112d0c3e93017e986941a012b58925beb0b0667efe8d3ae2c261adff9b79b32d6887a5ec3b586f64c03c3c3578bf2af685fc0f2afef76bef87b631e1f993e2a9f47483e8942409c9b6070d32a679903a0ba55c0bf57ea6aaa49cd04ea98180a00eb4b20e2fdbda07fd829872fdda8634b1c0945df327e4cfda6e7c25fed320462ec25ed1177a06b2788e9bbc338455484b44e92bc8dca8608fd52dd38b175a407555f2994eb2c981ead97f5e407edd5ff6e6fd2a2702c2c67af89d5cc0e233aeca374593df30625b0a86a5cc13e59375a1f38ddee0f19fcfd462ee3e223211c1f667610cc2b44c364e952c983c4c3aeee20960d1b554ae7165972450ecaa5b58b43fcf1ea81a261480b116b3960258d1d6ae78e1fba25110dc1c62ded6c6846e5b63ec1e88d3673d2b52c91557672d7dfb0ab4830bf819ddf500b574d57a5e11565ef868dbf315f8260d71cd22e4ca49499d5faf4a4c87828228a59812aea56368f3fafdca8d0d34f86e246585281cff9c821831b662116d8899ca2bfe57fc34e27f0e062a169da7b564a133184e7814bba30e9d5bf4289e5cd66fbd00bab9f7d42799a1d0f504c315742743f1250e52f621738fe81ffa1cb7b0868b10d77f932d5730e18bfece56947e3bf25eeefb5d9dc7ad7b41f713dca8b549cac41af8cf29bfe7118757c039d902334897a397a7866f919f4a4023c0ac742582a177a380eed5358b1e6d8de9cbe40dffe4ad83d55441e8354b8af063c67d1c2e6ebac2e8ea8e93ff6e4d2e0e081cd9f78daa1b8ec48d452443cc61ca71e12fb1e0f1daf1bc79966cba8c58209fef4c8219cecd1cc1119c7b35701b3d70bc3316f1e2d0801a0085f152fdd22ba612388aabd5e503db06d15c48ee647bd40028c8f10d60525f8ddf05c65056536887321e3032486df1d36585c196f3ebabf5dd6834b03fa5958d9b5171dad0dedffef9e710f06293ac28d7ac3056dd36f0a230c61a389a26175dec07ecbb4dd14a433a88c0f6b72207d2eaeff9b739443e58f16b39b0ca4f6ade105049f35afbb25bbac08cb1ef39a136c33d53c70bbb7afcd8e73027ac25a9967b725d7c479ecfccf5d8fc7a0eef8ad8bb91a147f403b1c42b2d6b561529fdff85ddfe50b97ebd998fb22491560d42f973db2b6db8b2e19871f88d8353f967ace3063147c7c791f98b563ef8ece899ca54ec9934a6620425a15b770dd79bc9f47582625efce111c364c0c00c03ef5031cbbc72fe5dc1a1be5668f886f19de461e938b8961badc097f6870026024b8bdb8ed63a88b1aff91ee1cc759ff7061b1e34955f355448310608bbd9fce7557678fbc40fe2c037470ed20dfba78cda9418db5a25cb098578bac16295d126aeaec0a5f024c4b246ef29921e1bd1c358f6288cf212ea3b73b3f019884d2b4d65358a4f829b0a179f455e45688f71faf5bc270ac4c0c2f210fdbfcbecec7997574bc047b0c6db45e20a6c62a6ab5f54f453b9ee1906e7138b0cb97923b729e9e2e03ad1ed2866f1d0564cd88f574a5a738d34bb7524d6394b86f80d6ec9b6c8cb5b6ad0a92d2203970987afc7b20fa4a8f4b36641bb432d508b2e27116a4c72c38baed172708d69dc794380a525eaaa4443dcc9723893a7e4f189a24fb8887dbc8e86baf833bfa39a618ffd1f72137c698e349d00f9982a274e1dfa286d77e29f688697dd2200df27f6d4fb35250a0fa6fc89b8ef983def1be971d6c6f35d9b21a3d4bb93f710e074e7f4ebe7bff3402b117b1db5422eeffc72f33b8e5433dd122bbd5785707bf65f230874c80935336957eff1bca5662764afa512ab072f2687ea3dd4753328e348cf3523a49470887f33d6123c2dafca808f643a0eab33470ce682b4e2af573d0e28fd305755b991995bb218d8f287299a34405e1e2c01a86af7f250365a9b3a3b95ecadff5dc4eeadbd968656ad0076e1855252e952aa40f5ad8a6038d25f31a8c73349433058eb1c2e74fba01e551effd830b8c27fc9895ee29329b646db1cb954aba009e08eda94554fae3ec7bafaaadb214f9e7157ae471c08f89f569573fd7a7353cdefb113d0dd2c27af0ec3eeab4ad9d10be995c0be1a448a98e6d46ee45e4b480056e235329bb68c64cf776ed00d7167913d11a977dc6ef986fb69e945b43978d027af81bd633d1c08e2bbb22e682c110f4eabcb72094f2ea95660ff28e158c843259455837c602f293e967f8d49d8048e300ff80b0d26b7c55b24377997605a3335fa6ab789b5c37522f4c8c2072e9535548605861a53f2c95e84c362dc6e2d9e53708d5a54d1f45e5fa96d39360f407d7a238a18fc719f80a128739bd504e67f99aadd35eb4bf4f6c867478b97884ba4d657c7d42332acce653acb3471e300be7abb73da1deb2a6f7087ecc69ce18f34b33f7565b62583248e23fce5dc2cf48c0f4a60ce14f27e322399e4861e8577ba34678f85c1126e2d55d1c4e729a7235ea84a9c17833cf6f5f0708358f3895cf8c1ae54c3563304c66ee8b642e6fa70e7006ddcffb26ce70ca1812a89a0e24acc43ec0f5ba62baad0d6a1e73197dc2d53c5b5fa98d57ab7897e0e511dd6456ab84e28557c1ee52ea80aa225c539f50b198a6f6e49293570f6c38bf9b9b589c1664f4bc82a926c1e96cbc4bf1d44f764d0ed6fa1d4b0619c8938e834658abc367ac4bda34cc6cb2a93b34f655094552678fe114ca69bf8d958e16ff900d436154a54c36a50a8e33fda7ca8db1c71aa8b6d15d0972978af33aa73db39a0b0a10ce0f87b5d3dc2d1ebcf842f28e67259eb1f68134568da86b70b3e0e69d39ae83695e5fd88f7526905146bced74fada0faa98abe3fc4883eef6f5df1534cba2d9954c322bbb8efd6a8c160924501fe6d043c4d726b20dbf9edd6b3d33ded6eb4b019410242590b16db36b6e811fba7cbcfad21e16647353f3ac28c947e20e5738c42478205116318579922123edcabf0fb141ffad28954033c39a6a2de7eaf0511dede52eefb511f1da1a6ff0e4513cf7034cde97bb1367b6bb0df0c8f6aeba8766a287ce7ce918984cbc8ee5baa0371f1422d1335c8196d77925c718e68870632e9a8f77fdd368c4115220737fc7e93756a55ac995681eaa9bca7b19853dfd5d059d9bcd058d26f53655a88407598615892947cbec955431ae25f672ed3b7983b80e3674916d3718b9984f3464f179537f4541b56401dd302c7f41215610c001fe882abe6c57107bc57f7f0b1d24868b4477096e481cdd79ce12b49e1846276ba28022b1ca1c28dc79d872a462b44503e773b9ff5b76d0370f5bd513ca27fb85bf9245f68cd5012e38fb2d4b2b92947e2cfdb8714bbcf54fab2a4d059782de572d4f44625af2a2f73dcc5925c2b0f625f25f6913e87c2e0a4aed1586895cd7695754ab6be19057d902d34fec36a538a4ae08274be4393f0c297072cc772f547fd4d68691e72897a9f8e1bc19308d6740773a025637d6d9fe77fc0d3723275c421a67edfefab557115b6dbba662994cbf3597bb43e52c9146e262f999190c8c371cb63b449df12c4a8001a8771e0cd44e902a9a90023e895530ca62ed261377416b35da4200847fd016270594c93ebe4d3b805eef5ca12f386444da4bde2c70b5ad0fe081b8239fbe222f811b009823edf68c582b8802625200def52bfac78708caaa152a9fc2e8e5fe4f3bafa4ecbee050965ec353d03cf56fe819b46711bbd5766fd39ddcb011752d4a876215352b2b7520cbf7a959e0d7777b0292685c685e3d468e0d926da9ff05d738ffd1ed5ebd05071d88a9ef3e11e48eb3231cfab7f9282699e3f62f29b84bf16aac96f0ce7df8715d0ac4c83fa39ff9ff60a425096381356c45665e6b2e3c3bf541c514eea69490ed3cf6cea7df7fcbaba39131b6d4e31634a03558e4adb2425b9601665fc5bc1607688e142aa3b7f3de1aa63b7db96ba68718d28929ccbcc7c5cd8b36f7cdc16fc3131de312c08e9ecc5b4f9ecd153c9154a2e253fcf93336a06b25a6c19f57c775949dd498b6ce5a279f8727136ac4e5df3790b1679b1eb770bc35456d6a9d99b3269d11b6caafe22843ca2c5449ca6588376120e44dc59388169e7b252ae0da84f394f14e26c9451dc96b799f66856bdae56c4a29ae5764fd59516874856499295a9ce4d75ca5668dd3d1c786d14dade112544e3cc31754077260a903bb198927da4c1f348d6732d75253ab8cc35d63f28178cbf35e8345b86d243823bf15a1298cad0ef5b846f29a91d05bbdfd645fc3463f6aebe3d95ba2769214fb5143649cc812ee653ca46a6473f893bb456b786eb366bdaae33ef5e46acdfb8c095a91b02919207a3f74a69e874c4d454e68cefb9331dde068c7f38a5716df465e692ed51d0584f35e65b1f7031ef902782ada501670e0141999b4107c02c4f06c8075e3eec7bb0b0f5fb97f8c9f51c21117a44d0485d567f802a9342f8992c8ee0a4f4ca4ffb464a933b4a77c65f72b66863d6eb17e217bc9c2aa6a5e0c59dae8c756e200b6aa47c30ca639011870c728ba2100ce115a4bb4a5d248da49e125e93ed3578817b30bd5de0dc9fb1f1935a5f3b5be131ea6090195b3a41790d6beb4747da375e5d5c579aa2de2dfc6c7e5f9041e550195d727dfccc7fe4aa138ea33f15ed5a1633d26a7420d7cac13ee8e827e2a4a05b75f912518d0c6ed008ddde94a2c8d319bd160c69d848c007bbc09f94c0230d37b8fe3337b61e9ca361310644370a775188d5b6eadafddca2034632d4dae53750d4a89ba5a439578ff8abfff924dc49e038b013cf344c38fac8ea57ea45d1dac6fefcff356d7964c6d7e379ecdd22d7baf52c50e3fafd315c1581044498227823a705ac55fc6c75715d29ccd083c9f0b792f4f6360f95a816658be1fb10598c02370161abbe12d6371567589d6cf74dcdec4643f5c1304640376b85ab897fefb2a1e08cbaf0e11cb496c428c91048e68aac44790d76c348bb234ebea7994e7012045acb5519b34cc0bcbf5f4e7bf73b3eb0fd366f4aca5dc855a9d50301334986e792173eb9b9382d46ea9a83bbd12b5fe85fd5b14d70d151e3e8b4558e09af4e71cad115f04376eceb0c1119e6300fb328c3cfe39646c2619d43194d47eb5e62024947d399fae7e7a53139eba7d9b1c4e7699310800211574008e0224fd522b0ed1740389e84b02dee1b0e3890e31840d21d6dc16d537d703f6abff45dd033341870d167ee71c7e987125540dfeb4f89073db3e89a644c644e89796f710f3d093a74cd40ce822b0611287715949d341af106e4eaec540261e27052510e83e1eb1f155dba8a62dcdde6ada198d8573928fbc2230c5d5d76d098a49460414b5a964c0f8395639ecee37d0823207d19c4b14d3035b707694db5333e4db475f7ca72fab3e72b700e17c9fe453b880a4adffa93ac40cd46b6d2491bc79d6cf85bb6cbd198f59c94293041d97b5d50adb0e70cf39191052b339b7826343b30207ef2142820aa97c161c096221d862e7b64d9f6603828f4bcd9facf241a75d0646ad3042647d481ce0a7f0e5395d182b4520a104a1bf10deba9f01ad7fae611bbc23510e2681492d0ef976f4b13b75fa1a872f04fbd7de2b53f0b50ac64f42cb1994630ed5a6d48f570bc3c60fd5f917091c4f00b3224ca8f0c6d27a610b78a5bd868a913018e4fd7f7e87f822e5d7425ceff602760f29f952d549f1415148931182359c7b84bfd78de34a5e178e7c7a825aa00b31cf74c703d37c828e1c651fe57f619a49912b27773b887b33d4482d35f26abf555936b4e929350d8afa3d2501017be4f56c6ec37f42966a686feace50293e7f1a0419cfb2b9c36ff7eba1ca27a5bee60cf338d1f446f63819fe5e3bd4542c8893c4e13142d46374c92455ce2dfdf307e0ed342de7083a66f909003021f79f4318ad6ce2e8b324cdaf6c4dd2184f329bd5f7ee3da76574fc461c8a6055f4c606a4bab40a199fa208102b27cc37ac0fd63c951eb3c0881caecfbb40cbe69b761bd2fbfe662ce3b1a01956fcc2e955a80b864e5a7cfcfdab5161ba4389d99744cf77fb35c0f4014bcbc3e9aa39c89f05f1a9cc5f068ba079646166d620b297c51d0d3b042217e03f0b4a23ed72eeb2cabb633d337d86b75d46acdebb95b03894527a8ef32fcdd6346dd2e696d320d8e3e193699987bfbf34479f63887935e2e860a33b1b361108b233d9cf844e712f6ededfb1c5b3edfa6aa1a8c864f2de7198c30e15911bdbe3944ad936cc378dad78174f2d2f02aaf090642b5113836f110a616a8c4b2d16ec00b2ea097c5d0c8ea1000361fd39ab632ac14cafea7513f04471a05ee21b19d009265f4ce21d3c0229d28665d0f0a34750c4cd03dc6c63fc2a940c75dade6303293fd6898c81ca3358dd1957521392e76c1f6f39829322c2061f54e4e501a31fa6ec7b39b6df1b81bdd8670fbf938391c78640fe50ccc6c2a770075fd7e2c056b39a0669b3d8585222aca51cf3ad9c50fabcfc286178475f97c032f918a6f915a6220f35723f6769ac4172762761361733ee9d117fad1ed4f843c5aa15cb41bab6e7fdd7c7e4e749eae8244482d81fe0ff7e7cb696959f8ba34a3709020d88c8edbfb23bea88d95883f59636245b415d91202b800e12ab78ff48b2a5ae4e7d4aaf189c9cd96cfe8ad694eacc973d01ee4b20b7df2171c67ea091b58bd05ae2b275a70c74bfda1a3e2cd00de69c524d8160f7654842cf3ec1ace1feb41038dc5567a6bbf3d271da6a22778a38f195bf31afa85276d9c9ec35683dad86197220ff5108c4fae07e717c3171363ed777c21beb1765baa1feb9ab99d3554945bbde2a2cf1a4792d42a62a2fec9447c0c2c88360a6c904448ea9bcdd47fe7c4e1233ffa8aedaf89eb13b8a3442618b342edd3917cbfc73b10496bc68d0d813231d1e724b9d32bb41f63a729c731fb28e297da2fc675355f3574b5521652ec54ab026e4bdca64a8db9488ebe99d58de892d827817ea0260922771506f351f339babfc3bfea8793bfff724e32b99900e579d5e934dd8a301b69026eda73232a8d4584a7b4e6f259ba2f7538c4089b93c8a36cdfef0bf657ff2902c574ee0ce8d74a1a8a29ea0b96ccba958f30617eec98a5d80c1e48b053ae3c36ae9c579f8d2f83fe91d279e48bc5f67a54638e81c4159225c3471d79482793b63c61399d12c7ee3b41dce1efe9289e655b67008ba02782ac5c19902cc4ab9bd73351449a166a5383656080e9ea0726f46359c0d3e3b3dc6cff7a7d9c8a5dc506386fc515e040ed2b5b53a2bd7a49a1033e72acda71c3645803d997ad9e07379c1b54716c3b5451bd1ab4bb9e593d23f990b586a97043d9faede8f460511a2e7dc55dd7a8fb207266d2e01714ab07d2cc136744f46fadead3514d76329494c1dc1c4a0420dccd2628eab323f840e0b82a3a87fc6862d6c205e6e5e677061b2b05893ec099a308831918dcbcb6af36905a56144a84cdea020933b084ebe766322284c1cb05857bbf56b42f8a6dd0184359c992801fb6402003d1799778d050449721e6a3165c856c3a48c5c0fc0f81577a0ecb99d34c7dbf0ab421ee6fd864e0e322092b79cf542621afdbdb342b19eb11786aa674454e685757ed4cc2bd0414eac490ae3c5e1b6f8dbff126db56a187cf13c916160820b1379b0da8f8360c88845b8a7bef2bbef73f678dab0c64632961a1e4715c63832964a7af57a6a5d11ab7304eb02675a169be17cf7789192076db2c13b8a3ea9b1269ce9a6b9e2485ba4ef75d87675452bd16bc4b591a2d47dacbb66d1c180bede8599f3df9ecaa65628be8aca5a1c5acfb3d2d223b318cd99a0aa812b90efe022bd5a112407048452492c3a9c31550a8d05ef9318e8471b38049e913d38c83e2f97eb47db7a8163610461b8f330f87c2109c89a194a96bacd3a7f13deeffa42edab8057a81b5093fa44aaa26a746b47e123f09668005060465d900cde3397a8227a6211160a7152e66c8052b1c80b0b4aaae389948d20a1273c42460ba3b98a46ab4c7ff98896743d8968b8b5e30c86914ebb22f1c9e9208f92e3e0201773f6c5a4d0f636922aa7b8ef89c44262e0beea8363ca650d8fe029e05ec70843025ffb92ad4eedd4eaf486550d813e503b604c7b9081279821daa3b682931342754fd88dc998bc0ba8d33d3af490898ae05dbb279b790768e35f35ae2adf77a2e1d6d852fbd252c9bfc988f542d89d2c11f8f325f9fcbe529cfc90b30d49accea58e0302c23e8f2d5779c290385e6d9fd314f1e1e33e5cc46de37d233cc19cbef541ce6b15f641322b02bee7d6d333b423ae328fb67dcf0ac3dfbf6fa0009391173df3ce41a06dffbc8eb321193ed48791e6d8f8c92662bd9fff64847306a7388349afad9b0a6abf5577dd565567ab68f55c486c9c046d8fe46f4838dec78d07a4ef2befc10668e8dbf3794660bbf7d9edb3344a09923b2e0dfdca9bfb61c668256df2ed24870e509af69e8e25452bc2f2481660a59d36f1277d64e3341cc94c887ea303d59cddf583309b71c0906506c0c992c6db50f982e4dd1bfd8d12f88a208a859007ea7b2566d8e04b79903b54051ddb26c5e17f8e35003c079307fdfb880922f3bd60a348f761788ebf22fb54653af6aad9c7d81ff1c35780fe20de5ddb66edabb076fc297cc4f51c9b897b5d79a92bbf7fe5aa3f9e523f869c303c3255e331d6fce2aaf28518b3cbde9ad66a2a414226165a454f829b43e9d5585e2bbfa530183fd12a6e435f6745f44ac017231a853d7e9a70f966c36abd98897a583974d03e5cab31835d669b5d77c2f11ee744df0c0b2920af273e2da58610094d82ec252106a7062bae151833c0139d5add61a905ff253d6fc15b9180ea794a2431c8b38c946488fcb6f7ebb6ad23a9922110346117b39fc292ef8f284e19a3891f6415ab737b8354c44cc874bc58741fdf12093916df3c1cc5392c91ba99c2a551bd0f325ec41c83b61625b8c612f2bfc0126e6aa8d513026205991944b4cc307c52112c8dbbd3154e36686a22206cc12cf64906a9d8b061ca2ec8724dc057ad15814891cee4a6f93503abbb605f937251ae295df5879f4c815fa85fc9beda77f5f40e1b06eafebfb879946b078a743969333737a9bfb741af9d2729e27d2ff618bf96282a3263cae6d1e9aa04103a17f399d35fe7ca0aab2bf16a98550788d9b12bf6e6c92b38fb23cc3e787379c03301506818edb83d617750fec8de9e0545f6719419350d11de5224e50236cce4f4e3db7cbfc852152efeefef8199c452abbbfdfa1eed409d88095bbf3b7594a855d763983d4491c7c406b142c792d5601470a051f729e124070a092bf138836b5c2e63e81b611fd61a2b0610d8ccbcd67951ee71302193d3b477152ef391110aa442270abe505c4a8fd89d42f4c722514958a68b55babc3089feb19ac11ea9da838821cf149fdbb3d5f83b63767c57a0e8dd5e5bf6b72544ae59383d310f9b30152936a33ce5367585dd1f22a0a3571d5ca4a49f77ea3987a1c8c9d55d431eba93833b41f5d8da4c843ebe9d9e339e8a480db31ffc11ae52c515ce990592e24839326667e7096eff95c187dfd57cbbeac5c377045c23f6986fd902e5abab255c038e3fda273228785b0d523728c01f95b312fe5d91d74a4a7ff2e200fb9fc88a32da3bf1f509c7c3e478af008070e2ffe527e07413cf8f987669b7d946bbe130a4f348df09642533788f6193a90dcdbd39eabba7bd01c036280bc976e61b1899c80a1ad9b0ae526602367e7a0d4b562f543dbc2e78b4a1d953281e4e9397871114fbec47870ce4ca7d38a5e547d0c52fb1e80ed5da0bd1c75c9705c7814365bfe9c6cc728f1a36be605fdd42353223c1e9fa2456a48f15e466c5d8e11f6d41e22f462b2183b67f8b309e6007ca090c5f467ce13e7862fea22db04bd8743673a4cd2235ae4de5aa3756435a00b5c1a19e9bbbdf3c071751dda1d00f10e9b30fcbf5e535a7b3b856e9ec2c52721fb8970ea66a4c33001adf5bc582edc67aaf0cd5404e3e305c0d94b1e02cc00f071ec1a62aa08c7ce16d7ca32e5e9c38f0a7b19fc1a2d36b475e266bc8cdae275ba261d2c4ac6d5436da10cf6495f4ebd059e1e4d695e70c5fd34b0f987e0f527897db8e67138a809de5f45cfc453190ada0aa06ba37b5d9aa1db541e6c3cf00f3fa924d3c3eb6912b3e4ab3d2090c8796ba644026321186d16dd3350e12dca90d07bda97924c083958ded19f8465fd736f3732098b8216926bc4567fb0ca4f28941c4ae03b0cdb3881537d8990f2c36cc3bdc0f1dc3701248a883c60836b4598d5974c5a9f8606b47e975ed96f1098b89e7864722de30056456fbbfa1912ff9942e5236b4bdca303139aecca24e87d93a740cf8752917d94c4a1da2ab1f8e1ee1ad53ab30680a79fa76a9f5849d758f5d663e7a2e341cf864a31c6af2c8ae7256545098c894caef0806315fe5c6ea93bf14ebe66ad31bd34158b43db43612ce6f227ce2e0835143aee8b608b399d677c8cbfdd591e25ebdeeaf4df66344fb6ffdeb9db95f352d16b896ba0efe8b7a9839ec4cdc06083d84ea43f872eda7c17542ba2541b8004190c5e28dbf974a3d6bfa471bc6d407509dee159e19ec676c0e5bbd6ed1aae6658e23631f9a637911c28214239be9529b54b9f620e8ca3b40a0e87583a04a03f072ad2557c1b8670d48b0fcb14829add755006d1ecbe07787f33375ea878ae1971a9c14bc2db1fe1919b6c91a915962d2bfe1a6cb44cc67d6d56bc45ba2d85324639df14797b1cb92aad71d431eedc96f6473fd946af1c674301ddf51b2470453c3daf6904afcfa02500968aafe25c2e8508a3f40e0bb1f0ca7a3585ce7e75f5859bfd8333782248af5dda9e3d3ea151c32cc724e6e7490944cd640c3b20a724303adf94375b712a44839b0de59b2bcb28941b10b2a4b814a23b084f40106edf241ffe5553d13a5e612d5f018a2d4e1db19ad80f43e4d71c22840c7c256f4a247898a2e49b79eca9ab40d57ed9054f296a3abeeed7c480f329218cb511efd0bbd5ed974bb91f32884d2f220804aaee7f5f16e9120f4739b68384b8d2b52ae1d1f67e9681f80ed5ee49883dfcd70ea9fb26546249d5fc2ec8f78a173a784aaf24d934e51db36afa1cdad2f0f21cc966d28770a8f0bcf4196c9a2e9fe3b171b33abfb4ff2408cc0e48eb63ba403d28899b87cedfe028676b5bf9aca4e42fc9ebea287acb4c4bcc58ae66571e55fe03042a74fc1c66730731825b2602b49f4d0d35c252f1e72adfdf55bd06bf70b02b9cd4457d555437a68adf977f5cff8e0dee425589fcb7909e43a733b40b87508a8b1886cc61fc6aea0c4477c09de4783012fe76d7136a6b324d881ce0dffa1eb4d85843406e4e62f2fb9602c45a2824284c81703202eea7c8906222ff482c494ba496c0186db660c0cfbb609b26e2efa6bc354104a7a53657aba8c0aa04173302f90ddb4f06b08816f8eea20b46002fbb3dfd499dd9e4283255467ba322e769c7713d3dc911f580c9ef14321973232a73e4d325f919e58da6ccf33dd29a5276018c2df1722754fac977bcbb7712ec560d747381a42454b33a65a1a8757efd887f74dd9a0447cd75b59d87c6400ccc2efc35eabb9150969d227c307a7e73e764963324dbbf4952f730c8d8db81a6679a93760f5d9eb7ace385002f8055bf5af900e98113bceac9adb0e80203fbf55c6408e0917faa7c2847047492d5bcea65749f77822d36b6f1bd47a219db0b14fc3c84529f9336dd7ed37222eeb1dfaff76d61bdd4a63e4b74fec70a941568be2f5d2d0287d2de285d27cb52c5892f81c48c93b2e8c0ddbb8708b9ff70c8dfa912bfc203ee27d67635df7e6e19ecc2fc8742cf14f69d789a4d1495467da9938d8df80bab85c9a299b692e79084c53f0d1045330ba26c36354b5782ca91cfd25f01f05a327280f2f5db86aa885bd99a3fb7186fcc9226a827c6a51a008bdc93ec9f383bacabef08ac4d778447b09d8fc03c3870aab84755977c404aebbb738d10ab84368cc0f8a24a28c2b90e6ad144c7e26bb27415d9dc78209ba1e7af8134e2a55dfcc600fb6c6200b0187f56e6e6a31062e65785a180dc771e67bbc517289994d9c3c92a729633248ba4f2189920b84054af150a9597b973a7286cb8d8a35abfd6eac5a105ab681c5578f2dc0871e490e00c41e387ccbfd7b4659d254824ebd3b71fd1e0bb26b732006c62e7906603068a130ddca74fa5f097e8d65d17bc3cac93b06b04690d0069fd8a57050db9846fa4e529375b5b6059a0a14fd7625e7ae540e3a54139dca06bdb96df4eace634144c9c5abdf13b5dafe8b4d1caec5263e9562045db6a2828479dc077e541de601ee95305a999139cd39f6fe83d8a0227e6c127e3f2fd6cccad511e83dafea5024905cb48d6cad15ce98ea32646fed4d43a50c6381e8878ec10909c4f4fdbe9c8739fd38b8822338dfd7f3528b5ff152e809fd1d813e069df4af81bb681ba2a03847570f17f382b275955e4c776c653246225f221a92f554ba544331a5fb93836af9df9b8fd45afc8496f74526f79246836e8cc7f64d922eab2c6ab817d741bef1e4500914ce64422101635de8a5a0935b78b0aaa1c2095200701f7ac61fd54d60133bdd2dc812529e33fd2f6974f1b317f56b5e6b3b68aef7b8b595830d5794ad25cf6e3cf661a9c628c3f792a42b4b59ab39e48ef3c22284837f4fa200127a18a369b58d26020e374020714cc21c72a47769fdd90a527722b016e8b64ad66554fc6e3d4532f1e316cf2eb4f2bee9870570bd83dc9f22a5f42a5fd382c19b7ec35dfab49b7b708341dfc99b687331f658488bdc7597cfbbcda7c56d9b66f3aef74bbafb66cd51e6e977d7ea2e2fb85e66e2a2674fda8481f3929daf998f33eabd22795a51bfb8060146e4ca91a510a700c992f74cf6479bfdc26903960a572e77af70b66ddc8a068910ca6b010aa3504198b21739b691f059225a8aa4d10fb08042b3a9774025c59a8227ab409de8231b8c71d2a6672eb3880e12545f3da606c27917afcf00d00914276a8fee76eaf374570f0d1c93b87e62c7fed46f0b5cb82a5510d6f450ff727b85177b4bcbdfe44691869b5d77e4d552a2a84fc1fc0a3408f84d369e5264f0f0f48eecc3aa65cc96b694d250493d9adba702e32f5d1faff50721a92cb210b8a87c2f01b81d3550119eeb1d57441e929c9f929769af475655c55253199f5f76fc758707a24b8e3ff454ec33842d6a7c9a0500672ecf3ff94d5abfcb01a68c9862ae71ac7909969859f8802d0c03ae070cdaa98c4b320ad620c947a76c0ca8091256c32fb6c89a000a157fd3172a00d390bcf577c9f8098fa6b578f7c80492123b86561f8a7e222c29385c85d38df4d24b36d2d946f05372da2a0144b2014dbf2dccacd24833c08d30d1873854ddb91de9c1625017a4355fa02a9019d401332086447da5738e46fdd36c02b36bfd34b27925e405362842a065d786a6d11c138494a526b157c7cf69bf67d70f7bd519a0080c98e38a7caa50c6bd738c562b969a5d6f4e2c868a600bf0b675b6971e0adabc0303c0dda3c383bbf340532dd3887a77c143db5a67558f64b16a6f880d778e60d9d39d24fd36c67ccf5491f530d83a8455d3016c49cd5e7afe41c5e8efd0b814e21692fc6cb0294823969aa3858a825c96390f895064c83f23f8e78883b3e85b913a787f77f3207a3acc5f424e8e77ad9c14339c282ef5b31525813cbc1fd8396a36d0099b20a1dfc86970214e03b2ef5989ce65b89c03f749636fac135207d5069246d52d7b588451779332809731316e94f02d96e5de527a57899abdf4cab911dac5ed0c5061e2a0c51455a058aed6ab17c6afa0257ad44210d85e17ffbedd704cf214c48e5dc5fbeaa94dcd3d2cda1d1b6ee21933d99df68749ad70baf9b818a525f4efc43727401faf08b7a2fcd0922cf77ed430fe2cc2af8e7d4999e320d733771111059ce5a7eeb1d83fc408895cd7abbddb530e5de79baca2e5525fbc4fe681892ed189af74b0ace81bff0fd1e69083e5c39746856c13d7b3d0b2fb3542a5a47a84d60cc63e6b4aa54fee8bd5817f57c9abb0c64316f913cbaf1d9fd6862a1074bfa8ec6ad02528ab7b67433badb34bb538340f96cac1d03435fedb488b4c311bb6bf8a61686a77cd8891c6388a1d222198c3b06808bba65868951224587f0a6ff64197b6fa81c4e8b02891e560f6cad1c3ca770c8b3afbc0fa5e8a802ec6a9289a53d4b4b5892ab4b6b378c92da2a630dcc36c73bfd77844bf44d632f87fd7a327a3fc6363c22bd6b50fa65d1f12837be0e100b991eb783366d5c1bcf7484f833b28f7a36f046d98d6dbeb648de33013f58f085147fce4427dce342da644e1c3ed1dba830edbaf79e186cfbb0d0c0b6f72bfda983e718332b1db172fb62a9cacffd25f66a21f1de329c2ae86073ed3ef283ccd88e30a0ca4880813f3ffefb9bf50b8b545ff9e5e21732db019a216594680c1914d93e62d02f606971881bd84812b0f925f2076c9fadc2b3c04cd2577c0abf6fcbe510997c12e73a657114db37842c7503049f8ec3264a151da5cda746a82215f100c1325c98eeaeb3a100be53bbc2190c38cfbd26ea431850c9474df084597bef19009a1deb667f6d00a5aa345d1193f9f2b840f8d4d170bbffe13fe68f306bd74d0c4ef81d4ca04cd5ec0613b7668a2cd52ba4ac7bde2ec67d88c04705f7aa84d3f1038269595c1cbbf055bc3719d072db6ddeb43bb4ba806b807fd57abe5735083b27724efc4a4d1a0cba9b0d6091dc422ae8a0d91148cbb265d1c2acacb6aa6f2be2a65967618ddf739e62d8b8297ebdc29395ef177e0391305e443bbf5cff0cc4de86d459a97e0694dfe4673b7d062314b8e53a78d73d56486d0b8bce5ed63f1c80fd829662528d4ec2d8d562d72b4b47fe480ecacc16ddcc1de66e36d33b84050002f7959f450640259ac8ed97046948c856ab9e691a2302089da29766ae133e15fd58b68d139563525eba7a906a8cb5411581564ed6747609d558f74843dce68e833a4383e88c89eafdd865275dbd09d3c429eda9ce234f0dde5ce8eedad66ca2a58907389cb45a0a87c08a3aa8604e02611df16e99a64472e07dddac883e17cf0e01e7cf3110a5d69f005b8fe74ab2c344d4310eb8fc2c4229d68eb0dbf58a12e4889444d37941fc7c7c2059deb5123faae744babcd9763d5cae1d59b7d1f9b15f13f8f14e520935c40fb775ab6fb7780c80d5a9b31015f0ee8537c1c9adab7324a20b03fe2afe3e24a8481e4c9d21396f91fb30693ef89e400c752a142a5e4316d5b8a5a265ada59c6366cb3c9597b6729880c878a084ee8372bedf0d19c43b05a286e2b0e69c79ca9e1a607296c673cbacaacb930c8140ca45f736534b96432a8c3a0e038e6b561d46c5c31050599236c44a9a75e3ccef12d89461168df1c1a5f32e37e5572f079544a752d9c685f7256664dceab43896eb1ec4ff479336cbaade6fb487a96f1060997567406d19fd7ae4db2089ba8cb1960dca1e4621d17c4558b406c349ac6225af2ada9235197271a53cb335f9ba99907a91ff14d39b937a07b2500303df529bab9c0330979944de9c38188128f1dec845dd1f56bcf29e557325124089daa342c54ef985cbf574ec03db4995a35011c8d49b3b80eda2941ee4f661c54ddda761d55e9d2834d8ee6be7b4fe0f029d3e51c6ad79ffee333944f2f38abc88ed4d7ff9c01e0b9d371ca85631780e5373a8ff814e85a510f773fab5ed85492e85b80ce8d8d579688c509fec5372ff6c6dba9fff299800b60a8b1255b2b6953ff1b329d1a462f57067b760abc058d28554c0af147e3955b7e731d96ca388c0e4fc553ace401c8c60691384185dfc9e96821a06fea18683e8eeca431590784005c656e14303ff480102aeb19592af2dbf155206d6a2fa1790e21ca9e25f0ccdb45c8b60d97998cf0f086796064e278af89997ef54f5cb7d493135e7cb15e11c4b83fc6a319dac547fb74d62f50bad7e4f6b2a51a176442bc35e05f10ddb064b1d166040a5005bb9fa92ebfdeab204e0f59a2a5e122975f700dbca8380cbf1087ec53b22877366291df647eb3e77e078b881e1ae8703b3eeb456a351cb914c79348203a5041f380778517072eaf62c3d99ed6f7775fa1138cd7b33a7b9f519e13574fa0f80db7a6e7d4380f7b4b30bdfb117abe66fc16b1bc65d483860e6b3d21ef6ce5d5f3e5006a9832b9b3864c626c40153b29393ad345bcf502690299356fc462fa987a0e20dc788787ca985f70c62e6b7a59a8fb52f204e73c749755bf9106b4ff7ee8dcb2312fd913a0663ae004d1ef483a0661245808cdd3c3e56d8450f2400f01e2b0b50371c3a7b829cde6c260065009c01b6b2c62a91def6954e4c4ba10a2b8ac257609355f89911f562c14a6fad9c6d2ebb1385a175cc3d452ed0554d53f3c49dcfe9b85a1b363658f848091f5ac7e0d9824aeb79db390323765824d08ad7b1b54d5226b4083aabe09c28d7098e3ffb45671581eacf8a46c4c3bc5e73975431527b2b68c9374fd383246dec6f88b80775e56ee7c69656bdcd5ca9dc73a520a3f67fc4662a7c8925d245626df337bba446638176039d608209b1923740fa71b05a99f360b4aaabe13e68e893b46ac4d2dd3c64fb894dafd9635f8a5eabaae217203fca04dfcab90a6a03e06878ea4bf0806a7fdce8e9d41a9adcd507de2ee322c2ebfc9aeabb97fcb71183f1bcc1a523119eed6c2c38947663febcbb9429f173589b1c73d56d7ce21a48b444d05fae4d01735b5487bb330937eff8ace6132d2cf1d8e48f6d0115039c45df37b138ec6b63e9635f5d00ef3b2fc656124dc10e4dc1cc1742b89a8cf7d7aa97ff388adff6d7eb7cc9d0c17a898fd7f9891670532aeef70ec37e999a8a8eaa090105d6f03eddbf02ae2a3f07dbf1f346b3898252238dc1987195d9bb3e5af2072ae2df078012415880e8f8df8b89eb0d9522d64abad7187fed5eb14e3dd05a9912c925a9b52460311fdca049525ee45cda08af237a7f560a3a9fcdd43d9ad441cc14d96972692441c8747423eb3639748bf89dc8197b3dc26f05cd573a5880f7242c112a7dccfe0d32c7636be646b7e98880a1408eaa12394d1f546fa0a53f6d9ce995856897d83233c887a832041fbd932a646547df721f9adbe1ac8633b1a78574b0191510682cc87defc1b3a107f4df585f30d3e9039f8c94ea6b277ab3d81dd3390c1f8d0569a6eb15c1ebae615c4814d4a69e68202d0d6c29e261b06b6289039efaee051223c44daf35ba93db1fde5f42b98d9c943de198259326e0220f6f6a2d241b6489a98507696a9e9a87f177096f5b3e69460c2d3b566497c8eed52b480f1899238fa5a3f1d6ec6afd7445a31adca19fdeae888867e613dbe80eec5d208605f01560f5622592558329458ac6f503b42df679a4faf8d7fce0c17799ed0f54781f383f88ef2c4d34f3481b2a1c662499a083158c4d4d25cd2d2ecf37ad8fb5b48cdba556794fd062ba6b56ffb7f258e4a96b653c354d823696fb94aa8ec08101a4e7d9b360d29a2579b5332cb2e8ecf090dadedb2ceada53c7ce1190ebbcf7d83d419cf539796c215f7d117970fef72f74af708375dc57daf6d34d49ab2312e7d7355ef2d6106bcbc141f749ed2fe8d9fd003402828f8b95a8ba5afb26859773df9730038e12d02f54283d19be0852c8bf868fb9d3e192865c82ae7f2c897fc543d09493e92aaf86aa3b6b75a04fafca8b0f344d2fda0698266020399528e819cdd3ef13d468b0e4caec5ae48cc248d6ba8f378a279d38fd2de590bdcaef72c33c72fe3d3478f4cf9eafd4cfe8829dcb2e1dfb1888cb3abf648cfe3a630c846d115137ba9adeb003851c49d1dca4e570d26a94d8bc83f7f5c3709add358d6c65c9055e95017cfca52729c891fbfd3944a75427354b64d1374d95cd09eba762db5d5b9c98719e336474adb60d5c9a4c930441f1e7c5083691d3ee0aefa53863207f3679d7b08bebd975c1ef9a8f05dabaf3719c0ee3f5a450eae185833f6960bc4809389056703c4fbba478abbc373126221b70397da60be29e70cc92db877a524506e132a87afc5333bf531beaf7a45bd10066263c13c0a5f7b4eca77b2bdc4975b7e756d7222243d67118104bb6caa3beded9cb3430e4f41df7916745739600dc7ee3dbf288a0aa2e66e0876fa6573220db8738cba94bb894863d17f8a1f45fd0001a63071b81403f23b6d83f25e5c9b0767bccd67fe99c538aeef4f009d54095a2cae366735feb3030225af345795b9b4595158c3505f0a3ff87479463f13e677b08ff09e48b0fdd54e1c369c5c654e3d3e2cdaabb9ff6d06480747c503c579b1fbc3d1f97f882989bdf0563a7d7fba1539e099de6800955a3673b0fc61b50fc5844c1199f5a9d9950f2ee735228f193396b398a9a1ccd2865afd1f4fa4255d6e1ca3d6906a3629a78ff99b51fd47dd4b5e6383cf9e61791e72de6856a411ab898cec15d513ab8fdd340b7e516b12dff248a218841ba3dc71b23c035cb7c2eaa15944cd76c82a2afc824a2639e3142a893037e54e02938765c7b0fb0606f68cb6322d24b6a17593d063c64229d48278113e9e120b82c448f420165376668d5934748cce97dc9409f9b9eb0c7f2503926ecdf53085399bd7850e0fad706424e83c9a9b6f8de6b743a469c3fa20a63754ac99c9192bf4996dee71a612abb5538c6c39d6b5257e3db418c5cef8d9a53f4685f79a01cbc11add1c84631bda1ed271e7f87c8a61889d7b9c5bf58cd223f0e3188154bc3e7d5c9166e3922f3f53d6a1a4a74750d210f835a471615baa8b5b3f92a7926b976b657c7e1ff6f65f1db23a670438ad9c8ea02c6744524b7ecd462ec23b0ae1b53054c616ec8c8365bdca0d11d37f94867906e56a9c73550f16efde6694a7030173a5443ab936d64f1aadb61571d33833218083a6d8ad09c0ea93cc3cacd998aee0305988841bba6337d9387ccb6f2956219daa235284bda2b313dd2e5de8608579def33d33a39b49e51c8200c1a870ac3af636389bc3bb3f31afbfad1e4f6f0755008e09399eceedb7ef47da6b4e9c6ac7441be4322b3d88d8ceaf17486307d4f6a5dac6038989923a4d4432bab8a2bf1ffff56b8e66c7469753fa6ca49d6e6b9f05777b27fdfdf3603df928924eafd6ae3cf99c6663bdb2ab5d6d16b573b10349cd37a87acb1d23a02fcf4c03af16891068265eea526836d616f746ba8778bd876288b86395a5f945628dd8c129deaa7c97dd04044ea44085be20abc8ba279e745d080ca6c86e7212d3eb6ec2d29b06e6e8a3a0ec961a184fdd59c20d54cbcce49e295fe69141d45c929f764c7e2f45020b46a04eae860549f61f74ca2ec70548621cd718349ddec2eb8a628c583f2198d59509fe05a0e708ae3df732d42b19f17f5bcb1490d72896d72cdc47c4aa88191d829650c51e4990a7e133327fa2d67681bccca966a18bbd60bbb054a5f9fc5ae0f9627992e6f9cf14697c50d467deb9fc76b503e1ef749e9b7f5e12c6e7443f93469f45b46f4f1d6b0a84cc936e793c41751f450268f8b0736393a8bfb0702fc85a8cef4ee824ab7cd14c7959e669f7c41947ec441a6f0a9920b50a9da959c76299282c72255e08c0d1e9a5f93abb499dbc3716de3de778c15a264f8cb55d132e14b90655bea3fb7802478e5be0402fbeefd7a6090cc02dc87223a72d840cd37c9947552afdc53afedb4f5da5a16a71ef75bea58cb853ffe5c1df004255b09595b49fb7d8ffd9228926698ad2abfdab07f16894020f82a24e2a67549ea1a7dd88c5a716a0e9db151be46a8bb8b0bd115ba955512c91a93d791daf7e6359f3c9198f9f7a27a3ef915460f10520927fde8a88819d95e033270c6d494d28fef3498bb4916c7794192512db0632e735753ccd015ac9d29f86e7ba20ee6312e3844d2dd2f5b750999606c616b7f4deee85355005bd15db9986beb56ad690f4996a3c47f5bfacbe6ac56824f05c127c82df3090bd796dd749315da095d9c43d6a7db79831d35333914b8f0e0f4eae090ad3074d8ad808d14e0c9d372c4e6863fb69cf5f267bb2831980163e58efb8db9505160b58d5dbef188ebde6449f4d0fc430a853ab97b2bc009b6e9b7845aaad2a37bd0222f8db7300ce243ee6736535af37b92770a9790965967db7f40cb304b2e2fb629043f6b06b8cb38fc339e36a384f654b76e2ea157193bbe04b57194821227177865370a6accceaf4bda2613d8700f879037f5bd68a885eccb8daf4012ddb3c0655ae335c3b464977abcae1ee485e65d360e4d4422006ed9e5b5faea7ad3f11d163bb7a165e03abd973c092299fe8100e0d8a7b1b81632786c1261a3fc35e3f3bdc3feef1edaa6f345e423499700b1796c6d185b804ce09ef403ba59ab4cb0dda1098eae2089c2995097bbe9b02e1ca8e04eeb1bb7dcaf7e92d8f853b02cc218f7ee280ff5a3d93f0b0b94372b9a70e833a7f75599452e798b192e49255ec26daa96aa07acd93b8fc62a6f7a1b7742a3396002e438e02064b803aeb264b7eae6fac8b182924c5b2f43d39e62d3375d1fa720c55a4c0406025e3b011e1ad5df900e62a2efec27d3bdf0d693d4b6cb61d96d29dbcddd0e73e9b89e7cf34f51b4caf1ec60e3c6fc688ae4f6e9aa940b9e08045a54f370a8253e47cf78672acef6a217b1212bdc004c4d9b858640c8b68566cdca11c21e65be7acc29e546fcfa3f7b8c0aac238f61e02cc9f831378b76afab957af9d501cc655e12d56b9edf796ef1bf3b6103747e59cca025ab351350cf89f96367ff9d7f060091f65fd3ab5b5dea24e13667571e52bcd47e8bcfdac4e82428caad04e69e03b16645b319102902ce14b95139242014761989507ec56c89a29990406682f8856ae52ad302d99fbc03f14c8324e1f84f94543af61a305589323a0190508de206d2ced20b0cebfccebee5035d836766d7db5fc5aff70bd236d459608332ba7b9003abea6511f412340574995f8105120a7cd10390ae170aee679bba452c16b6d913436cd7be83a120b13ad62c5084889ff55504688bc1ae8e8e81ff9c1a23c9b41f5453b96aa3af178bbe474044dcdaf3fcd45ca9f63a9cedd23ff3629c8a80a9d534c560d4f8f1e55bb47a050f45e7aeb1998bee125f11c913be7b2f8cf7dd4e040b258605ba3b7bda9499bb2051e4a608bb43c2635f3949b25038f42d43e008375e6eeded06f978883a6889baf60c1f70057073afc602e224e487f79cd5d41ee22c3839a60766e861002704bcaaf69e01314a381f300102d25e77c0890566d28a83ccd6296a615aae490694dd5a16ea6a2997d3fd8fe3bb437ca3898933815f15f3e70aaa62c18732bd8db2a486190b9fe38e762fe15bf9c61d1d55edba62306173408e63028a896ddc670027f4134210879cccb1023c55ea1e480c8065eb3f8fdfb11e49f34bec1d2f466fd3f1a2ac1610958778538266ef514ac1a63b87fc4a47198c47b33931f3adbef565acea74ccadf5b26c5c33bc604908b645a68828950961f70d03b297b5bb6ae69b3d5532e8507fcbbb715755d7e43c03ddf8119ceda4240aee9ddb91aa9000c2a3df097efd80e1fd0079027872068858408d21ffb32487bf9ad3c1a72ea6a918bfc09798e5afa06b8b90a9f990eda58f607943fb600c3c9a3aa323189965843ea7aaaa3328c216798251bb15e8debac0720301e99fcdf66da1795062e3855369e84f5e4ce325fab8ea6f5ccccd5b770707dfeaf99b2b560e70fff23b6afeac323a89e8610c6c4574f7dc1489e045d1321397c31e7c8f7daf69f44d85dd5751f9175d0f0de055e8aad75edbcfeb54001a7bf76cf997e90cd5f7842bcb24ae606b54cef8bd246ee32fc01f265fe6494896a2a9f602e7a8dea7bb642126e0491dd76ec0f0b48cf5aac86c60f8b6f7bab1decb457a28256b3a577876361a1ab13009eed043fe90d6085fe204b2523fdef2a01037b61af2a6cb9f490d00f826270992c266daf0dd1b74eb3f3750f2f760c26ca6df9cd262152ab56c7a28eee3f8a755f02640931620694edf644989cf3191b7e33a3453a4b85e36f0062a29b7c67b1ac0c828b79d09a978a57aceaffe1ca0f2bfd7246c7067d4193e11ebe0ae4273160eb7b85837676f47173370635bd50b19aaa8461e43e96d99bc81d700197d9ef847b24e1edcae48dd41174e5067d86f725dfbab6c3a47e703f0f7a0a74428730df29c8207efe79f97870cf9debfe721162281d4bc99144bb2e37cd3773e4bf7eaa707d9231d2b9fc0c3323cdb1eac12b847932c2145530686a02e60bc4e451b7a2d58e756158fd9a2cc5ff3a5eeb5a23cb1dc0d724fd20457c07554ff2e275f9c353d9c9de096962f3a4a4074645c513c61f12dad4296329374af714cb2abda0849eba789e12868e70ff94be5cb16fdba70d3f353f68f7e68d79f1ef683861af0f62cddf9b1ce0c21ef7409e4e8680efc74e959c1c653428f6d614cc208851f17b7ba9cac9551c402ff3890880b47aa8d91ba6cc49ae1d576dd15a5def5064d255f6eca23238308fc0920a9e4d7c978480a933573ee5263c84795f4e1303f0ba83de9a94734dc8064f71402c2d0c1fff96c36bc48e82d482d034e0111aad7684ea4ab42e84445db3bc9ee5c1d02359987531415387937919308d4fcce263e61d994fb29f2c820de09f3d75971a3b09428f74a3fe779fd9a24072a8a0e6d1f068a8b4ce4c25ca0b2532084df89fb30cf378a63cf4dfc892ea443fb3bcfb6d550171dd0e2fd955f3f67768c87f8f13716436e2f76f6e0621d353c08605c3e1c351b3f36ef08a3cd8c89eedf09ad8a01195f5e40f490a39f9fb3cda1266f42f43841eca2c0864dad16669d83585a40c50e2d98a1cb453691b5ca90e96132991a1c2126e875159e02a03dbde6573ca70e2eeb603414067c645aab1cca85e1c066a87753b9e2205f07125c02154b9bb1d604355d2b6bbe46e326b3f75bfcbfceec949f7854b5e0d9b512acff3f9e924b142ea2cabc33f86096caa7f6825df7d5acca8d9076eef43e575655c6ee32f26537f9254effee6b75252c0dadd17a0ed7f4fe00a3b3a440d90efd8221dcf300d881d0ec04b3fbabbde8627edeb54be4d5efc2e059c734ee19d2285dbdd3d32df6724691d79cc95e6e755db3d8880842f1d54754eabe0b08d436fe955523e6ba2a861eb09a9a8a98781d086ea60e5b5cd69667c2968736ccad2cbd3c6d45efa3bb76edf58626235938c374c4b9c7ea0f95c7f153d960426b59775dfa473d28104e76175d8a36c72370fec43df98349a5fe06ab310fac352ef9c43e0bb4e2a19fdf8d19b43d5466f1f703f660d5261d3aa4cead2033f9d2d1b95ce5a79cf268e24e4a508884e9883a7838623ec9b316a3e4f0e3e12f349dd1280205b9b164811f7c88e2c056f0de520cb5f97eff92a3aa60a97a52998366dc64f46a843b1f563f0046c5584e7a23b1a94796f4fb1b431010833dfec7dbd81178dd92238d07cc9e77dd8020ea042b884816f94476e80d923c47e4d5bb23ef4895e2cec4b2f634ecd4a90997077792522fd2b7ade76d7b7c7c2e3d3eb8edea8b6940bd7e27b5afa0caba20ccd03ac42c3cacb21315b4542f3ac61ebad33b107b37205588e7e4e29bc90d26017f86893f0587af7f8c30c7d33d726fe645639b0f580c1f52afb6d4fbaa09fc10cb6414db0aa121605cf51f3252e73d2887422358347b42feaf980141c08b5b0b753e4ecd610030810fc0e60b6f69d75d37f42dd5f8e98d8d7431a69cfb39f755b8792ebc74490a61181bf5d579c1b83eacda1ac05cbf33ddf132da3480376d39f0c7a4caaa470257f1d122d0a0a0b2f23bdeb5672a2b1032c45c389b23c5d83c34409656ac28d70e912f935d24e0460a7fc4a7d51902f9dca542a8f2dbc6f0e6e94c27c3b2ad80ab2db1200f84c2b76c5ea401e2a4b0dc78e097662f2c84f09b2565653dba65d913b0a523d1d441ea63e23e92ef92aed3ebd6a4de21b11e350efe13e837656de4a7f29ab76f89c6e22846454b9103e67a9f14a634964b8a651aa646dbb66766b80697f1b5183f97c8a14a0fc116c617326d671caaf1ae6ea19ed64209ffc8d2af215205b3a4de54728374d1b5df7b33ce064244fbc7f8c19fd5ae231cefbf8461332c97c04bf8ea5730721f5cace85a3832c1bf52bd89ef858f92476ad69d63d11e28c0469f34bebaf0158355c5609a6489ae16886279ebae7093b86c8837d08f2d6986f268628464df94c44775a17f06eace2f6685142384f0b5a310d4f0d83c55dfe475b691f2d7a44e74d33e54eed8f504ecc7eb68f4b4ec9d3306e37e7d8b6db336200e1de22c9b9141d01a96065d579c50c1fefd3c61c8a42d132d703a021f2adcc2a7fbeb9a046ceae1480b1cbbdc42f6eb5c677143ba6c838efb6dfe59d4ffb16d3e877f804cbc827f63f2a475d946e02c5938b42eebe7e5acaadbd46288eb2dd385ffa7e806500b9550891bd389c5103ec6b0e4c8101b10d691bcc671eb32014c716e128a9f263810c4e2bc8ad2e5f361a2673302ddecf12e269db223c3fbc38505d0054ca7b0f3a847e505099c256ebe994391595d39ddabd75882534ed29d137883cc39c3bc8e248075b80fabaa4b55137d724500279fccbbe65bf4ef915fb25bd56ffe7b332e637b4bd195925cac7b0f050bb9fa0ada0dbabab63dcb0a0f61c3602b7f17a000ce8fd15d6c1a3dd5f9becf30eb3892352aa981fedd5b3101f5ea2a3cac26e6bac81ff6907459a1f8f56324850fa3b3a157d5d8379baecbc78aa701cdffaafedef668e4e7fd8abb307ac66384957c0a2be50224b544670e4a898d3d6d5ba751a30716db1ceca7411e308c425ee7600f2dcdb78e41aad5fe69e8103f608049f1a88ef5a31ae63c91addcb0087d4f489c96c348130c35a2064ccf0414badfe935293ae0272528b4e9c72a901ae431630a2175a4a8476896e6a1ba05041bf8f1443c1b0613e694635a306f6e81a4001734e7dbacb918ee8074ae0a82305acfac3907339b96641936eb4acc5efb9b2015cb0202aadafccd72b73b4d4607239ba338de3d1a76188593686d7aeb6c093353faa268a830bfb1017aa4285d21a779e8dc7f33047a3f9ef469f0019a20cc6eae1744555aa867ea47426e28371b6e3bf50063127095fe2b21dc6be00ec0f947c276006ba401321a9cc63ca086bc589cd4e3c6f1f8c6ea6bbd36144b193348e25b65634360790c44ae694e808e9ce128beda051eeec0bd76b97f2dc023553a29ba54a16931a8d3fbb715e4b2309145fce0436b2c807cb1cd21fa7db03d6759ba8faf5b3b44ab73d6c7e3f4f69f372c4a981c357885e4d84095a0fec0575a22173d0d74c615662d38c60963338933259db6ee1320d4bd92bd7d336bff8d3d7c11376f659ab9f16917ca94639add7c64386bb55257f7d31fdc28ac51fdcdb2f70e04df341c083c339cbba454cdbd8ce76e4b6667be110bff9d1519a87013cc2a1b262c627eafccc716a028800e77d760f8dc7bc57bcedc93ff80adedc9fc8bf46e35a18bcff6f8c337cb61c3545a89904e73d2f9d58d4a3a6113d2abbc627e09b24e64a11b6c0a23ced2723cd0d0cece59138e01d36c15c95a34c4f1cdcd19c7320627825a5f5d229ee308f9498fc3ee34c735d62576f2e445daf40f0fb92a9b50d3df5a81da86c08c4b246cd6f8d6379b1a96cfc658a25283bc8baf004316003ed235b8ad2db8fdb673b9f8f7bd528bebe6aa46ce43ef0193b9d063f4a8ae280e62bd37b6d6757bb3dc6119881d1f392fe1aa5b72c4ad1bbbd23ea39199001bfe5943c5742f37d3b6038d66ae256d6510b39679a02b5b017c8c660c4c130eaa615603832841363ecaed52ef74c64ad178f578040d624d88cff2a5d2140af23c750fa26345bb2eeaee6fb5b4adf98049688d7a565f9a2b1af21bd477d2949ea539e54ae93aee727d7639d41bd57082b05817509d84cda1885fea65a3f96360f717cd52891ec82b36a5e22b2dd5d8d2b2f777495c941f49884505abfdd46e70a1114ceea87e742102857c478df2fc2427744861e9c68c256ed77a1337bb2aa8f90804e90510f5210a7b4accbb21fe019d9e3cf383a60a81eb21ab5d6b514f137f851bb711dd5087fad54d44bb5adf98a0c29c0115dea3c1115749177738807a1e97296c42f30c6f67c96c9a474453b04d695b3d5067771c8fc4c3aabd32f02f32fb3d0a644baa48fdcf3a1d7b0fa8e8a0d02520fbfd2940666b8b715d3c0ecaae8892e4acb5a3019758d978d01dbb3e4c77c60fec965eb6ed46deb3a774645f7d13afacf9e77c73da29dcf3d59d563af938689f767651348aa8c96edd31002cd349850c5811bda03b6fb27a87ece237740eba6e295a845be0e8fd15326dd9839916aa55f2dedc28cd3d841fb1fe3a21024d1c8fb7f802860e3eb75282ce1a668f42890a2e23c952b9752c0c410e453901bc84fb47bf3b2803946ee4814b6d0a09d84060a516ee6f79fd0b1b7cde15e940f5ab77ebe66180bc45491c753bcac498ae24edcf615d69bea41c591043e22ff772fbba3e8482e445edc3651085b957151e1a31196a7f0cfc90d21121973cb4ed5eaa3e3fcf3feab3ecb80e08067cca68d8eeb836bc1422fa69226b91126c9628983cc69131afb6aab835988c9d22cbddac98d10755cf2856e4940b7d148ed8b5b6bc79559f148d8453ff2e88190f849c19e2ad1c3661b5330b252baa5b9b4d6e47a4a95132401470c9b4d2269c85b4bfeab50f820f4605374b95b702e8b2619302a4e542ff91d5108690391c2244c5af8443ba2a55ec034c018a44dda793b0315a42ddc3e23971e06c0b87a81dc18e09c90f4dab4bce70d0ac888852917aea61b0ff2d98a0a25ad8593ef132d28767213dc0e3f7ee63f96ebfcf5a68d6d253366094e5eb4c3e9073049b4abce7a627be0496ae8398d99de6b51e2be8f7f8eec608b0cfbc1655eba0e728533ca768468264062578339c76acc594360a5d7d6569ba3193a82f17112695af658736a94b7b917ecdd48edacb13999d243a8493c663fa08fad12e7d266b62059f96349f5bd60a26bd07fa7f0b002cd950dc713c36b27252621dd027d81283a956927841fa00d5c0b0be036ee608eb9fc24aec13a937294ca6f9ae72339c264018cfe36d5da66bd8d07b69b1264649da981b83161258d69398de2f072d24c9b86545b8334693679f7b5a920d5cf3da6ee666ec2e512b66e7cb6fbffa06e25bd415ec0624faccef7201c6c4d2d7e2df6bf1fd318ed92ab29e1d585698042b1d24382b03e05f18cb4aac3deffd05fff2a5e45ed80ecc0e1b57e78661b010860cddef3ba4f1ed03d9ecf72dec24380ae2c8a862cfa9c53664f3a1eca4c5d06719fb8896ffcf38d35628580fa96d878618a1b4f5c4b3eedee670da71048ccf97649d33ec6687821481f0ecbce57801a0811da6b6dd626bbb6247e01b28a73e6274ea57d6492523dafa08eca1ccd2e999cc4d3767dd475f9433d0f9b3a99f4ccfeb985feb6a335ca4c18e69b71936341706dcd57c7fff1a4f684aa3edd6dbb5c365e237d2ee54775a8c6239b460199ffb56c05407d1e8ffef4f8234c4b4c5f89c92267771a1a962ce135f113e3265eeff099d0e1721713fc47dff05445994c3288e6625bb29939a11c9e574fa99f3f893214964a36329bcfb1dea835fc71d81a27a12ffaa5a766150f8bbf91d3569c991a6b28a1e75f04d7f0f24363549647ed0806abc5324f315bb86ea083e59f209b8cc67c38e65905f3dbe509e6e490e7510e913672c1ee6c9c626a177e696e042e95c6277e08c098b998681ea4019568fa9a0cbaef5155a928748cf6e9958547eabdaa749b77e804cbceea4b560731c85364cecf2a9b4bd14debefa2c8ebd6c0b2dcc49c7967766c5043f3ed85b58247237acd0777c7003d3f31784e90cae57c86887c49535d4a0209c028c5903c7050a47e4e3939c12be0cc271bd56baf5e71d85cb61752161addfc7ee5ad5a57435f606466c18b214fdedf9eb1c581098a86871c59d42edc719bf0ceb7d589f63d56caff4ea413590d9fbce0b3f7ee6c0716d7807a41e78bcee3fbc9ff1a19d396f41293fd0fc0e5576cc9c600d69ad3fc7702dfd08402e0e47c9f61ec4c484d7c050762063c20d3e013172834bfd8329db6ff8f38e75fef5daacf5df1aaaa3ec41feca9cbd2184b76f1b6dc7c48320daea698a3caa6f0f7e3eb4121fba96c27bfd0c7f500dca600109adf4de9ce263c66117365b68e8e55db4d584640964674c8c111b4bd2b02ddda25cf7cf9adf47ea36143a2aed5567dc92547903df9f96cda0c4cd30df05d8588b07a52d1bccd58f30299421ebec29d3b151934885b57198d46ea3e74ef93c27713c66fc2a95223f2f889a122d130b697c379919cc184b2559c515311d3064240869750f91ed6e3251860560b9a254a2cba544fb6221ba793649feb76e7ed178e3fc6eaac5259da0d1513b683fe6197b15b40e5a4e73737277d6d74d9d438df2a31f0f90597a52b1977df9e19d8d6f73545b3e445854a8e1e143b6d8ef4d69a6558a713f6a7b84deee29ffff6dbdd6b52068b7aae7a26f80e6f7c93bc537a9d29bdf64c0e93b2f7b56dd0e66bc74d212031ebed813ecdcebb49f77a207667cf1f339852d2c0d175a0dd893d48c7e63c7313ca251270f21167e21bb76eb5f82ecf29cdbcb6d02c691f6b2b7019602f226a33b0df04033b361326119fd458be7a6db24b5a328566d063a36ff304857bdf38812cd543cff7d24cdd478e6085dbe64a9a024d6518258c4d025338788518a71c48be8d45668a7c50f225753766dcfaa699dcec5a29e9a7735d4491a7ef1ce8d4cee3c0ff680bb627ffb363a9ce087f153afba73044c7256beaae806e34e6b7a7a91993ac49a53155026db629da49f3e0373de7b86f6d0b2043ad9a6d9ea6f983cd7a17053821497c7b77a4bae2ad2b27d82dc02f96ce23d5abca879beaaa3da62c76ea91f9eabee6c1118b72b11d8d9a4742dd1659a75dab1dc9ddc3c689949b834a83906292a3919af918ce3779723f23f421058008fceec37b5a0d50788578ac6cd99678d8336af99b33d9ef3546cc2c29762ddac153ea8711e5c63663e3bab31fa3c004a0486cec630e7ecee9f0d8f071e6877580b3a1bb06e6d77a7e2b1618d6c5282ef2fe1acac65c601abd05443c372efdb3e565a949028d738b3bf6dc8326a8f9fcf01005e8c1d25bbc771146c7f722245129a4112fd891e80c1b6a701c00910fabc8306aee739657175a3d45804994aec6e7e9114e98a513e93acccb728424c5add8f43681894276a534b68aba59bf1825f75b97a474777e83eff69a9b03e620857b1189484123333c3d4acddf4edc641990732b55ab5f80d3c8e918d719aa1cd2a2dae0a4b1801c1ba5ada5ed72d4b849054a7496ac78e587cf0ee4083fd74d5cd356b1d21d092b20d02c5f79d5898a73affcf58ed5f6897c1e542a00b4821f0345898f054fb31ec5f5b47e9a2b1dcba2448f913b84bf9cb6526c21af4213f727d774e63ae080b861a3bfcb940bf43a377af85c705b2af420719f00542fd912627a535642bc01c1194a408cc338046b611bef988717cf459aeda73b39e9f717bf6637ae299baadb7475de53876c36f78097b49a576f85b7675410e714663f836e9dff15f46acf787ecb742edf52cd5e31ba37325a6099476085ee1d265671bd15953957e04f2e0f7ae8a4f5718b8799f74dc226fb17dbb3267a73378b5c4a15eccd2af024fc1572e3b407e1a116399838bca0601f0a554a462d7dad4f329d95f0ce2244140e5cb4416b175ebf244f4b0bf52fbca6f67f177651dfa3680ccfaa001ab87b233adb3f59bd6f2f4ca963117fa38616a2c4e17a13c4806d7bf99907c132ba0b951f24835d8ba433351134f42aaca810c3e3ac4d02e49c92dfee5ec923454a21b9378ca5e71e1f316609095c916e977ef8e32d3328d58c4a67c7029e6edeeb7bc7127bd8f0b76cc2a65e017271e73c8bf28052b4f6926a3607b14b54f908cf1114a7b82260dce2f31d88aaba504798770901a63c640d63fd443f878c6e7c7b3ae8237cc9bd218dd9050da022f6806820d52133239fe9a946a96fa141c3de21bc8890c09d1e4ca6712b988372d09983b80049ee3870d819426c705274f4ec2548b039fef6df854a5feb56cf248e3fb54f023d0aac850ade0cc7495d274df66cf9eac322ac4242a22ea17c5ba880f8e84c7e5c1ce1d22b3d3ad2b43da74db61a840c3b326b46dec0ca1f1288fcdd1b8395aa21e57ab7dc83339f280b709c962d06797c6df0b56fdd5b7a3bcff04ba6dfa3859b0f70dc42518c2938fe498dd79cef29ae0a60f19f938b8eb89b605336c89a8ac26e6f9081ef596eaefc7eecbe906cff46c4be666bb9ccbf4c546df1264f0e44b3c05840859a65a7770bc11bd8c6bf2084e2d86b35f6d2bd4d79615f8277fda0eff910c234356d51e0f3221f6b0f40d15481452fd879f3d9b9c51c880c9aeeead0c5c22b9b9ddcd2f27cf685b526a5782301cc77254837f8f16261b6960a838c31c552f22d8db56c94d9a2df57d697d6009aaf8aef585584f4d43585ab1fd0618668d3861ad4941512ad1cff385d16f3df806e9520e78be9ef4532109b0d7785bfa51fd910547f521670afa544db427d47d8197eefae17123e5a898ee7665c2140c08d35735b857ce296e7dbd4c8dffe0c3cd33015eb062a33bc6d2ed79d7edc4d0e1f1850ebad2ebfbc1cb308b9a639927778909ac101676e731f853ea1bb2944994be25b79c6c4b88c089823b85b45153d348a35f3accea8323244d8d010929c91e78a0e53936301baab7797bcb74bd3b26018c1f2a5e84167057f3e0c4f105f19382e203a7a2f24348c097ff473ea72e6e052b041faf7c7b238ef3cfab62925721c28d541efee0e803c5f1708690263bc26bec86514092cf985e9306475a51135029402d5d4c372cbe9cf89041f7665b82ce79a23170934fc0ffcfde18b15082caf077ed2273caa13ad0ee5988c65779d6629d252d139bb09b57e43a99f145f2b7347927ea33166a7c4099f589c16f88817044bb615148f2f63296abafc79a342bd57e1f00e643e83f12f5baf4cd3ea17fece4fbee3ac24f7aecc5ed97c3a88289a3ee2669cb201a48d6af99a258adc33d01d0185f9aae3433397c2dbb3d4e6afd4a9f24e13972e5f8c987238f3ccfd67be0c43a30a4ed71e998dae4d2e0d6a7c16e8c9dd958f21b99e4da24829fbb3c85d3684f81d077531339091354b882f3b94541b2d7337278bc0be9200927332c60009d40d56e06195bda402a0c82d01064bd9dc96dcd857f8561983efd4e649c8b7664d489a35cafab342766abdf2d444e98f317fe84d14c897b0125bf2b9003f619e2624ff16adbed4989ad68225160fe68d7e0c33bd0522052968235ff5f291d3058802949fdb7daa5054d03dca5565aa839a316db859f580b92fd39f887252c895a89e43f0620558bf25f222932b42c799b2896565853ce3a4a5616527fb720ed44b4d19eae99c21bafbb5ea30dd0d1936aee2a4bcdc4bc1c1701b3c3354b569e404f0005d1ac848fe6a3feb6a6e902d9b6c5ccc666d6d1abfb3cd46ab3c4faa2beab4fc452435ad3f2861ee8ddf8f1df56a63c5a670ded580407abf69b188f749082c050504c1c712ee602ae606010944cff6d33e452d78beca7ea458c995fc8ea8b22d144e52a2226814f0cd6f7d6f026d965903d8e4098102e371b5448a92769c20251b569736670b0055cd78c18d5b7f4af523eab9273255a7ce5827ba5cff6a75e968a9f4b2e61f84d25a528d9c73513df9a6852285b5382161b99bb8f4c5b9ebe9133a56388619a711e42c6447d8ceaf82057058caa58e408305e74967b59c63082e0d2f11f104486417e3129ca7d0a24b16bc4e1e7b52eb6c2505590dd0d0256dd62d5627fe9d422489ed6874eee1d338edbf7a39fa3cd3bc4e9809891bb9e3210bf412751cbefc2a00bf57118f746de4571c515a2eb4d6da7649d53e359ddb0e664201723cbfbcb82b86207ed63e84862841f32d4d410bd404f8f143b813586d4cb282e4fa603c41a57cb349bb30c20dd8a243eb13e8a2dc451ee458a325f5c527190a3c017e488c44831a26cc96205f0d8547ef9d5f226362f295bc7fb2351c0bc8e03f0ccc299c089cf60417088ce1f9c8d1f8655749631ac48b04311c973a972d5033c81ac4b3eb41ee7200f39879a448ea87218aad5598d00b7be7f179f49a2ab9620bd7ac8f4f90e00670f0927aba05b9be25577556c60723a4e5f5219311f67923b4bf0f193f62a5c494a2747f5376fe018fdda1811066652d60417b398445c144f5afda7bcfe4a9ad43b9b89e4bac622cee859d92f38499b70949530e755eb7d869b7f6a3ea1e0bf5d5b053b03dfe95c2c10c3ba100ccb55d7bd984b8975227379eb600bf3fe63e171e224983d01bd12e93793aad81c47012218fe290898f927a861aaf98432f972821e57d85666f7767058497d75d59451b4b9e28edaf2458a86fb9096a2e379def85436c1f350184f3b60e325053b6637eb8471a6900fe3b98b3a1dea54929582512c6a55cc5b87b320602a46cceae1803587352eff4a83f3f42308983fac2bd4f0377f5de27d0889dcc88221b5c61c2af70cfcf46fe9ebba0d7f5e3342ebf6a2f4bab45bb005e5a6de4c0a8f8489ee882c1e9453e3dd765324fe19dffb06b45e01bc7ef8f6c10bd24f1d6dbd4686dffb38dc40b1a0e438b07e8d30af157ed26de8bc9790cebd9d59e98cea0961b1a29074a7a60557b91f0468a690981ec297dd031f6bb9652e0c620c91747ebae2da7223d7042bd0a5f68dcb15ce18acfb6dd3b487ad0cb90b6380149472e722bf1996bc3cd28d7c907a7a044f6ff653a595b0921175762e26e9495e9eaf6051e6157e2e7624e4d97dc321d1313206df5d90be8bbba0917b6c53ece457df32543096bebefe050c3d5d5c3e655b614466b7c287a505636cf1a81262f4f41925fe82fc131f7918571e638bd64ba72cdc76570127cafaab4e1711f53ec88b68df7510d851bc787d6ec8a2dac549249ca5ced58a25b52c3910e81229da2aba8aa7097be53d33212f002feb441c0a32a94043a4689bdea33849668250f81e4fbf49898d9cff33d9f0609200f1f21b8cda5b6fd86c9b9b61d7d5ac283ddbc61bdea879a4420f7db305ea95b54a889f5cf586b3f62a5a91366f7c8fcdfe2f9b22be82584cecb89a790d0e7d9291a23b4e4011c1f9f36992b1c8539392c9ca7c9447e48ffe200bdc7fb8adf7514e6442eaaa0a5da9a91499b9a37edec65272de4547845aba59642a62e883f1b4a48939f3b7720beb66211c742741087f7de30e0ff5e1ce476f22e7fffbcad8e1d7edcd79e19543b09efc9b59f871042bbc01c67366f1d622e9276cbfd84de0070c6d3ed8ff55033d3d98ea0c8ec22204a75cf1b326a58ce2b58c6d63e414eec563449b03eb926ffe5a466baca9338969ee2b799003b5ceb62eed0ab54ee8ae9d50f8cec115f614a50f1b12e3d5203cf31be027842f916bab377e6ddeaa24a5c4c5200242c6243e20f89bb45f93f6a20d2f466382e616ac8e7a9c1fff6c2a78f03cd36f2730ce2f9f5d9aeee1785ee6eae57509ead26f3befd8f23f04618b80a43ee7ade3a671395daa2c7a5307346536bdd58fe2e9bc490ac2aac8f019250c2243ae190f6e07f0df3149d86c6ad121d3f12599dcbcc90bf4ff3f3a0186b6015baba2899e365fa1a7a7f031e2a0f5d64546093090f3dfa658ef40c86241e54c72be4a9332fcaed03de14a640e84320fb06c0350a136cfba9a17d32e00bd1b138fa54f00c705ce67d67c413d5e8ed362b6e97ebbc5531b1ea8c33e7997e7345bfa1c9815f9e6382c475b7432117590b27730398505ee2cef22fb16e7d4366e058d042119fb3265d330032d3b6fc13905a36e45e62b38880e4daa3701242ff1da86302d840818bcb628464dbb0606175dcc37ad00bad7488dc956c2acde6b33f56f838f39b65f0759843667fa20df525f83a14516669788b28aff3c9a8b92a612911643ba744f0ae7d91069b34d620ad118e743cca63219e872346b97b224481b51cb891ac1ec3ec15599c3d0104a6a8eec05e2dac8f45ce7dace3494f0a5b6b84e410807854439c88f9d3a8f04b5cd51efc9a268726faf73938eb263fd637387392f5ef6a631935f2a9f454992e05d7da3bc8f3757328ceed16ac6e6a8a4c018b714f40dacced85e27f4bab7b67dbbd17e1dd8d6d6b6c6e7118414029b9d658cee5d9a9d4b3262cbb9972dc7fae2e965043d6bc37bf56b2f7ea22d3862cb5f999a5186a9409c92008acf24896ac3868d45f15ca4ab8cf03a6bf06cf94dcbb3960c315592e0f01db80d9fe0e1e7e4ff560d195b9ff680fdfda50223f5ff21dff925b26dc52e8eaa666efbfbcdd43f5e3a10d290887b7c86af3e04d60ed4c998b5bf1281e9689e59f00664f04f305e6f21f7cd8653418047d378ebcde505c6134157b3f152a083493b3189759522f53fb41765a06cc750879392728db2e48bd10067f27f6f95c6b88635213301c7185dfd2977a2f4a088232ed91f55e25716d893b200008bba0326c643891e713b0e607b057c1a0519ed6f46123e082e1a8cba154367141c7df0878ad3ec95717815644d3de329e6cc5aaa6925e496fa5a57bb05fb5f1b617ade87046840bde1a0504a9abb4b61d3dc59bfc1f44f07fd8e0ab7ca9d5e3a5f14b13ccec65152bba417e437579af210dd80f2a8dd4ae345e9ee31cdb08ba58a4a35a668c31b4f6e2adf591296b34ac7d2fff4b0a00443da1cdd4dc0c6a6f83cb3937817b061dea30077ea8f42436e603dbbde23417742cab3ddd4ae635e82bcc4e748a03ffcea4f2733498ec4d776da59ba2943aff487ad91411082a63897e1e5c77aba1acc51f5f3a5953c25db86aa7444fa987e95151c886e1e47a5d0642374665692e08302102ba9f9a281685b8e01301c1cdebdd9e610dcec6c07352cf0d73d0348f4207064b103da2954fe18595ff44ec6a139ec1c5148629e1fe986506eaaef012efa0d5641c3c7b6d352f442488b139627fa3e13e175473124cf4a9e750b8828c449f4328a9cf8ec955c40f5d9f25b9acffa3eaa9764c6022b7471d76789559f75f9c6a8a5c53215e826817c4ce6eae59e7635af51824c2cff04101a8ac3c486405f13ffb0cee560917b8c371d82b373c96450fe7d3581547c4e6ddc87506d4c5784887d5ac516d9b62ce95287709290f3a3029e78f7e6f5b4fc0017bfbb39a02c7d458689c5fd127e699db851b98d186770a6591542aa34882371f103b02bcf4010f9f2b50c575ecd7c8819aa40491a9f2e1202b84c039f67b07088ebbb4cbf3a8050457bc44146e4909275ef52f424c377be38e00335a628736bfd643d756797869e69b6d24161afa1bd338969242925249f77a231c30202321aaf97774ddd2891920418ed534fcf4897bb8cd0952077b4eeea0be4925a6bf0234286bfa557db909e72d35b6c0e8c09117939b99366dca5f1f33a1d6b758f7628cc4c322d889bf64cf6bd01f754649071713f952ca2041b7d3bff55a7dbb54e8de27ef8479aa021b19b6af7ccf7849592ba39e02e19fb4e2b1e44cfd849ee46ad460e25dbc4997411a007fb1b3d4e851a89322114155996d1e7b9c52d3d06ef4916f5008a640138fe586f2393067c14fc3cee72bd42b307a00facdb29df0230e6513e1b353c1472732ecd8a10e2b6cbb40836421217c1472797ec2694150eac9a318951b1783177432dfc678bcdfe7913e3949a230f8b60eb967ec15f95ca32e8d67b8033cfb9ee968e3a92214c449a87ff5733dae06bccfe8066b26c1245aea29a4eb922f4a396b0d643f7f901551319165aeafc96d218a4c16a4497eab2fa1fd91a3cf3e1da30c8c478a55bfc48db1f4ebf79e65d7c9742b15b2647ba48818d87c2298b1576a67680e00a66b204dd62ad93db56f9986da82722ad7cff2d1b4e792f07fe58039d32ad242920d408fb95c7b6ae4a78e58dff02cbdf670d6a95fbc8ea5fdec800c6ae0c9d806002b6369e490ce3e7ec242859955b49cd092fb892ce1b8c99043e14fd266e3d16e29cb93d09868901993c5491dd27c5da6e8b334cfdb8c715311c606aad9fc72146d0848ace914aca505e6a38d4a5b6c90e2fa6de09a6c5e0a8d1c8ab86a955fbfa9cee00e20c82edb21f1773f7dd5a00f2c989d41fe2c6a96a960288af19e0ba0122eadd7f6bc066782237f00dcd4f7e53d6a7d08d73df18bc46b11bb2b6f8b1cdf5a8e6bdbdf9e75b158171cc070c2bdfc6fda8e5233620d6a387339f4321ef95e5c2372a8bd760d8e7a7745a5b5942d6d39e49c9a4b684a10e7504da23a95352d118d1fb1dee489ea9db10cc40604c0f71d752758503ccc2e57a4cc3dc868ca69ab382206a0ae8f0d47dfef6ad9922847cc7d6c562a8808e3f008c91c91bade5e5fd70979fd2df3513df8ec9819a42cec097548f5ffcf42b4965e13f231287e951794cf60decd70ca70df39c93a7cfb82ea5bbbcf90c7e54207f2190de068d6e4c81d61d7f5ca90a024705a3cd75430b88a98d98822f3210f700fea482e15f2050e7746b12a604dc384d2e309c766f46d9fbe8bbafb3bb6b04553cbae978283a75ab819008d7829d2c1cc364b6d7ea2ba49c1c63bbfa06ca2edb02c359ac1260b93ca8de72d7167d75cd12afdbe5f6cd6e335d909ebe79502abca55ca1c9d37afaf0d3db2e5d7600a81478775c82d3f46717601e1c052a50bd43352bb60aeb76c1946faab7a9b031a75f6484583007b59b19bed6dfb312a03825c98540caec9e7fc99009bd08141b2dd06d79fb899992ab3ef6b391f28f29ade543f84541d67a542c259e531c412a75184008bf481a6e5545d040a2e7681c98d54dabeb3e0b637e9e394f94112b5dffc4cc2128ef93a7e8e324cba96e1b307e4fa17693324540d5e043c2d257dcd0f5a2cbb7ac5e269e6875fc32581956c425c037b7a95d91407a3e4dbe60ef484fb6a9bfd8be147a83bde180cf540fdc8e4c66d0bb16a51abdbbb2e28ce8b21cea13355d26420a7adeb816682f0e983fd07b27dd6c54e5e5eb098149505c7fd5e9f6a3ca4591879a83c559a31ae0f86f3dd9b19720e47076547bd9c26b5d4b806066268544038907e6fd8e98b4452620013c292bd675edb928dc6fd84a40082d9ad7ef39904a82642cf5490aad430eb1dced81f9cf3a4e1affda925cbc60be5ea2e836f2d22db72f03bbb78684a74e7bf299e9eac88f4047991795b8ec45f147332939b2275acf20c4c571ee85e164dc3fe8daef84fcdc27d4f8299aa0b331867c8e76c3edf167bebfb73563e75f7da195f0e090a521a6879f1d8947c0fc6308ab264bce8ed568e7b473e0230ee7a1f8b1861af29c1b3f6620dd97a52e24aa8243719a5b2767a5f4e3ef4acf85ddfad18f6f42bfb73aa5eff750df715d567ae32157f06abf556b0e6712698e430f4cbf6876664df5890e0e21b98c54d826f0ff6b3658f036de73700039045ab6e84557ffd81fe5f43e09d4ab87873a867ffad201913669c8f02692048a1483b84535ebaa884479ce7a189cb58607e22feb7effca786899f93bf57afc676a2d49c340b64e1fef3140d5a86e061d6d36d1de81c7a104fea0e12a4475de7c13c62dba91c78fc5ed82efe6515418fbf63ab84aa81fb1742b3d8892df2b449eb535454daba957d2bed975709891820068788c5568f8fbfc93624e07f73767a57489ff48d3cb08a070c57beed67ef0aa3056e47b66dcbc73181ca2bc4cb8dde0586421418b638fd54feaee90abce4aa694ec7a554460094a9abf6b3149b1f6cd77de3078fbb7a99a637802951f2cbdd8f64f8a6c48d3a56e0e91d220e02ec056ec4d6de3bfee3e53224a5bcd97b747b40d13eccbdda38b763dab18c2046d55edb5517ef49cb1aa6386202a9e71d5aa5914a20957c34336605f84511a272f37437886beee582b56552d5fc79c45754478f54d25388ea09fa6fe12cc098c26c2fd9402a8734aeef65419a9a8d8d38801817fd3785b5444c342a8b055cc5116367188eea8b1e3e41081376ea837a20c0a6c8de4ec0b27a860538c1ef6e0c58b8398e0647e7cb40f3f9915f9ee4577f819868fba3dba56813b88cfbb519fbedbb456ac3af28ba63c1dd501e3e65c3267038befb996f79bd870964787900f70d49b7891e50b78877f7d239685632b8d2221d2ccae6e8c2996e2b766170fedc0c83ae1013a417310bc8c72a29ca96c5cb2f39ec31791c38bfeedc75f3584c77f100a6a3f0a08286d0152005d812ab8c79119206a9128cdda9a7d7f1b0afb6de77008053cb66365124aed5c07e6d86e8ef83ac2901d9e3de494aafc9dd5d7727c96ade4cf5e7f6e58dd1e88f0a6e96c185f7b5b7071a92ac7ea32808e56b1f0545fbdf59ab2243ae5b1f48bca0ebb22bab91a01c568314e2b841a41b837750304a32aa9a435a4250fe9b20102e01bd3bc20dd2bf084e1bdcc270f20e65cadcd4f4127aef2506b8150cf0cb7463df8dbd903b832851801d5b907e3bbfa16f5a30a75670fcf767b1e759f24cc270208bdceed831636e97b30abadcba032807b098d04a2e9a4314833f5755899909f81065cec2f4687fd17ed964a4e41520dfe9a1609eb7e303750114296f4e36a6aad70c20340428ab4fdc6b49d1c428c03dd5a2ea5f951a9b4c5e4119e3081ea815cbd3203443f3976f9641f0c53c57efaba66656699cd1e7a5ec3a865430b35041e7ef75a22f8c5768cd48e967731e09446cf8f4633b0f80c96b0e20da094046ab76b33a1d48ae6e869935d8dd337c2bcb0ba473ea354dbd144498fd6fb1faa56300bf64a1338c17dacc3cf6095751bc136884b7eee052ed792b82735b154d801c8725338c0113778520e6c95484f39d0d7680c1326578dc9c582dc523a3049e7e6c3c597ca2feb8397756c0246f3fc555a81800534450405ccc24791e792927c33855239cded1f235720bbac8d2c5fbadadc809f92645c28ea0646065f97e5a4e34fede5ed3a3bb045b9081973f2ebf61a559536647922263a0c4b6a1dde17774abb4109f3420b5a310185c43c1abfd249f3dbc725c4d3c6c6611f29bee9fce8475d9274a22792a4e4ee6f520dcc63f730ed57ae72cb2ea4ef2c3489fe4d623b15d933bb982cdc7b7f12f9e917d3323d1d50855dee5a2473ddb05cdc529d8f9d9a376279472b7a3a20ed6d5a71076e43622815d9adc8f76f7f7b2445d11b7c2fc9f1e3cd8fe657ce6fe116a869a5df7bd2e0cc044e426a3a53f8e6e5e0c965ebb863a612198fed640aeac1d4d97f012b03de4edfd8b32ec33057627d84479c97a7592d0005b3508a4fef3d04f3cce6a587b07641ea98cd34aeaa12a6eded77ec395c3933cb1cbf1c95efa17a7c4e9ed4e6b7b48dddc1f188df35890a9cca864f1ea6bc08637b3fd31bb89c1cffb22ad0c9a77d383a80a33b5ab6c7d26c28b4a792c0b227af853735aafce87480427830173b823ef8c8eae84966854381bdb533ce8c7e0033c23816c099395482877a2bef2e88fe2680716378737d1c981e26aaadc8107e54b3d37f01985e7cc5e79a558d49e68dd84d58903f88b58e32e853eb8d2f4dbeae4bf882a8ead6304f2b19ad1a6fcf4bc2062a34871bb3bfc133e2054440aa74bc278da5fd2d7bd78b5923762d0816c916446de0a25dad4f51e08ea3c7ae50239e531a7bc194b152abc7d8c6d779c4e8b0f9b42e7f6a0a6f012ff41f26c8442820582803f54cbd53197795b8f072b571a156bc204f3ffcdc7b5c5eff4b1b781e5663721925b3c33e389934cd1610141de72f78894a384b48a59a2616b5d6f90df658dcd5e7d5cb38dcacf33c972af830797e5fc10ec69592afeeda43552acdccedf47c5a9b2dedb62d6545d61e647e8604e2af35000ebd43a152a3ae8c534fe7e133f81ad59af6d085838e24a7c910131998efdb723251e770fc681ffadd512e7a5dafcc3214708d7c9e03fb457d67fed666724b4f06648c1947bb7b23e65f82e3de78b0f410f2dc19e1d849e30105c65f9eff432e5f5a77bcc7452e379f6816e4046b1506df4695ec5d9a8a10062c2bcecc56a4417e95ef51a1f2e5aceb6a08fba68f3718db925fc89099fdbef1d813700c4161706126c51a6220ee0042eae08807946e9dd98c0d43359577732b256eeea51ed5c50ae65f6e4eb2510a53acc55fce618f6b3e4c4480bfd9aa519425c6b7e11c7c5ea91204a28a8c47c84352202b63ec47cb53587ed954408aa805983814f826ebe27452a495f636991270d3cc6f627cba55df1cf05a0003ce96526873182a330afa3e240d58b5ddc5c1d3038b3188ff3926296218a568fb74432a2dcafee6a216db48ed154142e6b067d6c0d2c76deb402119ed9d67d49912a4a6c5ec6db49754d3f629040c1509a21db4513b1cca5f7c6fdd67fa7f9fa31ef1c857fbbacc1a2fa5cb4cd55bafb54c6d9b147ffb80257e829da4dd8c2d88b05b9881a09bac7f07e762a12467ce382085ffa9550a7cd37e6cc921c6cc55fe6ae2c79845d13b0004778d38d018c6df1408e8d8eaf103ece0a565691c94c6fd67be443765d0d3d218a5b2634869547fdd7c1f243a40e9bbed3d389b4cdade6eee52db0f1a36e695845b7a03c5265c6b9c63af4ecaa983ddc0b76a8ea346968dde0df550bdc4b9e5edd915956bf97769df1684c58e66269995b84c27ddf4eb4ca79830e62f8607b293ff4b0f5e8812c596306c10c260783b4bdc01901b81a3da508b0563765c0f8bd5328084d249836d544c2a3b7415b5ff79b5e0afb081611ee548e43e9051ff425e23fdf32b9c9ef6739cfa176546e9e885cf4de57ac2569e1a33e9270a514761d4b0ea0987786b75c52c0f08b4dc493eb0c44dbfd6dc8430128e6abdf77a43965e3e98aa54f1c0f0ad87fc411e982220c7c79524e3a943f1eb3bf0fdec98c92f5a7504b914be4826f622ca2143d10ca74677848d4e0d82c7b11d286527873fc29cfe564c63d5da64bca0063e79ec49901a192164bc4752d5a7237a44581fdf91865ca4c2f16d2bfbec2dcb7b5a757055bdc441b5e0a266943731fb61fcc2db43311ec7a2052f42d0a4ac2597378aba1185a566923807dabc24c7e03115359a8884d7ff76b94b69052cf6b41359f88c89318ab8091398737feb735eb21527297a0b28e0e6b5cb92389899112c9dd5380fe7e7cce7f81a18aefd829b1a73b3f055b0b430e045ff883dd7f2c4dd744f0585270aa683e870d22504f4c8caf2c1729e0a13df6b3f884f35065f39f0af880ced4f3aa78b06fc3409afe3c8289cf56eb01c54bf513d99f27345d9427c14ce4e45deb365830c01616bc579b0b2f6c60d07f0beebc4d47180c6868e2b64ae4a7ede3b076e007e89fa52e8d2546a2d3546b9d3e00d842b2805cf00d2b595bba29fbeadce77164d3dff2d19f1cc5345a70479319149cf318ba754a77856481e5e43691079a2e1d1d2928ff6f601ef24e6e2d3cfeed779d8e7a57f8f2f9665c52f30e8993aca43e3efd5ed43a86a27c76d207f66f38b20b8545c2404d8542e051fc4496d11a5eee16e0d525217b39606d717bcd96f7e1b43013a448493deb8a6660b2a37d4f5a64b48e0e7c93eff45b6bf56a8236bf6c22dc5f273dc9c0a212c014f61132115f58fc83f4595e96c11dbeaabc193a29d056a91b96119934b1a416339ff0d5490c7530a619db79c025d68e1e4017edb7577e202029d54525f008ec74f837b268801a1c7df77d2ee2186b498ca5b075cac6875ca61818de52a225aa1e1431f1dab14ed049832310432d0234c7ab00ca9f5260d16808bfb2e802d95f51beb780400a8bf6bc0860471cb270fab698ef6ba1fcc48466d7698ecc81814d3c32ec5a1b746d454366c18c72c5e3c9e9f782e5d79cd8f15aa9d1e62e81fbd7506c7254bf8ffa83c1044e4c7e3625a31a9d95d2c5156667400ffa8f7a761b22b676e12d584b47075602f8fc1b9718e86138967a6149947cc77a60a5b9c3e149b339b4f4e229f053d3afc3d3a113bdb11771157ba51949b37ff1dd6edd08320143eceae209ef2b7eaa182fdcd2af37971bfe3fc1d83d069212fed01fa0c992265c018882b12bef92964addfb3aefb5320363088c12ebf771165fb2f9dd6237703690770d462b4b5f0c937bdac6590f043ce49833be70b8192b9e75aa548402135dbd25cae0eee13991e8768de82b2babe158e09d15afc4b9c036b85a769ae92e4683463f9400b00d9c70133cef84c2911514c860affc8d7dcca11e6fadac0a56ae142118000398185e17000bc6b0d8dc5c78682d999977643fcc2d820a9bd60ae1b5cfffaedd7265c3ec539a470e9d0f5f23b7d626b1055c6ef12860be33e100376bcb86175c6bedce79dc552deabcd55ec7ce5f0a84f1cdecfbdb337bddc72fbd779b718586659a2c2b860c03393b28bf7e39ce0eeed2b2d585b4aa8a0527c09f2df3ceb793e8f8841b1b8d3af689d5ba13d65aa2d677dc491a788bf0d86eee122432979470f47dc6a84a4e90ae23a16ac1955fdd2c0eafce8b01ef819b0cddcbac9399a936917755e6747f36ada2653f63600e2094737867bb356a01274252017eed8e4eaf5df769a27b8976a92d99224d3d2231d85e82b9c1ac877c35064482ba624b317a5b46b8a199b7ea8eca970a33d7771e11a12d831cced7f1a7ef7d49bdf2566062cef463816e387ff82d6cd11c3770ca559c078a9943b3dd84bbf3f9ff94306c339ed0a4a2c4ea46804fa1cabdba85deb47ceb571c9788caf00a11fcd48bb13f6dd067a43264a5d54f433195527991c4cc22cdb2d95df790edefe426bd77987ddf940a048bd3fd87a6ea3c85686d05493778f021d45d32277309d417da1a2eb8fe019f8330642494ca246fff31927f844a98a856515d17150cd77cd3e29e942a25f9d96cc8782e86b88eafb4d709ddc1f538c1ba7cb8196ae5b8e7d49f22d029e6816e4fb9013ab11400c6e4cb37a6bf952c4c19cb9bc70df5b9aa74e20720b871e08f7ca242f4492f06563b43dc078be5d67edc0ec386aeede26ef8a8aa7ae3b846e103538e2d7b40b48fe7c7cacf346965bae30624443a917c95847003a81c741d34503d3efa5b4d6e47ca8664fd659d7cdfe8270de57a6cb202ecb80f8cf51a10bf424635c76f3cf1f983598129c3c7ace22f6d8dabc71c7c81a905dc59dd3d27d189a7b36a002caa8be6d957bf698176fde6d66b0c53477e006f6c921480e3fd686d5543c304025692e12b15398bdde29e6beec30ca4c8cb5afafdcba3ee5b9640d796fe6e01b08842ed4c90b91f40aeb8baf4ad4a94ad5f62bba8417f9bfc331671aade04340cdbffdaf85cdcaa23da77284cfd644196aeec46613c7d192a1c8d88accee6d689b51cc30d40679bb255fd6b7de7ae69f6b89204afd863311cad3dd6c7da55c2b65b51c5f24b4944866f9ca344f9179e5eee96ff21505a2c74f4834be58391e64dc44a10199b58fc5b108629a809db8538de8b8e3483019e697c95efeca8c9069c72221af37293961aa0022f27b4aac8477b48d4211c1a316045027bd24a4d28af776d9e73567a30ba041e084096cb18efcf147b6817f2d9ab5042200b5bdb86ab55d2a53b8c8c2a1ac987c2862888e515489e759c156cbab82084043868b76084ce1bef199da222a5c3ffa27885a48ecb2ff27517368b54862622452475744578d83c9d0fbe80038a91e18dbcbfd4c7017527397c1031f81e578329fd18c14c04c60f2212bd04b4e822ffd5c584ce4aa5a51c6f7dd8417863c78a2817de39919be168d7b70fb6256164c278106901cee7310aa8112e0832d45bce5599ae327ac57a1b7eba4efaf3e60b30c1dca634e1ed98d623feac3a9fc09be5addd82404312ae613bb8857dac86693b966ad241fcb8040c3006fc4888bf7a62179c85f5fecaeebe090ba2a30eb6f837cbc3aae71069fe932178a2cb8caf31455f8506a84cf2c82cec8982da6174a381f5581e6d8dfe524d4e0b11d2a55939a5427db301b1f42203d0782526b28daf1a5f437e54d05abf61ed82e7af7e03a4f841dd8b4ea7c9e6b636b4c6a6e5659e592c85025c105850325139e448d673dda9fdccdd5c7976804676404cf4aa63cba9b22ddc931725470dd5be7fb55bd6908088ae3f248b6e2784cf596f1b7507b67a71e0eaf5459a482996a9f2294f4be22e05392181f1ac42539c627ec279a79092eb74020d64a1e8debde3e1cbf27d8818ef31c27e37c21ce2a8220ba5537b2ee8d2a3633a24b699d51cc48eab47b65d3629b65d0b1d2a7cbcf1e49dfe27236d3497c112b2e25da3a8a06b1b0406b673e0a33f7e1cb5ddb6c7565df6e1f1986601567b8af9f7c7736c20951b26f38883f9f0c78441ebb77301add07e247563701ab81a296ba882b78510b30b5050595a05c615483f019df8d9ad5c69d56acd0aff87c859b4711858f58981d50529dac84883caf718e6a7cf5b335ca21b8b4445fc44aaa099a162be4064c00605e1e1b0a0688ff6abe3120ee6fc8be56e0e594c487bfd094e01c3ae96f2de0f386c45ea1770932c0217aecbd21eb400d65d2f4aa6ad02ba277424821ae92b6f54f4c2ee72804f103cadcc60988f319d24a5bba6339da6d7d85321af29100adaa3001e7d86b30416fd0a2e0114c83f107105a8667200b9fdfe4d8df2350fb0356316c1ee561f3370896fc8e970c66341e7fa3d586d934cbdfd34d3cc851ee6ed78a02d45d8cb4400c7b7d8d068f0032d053d2c74bc7ce5c8a96d377039245453749502fc12249377af1a0a0b851052cb9a324b9f19983af1703dc4e45c3293a818508e2d40e42067092798a388320fae9a6283c00d57232301386790fa14f92da008a065627b8b5f532a6ae11b5d1999e8055d20e95bfa7a9551a46ff0dfa515a03266d36ae02c41fe5ffbafa8a8ebabd0f768f56a7f9a5d0558b6a712bac60eb8be7ecd9b7c8d2c48906ddeec04cc59972d841d54856a844f9037d139209368e75b6243ec515bbd5f28e574ebb90c5855d11b069e2d8a1e0e4458ec086d72be4ce76c283c69550cb927badf4d063354e080fdc6206415f3e803da7df80e44922ea4b2bedc8a2da09315f69c83002fff73549e9f9688867e76678cad5e04e73c16bc3e12853b3bf05e03d7287ed93cac4d01014d9376cb7ee6a096b53f7d4ab3dbf603110a1609a7125c9ad4cada7a83aff5533eb003bf7f01e03bf9a304e8ad5e6d5f9c3c36be031e091f534f8323ec86610dd383608ae6ddbe90c728cde95dfd5228ef24c40096e41ba92fadbc691616d1b8353e203e2a4e1b2b9273224ebbfd793bd7f668807f2e0014643d5a5f49195e9f241a303f24f45286f310b0fb5a69befc8d8ed0c0e87843639357d9ae16f4be70f6372f58ced9c80453d6b08a85c688e97e8ea534c9e5cb98f7815407aa546ff76cddaa3caf81887006468433eba98ab18733da9768c8f0e12a1be7d7aeae73f272a11e18fba484ba3d176449638da842714cf1674c9e86948a9df907984bbe528fa7adae2f2db431236af032ffaa54b14db56242e7a16ced5ad38aac4e3129e2e68e95f7567c533ed33a40559833833f0172a092d811d12034ac37774f2462d50012f38d8d51b0084d634eb41a9ae7ce602d775627e841fd49df9d2a6d8991e2d350ae05bec4da15e32bdcb350945fe6cc29e083104ce609ebd8c15e2fd7e52bb6cbe5b57927f1730eb76478c6b4e407c8ac57706ff2bfadb186fe7457727824bc776d121529f5f3ef5d5c34b3d7aa9af02b00335dda55d363567aa8205dd809f764ad387c16dd219b2a1116b1027878a70915efd0e7829fc84a855a77b47d1824905f9cf7cc592cb109d9b0e46da0ad00e9a0ca8e058b9524c6c31724b9a68bc4ce31778acf90fedeead86c2f7e5c476db7302e4006688bfe8d512e136e0333eb5d814a4e56ee94a879334a51e92b63f7bf5da6ec44afa225ef161dd03e43b3fc6a362f7c060956dee9f51500f9e0a7b173c157e01152ee7bb2106b1840eeb49cb02590e2e5a54367b637e63beeff5ec7daa9ea18948d5af9a844d2a9c20e228171a71f1b34bde4746e5b8d4c14386dd8d4dbfb7f73a142dfc0102ac1ccecf1638b2a647bb36f68e464608f5520eed1d2076737ae7da3251ee8597f52b496aa62006c0b0c2fa619d77d9f3fbe8a588f7465d1095a4e21cac33df1f1d3de3c6cc75a0ad7f88d902921d229da1eeca522c1ec47003b18cd1a983cee114c35eeba6f1dfb997ecb19f3a7a099e58fca49c3ad758b791eb63cdf8b9b9df5f85ec29c4fa0b937d77337930b74a77dc7750846545d299d19f6392bd096d864bac16b900135be87b1ffee22207c72cc740e095f6bdb145a72898a057cd16bd0ea6cddf6494db598e385bab04d415d719028724ebf41b6e7489b43e598331a2ccb214ad1325bf79d72b1587edb5708e1da0e442fbc1424361b0f4832eb9e321a0f246cb9af6116968939308da1e4e39a66c0d979a963dbe91599503e11282d5d8e826bc2a45d633e4febdfc9ee52fee3a5c649cb55ef1578d030cb6fbab7d0d995b1c0713a7f66076797c2f3237d28b45341da05b9e52a0edcaf87239a2940548335fb86d57e7b1a9504846a87030852ac2bfe989c0c308206e7b8b578f8f789c129b0e167e5ef117d1ab6c4750130aaee52d05e6ce9af260ac47a298db808d396c0b4ae217e1e5fbca49239a4128fdb2ed98e2edc6a1eb99a48a4938eb9d6c06d1934cb1c3aaa92c861b28ed0ea1219de0ab58ce606c50a89c8344c1b7783fd0baec7208f3fcbe4f1a8c4205c66a4445ed88fc66f6b8dddcc9022b535bd86d273a75460854853cf54b8a9ebea3df4235b32a2109637f439139943fa8aaaf5f67952b6592fd0fc46b23b4a38c7ca9261abd0f92d3c5d422bfd3091abfc71e4dc0cecb45247d43ac082724e29b21588494565c2a2d14a53e09c61bceea07d64a62ce3f9036dfe36614c2557d4f0dab69f1fd5a1743c26b5ffc557cd30d87cf74a2e5493118c3e41852afb3bf4cbd0971fb12733c5467145aec1b7e037789b125269dbf2c1275c2d687736c3882db78a7a4b04ec9954870212ef3c7cc7f25e8b59a7c4de20027a5535ba7a1296a77ddd14a590a7b68732434113e9f4f26996902c5b37715617406f83e14a991f7ea476915f1bb7f004c36d5d3739b29b8875c534de7fc667f8131d4851ad4fd59713471fccf576951d96d601972bfa4cbca6d42a4470d622d3f01da1323e36bfbc794d5bf2608d861106481cfe08621eadd9b6f00f50e3458c20f13b530f7745643bc3ca2ff576612aff35995aaef8d37258b18025c23b71baaa5c1cb43392fe63396c5b5df4027032020f929d5cc404a8a3797108a2cb8484ece81f7d05a7907aa2d81d0505a4dfbffad39a135a9bef265d639d8e4404c9d449a9e51944ce3fe87cd9b7cef710bd058ecf2f317fd86159c83cc57ccca7581cb35a8469d8cc5e0a200196d8f920ba4cc0f68a97f2bcf1570f4353950f9238e37a2a992057e275ad4fa8422641c9e5ba6d2b958a61ac9c0e1485b0148006d9fed5e959dbdde55ccdc1ffff40a1d6759da1273d8a900059cf7f32963bfcf677d599c2d00ccca8c46a4763b0c03edcb53a46c91a4b795586d412b8f3f2f0ebd22fac2b12c275b430fe4b3e6bcda639e2220ec5e9d83877586cd9857ac6c36e9d9d5e58ef39e93a4ff21b334ac64aef9cbdfefb59a6e01c6b7e863d116614c25bd0ded6745b86876ce4e6deb6ce169b9a8f85634feade1575c1a4c108501841ffac29671a493b649a57e1e2b8f4bacbc31adfb65dc7f557ba8e5dd6e5bea2a2ca4cbf10644ac1f360d347ad8e074e6ff16d3f828c703c6d3bbe6974e0f555615264bb6b9938adcbca0b8093e6ec0a9df778e987e6828235bae881689feaf12af66def00edbb843f700c3a368dc89f9721b8bb95a2fd838a40925131fc3d0e3a6b579b91cc14ad4adc670acd37912c12be2d8814297efd8c1846b8483a1c7b6288e65d3981664abf1830d2ee9070a327bdbe745e4b7fefd83b44eaf26bab7e52b64899502dab67a0a39f13b127dc78d323f8da66607b178eb11178a5e06f6dab21bd646524e9c395aace01a8eddde8232b4d24228cadcfa50c534eebb07a15782e24b96d7b2f6bdf8a1832b8dedc7b239e00ee8a7f6eea4904eb79b69dc675a9e505bee0508aa9e1842e4cebbba59d08a086800a5233a93238e5a08fdc5c7be3cf42302a9f4753ee412ee7c1e093991852f6aba0195ba3ae8cc6743e76d86d4c57b0d3d2590b4c8e2fd57d8ab47f35db3f3bad138ebe3877e4d7a1f7899ac5038cbb464e11e859dd234de323081274591e759223b501197ed26f19e9d50026497566cb52d87e9552beb70d2295f603dad521d686c16e7918e84c501d4133b2c7950a3005f31737515ad7b58c9116a75a71aeafe2deb815da6aac3bf2b103b532fbc9077c8f1af00e6ae7cc2599ccfb5ff7bc4314adf02c19de69d1031d602c3510f949bf9f38636c79f619616026ce8fe56fa228137624ef165d676051454e3c6b9388d7bc2801f28b0c6ddec02a8ec3291f1f2befeae79852d896b6c1f6d45bb77e90f5c6fa961fcace1560978c70deaf8eaecc9ca2c31fa9ad22a4ca2444960f86fad8bc096abb455a22f2e525dbe4f0d3e1eb59b135a2aaf42ba595538a90a26dedc8c9a2c3b6d8ac27fcd50364fdfc4e7a3fd5ca9ce830c3e53a663f5c4ff79f7582de41257a50f7b6400a2ee6a75e53e42dcbe123273be48025e9c92ad75cc6fbd972d277ab5d1ff017fb183eb7521225848ecb91a74108c21300b7ea4bb79c1164b445eac0a00e19643408601f7a2540dc9a3e264a625fc5d1272fe820014ee157de44bc71783c5f705244013ab1baf85703748b8f86d133d46e6c9129957d639c73c930d4b9fdbab1706d0fc50525efb4fb72e0a33c05c3705945f98505a13fa96d2834b4b00238eaf93fc4d1336b8fe3d06b759223be207c3c7990dd578679890146f8571128eee3e4b3ad70c8807ced1358c6747ca61dc1841d23bc2f4edac8174d99ecaad93e8444a3e5de081d18f98b36bd0b7d637d37e9a91544fab6ba9513fa195e952df917ad39d2bdb4f3acc5ea67786bdfbb6739fd1099e233a0bf26562cd7213c0e0b3a5702c007b5c8a4bea9c7877e5e3a0b9d7f5db5c9713b3fa34ecb7881599f6fe933277f78288a719e12115baa8a8626787ccbf3db30e3dcd0a169d8916f4d311ac0ea77cd568a68ab66aeff053dc08af5cbfd4e43e8a6020dc364a9e5b22e9b9356374871c1f16a4c7ee41248e0254b60e144c29a10a78aec53264956bc6aa1d73cb2af7544be82c90478cbe9fbe7aa808a833b421574c4963dfb985677d80e9ae4c9323060a9dd24efe64ee9c18928afc88ffb59f09b4f35ec8392cbc126bb64bbde84b45ba7d7a098f2e7139479393ad37ebb967231911c8e31f6c0606fc39b5bb43c7af4845e011673297647b46395d46852a88391436b57e355bb7faf3df7c677a310973e671b11eb96529f8b0cc0d4f5b8e20ba4e0da78d91cb9c4e4b54e22eefa687a8375b7981ff7f8b55244b75f223c8f93d429c7670a77f22b78e248cc55e297236cc386b08ccad13896eba03671b8a9fd05ce3a5717d08e72cbd36d69463475b354ba4b393a19738c019540ddf750165ca49b0176300bf614bdc5dba939d021ea9755a71a8d086ccc1ef644cd8e39e92592b4dc9fd8d18c645a635cf0f295f1fbad689f46aade9326534afc685162553cdd3a27a001ab1a9b966150e267bb23355986a052fc6dfbc9b00ec508ada35115ff53525aac26e3d3bce33118bb85e3369a9a746e1f86f5f8a15cba3d8eb95b0bf05bf6cdaac21cf17b4f5d0235a300f91e75059717c2484232cbe1a0b51ebcf5d9a87619bbd9075594df53c8d1e3b142c5fa452973417901fd70d8859032951c5ad6fc31b1a456793d2d7091b052b4122d87b29cb27c3308eb8ca78a83f122d08b67ab014730f5357428ba7fbffca060bff3776d1f1fcff4c7c6178c4b1592f5c419eb9dd06138231ee7ca0043b99c0de552a3b4b54d89d8687f44678058d982452d4fa6cdf6a11dd5d8d573a5a23e304eabd7296402ff54c4f5401b974c0bbb180bfb62589966fd236b08a2e0ec73cf0c7488a4fd099e02e85877055e5ec4e3abbe80d9ded01eae04c4f701081cd461d10f4ec575df49f00a11136d032d0c7fcd80d2ae4cb1fe60be3fdee88e36f4d55b631d674638c342b03fbdd0d70dba27d0ea540b04f115bbf998c1c8b37c2c0f629f8e6cb610200bd39a21192b77e8ed5dc35391c02e7f6a26932fb77fe02dc141a6bd8207ad1431066f6391ec3b33ad20dc1f6a6881e84e0c4c793f9f873df5c864fedd6166aa6cee023c03634de85bca9c53c6852a72ec623ebe90ba9af55aaf006d9707fc88a7b7e98071ed310de9c1546964dd13c091f944a9c19abe6083f157e7f070c2a03da23872150e36f1891fa6a30a88f08c89e3b8dda68cc0f4f53846ad6ca0b65e84057bb5489fea7ae1e4d34051532ccfa38bdae29816c94c51990eb585c1ec278d3dbd5cfea27e2986c9e4b0117d9bb4c3a3cd536106316696c959839a3a5d1d8894fbe5e9d0dca6a75f786fc57fdfefeee141af89ba374eed202624f886d0d0090de091639e59880d5a5f5a404f4c0c7f6c3428dfedc2dadf574503b9837d2843ac7168639568a7b83df3489731500f382d5d2ee4b2a28d5f3d960f839124647a5ac9664971f9b7cfc0f5303b01411c3ce35fc57750401d1e9bfc231ffe2f26c70306903243f5b07c52de7f7149e958aad6680514962c02e64afd7fa9ae658fe22bdd89daf2482b0dff00090894f082c2c38209cb22983a493721ee8093f87655f4963c87742518aa5bd7052d79fc0995af9d420a91a4738a1c3fca2bd00cff94a3e328e9a995eb92ccbd17cc0e2c7a90249988e8bfd5b0775d15f15b04585d30ae7701bfd74f6a3707963ff27b46234deb646c0c7c00a1455d3128659e344180045f1ebe2cc9d9fdbf2d5e91416d7eecadd62560c9b6de80ad1d18e6e46ee82502fbd3a35881533273075b7d28695178534b2821f9ed49911f0bbce405e639a23da3bd99c579654f21eb9ef7ee7bdb75c0ad013faabd4716ae988104d8f40efb168398810b93a265964d9cad087ab14005c94e4c643868f7575890e15e2d8295afa69f32ee5a3d46491094c8ccd724ddde7659319333fe3ca1e4de245423ba27b22a382b8002d690451a2eae7ab12004c699020c46bfb665ed7a84114992e8350308b3f6f15af77837f75c8a39eecec76472e7b39cf0d530aa5fc29524f08a5e52f9fce5576a4b3992db78c3a8a89ecb4469726679a2498007f4c1aef5f3c872f1ca30ad367bd7abd0a1ad93f28bfd88bc78c32592d7aab4727703fb2a8cf83faaabd5fa0b7299a111723e6b52019a96c4762e63687797e80cf3c8f99f78d12b6db5fc28e43eba792af5fe47eb61b33773e4854d4144707c52851e90f8e39cf60aa0335e207358f8e5962ef96a9c4ee1b82647b8b33e6137661a715e546b7e2b59418a5f9ac891965a13e2fa5aee7e4fa6bb99f840098b683d352009f935d0126489c71231e7e7f88006044dec583d58d7f41885261a0714fa97653cd5032fd6b8314e7b76740271f31f70cb14033cad0d8ad6d93a62582c830849a54d20aba446b31246457ae40dbd0a6ba7483abe06c69dc582d07b18a834a7c849cbb9a630ee536415d1aa1939601ae1edf140962d21caa532798a390daff17b76d03419a1f0a59592ba0a42e3c5cd05b0157148837b1def10c4326f869f3cf1fc8218a7c9c4b45cc4115711bd85e59c0562c76096ccb69a613e73c67f98aaaf3c4f55f8a0f31e96ca4651bdb64921a189c6b203ff0fb366e8592ff170ed4ed5ecedec3d8602ff4068bd7e74972b57aa82f7147da461d3f2c978fd10d5e7d992267137c9526401ff320e824798054bc5b696c7e59a494fe44cc79877858597635fd91f083651bb63be2965ba955e8443ca9e8cdfb0f4c8c0931d2155619360fb196c665a7bff6961f045b75d0aa0794851cc89d23cced21f1942d2c84ce669576bea4adb9823b9ad3006846f751200f4c44a2d0d82aad3941edf40f091ea0987dfb58ca05af39ca41975ee4f322e946e64304aedb6a60afcf89cd9ed1e4f4f9c865473dfc41973d32dad86b8e44ad7fbd528d5aaacc002424af144e9c5c988bb27f5274b9e122530f22da04f5cdcfee858cb2d11a1d7785a446401ba207d28de1c99fe509c351a193e284b6b134a7454577598dc8fd75e2c9f641668c435a050514e507437d54b85d1d0012ae3cebb8dd5a3dd9e42e51d1db406fc8bff93dc2968593a0bf357e232749d210f9322b1f1cc37b32e06c7f87bb4bf7ebdcefd94088ce3bacf1680de1306be6f154e6d1270c7fea097ceee43c4626cb1751a33fcd76b7c8055677898e8fe3cdebbfff95cc768afc092df02c8d1e0935c2127d9e4c7a0dea943e7839e0b442104d8dad5ae534e6446c32f8bb1c6c1c9a45f284753467c672ac1de2387306c46ceaf123ee1b5c7b1179d8a405627b6509459c17c38f52076d8da4815885f72eacbccf17a88934894317942dcb8d2fba7a05cbe9d0cf0aa7c40a4c15a95c1bad585bc148f7508246a62934c88424d344bad64018a7fc0b457130862ec1e40dd753cc5e002b265804b12435e18f83e3342fb05d854683af4f2dd90946254bdaac093fe990f800a2756d7452249b65e3146ad3b23a5e301bd0ae9742c0198b3c16af568193b8cda774e7b26c69cc650e884f66e789862f3323661505db3dbc0cb8527cbc6b823d564779a2860347396cfdfdc5ee4070717777dfd0f50f1eec470fccc12c2a7abff51e07a97e8163266927a3b313815cc4aabba9ae3a472c741db2db01b316523b17a28ce806f785c6c0b28b34e6e7c25924f1104ae7a7f50c47bf92d31886957b8e1b5540f7493ecac2e6fc74254dee1b668163e9168918f7af70ef79f7e68f345c87d955f69434f3193bc1724598212a2646a578edb4228e57eee86055957c1ce63fbccc9284e32b25ac235082f5b33d14beee4cd7c426e7286164ae1aa2fef436de2897db80f3f310355606c20cb21825d9b839c75df195ff6dd3ead247e72cf7d5bf28dd19a95f1a556e12d7b51c5da7b39f73439c48c90369487acd8436e91da9eb09e6b0c52093f243ec5a81627af4f6e7d3400f411933b49f4e5b126907f5aaeea71dd7d402d734c7ff4a3ef1b8e5f4ed799af3375b13cf625c4053980dd5967e73486356aadb101c028deab61620acd9cb79e3ddf1d18a9e235e548c361be7317cac318e4b9ac48e63f86d40fa9b7709878f7000b18e7b636b010fc746884799e6201ac571b8f4f13be9efcc84c03cbdbca5cad531ba545895f42afdccc3297adec5ad98fd1692159796af457080b9720dfb5409579d170d05fc4d97943a3b7e90e56b518777ecfc0f519060305a8608f0403085e5b56a1c5ce7c3c785495de90f060f55d137189bd71e71c69e9ebd92393d62cd4aa81fbe8a74a52e18711ba90fcac85a1c60e6a6447b2787e0d066139d8b96cde41f5f0980c695a96d9668b5f635304af932fc1541a034518cf136c43cce88c3591564cd5c4da46245d5796d7afbe170879346838d073b57b8902efb576f1c5cf219ea6dc7196a9b60c3e36df9621daa6841bb6e4266c352036fb768aab1c90bbc6992329e708988b9f15e7f838ffda66afef6519c9badf2d7adf3a80102689854239aeb927ee40a92bd9acd814ffb019f741099f7faa0b0d48f7f63be2f81eeed9b79f4eae64f2286c8eb4af8bc6f6893ba82ae3ad0a5fafa663ac2085b508a174ee0e572cae149c6fd9c03e5bf8f6d704395dfde4e4b27cc6563d3a782a9f5445c3a65ebbfc1ae74f6bb1b396b6a7b1f471ffbb0a9c0a3c27da0bfa94b32aa09b1e11e9d545418d87cf8e0043b76183e0e363b790a8966fe2dfbaf34cbc137cb2be3b90dd614690b7cd637a4226583b0f289619a5b0731b82cf83eb4f84f0c3d377802419a2dcf0993b019ecac91b24cdfc85bb8a51721f8e10c3fe8a83a44830ca6b146ad9b7d453839f2a2f2323c2c316163f1b4c6d4d50a8703f1dfc1f507798cf611d24c3ae1bd6de651a7d08d1d9bf9d83674854f710eafd160b4bf6f60d98374cf9da69e7cca8d62e879944fa69b9194702cd2c2704be974df6948ebf40747c713f71894055e465fe4cfcb8de4354982290d8a1183e443979ec8190325cde35e5cecf7a329cd1a5f75467edb0868c72989e21fa2bd3f44a2e0886373447483dcc0d188dc50d395daf2599656403093e28c59eca402906e9c3c99f9b30e9035443f218a07ff82d628e4d80e0700c056c297baef02f752e6f7fe8035fb1fbfc38584f8a12374607eaafc74e3eae809e21cd2a2e7fa26ce93c98f8443e537ad2bfd61b96ca8509091182803aa58d2aba270a47e4657ae23deba39029b4644fc6db9a85d977d8f484ab06c763dfcd2643cc9ac6ad823eb6f1c47df34f42c3198507a34662e8662b29bbb0d51b77fb721d90476ff44f6b9c12c53f02d487102eabdcb85d36f2dabce4817195c3dbc334fa508941acaedfbe433266be539f5765e9aa05b23619d14ad87f74d432bbee8a0f92504e3a24b55560d5b8566353a734850c90aebeadb7b50707e855b1f9c293de07b80bd698d245326831270e899622da5d9ea9b7123b55022eee40e654d2058a0f8ae6a6fc8a8e7cc877b6c0b9096ecfbc664972a7f336cf5fcacd499b030059556e1bf4f635caa1fec596e429d305f2a147c837d75396fc3a4a6e3fc84268fe7e1efce7785e31996c54de6a672582ab14321f1503f8a7926fbe293b5c97bef273f71d496cb77d22cb2da47a4ff734a60c071e575ae06c05d46e7f29ffdb6469948c68f47755c5d28cf01758d77fe6f6e6d97430545a228abf3c94465231f74e52388cf7d039eaf196846e148977be09b5d925e108c17e233e459c2a021c2024921fac5e9cea6598bc72c85f93600c9d2829280d23a863be37ef28f18e1f918fc5a27c149511d976467c9dac9899bcf24b39acc13721db030febe103c99809c0a43cbd71ab2feb62ad748dd70df612cd1697bea4178fc35789161f768e51d3daab9c7c5bb60c520f9ae414b085434236e64dbeb056ae3d9f537b1c57f0fa403c7a09160d5d4ac69823bc6f9798aab824791a62f872390384832d219ff7d137353285636cbfcf6bdd44ecc62892081ed1811ea115568b4ae54b3c080849b19ded42601ff3c532c8a02c087825f663bc4f6a381b3fa4a75b809b4f6b6206303330427066665484b8b5c40ff7e881d6dbece60ff4aced7451f997deffe0731d8243925cb2bdc34b57d51e4a57dc8f01d6023b3ae80dc2279b4674e2342180a825e6e188477ecbc8d88cf2a95407ab0dc21d303a756da4195f21b00e525d35f38d303f8a5a7ca95ab164d6d899cfa70802e4fd68cc761d1eb1f094b1646989bde52e245aae22f79444f802b08732e17f43b2972ba2af3dd2668233eec87c206a66d1494c11f10c13c8c7a42c8d012e30ac7d738274419621ea0a6d2d1d2a7cb5acf23757a0a187914507c03195a677a82b007875a9cc239ca367336a7f774f903aa148592b82e49e9a87c91db0738c942a149f86463f726e38ba660749c366e0c14efa8328b053781cbd37a74c1ce7f23e967875917658961c3841f6b27136ee774bc6effa207ed8dabe2e1204b23f76a01207de0e2586302cce92582337f7c4d3177d5a665ecca8dc4ac4842e8cd74e888ba86f428eaa5d924c38676a82105ca6e2c0564ea3792372f6d84290f13eb75278e42f25d54c37c9f17c433e79afccbc57beeecf370c94d100b8afa98bd3c8b82b3fe3e7b8bf28c26073579c599ab74cb8d5f44fe01f85032a2a8a030094f8537dd439bb1b751232e1102f47930371611f9bc4bfe46e8fca215ef5bae786e4a3843deb3573705ed41b595e50d7b7d85a8a637aa6dfd31c40f9ed72bb85e211350710e1fc6d9d1b9ce91b4184b6d7aece18289f78da83c16965c5543ce36c033ba59bb931590fed525cdf09be090e0ddf9d6bc09c832d5369fbe5e6d5505c8bee2959d5706e9d27e20bd79f299874b87084101587b288fbc268bc4b562ea099ce63150966fe224b73a33134014457e2e79beed8c032000a33df68a73d7d47608ea159b47014661c8b3e5b0871fe397511534582062ac18518b1451e084b88f445b1fdba42bd9a7cb128a0f42d17632022587cec05cb8f12e1e6dd29810ec235315a8796de3e99d4e57cf5638eda11555309893914f513fe8f8631e7670072ac37f219d625267e051a1f83d09c6446ab0369fe33a06347c9db73d01a55b3e2ae02ff5e009ba4c64ca607848ad1544ed7fa7271750486b6ef47ed5ed6340744bd688a4caf197e392df62c5981659fd1e067a56acbb26e2aba5088bbb235ea107c8871261320a79bbf95566c38e87952089f4184a3d0ad7e5521e3cbdcd2e9c4532688fa64a141383cb18a6fc4ef9e5a1fcfa2d96d54ff3f4b36cc359d532501affb97afe633f08ae6b36a32e9ae8a8815b68c7a6876e1c686e16532787d19ad30b50c8ba85e5063f73500ea9de3f142d92478d4f8af6b752aa2526cb7077a664e3999fac43b54d73701d69ccef739c4c189e11be1abdae08b9e79238a2465fb36d6292ad7d6234f784489198a9f46f95d80452607eb6a528597773803efa17745e4cc62947dc015755c67ceba8ae5faebb33be5201d3050b29abd6b2dad10618c49bfd26400e07f5900441c6fbacb7be648a6d50ea5b90ebba5da26907378fd95859d5d009b39e20cf7707597efce6d259d2646fd05f0142e7b57bb360ebc8902dd25e7102fc15387760133089e6b96cf42146dc25e90ee5234d81af43d21a5df350111b2189ce1fdfc5ca1a515039728d755936937b9e735bddfeab6da9be9f0b9387d3924922c3100e53957178b080ee985020de57ce6242069f194e4fdc1b8dacc7f6268cafcb7f728b1f784a336c4fbdf7a2df707897a1efff04ccc8d5edea264d0d17340dde4dde9b3100de6f70105224de6e9a44662dce3b521674ec96a2e6f21a6aa7a93b88e81dce73dfe018f99c9279ccf38d79ff39fd94dd56e52641619e1725f5d58222dd1163924a0859b1d29bc9595686305de73cab95dbe36fa839428b78ed8e7f4f848fe6b165a26f0cd5d22fb0d345e9370fc16ee34a84238cfd5ff5f7341bfa6f1e4c203142278306fe3ac36ef5247a185c8e3b0ff85e511989c96444ec706e78619aebc9a2efe2455d16b68da3f076ef42a0f6ad02d6103128561cf83f90493a028137f358a8a26cf58bdbbe1d499ce15b5aa6f49ef1ec5e22dd6e72b73375ca2998bbf489ae3abcc8444f5418624a2e51fda9faaa0674540cb9a305aca7ab5435d64f4ab64eaeaba4b0f6381bb16fb90a39967b1837dd7b8e44328ec0e4a43c2dce22d421f5a2f6383b8b4dc101e3d4b3d2d3c453aa8654f16c4e054b359f6c3180297e7eee12406e0e6779be6c1191c65ba2a5c01375e4dd561c18482d60adcd1d7a6f8ac1c9774b6048d8dcf8e19ba515eb536c29551b602f09e9e540c51ec21456795a4279501fa5958a433347ee9c4493ba1a2a1caccfd850153a8122f15c79c557e81c3827d79b85712fd46ade5d023786b4fb4586a953f93f05101430a3b766f5bf814bfe2b404e1c9b9bcf7ef0a580969868afbbd0f5eb1b0cc63d29de99975a889d6e48dcb8f454a78eb1e2de389b7737be09902555199d8ee31496d3ad7c97879e65d59eb79b2e425583235d0a0987b1da20bf1f1a343c739ad78f16556a41edc22363d28ac4a0e1e09371b0fa86e776f928813fdcfcb242da6155cba2886037e178918f4ede3b3e348ef4caa530dc29b96573501f027dd4aafbe2ab50d0541bbd7575086025fa55ccde7d34d7e7875350e71454d9c467fd0b5b91ac2219412e999de45e59c9cf5baecff51618531447aa0ebe0982601004077b97d3fed5d50b89fd5b4b28db3767c6989a7c61366653403a1ce68ef3bd13e5afebcabd7c9fbb6f11f26c45837ff3b4dd5f51d6dd70fc7102de62c39f983f12524ed117bd9aa9c7f5ccd68f54218029763b8cd21cc06e590c12f82c7ba7a584b88089728e2a48cae8d977936d8279d947ac4d42d131081a2b234cb969b3c5de6008f9d24150cd4da4d3e5c32b777d9dbb38a7ff1efb2235e248e22f45b922edb4696c2b15f26f54958495de1b6a9e1127ffd33a14aee15ccfea59ee1df6a361a58d5838cc7fb2648c05cc98ce3d7451b2f38d6c7038122e7b31e7e771faa9ed10726fd1b525637af9cb4ce0fe386ed81046b852ed5987d7e0bb3ad0773f14b49825bbb3042e4c7d845f09d35e25d56de5f57488b37ce7a968c6cc9b66ea9201aa27fe74126f4925b28fe5b16c3e29d9d613ce811ba28b88341159e9401afccd5d1cd1219c05f55d19be47bba77addcc8ee0ac5334ffc873fbf1d9400b9d0a9fa1ac06fef46111fbcb8fef4672172627a0d4452d0191f4f51c02b18e3823dbd96c5fe160892796deb01bbb5363a24cd11f7c301a3518d06bc794074985cfbe5dc2ad99ad16cfeae45c38cfde2a0fa42dd8b75cf853d6f959cd8d23090015c7f083aeab401942e8ccff8adae1a5d223608f7e6ec2ea8c348b4985b5b9497a754effa87e210d2286e23638f672b9d40e5d0189ece3133aee5db50ec02c5ccc6f10a64f57fa89d5cfaf5c91ac6ac654aa67c0639eea336f4da7e4cf36db25f411530986a418ab4699bc1ba317768271425a0a2a831ad215f0200187d2cc907d731c2df8b6c5fde86e2eb185bb58691cf86611036437f9eda06d17ad8840e32597c4fe1ee6b6fefd62e3fc32884a7a593ab6ac0c732609b7f267b70aeeee0a31796dc80bb3e416f26cd57f5274f9e24c48f907a2ee2c549fb3762455b2b0444a5e6f2306cd7ab3bc98a09c28aa6bf5e76c4eef723a4717bfb5762001d6540f984ab18f6472dd4c83c63f4486dd57f3c7b171db6cdc59f2a71d022fcf510417f1e632c8d7dc8550fa9f8b9346b861a8fcac1fb77d387bb14f967ef8e785e7e6f60eee3611f1f7c790b64d6474d01ed80edd65dbfd92ef7555a4067db5c6ed0a69925666f7c8a83779680518216a8bab200c90247f2cdb0ffb815c74c78f9d0684509d397c72ef8ab08547fb39a428d3548665da0803c324d35b9e95e602aa4a2b31663e57d8555d19b3a7924d2cdce69cca5c9a7a40067f4c2a3bb5a6058f23e4627f5d677c7abb1cbec0196220b13a33eff6e550dd1f31ac398e01718f7e4606c875165ab49890550fcf45d829ad84c6b447b25650f1c900d591fc7d9aff6feaef85656caf7ea56580afe37deaaad99c7a743a99c7502637029f82abd1932102e25ebb366da3fefc041605740d76842798282ef27c8c6663a27c08f8dbf687906ffb98b682332f5c82f6e736cb8fb940eabf4af0ff628b1167212b92789518504cfcfe8aa8f9c671d13a58a34731ab8b4320e644d5c22b9730469b80fe6e3b7de0080cd0a420ee8177f05903e72887f68d5acc121a6d85f7be616a46fe502695f7b65325df929512891daead751060e752337fa6395766201b7fc9f52361a0b2c2e9438df3aa57fdcbbf583b797c2432edb8a2b9ecd737d24c540240e677c0c91e28f03b3a8fc542af73ce499b89349c579e88467ee8ff5b065e5ee17a5a21e0145ec962b0811b7cd6cdf551e563fcc760ed0972b574dd54dca2f6f7e8e956bf83f05e181099a1236638d943c6758e8b36cfbd99bf3f6b1daaefdc6f22b6d321b8eaa068abf151802932e100c9c6e87fb3bcd382087adb4dbd220bd7042ad798aad5caf30ed136462f7c6c4ed12851a458f5ef42814d63ff486ef757adb96409084825c1b5dbff0c557f3eeca9880f7e6d3f97a6b055a38bbf94e2033bd43ea3195f3483ad0786db35d3f54e7e30afc491c12667e1a0d6f5af85b7930e4d13a2e8787ddec6e8371ac569e1216f670d8540b46cfedc4f281656b2771e379fe46d0128630be7fa370498b5bed7ad6f0e792723d8f7b8a3fbff6c1bd8757b21ffb09b06ebfe69d181ade1151ea64b7ac5381032cb16e6f336ee2cf332704c29b772720d51d204406b1451de5805d0b5aebb81f35c78aeb419173aff57c94bf8282faa5dd5acc2e46e7c5f7f002dba27f06fec9cafd5935047809fee4bc2f1c0635c1bb1924a2bc1ca2de9826cba976d63a94c73dee3d4efaea916a0a1f28c9878a8c4f6f932f84fab9e839a750a958339d21414a1bf0cb329d9c646b1690becb59ded0ce3e27e885c1f7321b687fc29238c061b7b42273279902fdd8aee2474895fb031bbcf3ea382420cd04c6e1e42048f1342a819afb4f0cb87cd2f8f111d36aa6124bfc1dce4deda56640173aeadc13553a4660af6f919f6e54e4dd53baf321079169d44a7fde11ff1eae9ae72363109df22fcfccb6d99a8b993951010e26ff5accc5eeae1435f406e887f70e516037f26f0c6c6beb0c7a10c2aba2a9f420ff05731adaeafcaa4c5361970365f9f926ad35362aaa5b15659a570c2a8a4fc45d18790200f95adef50e27330e2d4096d866896c2c6394643b0cad566ea303d669bf7b26d3fced6ed5785d02ff7599038129317e4a2b2ea977896cbb9bc442045f4c6c06427c185b8bb005017c3c411758b1792547cb22eb045a8477db9183f30aee2b1ec6435dcd6c0b87121d8ea5c191a958fe4798b0449752053976c8b0ecb648561c21b52df0db605bc668d4de1b0d28f15eb269e556a09f8c47529261aa0e1431dcf231d3b534f3778a9faf018fe45da8f2db6b118b765929413828c55b0c2e39d568de7156efacfb35a2b3d7525da635891cbbc8e66497849bf7a8949664916f365efb592b21574d73289c4fadd1a27a88c61b1aedef8135194d4a0e90563b757afdf280cb27f96c633d9f6a4d081b473a79f3c5024aeabe1efc45eaf6bf3f46703898929061354c794337615ff5e7bed50c7f5cdf22ea9ef6ac541c79be5fa335d2926e2eb06c56b220557ac3d89e2e021a546ea1279219d62aba0dbe3b1f5cb49f85183464f4510135360051536578270cea79638f5f89eb7cf55da91eaead4b272ba725ccacab35eb5843de227c751518ccb138d02a5d140ed010bb72f6f21dbdfbd281e727917523986ec4466d6b194da7305776bb883433d35033ea2e906dde4701cbff52c2861a78661925a3c67581abaab5e0b8ae6d9a00cca63c24970e283955a3879a309b033a796ee944c1b7a78bfc9f00bae49f19f5213925c568d29e764324ae59150fa9aea03eaf4fc02672c54772af920b91d02d5bc16511b0c2f87323f190ddf71b21f85d2c05442d18fe009820fd622724e4892967c2e63b2927e7c84c8b9d99404c82bf8bf51856cef192347f6472777abe0dc0639b4e126d94b721cd612fe01b3dbc43b2a59b075d16d83237781fd36d77739aecbd6a059fa9e0af99ac31ed0b0c7bb61bc5765d3d3a905f45b3eb5c36d46d66c2087bea3d9a0d523e9a676ccb4ac559c223f28f1ee5ff779bbe754ee4e06816aaf48b38fb9bd3f90fb5a2b7478aa13abf4106925feaa00054a2c8189060674befbc223a8caed730026fefd5ed548308958bea4a72475e6e9e47dc7317a46c801f82bf808b98b8c1891304ccbd3d6f6c5689c74ae59d5f8be6a463c2a65a4eaa454001075ecf37b13b8681a158674a3a5854e82d8f4bee5e687b3033c7b8e8caa091d4fe0e66f1184833023fb80ca73853991d6fe5d09655f457e5c0c66bac5fe4725a6c40da5aa4194c3c6b3e974af186a3cf5d18bacaf06085124b5db347dd9e51a95db8fc7a247ae17fc7ce4a580788575309c60462d5a2e0dabbd40ed30c0185978a2c48cd057d4b637a37407a5f74c4866d9655ca36f283768e68bcb3c5340c5822357de72e42a9ba680fb434844549eb76c0da87d2edc1775cf9ab9aa130c5f51f936de253a2b103def0dc03cff0bae307d4513d80f24de6cc1b4cde7f1ed9634ee6ce493f164ffc34ee1cc8d888aff3d82ecfbd30e4bf9306871d35746fb9a189c69992f597cadd7b84b9a5434052e6cf8c39b11cad8b1fa5b9e9d951b588a890bb10860d033cc19517ad94c6377efc75d264e8a431e9bdca539ad780100914e898a120f40b0ecd154e684997072ecc541c5e08b10aba523d3a49450f2b6f5bf24bdd17416be49acb815e0d3697a0699681287189f5621a0018f1095183215bef9cb3b0cbb800c523a18f79efa66da44ab5646f47e595da12efb51aafe2acdc29d78a7ed3c807877ec29e499ac6f94a842155bda0fcb8bcc0ea57b87368a585befe784b6c0524f41224a73938559bd8d33507cf9135e8e8cdbd98b237dcb954d54d44b43d7ee327bedd6ce99fc2f563fb3b8fd76c4b60451c1ea2fb4277910a81962ebc3b8fb581fa5206d627b247ee1481915da8f9fb796749f727ad8038489d8efdd3b39cd5b0693d6d3d2be92b67237e981eae494b3b3cf911363db700cc8d2040f40cbbdfc8dce802098ec0d4030d00f112627317c126bdca23bee84b7740646d641db9d56df93eed3fe32bd1286a42c3221629d67d809a19a5227008c1c135b27b2dd78a1a6e274bd57118b0f20fea805463d77d37e7db57161592f0a4c3dc6338d8a3f1458f73a4163eb94a11a75c7f4fda77d097a10d6d2187290a1938d43a4ecf76228476290d61d9ec9c068906a6e2dff271aec6e27218113ccf0ff08defd0ca50e032540d60048bf12ef0f97659e8656f75186d089e14395c65f3ebcd2eb12fb6e8daf2f8846770d2771e972b75b2bd059fe4d727fa56d22bb6a7f01ec3b52afceef7473e5e020f57ae67e514cfffd9144787de6864c5b8599f189930f79b691c1f295957779b015bdfa41f3ce5d2cac6fde93df03d785b16ea16265020537c98738de1ef6c0764f7417ffaf71c65000aa3de0c519635e21662d26ff2a3ea35d5c459142a2f60856b19f2757048938ddcdd955317c612028edce0394d5d3d7aca88ebfba4172c76bec5c40120bf178dc6b7c76f179c3cb2ef0b1ee94cbd5f3196c5bf202825c7a3c7654ff93ac12941b6ff8f0c3a093d3b7244f02628da9622d90cb0aac80bc6546ed1402bc03d596230c18a31419bef66f6ce4b2a70c847f40ac78c4d42b2e966d5d70a773fca982ee856d9134d397e4a082ac6c0b65387ea46f6fa40f4bfe7894335d16d3e00f9db0d3c90564847cf472c543dcfbd289ce314b1e2f0d9ac517aab1885e15e615c1b8263bb5710816364442bd8129b614fda4a3dfe6537e6b58eed466eecb4bc38224c8dd8f2795a2c7eefd9f581cf4b4559f9c3c2001d725a374c4d710b81d42edf5c80f42301f38a9baa8b2ac518b54b075c9b709c8f670ec21295bfd5ec391c0ef29f37f82a6e1f28ea2b03bd2707d539f5031b75690549705fa339132d86b96cccd56e1ccb9bed3afdaf31d5fb8b25ebf62ff0c923f1564f29abbb7ce520123b5c0930af4d3db11b0737f5d919eb4ae2272fe3164bc692347db824ec6052987d1aeb352462993741568e30a0b8a522f865c16e17e595b6e124a985dac1c6aa92237efe599fb33b8399e20ca50d2402445583639ba15d815ab80cc98d6a1f8b00e6dfc8bb44292a2dee3762a51161943047d4e10e298458d3ffceca22587eeb80d58877c813cab2959d9830e02cfcc32e00d37d31adcac3b83aec51b1f165ede94e99657756b30df16960efc9f72ddac85eb02428685e47ea3844525b6d4690259e7c9ac5748387b87e0674af6604690bfe0bf0d00f07d83f139704d45d177945eb0688f08449b87e50043f1b81f411a9065b4906288afcb110e66300993495832e97ca3e9422c073749cc41c89377d2df74dcc1d601c2c79c60fa7b2e76ef4593866fdd855729372208d5604c444d96b93a839fd86680d62c89400e1fe4a00e838d487abd21a31e0d72ea3438cfbecee319c3323668b770738baae83e249e0f8faefee77f4fca2d5e6ebca417c23d75d3d2494ac7c987b843df7be9b0382343de4d70c81cc687dd12daba9d49a9a693b96dd2b302566b48e32c355a82fac9d539f8b21d96befde8812778f67b18a95d04ec1b90710c8a854c9374d0f6298aa4f3df35f4a5375494bc51ba311a44fad05e918f4a6104b8a455a6379279e4c138c2b89cfb0d7c0b864b281c3bd65ec89bc2b0d6d8038495501968648c9f555ac43a279a0248accd720e0260ffc6ef4821dce7af33893f2936b7fe406327bf97097c49765c718504ab0bc952118d1e1ed12d5499be0feb3cac4fa15577cfaf9caed014797beb0199a05d92c780d035b28d303bfea3931838ef7b1104dab6d368e5ed65390ac8f34032aaf31bf25272ec72f150ac0cfb68a657a0546d340fe8174b3bc7c017f84492865e5183f9be8aa807109482d54387694f2f70b51a7040cbcae9e1b614c8c099200862692c3b0914c892a404c16f4196161cebed0d1f4cd9cf7d8de40b2b626d3924ef765cc5ff558cb8d2250386901d0ac00500010b2eb171f447ceaaa0abf6223307ce8d8667fbca794e0aa91f05d47af2ae5770a888381175fa77ad6f3bba0e56764991748d8edb6837cb79cf89fd6e43614988e01e8766153826e335f44e35bc723d41c92a451269084d7c3274928ca55a31d516c332f1923636b56b81ef61f83b394184128411810f90c0f43d99e0c281f7acd15dbb757ad6bbc5858eaad2fe97998da23711e0e5a0bf8d913389e0d9e043dbe08a818936fe2ad408dee677b2455b6a8d873a3d5f674d1413eee6d42b7c6642a915949a9486323d9270f5b3b72f8fbc593500465d81186cb30375df5ea427366d3c31f8c7daea08f60d9a9a021ae3a3699f1af9af9d61bc57325e5dc42ea91390b561abc4364edd418345cf414d1edac644bebd82abcaece5502bd38f4c6692c47ac2a446f3c4f07bfd8f35d1bd9029c6847efa91f77cc5c48db5066063a7f729a332c904fb1f6960a98cd25f720fec3d1e484bbc071e1bd42199d85311722a332d319f91419dd1e1c067393999809c9702c7183c5b0647e78d44a0b5763c0b98af5ad457d2d6da18a0690ecec67a66aacfdf227daaf0f6fac1cb12ec9adb0f4f9ea16c3dfd296216b422a411fc0f97fb48842262ca17f09b7da44988ab159253dc77faa3595120dc1dc7c38cc95a4c5585ab8ee63d33dab4f7d7a7c2244fe090c50ed21ffa20a99534b7e1f4033dc492e0a3802bc0dddbae98a404f5b89fcd5e25e66d2802feaec0f2ec531e53a880e6d55fa48c64c61b547010e160c3c30318c4515e03ce52c139fd6193daf33e740c7c68bd239453a708dd1275e0bb6255a237e9568f72eac46f50d68c6bb73945374d81bbfbc11f4aea8c5c1cf4b5976e1fadf9e400196c2905ccad7094d94698b09e42461d66a4cdcdcce3e1e13f4d60215d931ee8d0e2a804935b045a5bc8f6e10868728972d27016c22b9f7dbb2745645f4780ec05376fafd0bcc37cd737bef6a81940a0d347508a58949ec0b9cbd65b354215eee899056c62f11e3cc3b3445969fe6239ca3cdcfd786be910959ca175b118363de0accfa7b89e69f9d5d3ef45bdc827a36d1aa6c2586d06dc94d11d9269af01b8da19224ff8d2f718d0b4e22a92f6dfd37ef15c352c665945ad6fa9d48aeacfbe9e4f328cf717f3261e8b0a2589ac510008b3d0d9e036892173ce5d16dde9e9379ad77edbd485d224bfe6e235461121f5acb5973606db1ad6bf52d422b37cba454dacc7737630ab8f93b77c302e2fe50c7324e1b7be6d714313a43349b21084d7d749b5bb3d3030198c27bdc9e7bd6dfad893add79d87ac4b1abc7188b13653b980d54ffbb03fa18bbc8f49c399bdedb4f0fff416244b596262611c7390e2e53ab9f43f3ab6c023c0e7f7f39c4ef35097c0c41de237f3d96098896e5e7f00478d2cd53f655a939e1fed171969e38c15cf9d0ca3f556e3d7ae0865592594269488932113a0d7c52d6ece5f014ad5af83dd09dbf2fe7cbb3cb95b382d9d80985cc14abf9b6ed88f04ee1cb45ac47182e05e2333d5ecb697fc4d7e765b61905018472b1d19859f9fecbe78997273ae908a95814e964f1d40c0b02e422febb57a9c5c2c17f8695761068ddd03901588704a06d47d31536708f3015cd9cf318bdbd75fbfc1a139928b6e65523b179e1e97bd0d4eae71d59443e7dbf636aa23ea30db27e0f5e82aa961a86f3eb7da4db370009bb7f3d88a625b25375a60c61be5b9e0ea272ac2030fb60e83b53ffe29662cd6abd2ab2b73ee9106446ffa579671f806f158c08e7293025419fe57072e56202b8db61cbab841178360519695852c9cb62575deaf99da056615c9dca7598490c95c74e5c4f1c53326bbccc6cbd9738f035cff0f46db51399d19d164fdb84742acf5fd3c76422bad267ee7a18c0a5fe95f6a7277332faa4f4f32a6d7e499887e2f27c28053d56599878ea05e03cec2818f453a3fb1e02ec03227c2f276a240cbb1241de6d3c8086236f2f26ce1f31660d9333a8e05599233a4e550d3a0133713d9500a5625c995668dd5b7adab5adcbe0cbc86ea571af62e8780c4773345b32ac441412e3cf89cb72b10663cd6ab6b8d9b4be0aa72048f9a1d0197d5cc2cde5ff87a65a5f3044661de95b01f22a8629175fb6dcf0d098c0b611bfff47065686bed0168b1209a1a51b39613e3ec85f42e8e244962fc8b97f20915884a5fce0350fa418d5ce02288b23cfa6a7f91c8d578b9fff85953f5550d4f091db004ad00334bde234a65e5247e08d532e9fcf0aef6f27152cf1b6d0c1d43cfc0ee9941d65540b0e0ba663c10f065066064ea7cf854406ec6f6e75b02e1a93987b4fb49d39fb4c08518f5b541bc87a25b32410eaf4155c47c521135787c01daa40b7115fb87f313c451282f403c799a58e61a3df4686e7787920cd4e3340061350d6307a93a6e4392fb186eb61f689754fb97a66017ffd7ecaf35cfbf0297ba70802a782df1c46c05613a8ed738f64afb7b7429a80608159af652cc029534c3ea14e683cfb976b0c148350d68e0b59f5bf08a900ae91b72c6f4224b90ead2071970b733358637dfc36cd87cf3e6caadbd6b94d79bfdafb94789eed9d1b70e373a5ffb0f2642fb634aa3ab3e82a8eb07e5a70021c8fbc28ea9828ed17b4a601a8d32aea1919f4c5c38a3ad4a5cbde206a195671f2f35b8fdc7a36f10ad2b345f0f18249f7112b4a5c9786a759079527ecba9384328aa7e3e8cc368c993a15f2aefa88332b7c6cf17b2a8d6f22a64b39a6345125e78bed84ee3020228a774168fac08f1f5e8b16a314abcacbad632f4cdd8ab79e646e285ee4eacbe060e0b58adb6942d577ca4b3c86290304051cb1def10bbe7ea09d5ab7a42901b28001a168925443f53fd18988bd577f300f830238ec98bfe64b6a0a68b959e22701a1c813d1e6f7f74fc90e7c636d4c12582c0e329dc5b9dbb50fdf6985f0bc369f66e3d9df2fbd16312f78815dbd946f0288f7e40f384dac417320b89443ce62ab1f43c32706493692e8b6671b007b7e0fae9d28651dc282d586ed33586150230a54246fdd67aac3b0955f684c362671a2a04d4966b15a15fc640b256d77fd99648ad219ece314363eb0f29b1ced10dc8429a52705b3090ec68a1e527d3b9855344042eecd81ac97c61cef7d4995f02440479209981ac53b310837cd38da0f22143205e2768631fd8f62f3b92e007eed718d2e7578c8822e71d4c4e57b372296935389b9b5294d0d1225f81fb28ac6e684a3679adfd3d560bae0f54314b47f6abd487c423849c9be881cdde19bc921d31bcd0cc125eb1ad7a2c931016088963fcf1ba430c13a71a35c84696cd2a30cbaaf6e52a7a8c36355b1e4158ab78c3ec397628910a1fd1df1fd7236906b96063f4a5ee3c870dd0e64b9f314171d899dcb5be771fbf4df94e88bbcea8d1af0c239ddfed02ea66104d67b82ccf8c1edc8acb98e06445402c00cf7469e0928f7460a02535e08a6e2d96db54eed6bd9be70507a32c711d292fb4ad5fbb30f0b5546ef356591405a6f9e97b07c5ba44607330d846343baa640890002130807541ecae6693664014629e87eaf752c73bd3786b0c20e9ccf3cb5c55106dd6eff3bf80609102cbb75bc771e27084511a40cc95cddd5151769c057cd37a3d8706441e926722ca988762558816a4099ce98ec39bb4123e18ee496a220f5ba1ec48b9ad691af1fb36ae0d1647440a760e43c1d4a861b5b7fa9649aa1de9eef8d4b63f7da5ff7fe83f75ff8d39aca11676cb35fbabe4b3c691f57151c06228b80df0febe34714c034a064117d14b6bd3bb680fdcca594940a29fbd6885b7cc6f260523a7ec0f0a6d68194b24e5016980a6ac0f11cbe8e0bfd2db2cc71e8ba1c80db7d497dc11bc18f5f91f82d643af0af8fa78f4bd32ad461b40cd406cefc681bf203842598fea7426f534b51e5418f54c95a1f222499ce9f4f6fc54db9befd2137861754d3baee8c1ccf79534832c592b006bf1eb7a01ac3f390b35dd4ffdd3da120fb8a5e716926c3f3889b73328497dd8e7b334a416fbc397d9a41abbcfe13db81b1ecd384554adba8a5a415888e54a5fb9129afaba0c33b346e5674a03832e38d4ce3873042f8bdef613e2de988e28efa1a3dc18af318e2b8d7c7a975156af823efaf331fef1b4d9c0a23a57fb755ba27d9730e85c4baf353a4ed249a84cf160014f31383aa02afd99646028d1e494916be6114b46ee52287edfb4d565d1a2d45464ee18b0b2edf0cc0e951fc4255cd1462a2896132732b6a48b1d69df7e7b0c1d45d65d212817fdeeef8d51623f5ec340bf0def0a5d07435f796156f5bb8c3b2eaa0c4f5239df0085d118c82a66787d1d372bd223e5b671c07309290f1931db3b4d8dc0fee1d37fc0a51eba925361c3226013e7895e7a404da5245094bada45f9322795fd04c7b945e747262bd70dbc7b9e92524eaab9b2ba388b99c24e1a424dda8356ae96f21b40f62ba116c03a32fa93723d9d9db2277c034f84f0b5893da3b01d3c0ded01bbc55b6a0fa5b0a474d3e778b880010f6ffb4a2b46bf88c750055cf60a31efdf8eea5d5d1817fc919029cd8f3739479ad1a3ff90bf194d0c177cca197575518bbed641051f61d1cee821548eac30fdea2148dc4ad4ee68979b8acc296dab897b67b2fb2201e000ff5c3d0e1d711bde3b0b71b6dbab5c9d455f398c4d3d653a510e8eea18714bf7928bedb64a7dcbc4ce351c06e32d850b3ffbd751e796b476b53d5dfddf40c781e642844fda7f1ed258e2ec68e9708986fb40e5ddc56eeea701b8c6bbf5c86bc95a6474c8ba064f12b322b6afe379475f2819e75ef1d0e523c7f1521107be43c3b924a2049fdb0236ff17a62bbc00d3663a52937f0649d7a03fa37d776da4670bf1d6507f9fc1839e1f4998917a1f9b4cbf4d9c66b5154171e95385bd69157ef8dbdd137c1096566f41e6a615877e2f7657c79030af99dc40b0f2c6abcb7d57237f4779a182c9d8bb178037fc4fcc18fd47330651f9317aa0937221cd014fa862261b827c70bd071772952ac4e9c2250fc515f93128234724364875e1ae9fba1599b52502fefb136eb582eb18a898ee8fcd2e07667b67bfe205e7abd672cb10aefe0b0518c5ea9ed242217b55fe3f045af1c3bca14f25102f0bfa0e37ee23eb2d6bde3a0d4cda777816e44ecab405c0ed9fd0487b4e10638526fb4a774dc5ec8992ce8fcc40b3f49b55ff641518715ba0b1eea1243bae99ef3558bc970bf62c0a59d65d512d9817fff81b740b87d9eda1057062b71fff900b884267d87feb6d6a7345b1c79c7b93e3adb607ef5602c715f8f6cad78301085ea21dbd619e61ff49c0f8b8c189fe25d7f7a30a26d8d0d5a42c056ae4be8e489d6e000b2891a2aef4badd07e91156acd5b3f9362e69067f79013448c3cfabd779051fde65080c0d75309f51251db248ff35dcfd8674f5520e89b6b841d903b87c82ee745a1600a97b6e5601452f45ae3728dc42086133488e24ffcc3536154006aa71eb265214eeeec208cb3800878c19aeea4eb51c162c6f9ff2eac2fe23dc9bc2fa4df7c7fa29709166fcaae500509fba3ab708b557aa074a7aa0a21299af702fce1ff2bf469556a8d85d1a94a97caedace49933b39976a97612f85e897cf6cf0ca186ed826c3a5d0bcad998388ee4c4f259df8af7235c79076c1495cda48248992bae68668f34e95d5c0b10f699f17136f65faef16ae44975022bd99a416660d56ecefec256e03901693f36254914b6480a770c3d7de37cfae05c560ad12c01d03adfa38ff60557a9fa42b27ff14f368323ec6d3f37871192124f469a0d684dde9e91fd5402c916749f9ac20c5ba07a7555bcc2824c4e03e61902efd5354ddeb014376ea2e537aedd751aabd8db4b16f94177221b0ad9e955bb348df37e33ac192c864178b3d6c5c9996ba9276a36e8e9c22e7ceb1f080ae2bc1aaed1f85d507d3708059c1870dcb7f5a3c53482128851e248ce324f7c60f9262ad1920950f3b22c78fa962b853ef570226e4bc21f58ab8f0ab8a1c43c6b9982b9f81f0c078f325489a66276a3c672d860ba8c8943dc1f0741e8273387bb7ef6d3f56b8ec709ee7accc9f46b2ae12766b76d8fb6cdf5d455905a76a89077d1aa0692c2c3d006fd4b6fdf99d3906a37e2b88db4968069ef98e9449fad274a3bbfdcafc1e829a9059794ae90f12515b093f9fc06b89922661d4cb3b3070b4d99eb699abdace9349b83170217b672755e2459fac69664a69cbc5538771b7203e2d693740bd3516d7d8495ba8d37fa2db7cc1a87988e2a238e196c518c38a7516a5daede45614d0a93212d7994d1c66e8c9bad4b4642110a0c0d590acab55aea80b069d3d8c320c049029857bbe4229536c5082eccc8fd0d2e05896710920af9c155a0064864b6f950a3ffdd47f30dcbf4e556b068073c30a795d5643a447ac77a54f51345a8bf8ee2e2ca3b9928fbe2cfb86046bb97e86a043c996f6b2c3dc90f8f4fafdb80176475167edaa31191135cfebc766b2e4fd11b0ecac3f92057f1d72c949195aac853a9960db9782222644b2e981943a3d35fc981b9dc000d8c4a7e5163c6b5b6855d264e4a94b20cfecca175fa9b61874d15a450ddf785ab62f99412ec0eb21ff2f615e72d38de1062d6c4316005a9614c784cfb426f590e99b5f8300e689d13d9a9a436e013f885a778f2b7535ecccf3251c887dd4525e93c99c3ab11e779f0bc7daecd2b11d325f6989a6e0f2730a0ae4b943f91de5d92c35804c3dc48661e0905972dd7a1d064e9b4eb0eadc28d2313ea2fdb7b59ecf3a33ea723ee3a36ab87aa8aecca548bd1d7ca54615879ef8901e90bbd99aaa80da640379f59a97a156ffa35ec16b57ee5bcf309868acd88ded0b9d1a36c9f86ad85db15ba7aa8b45d1f8c114a1176d7f7b65bd4d1d8f532452ecf38ce447325ddeacedc46d02b9eb23634c20b6d2f6692a43665160ac41346f89a32d04c18ca0ea85ba7858998932c1b9d696bd4a748f417f175816c3bdbb745196abb99e6a27e77312f2f7ef2612d847bd0eaca1ed274bb7940927898fc5637d6944ee60488534c2c114509ae724a1e3c12bd759bb07ec932801bb1f340f2c3ffe666885ed9b7fb25422a0bdf7cc77617a58765dfbcc5c97a8feb7a61511994751f00caff74a1294b5a66847dd4a6718df768daf3bdc82ea5551c5cafa47a571c2401b7dd37dc9acc709165b9a72b3e68cb6fc8a70f7fb2d6b0f58c8a37b7fc6b7c7b5ed7864926a594feb9858cfdd21e0ea1969f3fb429a6ca08e41aa73c9df0a305d7481c7ec897623a885a7af24c7f2a870fc7c4f4d57573d611006d20873be91b18ef1438732371dc2986d173863829443c11d4f537918db0fcc592bb7d9e9c883f1163d6693ba5ea919827fd04c956f0e162adeb260074ff3d05ab12b6069af6b9f47328401a2bf0c6e147c595122581964419929d6ddc730d66c97dfa20c74920eb436fcc3071001656c9ad3ddffd57f561fb434ac8b04e8e23b586d2d1889e65ab7317858b3f219b874a0e71300e2b7fedf2bb5c981ee7261f54856554d35136fc0a90d4bdb422e77891ebe083171d8f48e4685637d023d7c7a39fec5f0f2e860465631f7107b33f3d7b8bcc8d708eda98f8a43459976ce2d453645f17686731211d55da061fc019c4f2808f7a210de9df9cb087ca557f2c7b18bf9763a107532d9939bab03918848d90f0c36dec394967425aedb410b8477b4347a3d44edb9cc0d224e1a836404c6401e2970717590fbe0c8d0ea37da0a92ad4c016910c88b3f2d595ea1394a76e8b4f44ce417b7f1ffd7ded8f00227cecefc0d57f7fd99413a173073cfefdb228cc483a87d347de92ca847ff789cfc1a674000a345d907ac6579550ad37189dd4224cad9019ef1683e93f3e20015154944942217893a5c088511941ae07c313540781bed4c98876db01911a34fbee11cc9a7be977a5fa6ae0674d6ee05d44b3398f6ac9f0a37174c0b1f3b3418692a444dc15a54addcf14797be80a82820f26790dd4e3fad9d3f446284cc67e5990cc8c8bbacc468e741e9987c9b6d68ccf36a2ff747d690b3368cd8890fb5ef794dfc85b7cdc87adc055ed701b3b84ae8bf578a4b6c5fd9601018ed12f10d0cf25caf2a3c5ee782450e7a113b9c025f142a0eb12af13043dbce0e4ba81d342238c0b35db589087500423cce8647aeff4d9c5d6d0cfc809ae971438d34869527788c82e441aff707e1cf6f17ee7e8b3b2aeb76283164b8a53970742d95cb5a614e323ea15ae7e3685d62d39a31c4fff2684d9fee1e6c92e9f1525ae4772aa3068974f4958dd9923f7bf3e2d4a31d816c2dd62dcf1ef90ee1f712c4506c53b992d2d68c7750cb8ded2057ac0c556453de94d6986ef71b3cf705876669905ad92d123a832f5785698b66be8f6afd4531919341933db8202defe856e0cc68fe37d427f810df05ad2d23018784a139a989824fcb45ffb4c9ed466788bff8668eb77a096fedcdf4f7296e4a076d9b3e05a1c1e9d0ab63d2f3fad09310f31e3caecc91d3060051f52d9b0046e49a22cdcf8f73ce3d023a96a09ecd2b5cecfe08a1804bfc62a6763f2a842a1b5f57f09bb4cbeef0fe47064345d8afc4fb682ad3a5384214f7f83d3a0d272df0ef139dd1daf4f49a198362ca9bb816638ba19714cc529be9c1420b97ddedfaf009787a97060e80d1869ab552e9db0fe5cfc6a9e3cebb4167720227b72849177f4331240ef925d33ea4f78856ac7da48964146e78b633be8ad64ce6adbaee93ae8b3c57db202ae654db18713cc8d9202da5c202fa0bef733e5dd7d32f3ae4ba2c56fa28acf50a860ac6ec1d9945770c684522a9ec7b9382b60d1ced8e9a7428b75d94eacdc904eb0b2447beb81273e190f35d169246dd0e91c68be57eeadb27aeccee6a50f59211cbce5e3e143c279fed7c18c8096cd775dbaac594331de81d003c4646f687b49a44f9c4fd8ef786e26bafeb2e221c7b76dd6c7c2d767a47f2aaae88b3ba5c3b47eb00b83e7a79a27edd1f7d5491199521d21abb819093490e834ff0777f7c591549ecdc7e855c15281a909bdedb6b8a46659a5337f14f2b270f79bc9cdaec9a7b9826b79ccde69d4bf392df4dc031ccc2933c330b701f51b62b37dad6731a6b7b22d933aa8bcea1ec40f8ae9037f0b7b22e61556e8aaab6bdd9b03ec70e8dd08b3c743e3c876edacb74ae98dd49edab16e02bdd7faf054438fada934dd701d79cbcfef0eb8848091d0b1305b874d23bfe8fed42a4ec91322e05ea3b7e1230d8bba20b46fe54353e05735efffa3eff22c12dd854f13e694af320d0512ace1a4c12ab6d74b9c3d3959c46bf5b33b6e207ef6f4199e25516e5216b75e859db85c2e8590710179679705877a6891e599ee4efd1545f30bacb2142de942c96797fac039f8cd0ec942dccd854cd2abaeb567155de11879fe91630d62a8bacc3314b5e201674ac3b13052f2f72959c5f457917d5cc2a15984661511fa63574c6cb89bbc8cef127167278aeccad6836933905ce5b87b956dc3436a729b057b3f2f012341c0d115d9edac41cdb8eb6b981b056508cd975ecafbe732c729c1ac123b0ed8cde28bdc6df258dcc0831f2a3890dca01ef98428bd85a2cfef7c6446c386ba6091ff0ac64ceb4540ad1d2d2ef1b853a71ca5ddd81a8f7f96a9012f0078a4337afa06b33c19888b82056c46a5dcdf81c4bf994457a6b67dc7cb999681ed4b17f2fcdf6b5330bce321a8e5efb62b2468196f347068f84d16fe359f96ac51d3d595845c744948fcae82d61608d57fdc299d5aa4d3ea57b8feea3908764248f02efec51b55fdb009c5c0c523f41b38c8063dad35a32cf2d5818fb524de7eb481440d84ec1182f887ddf79968f9ea77ac1ca6800327913334824b1109d0cfdd7459bd103107f24b4f9efe3403fafa5f7a95bbd5c3951dc1ef778fe59cd3973a32c6113af33ea660bded15ffd252fcca8a4ce1f26567abfe5178e7be351a23303c5c10b9bdcee3b180c373ccf252c462d47f55da23448c7d9aff1cbb6465068f0aabb28686c26573adc9adace020736748ead55d146462b6fb3260dcf71ae6fe860d98223cf88851bf8885f4ec748d9bd90cf1477754f13efddfc10b6a2bd305111f14aabc750e2b19c58f1bbb47da77aff1ff63eabad9dcd092fab1c89e705150b1522412acc78199eb64e52a8c01224ddef60e582f5ac6a1b5ca2ea2bf257da702093b5df22a2eb069fbda6ff7a81b04a9b03c323ede91519371608a0b51787404935dcb4a99b0856d4b345748072a7124e28cbd01d553349cf5fc1a5d91b3f336882158644abcea7e3f663b9f996cdab3223fb69828cca05f2c68ace1725af5767566fcb39c66e4cb7fe4f2a76593344b153e71b7dc98fb5c0114775b904261fa1a83279286477e92823128752fac9574b552c079d8eee80ac51fa9a648501fcdd77f4604781255871f41bb93b8685510a3f8376ef5168e9954aeef176175f255c21cffbd57143ea27ad288b100548ae5c337bff8f99714d57ed24105fa90ce5dbbfe334b6cd9761cd097f861a22d593a1503a4effabe981aa5ecdeca48e3a874a3a1ef5cf9793e9e305158bfe27edf97eef8dc3ed80371c61165eebd5fac9261d11299d07a53af7d50e1bac535093f382201ea2d7ba27fb22ebd2d590ad4e658a6a03afb289ec84e05e460bd120607e4903071e3019c49e6d815049fe60e4ffd3bb3ec86832d595dae91bf976355cf2f816bb20772d0a247d85c8ca2a2cb7aced2d74936e1210c3e5f3d3ff19eb89e266e733d310ae97f1ad6a9e55f6c3d2e8d435fcbca9dba68926b6ffe72640eba7253aae708ebf160eca6ba9fe115487bc812bcf5e055631ea146ba4d61ab33a5bc6951d7f16bb3554fb12f2d403882ee0be8d9a042ecbbd623fe10be85a30d10434d2a8fa84627bc6050712aec7b97d90193679b5c50abbe3780313a4627770c2105cc108c01a2782746621e03856c2050ff5edf389a325d83043805a68846e8376cd39fb63990725e83da333d133ecf9cf784a8eb147dea788ef6e1c4754799f35c3981afba0c16a617df22acf5a542b30ff11064041d779adf1a862a9de6f761a537a0766c81b7a6b473da2685efd407439559099738354e80721eb117373288520f0aab82307c00887ca0b817402ae47e9c1b23d621f1cd49ff6aae4f50858b3f7c4df12244ebc4894ffe7278af1e678edfe7a0f6d1a4072a0a16ad0e94f97317aa6d1c44d3d322065dfb16a0901eed1c39e32e063d0409f3b05005fce47af8128d4d5881db3ae7455932be35ba3e399a41fa6c07c39f5d2869324f84db0f506c57fc4eae375f769bd3e59496cbd9f94096ac70a2d56b690016a643fcc0d643875ec91f45ed685dcea02d7525f05bb8856824ab6ce23702dbb68e3e0fd2498e9c078715ff4df08cc735ac286b5c2974b6e3f1410ed93e11a68e3691455c8302754ade82c7c9c20215350503384b91e3407f3c9b9a4b3295496a36d4aa3df69ff272fab9be909f3072d9e895642570ba271556b123de40c29f554b09ec78cd3de18510beecd674c79f76847c2929ae73dda6dda4c255ba3b164388f78c7ef7691c2a178f04307e98f78973bce94471b22a1fc5ca53bdc4118f0077593969eae9c0731fd9f69b4afa4408715ae4cd1b14e05f4706fae2237c63b34c91c04fe5a9c515014a001c345e04528aa55f3c84d9b093c0c7f9e658fc3626dd3ed2eac2da57eea0fbc69e4733e57539a1f80c9ae4711f2d39308ec5f6e94fbac2bcd76eb0e670700ca956156494aba054ea3afff16b91ae1e0d01be226d157ee4564192792a72c8c2734afcd386baa507fd545f8982e5769245ec8dd6bdcedf196e21c153708ad642e3ad44ee183c111e8b62c0bb49ee2672572afc473249e93f63c8f33232b2d2202fb15889afdecb8eb5f15cb8005185c5c1254d761508704589348b6e31feeb43ddb79dc71d6817a23898477e718bf2605f1024035323e3d828c36db7b9317124ad2f430b26bbd819221b1e60f0ba85da37a0e8f719865e9c22fa41acf5516b75c314420c735f0e98315b7c11a3a401584d7dcd4dd0c4b1c3f541afb6b3089fd27d1d62992cc499f1316d854bbe8eca69a822bf34084fe1340f2b0e10a67866b21eda3cc636f062fccff9e514ecada6b8067e5dd5f39325c31c08a40107c6a1a2942232813dfe4e2c4b85f8e4790252091ecf9474624e677bd0f33752d8864fccd353453f1383977e6887c3ccf898ecf5dff65aab28c25816d63901a4ad7acb7073c505af54fd0366e9563221d1ee30c7bb5be007352534fd39ce7b29f69cdfcedc9054517cb7ea8e6dd61d0c5fb3d70f8ebb977655b320ad1418f84ca877ef2a4e37689ff604f48e129878b58d17d76df4756ef5b266125376a3293de48989e9295db0b51131f5a6de621af39bc9bac26478debe240f1e5aa401585496fa6112f49c3cdaa862033636959ebbf5b503204e426dd62258b310a910824ba470a5106d79a38c89d8aeb00fb046d0396f36a417c0c2c10c7cb6b058645f642139cc862a10897e9ed3823aba71d9b84af5cd5b42245951cc19bf55f7ea3e0ae106b2613a5e8521c9df36447a2d763b48aff4899f9ed73823509c09365e15d276391c2a3177e0afe9b03f27f123b2f531c0e84b7a7e8bf43f037683dd31ff4d49c58937e07c448ac6c09e55bf3d2d46b7fbee5c48b4383aacb42c3fe7cd9a35e4b73cac999fd982b064df32400180385f7a59a1cf0712f4d66623ea9616ec7e0469e2529c37d27ccaf3b479c29264acb31be230b34e3f161f82b8cffdac869a337b86c148f0beea3a4eec07a13dcdcf7855110db4bb23250da073763ca32e26f6abb5b2dccd070534d202fa82ad5d90ffdf411a5788868bd7d51e4c0ea91e0c211b4d30918d73a795308cd4442abe34e10dcaa2e5675cbfe8c72f8e549dbd3a2036b08709e825525f8dab59d544b9f8a263a98369dfd703e3b872a95302961133e005a1cdccc889cbb208c8fcfeaff0b989bc462ddb34743363c5853c1b60e0a3e76b951cd3f17b18ababc4b921a8bb8e5337c2c8d6955efa38408fa4832455de777b73a643708c8002653ba560a607d000c5ffc75206fcd60613ed1c815d18023f556e4e5a2519608ff4086eabdeb2ab5e5c79fa16f8e3bde6f0592464328928346d47e79137dbe95f0a5308728f45bec834a856844f8e46a5e92f4bcaf61bdebaaef5fcf05c38ad3bfa14d686ef328cf0f5081b3158bb3124662b82908ef78a3ee7afaccc98b5b9544a34d425c5a29432bd1f5c19f4a2afc3230fcd78f4bcac58ed994ade2b90ffdbb204854dce20921bc7dbf47d787de31a439dccaae94bb144dfb38d7bc6e0ca7ce73fccf54db05397c79fe22c4c4bc3b0611119eb737f2a8ec62f1ce6b72fbd5e34acdc79a0f67740df0a08ec15c9bffee231cff3eba53cd8fa16b39d65bdf6e79dec1eef445b42d9210f19fd1ecfd3fff9292a3a83b7715307cdee49ee4247eea878589641bc9393ae63447d4cabd68a6c501b55f3a0199d765c9d021a520f1e750f45f8801774422dd7033a315e7c89065bac5163f15c5c9103075926058cf9fdcb97e22c0aa87121ba1bc135618b188817512d3d62a8f3f75e653e16bf6d37fde5cf7eb729ec989d28950be267768f8e73b466d988e1d4ba27cd0c854c1aeb6a44d703ba6da72f39bdcfb2b2c7ee85d16f47accb45f9d231484a8ed08a2305b629d42760fc057a11b5f845e50ae1d10d036b0d8749636e34f05df1e3fe93186fb05dd401bb5003a22b5646ef5205d0f763b4b37bc37cbdd3de78e08dd0dfb15d0a0deeab8c4ec82039dc24e8ef0a2465fccf03935ae92d9b02446690bbadd0e6ef57b80fa3d4ceb7097b2872b002fa61765823d68e078237dead7d72a6918e93c1b4c726859af019042959f560aa55477c8d43da2c763e02f02838f6fbb9669f4dc5c879529d55b1552805cec825d8836f60ea6ef1ded81f2a452b425b353a2ab08440bcb8666f09a57ce8e4b49430d0526b0d0bebeb8287d9735c30ab7c59a13dd5fb17002c510a35eb8761c58bc5dfbbef72566d7bef94c08b539e54a22e4c9f5640f40145229066e9a16757e16334ba4f7cbb9a48d8efa7cdd192e0428135951413797c375e2edee2de7c1723d4cde2493d1e50bf9b85a163879d34c5f822a782a22d194a81bbb5e8b489ebf10f9130a88676b79a0d2bf1630c941fa5d520325feb87e51cca7d338a3fc65a597d2852d3efc680146d2d2b3dd6a09c57c96291f3abe59f4b0dbee2c38072ef2a019edf5e195f46d090c4fd9934e8fa4b2f327193b0b125627221db8f86ebc51895e39ec9cd0f83bd382917da59c3c6088fe48cb61b6b7da42cada51255add0f66e6ff8795c7522e63f1b40f9e1918b1a9a5c37626249ff33e6e886bb10d22a1453d32d1ea4d93e8e3346a934438f3c6455ace0912b97d6186a5f443024bbc6719c9f60303b9a3ccf60dfc3c2bdf29845ac2615e352d6a28707d70b2abd0cb74214fed3870cb819096dddeae53fad5d08abf912a29d3641da665873fd74ac8128f4215ce1c31a576ef940cd4aae6667943b81a2c6e615f1cbae7a1611cfa3ffb8a84d9da3ab2b63fd16a7004ceae82f16311e13fee66f36c2eb727ebaebd29aceb9954a402b6e0b3c84e61408c78a817615a9ed1d795096036dfbd73fedacafe97544fca7f4c41a4587cf229db8b1281db7100e3a99ca26d1feef6695c343d8171e4997a05d7ac650c66c691dd91d375043be96ba7e4e9d2403f1144f678b505bd0619fe1a2efa2134f55745756804d04289eeeaa481f2a2838f3675fdb2d474eb88f5734266f5692e81a4bed9e63c8b9d0b0fd0fe02825ae5d6c23dce6544dd8e3ddd26a97eb4e5aca5d9320dc49a3077fcbc9b7703703a2400a4f2b91ff50d0a1a61583bc08ae563723ff94ed3ab443d3ae48619baac4fb2f3203bcd7f6f1dde55a96bb0e6b55095a552e141da60f97fd3f1c219adc9793574aedd7531c18c46c1e56b35b8ebdff9d0e32bc1b08ef1960a16d014651fdd49c2dbcf219871e25006869a6e4ee20ac25c768cb854a0d1ea61a72a597d541a98bb60740f6dd3b947cb769b58cbffdf897fbc52080103492813bb5a333dac6348aeb63e7fc78b18cd811aa3505acaadc3ff63098539d2d5019da3b4849ccc08bb04a1cd98f7863427abfc3aad421ce3618755fdc29ce47122a69fda095a72aad4666d1043ef314c0764ae2f55d461f1ad6e148ab3b8c36fca43fdf87fd2c18bfbc2634fa3caafa4b00e2a9fb90e73a3ecb31828f94f314a58a8bb8f56d121482176795e2daeee41f481ae04e9043236018ea773212566471eb24a9d01a111ae0c26df50d4347357f12d39491e3acdb8d6f1b488a207541e9fbdf3e0d8484f338a3956b3e369e27027d8897c8b24ec4834b9c4278fcfdc2ccd59b13802498c9e5297f5a4a877c27b2d76f7dcd00fe314184f0fa8b89bbfd89735e4466f8130d88be0201b29b1564e5a94c125d9b14b7c5aed41807c52611915936740674931f78e4048429fc6e3fa1c80c7e8fefff3eb51cded88a14e1ea9f5b7d5d41831a3ed8a895deca3a6ccbcc21eff1ef915ff28cbe85ee8fc797e098455c8069bbe2a4943b699a3f1b54dde3e12e2314c523409828e77b31a3c8c7763976cf7654dfc64a70d37db305444c049c2a83b77b92049517f1193c166846b147e6f4c50ec6676e9abda50d391138375900ccc02ca1e19850d749a0f413427ec35d3701d7721938a041c91e8ebd87d296556ef25af76b9e8a11801e7db799cdafde35270052c7fc378c442b19e9070bf77af6ba576d3208a8624915eea54520d088c27208aca289a5f8fb7254417fb900b2687676d5f876cdba80c61b0c376243b7c94fd5e4e2878cd922bf047de528d59add3add212c443d4751d1a37b4381aa3d7660ca871d504932513916d9bf6c5fa27ae935b8adaf5a2e63702ccb452b0b1ec1d0a6ebc04a0282a0b6d5b2d75ee43c2e25d1654c5329b83239415ae03444bd8bc77354e883834864d5c67b568270217cc2f8d3555725bb932ed4de86caefbf20e0312e6692a6538ac3535c69dd2035cf24d76d7c91d788de90a6a2c096344be3810031789ecf75b52c3bbeb001ab73ff66c33cb93750b9468821e34a3b5d1664c02334807104cc041444ebcdde7e3d29d9f9531f3d441183a57485d4bb589d6044039e084a220497c4ff7453522f1576d29d6f7e60a6b2c4b348ba4645998651a71c6ccb0ab0f7a97a315df1a7d1fae812c8830a282427ed4d35142dc83cc407942f113ae092996ff7e8fb9e7a2f6ae5920028d203b5464110fde7572e154a69e005f395af9ab7d979d152cf13e1f87ed243acf6267271d110e8f9fa2c3f6e7ae9a879f783f430017b7bda04a4f47518da543062abf8ba870387b8f086e0282fdfa74caf69f3e47e400343c26c8b130696ee2256c679764ab2ae954e968eaeb64a128b65751e92874c339fbab13f893e50140ffdae1c7587ab7f5e1eaf88acdd6dfcacaa33bb49df6d952f20da7ce39543b737efb9fa2f5f334136ad6d608c3fc77764eb049616f5034f94e89c4dcfbeb929fe0fa836b3384e05e7c9549e3891c8be8af10fcd0521c534fe98997aa2f45022da570d541720b2965b023fdade252e0b4436854c8be940281f30894a4b1078fab2b8f159a8421e7c409bb0f4f6aedef41b14b7c815c88c9c9f585fcf5d4ed021987da91c0ea2a6dd6097c5175d36ccc1aebb498d919be797f269f84a5d440ad1daa2703183b4e6d26f3dd241b53918bc491a470a0821a6e74e3c5cd0c5128ef9f11295bc665ffd813262480a1524b3950d4e097811e3da9451aa034652239bf6f3a244c0a19a751cd0818e9f2e8cbf2d9aebac5fcfe37668ef0be5ad2519d85ea009cc97c5ca2bbb864c1822ef47ab09c8319893fe6439f205411fee9ee36c2cdd7d9ee8e911f8d952b161ffe16a02b6c23f3947bf88120bf8fa378421c9d9861870f0dd38113c8b18a5b80ae9d1a9f53a782942f679f51041a1875951c3e2e31c29a8e971195da0453ba32dfd404510d4978471e987db7705ad583a6e4d4568dded4d9117216edccea200d407efe9b811333145a4a9ffc4a65e6aa276ace78de9abac8a42cf90cc1485273b81f0557c150b7a8e5d1244b42ea4bbe586dd8ac7004c9ce4442b9fca0e239c195fe7c63efcef264751ef7f5397d3b758469aa5247da7441e91fe957e3a65273558eed77e849963204fa58adac275727330816e1be9b6124423ec25d6450aa455f3f6d601d70fa0b13b0cb4cfbc65f949eb21c277e95378156b41629bd938b11b32a4c62dc8f74d821aa9acd2d2e3eea2a1ce17df39bec82ec8f0789d553b6de5494b380109e2580520ce975f772d89336f6f1f3b458af94fb476997da5d734d16af7bbefb45cb8e6c77d8e9f97e1d9aacc12feeb802e38e10caa2067bb6d0f17f559c09c58743e1112b40ba6e0e1c8ba801f9c3e2629ee67635d489a3b103735d9611f44a9a6941513030102d6315610bd8a6bfcf272bad6078558849c344bdcdb7321eb1d5e998e99587c2609db8fb732f2ec94e9ff3eb5de7033c41a15c33e97799d24de15de41e3111a7d3ed5929d719421ed26a2ede825e8417af8fc2840638c0bae53e6ed9306d201a89b5c03c567990e5d7d01a1cd26328765348d7b63d13f2085689286b2e424c2a012f1f3d8004609de310c1ed2c824ef0db9dabc827c73bb210c6f1d2b1abf9d078cd2261fd297f8c3025eda339c60d4652591b4b346f8bbb666dbda07694f0c8a0055741cef41b35bed2557ebd985fd452a9ee3bf0f3e6c05025078cc5fdf64e89eb29c24d78a686ec0832afd85a7650c4b90013ad1a81613f94762f27fb70f7db0fd3db7a45e1f8616cf7bcafc8ef2587e2a31321519d24fa5e7c630d09b270a0d066e654aba0f1180b6fd738a989616c7fc33f51ec16a82ef65bf0c3427fb936e5eabb39eca877ba391930f178782b48e0f2590f7f47602fc13be6dbd445314c3743f5eadf966f92453433ab5ae246884076213d05560cc5560d80a4382bae263fe51d095df02e85a6151088d7579c146a757f63899f7e406e44dbc75496334fff4aeeff54bb0930281890c5f0ad9e3a44b00cad9818bf30b13a98ff02732e4de1c51018678cbf3a52ff3da143ee07de3a0992713afbe27674518b96881a5912154c461795f2e44f43fbb425f3cfc02273f12f0813d3a3688a7355568608f1e2a492567472fe06ad14fba920edb127e52778c473f4634969aa79512f33204f2e3a9fbcd3aa0a14ec10660749fa9d5f020fd09acbc114cd579f3cf83825f5471f48686c7c67c139bc14f84b2ca213247e3e63e10383d024bf5fbf0563cae6ffa3855f2f8215099239dd9fdc949de8d505c15867b39b2d075c34d86cf945674f25d48ac99e3372cbc2a0f64fe9ce273d8322043d4d3ecfc073bb95ffe9708f93ba8a8aaeba6939996bb2c20f3805527b6fd3b5c3b92abd035f4140600ed51eb1b535ae77e3c5e088bedf21c8cb72c8f81f4f2326a0c9e74f29c43b7c78419968cdca1aa0e631782049fcc53ca41fc250ccdf467c69f124cf40b1be7e7c58ed09d4864b87d84404b8766c7a39619a42ba1452d974d030c9ebe107beed04ed0bd3ac83fbe658718a7fcfdd74e884fe14beee0cf26a588bb42cef4df5a45ba09aa0bf7a791a9125a267927ebf2b73ebf0c715f2dab82ebbd7ccef70774e322cf9071dac866883d35a61dc6f87f01a6c2c20e7bf4f617cde49ca9b196c6351d46f15cc4a41e49411309f27f4a0427aab2eb4edd4e0c87997b0b610fa7e82489c56553cf78167d1cc49af33d000e62c0d76ee33e85001aa87685d4205026a3a5e64031e923d97559f458296cd21a83a60d05bfa9989bfe5ac99a56421d8b785a2826ed36423d0f5289e7070de6019bdbf2e35c5aae3c5411a1da1ab09773bdb621d2f358e1e43c529fe3e5d3cb9c5f2faeba765e43ca8e1ea02ffb81fdbc0777ccbacc774d8fd95c4a10e449bce24bb4fa610d656c7c09b09d621de1d25db422781c934ee07bb0ce2d297e43be4f0c6ead21659c80a16446076e4bb7f96c844164551c03e64d0a142e248bfa5f3062323e049bace61b829f217c851909a823d823cfb679d0d89f10e54a8437af46952c2299f1e87a0b825059305a5dddb5e8ca1b5981c55b0078c1f1eb71af174b7e22c2120c4bbc1d0da41285a40d98196de8766fe6723532c13e442a67e15d65cbfdb4d8df8119571d72fb0872dc3fbd5ec1b03561f482532de3cfecad545d39a6450a196eb996a22340bd4fc2993ce6aefba563f1162a702b87955589c4052db80ec2a6fabcac036995aa3971f674319fc588006c0297d3047cb1d23a012834bc20593b2fa28ea14d5d9e64dda0fc2660dda3831d904fba76b84e01d37f76fbc232895fe2bf017ad26e15066c40db4096545cd1896af8f72c250901b630f1132c63ae7335070684ab6eb83a21179f6d8ea96783069179222c942c24593facb6a539b8623c219b0ddffc3bd305aab8bb12df9ab30864ac13167eab969c48518416a24e42149aae5917f14151f5e91979924fa56c95d62d340fa857203b03d48a7cd3ed21eebcb7ceaab91f4d0e47a37ebac13a091541ca81e40402806ede8605fd2204e05a6707f9c1f8590e79d3b0b9765800beabf5e495788c424c487a2af02e7f27d8c50be6543fb82cecce22ec063a10c77a5a053a5c0107ef90c2b1daa236dec3355eb70fe3aae964e607c457653aab364b48db603b2ea935bcfbffe987cc63041c08e99cfe086a9c5f8d36ee12ec5a14bd0a0f80e1baa1130d0cd003eb78df42ac99c6ea248252c9d89db436f731273612731380ec65cf8691cbca1f16cd70571220a9ad49e68c634d03c3f7ef31d4491b3705e6e64ad578c1c64012a3a15614f706124a2884290694d0831627c41ef7ed1e485b24559e01611ef2f79d800278c64c01e963ca526ffcecb7a0b692f68ff5cfdcfe5b4bd4da4e8383b1c39af8acdfce415c615c9c7a0939bace72ff8b8d982594dffd55a6b1df9da4c35f95e0ac48bd6e696f1edaaf49f2e9a104bb4ce1382309ac9576f93be71ec16a4bd2c6f11d72161a93f3c1c0010a22949cf8677c50ffdfea5a5e13f45af844b790dda867aa742b5fdea96370d362a434d0169d77161b87dd174b3c1fb2d0f4d79618c81983f183952eb1858d452aee17cb22837d2781ecaad853decaca52bf8ed0814ae598fbabc7c90d0d49677b7644dc0df3e7f3af75a36c13e45d9ed173eb68d128265504d1ee9d73cb3353ec0f85e7bea57c2c49ce2644ce672fb7eeae5ca640506b9c9f48b9467fe3166211cc17b1fa3ff4f8c8b544de1f3e5afde98faff298c363e9b8733c5ee69ce003c397b38e473b905e8f38b2a9263437e39abe0a121ae19b68e15c9d8d7c002bc5ae1fc6f8c9ac1ca28556a68d66e239642adbaaedcaae8bc085b8f3c3fe6e902acfef3265c582bc6809462dbe503593e77275f6e00da472ccce57e6a9817bb5e79db870da5db0fc91db35a44653021eacff8ede894d8b6ba680c6a875aac8ca796b9ce9afecdc6706f01b1ed9be8a72d4ccd75331da9569ddc4139cd05b72285ce176ef11358be15890c187cdeb6167b8210209257939ef7661296a25baf1a03e04b2b3ef3963becd833ef7f17d6f3c892fab98cd96cba80464ec2a58de37b7a45881b0d807cb877e20c46c5b48f97d800f5a4b4369f6c7fe53088a4c1779600f4eb7fc9f2614bdcd05e81d66b18c64e8e97037f816a75300e66949435a70d6ad2a6d08fbb1b1a92d32b570316fc76e653127d08d8a86a70d80ea806de5cf8ee5c2208c8505d698b947d5b1d606c5c8a61e366810ff1101a0a778da00f9b3e36c4210cc8e0561d8ea28a9bdccdca091bf398a00f03c8d1ecbdb4473a32bfb537fd67385adbfa5697fbb552b2a2d4433e35619c94068741d3c1faa9e414b4c09efbc7ad034bb1f2f3f99cf531ec0e058c89d2f3d983b9380beab2197e03e78078f74ba1baf9e633a5954a56786898f7f36397cb4966195ecdff03a50d2a5cd134728bc0b85f71562d3d2a17d525625c88c40575ba952dae1495c63e3efe56d681bb35434149b422639ff011604c3b0dff277a67d866f367044b6d8c782a3cbaaacb50e774309b9bd85360b7d9e4a0645e005c6ca5b187e69588660e5c53a212727a4ce89188427880f465b03125ad4cd3fbebbdbff664f8dc0e2341cc53b21ec854ff9fef913d166dd7d82acab7f0baf66dcde171c154eb24aa084de6c5fdb351b9edfd058e9a6e0f693880164db592dd12dd540f59a3226c1d813a4786b3279ff8fb68748afc23146502bbb880c9ee20de0ded5bd1ec6b8412f3fa78a2d1b094981ed32685b440ea41e24b9066bea8dd02df48799064afdc3ed6e9d95848db32d4c7b20bea8ad8130f04b5e279762b08e920d6e3eee3944d9501a056070c56a75b246e9248cf305144387afbe4ca9b2ec9703a06a0921815e5e4be74c029fcd15dbd735e7d651cbeb7a0b44698c7b70ab554e3a55c3f46f8161eba7801bdcce963f0ce0d2a0e497be18a14f26f865fcef88ab878ea4e9143b65f1566ec167c7732c4a22c0e51907df5b7a2ecab09cd1f1128740f0c7d9b63562507a6635662b4bc620f19854613018b353e992c38f2ad660be7d1018a28d2baaa7c06ff18085871d7bbfed0757797a39718c2db80f94c0ff2901367e37a95f04e2f2d5f1598be982b93c5d49c23f4c008366dcebdf5f9b52d2446c312a8b162616ac20f662fd6fd9df517061037042c7e3be227731243a94404e3921707c3be20aa3bf8d8850bac2893a20030655f1a843ef7d206262856aff2cd5cf45ed8f8629bc9fbef4cb434a9d8703b19b52e03a476dc89cd21184ec13dffa9035c2dceec23f2eb6746c9633b690b3c722c10d58f723f5ebb77eafc683acc3ef1ff44335e68ed70a14b66b749c136b891e1b21599f8f2cf22794022ea8dd364e1f7bc8cc543d9738d3c7d024d3ddf60ed1c57ccafaff7a9e9683d83c46efc07e4983ca86ad5487272c51c5dc9f26daf560e7216f39e9162dbcf0996423b949746aa2905f4ad471647321e5412ebc03e09cfb5c88e7dd2edfd3e5444d83f91d50169764572996e41ebfdb572c4dae509a3e1656d312d06a6e36fc92a8f0b227cf1e07e64d4ec3128f894c60c40a4d69a17302e8519f782734cc2277347927b309633868d7e9595742fa94b223bcc0737549a87f22bbdf367d30dbe408a849fc214a153d1acac8953517c52f877237ad47b7ea5320b320bd59990189edd5b154fb858f82762b8bc4fd94c8019e888563244d81f352547151aeb831cf88f8a64d1d85e7b077c48e918010de9ec7b566c096a902ad1eac8a2cf8bd23dcbbf16339c17769984f8e2ceab867279f714869db34c4b52a5cacea476bc8ff876c157d7b88cdf5052af874c09a933a71069f340da486289fd683614db43f2373129fa38835f242342766f056e6fe5676401ad754d6fc287a7b846ef2c79743428abb6173aef0340d66eb7b267c33ad179aa89336d391f130cbe16d84b5bd7e76124b1b8dd4af9c5c6737592893ee48e93ead859dd76a76915d1b9e362d590339b61fb976a78152346123f289d310ecf2932e8ef0ec32b20cd78a25125e8c45252614089fc8a06b6ed70f7ade40c2c92f5758b499040ad5eb761c6c5edff17cfe998abd95c59be492ed1a6f5904e855625783260326bdcea41b92612a849657c857ec6c10d6f9896c3af0b4bc9632a7fce36981e340e439b2c09425d56c9751697b9c94d6d00148563542a7cdb5a297cff5246aea024b55bcc0e8b961fa1ad698b972b1cc7a6f30d62fb2eef5f45a9a6cd0b4451da18bd3bef35f4c332ea96b8cf1391fd03c5e59facaa2fb79f04fdc52c74fe20af58c6c0049cbab56173ffab4475a946a89099a4fe363c1bce1c34c6b8a5736d6c8479571a2fc4702dd9b375ddf5bc7d4159935c58b8574af6d61bc6eab88f7a7c3ddc16c0fdda4c6a45c40dd0136fe2798cd4a6f70e6224ed1eb0a6a1f412dabddbcd9b20c0946a0c1371c90410d36572ed70295fdfeb3b593756111e03e53392caeb8e2e56b56c614e79642a9c1704bddd0264374dd8dd6b5101f22284e889f026e71fcc9b3f309e1a02df463b30db462385b2abb13fd9fb310f7c46bf54160a62dd993ab4ef7d6b8053e1afefa5d2b889a897c1ceac98bebf49cd95fcdd17d9ce3d7f21862b15a17067a5f344db35a0732189796bd5ca504b600a974643e727d2dbb2552dc8a9fba8eec8a357065a9bbaf2f448eb2090a7f9962878f16ed91dc7740fbb82429456b77cc09a2b79deb57a5ddf22272e000395d8b8900e7cc37ec9e61bc8a55d250a310e4f03b32ef63a97f80eb546948a6e495324c404bea0a763b5414fda14b1abf0df94d86c73276ee79cae08d7301afdce6e807b6f228dafc20e4cf5745bbf4b80f5e13de1053004188675e9bfc0f0a782a71bc4176653a4952dce8b2a5a6ba00792fcad40d949be7a2a9d456b5b29febad0fce9da921eda5e83127c55274ee4ac559152601255ffad5f6d7b7b2517f064b6b0d020d98daf35e883421467af1d391e55ba7f075adbbd5abb4917f99924315a07e78b1a10e39a36abf07b8b79ed80091e535f8829257087907a1b1a530f14137062195eb2402f234849824e5e3fc234aa23eebc8d41384b65de352abeafe00652b52e737abeb480528d90815d6717c45d179a2dc90a7e02587b45c70c88966f239bee89fd049a8b408eafeb2b4e81d4b01e021993038b1b46a65bd5229c69eb654565b8f5b54ea4321f308da1e43dd6731be670a3d745622479f3d73d5888c6acfe6ea63e5cf57b03d85a5685cd0896f2ac8c621c9644cca15f2977856dbd3ddd7e92cec174fcadc04c67bf88ec549b5047f09ce4b09581f599a7819fde3fcd3c92692ee9011d73cbf6ef98282af5176eafe36a3658a1440400b4378a00eed390764efdf4b73fbe0e8692f82cb01c284db910bfe9abc0695b74be3f751898b0c3aa2afe8b501917ca070d1a34d42de7d416845231245736d32e8244f21af08010db3c12601d8fad89b3ceeec8673808e932429229ffe9a33b730eb4063d30bc8b083e78dbb9f01113077b78984cffa26a2be7f7a6ac1ee4c47af7a802c588535a728f24638dbf9eee76f5f6bf4e7e86f8acbb0af2905c95f3421cd256c5aa45a4133086b1508a1b0ffdb68f7e6300f6bdda39a478333df55affd263838a245a97908853046c6a067b4cb57badf978976ae9a08b5b357884682c871bd525a648d3a37ebcef41c0ea3bd54dd52aa3e28ae7cfe1385c946d416130dbe1b5c142c55c7258379687dbe8f5b30693822a6e8e6b27f5c9e680dbc3c6d5a6193a282f815bec6445452c722bf3d6d1d12f2c9372a92bc02aa0fcea970eb1b2cd3c51aa4b3483edf17e4551c78ec9b0bc56b5d14aca4bc0f539ba14f458293ab866b3bfe53e476774f2779acc38115db4f178bb0b61160fc5a5038c3e676a72a34c498d851bbb2c0b500df68cf7717fa877ead48e882b15248b08b5066e70c405750c2c020d243c9d7a012e0e335f3cd209583536bb311ae2500d512df2d1dfea722844c914da81b2ea6f852c5b8f419c6df5e7e96649e98427057ea362dc68c16b126d8ae1c01916ea706d46a48ebab78df7785ceb6129477b19dd1b2a29bebd13e0c9c19972981edb3285a03fb3df1b14770877b061f4b364ad3de4c4cb111ffc5a2a53458927f6ad3ca249fba4f758470a8ef13084f195cf7c0fe550aecbdcdfe88c1bbd9e9a43dd1c3bfc6d57eeb3ac68a339e54fbffb24a9f0c90e1097a0049a0a85dc3d41bf0934e531d8b3c50f6593d191fe69eaf4700f888571c504acf4455871c24d7600d09e28d55a92272a9e232805f310e85f5d505fa255ce3b2b329151d53870856517d93787a2f0e250d4fc1ea8717df3da7ffe83e1c84c79a93f5ebfb432d58ec28789c8aca8b49e96bbd64d1e9144e00c04f03ce2e9c738e0313a862f45f421dbadf5a78f7a3d95edf24b8f319f9f43e333a82da2dde94653213d62d546568362a451e1c694e41eec0c8992dd4a032a6dbad53bb71b1b47d3fd3de646466e46bbc8ff4bab9c5ccd05f6a754766c09743a450c8169cc4d4adfdb32b93e743c0613fedd27f5e0299687505ced40dbec57fe33d68c1ce0d700ed64f9193c0da22197db7d0e3886a2da542d32a40a6430407794ecddb2583d1a9dd04a5a6eee58251b8c395484707a40c88d14261c20b956db3c778e59c9ac68075174f596520d8f88f88e761c383bd88d4fb901f0961632a13e1d1e8f85392a2594141806288dfe2ba00979e090368106568878890f1326493551c0bc4d95042f7735d764d41b5249bee9ef14a0aabfea4a025b75ee251e747b9c4843482392fba64452e763dc0e27b19b286b99c53799ff7227a4a3ba09f5e5f7fb8cf07521418cf71de2c098f6ad0e2c0c33e4b24a976858ebf4ac460ffc16002dd5e956fa0455133e1461dd7f1f08d96c5e4bd74a8741980be2f951a173a2f69d7dd188e5ee8760fe74b151a6becd687caa138e0fa928f24834baa51636a89444696cd635a30c3161eb524bed80f0d1a80689ded7f9e0ee34e469b79a79325bbf107fc5d46112378a5b30874d55e313a0a546f07ca6d4d0da78608d891c5c79d39c1e9cfe170c863563ab72f6268d5920a4caad3b63f21008e2bb6a482cf7402515d1f95dd33c54e883c2593c255febdc3cf6b3877d697d8acbd2b816952a3087b9f0db15762356a007477e28705bff55cd187b30e4e9aef99fa692efd4498c594a21d26caba1372de4470b80feb7367d33cf61ba86841ae3e6b777b49b454e09efbd1c510ee9af882920945c6cd87aa52f029d833dd650b4be66b1d6fdd0c852673a245d34bb3b4d0cb357fe7dbe681563de35c40ae3255114b90e261e4e29d8030a7b677ed1a05794776ac21091ebfbcf82ccc3e85a27cb85ab2a21ff1dde69c5712697b95fe7b2509aa3c20321c610c7fb2e9b1587f55181e1497e29492f8792a479636bb3aa2a02c4ff22a2e34251f6b03e7ccc93b5a7813a6cabe5582d8931f3442ffc8596cb5eec8a272e2e58f09b433ec3f34167fbb989724562941a97560d17b67171f5cc88520d94b48d58f9edbf05953500c2134797450b7c7fd0392177636d629817fa315b64c7289850ccdaa28672c46eb99295388f4cf4db041a0d935815dad2333da5583f61d9a652a5fe7c9064fad3ff822e49c2c4668ad0762f671ae1ed90a5df603804753a32c53a79d8d78141182800ec60900b14a9541ab2ed982d4069432819d25ccec253d6ad2296f7b19fc9850cc2686f79678ab57568ef7465c7d16d10953be4cc3a6a4d840bbed3d89b51fe95e5327b429f11c0dbeb25b40937222959b1f1d6a465599f530485a3011f83a7839726a123b688b174617f0bc39f16dd0d6f27bdf08ea51da728b00b846a48c89a065b40d416e3dfa6768d986e5236ff5490e58f344743ec48ae5264f7b1d06e1635d97b2751f351c5e48824a5daad3684734118b7ce382e2da70b4209801e7fa74f0de1cde3a30f7688c089882705daf90f15a1045874145938d26e5a56b68b1432f54c196b3f4393f1943ef272b3c6505aa8f38343ad1aac8e44a7014c476fad02d099d95f1704bee39716d91715d585efc8e17848c9fa9f1d1ecbabf8e51e8d9409e038befdbd31804b5b635a2bde2e6d4b1e66f8ed677ef8d0e30df47a2766c1e469829654d49980295fa099f80fa4c9af76ee413ee153698c703a5d2fa6e5fc056e499f407dac9575f6622316c1d3d2eb5ff003be1ecf9d4fde3cf298cb22333fa978d017b8399032c77d6635f8e9bc8540cc5b5e0efd0e5a90c743299df2402b19da9f3113c07710cb1212e2a3ae849f3fea6fab8a6118c32d48ccac5326249f9a61df02cb95ea05d3d1886f1d2b06486a7e0b2cb3980749eeacae85b63bd38b791c609dd1ad6d2a8f7e02d8933a197606ccbdf69a77a00164f54b295849488bf066d0e35f6c1a54f3444fdaaf375eb688cdf1f5f9f071c210c5453fec3748b3d849b0385d5c7995c5a0dd7a7cd912bc037a707d534a37815c30ec8d1222748e0641745bb0855274b942031f25958ac73ce53586313d12da22aab47f81d7bcda521da0d81906d651f05d0db89f5cb02349432fba3887e7d1600a7abf12b63df4b78897ab7ad0758a76664f2c69602c0a8ce11061dc76f2fc6757011487a850bb288808632c7bf43a564d61cfeecbbd750a5355ff75f53e3bf8102f0e22c08970328fc7f90d3c582f87c7858e04774f2b334576e628d610586fed20ebd3d3c80f3ccf13a77f2b75c037ce22dec85e5b7d99f9c5ba6189290f5e3bbe1cf67a07273182e944bdcc8c435c3505cd8d35334e6a5d90af6c5a7900c5207022b776a108d58906e7b0d915c02b264e8b7ea9ea7583c4f1bf1af05c84f0681fe3839374a98201fe281f805f4ca8af9ba6508959ff1aa66ad79c712109574dfc8f43c51aaa36c5dd0dec5c7d0dc511c44c3413ee4582bde6c7641d1d1b2bead128ab53f9029fb12ed9fd57c6c06b2ef32b9bf4d6512a635c5261907d008358ef7262d9c23777354baf4ca80449ad9a28ff57d8eeeec686161cb2bcf965b5331a64df12a2353f5ecc1fa507621e447b1b4da7512a3ee45d2749d200983c0d5083b491030bccf2bb1d282db6c14d5f5926eb17158103112dd8ad41e1a9faca76e8056419ccd8f1bb27b9c94b20f79b35c075d258ce82537d092bbaff6d9000d4d8e379e98a41e4dd728aa6e7e87a5eae3910ece8102bd971b59c3e15636d2def2a5d2d1746f33846ecb0bc40bfd1af0d75405e121161deedbc42b4214a1381caca166fa514060fffdbec37d615280e6afc30d9de59e3931038331bd6c9a3b2ea9c6d96fac8eb2c5b6a272caa407f3c75066c465e20c352785c1886c488aa71a1fd837dee3fb98ee38c86f775adc46e6a428f149fdd1adf55669d680148c47f80fb3ba2de0627ad707b6c0bafd6250cb7e12c4e3cc53d15d3132241f86aadbd4571a4d3eb3dafa2aa74c7e87f7fbb23eb66f25bd321c284b7cd136286b14390e9110b6d650afbd7459b515a8abd2f5449a26831f7f953f931b07ef4a45c4a3608478f14be098b59e36984e9a29420c614aa04c911fe94dcaff01020c2782d8870e5665a3aa8917671b182ec539a0fa26ad5b7843431d6262e390aef4ebc5bfb29a12a81cc9cc67d35783e2dce4c6cb15c06fd7aa1b5c3a68da6131feec01965a8919d3744de3abc153419521f4a7f513fbfdedd1eb6c76e86d9508ea4047a8641c9a5c9addf04d490fd082e6465234da8554ec7802471a60d85ab12b1db7ab9fdb5f7ebf834e8062006be1bb336fc0a03a97d914c1f3e891db9bfa2dc71ce6626afea31a1144139feddd9d7bd18bbfcbd322623be5059654a1d673ef2b7c7e1dba2c9ae8beab0637c7a12d90d5588a93368f60fc2b6f8e90b692433dba09bb0bef329ef1adb2e66fa4f7a495c651f7ec264128ccb4d09c186f58b5b1c368d1cdc77fb9c736ff1e61392ecb46ccb9086cd171fbdbdd8f2a505c64d37b25d865cd7aff310d0cbedcc1141e9d7f93b1a0e2855f817bf8b9c23ea8d4d1f25d8af3c72284ba1149cc0ad881c1675fcd823967f47f4eabb4ecc12b067e65fdeece2c575fe8efbd869420ceb8971e3465742f15c13e13e6ccfa201aecedf92a80242456b20d47016c47d0f1eb9ca9a2ef3a5fa870c583caeffc881cd538d722ee75bd40fd00ff1f1de7d95314905736c6dcaae4a3c78961e9f34de3114ca82474827dfa0a05ea3838fe1c0df82d031e3c18efbb6ec9481b3adbb56369219ced716fe33f8865df3cc8617817c466619d6db6c4f9094c1f1549805eeb6b0f350406c83c1e2d377f144bda6ede83285ad0b2870d0f776c17926a3cbaab711782e5e1aa9cf72b8bd19c9fc1bb14364a01a7d0c688881e686209d14249c882f09972ce9eff0dcda5c174693f7fe86a25627622b2ac417e851d4787f14e208de778a74a05036a52bddd5e220217800cf80551591862649444528e035ddfe59d44ad6bf6985f61af852c2af5a450a10ba16683d753b911ff9ca27a1ea5e2592f88a7fc75ee345941cfafdeb5b96560e84d7f757c6f6ce3e5c07e9abf8763c7ed030014e58c75806269bd49ef6dd78a7be999db4e733a9bb6cb5eecde787e5d10768ca792b988fa9e8b12562907e3d7496c527d57f41a33f907b51e0616155df92f5f51fdb6da06c992f7f0958689125bd1f71d950250773259739d6c03aff0f84942150da9a7e90a56909894aa6c67228c54a41ed37aebe189314bfb75cc68f826677f88a9f4cf47265514235676ae59fccf914d59f6d4ad96411c75eb8756e87620fd4425be49dae320c18d0b028f00967d492e6b412b4ae9cfad64b02db0701a08cd8c7299f92c0fc5f008e5799b88e6ed6021e6fa16924b68f04118dd5093befa88ec6e0ffa0ffadf2c386f7e14474f6a3e18ebefadb2b6a9d3628d7414a526d698952c6580a96c45ab34d8f3f2060fea0b32e0baab4beb4834b15f758b115185b893b165703351efd5fcfafbb331a10a81e44f6dfb86a7c3a769c8274dfd0729912e847efa652ee6369d9875bc39bd7a988f4e2245aeec63d1a60d84ddd7185d322c15d5cf2446106be1ab358b52324b14dc94a4abc71965bd32868a506e5bc8c1daf4eecb204d1bb3e1bedf575c726c85f732089932af2f33af70db7590936ad6bbe299f402bb59a978a0ddec5d47a07bd1fd06508525239d178d636f4e277b1c6ff2f7bd262b1e3c4ce8997dea58958d28557a8752e21151f0c7572f449e02dd183534912bf526a3304ac082f6a48f8431d082c9a494027a479f1770df5ddebb272dfb9b06d4db67bfcc43a68cc7b3f93a9b0e4673cfaad0148e225f6d70f35f771de53e38efaa75923bfeb76ee00ea0a34bd68876049c476c3f82987c2cec920c5b70c08628af76fd1a73fa1457d8d18ab3737d30a5fd812deeef37f461ddcc8ca72f000a8a46d4c24f158053a129ea289ba7ad0e89b4a2206da9c6897102eb569606ca35521317309aff324b3b9e332de07754b4e7c0a44f9364377eefad0300c9fb271788a1ea1f7c531d9d729f33961626ec54067789b0a3ab96b4430257a5eb37b8ff5ade4263d5a11d395bca7049b11185c246117654c2d45b10db7bd923dcda6eca598c3f6f191bc6b24bc7c34fd85784cb909d5209a7ce0ce8f03d053c0a0899804c949340fcd842d6183f987f19bb7c6d2e828532f4b2b2a7c7e8d2b2f2cb61f6f0597da89407ced5152406dbe83fed925f3754bac7ab161f7f265486c07671d35a3d99a532090d457cf4492e5ab949d91fbdf524b9f2617fa473c9c36071e7f7adc31b27565c8465843de952f29a7becf17e02757164ab168a283a59b61f4c16c5ac1078d9687c707052ed9eaca01a571b9dd4e38390aec15cd480b69d5e5efe852e90a3a2b0f780efa854faf1516fac78ff4da89ab875c881c65af44c74af51881e9a0e0027a06103816c8e6f278fb2c95a98cda4be62d44792aa864dc75cc861d095f8a194f7bc5338dd0bc4b3278880b27089d5594682b35bc5e3b13b8cfcae10c68bce5b60996b09ec82ffecf8e4754b4a10799e3b9beaccd05893bc8a91233bd1c200c0b25f6ce851f59405dc862415b323873d253bbeea751667f503ede73d3803cfe038391a7beb0a065346a1c8d1eca22a61b152af0f6e0fc0640a2d8a321212f445a4f905297e8fa98023854ff7cb5e698cda2a0d11f8b2a71631124947ed2a2a04027bfc4f6714b8683413a2b023944d1b6c1bd537a5103edc54d02aa7e03e04990ba4d9a0a74f3e2a70afcf4d2c8a6721b3bbdce6592ca466a810647f176cd9109cacdd35cf6334272a2f06e4d6678c8f1b88dea71761e09bf241aa6b01d567a990f326b00cf08d808c59c98a8a2536abf3c2b259bbe203f86ced6634610345667ec1365c27a6f12043e16877603ad4795a90f8313478ad54ea1b371f04e0958fe0cfdafface0aaf1c309fd533c9012f17875d6b833116ac41f47d0fb37bdd3f44e4a81569bb1dd1cf13f353f7cc0f7a8ba9ed91652983a460b167b035b778e776c6a20d667956d035a592db3455ca3a0ce6a76b71906e72b782fef66627180aa799b175e5a10abc206f13c0d846aeaa4a6434dc8ed37457e0bbf3e5a8ced8519df4e5db47de0f5fc59a5e1b5b90f975aecee1b80cbb98aa59f4189c461050cec2186970bed954cbec11484424403f1d8b034a40569e7e3bb2d3a8e309ffc0dadbe1be80f873d6b48fbc3cf210fc9db685bec316dc0e4706eead2d7538c179dc409122409987a322e97375a33126aa7de562aec688a57bd12370022152ffaca0bdd15ee532aba0f039efba421c9027637169e4cdf88c86f09975d5da4f54909f651f829b924a43c9bf395894b3496018071ee4b67d603a40b429d60601d46a48712f97e54491e6e63892116492d9c82f728a438796d9f85d8a10b7c4335632424cbc10e5e758fc54ea5cc7104bb12e82cbcb0b4270900df192d63428548665f3e305b1d02512acb7d10a2a49b26b8b86b2ca42c56c7dc4119fc92578f8c2605048cebb213090ae97754425fe2537975cfe892f6244b3ed32013eaa7b1c777a3f62a141749d6d55b846c4fc241646c117bcf2a799083734486035bcd73ff1e0b47a0e96571433b696719f87278ef0f270383a073f09982fb62ce6aa2d98eff42b6ee3985c254cb3bc13c2e004cd473edfbe93ce4453cb74a8e5c947808884c9ee8e8e38b7da65fdb6d6d7a59fb453bda35d3aa8822c268ebe8d5c15a6ff1cfb3eaa56780aebdad334aadc924e8832d34b0fa17a70bad5756d9e36b38b3c1da5e6c7dbe44f9788249db42df289003a0ae14f2457331e02bab1a669377a87bcda0f79317661f6806427b51afcc5af335aa724c2cd0fb79cbf0a0978f2886215ef4ea38479a08c71c477f33f7a61250488e8737e061d3426c0279d85664adab1a5783ecbcb3e850216dd61b3e8b67b95aada900292002baaafad2f26f3e97251f50ae44a7fcb7f7626311e5876dab56ab0223c1f902e01267256a778dea20e5c290dbe84c927f33a64496005a106ea93481fdc905a004e2a4d270857483a5ee652680a682d1ef203da0fa2afc5069e2a2d4bde1de7876ae529b95df6dc55e0ea1c525a01f3074a66649297d193ec62016be2850130500292abd750316278315d6426ee00cd581e91a8d816ad004dca84bf60e309e3ff1d1d601933b8900c86ae4881f5dc56310b901dda50de53755e39e21647c90c6107ae497b7d230b52fead67a8174fd77c3bfdee53de79ab0efbf80bd5334db49fb6453d0b4f0f7a7d3bbf46a8d39ef343b7bbb0df14ab1ed1affbb2229a6b92c978de91ee20725a7a9dcf0815102ca2f54117ee252f6bb5ab097cd96dee7e8a986200bf0f8c287235a5039b9db7a52b05bff0bbe0a368b965d3a302fcf692096be4feac3447b2d049e4b9badebaf5cab1d40486675e3bc26ec208bb47c7e73294a18ae932075b3643e530379536e917c31166d7bff19fe8c0db478348ad23d77b90a30fd7e8051d69a13292e3934480e0541b6c4946fe151a12111df25a20f2e56b7eb62ce13b497dcfd624da8abada936418259a760a29bc91a487b980ac0bcf124afe9e462e362bfe131a0fd104dfe8a3bd19b35eb00afed5e839d0be6bdb57a3d092c9afdd1de44d55971d9fd2247ccd18aae173ad38270b5e03fa07bb0bd63cd49ff29b81a46eb0034e186863d115886231034a0e1a9f10fe70159d323a28beb4c4368d8712466ebca58c805c8ad8afcc01d4d9f426c053fc59bee15e8aa6111a458c5084d23688cfe1518b489f5efa762051c6c7a0fa7248bb7eca953936a8a6fd4a9f7a60150fb87907dd491b82773eb77bbf1ca8b20a1f079bb4fca0ea450cf83cafbfd2138ad8e3fffde18f4453b5fe6a955be2ad9b18f07da021b66e1b79fa29bc448344e8a94786f78f45b10b6187b8bef56aba173913e6bb30cd9626df77e450a16b514ac9cc0a6e33b7d23cca4d750abd525a72e947429fa2e2ae04d7d9dcbfff223247c002a2e5d121d65e83af7c03c2478bff4e4ed9d652e3e7bab9129c021fcbb887ce9db51c52dc3070cfc0a4117cdc6711a118acc7135895811d75d63cda585f8ce761e4dd7bd7a16ec7d4c8baf0fd255230aa471cd5a1c19cfd259a3480f678b6bf84b185f5740ad124daa78d993c3b3abf7a2246338efc2d441f4996fafe1953384c154e4d5b4beda589a955cba2c2d23628858ec71cfa63c49c7d6b98405013ffd470170abed81903fd0f374c4c16683e159419ec90c01345df41305233857f9751db0a5435dcf039fd31db41be707798657fe65f666e5432195def9d0158a051ecb33038a7ebcaf69ccaef8bbe7321980514407b66e4b3d52538796b0336dec9247b0d589743fb25d716ea007e5c412d1095b6490cefafa645216d3bf4a0ed1f030865c1facbfb6ac2c7a670144177003aa881e962ecf4bdc21964cfb631f054340a557f637a105817f4101189d5c557976ca4886315dd1848c396710549149d14ef7c886ecae403685262aae23f3ebfb6f7f5b9d81f2a823a632e230221f13ea91a239f83112ecbd715a06eef4d1af66fcee394cbb9decd7a42e3d0389519cb9500180f0863c196359b458e7da20ec84845ce0f94dfbabd7df647162d8e8e53453f1e321bf8116ab852abb730402d6ab29eeef634d2f3586441daaf80cc42e5c27c1aa4e9a0b999e19e17e27d468942e65dfdd45370cf483ba8a0da65206a655676b5474fd2a410b3f4ad7189218b59e8bb6c8fcde2ac2ac4298feb554bed4da27cd7ce82fcb36f294fe8ef22586afb2f94568c255ab3ef0720c6070ae09fac53744ca7a30a1712c91d632dddba33038185b6028f62a8645fde3155d8cee4d04efdc5d6aa10e37f43ce93e8ce8b6dd4311863d77d59f2aed4de8c01ab9be011059cad19787ce2ce4b931eebed0ba1e51234679bf43776f1847a4947f68c9d4322f14ad7a67745b129bd1d56e8204649f9f481dd19c0852f7da2b658163f1693d701845092ab35886f471bb4ecae14464acd68c3b632c4c42f96a067fafe4ddb7890cc79828f07883a499b55c6f42a4ad3f748a7c240a2c9b2433977dbb966aafd6883ea12069549503fdb640bcd48d39ef8042561f9b3db20b0bdde1286c4a7e67c1d6af563a7b151ee5fcb095b9b02bafa460aebad75fb501712ca689e570d72685b22a0e15ee41f03a67856430c99ee2ce71e58710d0f93eaf6d11b0843032a9dca21d6b7e4e7d516c61df798d40d678781ddc454bc6d51539087fc29d53c0f1ee1238fd4145503257f35f1c6486364c9a0b1e55d75ed0e2e3cfaae093d51e8ae21e056e65decd7b5c6558392f66e9d6fd67dcb42b75ff1935dc63aef2956d726b0a2edfd6fdbf40ed947a7063ec5cb2ae24c2b61a817dc6f6b82911b8a6d5daf74e96d653cd0d9a9c97cc3b1e087677bff1dce12f597a79eeb457b8d31c642440b13492dd50dd5a6c1c6941560e8d0dc367a1392e31ea2401e86e038252b05615e4238f398605455a758b85f7189de7b36a1f8000e7c771650771f6216957c913bf951c8617a3c758500f7da7c9e508a141bd5b7c77487d3bcca9b59a88807420c60987fa955ac713d95a27ceb4fa42ea9a9aee401687fa5ba51b1e1fa361ad710fc69247eb70c4424bd0e8ce3268ea8ee70daded60c7576ffd3ee95f7ca9ef5a5856c63d8598275bb010b37f03280677c4f2bbb693a8abcdf75273c67290f65f1252a34960c15ae905dbbea81615dec120e47aee3e46569b3aee6a6f1cb810f52eda3636331aca82ce156b48058b6bf1db029f6c88b0365cf5266c420b62ce2203274a2ff4cb818e5b42df063c2025a234d2c90fbb9dc8ce59eadbbbae102f7dd53a0ab34b5581ae64863ca2045713052cc484ec9457a948e77a4729fb360f413f28b58961cb5f2072d0a035eb564a5d46f98f2c9fedacd6575985c4739680d96ae3c817204188608ee01210dc17987fbfdd51af773c8a1690f1547ff7455f34ccac609125f29a02909620669d5d88fab97bfec335084e3bc8bf3516d5f3ee481cf48865dd4d0c06c924835510c16187048f44a95238243fe04e527ed047ccdc06dad2d550c843f4190c49e4ab33b0f21936de4104ffcd90df4b8e89244a3bd061c4bd1e71fca4b43c2652f157dfd0678de12bcfdb08eff6bf2beaeb7222558ced86a44c915f7c88f92be7a790b394285f9a0414ae881b5a545cb3dcb43f391abb047ad24cd7d0edfd239247cfdd88e51d554ac6d1f549ea62c1dd5f734e78bfea64c0066e23be353024ad6ed8f46ac92503d54db6ef6706b39deb8374e72167b1edd58e06d8f80d1822bb1eb423189add967817cd5e99e580aa8fe5c97ab9442beb4521f96042a7bd50815d363345fc43c98e831e513e71571e0abe9d4ca38d6f94657c19430d53f57c383d3b119467144c379be952e07f4f6c53145d1f06721c8c47c379ac4377487033720f9ad92b736fd64e1053bf3443c09ef5be8dabee54568fadabe7fb60ff6f093ac69538aeba3d91aaf03ff17f8899a16330e5d8506af93f3c021ac8b815f7b08758e643963a6fcc85d8c345903f97ed238cdf42c167c4cf955734dcbfed5b39dc53b4aa824613c5469073318ba5e87004307cb3792703ba711dd581136a8b543a5caa516eb1ab3abf6ea9062ca08831250c7b5d1b5144e7c99f013fd33187e9478bf8e1ce827806d7a13590554362ff78b5f79154f521f84bdb523358b82c83a3d7efae71539081fe27bc2ef7503c475df9ca2eae96c03ee18d228ebb09892f0e18b6dc6b50b895b3ee67290ef7e3b311bb85a2b89ff3a2cef6a5266fd8018dd08569919bccdd07f964308e7e1a890e5000fd77973f1c93d0b4c421b3c9d13a9bf084dd64ef8a6c2b75045e84da01ffa580471d282bb19b47a21c72ccd417db5ace716197201e8ba0104bf283103667f1dbf1b7962de4c95df4fa4b45bd6ee6ca00f78863539d3ce8d893264c41bc741e124a89e45901a1c8aef4c10cc1ea978264ee4b2dee1b41d0f97a9d3f327372c1887ee9f00ec51cf90e2d8861fdad66f31f76fe11cc75754b3249963198fb1ac7135d9b8e9d7d568bd5b970a5ecd881a5c177dbf7685a129ae5f7c5fe02f1c461fafaef843cee6862597192451f70c1f19b80d65c6072d36fdc0a405cda10b57c9fa48a36cb4f7abeab3e39d95d842aca71895d8dff64999602aef6b1882c220fdf8abf0958bbb0442d1b9b3775c617a61c139a8c6e69ea8a0500abf3f120585fbd60adbfa6ca392df729cbdb85a6c765938c958468d304054bfd45b9a9a29e31f02cd51442873c8496ad99d45c4bc2ec67adea90759279e10e581d9792747384759d5d006452a44687a32569567bce2bf4a90a66237b1929f69fba8c0611bc6007afd421e517ba206670daca392a1574a5f5844abeeae24f97f9051bb0d5be5ab961f032528e85becf5e4682131e4318e67c466d912bc27659d2db5ba5d29b557afa680e7e955a44e761956dfee2fe3dbef7806b6b824fa42c082fcb447042d1d0eedb0393008e484ed930a9e610f27018629aaa80148b635d832bf08de4ed9e1355eb6b719890b46a132a1a91000dc08c7166022be3b8266068ea71b9e56f49497d22e3a7775d8463f267ce3600e01263dc200a855f9bfa48b58e135dee762b1ea98259548d24d55eef1eb5f6fb85a7bd1d8f8458565e7fbf9ed277e7c360c16c09110025d1678db96cffd0ebdf7a8073c0d1ded14506bf63323a22be2cd32e3b6f58eb09b7cdc19964f07b1a2cd2e2a25440f8c8da4ca615953f858c6d16b4d7b7c13a515cb3979749cf77fda3e8f5d9a4c5765211055a7864da763e25d792843b3cd8b3dbdc6c7905a395ee291c7a06de3a3e99d1ed48f0f19021439b3e329411b8e3783df64e206c3c73c37b34d81a5e71e4c46e06a818b6ab96c58cad7a3418cc3accc3fd45d9048404f20e88c2821814c2cb33e48142c358685128b84d3948fec522ed9b59ff4feb3f3f93de522114cc04dba36586745286642eecb62e1e6522133a0545294cd4f02bae5583c32c5da12106ff130cc222ead07958900d38bf22ffd7b2fafdfacfa52ed9b307ebddf32de2c201537d0f646108cd537ff8327b0ce212ce017df45d9caf0ecde48934b255b8fb3d737f5116cd86dcd40e600709f114fdff93706a798ef00bfb223e1d93e6586cb0e053833701d41626b5e317d3023a046d2bb17dea8a652993537da14acee4a03807035263ab18887cd613b6665aa8bef294d967d02a7cd3b6f8a56abfbc175e68b02776fe1f760cd8e561e41ade378b7d62a92ed647d8c2d0d6a67ee594b76a0a21430e6e5653dc96173c019bcb2188edc49136f0e29b945b5d7a055e290aa714a31726b25ebe0fc9198e32767465819745ffa0a17fba2377d02fd479e3fd7644f6107e799c8f8b696db6d97ab201440da4d36fe5a3556c754102b3470b018789359761dd62880a605cc0c824628bafb3cb2568bcdd5b672403e050a9bd51086703ba79aa152085081a6077b3b7287c69a7cf71d957b1f321b044689d79294371695b41fa4638a7871471d84520155500b5de581c2d6038598858099a19b30d51f201328354eacccabbf155a32c7e00eb9db9ed6bf175f420987fcb5421f08702bc5b4e70ad00b48f8daa8c67e8e2ef3d5c4dd057d80a691c622aca978ae80cc1502ada40384ca92d0b1baa42259a66eff3dc2956bd57fbb99564e2920b58bb14d16e4193eb49c0bee307f47a9ddba41d40cfcb6e192fbb576edee5b42eddf4d4c6cb989c2ea03f7f23c1d4bad8b7e5762ec256dc185ee80e9f93adcf9d0509b8db51b969c2502978da5040de2daa7a290c182a0afb569dfb2cc2589b9a8fbec6d767bc4a63e7735087e6bbc86f810be13598c416fa8fc7f015a3da329845faf3398c086d5e568816c161b24d85f45970043eb1e09318fde345bad001903d33aab64ef6dc61eed25815dba0f3f00ef05d05ad03d6ffa689ba0b1657a732c4283f4a121a16a88f8b53d217cfae526d69c7ef9da121789a070a42047113da3874bde1d10b9879def05b8655412ffbf2d46dee8970d9d1affc39f0a76f18bcbde3070800fef0cd81ca5a9c68b6f3e51d30454d1e3b2be9b3401bbecd21e3b7c17f760f99eb924ead95d3a119db2278c43df2bb544784dbfa725dcb7dfc3a2452915ad52bef484be674add817d87e2469f54cf2a7f56948d12afe9cde3fb63d36a9bbf08a3f7c48c6b53ba78b5518bdbe9e0c5cac0b414f42a8d907d82b500138143508de6453ef9837ea016a416389b99336e67d6d211f9f4d4951d97a8c59115c45856f00c4fb8536b6dedd856a11d006500363dd059577d1021f95c5f0cf6a829154ff6c8ff582118dcbb66083302a7a314b9377dff7f90a1d02c7db77a2038915a69466fd3c9345106b83f1f272d355bf748de349b47384f4ed7e1b556224fb9ad2efc8dc01291cae7d84e64307bac7fdeedecde6ea3746e18d354ccba6c95ccc7c4ba718da02c8f4ba0f7111b18a143763ab7b0be31dda92b706cdabc4c70dd09e96c54aa7e79f7c1973e4b659182414e022b8d90b33734f02e17cae9802bbb8425c357d3edf0409acd2bba9fb08ff94558304e57adca1b49abf54fd931c2f97fa2e2bad7c805e88f0e8f8ac4bf4cd4143519336f51d82036a3d51cc513f48ca1c6ac5dba5b959690a5c8824b8af7d928f49726bd2ecf87e5e48ec4629bf822894aba13394e7b1f88afc7a26886d326b1ac25b6c4a207ba9d1f077b959db92f765ca337757fdae670ceaccdfc6406dd1ac96dbfbd59f082d3285149028dadcc6bc3ee647ebe566bbb44d0d0aba10079f09e0b6e4990e223fbb5a10b476e637911a40b910f7f42a21a38be16b329d356d8f8e08f5c5deb6e48d4d858fbb07fcaf88ae954fef33ced9203eb01f6b9e7c8b4d79f907ba2b5fac34a523637b57c8dc6f2a186acd80b02d83fc410efe54bd3757997e2ac53fce161342b23d276ea87bc861a01c6deea0400d6850f0b67a095669c98d71cb1990fd1d2410b488a420ac66e87bd5b22702142726bdf163d121eb42b55a23970bd175488f98305c70e0f5f1aed8ad5ce1c9fc4ef0587eef18a61f3e3a296a7e6362906962f64fe0b04e690c5121d61c6fb8d6e75e73d6138e0d5f61ad2816ec7c6404006e6ff4aa30b40e49eaf90d286a3736b6682b9e7274c3bfbf790714fa7dc2b236c35c2734ada6bd6c7d63bc4c4d63db89ef0a3eb6f97b77f29a7e6423a2e42aacaf80585c8f7d9550fc00b62e3b19558056f8f59aff7fe790ccff9d988b917ed8f9be3c0ee1fef41f26f59b98f694a14e9363460164940889eaf42866a841dd6df9e16d181121d985de410e12af58079b5370074493fa9d402d2c383d058bef81c1a2c3704ddd55812a98e2b461114e42cdf202c02878946e75c3a5a4d98026aa0236868de75adb3e0bdd64cac52d9915f2aed2ee0e97efdea1be8c5ec6e844f04e3f3a45a63cdc5bbaffbf164cfc64a73381d2606e03eda0c8a268bfe31700552a2217c532f669650c63763ba3dd266ab6aa369e33db548a1339bd2bc9102a6342a68a468e02fe19181a5829a494d989b6fccd608e792a94a89cf5f04b3c4fb4c407fb3fe380e4960823bc1f43c0b9bb82600cdd24bfa9da1f7c79c7b9a8f9052c6fb82aeff52db2b82ebb72c84923bafb6fb9afd24f0e18e38faf9b9bedcfe64fd18be10b3f5af865ce4dde9b7c0ba71d2cc4d1b5f42f8a1bbf669e51c9419949ff2f4d9e678c9d807a6b89e55b1be6328d6e2df1da92fa925ada840db08cab2a76f9d7602d020eb8945e67e95ca9d518893fc7381740cfc4e5e0f3198a1855564eb072e9d5f6db8586f12fdef9dee664c76c68bb8b5da460282cf9a255f47bd32e1278685a2725892287fc77609de61e65caba0b85c64c06d5f379b705f3fca32652f63e7153ac46de4c300ec98b987a29a853d93dfb08281e40052c787ec0cad069d683e7403f88db3e6739b227916c673517752928c70bb41194f5b3f1e2cfee836a0e1dda3b410b0326d1ea496f4904198436d9217d8e1e65f63e01d8e084653454a02188ade40c7dfa221acdd928932ded2a87e73af4031869e93637c2c08e174d88da69eb79072347fff8ac4e6559b4172daa101fa8f3e035ebed5b8273dba8707b5f3917510db7c9e5ab20685739eaaeee1b5752ce83578e0be71a6d1fe89f54a9c245c61acfda0edb0acd8e47912b5b88c24c440e95bdd12ac743cab01b3296a6a02575904cfdf57513c315a2df125dee3493d8f0a2070561dc1ada83e7596c376a322372bdc92af724514cf53c35a0f722c5c7c3f36c9a30abb19af6f79904125e95349f66d7cba57349371f2d1afa01dac6df511d70d8b01524d4d49ee8e38223ef484abd22d59182fac418cc72dc5980e28b535abea44d7f4cdaac4a96c0d0326c138c77f6df8eb9f5155a65a9bb8ea7b1b76ac50e90198a20f2a7125f83e1885a8e2625939a02973a7026fbd7718c8f999d4464c7542f86c3e5898ee8ebe6b1903e384d56dc3213dd3305902992217d59cf33d3650d9ce55f1c02f4b35fdb967a8ddbba32abf3cf7e86748d6b739bc58761fcac0225e55fcf6b79627888a7b5c822c97ab266fc2f66880dadef94365260db923fe98c3d79daa256319103e85e3e78937b6f0d2689126a6b3dd74b70f0cb7ecd3811f496ff6b69080fcafd1e6efce48b1e53bfe9fa048e09319131e5ffe9cb3f4a1c7623703404c0bc76851462011bd48629ddd1985937e4da61614f4b641958f0434e27fa83338b5b4f7ff492263a97a9834ca2d57d2523551edacc6ea74971b43c54426407b40b3bc97b1c1735b01623aa14e2a8832ed08522baa6fb934c875099453bd3791149686d7cf1c83c365f9df8457d2b2e810d885f3e2d3752eb1f9d377bb1f4175b687f7620aab57ae32dd25f1c6d6fcc82a08d6705c3c6247456f260769ccbf04b006b74b330da191a089a8fee4395a8d45caa452228455c27301975a3c96132f4337a3d60d3b061e4d643dc7bb3fa851fedbdb035c2728dc629f0556e1e28752e7d11dfef08fd697de76f829be7c505bf09a5cc1484bedcf5b41bf4c3a2d8a18351043cd6791712043e5644a1cd1a2978c2f31180e6831b056a64c9e1ae42e91060d37a3a4033a914f7b80edc9619063d66d876bbe55bd6d3a20550c8d433e9137c8833b2785c0ac30186adba68823f0e2c521ff7aa5eee4bb5250c2b282ce9b54707d6e728b0aa9105339494a3d79748a9e105b758eef7f7e8aafacce33fe1c67f19fe594667ab643a712d6e5510ca991981997a5eec8be060e62af04c41c3a61e95023590872d5bb82621fad1f8c6817473c1f9caa0a7096007d808d58ec7d4d09d5fc3d1956b27f8ea93e3f40b874b55309d21527571764cd67aee0e5a9d5f9767e5ce7441c5102167e9a9ca84b8a5e3687c273c5c74867c40177a73ddd3c7aee85310f2660559470b4aa4a0d981b320d7b16946ae458315c9fcef63e625deccf7882709f2ed528c0bdfe11db9584eb8b9ff5bfc93bd16e9a7ef740046c8332d2e50dab1f42c153086e87a7a2a3b6fe9d520e04c7d8e0328ac4fa0b801b4e86ff61eb0adff7d0984e95875f1cb0e14e3f9545c80951bad6cc96cb0a528332200b101953981b3a6f8663f87624cbc52d5f7dbfc450e95d222072fe5ccf62604772472c3f306e29d7f4a06000e786acbc86c6b2dec1d6cb6cb09eb5b85c4d042458c962e9bf0fbaf08f38731991de89c87121f38853d071befbdb2694ca8a8c41b810e251b23eaa97fb5c946ffbb17dc9504b80ef3ab7ceede08b551ffb7b37f04a374b055b6c6a77a0a73c88a01b391b3d51f8e1bf580447e909639be6cf492582a78d20a2bb207e93f7c0f7b9fcfe882f2a9cb6c279d64133585aa6db2982dd0aab9c4799780aab5c3c3173e2b418ab1d57d782b5397345b5880a6676fa5d316fa02f19c4d1c91d81ae4a3e3b8e918c9501d5d4ed53da4f041852d16cfc1183bfe057d477523f0253ea21828439e5eb8181df81cd0548e7e3d267f4182dc0ec30ca1d8a953a6e2a3f25b5bfad6148cb2bf5b7095a8fccf5032b7f675d91de28137eb655c68c799966652e2b10eea6abde514fac994539869c5719e7eaac214cd6ce74eb65ae7b6f4b5f3bc72ab32ea45f1f5d5181dbcafb60be52f54861fcc88dc0cedec9e92cbca696c5695e1c51cea94a17c439c5ef2125546d106a4335b198aaf8d71d84a5f2c98e5bb323caec44d2fefa96168317df0031da572321c72540ea3c97075701b7f23ab5e254b4c50bdd10cace0db7034242dfcb07c40269a84559accf0dd109e4c557b69abd2c684078f52fa3d9fbb3a5277c9e982b737da67ba0d8eb6deb9216c85631285810de3959ee457f3d85b16d7ed49334357a6b598196492502a1a4f21bcf46ad14852d4ffd2d05b633998a42d64cdf78bc8cbbd1b605b23d8ad2df186fea698b2f975dc9466a0ee1b24d17d065800f6157e1083e38d7011c7531c63d77a49a094001642a19595e7ec88f8e4fbca8ce1db4111b4ed0c394d03e01eb29cf44df60758954a033c534b793aedcba1d9931603de027ddc41b075c57e3a0a3d5abf645533cd1a82c4602a5cd344a3515a9dce464945fd5a8ee75a68cfd65520a29cef415d12793aa7bf11f5e58bdb73277cef505002dd6ddb2906661748871f465f287c688d650b612b93b845529ae046bbb347dd8c7c3627b4282147088286b9977c2704a73f605dfb7726892c7576ae142516cfc9511e1763444de94f47657b6a5e2718130895dd9dd8685e15bfe1ae4e2e6a24a2da81c74b0d00a74dfd48a6fe5145381243d3115610d0ccee6c42c4f30a570ff3edc36ed3795c87e76bef574454668db76c55b7c0a62ff06f69bf46021439e64518a7ae2aea8ee87ed3b3217155367612078a5ea319298db602bf12982dc00eee0483aebd93c2674a9fdfa81acdbca57df525fa23d75dd16f1c04b24c07a352115762850a74d2f42ad81055dab58efd64bab150c7aacc97c04f50c49a4311b053bcfa97b50ea6166066c8ba9c673f96e8f855725a836e19007afa8354b4a5b8c39ad3e11e909ce497742b7d6ed9cdeefebb65970c00fe78d7e86445f22aa20bfc0155a122e09825816022b1ddb7bb94d76df6321f6a501a7b49c4d980ec64abf839c6f1a8ab233b0333094c7f0b3ec6db57bbecc1a1ed897bcd538123d1b4b809c2ac3159c0940a9ae471fb525c2cdb0ac7ca32fcc63fd38d4437ac6d74c654fc5171e9e23b52dc87d8e8d0e339b726e98fb5a334bc878c303944e93536cd519363cd4c47aabdfcbbf003f9e694e35011161ba8e6e9f095e25026ae8d9ef4e56c30f8cdee9694823967b9cd07e87959632926eee823c58760d2a77ca37edc95da657563837cebd3438f3b7cb50ea5766aff314e26381bda356f6ab440986c225d004407f9e14ba67705f86ce1888650ebfcc76fad5bd032612e90980e99db1ff6772bfbe46498ce04c474cb84ba3e5c3ff11c9a1001cec8b8f1ca7382f324879db12eb382074dae4612287b33ee778d2501e18b77f88454d9396965706b10aa7dd089b23beb2fe77b5e438b7041672d940b4bc49e506b5b703db9f42303d01d0fd1e18a3aa4fb09e5e21a8ca8235d2514f92deabfcc74b4b9088c5677f62556d6f04c3eab5c56fadf5a6c31a72a222ab50f6bed7d876f6da4ed5ef8b7df92acf4f727e571864324d8f573b78d1cc9962ee6c91642e0fbcfc1c34b5aac01acb1d927064a43d0b46b18383943ce5b346024581da3ec3404240b8c3f9af6febe8753725148dc8ad01c794854219adadf4b9a784a0c7a442f3598a363010f961b59cd99657acf14bb41a169e0e7ce39c1cc4e1c7b3d90689ac7e73268922fccca5da72b96ebddba59ff0d225cd4386ecb811da68f18b9bbff89df88009fb9069a6e59550f63ed15fd62fbdb248455e3a4cc0f0a63859c0dcdb5f7047d72f0bf250e388f32b65731897b00db08397a5309376ce084dbd916a1a4cb9234431c9fd27c415acab30d6694684cf37bdad042657b08063f0c75864fd0271d41b9a9cccff35e0b1858e4819bc9c1d032df92f6bcec060b62e1143ec869713d0e258eafc240a6386986203a260478c12655772fbe95a31c98571ac0224aeaa8d8f17aa821f065e278aa5b455c3737232a20513a42efce942492373a60b5fb3521661619c326fb6d976e7cb82cf940f3ebc96e2840841a99a8327f2d79a905a29faa9c7e56f5c35213774c242f48d3d3c04556c28165a8ce6210fd55219280932cfe63da12c443d330c173d3057dcefc9accb245160c29436f8eb5664df30aba5491b56297a638787d4e8e7a52fd42aee72d7cd3dc8475f607fe7e1787fd714c425b0d9911e4fbccbb92c2bcb234c67391f62194e0ddf874504bb7c6935b9fd43621aa960966c3b69ad7aead775fa2597ee97e3a072b5b371ef822ba2b06c36bc0fb721e3963b286fe677e56e41408a2e1ed0e03da2db564992664d3608f5420e19367d5735ef0a8e093b88a64f53e8967bdf9243eb100fd7c09bba229d2a4b29924e2c1dd93ac90b7630d157effffc0ddf97f1d215a9a0f668a6bc2e604d6728adf299c0b4d8eec922b56f06823ab432e8f527ca4506448034f99fd87b560428c565a69695518b88676597e48ce68babeb9f22394347ebcaa5a8e82dd6865acd711916a98874acb915cdf56331974aafa20f8f88b83c88189769e5ba4b3e218e2aa0d02477ce1dc4c5de3a23ab54c1d76b6f0d23cc5c75b1b4bc996ccf5a2356ae1b70da0c440aaff713bc126cbd78d119ce51d4c52a350836451728bfd8bfdbd2ac8b108c279f91fe54bbd7c37f7e679688020b3196397479e46206b7488ddf8519ce30b98fbf91238571ef2b894e192959c59970cda5fb4dbff51379d09a36f1a00774267c0fd24da2a3cebb7c39e01b407cb69127be55808777ed3b3c2e62f9fbff2b8276fbdff1b2c96cd4a268d005f9c56f1ff473694da33323443ffc069b6fed10103b86000426429c1744a0d829df70d5f8a137ccfd886f0be2015f818478ffd441dfcbfac9bb377ddd0cbddbf4b5273206e17c7453c346f455ef90a7a8b85e8702df11fbf359034e121ee28ed12a7e3b7692625e9f173e0c0125ed2fa3c2856ce72f7b9ed284b17e47f7bc6038fc150438ad3c26fbedc3973fc795ff81c8eb735258663ef5a6bfe2b7b4a729b8603f910f552d68066e373b873d0d94ea0d174efdc7720181130d5e1da9e31838820d578df0ec09ff11c68846b230dcd939242b7ff576a7fbc34b41ed0318d2896bc31fb11e7f9bc77b5a2324cfd33575b608dfd81cebe63ac5a317c92ed60b4238d7973c2ff86156f2bc0d89f83e5d2193e5f31ec578be4741b866b45419ab61f26047556725d4edd05fca2a2802766eddbe4460553d7665edfdccbf5cabc504a470fbd55bcb6b8667baeef762afbeb4ab8d09f272419976e6f1be817078d015c2605d5da1031a293ec29464128b1f0d2b36dd295f32721f9d79d0cb083bef467e84bd586e6e14d4c2c11a56e54277addbd2d967f4e6a678220525e5c1aeb2de6a90c524de1067e88eb341a5b341720671768d36d39d70ff3ecc1ae09e207c0f382c0b828a13bb593cbdef74b6b0c2829f35208bbab5aa624b4ae3931de960394e146a047e40fd00e617a8544660b707342b3ef2de80b9f8e7ac753e99f0419cbc0166878876b487bc23e9e6ec23904715817ecef85fa5fa3a9670757deba1d607a4a83bac51ffca0dbe0a14d69a84a3fcef8e089fc323f074563acf3c139843f7fe2406e42aed501ca14963f09131d0c76d3883f3526010ece0e4879682e5a1e9c030de628316def88602230d3981b774dbd706d03a8b86dca489754aae56136475e57ee14056182c567cc9874d6e712d152bedd27ec0a84b9b4cd40b1f68422b9a9f80f75a04d8ab2343a7db8170b66fc991b1eb9fcdc34481c21bc584e365a6304b636b01a1adb637ebebef10912979adf3bb1d27947b91306e28cb6dc76497541acb54767afb47c3a4dea36cb48f2f1b9a48ce0d1c2eebd8b2c6e58ba001df74a601ad7221f33eae44819519a2dd0eaf3fdd183ec08b9ff5ec3c8110df1095911c8996f52bef2fc9ee997cdffbd26b73e065199b4754ebd0c9be06b12717739ef015a3cd8d5d9d104fc62ce2e18bec56853db8ad1ccc045e4de52705440901593c905784a439ee6299c3665eb85a696f61787e79a33ff9b9fb194cbe9dd53d93e700ed2f7b19d6a6ddb11adf64fed573ead7e60cc439a8c9783e84a41170d748689c18a6110c917e58b11ce9630bb52a7900573f8e46dec663765c2b2edfec0f3ff511d572b3a8a4ba4b72ecf5f5705038a3df588429bdd012f4bc1035cac7768cb2a8064d93bda77c8dd3f241fc9ed99225ef4fac2ede2491906617177f0947e7e6378227be2a8a0186df2fa4f0c9bec932d768bed3abb2890c93f03a2341c12bc4bd5e9a76d976d9cc5d079061bf698e810729fceb74856960968ab823c59c7812b3d8b53aa01985aae88cd12093b06bbdf27f15496f96a0f88932d77f312bc99f8d0faa439908f7636ca82cbb3def1516b0e54495170191a7faec9c211c238cc88058b0047771d38150dc7503eda4acb67c359afba921bf6c6807bd27530929a23a9d31741a64a42fcff6a1d39f55047431efbc1de0ecbc8c80c20ffd1268b748130d98e983c378fc0078e8762429c07098fe82ee933c86025001ec17d39bb3e7ec15347da4d1c5612529a4a114a1f753f82ae3ad8373ad901c63faf0cc53ce8f7141823171d1ce8ca15def12393bf8e9f9e8c9c98f1a52c9822b9a8f1648a743fd89dcb222a2bb4f98635a9a8f6fce5f0e7d2b2867b1291111782ac2ac2ec0d5b98dcda4e3d337d3c95b7df467ab49c1b9faaeb601cbed57c5f98fb20525e0c06b847039fcbde688aff47bafb009994c4dbf515ba7bf7c47879c0ff1369cffcd827c83be7876eacc40bd7264533b9e0ddfb01bef19ad6bb93ee045ad1f7329fd568c2ccefefaafb75b7d117a6596579f5e5d4b602a4d47d2d0750de9d209b9c778728111af903b187b993a1f7904c5a0e72895e5de4df172ece04fda7b8995a1f155729cad78510468bf8f9b6407a0ed65d09d0ea2c715e62bb321f6ebfa5c62e08b5c745c214e71aa0b910cc315e1fa8b4905ec3a1d03017d65da6f1b86e2a8cad802d09e49eedc93b34ec97a12c7f230e67f42c50b60dc7709e08f9b4aab420663a983abbdb99e757ba9a096c1247fbe8ded7713be9ab821c2fd99211723370c05c493a14feb6538e370c5648b10fe077aae61a8e37d488092e3667991c136e64a1708092a9f2bb525c45618c6597acab19a38f3bacabd7f1324e77ac1ff58112bd2cb068a4f2e79615b420cb606bda5641f15d6bfbd193347680ae6672e66db50a4a38e431726c1b9af6415405e4b2db24571ef36c11c3b344356c92b90b1a0a98d9e5a2ddfa9a8332d68151741fbc785e7f10025b5fcebc4d2cf38eca5b8e980fae676e87b9ea74ef81fc3c68721beb7ae635e08caae0ecd967a8d5b1a54fa4df035c6103a02f39f80eb44df5859052bf5a66b4b1ae83cd169efc888f1423524134a94a30b07b4a6f3addd0f3a3e7ef3cc668f9482f7ad1d4176bf5ea85d384f6908648d6052b4793903ec127d700a2658ce4652a3a364429f5defb5ab851ced6648a3aeab8b6f08143fa00d611ece0ba609c048a22dc3af4166db15ca042df86f4f364365fefe6c5516f84b9a312840e077982807c8b58ba2f0c74b9f5f07faaf7f7b8cc88809ff6fd94b2643880fd3a587c6a8780cab66eb0f0ceb6cdf44fac5556d09bdd3e1dc1b8fbabd2738bd91ab4574e24aa28ea70be74d74d83ed185b51363f528e03bf91b9dbbb5ad29ee5c5dbc907a4e2e49eb66f2f364b9575a3d0b528f216bcc1dc86f646dfd26b37388f0793338f58f5078855b3547d469be7d53ad4a7a874c5d91d04615fa206b36d79c1074f9f2afb7ce8738bcfe264fa69f989f057a7ccda05315328c54cce289c26ded698e357bccc12dda4762ee5fc3343c06bdffcbc0552c26ef0b44f71585c3f9db48353705bd4b8416e6b637ab5d047c600b386c029867329f127961627cb20d1bb8a54521669468cb0ceb845769a9997147a63a4b4ac6993ec44b989b8f79102ef5529a80563a4b1a81d75726fcb72dd7329dc4d7f83b3f4eebdff6d3f7936f2f5d1cd296149c4b05e5455244e0667acc1c75e2802785478a67cbf66a74940e5cb219fa2e3c65d99fafd7226825a9ef07928ca13d16d38aa389053d1ebaed33e7dd6ab02ab00cc1b9f797fa1a69b8e9494408028ddd4052d251f6935873d5c57e2af38ccb9fdfe6e6a82bc947b93d3a594f53a49e3e0fe5274f5f757b88b37a1a2738900d1c9d6094b529aa57d5cdc86f5311018ca52aa5607967d8e59bc0e6ca053a82d1f74374560447ab7115d7d251dae584e72d92a21d971cc71f84a2a88a36944c1896847f3fd3e9e599d68008c0caebc15a8c1cd34b874341b1893940713933d574192f0690820add568f82bba1bdc015151b00caf87009b6eed916eddcf3a6f4edf60e003065e50c88348510e681622b7d52f7eac725ca760275bc74578c4aa850a7cf83a1bdc983bfcaef701b16967915ce303e38e50bd23628425dcd9b527539b5f38a65947f21aa70ca50b4908750f1051279c529f740e1529bb1feb6aecc0d4ee4e2b7eba15ebe294a7f0dcec3a8c955c0b149a34835eae17c532bbf6b6d4c08369cfc0c97590e3354484610cbcf9fbf08471593729925ebc4f47ec6a4d38a128cc9df2854db7d457ede8cb66a55922450371212e82580b248ee6350e9b2173347efaa432e243eb75713b503e33b9d18d87243ba0ef85cb2a948dec3b97ec23cfdef7d61bb974d515ec58509428bb9fbcd046a7abf02fad0ca401b8120b8bb33930215f3a5962b930b40ec48bdc5b8feafe30ab47b6cb1be6c9bd24de24bd30dbfca36d703c73e5ef14bd4c80856004d3ae067c74f4124839c4cbd6a30b3fa8ca3d6e8315fed7408cfc720dc191762e6662a1151107fc752b6b4583d81a1ef45a334c70807908c8220619dfdca1b10b3577119dfbfc784fe7e5c7452315e8a95d7fae3992727dab6a02108491171494b197fead0cd8fa6a98d76c1ef98b24b84168caca94b18cea2ac3f0b12d5b2d0639f4151862a6ea24cd3f828d0bf0c32b04b1081bf4a63d5f5c34b614d9046310995c7d7d5977cca2c41540a318ba151c85d85634cc340618024341dadc30ad8e28847e8e427e437381e430096d7a650557bb7d82306c88fb92b98dcb84bec207212b4cc21debd5fa53bd4a4a42dd5ebde31b2f9597baffb31ab622d93e3dd15577b0bf164167552d25a8fc028322577516ded7ff127232b01a0f1ae7423f04a3476bfc57d53e0f12938695b3e18f59b26738028af0fff5ff726443ccab7e1015a854d38599d4891f88e02bac81b5d6a80ff70dca40704fef2f20744f0636ea1f63ed19ff74c8e441cf53f4e95d25a0939b39e9378705fd90f5a4e81595745152d2a8cadbd9eb9751a1121d615a0fda5cd6b01387b93bed969cef3c804afe0cc1699ee08c309c9ed5cb91e1cd33283f5d3650492ed00b1a2f180dce477d078a93532f99fb5e7c6a176c381001a71939b0c68e9323e5bd4a65c7760f59193cff90256bd20158700d6ad98b8376fa8173a5faf6b69ab640f51eef24c32fc6ff42e8dc9cdd768492d8c79b94a68abefffa658c5da66f272a94607c4b6c264f5b780072a5708e2222d7853ec3828e79ce210185ed723a57f6f86a87225161cf26b4a153c2a376c359ebe5c6183d565b9c77eecb616ca6a87a98007528d8ced3f049fc91cd91fb5783db5875fa02f1f7519dd16ae6fcaef89d1f10929d88cd82169d76eb60799095c0bce25f63d1e4d3b24ba6806f01ea3e430ecc51f9b26d6d5c5a6bc17c020a082a5fcb5ef539251587685228b27cdec49d4dce07b8ff464e4a13398cf8d577d05754b9c75038fc73f3cc1ae8cfc936bf42844ef6ff48e768e8f853a3b9325bc8b7a7ff99ecc89c9caf18c160ba6a29c54123ac035cf2290ec8ea7e2bdefcb1e5e55c00d725cc71b9587a9a54fa218fd7e85571478ca058d90ca0b6f0257b549cc286bf7020d59172574dc6bbd035f408a3b445f2e73908ac5ba32f448a7c0fa5abaa2524764cab0d514f875f3a9f5163e6a944e25be62e5a9a66ff932e97a9319db90cf319167fd5535179595d8705dd5cd83abfab65c378b0a7106ddb22a8b1b4cbe010cd90ca280f3686873d7372285002a0b0c3a9bd6eaa787806492dbf37d4df609b065ff3363f3a3ce4dd76c8930338bb0df608ab85563b9f434c3a60da0f56b48332d2917f1c7be04fe30db9b5ec366be4d123d7399baec1784e4277e3fb3b1857c474f0f7ca3d8c2c2b158957cc5e1c40a067da6de562bf3482b3cbdb4450a019b6bcc79b2473819253d9cd5bc3e7d8d46be78e1853981c9862dfe7becb7369182ffcf65374d9691fb510b5fb84a1504b8ecf676fb725e8ea9af66faba6b7b16ef3596aa6091f232f88f5ee24afaea695879347b34ffae49ee964355ab8a5522392b16931ef70b66d13d233bd505e5f47d2648f2d20d3027d28a1815e90d0bc7ee537177b8d06d1ed524e3647b210544a9911e944bba661672770868bbb1982bb26efe77c510d76f3cbf98d2c30dbf7438f951c92db4a03de116a07b88a803ebe5b3da2385c3d3c10fc5ee564e98803b2be1b6b0fe06b602a76c0d2c478e15db4e1fc66f2caaa3a1f1ad469900f92530c6a678fcd40df9d73854352eb76324ed586874a22a745e4e74f1ed1ddc6e9b4c58f28b713523befe8ba683d7897ed0616eed474fdf99c253a3de7c78546f359dfac8ea250b3b8499e81928dc8b2e206392366b677662d98d7254e5055681607a23dd2835715fe00c846edc07e29780beedad6996f32d80dd77bc98e7106627e41202f5a95071b9b3c65823c66c9107cd310e34e4fd19bf051d113575e3b42585b9bf60fc6b5d81e2bc99ae59839ed6a1830ee41b201b25e9876f778d1b6d491e45986eb0d7dd3ed2702d8adb5a420f51f545bb4d223047af0b8e51a8516943b068567288c947d7a0d3a06b10170e275a31e048b0446b2b58dfa33ef7fdebe89f93c32bf02cd629c34734fd0655764a11967049ace64202b3a867317d2d1f180cbfb0b751acfc6825805922e94b753e4e5971477a104fff4c686493ce992e5e726bb831034a5a2ce8647f26e7a89263a4ff22dc1ae3993945158737c00fece76bed4288def74ec6f9b11b4c8fe5d068700c99982f8381ab915d09628de8149f2371549ba136eea344d0b4880e92787b1b4efefe1a7f6fcb206f78424c5e91ea72d876b14295d8117f8257ec5b6d27ef41c0278d76b9a4bfebe5a835fe5f4538926959250d592794eb005bf7695c325ca2a7d16202ef48a7bbcbab333e67bcbc3278376283fd79f6cbcb7ecee89596b9642c377c7bb57e4f7477375add8e8162e977e4f671c590903d75f34fc65c3d14859dacb8b282c972ea5880c9f93faf464935c70b7b32ae5e642c46f3c9cbc1d113001853a3485e3216888456c47201cb4dcc9abd9791450dee1d87bf875fffcb93a58fe076c9c24dd734bef2b8c8b19a0544da20bb5df545aaf4fbf5a5d1c980193c73b4dbe80b9b7070541d77bb7bebcce9c2307f03cf6ce498cdc3179e402bd1aafd7e259fb13ce5e7c4cb48b4dcf6be356435a2884f8cb00a91cf6d3a65a20df33ceacdef065d8b12d8c87d8f88a3361a550ad228971473f254b9e70e4c736563abe1519f4c151564a19374d5b7bc8e0c76db9d5948f1ffaddc1aab82b934b375d9311b8767c9290c5a6aa5ab721f28438585e272ffd9ff23791f793a5e944a9d5926b59a617f09ef4455b4fb646fd95f1c4c6d79527d1c98ff32529b5c4e8d97e0ff073a2b10ccc96b00b0ae3a70de7f86078aab004e3af2006d97e84ce542fda02af12b6c235cb165704b3550b0e497e59aaa86da42e373a9c89e71222aa8fcad80b895e4acd3d62ca4deb329a78934d679fab25f2ad4b8b9edfae27b93faf30e888ea0ea014a2087a89c2c01564b6a375f44c61270d2297c9efcf8de15556cdb178e9d7e57fe29862bdaf92015511a6d10ed98593fe8e8218ae9a558dee4e186d2c94526e3fb929e4893c825ff0456148841ed35e0e69d49fe9c99444278efcf49ba555c518a37a866a15f455330266c8ef0a291e80d4e48157e557db5dacba9a1b338469b3298f9a984ec79d4d0b45cfed880de68a27e02a6cbf1b9e4396769e166b8b90ebee5529730e492a2210fe8c074db69500d456390018b87875aa2093d9a0be7f17fd5b3644ad9bc91e5cd36f2599c8e1ed2d90d0b4c7fc46ab934d2235909610da0a8631de8110a0d4c425f6801093b22d6c79a08b0820807bd7859f248de6a66780b13113d9e1067bc646576db695f55b5764cb391ccfdccdb7b1fd5d78ce18523e4bef76fe38c9b9113f7effedcad167e1ea4d870dfa6e234ac0284abc2298a88f0c1a5db0366e2bb7ab15ca6628164b195fcacc00f285ef799849868a35280b88e1799087a974a295f86a513e11df182e50ccccbc51abc3d2c7d900280953e4495889fa00becf13ea99085e73154184b23ee7779b698ca0d183fd239ce8d38ae6af324ad402d7a12511e070c7cd63a101fae83c82b3e445098d367e5b229288d4938c889dddbb7cc21cf5d569ef13f140d7c357d45cc97a511974473a0abaebf5ac65b5d865c7a3f07579704ec6af300256db2ee313e67ca6297922c1d1296c5396c04091533c421c0f299da4f609c475769dabe2a75fcb5455c3b526547bd8724fc0512d975c13946452fd6a3c7830bceb0f8e5f857c6c9a6f58771e6c29b76b82c8be2a717e7c0c90898597298f645f1d415a8221b490b96be89f1d3a1603c0291c170dc9c7f652a5ea56aaf46d9aa898585aafc782dadada0d0c4b05b9aed1332848426d30e361c8b748575deeff30e99f729cd7b0468ce06576bc3544b46b3dd7b26ee2d589b750fa107846cd8743262404c92d585ac3b703f5c0b8b7b69df80b4e218bf5885812c5138fcc543e2dcb115deb3b925d308326135636755ba58161e786d28559c8912594229c79ad516c06b82589af21cad16211c8703436c989c96fde47d19a8029893718d90798ae11d16a2c1ee0993db6a21c804f07373049e760c06e546f477a0d8436b4323b9fb0ac391f21c4a08e228cc33b1a1d12469c66b44cc5d6abe5ee18f34a178f2a784d51158c564a5dfd918abf2f140aea2800ba18de022832ae26e75e80256184d6b6d57d62aee0435df768aba02d172e7bf5151948e878df5bb7aeb86026962f3146c583ea6c918bd5960c5b7c9877cb8d3e764f19efa9d048b969e3c618575da6bf6876591099e9d0128e0879fdd32e65d7bbdcdacdd148501b4756764624b4f38a51f439b3eecad0be2be293aad5b942f9856168c08527cbb67fe819812a881ebe9c4d0fb693e5fb4da2a54090d1899e3c69e4aaa0f6bff542b49f56fcf86f1cd2001c1b3a2c4ace5e4592a85e0d3d22ae19df6538421fbe75d4a6f05b428af2e8ce959847e60e72b2bd7695191d9d4496af8c633ff3bdb11b37be22411bb604920c0adb15d9f43c1826f5eccdd6da390f5b9afaafaaf5bfedaaa174f34054be56ac61cf7538e4e7f0f017f1042c643ab524397a137dd417132fe7b07ad2bf4476606957f0ea04c22488f9c3c5ed16388ee7a852c63337830362cd1f50221c840b494aea548256ad221a4e282e5adef8bb32b32697d66d53e5b6491983120892b6cbe1ffe41c313123a562f6fa1d304e1528086f64b0f9c7dd597fd618f6417d3fd429107b5dcea3415735435a3b82569fa3c1e2ebd2408443cda837078f62f7e75d7f6ff9d68c063461f788c57dbf5a322f87837d9a837caec21c02eb5a6336c7c61c1335f946e7f9c16c0c071617c2f6f81106cf64277555d4d653a45e643aa8db8f6e8c98cf0187d4a9ac925fc4aed887d7e72b03599c3d1dee3cf755ae1fe3fd3e9cae3a6b02ece3179c3ce928a8eb0f5153544c892cda237b4c178566ba9e066fd44b92c30566726673814a6e37fc20aca0cb4a0e108539856491807da4dfdae1aea615773b14c6f70915f2be01d2211f5ccb6885ea039eb53d6a0d9b071f19bc5c28ffabd3dfc90887d5c38d85171bb540f0d00bf8d7a4513348907166e9b624d74b171c60a98053a4d4ccdf931fedafb2e9d92251dc4d4b1964437e524cf4ec3b416206dd3f5af14e84f635e80d363e3239b00f78d53d7acf1c7733b39fcbca5bd56c44bd6edeb396259b17708ff04fe16c45f974e38a7b357759df0452146b998be1337a564fd9a85dfdb8746bfb953abe8d93d15c936d34c00016652b9bfcff63dfa79cb739f949ad351cf3557c41b1e086225771e3d56c1df18d6737b8491ee8e1c76795fd25854f1ec629618570eb030214bbbc344349f7a18c697b0a71e343905d947447e83504db16065222e4bd6a4b2df953bd24f0085ea541966c0f0d953c06ad1c5e31828fff852d92c219bfb08991759107d476349eac0d99d0eb1f96d9d5ed7583dae6c24a5b4ec5896e82f334ac7159e989e8cb159fc561f51125800d93d9bea27d4b402dca8f57623b46d2a1d22e0b2ed77bc083be91187466716f84836b79d3ff44728caacf850f5cddb7cb426772dd19ff8c5a25a8a8ac7701b38dfede144847842d5354d01759129ff1adb16b18d2cdeee42636b2e361c96a35df1ca4c96e0c42a557538c73187c964bf8389646bd36d7ea9b791927c765a58e195e51ce84ad51460b930c0b2ad516f59cf9ff3b64b34004221b1f007e4bd45035735d785ff4787fa19d2ee3ba27bf8c9d32087090cc3dbdb535db563ccc5916fb9c4ba8863af734703227f5c3c715f2e0b99b6449ba666f7e7e4ba903a0e6d6722b52ddbd85336fe12fa7cdae3873a5171d444e204d2a76b3e98a1b8cf2c79bd423c057ac2e47ba420dcf5fe9995bec2d7fed5f28f82f9aaec9978b8253147dc0531e273453a74d0b1d8d24f66728c536167364e43353cf725575bfb816c04e162655b97bbabbf3f813cd176160137a58696a8bcfc0fc53b939014ba639e1e1dc7a428ef7eb5eb77e5154c94d22d9d546268d13c73e43ca65e52d46a799a34eaa3c281051043c3d94c1cc5ee02b31560beb5a80f9a1cda64dc4f13a5eca14317f6b04689894f5f32594f54e73d47afff1510de5735d6d4daa1028e3f50ee5da31ecb65aa8f4a245c546b1a5f4cf82cbb1a3d74f84ad1df825bbe695a0011dd845e024448084f0724064ad5500af517bbff85fb4dd59babc105a5e042bf0591b10a150e9c6ceb262c722f7933072b9c83c08b794fb0619256d4bfce118b29ca1f5d70892eaa9159fef006764ca00e89d0d37508d238b134f9e54fc0d58e9963a46f24ab9f96d3363e06e7bbfe029e6c5c1c8628e02a39e4d1681c1e64d8bcbf7811496cb3bb8a59e47244eb89d255ebf802bb61588126089df0a38e5471cb1883653c675ffbf1eb122eb720a35aa4881cc594fc85081f28e5c8d06ad227a1705e2e3227b14007f1c30bfc43faf8ee4b3b24ac792e124ecb4bd6bfed366f81d1837bfe0196e3cce0cc6facd54729bd635a2d625bcfa37231429116fc40c5c47a001b875cffee4424d467107ae4fd36b93c259e278b30382335f303cee2f035773c0de241302423e45405d1f9141ac3c967ba1974003c0a009abdb9eedc148555f3ed56ca06482862f0e414776fc3903f2d8da9cbbce6a063aa90e406bb5e9c6fd41a3d5842ffb8385feee54898cef8acb4df821b3853735d282c297de9a24e8df558dc78c8dc6a21693de52e6e46c0b9e726bdcdda2e1205b487e3892553ce628cd244dc19478a2d7604d66d01983f7641eda0065c090f5aac52f90f6d1b9f5ee812aafca0c37542a9469e3b2b60c04ce029e8e6e6282487601060ef10db16a60e7cfbbc3ae0d8581f32eb7ea3426d2843f73600a08c2882d05a306ad2b134f831f47c2e52c230addcf3f22464078aa2dd4284c2b1ebdcf61b4383ab2285f582df285d90d0f6dd26368263d7e9c255698ad8321e810d176444b8a14d2aa3ac6c947319bc307839740a712e3e9ec8212c20f8b84d6ad847a9f6c48d6db9f72692f04a88d0e809a8dccb3d6ba4584c4899e2100da58fdcbc74acb1f0f23a2285c2c90353dbac8e85e19bdb77dfca348448fd19e6dfcab9a198fec575a6650ecf6d10c6fc4f24cc9d4f19ba944f3cf222418f2f83582a20f34f1369f8d1ada61a8c55170f70c725ea5effdf445056ef29e923564df55225f4aeadeda4e88d5db0b4b6f476cde6e3aad38c847acfea7d54f3c7a381c1ea581bc4a86fc30d8493cf1ed36564cb7c66874c97b7ab3806b22d35ce6827861df87f17fb64993fb30f4dd9da1dafb8b13ad4a3d8820c87fb3bc550b8cd95f8e8693ccf1acf5ab73aa221ccb6d01ad411de7f4d34866ed83a2dc052b45d45aa46bbddaabc8b18f45588474d56ae2182f33c2b07e2fed4b8e0bdc216a93f1d4826cc898daa1ada8876342d40936693e0e9e25e2ffc3c3727f412413cd91f7fa98653e5c63be2b9948da21c06de889b48cb1bba3bf8ab96987308d6bd3429defb8db6d2d50f6613ede5a043b9296804e2c604074674c623715ef9064eaebf093d95f6307012509348dccd2184e0077a97faf74ae222ecc5787c24b4bf1766ae4a9a264627b6d05d8a2d94a62c403e2df8c014021358ea960be92494bd3674d2cb2bb0d894791b42111c7b006d83cec51f3eca96d2ef7df87639e235185c489e3695662fa9f070152f387b66a5a2a11bbeafb6a4a0eb92fc416c3294768c54cc5c2e90610a8469014f8f0f2a5d6da83a218c28eccf92d2bcbdbf01af02b37f41ca10c4a748557cf9b52f385587c86fb20c195678df651e97117387e92f67cc8cea41c44bec5b8733c308835a929439f55feaa4b0dec54b87f02424bdb1dd624ed9b2a9eda17ffebd6d5bd9a9ab7fdf31dd7fc2b1a1eff7d03e0d233242f99a589142a3d311cc5a3ec4ee0ab8c3fde4b36155d029216e72346b7c8f2b1aa85bec973a59b367fb63fc0b00f560b230d00bff4b12929ba5de9998519ef025d5d0091c1f53a7c40acf06da3bd78ed37522cbe3c49f12e60d188c89d05125ac9a3bb04dc25eca27fcde46dd48cadc4ba72e15111935bece5788e1b9f80c121422634cf70ae5b7dc9334264fc396b580d2b27a9b8ee981d7ced9e37dd434917975979a6e1a471fa36fbf2d2fc90021a1237287e4b57b7afe839af056a1ed763d5221e385179f8e65bf28af8b6d45236b5823d756835a9f59ed5405d77f79055ee2889d3c18f30abfcf47bca7edea8a88d78786ab3554b1a9b24a2252bf76a197c420a421592555e955d432493708e9abd5371c57f83abe3c13363bfc3d65d0b042b3804c7e71dabad152d237f3e1b48f82e41e928c50603bb16a2c2bbfc4ada3b235a2bb0fe04eb3eacc85b90b10bfd124ea4a9246363d09735aa82ecb59b3427e6cb062707c401187ebe8384f1603d4097d25460aa4ffc9037b9d9bc6fad75cb2541f2a14938c9fab61c080ceaae428a7f837de636fe9efabf2120faeb16ca86d178ab92a03d11bbb6b62999c82a3440e88292a203e345031303c9530cbcfcf795e0e3b59b43d84c08d44e25747f6c79c1f19688a92de9ff082679a8e86133953559e1caef2ece63334edc3187d9123ba68583f42f5fc58fa540eb92556a8ef211313b3c60a90ea5c3990b4c83075dea6f08b4dc23d1bcf0b2ca33f49717321dbe2244657311311c718a7e753122673377740478bdbd8387437c808c561a7f3ff54d2b55021306164f7b2ba43047c8b44c8c73d746b55705d3ede00a0a171d9908762f16f6314461d34a57af3d087ebd7dadd0b012d00ccbf139efc2dd8898b4a63d4540f9cf48bbbced50dad7115a76e325cf7e02e9b9e37ea48ee22824998cc2503228335b1e1c50661f9e6901891dc47e7b13ce98a25a2b8e0b02c204f1ce3ee3b3f531b12e4a348fd7e01e3da54f12f888428763ff71c9381025a816585ba4128298a04606059d6feeeecb4d984e1108c8a522fa1bb453b83cb2893e3c4ab25a3ae19b9168410276396471ffd8e6683bf902ddc36e192991aa4b11a4231282f8db1095dfe1629b3c3ecdaadfa2a6d6b73dda427bb8633b9c277ef30fca175b3b5b1fc6157b0bdf2bc221b191bd795bf1e91351263a0564c98f0bc18156c620e09e8c82070a4b7c6477eea3388c52ede36fae22dbe23479fa936c4b4c339181057a6a7520c5d4516c184b4efeca2956b150f0aa22b233991e6f246400f12bfac3abdc77fff5e68d57b19e2a3a55f37809fdd3de2c322a49c4c4332cada77972c592cb81383e061ebc42196db9e0f4f3b03437699edf9218136e5f709b86dfde35f3a993465f1fe0a83141ff15f63588108a13111bd5470ee1c291d0a0d53ecff3e1e47c21e4af47e8bed938bc473553a53a7a862ea2fb026baf9b0956c6c02db083f0e592b6d9d759af957908693f90b28f93af9ceac57017a003282c89e5ab012343a959aa80a94881c593ba2ca0889cf76f6a44ad02f90e7cf0135a7400247cec8a81ccb37e1b2808ebc920f8b0a2d9118447268b617c8bb6bc046a4f4dbee7d21e66619e09622761ee7cae75fa3a5172640a9f5c05ae06b4f382f9e38e29dc353d58483041fa7d7f0ee11acde577b8a7160ae75e6c487ac1299b08f997085aa1b1aab678ffb48af85aae3dd30d27294bcbfdc6e976f9d692e5bac90be3a380d54c7b78136e9399c729c3c718aaece11bcac7a7091bdfe4103e2b37f714ad59073e3384df94917be08169dde479958e77661b104956d0463255938eb95ad7f8c66a080c22ab19821c4971ce332a014342dd4a56617ec9f1da25d7d9add8c3a191bcb3767ceffc9953dfb7690bd15121cb18c4095d0e357208d35dabf6cad8eacbbf0f81063365d769427667cfb433dcca5030888821043e0e70296f720722724fe16244b5240c215b7f655c23497e6402de545ac29fd8c5d9ee22e6ec8097af70ea200c013fd03ee80e7f4480cf485ee1cf939d8e5f0014e4b46188afe9bb4681c85fffdcc22c234de9c2ff870cac587b8f0d6d7ffa7d18a0e1d45daad09f88401b3342307b0fa78e59e2067d19bee0ea1903b73c280aab88fbb4494a8b569ca5cbe07a5bc856d1dcf35f8b01f6721eeba03e9b8ed0ff2d5012ed25ca21d8a82e19a0a2e31dd3ff536284b640c0e2fd10671ddd4c72320311b7d2f70efd1acf99f5192764c5baf93b1492f8221289d9728fc97cf5ad26fc8eb463c1487672f026b5735d57129b0f2b8de3cbc0166dc31cdb02ac23e60ae2be63c16da19c2ac4b7e154b115b3c548f22b9cc77fc631a26a04be77f239f6380f3f7945c649b3f40c6366b02529cb4dbe2ea10437817bdda246f0aa17238de751bd9f25db5fe1c5abd40020dd10d3430e1736d7281b3faa0dafc63258e68736eb4d4d7c14d3a61c745b8b519e66f8f6105dca710bc265d56b8a8fb7901eca82667ad41e47365b751a9cc54598281ab75e0a2ea01c62c39e6b3724e9146b126e6709815016c0538224f6cc5a6b793506a2f17420a80efb81fdff35266500b0f26a525ab4de15bb73fd426ecc79283246b17854e5328df1c695bb337b13f2deba40c09b280fe39c658efb84e8868781f194137e4668a218d741b0d425072600819005085ec0f765c3a01d1124f9ccf8dd99dfe5fd37e7914cd517d6f72a82092e2ef89b5a9b2475fcb0e2b7d9dc418bdbece69417410289859c7c7454451b62a565ce9a6342549cb821b8ef41cafebe4ddc6f08fc262f94e44283c07e5790f3062b663b464188bce2c29ff0e43d9df6eb52277ebe6bb3f31cb032edbbf60c20eeecc674a93a4e546d4ed99a5d78a45d3a3bd568e675581371a0bb4ded745fbd13542ecb0ec3cb8b41b49696be23a0820fc55f5e6448fe2e782b8d145b081ef7c29e2a0ab47f9b1032ea686ca84750ed8fe2fb8bddc980a35587e6030b8d1474d2398e4230939d9d79ec33c89ca181bad55230beb8e34c255f4f865ec098c9c99ca281d9dfa2f96dee80b47d17d60f101f02cbc0a0de59027d14190badf12c59854d5dd4a5193fcd64b5be9642264655ca4ee0754bb76e71c6ae17c657cf2fdc8ccf1e8ce68169619a06e524335df189b4ddf444f4bd37ad5f300a1b3cb0c176e9644b061e6747845c3977b0f83f55ab7a87755f810e45e8eb22cab660f110bb56718d4b1eb6dee2ef65a4a867be1f2add5c99bad9f31fc8a80b0d8ad7b32e2750917f1101f6b2ae7463507523eea1352601711f3b6efb3b01414ff3c38d4049da151a165397588390a1e9fad16732646be03d47379d8dcdd91012a5c441497525abd1ab76b9c607cbaa6e4a3e790b12803435c0afa410d0452908526ad90e08ea44bba54e4f963dd32959b154e947e4d6c38031b8ab53ce61f38f3d5c2ce9fbca706d60f6f492844769d6d1f8978458360830d1bcd63144faf3ee53c5b74a8404fa761178c030d0957bf1f4d1b85403aa66369d5a8ebc55515fca2386a7920d89c85747a316c510d61fc6099c91ef825742c8b52d06080d26d645f12d7d25c9b14e3eb1518b7f2c19516dff94df318142c479b566d9467262f413cacce5789152c98620a76d64f652bb37c6e9c169eaea00fd2c15da6cc7751a8a0eafe39d1b7a33e4b8d1b509614f92ec728aad3fae1d7567e1840534f2d2121f11f81439bd408ad0d29a1cf226b46024628e085f3e6f5268a6e6848b84da1e11a616914f632f2e86a218122d1d9e1b7d6e08cb92fd9c432fdeb5fdaa3e99929911cf8d0fba1f292151a298eb604495fadc91a1d159d55f8b759e861f23a12e835b25fd0d98645c38bfca489044a2cc5c4b573f13143bd3651af1a4f412aff6c9756357146457ae0caf2fe3e09931d5f86f7b58fbbf7a616563e78c69887ec8ebdb73fc73fe13b8f63addc3c89febff9ca036b7e0d8e8dada7934c88185cb8a2a4d64171b48a9122b90376f9ef4db40e3fd0364220da1688960f62d0da4d85fc594a9021761ee8ca3316edfd79b1840a902eb9be6e53d2a68c2b80f0e5ebc8742b25fa7aeca8aaa5c95f437414edae0bb74289604f41ba243014d4112a1958a6d3605e3b325f2f1c11a535d90cdd81ef00fcd2b2c84b399d27ebc509ee8208209dcc20e6ab087dc4facc5c8ffc2051d5f82637287a0679fbc39b1ec8a7e9be5f147855625811163e806e03b0ece89ee09cbac60217035e03d064a5f75c38ffb450beeb5e09f687b7a451575474f98904fa27a9d87d575601040e90a66640598510228cb3cc13859aa7947f86ec503159ef964ac0794c77a55cb9120526bb402754daf8a1e455b0a698f09ca2f728a3008618b03b421c951c9f79cde7c7c3d3d539d833c988d34f28bf6b9924a845049d9513de82fc9e650ccfb741666cc76f04c8857751a26d5c756cec3c2338daef39685358b530ca489de049b9ea248ed4ce77ace60da07865c94d64796c0e6e477c60a60bd9c3bf866c78bd5c4c31b1f9dbb38ce330a78f083c0aeded8259f1d5dbd81a155061e7a5dbab34650b33a7e8e700b941737f76c21f658610f02b963f2cb7763d89ecf35688fa94889e436778a71640095a2558c4ea964e4ca68aa241aa96eb2d27a2a030bd4812eed49b91f2e854f740a3a5723219ee434b26c46a17c623b94b096fd6285a7fe4e4e28360f6652cca47cf98847c412bd44ab50b3c9597219d612925d8b3d941a19c1232750c6f656a3b521bf354bbb9f5f625905403e535bfd5d84ab791008ec9bfe6a5592ab4334fe31594d402db7b68ab4cfcebfd9476dc2b72bfb361d4fa64a74121d148d38bc7badf880a428e37b795eb25ca7296e7f70bb7165166676b1f797dc2c5c2153b53b71fd13ba2dcc42a08ded359ec91c4066a43d79e4adb84c9796429f942e456438a53ebc57da82cd2825ffffafd631c783ce7b1376829bb79a23db5eb9c96d3ac3137555564c6ab36d7c87876fb0be2f31ab9395fcb926d8600f7da738090a097dcd34dd3df9a91500e1835810ab3e824a155c2792e971f0f333c438d591506323879549571c3a41ede4457d7205125ff618a210a2b58dbaaff30dfa0eb27480f511d8b24db7d766e9229ccd35fcb607df81d6627c83c9e2e160b587fe7a17a7eb7e437db6b2cc08f3abcbef3c1fbc2336d4a81b94bfb975a477a15de604882801ccd72761948301da62c0873270e9509297ca536e259e83ace1c3c6f65ed0d0aa6aad3a5edfe9a137ca3948fcf2de054f8b1d3df5d30a408307bf72704cb95ae8e33b78c60d76ae3f96078a6ba5ef0778497b5c8aa829d1be9c75bc1bd8ecf5ce40ece1633af9d1c6cff123caf762dc250068be1941e684b43679e9eb284504b84c6a43177b5c3f125e0ccf4ec2f6c79ba69ce8d20a1835b3ba60c51d1415cd707e8e1907c0a7c361dfc6ffb341d3d1c5cbda865ad326278b8c5f49ffb2f903cc63753852c54acb3eaecec7efef7954a436512e0484fecebf59abb18b3d2dffda751114e0e72ffe40a028955f8aa29d2a1add958368c4d9ec415639370fdba19f76e50fd88390e08ff402138324e7c2dfeda47bd3aa7fef4d78f7d7bb1c46d20e67b5387a1d419ed06accc648c130d0fe3ab26c331671d57b04ec1f58540bcbe73fc39aa8c5681f7e3aedec0cc925ac93a17b2b7602782901ef8e51563d1ae4a683be7e0af5e0b8d38f8780f0f527931020e62a29bf2ffafdf7456fbd3dfe9e37c1c63927a6d7485273cb13f0fb1fef5c58933e145acb5779f6569920644a3b90e95cf94c8a6af44a06a6863bf9c5384e35d107d93009923dbc92467d07afd20887186e7d7bd549e62119c4552210a8207cce9795f091fe2cceb72d8b11b5f4d5b24e3e202137889720231a9b3f17fa618dd693c22dbea96532d9adfcfed90a64007617465b8e97870f1d29ed8dd9afb2e30a07664207e2e4ecf1c7087ebd5aa2a0a4221883c3df8b46894eea7663c251f28fef8a69ea9a3d5e598f411589e2885657fa62b968fb0c688308f27407c42baab3a81f773f260ca4ebd16704dbc1f25ff33bdd057470354de5d8165227f89fae62a0c9c368dd9272680245b5ef4cba1d2c5aa6986ee4ab02899082409ff665362a785dfe3f72488d6e7101250e5bda5f4e07ff027c47a59048440faad14dd8b0286a0fd30b44ea70d2a974bb99f175d4de4067305cd6c93bd24bf3c87e7fe6d445481dae53d59805a568203259a27cab87ba83f8fc79ae1c0550a6ce1fcd44dd428613f9e6cf07e9d90fcda9f9d0d8ae0b9b8599157fb6979676b3d2af30aa3ef02f1bbedec2767dcc202301c1cbd5962788a8c3c12429ccea197a1d50c0bfad423d230fc89bf38639b76f684b5d96de5c9ffb2a4c9157eff97277f38f5a8426ed71838e82db11c842724a429f1d4838e23ebeaa224dab65318824dbbdeaaa83e02410881f7d8f42a778301fb4663732a7adf05f7a67250563a11d2b164909e8c98d78d1566e104b632f8ab2cb598cc84259308d4c1d21efddc655990763b8200bc2930fb91e07b2a10ebfed8541879444de226e29a9fba10624477d744623f0c408a9fa92c0b704876ad74069a49e553c2dd2b7c34f3be0577fef630b1dbaa8b03a8c10a75dfe974efa83beefcec75d0bc73c802aa3aac0b873178054c2e44ce0aa37ddb1fc2e520a77b544baf01f41e0ce164704881f3b8362e4ef0c67bfc68cfca8fffad7976940ffcad4e8075a7b555605fc9df3830a5657b180811db8ea88db2c63a768d30fdc83abd96e7c06e2b460a63beff9f6e15791769101c4970dc1e883b2d9c0433105377b7691670772de67aebc0c28645a271ba60240044b144cfdee54350463773d98d8921ceb26e5dadf33b4db87dfce79fcf6b24ccdc924fc8763a8ef759bca7d85f12ba4c5fbdb9ef443bbc48fa92dfc3bb93d65216b5f643120878bd3e6d475ea50854f781d17bbe0c240254234e7bb407d049bcdf4984716cd0ee51bbf124b45262469d907c1436361418edb1335b074f44a3a2687469f376b50e98f5b54d2dee361ef1de71a8483fb0db4ecfca84168180e39a10cfc1e87ba863dd876d780ab6d5d004f4c35238b06743805806a8f65f39c54bd8204a635b633c8a45432e8d504924996f3a9ddcd60ccb005394554d8f218035c97c26765fbd5ef2143bc4d7fe146b3c0274529f8e0353b71b07b0bedfd2a00ef37868fab9a81eb014980c61a546147cf9159233f02db80f17f648834e9d0cf60d87da49542be84577e92dc17df6bc0c83b53d8ed706f1b3e94467c578dd68e6d9b37416d02d69dcf2c5b20ce53f288f7272cc76b7e3f469d33c563cb376cc8c78da272a9bf4558489feff8521ce997aa3bf49103d6aa0025d5473ed1bea5d6b719283c170b3c46593d8e95e886d052cd5c74399f20cc94b639de2c64399885e1aa7330b47e4cb880d42184a919bbbf8b344e9c9077bef775fea2bbf05276d693bed9d26dd232222c58915a14a89f51cdcb1c52d1cfed756c88cc73b316d8cc704149c7a2eb562fbf8359b1b3fe428059b8fe69113e82c1006898db6c482acd22e79cb5d02f70827915fb20b939d80d33f3782febf712b5f902cb4e4cfd4a5e066f2d550748df292d5b6ad66e5693a0c5b60f40f0cab869162b9499206ba7b3159ca3d0810bb0a0fc13afdadd32bcbf15e4333ae036549317434c78f94afecde0ff28c7e0e6b4d69a28d2559015b5740d41905b3ec9eb54c1792d076f2e393274d54d8ce2a22bec5f46a697d915a9b34cbb2898cbdc9b6672d4891125e533fb7ea1e79806587ffdb9422b47083f9fa4a1345dd92f143f041dd29f2e8f5bb93662c946c4a87243cad8aed77058c0ac665a1f25e829bfd157a1e3248bca689edc80c6be666c372340a0d299a380c6bca63ae66fbe068d9769b86009a5acac7b11f4b92a33faabefe7fca35cb529c1061cc54b1a283b82ce8409a461b7be48af71ac1a5eeb742a7dcac2af7002399850eab2b92918b49737eab553c3632355df2cdeb099cb929703f0ab7a5e36a78e1cfd75c1e558beeb9815c5fa619c818069472b549425fbc4ec2382d54d591f5f2597aaa4ef63fb4f7ecd2e3dff2ddb0d991253f546100e07d396c3d8f2199d6570c4ab8494e0898ba3d703b468a2693a5003d849849958d50c1e61f88c236a795a69c88d6cc15c34934b6bc6df3c8f7a6e34579506665792656b78ebcc217b61301647b7da01cd9d77fe2a290a238785893e2e11075dab4af3848b52e80cf7808a8ea7ab53583793681232941d875e2e15edc5b1afd62a7f91cde8472fe4b61f3769dbc24f14e954557ff4ce8186e985d3d82a66aca80816ca45753f016cadf05a51fae11f749a709c0b7230b4401b9e9ec936b1d51f5ce3c0dbbcdcfc13198825fc8e7d7a75b3a886a8466396ca21809d69c7432804ce280a63a5f198748a755ad97e2ee9dec3f58a58798a7c85605dccd4b1cd36dde190fa63f7011b3a0132d6eab52a202c81c6669beac4e79c6945ba38388baaa88617f447c8f56b32d34b04cc81555f801940c91156b29c918908dce2285141c75cc756697ea475d89718b2f26cfcca7e2d19fe262bb4c3b3c38c447b4f8e0120a40b5550b1a76511d4c84aba5668780d0d69898fe1cc590d54e7db5340911f33628fe67e92d26adda19bd4503bb00947935f79a924581889446c4e3046109a404983b680e44dc01eb60d6e86f21a4864658e29ac2914882cda09c24c78560eee783037507974c30edb45a633754d1b358f3cd5e0314a828b429bacd07785dadc0363233621584eab2c5b2940ebc0a6c84fa26bfe8a730778cca6a8361bd324f758cea0a09d45a636ec40cfcb4860b4002afedac41000e9b99483dd5b0e815f1b6f214b483a49772ee13c4f93c02454f5f337531bc73b171a524b0ae1f2f148c52373e3dbfd315d47f8d7a07dadc3b70e20a82f396c6c4fb7a19cbc0eb720b7daa837052fde5bb7a7bc6fecd6e0f5857e40ff8c6a343884d523a0c25c5ea5a4496e7f9aea6098cf97c2040653d9e732181fef56f7c28b093af6cf45933fc4324a30656e3df653d718394d36fcc8e6207a995569a7ad7855762abcab82d4c79b9f9c6a05b44ead0f91ab1985697a4a5f3bf9cfc126a97a27d989ac1bc900b138680f7bb290f7508f2071baf07bfe7942ea8235f038f98c7371b12753c0715a9b3d478cf4936b71a0365d82795fcf6795f021956639a9c3f6f3660c51d6607f142a8095732ad41121d2babce0640c1d44b0c59d3ca665e7332eccfb97eced3524b10253b1ce5939f5d70e9e8a931f513445f4f640649a41254dcef2a9bbbf06e931c811a2eef6683080db791acb13d0eb4a1ba51812f85bb27f9a1b9c470f363a79042a751a220799ac5f5e0e24d8e782cf7a257c1ccdff35c23dab405ff651935c8ef1f60a35412c4a99ca77a7033dd05e7157d17ecbeb79af42a9c9b787056cedb040c60abffb5130ed619df5a8f8fe8a18439c96871cf8ef9cf2f4c8d5d1fda94a776bc414bcfc686bcba2e9cd4e235cf0a9b8f69b946b5c4f2919b757dd6ee14fb604011a296aa78498d9e7bc3a2f7fe3d7e0655054a9849f19c0f8c0de4a42e81594145e8182e59447b4e1f9914face8d20f0254d7895e7ee1992299fef122e5cb2c68cc3c78da6f6142c76051c24bea0e6c4fe5b647b030466de4780f758189fbc0c01fc034ffce57b38898a76ef41125afa00c425205e1489dd86792d23f524d6b7227cd1de13958545795e0892b16357183c718c0a9bdc5802a258965ad88f12befa5a4052d823c49fa8be185c9da05983936eb2e2c69ee865cec4e4f7e9ac3ebe13d508ee522b2336c07b26e152be1d1c7eebf885a1fa2a532674e4c2a4e91157eafb16d1164b600eb21b536ad06b1ae72c30073b29490836840eeea0fff61bce3d0790be1a1a07b2086572a7d1d4f0745f2e3d485708e49331986cdc316331c1531119e58300381f617262fa147741858c9bff6650fca5bb0fb1c33b5db1b800d4290ddb0b7cd8b6b1a217a2c9ff9474c65829260d7ad4270d6813e0f7db6b9f235a42ff123e295d18b97e0caaf4369adcbdf5c2a21dd8629dd289209bd8458d4b869f0b18004ae428ecf5d3b1f7d69a823cf56226d5f21809473667550e3476b0dc6e7e7ad3b887b5165ebb326aa02b765f32656aad3ffd351a8d0e7ab2bf3132228c38fe32a49355e2908299cb0f18377db274b7389cc28b4fe756d0871a6a6582f99a0caca89b97465ca5f10441b24477bdaed77bb3cb4925bd7bf8551f75ee014473124e98bc659a8273ffcf9048c10778e6bed8f59fbb7b44985f02ed710434b2502836f9fcca47e73f954d4466e2d59ef7a01fac88951f437a104ab00d8ef9d0dc0f914b71d7eb2f9ce2c977a5bb5dab5f0bc3beb2830d172a8fd05b9de8b4b21323b0b18830655f54159c50f6f426f9da99c05d0ec09db7dac5b03c87e0e175378afcedaaedcc226a09c1a5b5c35380011c4116e963b39df5c56f1d2a63fe68986a5c08d5abb036b008df6facf5729540ae12e4b67d548f17ad536c85a7123e398d685e914755cdcec5bdfd7038f8a52e2952787404c38bf524eb004d47adbfd25b5c32dea3c054e18c18c7e53a732a4b9835b657948dc47106e1606eacf9ef036a6e44792d5095f7c56da75a10c519e93f7121852251420202ac73c2a679461efbaa4d542c03b866a2e3d322b51cfd4e212bedd15cf8e0580d20910ac27db9aef5a381cd8b1503a93a86ef709dc9956ed2fc6065f0f556ee1b9e51304136916d91702cd5d64c0fcf5dc8d0bb3e269ad32cfaf6e1646f4eeeebc0c3d85ffd6512c5c9eea7e6bd67b001f92c5a06e43bd4b914964205d074ade3ee9b3efd8e18c8b77b067aaae189c7dc6ce13d23269290653c49031b5414adf76c0a212c40543de156b1d815d5dfa02abf44a106b257a4e1ad36994c6504e45ae7561caa55a4cab67a6e7276333020cab01269eec30e338fb5595b940fc54cd06d8bb94e23471b50b9f8d210f5306a718106c71065af1303cc977978c42a2fadab61ac7a8ae9dc9335f63891f1e28c00865b769d67807c89e36923b703697bc75d49c0cc31fc9f5b1e05e317d65df09eb3204ddc2565bdb10c7e927de8684f0a4b102ba0b06d7467ddaed98562ed7efc11fb0f5c9ea273cbfda152a27316f26f4695e02753218fc921e512ae97971087cdd10c9ac9dfc0175349e60135418aea997faf9d6c0d8167c2b493a6c84bf27b8b293173235e1e9d66c355fc2f9250f0d4de829170c0561c01190c72d4764f9c138517b4d4c7cd54e8553d0deb194abe6c7c3c163fe06ec3cbc3c457bb639ebb07fd2e44f802e3ba326df91799e81e732c108c75812b9bcfa9f4585d201e4dcfabdbace583788fca7c595b302b169fd35a5cd7b515236a8664ee57fb8435867a2f35a92a0872154113f1dd9893f79176e5d6f89293eb3b05014f830ad84160a74f344fd6892b65b173f72b16e5f600e7e5348c809ade04da5cf81eb1ac690a52b59b7d91482458fe9ebd5ae5f75944f284335bf8219e1ad63e7783877a2fb710e41ce8b8cce717c0739946cf726a16960088ae980d9d8e24dbcf284da9d533e0b8741a5f93c3efdc710b257a374e230d79747b98a7b9cbace48792c91157e62b68d7718df5d4cec05cbbc0cf464c7050bf443b699c2eb8ea7f74856781ee0c7965b1141152d3d74ca5b020aac4f49e2022038873d05f47d687f0f9938deaa1fc3c5c6d632238ae918aa7095f92971eeb29cde339226d438da43624b13374569dd92b34e2cfc836b2a3b122d508c35b7447ba0140af02cfb051de171f135e4bed5cdbd431d839881ee512e5d862287d1a734d29ea7aab45de7d1f3777d2dcf40b080e0524d2230ac44b39aefdefd4466d95ef9dbbb55dfaae1820acf6cb64ad6b4aa78bb1d1ed269e6fbe8c9812eb51aa80c5389de33b7e13b0be3613706eba365e22532a8270db006ba733d3133511864bf9002cfd08e71680d60924a1637c8d7bd4ec4d91c027a8cb6fecfc02779cacd95c7d33842b7e35febeebb901205c2dadaa954c699d761345f6bb5d5c4bd9d7177d7848b3a597f634ace33c1fae32c63b09b935ae37500d0752daaec9ec9422653d34549f099d08f29306693303b99c5e1c8dcb89d765488e1d4bb8946dada480965d99d16fa6b137f4c163f6137e0832e5973fb13e56b162bf758e41b5f624702f9de764462faf98d25d9fad3fca7656e75d232b32888526d9ee5b85b3c307972551442503a9f166cd46240f74a0707323b8780bdcd2881120eeef3db1cdf8147a9d6e7423245df9bd88c9c84d225acdad7de56d20b183664133395cbef2c593112f57207432b5a12d9cb3adeaaed8f80d9d2a803ed9ab6e23084f56136b37662070dcaaebc0dc248973a20f45a03e4a131737b70d7aaa9ab32a440d12f8ae337d01e9d8818e6390fee4e77c1b54a4f3262d0fd8ff3f58974a613fe0dab9226d5c4ad1c930966b430030d534a2b8466b4cc4198e142fa80a9f3cf80c50c98241f8f9e87498b7dc78a80ddbec3e4291dcb86e1a8cfa7ea846b587812505863cd7638bbc133cb893ce81197d464092dfef0e46c2d53b3faa3ea7bf9aa8be88a288611735b8ab4344cfac1c4ea1d00415aa133192c9b591cc924fb27cfaca860dc5d7d55b9bd9feacd06de34c14e5ba6483b8c9e1c8ac56b3e31427ba6be0b61286f7e05e0f006d4057d4b437f68253c218e33e294367617a37a807d7b5c16b42255f98e06903b93656792c730a192648e49f7f2a648c344add39c0ba280c62fbc19bcfd7cacab404508e0d613a091d3a1880f584eec507ed87f4eeab2682a7dcb25dca319978cdd5069593f8f63b83d266a5f14f3d2c240e0046b1aa77ebfcbf59ed6719c883d87c05085ce9e4f5b7688353f252eb5af4fa31965c91dc2f3e23469c5acae6a5267ebe95a25cc19f62dfead516d4814154fd400ed2b05cc39844184160a729238491cfdb771ba9fbfc731d617c926ca253c6388e9ac3e7c360dfb2cef6c2f39a420d292682aaf6e1af8b728dd9fb825389237796a8c6963f171a8fdcc4f234486a07557373c7abc6d536951837cc07753e0d189e3ee594a934c37b85fbc805288f5c6aaf0ad34bc43dbf7760a7621c868ce73a0bd0fea4e86715816e490bbebb6391a727d49c370534c162fcbed0e14353f90f9d1b43fcaf09df1f54e7d42738a995fb6d6ab78d3c46a469d3cd1248a818acfc7659eac12fe49a3a1fe02187ecb35e20cb6e7957a145702289991dddca7aadee8dc87e27953f5b7c5de82137f70f721930d8b231042348bf12d0e16ae4bc8702bee050d2b48360a2a7ac8faa853b7856a55d541447ed79cd649c2aab7881ce3986eea33f0be9daa7c410cdd63ce1a503219179e9ec2ad5715c8b776911de0d4c26d308c9d345f98a74d6da38c43d2605d6c588a8adfd2c8ae2fc9b66826db46c8df140398c85bb49bd2903ab54ee7e7f3561539b28d73b0b643ee0327e2b34033b41ccbcdb8abad181dc0d80d7929490958418f0a7f58001e224cfeefaf7a39b5b2489b72146eb75c266266338d4d5ca1813b53a6d5347ec51460cf37bcabfc4495be76e2d36ca852aa9fc793118e16d2da5cfbd67052f732dca3be28d750863fbdfb2666c28dd4ffae453c1c4e1fbfabf23b249a10a0e2331eaad55e277d658c7e1727cdd6d90b2f580a3dc3059d791c839873e0bc530874bc8785b6a28bb70cfcb7864f3910953bade61b0a53b9308b00686dca358aa090eb07b55cb5cfe797dfb64b6e75026456836c51535758441686f4375263d18e82cba4328efe028ac864f3d7769ba622df90fb837910bc95818442d2a71a4ffa71bb3f3a67c311e8f09d877437c285c4c24290d0de39a9d6920e4a4a31e2a173ca0437013a78c96b192c59e7dccd232c207eba391cd888117b94cf2a6c14b0cc891e2f3d836b7c38b06bd62bc183b2f801554e3d3164684c0cf471941ded95765dd677f441bba12a3956ee1fdd9225650215d996da45f95668816cd16afd762a6c314d33d09f812d829e6dc66a9e3d6290a0d52135644543e16bbad92b4a7a540dd4341a264473a94455a19accd6d87e7aad2c10490cc698f72229b0f888af8a1c7ef7628e3a6b0f9d398b24cc52c311097d75dad17c512919a60ca1e1cc15b4df990d3e26a97b3213f62632ebd70d42261ba51f6624a6219d295fce1383cd7e05b004f1e8a9094ce8288602dcbdf895c2a67cb089fc134a19b338a7fe975bd04033c1751c7b2f01591ed806c9355cff64c6c0d803cfccc130747471aa46d75aa051f120197d99c24fb387bee1fe1f350c25e8d7983e198b45dc4aff4849008250e54ec11eddc7999ff5c82458e8c68b3748610b628928514a5e84a5ed9e9ca7eea2bb89ae7a8e630b7f0b8837f2b24a15a54d121d87bd2d846540273488a197cd17942248371b63018c42dccbc79420aa3996ab8de7abed00f6e375456990d6a1aaa5e58fc56dc4457e9b9a4dab38d30ffb328971fec7e9bc044d57237715aba1307d6b80c9d2f88e164cbb662951251317cf887dffabed0e562064a30b802aa6d82501a1904bf2ebd0446a3e005d7536ad31173cb58006f919e42a3dc06072c03924bcf9e4117c4ed76927573f82ee95654f058320fe273f6b3d71c26dcefe874fe4822cb6e4a73060151f7683fc20435bb7e4f37f49a011716a96aecc7085722230fae2403860d6a2f18cb9113b218188c74dd7b3aabe91bf680bdfe3cf8ad93529684cd63053f334493358b88f39014f01c7a099f6442e614742d11abf0a2f6a011cc4770efa059c7a008a21fd0c9681f2669f79ab4622be28666ada09c8f19ae0e5a006644c01bb810d631f7017dc2cd5f58bc7e64270b92fe87882e24c1b33864746c6a03969e7d2308a09a9e3c4fb21895b98e5fe8251e9555a2bd66948898e3da32c379ee9b5bd6b77f463e07740749d8ba97494044f2df84e463f6adb99afda7a65b3e7d819aad8602b7ff90ce8f51e9cbd78060f62206369b256f7b167a84ce2f0f7847b91557c9bb0dcb15fd79557a10c38e1fbf091cefccf85d48e88c5678a568490a8fc4f38fe06ac90505122ef00933700d6cd837f6ef14714ffc85fe75f9f899f30c15b6e6f78226d0e61700e0cb797776f88afeed25ce723ad77407447fbd4be76a8a8cd0b604e204b24673869109bc0825d2575fcd442abbc665df1218587467fdf1953de83dfe14ab6cd3648bf24c2134a526a028a4809b0f29ec25e80c92117d84f063352c8b3b20d657f17d273cff290e61a5f8c7a11cd95a08d1287b804369683d756cc8757ae802f583e8581691be5a15af6f935e4b35292311b635a66f2e94894028db203cc80f91c9a77d5b49b70c6e9123e72a1f4a5a79eda5326aff085cabf7fddca7dfd4371d3135e04eb97e8ec1696736991ca305b98d7700f5dbb87fbba216e35df73a0aaeee40c7151d55e5c59a38e1aad964fa7f9ad07caddd79d3ce948def96f23c475c06e3af679759f5bc7fc30043e450af1cb4210f75875b3780320eb9705619333f99b797bbdbf0d280795458d19d08a17b72ea4aa10dec5f6fd77c83a5c9232078f0f601ae4fd7658b409c4a7acf060afb99f15685dc61291ca5312ceef16a268c27050d079a4fea6dc29723df5ab47e3c44cba41e077b27766118fddcf602459a15bbae98f53a750c8e09c15e55bfb18c8b9adc4f7f2b6174d8a0336c996235c52d33b210d83d3df9e642a6cdf9bd18a57c14a964bbbb12adf62b0f554aee531c3db2d57b182c0215201b31204a04b0df778f33b09cbc88445446a575f70f203227677e3482e21c105cecfebc802a0f0f5a989a02878f4680245cf91993eb29f9a6c171f4b9fd45cc43e6132b537a041f2eec7d7e2b61e9b5b83ec08f9039f68a150c4aeafb97f597dba5e2de93bc16249a545eac4c56f8e70d8902582d7bc98d94d9af6d3024ec24af64e748e4b649f23684e21f01869c32ea292b73b6369e9ff449429f6bda7cca7c00dee776c736bfa61f14938620ad35e641cbe9680a34c46d08572a8f2c7de7ed5929b1478cfc9a0e15947ab0d6bb7bb41b9331bde11d6d85609ef252778230b585534397b64290000a79f0a3c02f949a88b5cf372fb18989224a477daedb969153a7b6e5a0b6ab4895d3c8306d9c814aff68e9b799bec673354669228947adbd15d26a9f153262651ef5d823f80b06b177a5db1fc4c4b69b8e881642fbe83a3d56720748820be26ff170155660d7ff6fcfe1c985920637d758104de7e2bb52fff7b39eeabd4c58becf41c807083d3cbf5b8794bb48d74000758cb23e74a828b5a8b57d0c83b666c91095ec802c88ff1d1f43a3ca0da5136b9e42917ffd56f4fa0e137509164862642347db6fd12ff655b1ac6fc91a2be3e7d869877669621ed2456850aa297dc0d439b27fb1af4208c5522332a92856321748344fc59216b087e0c015aeaefb95241dff01a795afd4427f5ff07a5d75201a1bcda59239fdb0460215ebe677940ca293a3970ed5ecd74dbd9f44c222b8371d753a32644e590bbb27bcb8bd70e5826cc132f75eb006d334d84310e552541b09c4dcfe4a9edf7255c4210a970190b7c0a3853654e14eab68167e046325952628345cc8b16ed4d1984d48e96dfb9cc3ae33c833bbd2717e2f9673e2aad8cebf0625b8dd18a714b27413509488402c77a004885db35b90a965e3c93406234e761f04f3539f3ea969eb8567f47b269fe780700b9f22e78df242314d2fcefe2f1aef5bcaebe5d8fee8d11fe5c6acc8dcdafd2de16637b9eef1b93e56eb14d83daf65f04972de186c8fb36e5dd88e16b34045876ba2dbc0649ac47afeae4304d97a3de5e3df134990ba2f94eb60cf2fce6a053541e4798e5617df4cbbe7d908d95845136a49f3ecd1a8eed8cd01bd70cfd5b52675a9a1c4b92adae580871d84fece206b171b43dd432ad5b9ff808de61a1bb6d19f74453b62dcfbf51ffea18a9635264c808415ea2802aa3b3a86f6db2cc51d92adec69ac3b892a5fabc136cd3302e4dd580a1d38c294b9d1794b21ee7b22df2f16be966efad7e22e542aa2031dccb54f902b43c8910e3bd8ab760d8c5141e0070b7b2302ae6a226b856f8d723b6c87024d58d8597f6c63f426fb168d55c1e092e8b913caec38ab5967803cbedec1ae046b2c7f7bf670a31b79a11633f10bb41d5613ecd568093b3f2407969a08aedbcd48fa71bb0527983f38a98e50c4282c244cc3dd5aa17bb8a955e3b3ab4b8bdd3dfb882465e68d7a1d56d74d4d22bafb91885b5f399ab6de39c5efe97a2ad29579419b7003634f7e4f857606b5f1a568b4baef3c13b3c33c408130780c2aaca4a5544d49cd26ca2c8e0cac080cfdea8a4e1729c53ee0e6317f15c2c903ba10dd8b52a6f5c47a2ae4d1d5392c9a01fd57306f00f01e22b7e00d547ac0566081a530fe8a931b5cdc3115f7f8cf1df89fffe84cf9e02eee76148f1b94f579e9a4e1176a5adad169eea0907915e9e3b749ba7b228965ae1c6470d6dae39c250f8389ca925030d1512e56adb6fb9b70158c6ba4287d5bbd390c3b9c0941900522f64744c0f101c519acdfe98e66b5c42caea4eacae32fa0e11138fb2052f5c97f50cd91cc785d463ae2a035b551fb500aa510136364f707ab8fd4adab9d1c463a120787285a3513333628517167350557a24860f4d7f0949a3372f53823aa43705ba9abc0d2019dc5b4e08b2831ee83c3a4f847dca705194501bcfcddf2be72baee1ece4d193bf826fc6d3a86238960296d1ca5710b808b6e4c7e5d6cb221f344e6283c57aef800518eb1efa59964c10c44b3940f4165b900f391a539d1e545161edd7fc2c64697e5f168bcb0d878c95899a3fb99dc44f0d80692fad96da995b3f1e26e35ee0b7096d6ad88d659ab844214a4f276db3034fd1e142f95d8442ba4d878337663b04af7a2cc42a3ddcc5a36962bebaff304e767c14939d4b0e588560b63725d201ccd0db40a57f5731973e1d3cc64baee5fceb4d9c29578d20c763d25a5ce202a6da7d73ba42cd032416b4fb1672ea2f4a32ffbb53e975c4e8a222cf665691be0fe8f314521eda7296070d29087735d87ff4101736c9e63a9b106e00993bf14600c10eef39cdada092e3c75d44306d0a1dd4a0052a264e2742376745298ad3c6888c862cee46b5a557346ff9e006adcfaa8597318bf19e3bd25a3a2be371d10d9ab83b0618aeae92e3183b06e3e2b0130b9ebc30c180c24fca87538d15ef5345faa17856f94caefe7c339a5da92924e8ba38a541629e088f1daadc125df603e8c1abf086b30d37f4cb9146ec7b5106652b5ea891de2dab899cd734f8e4a30e7e80a31d309549760124222aaa590094249a4b3c813ffae6e2b91de9baee168b4bd2950ff32e81a2790b176f08fe2e365a14a4bb27b44260101e9ebd9aca62dcf420ebb2679c96db05335500d6119481d2c6a98edf4b32500b128696483a58d80f015747302cef649f57926445e67b9747c6fd5b236f39aa490f36e4f44461acd4d00218709e0b27967c3ee7642524b9d07449c593ae690f398fabe4be55cfc9e831cc994e7906eb540f6b206c72c8fc0b3fdd1aeed24588ae82bf379f41e06223a89bbcfc941281a97be692b609e4153f62ff50ce0b39619c73a26316708edb743b8f1fd51bd6ae408e01c481b97343cd501aa542ff804bb55abf7e2789d4c06b1c35a06fae1b444d376ba1bf0353f8b8a8717c6bbb924632de2c1d9ca1c7d940faf23bbb26ad5156d19b93e86c06fd92c8537a029b08ae47a965979549e888f73fba86f9641e9917947823047b2858b26a208b362c551cc00caf67803f5f7fb154e1ad5c8ae4f3dfe4c98b18c16e49a5a128c47940a529049b7df16b1031554deb1121a99739a7ae3e227e6db2ea06f4180e241c1762d3ba8a5ecb93e3da278bbe278ed04777f689b74d523ed03ccf3864189f0499aea888db323512a2ae5d0c4fda014267b05b443fb2df3b8671a6044e7fd2ff033bcd83b3c7c8bdb2249ab959dfb741c95d9ca27b2f7e47ad1f7649c73972b71f795746a49527044b2c5d82e537d33b1ee959d6b90e552b26a7493a4177782743889dba17370583ee1f969f5949567321deb9f750e8d520c681c03be6b80b3ef69d29fcd0d33c09d9b19e589f153ea51c503032c6ab7b851b9c6d66a805af3084efb3bbfd3e27bb60863362d3ecd47b98e4399ca401155bdc91cea3095c70ca8b3ebefc863a38d942785f1f1e26f075b3d4bc090e296798046642eaa371e5baf788538d80bb26a5c3dfc1dcb4290cd3feefaca1745696d195005362ade2cf29b5c87bd521f13db2813e070d18b764306cd1211acbeee7057b9197186bf87e2bc953c6d4a792cf6342456e57c0d6a8a383f9cecb35d27ad7a3cd73cc3184d4a5722c716826925a337227650ae0fe13cd7d53805e1d20327c287c60e80094f4082f89d488e7c684850bd8c80b6e2bb0c06332c56a0144219a1ba2e9006d836297108f524a6edae99559c0252159f49ecacb8da176f9d2f51ce84bee416ebe460539236ad94218d45b6bfa09cc3d15f2bf0a065b41e7054a1567bc60e07f4394bddf33d135bf6778325bdc6b0dfa88f58e4c005f92b30c9159ebf7dd2be3f5e1008a67a6cff9248c5566c9c5da81f1341abd98fedd629566773cdcfa6d29dc37d1e668a736990160487184fc0bf4be307294f75098ecb6a80b28b92d2d33d9bace74be760cc827523b4239f3f74815015d1f4b9c0bdc6eb189128535c04a6f52ca91bb5e46bb97ff8999293d28617795ededd54af49e0363a48a0b307c5e9a672672809046994abac69d4b935905b83da563703aef098315e66bad7ed6c0f2353c661a0dae643084f736ff1a07db641d5b35699925f85aad7a6ad3e7e7a308c87d3d93a2f654ec7cabe1e8e5f2cde45a078bfeaa2344fb7db3d6d385f77f42dba36fab78f3ba35b0ca33f5662aeabed5477f11d5a8fe517336b9415220d2f6e7ecdd86317959297b952b3fbe2593d68d41f10868ab7be72d00edf695bbf5cefde548f809aca56c25d5e9ffa504b7ac3848b3ffead96fdf192ae6f588d6fadca0768c7c577a8357b583ce467d7e26b23a1ff1a11e07ef8514c7d3750de769bdcdedaed89fd236c93ec95c1310d80f67248e8268ed58f1a9d5ee8cbde3659ca1e2ed226f6bf40c8b99b08df93d05d12d2a00895fdb94d1d48ef38e28ced8301676fbe1d822c2df5d6c916f35f4a93a4ef0112a7564db57cba89e3337eec53ef681c7bd6d0ba5fb8424720a5915d5eb2561df05fa3ded5ac3b2d800a564b092aaf0fab67dbfc10dfafc4e984da114039fba82c476115e50ff16577bbcedfb2b06e8a56dd19584fde66940588f6e575b35f5fe5812850570cbb7ee80c9d3fbcad54c9a7834af427c2b5d6e4814c7d21d52621b51613b1f8e8e58c86efaccea767b182f09b3c4d438afe6c2c21bc830d500aa42f24c04634ee764403fe52d8321a92494efcc82d650079cf0204d50be6943438051b287bef9f0c96ba5b19276803d076a186d0cb0af423482c94d41ee9e105730dca6a01b16eaf0acffd18c8b158569c0b532ddec39745dade89a12e4bbbb3a1e018158c5ce7578e77c0cf7f9a3e9aeaa90f3861453bbfedf0cd0705e665ddb87cb08879a79a7a0cedc25d9d575817076af3df5ba1353c0db4b1313556992f19d43a712f81cbb03fc34da9e1fd4f55e8f984114b293e8008942cafdc039681d3d057e48a605b2d4b6749aa984629ca2cfca42cc0e43b58d837816e85275b077bf078cd056a995a472e1eff9196c56ce798302ef70280a666350c655106fd8a4f4446089879a1e64fc0cdc744514308db4e7fbc23eb247b304cab1d2c0226c05d0ca9e124daac1c6a1acd004ddfa974efdb02c4628fd728de150689a62c01c17c077a1aa0ca0d1805be81681b2576a663fc8433ca59130f649656a1245b3c7d314a158273546c8cfc414b1ed2322cb0877f4566bf70c2b78826d3aa77c326aacce1d20ee66f718b3a7c0fafef33147b961e844ff4eb110b47d41b8408eb101e73a99e7225f8b15797ba46a8b2d309a3c193d2c4666c13b11d3af11afbeac7eb63997cd2ed365114123098c590cd66ca9e80361f9f93321df01323d88b3cd582a8adb8fa1d9d614748a032f473ef05fdec3f6bf580404bfadeef4b2adb55e899d5757452cf62c91295d4d4a845baa04bd45000865be844a8075781d9a508d729a0b1dd1d2ff4147f6bd536feda17546bb903fa29b55750817cdd272c8ed02f5764a0696e7c4bc53bf4d7fea3a4671bf0d2dd95dbcb768a9d1e0d4ae2a73da3014459a9775f4b760ca5252286a076d71e3929f80a665f6ad2cea4cdb3a3d0b215cc07da864ab6f12d8f59070b96a8d9336ab9064e01fd4790a39c818c60ef6fc33a291474f8c2a9e9c2180ca72e702560737def22eb4f9645609e277548d79b8a3664eaa8ef46f5b9d998e547fdf9c587a4e27e30b6959f2fa949dccd4332f2ebf72a21a55286cdc98c667bf7e14eaa747e3d30330a41872cfe3efb4f00f68f6deffdeaf57d3b276681c915bac8a3f8889b2bc2b7b7ac4b48517b19bb4b8208088f3fdbef5f442be242bf0bec60732f5a27d794862856caf2b0fb88ad36e085b705f13ee4f6dba25dcd5940c87cdca7c764c533e24c9f512ab9b00401d97da85c942be92cad43507d77ffafbc823997ff56f06b2dbbd7e28dea011f0486578e6d57104081743dbd9e3f48fb88e2c3c3d11ec33a73a5d382f5a87a23d4b8642dde6f47ef995df537cb9797f5fec9ce607a2ad6157f32715a54194c59399a94efba168d170128f9b26e6e969b3e8694ff5f9554c00d44eb732f0c821128741348397bfd07cf8307c1b8001af27f207353ecf52ded757fca29714767f58b9b262ef6b59750c0cbcf2181c8d199d0f8bcfcfe690779a60097551e5496825b8f6094e5db5bb3a4296f27ee2f71f92f7fc534364ad97f8049f2595458b75815b5f6bb57f797801033314381cb7e0340d39ff29014bc4399862e1805190f0f737b75518ef0ade1024972f095f7ef24e45f0860afaa77a6e1cadfd703355d9ec27cd609033658bd8724224670af94799d9194f8ee523e36e132f1e4cf19258e8a17ea3c1e0769951b20b89303a73e5a8cf04862ff624f7614123e405d5f8500a6d91d7c4c63dcfdae67c5f4d6778db3e6e123c4c2c19d87738897a09312ddacad954a5e4e33e021c7c7fbcfdea63dd74bdbb8bcb6c2d4f3d229129276586ad61b89a74e60d49b5bd6e60f8d25172c948ff9aca70a6d7cb9c3a9b720f5e11d0d77e4c1ee8164dfeb4203c1c26e1d2e3cf5ff53afc1f73ea8b14f1745dc89e06376ba4c2a98ad8a10948372b586988e93effc97a1b4b17e7cee7c5c0530bdde86fae1bc93383f21830f8b0a5c94121100653d96464f355fef7db5731ae359114ae973ad9c39f645d4fe8d6368af22a19c7e365a7a6db8084f25cbe615a105aec8ee67ea165ead889177d856f876c2d61ca904a48d66db684080626df14fbe666d653a56f5f5571e317624319a48f1b0037731c2a594bfce1b648d4af6470094a0050a481231f2f5f466019b49fc3aa7d85afd249a15ee709ebad5a23300d6c4c994361a1fe16fad94b9e462f1e3c5d2fbf4cdce743f891cfc9e9abb782a7885e06c91a22c8ba9c0189c6b539e5a9e996fdcf4cd1c328274b76117995d508e124c21c925963bcfbda0dc088aafe8392133559fe3f273cce6eef9fb6e9b37ccc86ddedad99c49a244981f63f2fa24bbdfeeeca458d994b9ad8c043e063216f79b5ac5ce7cbd700bb84fa56182da7ed5213dc5550a10d4025a17aed1e059ac7becb0d9a52515618d33a35d37a794a40129d0a37fb21f7f219cac9a13c46fc980d7b57fbf81d6d2f5f5a7f1130ab1324c1ad823e671512e56f4d360cc96b37f636c5a5d23091b05bbddbcbc952bde88980c873dcce56ae79f3af55257ad123b7de82e4527e9059a0fe36b4e3b3209516bef6e44c8a830a33945974bcb1bfccaedc8552bc051f59e14393857db40a444ea5761dd34fe6fc81c283cedf2b4af48c361de928c2fbe8d7588bd84092c1042448b70c66e9084b4a2c09dca7addbe0a6f9efc643e4ee1691a8ac3b16174e8a781a3fcf9f1566568909a1ff6b2d02956f0b1f2967c091a1f814b38e0cb9fa755529284412330888a1a989e85d58355b3eaac1aed69a7c502796d8d8befd262d4d91d09e32d1da589a153dac673b1d6c8fd9d16908e4fb1b0916316936dc2fd29e86d969b75681c7a1b6408de8457157ee8a8676bf3606f6451f3663d8b63f16b9df7c63749a21121c3c70d4c8e8f27ba1f0425e098203125e2b57794d35947d2d360001cbba82ba7b8f35ad63cc7ca39f91f9b3074e8e6e873ef11e73008f811832bc687059356fc336bc3989ada33f2788b43b6a2a78ba58dd03691e7f36967381f530973021c7a32d314dd1f1362303910cfa1bb654cbbd4123564e735076dc5ad8c63f627073b74c6cd61ef2008b771a81edd78fa88a3d87b56958bdde33a624b9a119882858a842005d03832cd8cf1d26751c442e162c24eaa342b593ff4dadcd400eb6c4f40a60dfb2687d4bdc2b42a79e0ab23545f81a8b2f008b83f0fb5a7e3d29df5ab4616275f69313138f36e94b22d278826deafad5143ee2560ef6b2c5818414d8821392445cdf115a52f834984e35d368f73f9269f01485ba7c9524a5c853427a888b0e022fed590bdf790a7b9bbefdf15e010a698cf3e970a3ae4bcf3dbdbe765f879dc0854d5c2b478d999204e5fdfbf3f9eeb017894b984f8ff31103388adfcbceb19728ad49f68edb689006adedecee455e50df050a7c735445e1ae52ae0dae0cf438c4ffa6cbafbe470d12c3647207519a7aa6aac82191cc27fda554053d3a8f9848bf0fe807e2020fa08eecb3b63ddee2e7c11f4322694bbb5f21245907a60442ac9f1e36e22a4d21a2aff963b0f70817b98c1d75800d882d141e90830d3a0cede5c4e44f042c09dee509d08b8073b39993e6838f5d2fce39f7f5a41459b5f198134f496bf6a9ca34daf4d1017f4c85900b78060f667cce38e0d1fb881b8c4d06591a710d633e0e1df4b67732c77e9a16860f06aa0b32a4f4c9e3838876d2fea9ef18a3902f4550afda3118737b42ff69bae8235ad0301e8ae134300deeb631fe89bf70856b4cf2a315b7c24359aabdba7ef0b4ec5c3b82f50c17d634fd1bcadf7df00e01a8ede5209b592445d54c992e25259fb92d643d6eedd5a77ba00cc46dd175958f6e97d9aee71ce0fc68c6971b0cbf0dc7984e9d9dcc188ae2385b76e6bdbcd7eae31ab43b91c51880ebb819e2efc81da74fe0f0cf0556db82eb5c7419422e9cb2a800908afd1e032b1aa26f5e0e8acbedee680f0da8a046a8ab62b210d9b95fbf4a838caecf0ed4c777d5027d2f92f55be5aa5d8aa8138cb4239eb520ed4502e968ce35ede85c069a234ac1890eeb4aa6fd8abff671f853e960d16282e1d3feb78cf0b60d68d7e464f37253d856202a2e6fcb4862effde2158e3df877f6b43ee8a2b84f4bb00bc0606c5f96b77de67a35aa72b72aab9f2c4fa6936914d31de696e81341824e139dd622249a7f707f75cc45c3cdfbdf19ee491e1b3896aec2e1b98db73584590caccf103babbedb1275ec36381e45ef15b1e89f263e5fb4b4c1e4343891369cf8a0dbbbf359aa201a74c0318ac00ef7934f904814420f72722e4abf002e6499e31227ec2ce50977d7a22885785dadaaa4d4de1700f60e7195aed025835d73205ab7be67f0ca0c54a1f17bd391a3d31cb8f5322c5887d4d46c573da37c67a25ce2cff6e1c4aa482ea0bb1dec0f654edb4ccfba0e7916e2fab72efb494df857e3f3b9f82a73f69f77e49d2c07bd1ad59383f6de0bc41553d36587099ec09c859e76ee831036f89463bc5c3dcc1759b58dc0b169c91070de44771076321ad1a0828bfe2d480338e16696b58ed45c3888c13abc1ef89aaa59709b37daab7d5500187111a38beb304dd6406397f8c36793c5b27cc72ac51d5f478e5735c605c3c310ae0b37678fba36da9722b7c5840a178d16b4b2d3deca6e8f4708c0516a285ad443b190c268c1ca6af934a2fe0fbee8e74da8fddb60f3819dc4c9828ec1c85160e1dbe58f96d6bae0bea2abb54e224c96a5b201a9264dbf5d105cb80520a7181ee82b5441a6466fe8e28aae6a4ff52a623a54943fda68dd48fd10f3daff67727228ff1eceec7bb94cd72eff9886277154bd8b0cd8c61539d150411d53bf2ce2cf241b1f12c348053ba96a698b59e87371a00db2beedddb51865e8a03e9c6711b60a2431abee5ea993433857417b2cbf973569c36022c16a6d23240dcb025aaf0e1355e449df3cc52a8d8d20d240d4f7c20bf6c8e5764462b9945a9111e9c455f3e11e29aa564bd21af06b9cc2424d8dd69cce68b0216f774b82c3b71e6188d83d9c20172ddb810750769f0a98d5ccc776be4acee71ce6613a44f3db29b2b40f82821d2ce1af2adde9d7673030014d027aae6b2f850d1784b8e5a6ad123b985a7a6ed5463a5bc32a837b65a9c2f7077a8e6623c89d1750df2af9b68f2a842429efa115fd959af906418795758bb837e503b2f91b2e81116e5fbd0f991e2a8991a2ba1db65d2bc914edc55e0bc2d6058bb0b375f72eecba86bc95e2fdd42107a133d157aa4722bab48ea4d24bf55057ac58e014300e90c4767593c4751cf05f696c68533385fb178d7b14a516ed66ceaf4716745e379238ddcce93b569b33a08e519ea8fd209da7faeb42f879241708d25e1e4873e87861a8014fc1b18db5557cb78effd95f30f6442c9054d3eefbdf4cf8194bf71913508028bd6976a117778f673fe159c2f0cd07a604ca8e5bc8bcde2235762a2baac3fe1968216a3581269570453a46c9c49d6eabd928da7af348a3d1a8be79dc665c18340e50a230154175a7e0fc68ed586b9d874d1a5caa0e342d19f655519064e2577f64d92548f9d3661a30ea69e6e34b97f40e82d389c4cb5e9f40f2802850730175ba9cc91bcaf7133a7cf631b38e8c8b992c6318a5857d322d343b25e8fe344a89bc9d3e984e484cac2d27d77b09e6912e41ca2fd7529d509be27de9ba65697582e8dd993f5b9effc878c725ab0789819f30b301898bb16893f41312f9b5e77f987ef2eb9d7b74ad96e881127c564c9d059911590debadf6247a69d61b8af9c28f5d3bf79676c8e9519d9bcdf9f6c2f7d47de91a2b1a88f795ebd4f3b3d6c32765666ab50014b7fc494283309a99a8f9c5f82091c25ceaa03b9ec567bed8258830b43ddf4ad7daed796863d21e9eccb1196b1a7cd905d4fcddf28d842988eb11d87cbb4659e9f9fac6cd04af3e666d645cf757a3f9aea4c569ed003e5eb003ad30b00b1876c1db734d57a0fc680bb697943a4df89e6e8af1189326b4c6b0aef785db4bcc61d189e74df0b74a4a6a12b65f9546f05881c7692ea4f1e8c97a9e9b3060a9815f4bd5b78d625ceb5666b835aed576548b187acd3d2d9505eb1e7a73c61d8721ea35a54dd939ee3ee5b2f3afcea5dc4f029594366ee5a7a64afb61cc21bf7838c591aaaa449e3b938309e0c0face129c49657a9c447f34b2682a581af127e209605409e55403381d4d445a709a316f7f7e19a29cd835f2543626496a375d197ef5054b68f6064276abc63ac21300da10462b5da86e30125d7708f7420db57c0afc5137644e7506149df25d2a30a75355b9ede1232b91490bb4d98f74d6274a49fc02699511c63a7e61024f358cda721052403856010124f6d158b52a9f0db562a1743992e73de2b8c06674c383841ebb76c19b7a916dce7656ce6644444ae608b8639de6e575adf1e523c6ca505fd2585802751684504c1a18e3539b6f7dc8d803e112dd2500ac35108871fe668f9a861e982123dc3aa3324607bc28fb14db3bab6fb1ae86293f8be6eb17fbf269c69ef7f6f7e6aec126b3c8e24f9c8dd91668021e27ef54180d4deeba5a158fea6073cc17e26f842582540dd4776675ea1f2588d3e6328ccdb626b043ad98623bc63940c3a972f03e2fddf51502031e85bc0e781e6d1098a2368c5aacb3de7441f01ac6578bc2677279634393fb11f2eedb1fefe41d0f3bb9db641356ec98940543d711afca7cceb7f72633fd76d053550c1f2b74dd4014b894acbb7ae1f60f6bd68c5e64e31004d64edc59c32f7743b81ad5e4b2fda62d5575b4a62b3480fb9da9c9058514b149640be656dda0bc05fd2006f4fc9163ac6d961baad912fa85507b12b6d761bcdaa42072b5394661830f61979edf232fa513f2e207658bddc95b128dd97dbb102d64259298a47f66b76c7b7249df2a6190da6bbee6183491e7e230e8b1ebc79dbf43489c286899b5c3ed9850e9b5f136aa4d160106edfbb37a252fef40a344ae16f9e56dc2b8c932643f3adeb18f556ed6ed34c34de6f016273b8eb13c71d422c4e58214946400574ef9d6e18dbdfb044d2adc0d69ebdb8a325af7f09d9e600cd829df87b382e33e3b8e380d1e43f5cac060d95c4e6bb58d4f29d8207df47aba37dd24720dcdcfd64b653dc20fd07266e7eed1e1d753ff69b3f4e541de4f145ec57898b1c9f6acc9287871c047255ca84bc393fa46634c08f72a314497aa9293ac4496b6ee1736860180b9ec26c5f6f91add9a5ea6555ea07ff71e274c25924cc449744da4132ecf482c2967c865dc23aca967aed7b276029a6c1afd4dfc3f096bd8070d540eda876534c501c80223763aa3a706696af48a0c3f576b8d4f39068553284808d6e1007250afd98ed2916a694f18aab244f0569c8e3e8f5bdb6360635eecead4d720af9452a452048724b405ffe3ecfab2efdca9e7f53f4b9b6e78feafa1be053dc1020aa41d826e0ce26a405f1d236803d67f81686080765c9911bdd5c6288f07d8a9072c997ca364df5e1c2d28175d32ccd8c084a151eb4ac6bebe822af59a9c6a28bee09cb926706cac2c51c5e30f0a93c7e30c4886de9d9f93866442e354883b63ea19d03ed0bb5cb76a37dc5ff2890d8df294d0bf4cc337a57a6dc41c26ff161ebb85ef7e83b3a20d301b47b596f850500e2afb21f256248dd61f2eea1e7ae5c7ca5164abe4d6dfc3556b3a4c165bc5af1bfa58831ce4bff0851b1790bd98c4a296c9fbd9abfa28cd47e80d49172ac31d54222db0f2929ba1372715d402a77373b810277a2b85b212f6cd022b2a8b4f0448661d4f8d45a1ca725cb144c8bb45470304bb0017f78395ec9ee8410f819d417690ce5cb39ff533857584f2ef73cac1bbaee6597e548c6a9dc56eab5d978882c6547cee5593bb88e8622bacba896219368972d2bc956f9a85b23e72cdaaa6370c10518c491affff500be5dee57009d66bcc072affa7c071991d014b440fed1ae4f2434464998e819db6df12a136b498b0956379c6217bf17bfc3154c1ad48ba440add73ce4af08cab72a1bd2c9f8bff6330375f48884d66b41a5db5c0ce4a08cfee11c646e743c1721f8ea22438257e8fa4b565a32e4dbc0b72e8303dc7619161f765f5fcb0107ec47efad379628b1f6d9232df2d73d9afaa6647fb90e0446d5e8fb50f09f42f3c585fbc7637ca1142455a47ccb256732812c94b78a63745e1c93628aaf940abc8e8cbe7cd1ffc0c67fc42617142741c8b6dbde4388d63e4419e340511bdda57ba87e61c4d78f9577ac6c3939439862baa7ca494a0c1d0ae498003d9c2649cfc7f8475a3d124daef9dc4192fd4c55626f5ee15bf87f3a41b3019cd4486d7465142fc9211201c77077ac5803ae6e8b675014f111c0fd1fc29805a68621aa76cfa417c22a0321598b03b3fb31f8dcc29aa2b4870d9bd1c29061320db3940096948b680675fb32e8c317f677603911f261dbb7d2e5f4a7fb829241c9bda2901b8926e87f932cd65b8a7f16ff4616bf9f5c74bc3917bc153e8a639e882f19c122d5c91606a1ae214ca67a1094c771830f0d75082d33ef0162b5347d290e93183a93487df18cbcfed6e3bb62dfb39df73bce9578d1ad8f0e2393211ffde24bf32217cc997e938b77b9a912128ea920deb91040e7d75d3e6356068898be1ea0015a9cb35134968601be8021368a39167411dd93363322b9261c8d19d387760e84624835c2fcebe3561159db8b384910656eb85fd88e5173728c9258c780a8b926fde4fdf8129c83991e462e236e8ff53ec046d9b2cd5abdd25163ffbda71c4e69f31fe72a18c1301ae2f8aa5c202b31976ad57ad582c523be29018ce4bfbbccc25bacda9f9de08957fa1e968b85bf4b7046926d5b4990c9a99a3dd4c6973afbb922bc69fe017376df73f97c80382b8c02e421df3b7e6609101e8dc0ca9cd9ca64436e4c8f59d88324a38ee604193080ac760f4997cf13cec7124888cd4b9167ffec39ad7f3bdc43c48ba1cdf266a174386baeef899c1a170cecc3e17456fefde1e2f798f1c1ed1c72dd4723f73590b3e3935673ffc53f73456decb2dcfca38360755797ce1334c3de3b46096c972b20c095aaa647ac527e862541e66e949365296e042936dae68949d255df3fdbb69120bca96b98e4aa5192b98f0e1df43e5fddd8d1f1d67eada243d483d4474b48a4c4a050d25bdeda5b4abbc12d0a7822f36112de46cc1bb965c2b15c76045923d00ec5dfd7f7e065b7b292394571c4d140d880974e2f6945ee1c64c32d868062862df36fef11332f89e1a5354e81e53d50db3df0ec508db361de8bf772d86332e811068d8bd719b71828ad0d08eaa306e8253967fe2d665fa0cac9ef11d2e21ec6cefad3b6000c29aa67f1289322febda427e0a4bd68024b2af7b449f8351a1b3b40473478ba27775101c42998d5b885b3bc218f040c00a03d8da700004c840ac8fc6a3d820c147b80726dc4d4e8dce2132da401fec1541c6e5bc2c24287c74fb4f532dd8ff1d5781e91c14873859d53244012dd222d0870e223d4ba3c75cfeb4ce508f48c38dcde2074c439aa05e8dd99d46a49943263a75aa9c88333d7b2a4710b2cd07e8d9f4cb0b8b4c1479f3910b311282fe88f692c7f1c47b3d23cb5fe7a5710a6b84a19ddba9b96f0aebd3bef9038edcbc356c35e43ebfb8c53f424c26cfafa7e5c7c39d65db3c07a02fbde8389f52f19f0cc255f6166e365dc9a71b3b4d3325cbd8668b0eb7180d00cc7949ce2dbf327bc1ac83d51e1c58026abb54ec6927a9caee80c4a63c64ad0279567035cc994826dca47fbef1b9f7c710273a0dfcac59231e378ef2ba7084823af6f297165e0011edc3fcf8bd1e00874530dbacd5b63c01d5e1662e8aabc4678794ff158a1b069c01b6de3bdd620ecaf003ec38cfa6e5028af2251e9d49c334d9aed16cba6631cf22e6cc5dd74f5503113a9fb537a942dce20c10f7b5cbff6d7718ff3989f99b5684a9d0be480c3be5d6fc51c93f2db6be2e83061e3ddf84a0c05984ddb2ca230ffd029826c75df4493ec396741bb45f238eaf7f77908fa62aae5728772ff5e771a1230a575309f4733a7a52e0c6cb156022e02fbe0dc53f480d377ccf9ad007d771922d1e493230e7348b6a4c5933004c973a2844d835e3bdccbf516fc31c57262f689bace750ad039a42c920a7ffdab408aeb1dcd7e085509f80d6216bf68fc151be73d9dd7865618f667bd870d8c76fc421fa2343645ec3836755c7f999f359a2e72bcefd608a88f5fbeb5acb86ace3ad28202b9f3bea46dfe9841787991ad5107866412d99dae82744e854fc4985880bd107b06350c2172e1954e776e7338add9359cfef2dc0211cf06cc0e5e3edc84fe40af2d0578b780bf1a3318d0e690ce3778a801ffd0ad7ebb003cdf37aa904af4857bfeacfa0db680f877a58a8229e27b59bb1ac15a65f20db1e4808c56aea875335f1e44656311bb13dcbdd7419bfd9dc72c2b69c5090b1fd027e8757444735610c2a701af46593fe810d98195a59584d45c9268e0294514f9892e4e78173088fb086e7e4765ec96db216ff79f57c362fa0887f65e597f74b9e31e17693114832cf5c58a9636d5a5bf93350b0b600e5d50640eff9e13473f6af27e84453427a3969d58a0158b95e77873058a4757963c8275d3b6cc95c394a582804581dd10cec9c65a860636816a967a25d3e2c1b8d096d84a91d8cecd2589c6ebaa6bce0861e5be724800640cd9ed7b84357f1a59becf260859e6c6bff639e604ae7ff0f5543fdbc51261bef8dfaa0f421a300dd9b33181d40fc0525a814dc86dc27860efc74837fc13b33192d1a3f0f985c51a3213fdd4bc7ad3c655ece114891cbfc4e06c0fde69da66ae4fe6b85fe0397a025de8f2a58dd55b8577680c8dd23ef35446ab112d41aecdc943442177540d3fb6a36b4b7fa1017dda87ec715fc90d42e63dc3f425b4ba704583f5d9f906646530a5d815ce989f17f27d5dcd7f1dc9170f472c8ed7b8f336d125fba3295d9874d9619b8ed35629cc72eabc2fbbb9566707a316617fe56a50ea37b87acfe88c8e67d1b7fb1e73216a2a29f3c801af2588e8e8f0a742442b091100d224baeca08d423ae2c88f46f47db539111deee6c0a83998459ed29ceb19eecac3b9dc3c9ff1906578133e7c01e901275c9ca6c66bc0c3ee148dd931013bb1f65da698938121f493d28d122c18c64d1d40c8bda3bf2675adafbd0e645ec188688403bd5ed42a2a49cb63e89ac03a10b3dc4116535d73b463c6a0213647aa168e465bd74fa6b6c3a2034232384b20f67a53ffb9bfa9eaecc57c36eb660816ef3e81a3fbe3ad074b55e79fe70804b88dcc14a76e834d0e036f4f5f2889f853cbe983bd08105227ac52b64887d6487f8021b9462d590c7adde9a3ba7602e41b82c8c5d28346465a75ed507b56476b9339071cd4f8d427e3d532106affaf766335f59dee2d9a140a1890251888af52f7faf6ac079c51f0422da0b333286888d6e444645e5527e68ad0f87539bd28ecd7ba7b939eafab61eec543871209fd7f3b64145d364d4bd58b1d8ca551a4e86e93cd7e4a9c8caf5a1ceeb84e2a7bb0a9a41e7bc0bff2e50325662da32f16714e12547701a7b9e1f943ff9de094cdae98120d25e284c7e7de38b7332f371a4d3e87141ece0a4e23bb5c0df90a17c33bf6556f5b5f3e3014aa5190ec480ea060e58d84a7a90677d85863aa694baed6535c71161ab4bc5190d358211e8e88e6ffcb28db6dfbc034100d76a41b3c970998279ca99ca10d94f6fad0cf2ef7451bee46f7ce46dbb3a541a74d7c4203c14510715908f6a760b7f5a2ca126da32482a1888e02ffe4660cc1632b067331c18d73752de14dbfe5bfa05f9821235a68776c199e6aaf33f48627eaff949c2b9231411a8b6f6f5af031221878c2f5b2bfee7b889725b4dd1df70db13d0d98529976b4970b0af71acb41afaf48283e6a6b2a001b8dd4c2829fd4292d40c75ac80ce23244b6386a3291103433f90794926ae3cfd0f7cc6eb6feafde34ba4aeb8d11a1dee40057ae87ba8fc23a14002d3616d8cb80c72fe501d2ea3d56e70087dc1d7c1f3e24ee479629002de413d11a87a87f7bf3513d67a07afbbfc0fdf4c48bc8f64b2298713a9d77b4e10efb88a963cbf1a743f56f73046ab277fb178234f91ce894a4afc9ac270b89d4a6e572d5701c504ab01d41a6b153ca79009a7d0d7ca724a05226e72f1a555b767f380f3be105f8661bae28256440bb53ccd2bafe36dca0a7df1d2bbfc971ba4627402d99f6c563542491397db83f52c1b5472a89ff137ed83c54c3e9a4ab2f5cdb341176b90b887a7e948e864e2d9304a7ea1f1e2132f38dc010cc3c826a16b44ad9cf5f185303d13bc8078ee3f1e794e5fff28648fc87888c2babf565da4407232e138636274a3119ad17248b7ca455b4570922dd3d91b9c66bae6c23948ab63519339f8380799f1cb9bf445f90e6051c3483bdd794ccd4819361280a3db5f6619ce038c29b7491bc64b2ec0a76d81e838c1638ff1f836c43269f013293808e0fe705056a0fe9855f5f218ace01e1117686c8e389accfc0a8e72634bb9be295671a84eba95150c84a72fb05357438d03d262fbc7204a6ea8215b8a81fbaf2d109bc6fb2000bbac3d3098b9f398aefc8cba969b71e86254c5e929d7398b5deb5f8c582d9a87591192ef391cf2e14b19625b28f2e1992f2edf03414350d471986ca26814fc5c7c3a067275dd75b69bc5c842c128e0c6214cd4c69d3c5919ffda6792502b38eb1a824279878082a1a201d680f198d60a6ea612b87d4ebb89d71915980b609f3df7a4fe99ec8059371881ba83b2c88487c88cb87b8603571f266d667e3ca2efe780a9b810e4d22c6a987bcd724378a29df5fb3bf9d412f9ee978aa1a329ad3292308d411ab1485f143d48a478a0b6a2812a664ecba1ac57f4be5977319b47c958631f773cd406803b97b901473d53f15b098dc293d0b874236a6642a296cd746a0fec7cf667a15434d908010b49c106eb574767618ee08bf9bdb8b772adbcf7d6da245de1d752fab490b17d29dde87b33bc1acb011e6e11a48980c1e567333e698a902b0e580a358d885cd932b4f5ffe797f6d8f2a7b9728dd37774f5050ae603ab9a69e0f6ae580f3bfffaeb87a6e26643e230ee0acfded861807d725e22361741e377a1280ad21795dba158e44ce05d910fc92e9fec6bd164fce615bb62a979c8d215cbd8fd1de68bd8fbe2c2bb4902656a556f8b78037c90778241311712bb8c4fa9f5fee37199dba64958ca881b8d0576bb3fa7db8ad1c1bfc0b810fdb5b8a86c5f265fa962b0dcfa87a43976483a1744db23ab7508622f0826012fefaa39a0554fb48d62b1b4d5e16e03ea05b3de1e53791bd4f852fdf47bdc9db94cf40a3fd315c0f1d7e34de9d687ed79059dea7055b606e06cb420f417d931b03dd3a4f6db22a7d0f0d65aaa98b02f96c9a84e4098d2292ed0729558e9f4ee675647e2e97b98df271de428b8277536f705b6ab547bc344ee2f16a5ea7a9e008b84886cd6fd60910b5a7d002a68a75da7e81044fced89271c0f76a5b2dd87766cd4b1974c3ff5fa012e87a4a99d2e6c33559222711f3ee32cdb1489ad2035dc3b59b6f27004ec3e15ccf4725fcbc0431d49b7a76965f2c5c650160d34a1d48b678212896df812b4f96ca5ff0280389bd1c015deeb633bca31608731ff47800ab1e19aca39e2579794a89f56589d22acf30a37b951784ddba6f8c5d973181914f05a9034ac6e32f8a019a86390e4f554b7dd703f47dd61be6e781895acf32f93f6e3704a958ce724dd5c8054e68935fcd78dfef730e5418b373fa00193baa3c9c7959df9fbb1d07e036f643c2d94ee1ea2da8d283fdecd7848b444a955595247abd74521e83b2a5e1d1f5b44185e2457186415b4525f0af61d3a44ed398895b8c22ac37b67fd97fcea9766230ac372c6cb78db7ad191ab384e53f297e87959e0d42ecf855ee12dd634c0163d16f68ffead34f6f689bd62268f19d1fdfec7643363de82a3a50d3e0a48a04ab8b07f1609fe460e45c9cb960fda35877383c2f71103d1683b60cedb97546a52941cb6cc1138694618dfe85723365151bf51463f16eaa2bd50da74f05593d974776ba68a8cda2e298145dac5e06b6d5389092a0482e50e6a44a819e4224022519d5cb877133a9aa0a3fe1a84192e60228533e50bfa0a10042d1bdf311deb5a8bce712fa49a9cc55a0a96c0ee494b7b493a5b4981bd62fb340a0ea4e4f8dfb9587dd6f49261e0a55fd73706cb45fcac93d43038a631d1154567d3402be05017a0b682015d5c0b9c2d70b0776d0f7c95243eb7449811db063dc55dbe2b9f23ea2669fed8a860e261cef4d61258ec41a180c1245b1050ec0388de134318b99754faf3dc79e6da067e934534fbd3a161c53dbcdb4d66ba89b9a148f0abb91fb8936b0d6d01296c0104d82d80ed42ef61748433ab7075ab6477d697c0927591a928cfaef6df52d95eeb77ede31d44b947b0083176d53669b65345c6c036e10d0ae9154353ea70eeba7a66c53d81c56f481bbbafd8662419c53256e9db5cc12d5fc28619ac9925490f7ca1c13caa98833d1cb5954daedfeb1ca5ef01e511f4a2c97e259211e9024ec54a27c69000a6ceade341833af9c49c0297d52f3ba77c78a2f561627b4a48d4221675aaab034331fa22373259f3ce708bebe56ce8a8ac4e1f75bb003208670aff00d2fb512253a808cd36cac9bd8d8e8b0b7cf1ba7b2e55121aa08bc4b0cfb8fae924c9f2ade951c26a7094163f6c123ddb0063f4eaff996e0eccb89ea3f62161fc781a162557fc86e02dba8f21e0b3ba4d92431b852a54771893a7e7f5649a29e5353750b96e1f5073825e2d2748e101ef653c6e8117c06a7ce036a2ca6646e390b84ac81cdc29c31b01dd4e8f1c8fd4847115c118f30d5ec53d89a12ec06996dbd96aa8559b4d2b28f7ce6f587b9cffa1c97165894b63326ec4c3e1aef37f89e6fa2eded3da2703c02825836cbd47a5c51896b7e2d086fbf1150d39aeb7dfaec252629831e5bb854b6cc181f0442253ec4fc729066b0c2e12263f14b6c45759c70d7fa6dfaca2ae0fd308a744d0adb00e88f272cd08c987c3b1a9f1f4b36cf81a73f959d41b9f851eb0f161f1607023bef99951bcf1465213f997292f81295c2b235d5e4efe566cf5cbbd5dacc2496ffd6fe60e02350ae214095c3b5906052bdd85e26a3c59a4b36f91f484c8124e8a30c7acb700be5468f4b7d47cb1671b2a1f3c926c45ff0832dda11430087c80eca57ec9f604b6536d82372fd729da9f5ce6eb0469f7ebb21815c7c9319b5cad8083473cf875b862e13bd7fbca92d3f0d75a57a47b5e8e5743b77b3d47f82a14aad29632aa70c23591907930a9d273a612447d1018360493f655fa7880210fb2fee0205fcb4eb896b6dd9e3ea1bfc637441b2c2ca55404288f1edd746f88d44f950bb0dcfc6e8745e8f355956185e11e9719c5f9b17e5140f2475c0391c9ec0ebcdd8975acd3b05f43475d9d57a6c933869059b830bd46bd1cdb043023f246ba5e357d5e26bcc646b76eb7ae24283a9678a3ce423d145296535cd5bbbf7464c70f3f36793e259dd4be30ed6d578d573b720fe734d528ba27453fd5e0f825da01773a9019fd22dcb7eefb3c24952b0ec1f551e1e163ee2e4a96e5373615a34429dcc36f18a77e578fe683eda982ab71a61ff65fbb0e52bac875e4df7c4d7b68024f3959f09696ba26a476c53d7bf234025d40e92fadf2de538b94429d76537bdd5a7a4c89dd34ebe7fae5788fed2fc870b4b2abdd4dc31e63ca9e471f336dcf00539cd4c7082c328c6434409ea25cb48108ec87e2d2a840210fe8d0472680980506eeeaf49936e113b4117a5b75a82ce82a8b49666955ee8ef15b1a1b41b586f534560e8a196b90bab842bd969b7f5e262b52bcf4576a1b7d1954aad0aeca0eacae783caeb43cfffdf0c89ce87981f5677a19e4fdc20cce81e3c154817db0f6df43bd50f22618c807f8c7d43054dc2cc792b9af048ebfafdf699bbf6b8421123882d192f51ca2818b7610d41bcc60468a1acd837884b124be183d747c377a1773535b5fd17cbddc7bfe7e05e58124cbbde513b072bdc2621fa4797a563635c46199d4f4641a9650a2866bf8cde73513899c2ea36fc62ef0d3672026ec446243a1de2f1dd91fe24c5ad013fab790e31149bc975dc16a3a90bc4f0ab456fe5e6841472998536a2e181db50ee08a55cd5ba337453151f88d77d9a47af2797412735a3039f2a5b3acc9bfde124b13cb0bf5cc96b98e64b47f67a2900e5f153996beebc36411f84122393956c714836a210354b3a8a6fa598925d2b5c2234a8dbbb1f365f6ac66dab8782b9602aa5506ddbd7d06b004f60325516aed53a00d3d0eb12384ff3febec4a6a1d59250412c6c78d219effe1397b0248490872a4df070f809a3da620a54bb64696627067fb97c7092f298ef2ebf678a938c2a873f68f4c17320a9c61802743aed2657c7810e004ede144ea899ed84333346af7c126f08b84e293cdd5b55d9cc8564ef1c8b9ada7b922071ee96b3fe4b84b0ba387a5e45a27462294d5a8071e99d620a8c25c189f77d9ff33792d997f51ec7fc06a5b5e4ce007072fabfee4c723634c9fbd2b650e5bcb63694dbbc53540a465b20fc51bccad307b96043dd2b2285fcc9a0035a690934d3ef06816863d5df32a3a8c79d0d977e9c9cea56eb9f29ba94f8eac0afde18ab8e4b1b44161410b926c0385c6120418a008495c3da53613cac2c9f4a3a1e04d0ec30cff33e684faba2b8dc574c1c2208c1be2daa91c521d8c9ac9877c8a2bd51317a2dc4b4b7a39667206b6e3bc44a62c25c78ddbaa4bbd20b8252dacd366ed40419ccfd8bbf198e946c0915ff7d5e5590f5d169d88277929210f29ddf6225922735234c1f728137da49a5e89a86db1d7cfe518499989b5782575fc263c03f61995268cdac86d4b985fbee444a2bbbd084fcbb263a624b82aa777325774685ccd30412576b10fd43ce891a5317b18a89ee85e1e3f8d5bb1a9c5b1628023ef0231ef8eb4ba270818fcd70ef38ab132f612d8e3824a2e0aa978ed8c895ac31c8b6d1155ff899c9fa7ea6ff00d23d2dcffb84b846fa7d90f55cd62b6a5ea0a9029eb254b856654e44d713a6633dd44d11841471d41737b122ad7a52340238de66b540a23e4761e1ce82c753a1725f6270a0be103c8ce359009584a83ee329680103ce461a535a5a4b5baf0aa766cf55410c9eef97e115b0c11ccc505f35708cecdd9efbc5bd04732a35bf102bcddd53feaf06fd4060f923e41675bfedd890eb93a4eaafde20633a118e4073469d34ada381bbcae2240f8689190842571cdc19864140808ee8755ed3aa7b5f8250029b36766294776e36c9283225e4ce03c5dd2af87de869a7065b15061ff5b49e1fb763717fec45571df92dbf6e3ba3058b9927c19eca3322cbae6b7718d501e11604c5487839b26cb7806ca6b67c3e240196de110c90f462ace7586f51bc483917a3b496bfcc5ad6e1a66ed8d4e0a1f98c7de3719c4d1de4772510147dfb840cdbd41fa3575438c957320ebb4318d258b2af2b0915fd2d5470b9fed0239fa0be1afc6f1eaaf3e926310839b0a68e40ce7b3c4685b6551c4a3eda2d6ed2ee7731c35b6ba4265f191f84b779c566ff810b8eec48f3f93502fddb207250159a29cdbb3165a33b6d835fe495f02dc52d4c3b3312fe92c01c63ffdbc836712e01362de9fba9245c911e5c382f1af44d584a29c87dcaec03bd759f1b65f0b45b883c00c085b14466921e66bee875d2e6df0a2b09cce92508cd1d81511505f2997e941ffa3c7ea9b4a2e955bcd956d1c6f0c21a82ef62d8c0d3e081f45c9f334c67b7202fce7eda430b3907acb1493e041d7beaa6912a383d7b1f3fd4ece2c4be70d526d25b6651356b94f1df4a0f9e76e7feac80be5e8f193357bca3a28c1b067e57bf9ee6cef72d876a39f702bfd42478a5dcd2dfb0e5e1fdd985cd641b72d3b6df7dc03826cd803625f12eb6b45fc6e2e11767c8a3adfff392616337e89d4ad60de6e2efe4f1d2a9d1dabeb03d9ba322b862b66649bf112020603bd488dc7aa473d4dbfe9274f9c7bc5331c0eb2e4d4aa070334091b998202c0d2a75f72fd8dab737793b70d07a2513cee0d1eaf120d42f0adc9ded7960a06f4599bf310ee3e94fbe8913e6368e0c1c79aea18b802b4570c0056af1008dff03b895cacd1a8c682c6ebaef5541dbdf02365f1e811a9f963911e7e6a3c3783d415534af091fb20b336629429cb365112583765704807c07a88c3ccf17a7f8ba12afa65d921d0c9990eee58a45dc4299d6651e99d91fcfa1ae9d5b23dda788af243d6d34e178292e670cfe4e8c2f5c8c1aa47ad05f8ec4e23762f078d641a38c490bbd9099a27781b9da3152c6f4f5d430dac036755b7a482d55843c6ad0ba927bd4c2d53bfb927bdf574adf7f8199bcb27038645ac82b20cb4cdc3acd351c8e13caf2c5a403127f837eb980ecfe543007cdfdf75116fd5a17203cbe0040b9135626d01c163d073df8be65410140ffd90902c92d9a86a3819cc902653d64f4e10ee0c41af98ac020f9c6df038d9281561f6a415a7bdbeb2d61ea98ba3c56b363f2adf06e3b9b7443b131543875d9013538596168083de4893f713d33b9b7a08fcf95b665d512085fc4fe84c98f61acfb32e20aa6749f0561f9b9405e7bac928de3eb645cbb6ab7a282c0f08a432f897d650dee1306afcc49be5b22837af053bfb310c1a2954bd564222458b44664d507ff5c301848dcebef992af2f13f43fbe817ef764ffd79d5af68aa8081c749593531e723cbd622f72dd4ef08b0e93f6194d7cb8f7f73ed17af1cd8461b36bd4b46d72b51549022c67379bfef3e32fe43c7e06af77e3cd59fe86f5df29335c6c042b89f4268eec7193d6b7118e76f17ad79a23c6ed2a3147ba1a8a2b0228f0a0da1554bc0a999abf8692d13e05e0edde6a67655e7df054810a03655dcf6c5cd7f2700101b4759314a231f775de20e41fdccfc94ed51421dab921723fcf42e9481a961cc338e74b576a533dd0069213ce2d6e81437238ccc1d3031ff037680c3cee153835e68c0463129461b05a22c63940d23e10a85c43cd725303ebce2a4e0cd1e6ea32676f61f579b0abd9ee593e3a61527c79d35d539aaf807ac1da1448eb212b29fca970dc1576c6efb698c8d9093f226590a3f54f7828d0e27d193eee48ba8e29d628a742d6d18defb78ff6693b8d1e6f654c96e2754e3dd5614316b8a84ece7b5c3a9915cb37fdc68a9de55edc6d016c5c37344331cec4184bfb0c53322a9467e9dd6fe5e56911b05bc4376f234758262a7ae97848ac24264059bcdcdc94fb8d879b212b8d241207ae636863ff99d7bdc6a975303db71423b63e673bb626e9b242192d0bc03b1dd1bc5425586645a933edfd5bbd4d236525027c199991510de2b6ec543f7af2f3aa3f53ca9e31ae8fc4af5d7cfb4f89f929438437a45b85e1390ccf4010054a2dfd4f1c29595b5e4c78840e1c9dd912d63160c3c907ef86d9ff91d2dbd70b4095350e705b2db574c2f3c6ffddfd469b35296e248645d486c0640487d122be8d0dd8f2a0e8b96e2a130114df090cde06c31262127515efe2dc92a7e79f09545edff3c8fc66be0f57ae98ab7d8391b4337a73e4982109f0f050cd909b0914ea9e15db7e74b99e10966362bcb6c709567361f34f2d64d18ca786859f1c500f55a7094254af385dc60857c52f345d294ca7f0b43529e1e87ee1ff6903e660285d08777583614b3ffc13e9f19f884dad8903c0419b0547b89af775cad1aef28a395d39f3368cd0d7f005547bd6531042f349a09af22c8eb92da20c7ee48b9efa30d4a48f7259cbd05fe79cbc01fae376512a2637f2ab3d137b993780b369d8fe4aad7888fc609500f82a0786e0d7aa4a38eed04cc417934e19c21a116c2d4908e5b4f6efa4d63d5a33ccaeedf40b3077056b5eed14d01c983bae376d4942bf0d388339015b41b98df8054c584f87babfcbd043e8356b8664ed23ede6eac86c88a79d721d628d532be25b240d173e36ba0324dfde261661e4f75d59ec4f66b20e259cdc1a85f76fb269b0d5a535ba8b1afdb43d47c9531c4daeaf4840231474fe2a6e3464f1ac889a790058666996c5fe4e40afb10ed7dcf8ccea4a3732eb1fe54d6767c45d07602b64af84e827eaa3e408b6359dd7aeb4301a55d288a046dcfcdce089adcd64de86aa13044baea8ff6c641c9da6350dd1944e503ff6829c2108277e484351dc42764a41753bffeb1795579e5f018bee2adf7279929573548a8595593d59b67cc3138dc5753c6fbce59ac9010abeb91132dd058bb4878630b98b6f8ab7764a6b635724c2d02cb9d80886720c0988a17fe9c8ef796f85652736b713140b73aaac4ea47aa28a5230eb5e3b17e4eb7deff474fe25a836af3bc5122530fbc3386f880fc53dd4ad60a629fd0847af5e7baeadc0262f2f16c47fc75e005067fb6e6d9588674ea97065f1a35b2ec2e46d0b0778b258c2dab60ab8f0490004f59bfe2b5e158934263baef79879402d17b727c7f87d2df8116595defd101501b7286dedbd4e1c22f8fc9118e9c250f794fc10e6751edddc60d13475222a314c42209f2f7565e5fe757939cca6796439f0c24158e55d0d1bc96679c1f13cdff6ac044a4291807bfd8a34093e2a3ea64f4a3026869a998860a0f03a319912b0aadc0500896d03615e724783457ff8d78d528b1dcea56a7cc698626ff412d5825c3e6a5fc6944393947b7a79d70c298af3473d9f1af6d11620a3e0e42a35695e4054386e5a4e29dc0ea91b3ebf115de2220469f5cd998c7eb6eb002689db34926f92ca5ef3d7773f99e060caa03a25f1f093ab12184c15bab976628568e4d3004962083d75708670943182ac85f8c50ffbc6307bbb1575c6c58b1ae278f021d0fd33d30ac3f7b2759a4d0844b95e24a1e2cb4fdfd83ac3cdb93cd7d2572500b2ba6969415abf07df8e52bee6878b7e3fd323e28ebb28e9dd195519cbaff0aeb7b6cbe4b19aedf8bd44ebc0dec58ff533a91e0706c6c41f0585906d003d5cb2fcca4d7a02a4474dcb1732c30af38f537c7cf3f9d1e3562e7a7dfc972aac7829ed847d64dab06cc1e166e2d30bbaf2e68fdebd8b7345911137ac543c66ed1fc183c54a9601d26467ea0bdc76500b23d2a80f65c05fedd40853992e3f3ccfe87d96b46f7227fe2c1cda4b78f4ed7af060fd7f47bd11aba06f40b7a2f9e73eeeed009318ce8ca2294cc7c668762d3f5ffc12398455642bcbf235c1331b713a1a01c5931122178b2987ff8f5c89046ae4e8628d4bd99f4c3b6e38d229c0ea043980d51a8101cbd161e00bef457c6ba11a1fd98e412d2da50cd6c2fbb69525c8949b46f226a1a7211611b6a399e0fee64ad64c0b642efdc3c4c4211d596616da9486ae7160bdf7c1bb885181d839358265b6bea3c343af1d909580863ae4175a7ef65c603b92171a9e0f3b03e16fc9bf8414e8376585dd87a1f4354567eebed161da6fc6e36a73f017799cd2c047f6fce4a64e7a5f3e44ce5d2eb0a46bd7133d10b304cad851321164025e80ecb8883f2eab1020fe86d51fbdc0ed71747a86719ed0357621b0d3875a8c6a615f48cc637324b47367e05f1a5d4782aecca1acc343718ae46dc45ab7022ee8f540e3cfae316a9849f5a475ada25a2a74fade4eed52cb6ec5983ad0aa353364ef5a8d22573514ef4902aa8f6e139055a4f023189f4dcdbeec94093ec322c3e4903372e780839b0fe06fba9163c7534174c364245fffc799d876a83cddf84354563f8ad1821a51a2cef283ceb24a6e623e1be1e245ae4f6263b9314cb3ee2c7ae33f8b4622333f6056af717218926c2a1443490d1b5f38a2211aa33254c4a1dd912c0dff59ebfd7d5473004ce029e1ffc2f574ca44edb36ae1f5bfa48ad9efe1f2187ee2160dc45413b1c0e57766eb5bdf09d3c32174303900222137dd21c7339dc51458834c805874684c8d3c4ea43bf6f6a294b33629f8cb8160155474aaaaba39ff51c1d38a7f522abf9ef537d4cdefc0ab3ca2316cca2a6848fd28bed0f7a6a625bbe0f07a5406475fe5cb44f6ed25a8c03f97dd87bd64dac7878f273cd89938dbece338e130d80202d1af9be79b4f763330f584d2c49c2abdd0e81674f02bf0e628526e09352308a6f5836275b109ebe1614b0fb4fd4eee5a8824848d91b77c063dd68eb8b2c051a52b0139e87bbd05c3f30294f1da9a1fbe48bd219c87ede8890e1f43c7b6c60011b01abe7b67b26273e0377c23b41a74bc5d6f9f3fc44704b44f4db59781837c1b87ca7b2d70c995d4ab750ae4c7de07c0ae977bed293eb074de5156f8ba6a2b5b1e6d34c5ba93e1d9cba9e75483b2119dffad67e6f481f37fdfa7a678176ffa7e02e3f28ae67db1443ce4ff3bd47efabadc673d8f4227dd44d816d6b44300258aa14499e43e01b597a1342b1c709d497f90cfef869e6fd346e7fedc25aed5c59b323fbb1001cb08ea111b135666d6ffffe5085aac670183951405769dafd0ccdccadbd285407c23879890c34d8f12b800b76a386e7413717389719988732b2c64f0396102a47c6b7969fefe5b911af026801303750039f3879e2e06c5b2ad5b09c9ea7a1be789fa84671234e4b48613f3104903582cd60b24fd27cf226e7bc7b5cb767b276c71cf753d95e049544f51302fe38a10f0eafe45b5e9f2f161c10a7edc760854ba9963490432158529bd246baa5af748d4cee8ebdca3a06fa167c330aefbac3de602d923796cb87ed6dac8a72afe91e7d4e215aa594a43b84ab65d96ad62cb1407e5d669c99cc4d6167453563f82c513e57c35b4a4bb7c46b06b63e43ae691721e3ac79bb5c4549896a897013304cad21f6164b3fc0b4dda74cbbed8858a4579302193b10b1d163bb30a7a0fdfb3e3d081a1096a54afae04e793bdc634384f2eee5acc5264abe374684e22b61309952d05025e066cadcda14626ef44fb46287527f5f219d17d1ad451cef2b93ddc3b83f9bffa000302da4c72580d88619930d111a9cddab3ebea028648a36aded68eb73a5947a1747c80181d707279f8ec1aa13c814a9a8d183ecda5996be8aa6c48bc81ae4c04a566adcb692ca137c8ab08f407b1e939df1080e42945bc23e143e3586a2620aff7befcf34e9df1d5b6c43c018ef00d451985a4388905108d7a2f323e82040d263904dc6b7e48b443d863f1c336ac37e055748df21024afe34aaf4b432256b48d4d688f2836dab80d9a06ebee1e412e51e7ca596a1a1f062a112874fb64f014be77d479335a4bee822bf2c543c674c226873b28c516f477d5463720a2f4365ad933effeaf3abbcc46aa11c2f31b44c2b30007bbb0ed49c9e1948671d9c2d382ba8beb82fbec754c4808d86ea25944c1d45d5dc6ff059c903245d93768fa0641b577e0e82099c2bc7ff68a2eade31226cf9b526d99dc022f054938b7bd5b998fa8837090ca5e361c483ea9eddb44d6f4f014291217362b578f15d6735124ea37dff9eafb2c463368e454cccf80282c0a655c8ebb8bbd19641ae083627357255c70f81842f6e2bb6a01692fec3315d31e3cf004a3c5064f2fc8b8c14e5caf375cceb978960da6ad93dddd4bcda81b518a67643aaf09c889430f279a35c25a5f73b4b885462a4b95ef0680c6b2bcbba0cae00fc56fe45b1f07b1008ca4de9893c8fddf64579a0694642fd099883d1178145365c7c95ce557ee2770873845c1336e107d7106291fb71841eb63d04044c6b2a6916dfb80c7c47b1f144b06249bfbe00a9e9a8b6a122235bf57338d85917b3e0a2d96e95b90da6161a97bbdc88261b6ae2cbc52b8f6ba6c8bbabb8dfca2cab2c19df29263b9cc96cbd5fa4bfdb8a17db67a550b0606df9f3a84d97e492f4d1384253a8696b270d1390d77ac45388f1d6db7fe15785a51fe8b0709bae333a623af428fc3da1674f46c8dd9356d4a811e2af096e5a514bc6feab34af3b5ea95475b37f2e8a3c178f897637d50f0942c89d8cd8abf3320be74f908b105ec0ab931ce13e08d376bcd24ed0d459a2a8c054104f33ed8b9bacb9e57689b440952c705ce005eaad780d5761c374a205e90ecad8451f25b09dbfabb37c32f91da90f2bf6c017e88f54b0eaf675f7bc1a54edd53ee64aa006e089f4884e40051877bc83f8c2b26d4e14db54727bea77053b516282a9945d85400ffc7c03f60d75ae929afb91064fbc267a20d65b4e783d009303cc004d63db911df568d7fd66fb5ac4c6cb084ea926629e54799ba43fa53e56ae5ddc31eed1f74d7a6eebbcb75db2dba54b4c5cec2f8498722e1e741a35e7a8017da274165debf34a18f581735d70ce9ff80c5dff79627984b8c11618cb1949f2811caa872809cae58189f9fd69a843ce4618d18ab21a16a713b9517c221d2945168f94b81a90a5658bd7c3dad1f1b60088127fe80d00cf806cd43e963a1e1b78a47139b8f4b2a688247325924e35cac839d6f943968378103f689910da031926eca47ff44e8f791f70253814b16dc4a4ad09ee6736a3629f0c9edbe68027fc00e487a532be0c8631654b216a2299054c56b95cc5ce03061a2c7c8f33deb4fd4db26b2e489a01bcabeb5a1ff66e0d4ad941cc7b2ecb0fee9f7dea19c38f34878b522f262b4d4b419b5f30baf7d83aa391a48085426fb087b12997bc31715bccda13ef1253afb485f6a0c291f0cb2d20c881af53d45c3cac4f672af93d1a79526c0a5a4df3bc51114eb7a069a137d37a69f0a5394e658ad8f2ba0f18ce02955ba2c1d0f8d69434a52f2fa107cc306f945c885110b9a7dad5b1217caac2b850ab5f02da4afb1b55586bdeb23d980488e5ec6440e92d5b4307ab34e5f0a4bd760eb9689563a26571ad33d6ab9936433613adc0bbf08f24ecfaa7e5759cf1cfeffb28147d3c20921df7238f401969d9c41b0607653f2b20540f1f30d32d4a5f73413c309b3bf09b719949220db9c45102568a689fb72b90345f8e2a7f6121daa9e36802283910c5c692941483b7ca1d0f833ce7df0bb20df37507f61cb427429834467e5429ad21ce4465181f7308e3577903845ec7850dc87fb1d873b5351c95a51a3591a1b4d26d4788850baec924bd6dd9e9e63aa2ca1a2fc49b0472d2e51abcca9aa8b58be579ff2c9955a7f7c31fcdf30e377c99b6012e8840d5100310acb238f628f20a7b46a921e37087b1fc5c06cbf48d8fb8fe3914952bfd5ee88ad166f61a3e082a0f969ac86445e47640c73cc4d5213e617bdaa9e50b9f5c6ccdbcd5fab9ee03df68e073ced78920f49df352814724498120d861dea98e36922c3e27640dddfec2e8caf58a7bba14d11df962d0b633d7316bea53a0087a153ae166273896ffbc87044b9298f62374f460106081400752189a1d78e59e8c9d609e156f7ea3775aa2bc8de6fa92c33998b99660b9db2707b25aad66465ce8806bca93353e6d69de2e52a5424e54b26fa51cbd0e90f414e44f97d188897ab26137edad6ab719d2a93dc41db21c1dcdba8aba0b9336c697683ecf923521d60c1e1debce19187b2a06a23e3fa9deeefea3e0bf09026155adf8d23ac6efdb7e480370f527ebfd9efa3acd42921a4c391923d419bd99da172b26e48aafaa123825d421e34e1b41474f34359d11890f50230d007787e54afa85523ba3e7aed709e9289d7ddca14281e24da7e831fd5e66ca830e1be157ed1e4592270a032d7e4322f8a92a4ffe831c96e69f747d75faf5792d16b8b4b4aed9be8efb358131e508dad7cbee34f586e7861a52ef2e87fa2cf8ecb44c8ef1775a12b0de2537405ce165a6843084c6ec7f61956809102cde712b2a0357a1e9df2a231ce6ed1ed4ec6bceb37efe302cbf55d826213eebbf1a962544cda06993793017e3943dca1adc3e170a1e81f4c8f1e477ed5e6a975a33eab61f1ebb750c9b096273449ca2e4ab187e01f0d8399a49e45b28a8399914befaa63c2502490c785b4af39289da7c4ebf1e0589578e19b58201fa14610d6f9d3d04032bd7b95118bfa1ed8d7e09a981ff1f5b40b2abf5db561ffd96ae17652da2457b0d3f7a4ed5605c4badfa187105dfc764cdf1b9f225123dd9fcb203b75b50226fa84706a9e0fe879c93551f94fe240c3300db93c35b4f98b88c6de8403fd92eb6a5e06d0b17907e957b61dfe6fc1d9a952d866ed9e26115c5c385fc4797ff1a18fa59d6a5e8ab9928f48730e1e1a17d490ca7fcc0041928e5549800145aebbea64f9c4d95e477bf7af073bb624aaf5461c76abdc702cc994ba45682a7401d2b1105662134aeaf4d09cdf94fb9297caa62552f760ab66fbcce41ab7468cdf911f814e3a6fede5843ba85ba654298d967a31e83f09c6466221c336c3c0053eb248e2decf510a30b65af35a9aa14783058234dae0c5cc6316801489b3b093ada27ed3ba9177f497e62733ca8f6c8df185a855574ec7280ac8f4508b99e1279bb1266be7de85ff738363ef5695bb08f510b7d21627b9a44e94d5daa1e47291fb2ea379fd196afc6ca59b5b9d1122be28dc54e385eb7ae52caa9281233827276922453068a2a8d2cd66f6c33322c7da24dea029b3ace0246467162b160b11df95d184a914813e4fab83a2be3b02de2da945cd5c791ed357979af654e58f61ca66b4f7be0cb7b89a24e04020b1fe5df54a3380cdf53d9531bd160e64df516e2b8a22977325d93df4b77aa75891c8aab3e4ffd1dd880477cfce91a884202580c74eeea2b52f9fa36c9efa6bf6c4d3a2d61d17f944a20624952d33262c6c964a0b64b40bb1a98f9943dececaba27c9feb3fea4a6a5234c5e4cba53cc03ef931dcfdc94447305dba4e3f7fa8007c87debb86ac2e98d60e7e8ad5f63b35b734fc5fe78a87255003b958dde81b301cafdc326403bb281b180f65065dbbf73cf3c1d7ab3564c8600a506bb0eb88f34b7b6910252701d4867c35034b229066fc64c99f86ec5f5bf435670c97cb195e93b416ca5a64ff46828e732b81b7c3bdb943850426d1cd21fafffa9462be7c827af1d61753a663c87081fe00d25473a9af78bb2a75bfeac97df3a33f4f68e94b98231fd5e7676fc4bb5b11b421abffeb5ed2afa487dc323edc0038ec4a67b8bb84a8c44723c8c31c5554af0fa65e025040b439c615e27b0cb0e2b28b52da25683c29655471eb443e1e5d09c1a4fd6356f7820011313ba97e4dd6ecf38e3f417ad852687f86ac098fddd7bc3ae924eb65b43626fb8d69a21220f58d20affc4d6846656a11dc184d63183407d644941167797d03826a32dbe83047313df1810da0e48ae9034a8d50848d3a0e390b5ee1bc37eb27325a5caff24ef1b575a5a416b0560b3e5f32d8abfaeadc5e87e1cde48994e44f869b224a5f4f24bff7125cc16f47b646ce2aa776bb611a98f14e00fbfa82d1c94f89c3fa3ab79ed741ca981cd473f8a06644d734a0433695083ab16824b17a00c509a1490199928d760463e351ec3179cf87a6fe0a0ab2aaaa1946b7cea1d415c59d076417ae5b90e0dfc93bce0d98f1afcbf202d43b58046ddaddc885788d35aed22305de13ef468c3e786a086d4f4ed812e6dd86adb7f28f5f0c09c1a87ee324c86375f323d15becf941ccc9741e0ce7b7751b138f17a785a067b1626c5cba16b2160ff2bea434bbddedc9f2620ed064ee8ee71d461f918319426b78964f75987cde71890b2ccfd79527cee27ba1c052ef350db7f9fb16b76d586e3f0989afbbdac07848e250d677980ddb74ff172372db65c10cf187500cb1d10d4143e47a95b568643bbb34d70d9828343e4b6e2d27ee1660026ba1ef443d5ee5c34e655630639d684b88a6169891d4cedb83a4d73d2840e87be51ab5699d650c024d5f00470b6dbb359dcb63dff8de870904b713ccec5034e3ef7a28beaaa3445d3fb1d901889272d8eb4d9b7118c6462f37c1ebd43ed0689c15705c46e66e7b1f08f145f667d7af7aa1a8d0f02628142313c9f1ba832659d8dedb7cf059ab2747b23963a4d85cbd50e7a57db2ca7b59dda29d44e7fbd21179d08e8006dfbba5e81b74d06d065c8e96375e203e22e1a4a4310da2dfd742c18e79a82d412510ee2479f8cfcb9c522a41b0498e9650b3542bc3c080e8705fe86d357de612d77f4eeabb8a5292e47a69be2d512cfa6d23d9dde20bb73d72167cbde0778b224f2b7fea84f72a2d683597089f849dab22bcc71d2406a1f242276767b91b191a78226d52760ed2833fe5584192178228fb535dc3f7012ca91b5deab79d56abfebc89fccf4f434cf590c502c8b23f477f4026918e606b258c2cbe7959e350a326fc8657d262b5902ef8af560f9d51f768ff598d7f3ae22bea8c8d6f009748b6b657f2835e45172d98389b3c7deab0a748e9e2257e7678e4b9d0db80fbf9d6d6c04ea5dd5c566b54f02f93606971988f14fad6dc391838e74de449b4787bcb4a126dbb720af0166da467ba04354dd060eeb652b1da9c39e331cc2d1cf730ad299da9041e41ec40ceea09be4dd117e24e70d8c11173904a84fdc7636a59d5d87034082cb9b78bd7a841214bd556ddbdb1f64266db5250e2e0c7bdd70c22727a9515090e261562c0a4913915a57f01a147d571c1d4eacf863c810c3bcca145a06218dd0070eafabc900e77e27f16ec1aed4a862f4d19f40a4338bb8f0084eb1f9e57336bdca6f25ea53fdffb9d821be9928603336884045e3070e1e9c2b7cf7e00c6de337b61acae47f6b1273982c50426e6c8281e3951d2a115654fc0487617026f30d5eebaae082d9233fb89bbb871c32625a378dfa277b624e383cf8d8c3ff551297ebc0c5f9abea0aeb4bc0aa8e15f35688344859198d60778b3e210c80d7df26fffeda9f4472304e090e82857479ee6a465e01f3db4a7059105d32e1ac38a18854536bc1432299f7ec10df8361b565f88ffdb2410b371e1664922b7e6a534a5679da6163b51c990b8f835e1771d77b7f6a9d7f255174fb2d5584df550bf0d0207d35d683973939074dcee8292b2376146953ae45dd5d4676673d4ad68f654b0dddbbc2a3e8f58deddf18a1f59d6df852a32b9d005d25c0f0600f613b2a833a3ffa233fa067d0a6d7668f0c89343886603ac336f6e6dbcbf0c350e9afe53c08c91b29417d5cbfc8c0357950d672c14c97f63fee822a5c8010e3d3b3366cc145a3298ccfa6fff55b07fc028cffa9d610e21eeafb014e5c5282a074f077e63a7cfcaeb5f325d8bca9728ebf2b4375b1f213c04a55abb4de59aee2c6594881bed1da3f0fef7be045f468470fd465977db35e28a671745fd0e71769cb9bae432053647febbbd3324d68e6aea50969b1a46cfd1225fd2b97116c3177d544e34c27bcabf4e897e3858ab702b1da9bfd9bcc923e40037c9ca05f5555b8a1af951790954126ad51f102c0403bb1098fb0d709481a6e9cb7ab936c2475c4ad3078e82db3260bbfcb4539aeaa6c71e29fcf69b4a2a759238e7fafdf5994b7ae01ca25ce35ac12c11c7f18b9469b60c7d6e936d22da0e36fc15a48372d12880dec621cddfc2c6324786f24b15f8686303fa39600fc2686e82822199d193ecf1c178528dda234bc885d5f6982b5834eff4bfe5b5e23abe3af732c60d5a8ccee6ec308d871fae8aae1afa9b7bd6566b4a777fff61fec333c007fe4fe495d20c2a43944a33b4cf54ad62fdee455744c053dda8aab292b6112a9e3ec5181f43b3d3460458a7a41340b9d9df99a55a655e2f2c1033c6e37c82df885a7dda1982fda02354d491ba39ebfc2f9e3e23f0c62ef3b1e1b8f69ffb79d94b79f46cdc44e2a2e0fe55e49d6263066ec4d484992a64dcb453fba638aa1cfa08cd4419204e2e40388659d38ed44614106c1e8a0b782c8f96611fa75c514fb8498031162735f66a75202741f15dc2f8ca2c840de8bf9c97a9d213f1aa227e911a80dce1bd62ec301b004e5940b0185de33c719769ddb0d180480d41a3350ad3b2b5a48edb9041a0269f45962dadd74e13ac1ad93ad7e30b86b9b53f5057ca10bc95bdb80900af51d3a3869c6703320132779d7a943eb8777a2e71fca887d6d8ed3b1625276ab286fa128129619fbff549818389281c58fb5b4942b9ef96b2158acff61a4841d687088160df26ccdb377e5abdb380bbb0504842fea16d75c1c96ec35e2acda2edc3f136c4f9656d587ae167ec16586674d16afea661fd88699e9f1e1f74ddbbed26211c05afa24c61ad44efa8883eb1dc0beb29ea27476f1d2ffb968d3d193b09c74b08d0b1cf979deadc20ddae90262e97a8e2a7f2e18c3738e703b28d1ddf1202f7bdd3aeee2e7f5758ded39f753be65c96186f14110d379f41323b9769110e51617f5b5f1709d286f195e986c49f1819e43a38424f102e894f919dce45c676939cb2dcbaadb4dd3b241dec44d08402525be383ed430fca88d45c1f7e1c1d05c5c8c7f042bd810d0ffff03ecd659a112d266f05c4328db213a99fbd5b069fc73730b0286ced84992ef6d918949d0111829f9ab48f3e3ff5092df26e8542f62078c5d1f99499f4341b3f72adbca93cb0b8ba94584cfc9258307a552006fe3706499c0d464b35eae122db9d1a1d682a9f7e74373fd353e2673f3e05487b595f59f7c2c89b597553ccae8c9cde6cc2b049c98af9b0d34e8fa08744ce45a8cf9c07cb830ac68b738ab1709d34b7ce3408db3d031d37f21eedb461a6359f12f9d4add4233ca3dd5f1f47e1df8de41f09cf1cf9310980fa5c484ac9bd7659049a19bc3d1a468b3aef97dca8f3b54694f42023d87e30cf965583b808f77d9def30a682c1a06b969c02058e67a6017886dd1077f1e8448112ebbbb6b95b0efe009aa199ef131d07e69a315b264c0f7cd6833a99db55296bac7bc1064b32166781ee3c9837b54c8b94d2b51a7fa8eaa89ba12cd8ca3f146ce383756cf29063913c19007c2bde07f9837c23085ccb9567d79560afb335579f7ba07f7e31a145f1abb8a7547f6d1bcf45dddd629f3f0724a3775fff9e370d08df03094105420faeb3a7097d3246314aceb87a374747bf1f2630e60ea11d4c849834171898d20b332860569626f2e854bd3eb9f06724f628693e6010f148a5e134c59816f37e900d7b248335663669ce0892f4f7e3911393963e95ea06395f3d4caf38735349cf4b614283e33324190539a7d20db8e7e135eac2dd13ae4c81f3237dab23cc086cf3c40a28cfebd87aa9e57d5cb9c29ab1a158403f43ab84de22eacb98d90d9d119901a14254f168e0e96a2b696ff3b730b1023e29c5cb62c211441e2b4c6a725401dcb77606a490d3595563860a1d25d2668dee663cc2b014790f8aa558e00c849790fc0f3047cf16036a92157157efc43941175bfe54c9c0f066290aacfc050af17854aa6bc3cb6c77924d2f79c6f5d747edc80fe6f2f0eb50a53f692ab0c68f064b161a47da71d9818a172b8f627a05f46234d0dd96ec6e969a596199989382135a18c079a727ff48899884876778eac4818460de418af25ed8ee16a5534b15ea1c7f43f9e98fec2a42032693d562e988acd1339f438bdbe1627b951b1fb1273258a78ddf85cf8e3a325198ba465e4463dcbd90a4c69191cce3baee4c63505cb5335398036aaac3ebd7cff5d0f4133ede7385b6c9fcc389f5e324d9af1721f608b7936c94c30d3525daa278fcdc8f3b2983cca0e958d7c6ba6baffaaed31fca8d6f417d9f7c87bd747311c696de44a8d5b874ab33e341b092e06914240b8bc668e785b20b65ecc781457d7d8ee424f9ce0857d520ccd794af295ed50267cbecd63d1c011bc475d25f85ca88415d21e7808b10172a6b3fc86713bd4058eac912fd06fe0e0568e9bd76f353086c1a13fc2f5fc73685898e4cd4614a0d038e21acbff2927074cad042ccc33fc1f13daf5b09fcb3611745162e80e65057e0730b64d2a3c895bff3dfefbf2bb1919d5b8612ffa05f76e455167abd1617c1a6c4601451996d4c1557027e3f8fcb96cc07c3f1bb1b768a93a3402b0507fc7f2929f43ff87d42f7d0e4fc1109388e4e541ae0c2f45d30a1f57748e7cba034b788b3c5be17d30806e3a329e96028a995bafab48cbdd5fb5585a094482ff569266b1fc15d7071f2bc15bfe5f2ed6b247fb82b9a1fa8de68bf42c58434c8212a3cdf78f021a534e420f400898ac85c1b642d4cbd48ac68330ebbe12dd86ddcd2098e180d4619327a566ebc224f7f3e816658abfaede2e63031182d238f9d5d3263c02ea68899d847d0186b8a9cb7e37cae2254a845c6222c0545290b84a7971760f01a4e0ef479fef13e4f4659a7cc59921b4ba8613a445a73fc421c0076159b2128b637c666363510096ce574f1167fd5c04f8625765392a6f08368e4a2885d58c0ac799541203447a88c6392207540248fc199095cf79d720010a183af99530e35d09c502213192681dc5c6dc52e8cc69369255be65ee662d19ae1ef56ccd161f5c07546d896e7784e757d3345943887d810f732c738ae401850f53da9a8ef3a66b2c08084ddba964bf87fcd57f1958e3862f9a13d388d208463706403989cc83e971707a2ebd6808f7788caad4be874f384681af5ef0b97445cb6e3348cfbcb68ede7e4879c0920659aaedbfcea0cfe8ecdfbd3105810fe24470bfe49e6f5e6cc03f9c21dbf09dd5acf452df4eec145bf7bfe8072d459bb5041bf07bfcc9757c82a1b91281dfdd23216cdeeb08341808abd1f885777e15be779d9eab7a0d1d1231419fa8a87bd95f78de4bf5bdcc3541af1dd4af61ea9a53a834eb931bc2e1bbdd3c4a30d3d990a7ad5f9a1ea798481a9818805cc0fc96e13e35dc2b1fd605c0750e8b8a8c14b354260e66bb8e4041b262c5f79bf95030bcf34c5093b0cdd74dcffdcdbbfb58d902f07e44fabd52067e45deb9ad783e20f0832e05a0f1bbe1942a0fcfbe7e6e6ea5245c5b53c387f2c30c03d4b42b7d14297be39084dcf53d6f7f526c5cd9181cb4ed7266f251818004c2b28f7703adacca6513d295de573af0da2dbcf7ed670414f87cd7800139c444cba54f7f726114f8accf41204aeb1a31030a62da00654a547c6389eee12594fe624f0a260ea4b0b4d3f8d855a4cf5cf4d6f32bf1dec4e991f44a26c5eba372b65a304484edcc1f85e4c5536c5f136d86a4c7f76634dd97dc300a7fa0691012fac4fa12ac555b40a9b45aa5ba56ff037a8dd420a148f313060ecb43b9031398cdddd3c9526ae106509a79bb62f20718b811fa221f3cf744c583e01411a6a4c92284fe5b1504ae7a2ae2b24530cb60212bb2f12bcde5e59908913f33c0e1562005e16bfaf4bc571233743c81a842aea4e594807a5b81cc1bf79c47aa140d72c7e93838eb9bc8c4fb3885a8752371b2a39d86939280e946da7df02cfd2ddc511b12807daa7b4688908bba1bfe7e29ffc9c37ffdf11e38194f08fdef2672c288ac3fcc8e2bcb69ccb9daba8db090fbcfb805746e3494144006d68eba5a7494a198012a1f28b5050c2f96c741557a2eb732d86db05b04c329f497a53a36500020816e3ec8b8ddc598dc637b14f2d3ffe7eafb91c72adb1da26915d50bd7e423316909ecbec6e9d17b1a283642b7aec85f88253855f47da7ba8ff8e5d21e051f570101aa272f8716e1abf88e3026b9891dfbaea86d109018d30e7442f92b1e603d946ec0f68a4cca4711546e4b4e06216f42bbe8b203442700c4fa17571a8dffb2550688212aa6f42e83fc1b77dafd1280b890b08588acb119123538591d9c01712b8440e2c3f7d18e46957a82b3711661b8368595ce390529339bebda5d0b0536697f69252b1d4fadea1966f7e76bed41d87d952cd855fd553b239d3ca3d59cd060b3dd7f5cbd28bd78ad0dee531b36c9e5d8b07748677f6dbb4c3dcd0649bfccdbed5245286f2cd55077789d6f5ebed3a8738c675f6fda3a7501478fc8335175d2f6ba1edc7dac53fbeef3ea8888470eed120f25b7fe8267feeae06987794600864045d9d7a2b41cdc34f961d3420760330550a821100740eb30ba4085dc48666ea82055031e371257d73914159a90bbb0e2dc202cb0d8546b90db6035a69dc7a2a84f6d31c959a90f26480d8179868b7ac0e6c0fe8e6fb379e5ac9985b73e328ab943f98cb6f9ea68dc5f7919f4b8fb5e3628f7ba957d3585733a0e922c755f3986212997652710b2fc0b02966e7ce5f257bd11ed106162f84f745d17711d77c6cf4f68b6d08ab32802faf2227de2002e834f50c9a36267cbdcfd3140549c753cb564de59b4bce6c0c4e1aca5fa2f00579661a8ce40a3d6f75c46d8aa6df956868b02970a62a52c8dc9f4a8c3528ee367249b3643bbcb3b2235cfc2b0b1a1f40bde12599dfe33a63106b112f069f2c891736252b448322b59793d6cbe4a79e92f6103a9f253be0a2380f628db4f1970b948b5665f5f08bbdd2b1fc2b3698eb91174534933b0d1729909f39e750029345d2645288df995621e181db609099ed85142bbe4ed2de20f07434dc8bc0ed80197170c75ef6fb8c4d22e1bcc7aa274b3cc408f9ac169cc6fd4a7c673c6ef0ec1b4e283af6b7034e0a427a40657a5ac0e0f61fed5f05b9e6172454472c9655d2dcc6c5bac6fc5113fd29715f7339960ec30bc33513909d7192a50243fce61c9573839c7cd6ebcef1299ac7a27e003ce95ac3ecfcb731204990944287d47f8b0551438baf2b5e6733abbfb357d34ae7606274f8691f3e1606b30f0b19c861e0b6ad37e4149e27c06123dcbe5f7cd18fceaaf6e9e8942ca140482072e92e51debe7f0d888a7c771e97f4ed15c714eaa8ac539c0a473751582493813ec8b2395bf8812543dc7d303d24e8d06183dd83aa06c6059af6879fb3f7cec354f129c881b768b0c226126f4f69514a9c3e5737654f0ab4907305d7b53cca8985dd16bef9e9db1049529873c508f4fdf3dc13ad6db605032e594928a2b99a0ec739adc62900460ee59936e775c6e282651e737348a875e6822cb1c3c0be7c20cd66e9263dc8db92ca6b2fd2dc6400b54e075fc9926a3ae3a44b884c13b6a8a9e383279917ad806bb2e673029711ec0bf2cba02c8c83441bf72969873c2a89a3e4a45b467331e50c98d36ef2b19f28e114f371952755eef2487839c714dfd61e18612a4cbbd3c49cd5b635db624b4fe00a2b545624ad06988cf8096f9948553f13f316979f559ae4ee26d1db624ba3fc04c6d8f492c3d7857ba01b12baae68d242c13e147a5c13a231af6cdc314278fe80c0c7a1d4f0ec76732ad29ad0e737b0ae07fcf911ea9b9157f3ed6f0c74318b3e89bc30af0102ba1c3a2812f5cd44d00db2f6e0f9b0e7a4c7df7bf7e18225139cc3fa8e72cd9346942b9e4ed49552d9cd2c3049f189148db6c40d8c44233c6a75605a0e38da40e4cef94baa69267f31c06075775b5c06cb7846fca6d47ae08947e6df1264a8e783bc94fb3435ce2161f634cb0dfc9646444b93362326e949598a87ddb30d184e51739a5bfd94a1394060b87db588074d6bfc5cc1baec6aec4158952ed92782ed074bd2a97bd29fccc4f2f5dd1b2abcdb737a381db547d0f6d5ff38ee975bf6b88c059fddddffd6c8b945e62c392b2ed8efd795fb85eefbd24d831e34dcf3c1e7e7d56b3f4c7402202188f1829a5173fe1494dbad6fa49f933bc4bc6d31d5dd44d8142a5f9d3d90318802aaefeb812fc6638808036f6694560ade96134a73d9cf8586c0c0a1a0116221195c64fe61d21db82c71e4d75b2f4a96388d2d5182a0d2bbe9e2f86d5ed5229bc38802424784ae9fb080edb7f00483e70eb903c1a9715ae3db60f8910ddf9a4b06a09b4d3319f390b7c6dd2eef299b4dad407ecd6c16f0a5477703e40510a8c1f03d54118eecd407345dd4a20ca9f7a902d27db39e07772cb7fdad8239770c531aabe5d65740ac283f42f5fd850e49c870495dc95a4cbc78f774a305bf3bd1d706469062d16b0b8b4079e537ec66d7c69ce1276fab23107431b77c8fceec7c52dd4a61a6e7c0eda123e54ed767b134270c4bfcb08119b92bad75ae053c4ca2e24a608151b7fd1134ccb61f66982e9e6044fffab428d1d6d42a016bce53281c5a598dc5988a3110045945e15d99b7c69a0b4e4e5ded1ed37702da0127110b15ba903dd45d945e463c60a6ae00902007e081dfc4b7315ee09815f1b10ee86133f29ad24383468f252cd88d0c85a715f19053aa3b19787cfa4d11dd3d66116320d9e5ca3358431ba67a24c2adf7c175460c2fd133605320aa4d8cf185bf6152068c4cdd78736db1c23584051af421bffccaf010340b1bf2e6dba097f8badc74bf8907d6f45b952d0afc2f0cf3916e3f8aa76e1c07664e019d2672d8ef291adde5e3273bd27183fbf4c18f299e7ffb2c99a7b65977719e8c11310befed9f84e9d8f3d2a1b5a71d459f81885086fe54fad4b30d3423f2f70b4320309a1f7916315641fb43081f402c2c96bc15b998d383c23a28af3ed8de7e513643a33884cdf13e1e89ec58e0b852f2729a0c6e82a072ad4cfa448e75a7f3b5f2bcff79499287ab22242648a05c90e69e4e1e5c8add11a42d0770438c7495de41e7ed3daa8866afabaedddcd23a1d3de99d0787c972ba627233e2577b9132530475760dd8695bbe25d90fcf022faf0de8ce0fd5f98dfd4a1129af6fda3bda5f50a4d5ceba69846432ea05c2a0c43de9064f371beea422c6ae6dfd513c1684631ba774d371c076a39ba18008c987f9ca38d340fa65cb5bbe13d9537de1a9e449dc4151b788d0653e2697e41e5485abf91713820bcdad6248eda68ef328c15bc3114ce6b869cfaac416b57d4650c687c6c49bef5d31675bb5e3e70921ef52ba57af648321388f25d0e61847f97197547812003a0933dd625288ddc3cad87b8c6e51a968c0ddc3573ca733073fac1ac112bff278ff4057fec55d1063bed7880198dcab226077961b3764e130854a3b4eca276caf3f870095dcc95353b200103bbcafb090091c5bd018c5393052dd005f0154528639b2e0f52f434a9f68f779932b9e4c0ac54a3aea4b4acdaf8b4cf9199908bb57642ccc0a6805b21f49cd7a1b38eb54222e1125c89a378553106344036a381385e887eaa93055a6336f914841bf394078fd41b6a267af99ae9ac77ee2cfd15fb512b189d3081a8277ce5cacbb05d983e47f1b524869c87cd7a591be5523eda57aaaec00fe53aa6db5e07d3aa28e9772ff67a28545ac8d36e8aa82c1e846b3fb26aa6ec98217df3ab9688906379931875483b2825e342e0567cbc08e1cc27be0f3457fb8364114b0e207906ebe2cdc136ff971301a1008ef5590e3f7a1b9844c0301ee9d391dfa4e9910c137096ae2ab4b0a771151c07294149d25eeb4e848f955b75d446433ed1c18895446f5fbd38581635a48d90e5fd7156081ad02524c7eba8c0b02b0d0aa7bf101e2bf866e969d60279e0067352bcc7fb599321cb909716085d5a8d5e1d666606e89b4c469cdeb986abd2a6914324df46eaefe3c270b2c1e708d6f9fec65af7a9950d136e2cd1fec24aa8a2ccda3baa769dbba2dc37c8b64985594caacdd1e6c792695c832c69f2bd51014f7ee21a2e3e06c3612938f0b295e7cad62794db5878d0e59d036841fe32dc09e6ab27ff5d4f1d53b010c924c97d6bbf4a4c5c5983148eda0abc86dfddfe4897a88fb9165ca64ab930afc70d610793a46efecfe610e27d076378d7170be134979ffb41304cec534e040d11b9da834b94697653be4aaa1b4079502770e0628f511c5563057bed48fbbfe367bf214fb918f46d0e1317913e5dae71f3ccebd6a329d2f883170475014120ab4924a3d3ac2fe2ff7c65fe0adcae0437637916335806bae5c7541cc403ee751aec1ed4c802999090d3c9a619ee04604d32eb3363223e8d1d1ddea45fd696a3d89dde186a7e44d5dbda36ca52abf28266b178e1b0d9c702adc09c61171da20c8a09268cb48f39902831c6d8d9aa90e26789b0a211929175d775e885227f98fe02a40ecddb74826102c761b0501a48081943578d8596648cc2268e91c5a343ca69bb3b1b3493b5a0f3fca9ceb93fb3400876a52c79ceccb35a8b4a82faf408b7b7e6a178bc72366ab9ea4a253efe37230df35b30045daa3be47a30bb4c6a5c799c74443d5753cbe4942948362947a41929dba8f5c03c60870985cc99882347cc12c75abcdd0d53ea3ad193febecbc2978059c22edc4bd7063817dc2deeddb7d4d656feab7fd3582a9fe22fa41e97538b1659bb0c3be8818772acdf09cee98314832c385edf4b1da164bd62950950dbf797cc42731b5c1f9448325d8980bdd5b7828ef08d751c19446d8f2241c955adb8ab7d23ac65e870813dfea03d2f2a1e0ec4ce77e2e9565dfdeb53ee093e7bbc67edb817ba22f3f5955ed276ea1ed6c29f130fe5cb4f63baf3b750ad23cb2827e8270a4d9089e827c81cef9a07168d037a0436deb59d56c15e150a44ba431ac5d269c1c13f16cac2b510854dd35494fc3b0ec0b3dd552f7451ca89b73f33a9a06c50e6781f5e379c74f570bf4f7d2670604939375ebec9058ebb09273bae692f8d435957706fd9e19120056a24c930afa2ef243d767ca3487b8df843ba144c92a90305d2c9716f54607ac7bc4b9cc4b830fa746f5a5b13485fe4c4f56f5b75ebca3d1848dc5fcac2e852a404db61e157dec18b02630b953aa317dceb8ecc4599b779f65535a2e3624775a2218a1c5a8c0f7d87530a2220673072119e06d2df9406047845480241650b9a0d614b71c91af6ea05539f77a7ec967067c43817b5f0bf2ab95187d5cc4df84b8ec2d0d5773634f2d1a28c1ab73a9b6159123f4672542543ae54eca55fa0486c97944b3d2ebe628a110c921573f2803a59d720129639ce3dbff73bce702b4ce87edf933bf103e610178a08baa9bffaafdea6b953127efd4dfd1a1b622bb283129b75967891248510eb0d3296bbcb22868c53a0ee52cd954612fe1bc14c55a2adab328d4fd6dab1ace34beff1f2491cd196ba471481c37e7b8ac63c9fdd7b34c1927fcda2c841db7b8081ff7649ded88326f404103c35457a5bc5fb64927518ed3440f4ad2375ae4eda6c637b61318713b9d7fc477d8e145a49304bb24fe7a677c7dbcb58589360e9d22e61f7d03e2227eb29b21cf48e0594c6839643eee23a1f641135524e6ad4277b246231abf936e85c6a30bdc83aec38a9e45760f3ce990aac72ea89a7ecf466d823c1391900dfe6dcb83d60947a164bb0169b54411705419245177044f7a6e4cd241f1d873a988f392e6676d9b0aa6942aacb8848482b0d98b9beab5ca10da7ebbe1bf8924df989268f44ba7060840f9bec4893a8378d8039fa79636dad997d079174f157d15435c6a31fe6d45fd168883d9fe15b999d0b2734de6a917637b3e25bde567765a6862ea86e9e2c87797e57c7a2a1a03762a44ec42c21eba9fc18328dc893747f583c62cffea27be9cf8eff06a37b909aaf947726754f5a5e0a508b633f590d94beeedc29e1b2741b4257679b794f08c043130d07cb73ad3a6fe7b00659e5e40ea56593a2ed38442648d0c0ca8d50c285b157e62c08fe7b1f3bf5881b990eda42d71336b24cc21e4bca9d6031d6bdf995c4a5d72d7fea44dd0556b22104ae4edc0999033e9f55e484602a19d5c2c5376283621d48395abed12b19e5eee6cf4441680ab4ed11aa2dbe4eb50ec9ddb6a0b2e73799ae76354bc33c53f21ce235cc2a4ddbd875a37241371d55277559ec7921da46e1f211e18c377101c50c9e12d86092bfc9e6f91354b4aba99eabd40c4f0c1c62cf70eeaa4325e507c92f4ee5e3f284674823f05e0c7cdacd589aa73ce33347c205c82e55ed58b6f947582d36fca0ba8f9989322eb05ab425961f66704bcff6bd341e921ef7e44453281f3ca5ed3e23f06cdd6deff88fcc2163d32ea8a508f2d507fd6eef96afa24aaf8fdc106d1b751eb3cff78ee3c692ca55d8a8171c2e002b966d0fbcd481f93e907112a85e8d3e222df35b25870133d1ebb847b808a8bc15074d08db27bd9ca3b955d67c4495104efa700e55871986e88a36c79ce3e4fbbc3d9a5234d832ed678764019be59ca40337ca00f82628d8689148aed71c3af01385d43a0976029c73ab5c3551ad32e1e21d1b153a5784b42256178f03ecaa0443388653a2a06030d3848598849769bb9c8f9956b709b5c589294305db97041c1e140531759bde9da9318a0deb5b4bda1568d9c8cbf23927a86802f6b0e14ba6a48565d7fe5a9b9e2abf8f572c995a738bf7ab9aaaf32d34e540a801e19d06efe666221f06735d8d0a46a30765b744ffa09c8fdebb66cfeae8059fccd7b9c8b352b9e7626e5bc0d7094194961b8114f685817c4a3f1cc83b629993e906add932a0c3ca6b00253dda61284359f7d528b9266a5799e45b884f7dff8313b278d36b6932decf2e9a5804d099d789633d4c26e500c175056bdbc6cebb1816a5e6db6686be49b93fa0afe5f1e81c618f5e820b553559ee0756f7bd6e6c5ac76025c34718d6e49fb0cbf35b99e026d414c669bd18c20d0aa5aa756f9bb67ccf7f38bbdedaf6cf84ec1acbed3781a396f019cd32585ddca1e6313cd43a90b5434a8b99aa0e9474f1f7d98b744bc7ac8bf85ce78565b2d5b8831785a87e7f8b1293fd4f131ae1048f557702eea71fec97b4065a233a947ae58e0831d97f64ea70813b1f667899e9d8111b443fd31a315a1eba63368399a9634902771dbaffa9a3d0e25c55c222b4500778c67d9c93480c1d468a08cb27c3ec64e6219dece8b04b2a631f4ad3a64a7a34d035d3243c351cf7d1c18df404fcad0cac8e35cb6ff2e7412813f615299c6061d162868bd5d54c8da5c87aa6b14a2b7fb52ebaa7f82d109a4a49fde24d30591ea88a2b716f1264d8b67b3c20229c22b2ade79ef1bc68f955ce1148b20587fe1e0886875e13863d45a2683b43ae8f5e9cdc7866ac9d48a08479a4455f21217bf80756c15f37b121651809951612944938c6cd12824b1d440bf2e9b53d63e276bc5a305b98cfd34600db8dd88a36190da2fcfdc840f29a82c599d8189bd1677fd95db61247ff96bc9d099342833825698970b199d5993ff4e119e24c5ae4f3449856716b6368848d78c5aa8cf6b8035e6d5efb14b65ec9f770f8b74d498e65348fa7eba1cef7af1708c688852bf2a9fee8734d796aed65fcdf4719bcd5f5e2e201ee1f0203fbd42e7917ddd2b3677a5d072781afeff97d5f8415d2eba9d0f9a6ab65358378c66bc4ee73732b416595cfda16a1f73ac637ee8a067392d1f3bcc47fecb0d30cd1ba5a0dc7df286e7de20a076c52f69136acd0082aca52288a264571ace9d6108764dd1931a6e50f86722afa2029826b425f24885a716d721990f5cc0329ded8063b7bd9a1a87b9dfc67843b36cbab6e5ab692c1a9f7df36016cf2aac140f2dae6823b2945ab085ba3a9f5fc5a99665b42cb1ed8b34d97d7e1a459b7b23f3668f56de59f929a71c926e8986cd410146bded96f28e79c2c7b209e8bface5880303c6e2b2883b81c314858d89631c2007d67653105adcc02d47e07ef12cc6955c62aff600d9c2abc315dcd61bdbaa1f078dfdabb0624ae93029702f19ff3b1f25cb598c970ebe108c14f73dfafbc59d1a8072f8737ad2354c053381b1f580859b98ff1ab9774ac068587806df1ff667eaf20e368e23efecb239a9b1f0c6f5dfb6c3b37acc5aacae2db2bc3585c09ab78cf34f8478058a4700b1d3a89c8a9817dfbc54d8138cb8bdb47a9a37b6e5e9635fb60345ba2f94183579c499bce9e258c7c6e2ae1608d23fd3c24629799fb5bde5472a8c6b0d1dc137f1664501431c9e1b2fc687f9cc771d3638abbf75c56aca60609da9e3b55b58b4b51a4aa3a4a26efd389cd378cef1913138659b6a5902531aeeb4759f4d0b62592b6e0952d2de80316a2b4b23bca965d93c0ba9897319f346e7b0d933921c1054ec1b03ee5b73ebb92a949433fe3167ee85c7bff21723880310a19f2be1f7f548fb1d1f73dd1ac065b6fdffb566bd6ecf9926a62137cd88e4e1702779342e6fc598ad9473019a73d84b3eeb6de88ad070e6881e1504f0da0a24d41a6a43ab6d87788364c9ba2fb2fb9d1b4209fa481ffbe549a6a9a767001cbcddb24818d4925816fb5abd85b1b275c88744b530b3fb668643da0e9cbd4c518a8c8e274f722c193a64f9e9af3ccddd0cef01888434d7ca227f6726556d0bc665ac286cfcf78bd7ded2f276dddc1caf2252e34802cf5cd17b35474681e2f18eba3d0a9491f7b11edfc96e621c36eab958a060582589d7878d0ac38eef8429e601312065d26396f19a95d00e0c311fcf9bc0e5899b344c97af70333f6a3555c8af56b227eab99623dc6dcc643a9fde53f954d540a1e05df45273e10b16e080a3480b7285de1cac495a665688526caea65434593a45e8544918bb9029241870853c7061dfbacf05bca704a419fe86d9f712a3cab4e1d39f2e5d5198d4e36c746c43b36eb30d2f517ef8daf58fc619b1b3e8f2e959045d26b2584027f8df7122966a6d93692e93ff03109792d952dd6e7f7d8f52e80f6eff82c4abb6a001d885a8e762e0fcbeef21a3c1a9b95c75fc26425fe05f0ff826914a12a2d01e6d70d7a7f1d8d199d06b529ec6c6521ed81f8b274fd7a68213464a9c93e17cc6275dbca3d5f2eba7a9c4e01dd7174bfa4c8c6c3bbf0e5ee388cf8327a471961d07bc8094fa5415886171e28c91ff7052950c6ad820785dcab89d316b20d01678881e701e67f5dbe7664cdfcc544de6feb83f41862cedfe8bbed0e36dbaea537c89ab5f653a34b48b66c517e53ce456b613bcf6287bd2520a7de35e4b5f46bcc0fb328bc5104dcb8d569dd6adc5c6a7eda9e9616eee20eea2ed6ac81280f4da1b51a42a556b3184d27fb15a3bf4a4d3d0c804e9df5e716ffd200076efd2386872a47b7db22e06261fe99df2e11e40cb50a7c924be28ddcd0825d3a1762fc303d1b8bacc55a708bf3f03da44485c7e1d53766c6631b4bc7e5b30337bd524ad40aad132d5777bc780af6a7e5678db5463dbfc01b816f1986c10ed60c839c16cdb29bdcd7d1e54788d31d4fc40899d259a1ae234535d08538699fbfd2d4a70918950a3aa4df6dc751965849150b749024b54ea61e86b65b7e1bcbbb8dfedd727d0a34f3be606a7cfba42c29dc8d8c3985a013afc128d0134f18efd35cff88fbc083ae133473be1d43220b4c5dd15c59936c8fd07c2a1d9690e1115447d4e46ee096fe29fda55e8e17129c695bd63acbf95edb627bcf8d9ebf1f9ed005008d1042cde67157dd34f3ed0c00dc2afebcca6d3fa18e76cb6ee2971cb7b6a0d8850246786a112b8bf55db24483c8696105449f3d575507527c4a05da599f4af606c2a317ff82865e5f6c7ee7064d8351c418fb0a526c8c32e3f1eddb6322aa3345d0032c378e3db59066f3bf1cef1c5d36d9215d42b5589b83b1e4bd8126944d3fb1d874e41f27a28fd2ca47413c7a4a0017b1e5b9776609bc6fad3b9472fb9fc7a715b93346f708404fb54e6a86815f581113fc74cf79507926c24e64f7337b7afd1dde04e261ab704dfd8ba4173fc3563e8d839bb2dade646148b1fec7e50071838147d750547255e5026dd8b85441b55b7b4ed2ec34a2127f5d58f2601171eca2895ee023512f4f8447e3db59ea627ae1718ee1b61a9872c1429e5750f0de8c9334b38deb9e43ab57787b719de1f74ece184fafdf499b38fc60f2488cd200f73d707271d5323b04a947ddf971c7b95b2ece91a3868379c37ee5096b515d53dbd79e346ffecc93a913c1cf1ebaf34380033693ef25b9d2949799cc9b800f0bd142cc52b8e446db1b62dd66c81ac95911a3e03d697fdb8ab7e3f5aabd83be08d60f2c71b2e00f2f9b201c7a7119876aed9952afe7537beb41173cb55c4b0c00201c45b8e020cc4320317b44dbc00f717531c37accf05fbaa3f37b9c45f3f857244efcc7be4fac4f38c991e58b71e5c9ecab1fc60aafb768b432ecc3de57f3af247216f53715dc5a87766a3d8211c5daf9f8681a289bfdc6f8f47dab43e60bc26b32590c8a34fb597ca3c52f8d20caf72c438168c6062c6302b45f4e07da1cd4ec7a312a29e207ac46593e4d467041c838d3189755429411a1cf3c4ec6d998c90cf154935f67eb8ff7f3ec9e5b2def8046b7891ec8d34af4835f4eb5870c495edf2167050353f517ea397febdee709944e6c008d1703f8c8a38c467935c4fd805baf2f2d41ff2b8e11d8105ab4fffa03a75be6e0b422aa550953677a6d0f27a70a58a70e70e72245e04faa6f4347e9b217c7792b247bab16ef220a32f9726fa15cff05af64afe471053eb705d33f412d73a9281ae3105a7aba9e1cbfb463025ed55ee9d1f9cdc6a30e91c3f5a96e9926ffb78e22bdbdb7b13e278f2108afc79c20ddd44c08ad57d85074cfa3c069372d0803bd873af972048a79f9023f8ddaece84cda1c0a0ab1c2dcebfb699bab66b860da3240cf2f670e770539fb26a45689e3a97cd531fe27515a2735cff56d49e6370c898fec54791d2303ff45b10cc66bbe8a46977df7f5ba4f3c2a3bbb460477b61715e69877b1afab84f5641fff435e7ddd8044ab1feaef89e45fb942ff8d644ea817b6c2052c318c0a9ae595062cdd6c8b463992728a686088c6fa19a6d739cabdca25d7a960e79b634d4f19513b3db01999fa47a8b33bbeeef16fc132af9752fd8284c6cb874a2c1130356882cfa633c7f323cf6b6a3f685cb9f934c4c86c35b83cb516080637db1a1b10a28c1c26a5d0811618068e637ff58bd9828476f5c099b478c3e6c7f07f51754b7019b22f99de6f9f042b5befdb4203572136cdae6b62dfd730813558fbe63afaac9a05a6fa95d94db2f927b40bbb6b1c919076eed65b9fbfffc35b1f9a3eb5387e6488470003cf40caaa87b66247ce6463cb07d51410501b6d3a1fc4d3760ba5d358a761a0d555e2d575cb8398d1911fe73395f36bbea96b5c6ced9219b186f469b4258f5086986e9b5f9fdde21c26331a8528f7b1089e3a890d1752581c93c8fa75133eb7910d0f693042865e29b52c1d9b7d1dfe5229d5ac67eb8204636e048987bb9317150a77f0c25e6331af18b60d82f9152ac837840e0aab1c9a213fba6daa92cb313ed40accf6bd24186817076d06b7587c298dd42739b3b499278a1bbdb9692a75dc2b9cf6e6a0b54a0e4702238074b5abe722989ace83c08dbd931ffd6fe76cbe9752bf3598a9bbf4c26ad9a46102a36ccf21d21abe15d318b3841870bf779bb9c778545f724fb95583e293c055feaaf0ef9991b00dc1fa73107bd497417f8a7370d2a442edff57fd1290e2348ebfd3bb003195d15fa26c49086a5876c83081880b3f6188b3b8ebb07ec3960c5fddfa49f3f66b8a37f60f036b1a0808516d4226e0f208be3373f754ea48eedf698e5cb9540fa87d1093a824d34f9e38f2df7ba9a91ff9030c0bbd3c279000a89b81db76ffca961703a73efd03a5068ca165b5dd0f014d0def5f30a58cffda1e79add869ed7a45393b2f98be0befa3a4bd05299b040e735fe9ad3a0386966338e724f22804120cc61ea5112bbc197b85ff703386bdbfbd8ef9ee64a81a152f56b1e1a34f84b9c9e235343e813b3944c1aa027e861662ee246d0ff61545695c626c125402f7d8880503465fb8b6f11473076ed09fb964ba0c672d2ee25e66ca5e692adc9807f6beeb4998ef75270baf4d43891e0e25aa4a466a87561e0be95c946d4c405d9661ea9a8c6ba2c50f1f7c0326b774a84ba56fae22fbb074f3c99b94b88e47b609ae0bbf9544593d168ceecaa09577a8c11801041a46600b037843a8e837c8b37e58bef0a8094b295da45f7960fae8495c20c56db5d6dedd457bad7c108c16509d4fba245cc3c6690ec1b780156d11e9a8395000852e0425ba382b9ea1e482adc7f589355d772c0cc9699972086ff845d00ad1d353ff997d3b6766da603a5f87a07dc4917bb439a3f978836e49cbe69b9645e64e9c3fd8c2263bd39d4dfdec1cb97a4c34994f08f22c50ae99fd3cdff2e4cae317821dacbb4b425aaf5f238b4c09e44b65155c743d0066c5461fc9f3090320fcaeba924824504977a0044b896aef474651867a99dce17d034c799b0a966bfbd2f27fdd92dbd53b276c928ee61561d40168dce88d40e6076361e5161447f718510204a046bcab821f7fbee3408588c2ad96cc680377c02b0ca8e0c9b1febfb47eb893341899eb7cef58b4d7d6f353158b82ad459bbca34042c93202abdf619a78319a0005aacce0ee8bf3c07f722f77e7a67d873393e798995c23a6ca2e64214c77d16cc09b7fef47566bc818a1a1c590264c3594349f38653c410ee5fec1697e4ccc029165eb5f5a6b409ba007f47228814afdbe8845308151cd942e423888ef4ead634d1240937e493b5861eeb54164912c37a6bc2f5d8a6bc2e9d6c2ab02b73b7011211c4f9c3f3e190a691977fceecdddfedebb6bb7d8d3a365b70462afac2a07adf54cebd423a37aed239ae506595db1be7415c02a8f8296f68e80d36fadd452ae82c0c80a755d87c48d56cab9be58fb06d01627905888316fabdba5ef0d8d03be3e71c787f12b51a2f3016e1aec23e078cbd1e8cd1d1099aee3154ed5cdf03d1496996278c9b06b318f785fe5941315e1823f25819e11e5fcac25c4013311c73a68b6da8d5bd982bd82b05c2628809d8c0e86f334cdf8337a52d612bd1be164fb071b867d48d22cb83a99079639f669d3eac468e8f34c9f588764c8d018e75205775455a6506f58aae9380b70e41ef886a0fe22b36ad59af5d18faae62bdc4839713b37c5415603fbff51304d984a24fd810a0cfbc7e0b5f7fe176455d6e9b01af458cd19f38d40677a0b14003e13726f919e337665c81d727efd9507a1c884878f9adfb3f99a786f612100f7b9d9d408969ff756384bed0862c62bfe3a2683dee4d02bdb4c3955a1be7a1989e8827b3415c5c572fd10ac8a23ab7e631c495cabfdbeef4d84fa8b8bf067fad84f20481edc87c3a30f4774f0155fb7a258a739bf8aa2fc6a5e1a25069b08b2928303ecfcbbf28aa6f3c22aea722a81ab8fc294d48150da20094aa2a332cdcca55d19a7d79d8312a929ac93a47042948a97888fc982f79778ee188e06967bd00de5c3ee07707d22881774666a722a04955641cb16705114571d7c6be2c5a4c7b6a27fe82babf116aaaf4f6a1543df5026f0f56377f1097d8ac42ad3f6910622af9c62b64eff491ec38d183b2da2c652fdbf66b7f9886ea7efa6e734b6eb054cbdf06468e10258fce2eae2b83474557ee4a44f71f7c11e9cf1ed295e8f42196526f51851c71b9d3720af1b347c2c974942dbddfaa3df395026077efb95df15e14bab537d9b8939b49ce148b4cab49fbfc3c85ddf98cf62a0cadde93463036511a4dfb167f6e28902e3763d6fce46db8019588e3bf1769676f9f4cce4ad763be5d5d6d030c4276be44b6d5cb0890d039b621cbbeda18f004d90e3a52405b784cd446041c4cbc7493546606e718a56ab4deeb27d8e9505c92d3351e912ee5f76167dd9dc4df6accf83cc9d8467139b52918938fcc1c282c6c43062a6ed42c765f100103674821272c5b517e7fa5e18e50f9a608250612684a32d70cdad2f941832a605814898b37ba91d52936dd94d4fb800b92de17847cdf17bac7969bd74297a77fa74bdb19db013149401083cd23392c7cee8d404cf7a88022575248a5da0263754a057218192400c681f15a2270ca57f4b55b2c1aec0099acb73799178da9373c92c94ce6ea18593cfa49d59bf2ad6d14f7d4aaf03072efcbe370804404c6b5cda71e79328e87e1fabf619a4a8da239f7a66a2e8d340c69bd6c3900166e7e8b513009741f51daac6bc11fa3b4039c56bbb54ae3c8bf0ad90a4250c5af052d944fda7c83a7ce5cf54b3a7affd09036dc3dc05026cdfb80cdd010349baca0c883b69589c0c27f4f78b8304c998dedd44923bb4c2f615bbdd3e404c4fdbd8a0817f139fd07f2f6df98a874b79a6bc74b3e7d7b3546354cdeacacf599c03e2dd7cb617be848b2ba836b038c6f1123ea97dcb2220e96600f6559382c534950d861d129f22255dcfb7e9ca0c7cf1104aa2e246d93aff48a9757e33828a83caa00424423c4511015f77ba83ae7ef6ce016f9bb6ce8e824a2ab0e6bc5a1938ca8b47e9d40c7bb8252e0b8705d244079db5fc6d15c9a2edf0f1e945eaacc889db1401646706d6941d7ea589d2e903df848ac42580cee456b326d6847cdbadb466cba5bfc82823fb7b5278a71d081d557884a3e1b4a9229d528bbd63e2071a4913e186997aff1338501014f62f3bcf0427496708034cb735bfff4a240485e1e5dd3e05342dd66525138f39e73782c1b899e5a0a314d56eee6e85a9928f1a29917036fa647ddc53f07b56f99c82a569996ea86732eb25962559cd699755df81a0d653ad40ace045a855f18025a8830a8d4aaf437c28436ef5c8f917ec48b73576be5fd970608ea93c801f87b7d1b54a4aad0f37218b58c82779c9394781ca5b65d0206ad7fd46fd06078810046168fdf43f5e2e7aa09847e240f83c36ab7a2c2c9c8b134bdb49f00f299f9b53064ca46535c4b12ca6609393b735dfb7cb717af0700ea2d2010d52e44d7d8961a9f360b2983ffde34eb06de572f87fc258881d8051749013321c557d23b8ffc829504cb5ae1ca1c4ab0a3826673923a29730865e5c44be18587a9bc5b18b61c9a0bb5de69ebe1350709dedba5a17be7cde23cd79b0225cab45349ebcaa695e698543855d8416d5131690d58143d236cd91f251e5be86cbdd816b8e0554ec62e2ff8cdd9f0311bb446c791304a88aae41470604fa8e79d288e894ec44088cb9db2d5f35e5d582b0f5e4bd973b297ef44be142af8928955ce701ae34ccd46f530947c1d791c678309037ba46535900628dfb247d5ce6bcbb166b6085e631d96e7e2d168ce6495f064d71e6f85b7f07482d557718c9cd6f23d8e877c26548f0d19093c56402508ebc6fbda68c7224578a5abc1fe1d97737467f42203f0143ac7414adf70a8519f5c1ff61a5c80b8e3613ed843c9b70e8f0bb11b10c424ec1f39c4f097920702d22f9423b6348c454afd490f35e4c38d7698734ca408ebd3eae1548a78bd6fff6969e3a7fb4a5033d14010bd4fbb3642cd27b77e7279f422bf28a5a0296be18d293a23610757f48f6edff107b0ce7a927a28bba0fd16a6329451e088f58b6b5f24fb5b63463611849d907aefeaf0542f94705712a0b68a3e505ebb8e4f0fb01d017332544768016fd8c3ef62638a94640873bde67cf68c5fcd8aa7a36ff882a16d7c33597632ae6a76029a2dd45b08df2d39d2316d07b3252ed07ef979c10dfbf602bdccb23195fd75ea714f54f5c27cd7c936d335c3e79745829b17cdf3ed0b15742bb2b7b8a30f51c621de6d5214500253beb788dadf6d61b897ba5fc2a6388e06578aa0d8fc1edab3cd35cb48514596b2367397f544a4513fd5032d4604da808845f1285bf623637d8496c8926ec0f51871436773bf1100e4134d78a7bd5af434482b776c1fa396bd2469bed71b0a33010736b880453b36f549103207feb2a91819fd0440a2392665347971888203cba0866f746d6304d58592547088f78dd1866728c6ddd551bfecc166ce90f1928984c2906aadb475c4a6afda0d579f1216e32ac888817907eed85c4be80751c83567a1ba6ac3ddfb5c4ed1d0d5221cf68bf58fdbf406a74059432ceda098cd2177320c2fdf5128ce860f9efbe8316a852993c230dafd5b61e6c2be1659ea79c952ace2261a14d3bc64a61a5cfc41c5bdc6d7e57194026f9ea700850859bcd4cdbe4bd08f9b4e2e71e63967cb2c1ce1b03854a1696bfdb75419b239b1bcccb2eb10b1800f4b9ba12d791b0d096a3a5f213314b3ac41609730d7546decc9af72316a2a470bdbf058dcddcf3f02af9dd195a58b96aa7d22e24fb778d6d2f3a856c15e71b52085e3b5bf0b087271ec6a07c318fac99fc709b59f61d790a7eeeda4b2dfa0b2186141301dc60fb2a382559f470304027c66ca768517f042b3c692da57792c74102ff6d5969219cb25143bb049a9d618a5db495a269514c75fdf623bd4d1ded849f0eb92109f839351468c9c59e517067df1cbc46c8450a82661be4a64cbab40b5ffe2a15b4570927e0cf08ae6f42bf55cd4f07fbee903530bf1bc8f3245816e4fa1fbfefcdfa159549519d950c1d70d8ef99b3dedcd58ee44f4d57e2065b64b5764fa21b19dd89ffc0c8313175967ee53a0168ca82ca8a791ae5724e68d61f7ab5ada4211f1201c2c9829d38d875254e00af8c1a535edff549ef94e3cd52eb4356936050922124dcc11fdc47ee001918832b39ddf30de0dd05362488f9becc70d29e9c1a17812a254253de8ce8e215dcafc974f9674d334217bef7b35a9ffd6ce851b693110aa735b14ce788452d3547c845b6596d87ff90cbdecd1e386d4ee6a961d0166d0bb65cd7185e4064270bedfe4518d2e5cd6cb4232965f03c99845d6e184b796fc18f43047d9c8deeb5e658defe3c6c9857308182872c1d9ea06611fe37c0a53f4afdeca1777bb3c2164085f3a22e66f055f8356bd95b0cc1659bb0f8d9f9bb420cea83c668aa84bae192fe87c282c081c3c5fa260b86372a826b127918835cb635b9bcfc3df54532f41a26468c02f3001f7cc092b3cbe647797929fb58464efe1239f36dc54dd83dd840dc8b400c0dc3b6d485286f3d202f615d330dd3a078e34ddc713b536f163ddb3d2ddfcf4de9e1f0f2c50425510e33a85ac29bfbfbc94a665665d65b4387ef9be681d5bcf7ea6d40aec55fdf25213a50411cb23404009477fc7ada9dc45f17b07dfe039397b17bb2c6b62077f2b0730c2b1aa2315ac740484d8f645e5cffe6e8eaf07c2e6f36112a4a1702a15592c93ee5ab378f0144fe82c6414b540940eb9a8e23c86f2ee0e575a407a046809aec8d4c100ea6ac1d592e61bff6ab489cfb5dc7ce753e46a5960c55f9e91464ddfaa2653baf073ac0cb9460d084ecc5ae9ef384aff185e9bc68e0c23a6c3192296784131e1964be21018e8330dac4851719476f5077532d73b228fc0e9f28363b3ae204d68dda6f39453f383d3db1b751258f87c7c3c868f3e6bb4427fd14f4e4fe4ac373292618f3faa4d3a4773abe92a5545ee0fbe15582962d30b325ed8ee4c0d4aef532ddaf4e9b04f85e00ded3a5318d6288c5413c1825644a6587e833978461729a3810e1b43c9e44cac596f0e6e8fc0a1c9dbd84d0984715e6fae2cc9fb90b5635717b2a0d18f2674c2a7b9a8894e434601b0ebf18e8aadb3ef73a2dc2a8511ed4873bd4b3cebd5366fe1c076a675379162488468e01273ae43610decd2c79d4ac4e6a546b781c1104132fd013b536b2dff86b088be2c2e26b6a11b184336e553fb8669fa7ce8a0d6a7c24a2d89ec3eac69e3af407e699c733b8468d59eb3288b3acec56bde7dc3d74d93df973c7204dd536a405c30c50c7ba3577cb1dde846c2ddeb7f749319239c6148dbbda7ef852ac28e1b180320901f8e322ce329661c8243d63bccd45cbceae8d22fbdc8ecd919ea774a8dc835ab60442192b213f6b6a81e35df1f5f726bc3353d4b0258f5e8f82e7db8f05db0c6ae329a25b96b75cce43ceae1ce5b4a6ceece929f298388005777cec17673c7c560cc0e037399170966e00544b61c77eae0c6b5bc9eb1013898c878478cff582c63aa600fa87320203aefc86c61b11f970bfbe2536868aa0bfb2b8f1411ea3705b06faccaa0d64d7697a9e67381d7cdb8ad3df920c888e399e51c2328e2e254336cbf057a95c9edf41b6114954a2578a7c69d16ecb83e528875ff3527773c2815fb1c51bcc8ea0a7a8854c63de1eb99b3fad6e61a753b19aec2fc5b0c9768eb3482443aaba61eb42f9deb1808565274861e74e307e1a0ae5c43373eafcc7c1e7061818305628e8b15903bd8e621cc6380957dc4462249a6ad2a2768b30f87bcfd576fc0764e4b44a2f7b6fa3d616d415e51c7c92262688d4c4f4fa03d5d2ff2693e27896ff85306cebb34333afb71d0aa1066cdc9e3b0cb9ffe2ae626a2961e789558beb7867cde4a1d9164e71ccf48dce45eb092a731b7e6423056e66cdeb8cea08b224d77357437fe17d76581f141ec68ceee8dd57b5e949a32b4c0223816623cbb20db067e0fa815e1093f7a7724e2a714c173db9970fc02cae26ddb89495354308565b00f8b38ffcf02c82d132229cb329728eaba9425e8d8b4b64a4755752ded49a5402f1fc046834dc649d0793f50cd3b3556b75f998473a7fd6f0d1f4e4b90e16519d562121fcc2b8e510baf29ffad50cbc601ee7c56ee81ddd7c82443ca58763063315708da043e37ee0a4765b5521a2a2a5c585b3b0fe372e87914a25df2805e031442cd60140f497dc970c88154e7acb4c2d4f030d3417377410d57a5620bbe67ac68a498aaf39d5324c64e76ba3a21a9f92c882f1168139a848843ba81050cc51e1f10eb2585b3973786c540a4ef131da01c1686ff59169ff49c306361500f44f97a222eefc9aec01e77e44d4d2821fe3824d8187ffb049d9d0c198465ec995c026e9b6ebf1a3f854b06fba5e3c2b0b9d4a2aa37a845b206c393ba24120eec74d4b18a57f767dfdfbb9e551927eb2f2f6392e81abd65c263ebde2ee0a0b3e06a76d4d686675598220df5b0ce044b5646508a4b25be84a64fb276dd9bd54757e0c9574cc640105c19a42ebb15d5c994b46b52b19dbd12d3791fc1d3b17935eefc0692bb9c3bdd135ae3231567a79651fde2e1af1941f53417d2aeabeb1abbbd248f5f7429f47ea80de388ce0dc850462213481e138815c9569515b3690e674a7b47c56c0ff94444ad06ce1c7b581ac6e75647cbbcc800207154790d8d039bf1b42057a1516c8f24eac3f3ee900c9a92718e20815f42b2cd9cd8f5c409f5d1cc065337ab37971026eb2e096b2d8f553d569ac83957beea2887e8d067d8c649476e845ad45d889be0872de17a5dce687e3258e101092323f3070b9d1c1429416e1baa10d5990fd530cc7a310a723a9ddfbcbf7479d4ee293979c1b5bcaf9b07815a279aef87efffba3f7c5b9adb80e209ecd95876976e22373a7a7a062bec19623c0c9d3d67ec8d08bf88c589682b1c8312b891453094fd12cd07698b2211c469f674f7ac359666604ba7763fdb7e9e06b8c0a11abe14f202ed9304cc417e0272509a6b932c73b3bf3e5b08997066a65abc26f711494d2a9b1b553dd3501e98653086421c864e8bc9c4d50b8c802c10977d03f8d09d16435e882e00015b85eb00e1405d9df7f9de72dbb00aae9f3f14124d45e9319b117430bb890d00ca951a897057249665837a1d62da7d88e31748806b672d4c747fd382bf4150008a09a9489658887b606ca0d30bc6c51f2aa85bae0248e89f18734142c897e603fedb5418a8f62fe97a1f62abdf7eeb00f2b0ebb3373aea9d1b4cefda7215e0d2912ff0d94637ac086c82686dc2d43b4a1a630a8068bb2f372dea08936b27eda4602568217ee38a631d63f212fe9bc0782cfbf6f289c92762aad539e5ed94f280d52f18cdd6c3b7f4939b1a814fcd0f1afaebd97ca31abe9e0ab8bdc042c777337550548adb14104c68a5108d7d2e7889ef263a22c2aa7a8d783b1fd80eebb6988512c9606c97ca2c4fe99fd88ea83c3673f8a07bfe1ed1afe2ea6e1d61041038167e771d7cafa99819adaf28d805c30b01f049dad08cf86f484984bb7f441abcc33235d776e69f74773cd3534c5289b8cb4444fbcb37e6d1d3ff58159e2cfb4630955eb7c64ce231ea13ab6fa4246a1bee8581489ecc03035532981639dfbdf9e2fddb251ac3fd2cca67d6e3b918624af9b126225f7e02a8055f9024b6d6756389e836f6867be93d9547c3812c98737ea9e1ef7609a2b0554685f0a2a2919604241a212a50b5c5f7d21b35f13ec0a00c4473c18dffb0b8c14fd02f27882187219580b73294f84847b38233b38fa4191d692dfe25d0c44227cfa5570bc1e6f66d31bebab0bd72c0fed0746b78f33b011fa0af7e8397a8f70a94bc1b9881127cc808c08a40593ccc4a074fb22ec7a83ef02b4d3878be8b155ef9ed249fd0431d8dfb6034064a7e06e1d77a8614aecea1fc0beece278507a1161d8431efbc109a7dd01e92f1346d5b9e2f235ebcec584e48481974150bcad6c1b174431196368f2f7e4c877939a243a3633015d8f6f2263905ca3b529bdbcf32952a0b48543dab591e23fcd1e5564e7906aa97e875da5155388b6c7a0d65256cfa9f3b0eccda2f35467dea2af1225c7dd7e60e36665d43c40c1bfee0a12202944e02e1be10ebcbe82038c903eaf1c0eb4a726f1ecbb62e1502fff354c6b35cdfde7a68e6fc676ec529626dfc79918e5ef79d919729bbef434bb4bf708a20d3cc7ec90e8468d0df2e963fb218b68f6c8e12b4def81aa449f7362fddc9234616d5dfd0175fc07e6e561a30576a2c170b08420c3d7013e9992aaf8618c7be2bd9dac57b955eb4d1a1ce83f2c8050948a7f00e15c98ba89fb8cd1400d9a6a385e25650f173759f137dda2d17485c0338eebd9af2a2fb051b9a6a6c9a249ff532c0a4540956777187097b7cff8aac11821abf1d445c2efe2df3bd9d8613a8b39ab37fd2c3757dae5c55afa2037352d597ce7ac83f6f93661041c2053ad36df1fee96821db3b8f47e2f4ff3cd4d66beacd0437bba5b1765edaa9a274c8aceb0a699b09901a72af5bf89ed4b4ab6917ad7d438127bf3daa202266011c839a7c56dcba8e2e15c2ef0f1849f189f142c234e894f5683a7bac687c08cb79d8ade1fa07f018cd895ecc05bccbe0f0adf461b24995c5acdb84e7c270b1559e54f1eb9ae690a51cad0dbbc7d00961a4b81acb8919e66b37847b96baa878c929ab5ba90b44462e2699bf3687037e67abae0ab98d53bf2355a80709006df415bcd0d92d24466f1ce9320119cd19c42f445d8a71dcdf6c3b2293243b38f75dec8c5032f7a1f44f2de359f1d7c58f84a4f7ce309c38d5c9275476bc6e16e28a57ce4c70dcc0f3d4977712f809295f83aec752d7714128f0733d646005de0483f8b8159339db027b44a4c7d0c72e63a2c093a24da8aecfbac7afc143136351653d54ed302b77f4c6324466e126a95fffc9a26ddb23eb310523dc045d98c2876368df26bb437c118040fe0c9fa2c9ca05bbe12149bd46bea50dfefa30468f3a6d7f7b2fb791be349397878fd0e34b4788e6a259d8d4c06c844763eda000552e43c35862af105c3ce9ffae8adc858e29cc8511fa420771c1e277addcbafcd94043c57651b9bfb85becf0e698ab60d86d92336e3b97b298f424613843ce75710f876d447272cd77c3bed0acd204f683c64e020797171881949773dd7b945e0f1659e72fcf4622dee3276e473f0094dd15b63cf7840fcf9ce749aa50816901ec4725d2f3d80e74b37a6cd36dfde30fad4d703452e53ffba587c2a204f6de2aa4cb7fd799b247dfafd1b8c2836f1640aa0fb78455cf5659fc520ffe5d4e5b20e1557b17b67f169587e932d2e898869179fd7c0919e9a753d00c12a786477c38699135132a7652e7e7c5f1ac399778a7d5a3ee4b9aaf2c95ad01980d41bed46f46e884efb9bc8d1fd2d3635c0c34f4ca08e82afb058941abfb9359394a5db719f5ed2ce10d3c5d6526d72edac370a29536d6b4ab95791b05c036f41178128e9fcee677ab6b3bad9b7e89347b5ba34c2774210671b43b67ab44f6cf1b5f34fbf76047af5b50146b64c06b76abbd7ee8ea2289a224c96639c3ece3b922704392090664c898ae268b04eb1493be186a32d027c433597129aad54136e9e89d3db6344ca2f30ec1731f5655812187da774c0542117b918597790f01f4033b6b71e19488c117e2f92d22513611ea93ee483908a30c002735a0908d2131b9c7d2e4437d6c568ea851b321570dd17181ef655b581724041d9675efeafb4c333471ff25136f967015ea5a2b954aa12f56bd995fa7fd069cb2e2af1442c68e8ce043e707ff7a4f95906439b98dee68ff42a3c7ca71efe873781cddb235ad59892c743f5a332a9a8cb4cd0d17782b8a1c91c588526723e9ff05b582d9ba0a47ce62ef6768e50373a373cd68f3ecb6308d10fd1dd83a91ad475e873f445219cb2ea815ae50c5ae1cfbb873b65efec9f665e38af28cc066811ab24f181c434b120527b9b23e83ed80288adafd79c0352e87332c92adafceb79e177522d3ead64bdc430f145ff44da1a314deb58644aa0fd0147d7b1347b0e1853ceb3b23f4ea782e1fd61eaaf26fdf0f3d064d6a2ef2dcecc23341b4ad8bfe1ae29de96b4fe22d2f4f038ae857d57a3756d120582785014f181bc85b8bd432fcfc4042ecb17eee5c2a10f852a3d3e0b4783cb5e1c3cb4e4fea1cdd164a03113d2e40ba2555134bc760c78aa9a20b4b0e9b1f5d5d56306f63cefae1ec736c946b738ac839edd37cd524c7be52c0fb947e289ad380f5e046c3f4afe7df697108a07b399566e4a5a50234f523211808a6515a7b21926147c0a0276c12c5f9b1601b3f97aca20a292cab15ff12a3d56005844856b751d9dbc2b9138d50f33dc3968f1044bcc724625a76dea8418ac24f6143b3653ba5616d7c1734a01caf3382d1e795b33cf8b21fbb7ab02662469ee4d4d82853f433479b980c81cd12f0882b561bb95d3d890c8dac51e23e47fa238de6996997179d58c9c9635c8dfb9c72146b98070d1c2727a767ca2a75932325b4436c4d6e38232b38fa4fcf85d6c27e09c181726da9cd703ebca3b2acbc6f9a25bf59e779303c87323277897c1cde6f01608df37abe077f1a2150b2a67b80b57f78b2d113e16085ff77d285bba23801def9e4b65fb9e0291f4063a6de9930b90e52e09b39d448e86b0840ed9c06c2a99fd81904e255a32361a15bb0585ac4c319c0225ca4e64ad9e2d585c2898f54d69aa438267a431af3e7d6d81aec9d4401418b90b8d9b701364a020cee2ba4d4c3a4f8e59a66af03ea2584e049688c73f0d468c6cf1fa8d00d22dcf7e0bdedbd550c38d2cc2d60f8c5cef66d103b901f281c6687719eae16ed41e13d35fe53c5728d0df53a61a5180143a34eb8490f72c1015cf5d167810330fe0d73af32f32eb98c7b570f9def5e88034c5dfb747ca3926e7f549c3c1a182255e4bed57b100f8cbb8baa0c7f82ac625de2d061315b86651a70ac2479fb81572c3ff270444ea3d7d8afe7ff249f308d0c999715e7c92a83906d2ac45bb9b7003a19496cb9b2da8889746c47b6f4938686b82744558c553f937381e6fa50d691c57bfda05a377ff0c3ffc1fde6bb829d668f35eeba2166cdadb5bfd3e5d25ae4d90ce4957d84a67a74ee5db7cc54a64465a6233a91144dcc020d6216e235cf195f7531d676f0ed61795c82aeff05e75d937bb68e5218ab9d0a50e199535d3d40ab9ffe60196939539a4e69c9edce3a7ea301268f5abba4a784fbc5c09518d0b8040bd894e929d2e7168f502986116b964cbd1382c792f5181bb8d63b1dd99a1873ce8b2dcc4e177a2ef00836b53f80ff56ec0f3bf132fc9aea00de138e927130658d1a1d1588e99d6d1ea0253cfe0d089772b2411ece191d4a1f17239350f02ff5738c3ad98441109308a0b92793fd0f100a4d91e2d3661d4e1e5551e907574472b1f75045f7c5fc7d877c42fa0c4c01d9e761a456313518bab3a34acef45beff4ba34e60a15715be75bc978e2d3b672d906105f0e326234e8df33b8d5ac8ec771100d90701836f0d47c6ef73316c1d4d9a566f50d87f43cccc84b9219c1324f4c028fcc2545376b924f2808cd22e6a45486c860497e98da22a5e207e1757496fb63258e1630cfccac60ff901eac50b806301520ce9e259fe8b3058f322c6b41c72c716052664a9ebf8a1c9b84e6aeb7ef5b3b35edd61094795d5c252f6819cf67f5bc2aa1d685b5da54bab417242fea22b5c6352db7b42fe3ffd10b1e0cece17c385ec490d56f1a897898089115453e3c2c5cb0feedaed8892ff7d34f39ca09dfe91e2e8eb5fc9ba13b469ff3bb74b4951350530f88d6cd5edb0b65b5b968d1a770c29f0603a633e38c3848f92d831ab0ad12c6386818eb4cecfece1c797f62403d6e5042ab94f0788482622daa85409e5be77a5499242f2d17c14b0e226e67c981ee59301466e9c2faa14d1edcf35cec2c911b8863af8a55f9c7c43ba90681ece7f500edad805a45da34e6dbf74783e9b044c79ca2c22453ab5b64b1dd33d93f776428a658ff4cca00c6139defd002264796086e7ff80ab1ef2e357835839e7e4c11ac5485256a2ae5758608d4ff8fdae9b330906b26ff64a0e4ff8e715a9a19f5907a17b262d50d66983c7d2694d29cad41f4e56252d20ed97c32ce9f567ce863d12b07bafaefba085d514929496b4ba3cb74b069cb4cb1866f12caf52228cd86d976dcd53f067066816ee2c1d03499f50744ad579ab84db39fb01836b3ce0bc12f88ccccc7af07bc98ef4ef2ba71cbe1c5bc852d65bf4784a235b84ab25d5dbdc3a377b36776013f04716097fc9a114b136d91ac3a6292249a19e520f8d22673eb85c6fe66f45a2e405608fafa41dbc427aedae5e503bda961ec3638d93397442aa0495c24ada3897b26a34c3d78ca14265b9b444db2f0fc09d6307b320918587a58252788450ab68358881f1d0619801ee634ef72ea1fb6a8a49716237660cebbfbec79545f0a2d6ddd0762892da5ee9d75afb6879720b48e549788431d45b12dd8ce49c7229da070a4bab694a51e8c619f181619d389f8949273a42e1082551c92e6409832ca2114e5b659977e78fc4fd741fdf9429832ef40dc8e44867d86ba5721bf9efc5bfed2c64f5711eeb582b43eb4a5ce0937d4258357ecdf900d0cf34fb3eb972672d78c92d1f7866bac75ba81bfb711cab41801f2f5e6eb85c5f0adc6a16aed2016d93458784662d41f2ed510dff973552ed6cf2447c963ae738d5bd731f590f5fa4af232f0a57734a709586ba56e09131d4ff50e677ab34f4dd7f57ebc63189c46b1c79887ac2d488995a16f70e40ed35824f765f15fc4c6ea521c76e8b8a8cbc37eae2d8dfcd59b846ce7032cfe341d73059ab906ab4ca052c0674826a1747100458198e260b4ff1243138cc4678266aa727d3f6ba86f40c078c477c454f2be13a8b5543fa918d5c59e5507f3803745d431f47a146a709dc737017afe83ce7bfd454d15f73236430e9135e95342396c6435aeda71c0155acf96844281a47c9472d0689c0c3c8c95af6a7061315c1c5d68428dd771ccd97440ab996143d06571d11cafdedddbb9601d82c94b98950eb17ad0cc7846ebe706bea93497fe3f9acd9146da254c1e3aa1bddd9ff62db4b4693899ac1ef0624adc3e70c969d17594d24b03d2e421bd5e6f26bd5ad9da6e8c7eae3247461e29fb726a1d78945417582b4877964c54945adcc5fc21f77e39e44b974fd5cc776c60a1a55db064626d9418e9bb20bb58b751895fb58b35cee4506a707ea7b0f6f8821b1813db4dfb22e0703675ce1b4a7db73fc7d7c4b45edd89ba1fbd46fbb984023c2e1510e650db2871001dca5399121320bdc087d8550b93123e8c73de301ac3dc43d0951ed397626b96c9902323f8eafe51d80f625ac52d3b068d9af4d32e54b31f8df0f39ba29a4204ec2625ca04713b110ed01167eface998df40a85dadf297525fbbbcd5758b297eb23b343ce509ff6f324e9ad9b531a7bbdf0434b5096d237d907787cda2a97c35ee6b2144e4171bbc3e8b9b355328b0a1e180ad00307d80bfb7b17d48a6206424428b7976136874010898c1008f3ccb004e3bdd69c682e9f4435120536c842e4bf764026e823575f19c1f0e50d06fa81f7aae6d741259de3ee18b30705c1f53f4ee72115094fabb41aed4da7af553501a1771c6a0f8c9733ed225de6a6ed898b39a867a93a6900e790b895590809fcfd601c8c78d708b73ce9268bdb49c969c5a5b256bf03eccbc9f3e69603a0c469927e6bf7569d0763382206ac1a8405f63014f06ae4dd057e886c0caa724cb3530907dc279143c8793d1229e3b20138a8d7b2453d519969ba700679f46edec9d84420d11b59c645f6180ab17754a488ed327b3c311dd1e7cd0c2e113234423eb3bee9d9d77c85893df3d4e1a774a5aeec019f11537efa9368d2d337b5a9e14d6c772addd62f0dbe113a18ddd56e4ed0f09b09ff7aacfd60543ec63eb94941463545d7a2ff14d4adede2e3c5aa3b8ae40b436262299dedc9ef4ec21d377c99f065c024aadab01fefa85b5ccc38dd01b1f3d3891985bf2860c7e7aa854d962916cd47b9c31f025b0b360363c870cb02e1ce180af45317c6de40269163b6490b2ec1bdbf293b958c6a68353f93653a6a0539e7947ab19650fd5d043642ae2ac1c786c70a3e18afdef2c97a4c11dc4d6fb31971d6aaba7548d7163cf899cdc376f0a4c5e6443664cb780d530a08c9b433c7b17b6066a22300711e53a940a9cb17cc304ace8e28b47eb4ab13695cfae37ed1274188ade47d7b4ef8023d55465c6e7713e29d9c4fa04ea9459e6f63ab9a3680048dbdf1b62a5ca58557c491e16d70d4ed242ff65944c9518d7ba333c35dce92fd40a9050e00a97a89efc2ee4ca44fac10f3d30dcb9c01642eef09b2c86b849492b0f196e41908074af1a5c930805cc959a846e6135c40a44c93b970477f4743a6f5c7910c1915754cefd83ae6a70fcf93256c7d82d9cc094055ec00ef7d782bada7be11ea3a22a94d1c7a1c531aad4b084fad7441600f2d6cdbfbfbf4cfdf6e3081484175144a9d73945b5669ee83870da00db4e813255a12e14a665bfdcd1e504c54c2e575de9f5cc4f1aed3d5dd9a1148c01ff0fd636ee50b79a771d01af5062ffec994bb40fcf672a06416289f70b053bb52dbed69b037b448535be49bb57e5241e70af3f5e40db5aab7cc6c3083e69deb00146191e6a988a863e14b19f91a94d0c0644d6173d3b6d15c4136950021b7144f261ea48b48378c2630bb7776524e47f695a38e63a0d5535d4b8607a907ee06a7f0c3748867fe459f41e72d2a60828b8e9651624dc659f7cb0a0a8efd5db09fbb467de5e9a0503aa10f026b0126abd038fac7a19cd66726f0ff77f0181461e431316929b2130b4dd46c71685c62dff03b44bea3a3a6dc39aefbfdf97d6f04ee5850996cfd80d2d37bb80f1d65264a1dae3ba37e26307cb2df3fb98c2cbc9864a8aa3c43776e5bbfc5f11c988537a678cddf1b180e31c89b8c781657ee6ed0bd2a373688c1959e83e85263bef5556f7b283c93f7b45e087700f58a257b952107b95f8636162e5b039c8904f0fd5e2081116a6e9f1692d6b60476b44ef978372e817ef9786cbb48aac1e12462eb82981387138205000f31217a7137a340f92fbafa915fd5fe18036667cf82c8cacc013f78bab77cf8d36c04e92d6f77c679127656f5c030c3d5da2f612397574e2e44f1b17653294b1a1bf3387904285d13f8da79b431f23f12b4825418b15c274f43905962dec6fefa2a86acb177c7dd3f7e0ec95af999c2806173c0540b372c264527f9aba37569cff5037f5bd097036207b36ba90be7b003839d9e0120a57499a14f0c3f00e552696aeb06f19a3c7c559d04b2793152fadbb305ef2abd283d4124a63a9f7e7bb746a313ac9fe802429db0890a59b7d4b464e618313c4685aa0d14a4aed8f440985ce3c544f3dfbb584f3dddf635cef40cbace8fc8d53cf29e10337e4609e41397afe280ba4a0ae492942e7b8eb87fff384cb50a000cad2d99f5a833cd4e3d7f2cca83a771f211a72736a3b598eb3984fa981031583682795bd693df7c203cb071bc0137969cfc6bfdefa833f1b139677ee228de262ccdd7d53bd69d62b7f609e142e5e02df75545baf02bd05a1e53e2a7246672b48bcb35c4c2f100d832b7991c2066f7edb540c269e3d19bb91ae655bcb9527f10b84452eca19563536699711bf0062bf0a6fa8295aedd3f56999fc7c5ea95dbc2aafee55311b1b79646d4a631e5a2900199475eb96088c53ac764dd6898f5adf32aa18902c7cfe1c010e87e95ade6973368515fff647134ad5377ea645fb89675451880d41725136d369cd015535f61d211e0c0038cb53478bccfbcc9679274a7ca2365da7cc554f6de59d0483019a6f5cd965250fc8f82fd08e03739c6cda231c2f41b1a1a5aaf4180e33b2af135c39bf787c95e7b8368d050c819dc3025854335b9c6637abe21966204c180d2e511407cbfcfd6a5d4ae9a16d6c931f96c3820929df902a070ad87fe13155589401f573b2a119453c020f6bfcaba643f16b37ee2d06233824b4b81c157c664d76844469dd801f855b880e08f7a722947c9888cbbae8c9e99dbb5005f738e9deb056f3f4063d2bc76a143d17e147d41831f1eb977e817fef1af3487bc3c2fd63d3fb2cb1847ebf8f16d56d321130ac1dd157e6505dca3b6ca0ad6eece301002fe42e8dfe8da96523f863a464919512be25c3e06ca5fb44a80c5da9f8d2b03b64f7849b965ec9c279222f279322de09491cc34e6e2fc434f7487c9983fde796936fcdc65897759738d95f2886bcb54bf6a47e9601042df9226f21f9e6604dbc4a44d89cc3adb6775b1cf5a1a2611b09fd5717062ba20fd93d82e2ae91951a6a9b71cc9d7736191ef2ba75b795e116df8327fe963c609a05ec1a3e721239aadabfb98cea5de45fa33f06402518f0c67837968bc9ac18e429acf30ea4bae9752a9e645c871bc8f63924263bfdaa466c991cd07ab5000977a6440ae70981bf01d752e889a2a665e489a916d8f7df93d5fe35849e511f84a88f77c9ac3d4c8c0e6bda8bcc5b1996fef7fce9d7c03db0f0f4581c8cc8ef3e039a6d3b6daaae576616ccfe181d3b49fbca6530855e27f8307139a8975d4a94bbd2e1042b6cb770ae7cb3a6e16608f9bbc11e1b3f8a81eaa2c4765cc29c8fc9d784d5e5796dc1dc97d448e3981bc068899a913de66315b566bd8ce64562a94e99913f8d111ed0967461f00893112ec128f20d32a32e2c4d2679c471c650537151b320f98518ddf3da1488d7236403870426012cae61bee3031ada4898e1e1af7bf6c2fc9be11c05c61f5a45c70769a2169e42c310052430b54c8cfe8764d7fcf0d803534f617bd481d660099a3ba736d23b418ea2fd4c0ef8e678275667958b8eae246b291e2fb68b30091184b87b593d704132b6af2b187f6d20d79349600104beb487f4d15f53039391bcbac4ea09dc3c510c43811a44cf1480d92aa4c6f9f8bee3b89cfaa2b80b0b43efc2d85904b05605555122e97983f53a1bc334acf3b2ce4410d6831f3e9a5315910961b6df89b5654ef768750d36b3ef292d0f6fdc7377cc95b869c677da97262c822e7f0134ddcb3c66c6020fe056a6762e53481bab4b2ed292ec65c6c09a8f07547039ee363e5331c3beb294fb435e44b01ec001f770136fde8eab027520ec9cfd1cab2e8e9d217dc4d72731733d34a77dcd5cb583d8598713d36e8fd14562096dd078881aea0bbac9326d6431c17e46a56768360d80fdc8f0024f3e6a2e60ef7ea7d5972fad7ab026b22df772c90d1041406b2ce53cdb427b6284f2cde94eb0cda7d06d93fed06f8c687f9d7fa8896dbcae0f1ee269044dea086d0880781c13da07286abc30ed32f6d5fd075689f4f4e4656fd9884d324e0fbf134ae24755c78e4e3b7e340796329f0f7fbe1c6001813d728a9bc719c9cd3cfa0fda789a30165d4bb078cd482625da68b44432982daf613afbe00c293311ecc939beaa6e3ae7bebc6f03daa3141572f25171b0f339e13ce03d16094e3a82cad17143adca5c9790972ee5c480ddf27f0977093c636e86dad548b510eaccecb3889f5f99f3c479b7e65584849404f5f4d89edc7389e8490e02e4ceb2dc4591e0c05f01238296fe0a9b82aacbb87926bf5ca0921e9905dfc0c8291e31ece698ddbeb8565bbee55001d750a6aa6f1f1007460513531daad74480d3b0d9fa21fab59282d0630dc3499f1a3d3f6f9607cc6026017a5935dc4bfb2401182a454d0c1da0790daf584e659d01efffa81f7062f7d20da8e380e9da2ab654620649fd4b58ffe6d7794a09e67a2d2605d9eb184cfc1b5572118a986de571cd89110e6a0e38518ba015c0c60cdb42a65c8f76c2a425cb1617082b3f88986e52b2dc996ff30257e45e396ca8ab1ac13557fc0b3db01a08303c2df46db95423367a97df6e7ea48af7b875da9a0e990a0ea2aab5999352616596d5ebd0eb72aee9708d078716e7118178265543ff1e5367c1fbe7bf158474dcafc52dfd2a0c6784a3205dfc666fa00eeacf27a19f625fa09644e9b35b9e47aff6c711757457c72ff8cb35f4a82f1bab1d05fc8747a088d2c1a2d9e289ed59a37347af586ba8d9247842116acf1bef4c09378e651c19c8f1413daf5f0aabe8575eaf6b285f1c165a173b0e31393633736148676bc4ed233561441cedcba3a45b57ac9c3fd2341a6ae36d21bf1ed2c341377f1cf58827839b9174e6be7ceccc2086e91a6f53de7228b0b2dd4f9a6ec585697527feae4e2fcb600674bbcb56f9835f520b59495a6926c95a1a4fe751834f22112e55ebd330af53e7d589c42034230bc0f2db984ba8b585d9c1cec394cbba54184d744307301b75470e38ae0417635c8c65aabad796f91a192cb68f6491065e8c73e342df2073a3069834356e13ecec21e8b2a09d2a375186498442c2ee58fdd644958eed3ffe520941f12bb317aae05af6e92a3a3bce5e0ac00b1602042447260d96312faf782cb77661d44670bbf0ab5b1392d05bda0fd9035d9ab64cbff8a0acde75c3e67c0a3a7960f7b04f334466b9d0fd8e6a82b196800645b6f04e728f6e9a580d326bf5f3a13fb1d95cc25015658a8d2eb5263c4e1065466c857bcf87c2a065c838157ec25b1dbbd37b47ac23970352d75fa8967a7477ded1c919569d90d8017e96bb70091551927b526b094692752ad2387735b1fcf5e52a9ac64dec8646e6392ab5c4b18603cfe7672dea02bff37137f3e5304c61c3f009b9b72a42fa2692f623f36ec046e401830754b2a1847c5cd8ec27ed872810aa911439b3c7556147d1c56dcc85e4f5d3930f552b7d78074bfd53c6432332059c83f7083324c49cbb94b35bd939e3c9c2997734c5fddbd1451828eda85eb6b5633680dc25811d37714c307a3015f3fe3743d533334cfc21ee294ce7dfc5ea2ab9aa201fa4eacfa1c057329584100a6dc84657bedfb2b973bbb7ba9d50e13e441b91332fdd1f6b46ddab3d3d4d4b6988649da84e9462143256a44f45b9462916601eb9c6347c5529967109d07545b87e84519bb420643db374546ecaab219ba4163f1b33fe30d2f5861d2c4f1249f08410944a08ce528e2e1ca907d55583db3ce3db14694ca555be63a201aac3b326891772128d0ff4896b5111120a370ae8b14448f0b13477cde3637b0f825b7b69032ae4852725187efcf0a2e84ed396ca2e5950d29f5ee5abc0f34bd307597da84430850d485bef8a0538600134a5454632258f9c28e77ff9cba639145d67ad7d6a1bd84d655b22557dc27fb25e461c70c7e5740f578a5667c59fbae0f5e571c25f56266b027154a2ea597778d5e97d1645ed26b037bd28437a93d7b0ac11257faf3149aef60e07b81173f514699cfc079ab9f8c8c2444822c6369c11a5df9722664c92ba9cb6e682f81cb9f175d9ff10db8613fe047fb00d17295753ec09f85e4f403c98d0e530885196693c332f185fc0263c7f8bc80e8f238ee3341f14cb69b790be33897cc24fa5868857f86d76325ea2ece9dc4170766202af8c2a56ef791874a2f5be0108e4138bc2d525cab3fc59b3f02534113a699132e5e62d43ea20bcd647377a52d6f6116a6c881e59309cab9829b54f3f954ab1724a54029b6976e4f17586953a6ef9184ce4ee2987a901da2b6fae40d811b630c6f174a96ecb38b935ab135a2b0c3b94df044d8ff422f2fe46ee2ca72e1fe7f5163a973d56c74c51a9dd116c985924298359724c4a9210793107cc6299c86bdcf8304546036819b60cc5d3d84df654e1c45906baf4693a2af5c1ceb6a9c74f54f3c4e59b8d6052e6a962dbed037adc835ddc39466768ebd90ec0e3665b785ca9436b0bb997f9f7e36f4a009ae0c87344324c7c77f697a9dc6fc419502fff48fcc3483b20f4137ff8dffe10b7450c73813006a8339327b183ff9ed24551cd5e46004bd9a43afde2e0fc402c6221b0671735fc04526f638842300ca6e7f02c3310168dc038b1519e2fc7b15eebcf89b14083688fe7f4e3afef02cf747884c65bac6d1805ff8f25e3cfcdc7fe664a759e13c35bfa7f835212b3f71910926db1f266e778af52a99937814780e4c1b07751760ee05a81f870380945cb35241b188ac91d2c2b929f703afd20232b57aef27e9f8a0a7ac41a9c939f51a03bb73afa4df069b3d27882de7e983cebb2854685a72e797401cb869478669a8501f0bab6061d3958db40a2ae29983c47c00e4c2c6dc3f9b02bf02a1cde60d6f941a1c11a7fb65f636a535770fad1836f7a2b08fb0a7e3f680b0b6b1684eec0d2d79f24c9c1b492d8effe1a968d0e95e0a47682642c8f8f81b1f742634e10bdb07b32d4ab112aacae9355832414b3d1bd152a237bc001f3e336ec89dc9244eb58d1e8d5fcb54d531492dbc915388847f797c1d3646b4f1c82bc89b2a32348d831b7eaa26464a2b73b8eff45ce4639c7289cfbd2f3e52c72d2f41f7fcca47093d99fb8ff736fe7a412af4b1fca57f3ca709ae52984b7856f3bb546c938ccd14be7958fe40483e2fa1e5fd651c18091503a6cfff47118f829dbbd1f55a2549d8e40c9b46912f1348de19c9972829db68e5ce0345bfcf2a315165554d42f1aedc983ffc7d51a50b4456137985c1b9e5749bc0e3349d5fcb7f93e546dfef9c79373835190d55e9218ab87d05f25bc0df62e2379507676100ba304b33ec34c7e1e116e4555af0d363aeb6422706fc86d71cfd6906978a874900af9edf38b173b401a50833f041def23af4595651a125508654153f174d4129f88f5a1d935c2f669b697549aec2ea12cbe077a4457fadfec67bd29b765fdf2c5eb3b0afbe759543b0733b52abab916988a5aabc64678945934aa6ea8d98ae02c917eafddc2a4ef3aee32c3cd299a527aa43a8962614c54d1ce21306c63e88d5a094f024c8dad6eb97e2b6ae824d35bf1aa5e0312a6b175dc57f6fd90b969bfd3b7364a825488c43ba9c42ebaaae0f5f923e7ef75ef32b0d7017af9f139ee1f8059511e6bbc7153d1a1973b8a0a571e123f86648a912dca63a9684c6bf4cf557d236f8e2d275a1eb7eead9be48b19b14991370d593546aa910595b27d915049f7ff093b7c27f4e5dd5831f9cb3f236b17a26a433fa6e5c0d768123c07941106c33878707c5d13dce10018e8d52e7078d5cdde961bd79c017244f289fb6851420f9e468b9258066fd8fda0f3d1ae01a53ac72fe01b9a3b92a1eddad3aee98d6c5fbcfe20688f0537ebad740ba0536d19f4ab85a196d92b258db0cee9138208d70294eb6fd7997fd577dbc04b7a282451ce64d5b5a0f0be5cc4a23100a8fc2820e411c206bd3d070d9886ebe824ca5469233c5261bc3907dc4b1f9a07ee4268e037cccf441402b64752778b650fc38609a0ae782f470347239dbfd37d38eb1cd2c9883605b67ded90956489bca32085710cbe1fbc7227ec8e42b4a3f3076e355f102a5ceccdcbbe5e8f1866878fa7e8eb4861e18cef4c10e87c95d4e4fded79ddd75b4bda97eedd0416f169026234c858fd59ced77673327cbfa8f661362a9cf61cd4dfb099f6f498b9703cfd368101d5ed03d17100375f039232416d3f66fb60ced9963d950f78b5e2fc314c693aa451fdc3a0c9f181551f80b6d313cb09507dc153e344e115af67efdc166e0259b1af8e1a4c9a686035f005386b6af90bd733190d9bc45e7d828d4cdfa2885a7701034b9e122333b6b0c912b5d3d1a6a1568058fd9f0ef5ea33732e6bb79448e234e26717924778491d06b519095771a21a7eb6b6b36b601ab5f60176b088c692b6562bf59209f13bd0771792305ca8d1f10838aaa8adf96e6f52fcceb9970d1f210b04ec70d64f8723a0c04d3cb07143c0deb0904af991ade4a9d90b248118522030faab33ef6207b3bdb65fbcb1fc80d8aab4a5bd7c6600cccf68286f766708dc97b69c67be71ffd2caa9671b45b477f0f1260dbedb570d18be23d86650fb9d05fda1bd2f34e7ffc5f57ad9c318b0e37ee74e4c126e4262e11b278436a7783703570ce83a1c373269d22c9eb4a36389fdcee2f832a59cfed68b720b30b75df9fc8b41997b9291cda327ca88a955d5408d0d887228825a341a2d262983c451c2fa3bea9f27781a87861a43ee2ba64ea402b8a5d28908ace3541e006750f8da6d3c2b185bc292ab223d8587a78810faffdc4973bb9794d472351b8cfef964fc4a229815d7ec2ab7ed67b11cd12401bef4c3c7f756cb7b911a36cea99685fed6f6c18eaaf2ebe51a7b765d8f8935d14608102c16a02e8915580d939ff52f6b8b9ee0d3f12dd211be3447824d5f02b58616b2de9372fd8637ac3f04678a9bb04d68d8b361e22990af2b8f54ba3a173cdf651980d4e0b851104362df2a9274b72c2059e27c94892015398d5bd2c45d781b9676dc08bdd0e3ce60ce564ab81845e1ddb9cf7e429436d560c74bcaad23effae59dcdae0eeae1423688401584044d4b887758bffafad9391be018667eaf923b68eb215cf039958130165cef7b2d3e7456fd899b30d936f74a7c16ba20f1ecf4a8d2679d0611e274734e8e7f1d99126bb93b682a6867c4e2a730b3de11c031246a11d2c2586937fcd3c99f45b5453ab1b1a61ad97d78473c34f0f78e26cc6a95302293e88e8314bd7471455f60dcec3ea6c457ce84631b2724fa4b5f5135e6229d5c445e06a5c982d2de605b401ce2cef3c6916c51465b482600d354526a1a975ae98b1a13a4c228a33f680fe4f5503482bd8df849201f4855d743e5457079228f1e6197dba6e06ec2457b5d30bc828fa4776ca888f59c8415fcfaa9ba592cb091c83e2862110ab2d17b544df514d58b1d62b71cf6cd49dbc3e33e12cc0437ed767a6cfde9d5a4ec442718bca90f61aede3e2a77aa5034bbe0ce318bcb4d7365d98549e699ecf6e11b75c41b64d7f75b813d00c93db936b6027df9918d84ab6e65eca170755d415df876d42b033715405f581a3dc34a88b2f590fbaec6d173dfaa160327963b7895f356707508497f7760ab0e40b230cffa43ad0abd71d73c45fd519add3229d75d32ce28cdea06974a6321842efb3ee6abdc8834437a8e8d20fad333194fb219d90d8e2c87c41f6bfa77264ce85769fcc3a261b4017cb77ab4287a2edf7e490aa3c10c331cb2b2bb64f58da9f3c02d5d60a6d87a3f0119293ddb51e8eb44450aa430d7b694ce4dc61a9fe411084f6fdd17e646b71d66a110d676f619ab959401543eb64f7f2f3e0c08ab0a62337a86537d58c37bbf7ff92bfb91b45ca98d490f28beb51874e0c7c027347bb0a5c43bc75e88af488dfe1dcd9a71618e66049bd1c3a263e6e02313d3ff75f790203704b52a6453c4dfc109645cc7b156fa83e8954115349342d26b606ae4d0224dec48a5a646c0a911b61bf760965a72b052187abaf5300ce6e1de598bf4604a73f367ff169a9e427deb551f1c2c1cf841a6776b158bf2c4d2778c268880166f310c540eeef9f822e5dd4d6f11d6c524e0654bdb2d5c69421e4e0619461fb68425bf5d539b9a956953b124f5e96ec1c6237add85f8db637366e85e7bb29114251d143f321b320fcd3ce0e34bd7aca6ac9b2ed463c95c2107e1845a44c0a5b215d84ecbacfcdd62cc517456442555e5bd1c162eaa61bae3d40368b166123b138163a0a2871192611aa345aa90397cb61c93f8795bc166968633501555d1b0191424099a1ee6abb0cc856b7787ff721448383e1cfbf38aa5da17b7109a549642f0f7c7ca8de63a6b6d4e2cd92b2b66ced18049791bef0775e76cf48e0dd43039ada30b51c174697a26c19fa9ebfe752fd704a2c9a795a301a84c07dd17066d7e8c5743a301d06fc71c47f921e216e36c4e7e000005b5674a6d61e011bb8bc66c28a49c9a0e517cba1e6781090a6fe6df8b3b6ed2a1b951950cc770b61276e788cc780ab612eb5ca24013b40f80d616c0dfc06e0a052d97b3a5961a13b4ebefccd4f3c02f43f7f8bdfa4f5c4adb21bf933594e51852850735040f356805c41a5a81dc3d65bbde8f9a810316a4dce6f9d581ada81ba64fb0695e2da2e609f6e701617fc2e39198c7bfc701107ae68459e3083442fcf0ea719803d35d3fd1e1f5e8dc7d0ffc5d4206f7ec352b0472c9d65b174400c4f17d1bf899be0463a05e866f8b3d0e1374f14c51137126ac8324eec87c69653b7cfb78c6d81ff53f9dc736ff86ac95c5795aeb9b4f872f8deaffe1bf61edcaf371824bf2e656207b53e86a8457ba2a58536732c87ed421fe6495a35fc3c1a5ceef1a9a68b046e82d9bfa7a84878eeac652280d38e4657c4530d3a5041127dd60b460387e289bfcfee4fc20ffafad2282dfe3ce641f8ac9929ac6b99a048507211047202a2ef9f7f498e03e45f2d716527fbe2303f5122ea0b6d6d1f38c8bf3caa14e124601863d2c08c6683012d1d235235bbd806f15b2ad39cafe1332086d850f99121b6b9d14bc6c898e4b2189b56f3c7a865feb22bf37db7963b333f5c6c28ab6075d66ca0240dd0703c471dab34db0c3b0a84c307990dcf6fdeff2cabbb581627b347f9bc54f6ffcf481ef95f2a44f9878f52acf2083ec441b0ee549e1690081767e17b9b50b9b757784bd001e43bc5d9e6812082fb012a053e7bc4e21c2742856955711c47863077c5008745609766aff6e96b3c74573f585351ae9b74cb8727ad949eca9142cc2299dafa4cb950d084bc99a20ed6f427b4687456fcba9e28d800d9d4fde2d1f23e3fcf55460d7f1e2ba92be733b1e4d5c3d98579e4838c7484cda48e1119269327d3eaa8a2e78c57f5e82572db982088df7908dc145aa850f1f3558ccddf54b69eea749a7f880627b201b5135efa23dd27157a100cbf8627ffc713619cd445c425331c1c1e37be59d274b71b7fbf3a013fba8f28336cc5247ced216855bde8d4f0871a9effe5a5f2780218d38116f2999f0ab538f4fe2a3539556ccbd5c201e9561c084042a2f324890f0e095898669b6b69dd7b86dc7949ab63b1cae19c042f8b73113a6c8bf1753349e4232b65d15bb26f07f2ffffdefd712a99eb696e44584df5128f99b8da65a1e07604e24f8879449982545d6cc4f406149697d97155c10679414744464c29753ae59ae154b2fb0a2c47b9fc84e469c15d347294982b827b39c42711ca60dcbe8a8df4ff1135b5194840c948e97ce20ce49c56ee304e7a170a60e945bca794abb7e51105b6965b3386f0a8bcf5c0fa2258c891ec547828def61461d0fed6512a6a5b6e20fded3c0df50f0c5c31f61ba3f394929ac720cb85664c6e15d318c4685552d3ccbd9603a79a4d7eb258d3b89a805756b54dd86997ad0e051b817d368895f2718a787c9e3adc8b567c6432c30f52fe254886aee1f471e16736c16f971285b9bd198c1df7141b84a28d9656171ecddeb653ca2429b1b1bb21cf2778ac0a5d4a953fd7d6114a6421cbca2b641311ac59c3fcee2433acd3fa2c8e16c4d4c0ac659f1bf870c21a63d65696edfd65a38943b6a087136169ec14d9c6d1f932d80b6340afb99e6137004c053379999a7221087209d3ffb6bf35eda8c7a8549352629f5b17700e55ce4abc87a014fa84281d349a97d118823099d79e53a1e63b81dfb90d468add582ddac5e0eeea13d50639a7f69285fcb61d2ae9ec51b8aa1fa51e545d74e55e452c3a50f03fd6a8f62f66f6c76616a48594400d6e1f731b017dd7e492d2ab81f44ea5377265f9cddb5e37678f11d984a93acd733d16ecc06ae7b51afdfe86b4b4dd153b740d7796a5ff2e9f2dde372964bd237fd509eecaf9b8ff74900e05829f9cde72abff3e47ddaf8dd623ad16e507d6d30166c88f9d49971b9037e44845382d557d725e00a8bd55c2e27f8aaa081e9d980145eedbc59972f03d94f9b0a5a103cc96fb923cc1388371905dcfa46f61b714e8cb6bcb6551feb55e126b643248cd41f88b501866eb5b7cf579bd099609f6912580590818d51b1e7e6063c4e72be38207dc63058f414274059c4f9771d2f268d2fee5d0c946a40784fef13a46f00bf27a5490b5389b74655e4a4dae1fd660f08a348b7c9f7b9858465c6a43d39e6814f156e25d026923388945b68ae19a7dea0ec2a6ec5ac61e209b986bb86493eaf7011a0558be26cb0736dd44fc02e2a6e913a265e27a67ebf825e8733fff158efa3a88b1f52ee1b4edc5d20abf9f079e97a5862a7b6d468f38312837018ff56ab98bf2ac808d3a72ff51f45910356be47fa093d68661eef336a2e524139f18a14a8d87d9458b38d6777cb02cc78fd59f8f346fa4f6b7e5d2c8ca02bdf6c7d119085a5b2eaf2ee623fabd883cc71ff44bdd968382eb52ade07af4a7774770c3d3f25bff6b95773c1d5fcd9929161360a01f28a21658158d2337b31a729609a6ef58c54c02f0d872b806b71c6d4f650d5974fbd4908eb6a9afb8391b6d7b0fabeda72504712697df16a518fa0f8af9c64195c9402be6ac16dcf6aa961221e3e85fce69ba2ee2c0568ceafc6f2b529e72fa871dac0b36e6ba7bcd3aaee0a1951583ac00ba914a021b541ba0569c5138d80ba6ec31c0cb9f5496de7d617726db4d3939769e015cf8d31ad67eb18422a1cf450e9241e762b755cf44244296654dad5897c6ecd6c8242712a3863dcbc5341f8243f0d48ced6783d0f50787692622144aaa947a437d6ec05b61bd1dfd3ad344012e067a12bf76c662eea3265d0aa8c3a1822973d0ae0700610a1ba655c5d02a7b0ebd4444d9abdd7459f7f2fa8426aa1bc2b8906387054b1ed40639d63e4d917d157f6191ca62fd9ba687f70c40a09de23551d2ab3f25be58a69b1212b39a519afae0e41b831b7b1c17eb34361b494537e86e84743ce89d2557489ee405feb689ee48e531f8caf0761e96e16b8ade428ce74aa2f2b6538a14de083d55eaf15a01c8786cd6c1c7454a98a42c79700c9bf8f6991773482e6e53a04a158ce63c3e2475ef082e00416d896475841f346690799821b1ec81dc178c384bfd36a20c5a35fedf812c6f1677f65213239cb7a15baed24743e8a61e5d86efbc5dbae5f16fd175f5518a32778650f46df158bb374cf63b8e0e41389a1fdfd73463ebd6f52737bee74df476cc92628e9fa202800be724738fe244150555a19e569339599fdf282eee8d6719517e3528318a1bf65be87ba57d6703b57c06ad363431fb3f285e252cc1292b453ddb97c88a1d71a64bfe3dc21760f0e527556cda2a101c1220f792602c6e583d272a7bbf6eec73a90737712a71632b6857b57810a474d4d30b2e360e25c41c42341ed67eec27cac329fe4816355784e24533e7eb137668d5dbb0a90c4b1d7c86e8a7f532fee33dc0322204b5161ff33f9325a6aedcf1540ed12b0293d9b6cdb6bc0009a152948a3446ed646d2ce82e7541a76dc328f40d24113f78ed4e48fe6a25cf61824506b380881e2e09dddf57011056e4dde679459b8e4e1f325474c5fa5fa6ed08401ad916802885629abe840d91bdc50440d0dfbae647c5d69dc47e46792a03b044bcddff0dff74a8fb53dd41cdcf733c20e4ead708e7d73514cdc743ca9a582b5f750f88975b68b8fd200100944515871fe1e90692f7b6ff9e3ae9231b0494d80e8873948138044d05857b33133c96af36d495bb9ea0ba34ec88fef10f2f0fe2bb247f0e69594266c2c4b65ac73fd736eb02f92d8bfa1cbbda057d8402fe8d5dfcfe988c4be74e1fe896ade59041efd6651c26e64daae33ba631ee463026eab69a1774ff144a300c71663a85aa7274dfdfc5dd2d67370b7d57edb2422090775ec38ba04343d61a0c926769f005b519865e579ac6d5bd4b7917f57c5ed6024748a1be8c43be1b9758ddd372ed504a29defb8d0961b193ca9e3890e375b52709fa6d40af777c6595b6489f1e04991ea927c2c9c7cd39d5ff53cba7e3c1f6b7c3e54255a70f30f4746f6edfcdc97cc89d1cb718fc62236503846fa0921d7930f33f15eff2806346a7278c37f2ab397e15f5b765fde72e55030aea5ab2b15cfa8d82b8f74083791b319ef6d33c69f859080daff71ead33f881cfa8a7efb87fb442e387c2e04c10b7321a80c05851199d8ad478a2ffe6e3808c931bd3aca84473a0e034f2aed3aefc5129a6b5ad765756182fc9b1d0281094bffd55a1fda242630887877054fa64a91af0ac4f771a771fd2cbf7705d7cf83939c221e9044b95637976636ad1e8f9bdbf45c7cac8fd093dfbd8a20f3a9a07a2c826fd8c4f87dc9e605edc7c2c880a095965b78307249a753a2cb73fe403f02ca17d488513f5389630c50370e6bfa0da84960b8fab4e377ebb67823e024dc680453116b98a1b5ce76eb7794f655e3f0d6b9c5df3eec0d83e5aa89e2ed02871b35e07c9797d1045af37856a51642f165ee2a373af5ad3df54ed66e4018ecbee7c0ef707cba2e68f340ed9a13fafbcd24c86213488f6a604bb9982f4e5d24503dd5f3baa553aefdea518927e45c6cc9a788b7368227d8f803d28df73a76a61d91a33a3282fd368f4a480714672b74c1fa38245cae17c6c7d131292f6dc29d2f636bee447a7885506b97c7d2970fa158b9e50b27a1ba6676e7c6e563f2dd105f2ec7ec9789381681296a6a6f3ed3bc694b5dd6ca5c22f62688059b6132d1bd004cf5541af5b0f8efadd3f485607a99bbc32e14d84c90229956c7830ffb143116eee1d8f895c18cc9f7d9a84e853e6a3d23bbe1825d530bcc12231b20639bce53dbe3f623f3ac503a9aeb22db2a0443a785821748f8bd948c240e6d6715fa854599ae200523bd9c35443d0d5370255f6e3dcfd1b1f30606d9f3244779efa83542a15585f968fcb3276b2d0d5382203cc9e16f72b803b13f301fa9e7fc909154f62c7a026d65ef4e0a7564385883de95a62e5ee1a450de96d070ccffc3b07fd05388095909ea7e917673e51eea3b16869d9cc71f2ecea3cf206c33ddbea3a7c54fd6817c6da589dbe1b3e27b81cc3fe0c6066948d7c1a931b964cea527668ff97a54671c43cc7a9585638379ed493508d432f5306edc84b4b9075fd99ea4d1cedcd500ef63a70d55944bcaa797834358d26d26c6d417f3f747e1ad4c5c823127b4abf311790ccd910ae621a6dc492383cb88656eefe8d641dabc4f885658c16a81daf58763ae8a8b03f15ba16a27fa7106aa3f64e1085670ccf3db7446dbfdcd23ecc0ba59ced9108057b334bce98c9b3ad71150672c2c89c88529df8662e70663efbe76f6251eae7ae3027a294f9115ca30181defb0762a52bb17b0f90f7b20435e156c7d31aade47ca4af193b165ef9a1860d60b00d7d6fb86c964ad9692619c47bb1fb567464edd1b28a913affd0bb0bd5218c6be0cb7f1b10e4285166102f06c07319e018ee72393d804daee60474da5182ae3f27d4c3c21b775c934f892529d122f08ff21df6adb89b57b69c69c4c49172660ec22e35229aa121cb7049afbbec662dda34d51eabbdeb4011685e10b70ea2ff81ee5b5a841f4a9402badc65dd7c363a2a210a34becc3e42646c84842cda0d8d3f40f7da8ccf7b658c7540fdedde5689a553d0dd53c49343f66c9e7fcc934cb3ec953028b0162e202be7bdf142ffd6a4b8722d3dd7e7d594f3f95b439ce0c6acda1cfa12d5ffbd4464050a7bead0eaece0b85d8600762dd3c8eff6dc5f39d6827914de4184c936382ff305d2565df6d4245915e7a2064611e8d531ae41f1c745079be1b9aff8209695b1a23af9438483f09e97ca002384f1424895cfbc3e54d1b7ab6c10fb27e0c1c4bdc935556d89163d2975e0ec257b99dc201799e4f17fc7a942642ed6e9d2751396970c04fed9564a99065c5239033f84146fa5269f8efea4d477c9db4a457b033e7492ea72b67f5e8aa696bac0363fd5cb5c59460a70cb372251d0cbc713803c71416e195aff786e5a870c6401aee446250dfe4b191c4148c1731dd8eda4eb4fd9f5f6b74aeeaee26ab0c435cf7ecb017da4652244e0b9c0df12c672c7d47d72d7a655d72a48e1da4e79a13a456cbdd831e3368831c0ce8dc603c1804fd030936b58db3da62e0cd22ba9bff5ff3935bd16c47ff09c68ea37e9ea5558836976c3ebc246ddc9ed1d1112f6fafe35e82724e2040bd018983fda7eb7af0dd46f863e6f8bed4acc81dd5bb800650fc599e31c60c13d03dae77499e4b897cec37b500e310db5828ea62bfe0f3c0f42ab989520715fa9066387081a499e61145619718792ad06679e983733ee2fe0e0ab29ccc4467f67b253d93d684541985c66264cfd10389b1598203651e998345247a7a304dd415c739db2db5e8a088c661591e64eabf55730baf804659e9818734f7cbde201840e346d12099dbd22fbeacac482c9fb43136d61ebf08c1f37161f9fd6dac294aa598505e3faff6f6ce2d1bb4a5a84694e8eac7b7993147be958e7f4c61592901e733e710bc589bed10874a16203a4e5cb54275e31b0e1d95b40ee306e7277d502a9fda9f3a0203974964d04e35f409e78378c5a9de3aae11dd6c87b7e879bd36e65cd852bb5e59ffcc18aa0ab30e674e418d28323fca0aeff46439046b35f6b20eb8c0228b739d3b34befce2aec0ed9b64c373a7c6327044f596a07277ffeddea5d0dd5de1ace40624267844b2129b62ee4d495e2de2c236ac3c4fd6d6e75c2435fdfc37948f8c1b1e1bb2c85671444c62c54a162b7741969620e7f7e82db556987b9b98fed9babe791d6e97eea41f772b6c39e51de25b6067f7e1674af0e514ee652ce986f24b33f3b13c1cd167cd01ad7239230073d2b4caf2f4cc50cf3b9708aebf10dc207a35f3f250554f5c67b5998ae1eaf38a2cf99b574be75af03eb7623dbc7bca6038ab910702ce7cc853bd901b62b31d71725604ae15b9e7c5c98cf39756057b816b6e0b3d0ae7caf7a3c9feeadf6a7182a1ea50e5e0add736540eb46d6a9ed870bc03ccba11081d4a8b5198668a328b4f28de1c6e7067bf1ddb9390f2d0e369b4b90d234040ee1924c97c72ca37c2bfbf8d42f20a5c737844b275eecbd5d3e8140935f9998f3aa5a1793d9012f8edad93352068dd70d2b9db92561fbe17f950c971bfdfc9ef67eeefe6ca2b91ef8bc2c193bdd3fe6d58fa1792cd30644a97383c6fc70d39355b67e56fcd146949a83c7282a645acf092cd76390c5628ec594e5e4ad9e52f39cdc8abdb8dbd7d9a9c7ed8a66610226b558eedb47841faecdcdd2e84f2d01000d4a527c4fc7ce8ac7f7a43af5597c59fc14e38c12aadc15f4739bf19d94864effb81d17aba52f2d605f459c1c60d5da0d0a2cdd03a5acf92b5dff26bb26858ddd83176c4587acf72af69cc5a34c00527519e66e23f698bc0050085e8a3e5114cd1b51ce27d6d9e9ef0be61be5c4e53ba36358a68d2137f9b66349c39e56cb7b3e51dcb14b5231721834b46c6ebe7a820a58f2043d2fd30bad8114a9896846a325e680d8647fe77d5d0e16ad722e867da29b7bdf2915e096150ccd21d0fbd317b74b474d1778ae0cbe68dff9363a7f0dcf4cad35732a3b1db37645e262bde1edc3778ddea03406ec4d599128539e11776949cfa784c0e2df3371ea222402f6538ace02cf0bc48644f8366a4b2e0ae9f3eec44546902c8bb6a0f736b15100525173a87fae189ef2948d6a0d3a7aed7ee069e5e8c539c1822fb314a4e5dbd06306ffafc8c59b5034785eb4d0619e4dc7591be5b46986894b15f813214917a46716395774ea0d9a8a776daae623688d55e652f715981df53c6a22c0722d1e02cddf4017f8e796a6ab4ab0fa6ef1624c435138200a23c98585f819be1a15b1a57721e5593f0dc9e80adc46a596fd7e09418437450d9ef2ca7cc32701ce8db11a474146f7bc6cd4d22fcbbeb3da1ae6186ccb3a4f68f7e60ad63e3768d635baa2abcbaf6d69926890326f66485fbef8678bcac9f3d1fc6cb47d32c9e3e9af8b4249f8b7330821299af46a83932470cb0d67ff68b7e70b7cdf4bebb7718241576dbd235736f8711d3a6623d1d2e3942561fe72af64afde573c890e1ad64e8f67c3bac1156b958139eb0407525781c2897318d07d425997bac77044e7e8096b6eda255590bd5faecd6cd4ea0308c37a52e6e2733ba6a8a92af410b3c93181ec5fb704c6e88ab70f2e580ed01c2910b0313f6f0c02d5564e5225f684c75f5094381cc878abe6927ebba60f0379cf70ec6da278907e3b54c8f94957021071c2492c13bb9008d926b84e3a0fba3178f8ac8bc37fdf20cc64cb7eaa01623ba3cbaf6e14b2b0aa82a2760614b9c49fad4331be5b035fec832281cdc32afbc5f9220c5ace51cd3cf06dc35faa46fd7b3b3dac72d69e8ba59f1c734103742d9895d2c28b7137b0a3f3f34c10b25288dc1083bfdd653b995315e67fdbf58ebac539c5ce3225b949a8037e52a0c8c1f0978e4a0e9c83e71fd7b994cfac0060e24e8536dab7627dae4768d798a7aac3d54a60ffca73e3a504ff6910f360adfab86e5c8f0cb003e49b93aadd3b40809939087eb19e50aa59071c50ce5f4558baa23e748ea9cb860b153af706d2629d9446ef13af7b3245ede41d951d65c99b06a4c048dc2cd3effc57141a94da3d9de52e19a0aaebb2b2eb779b6eb169ea6dc331d39ac03725914957763d58d5a6ab08a2af1fa3e3853a3cc399ed8cc50f7a1dc300c130298f7d4c4dae24c05f751bb23625a660e0cc7eedbf2c793f713945fb7e9bc5cb71a8285f75f3de3450c3a87c87a07063d957a7ea375ca7e3123827d7174057d6f44bfed25bda09061eda8b3b956df4e98bcf09ac6284a76ad34f3e12e519498312da53a91d4b3ca6fd7f317c7e99779532deec8997b02640506f71d7fb367c224d278d8278244d9ed35e6ccbc356d816fa3bd6330aac566701222b733ea3d3f5377c89970ff5df4697c6f1cae7ff13efb085dc482aa200a934ba8c080d7116353a73df76360518ca1953eaa52a539b2fa625ac6158dfa8d3c2acd55beef4fd3997768f9e9a5d18d69186f103f381f1277c0e21953dad2570803e8ee389fb1fe62a36ac32b009ef0f00f7c9002039b758abf450d276b734bbeefc21968ec7069c80dad4a66854ac74ac62dc89d337ef2d7e4b97e198f993da580c4ade8df78a81ebf86bd36f5081154872ae3412c8be8cf1475d3e4f792a655c11cc8bd5ab00dbfc076f82511a30bdba9c4b207368d9721b68335d2ae6b69de507659cfc9290a4f20abacb0138c98d86540caf995fded03ff5470528d664ee7954084dace1201aebb958455d6461e413df3579839264a2522d1cb272d557c29f67f0c0b136b876eece0a7d9045eddfc9297ef0b5dd72adb549d39ff3ec3dca701da22a9c7b381c7d3944d6569d3ba9cf8e2eaec718fbaffa068f932b640037681eba7bd9d036a89c1bcba88b9e83dcd709e7ca20c2118ff143b9e76056bc638af860f0d2a30d0ba9fe80a3d7b9426d82847f754bced69895d740d111818bed4de40d6af121cf495f2ea1a361ea5420b6d21cb7824b37904c750563dd6268174f6fad7b13d7a8f872ec47d0e305967b52f61f4c7f4db1fe10b5cf593d3a3ce15cc0d5159c94a7ca81b61354eda353708356b7d405ea512dccc54d77851e59a4a4fa6c9b870d94da8b4de90dc0dd22697bea604ec668ef7a06b98b317981ffb1404c0141d8cf1158808319d430d6b4e1545ed10f9ac5afb5fff97b412c887b36492a342786be6b7ea0f7c395fa220789c67efbae60b943273f1c6300f73c6f3a8c8d0f878e21dd6553e31c13141c5d053f441aedfa10b2f98e52d49614313a60fcf4dcb5147882d77e37b1a52eedec522b528a63fabbcdf427cc110916a4f74a13223794b299d28f34f94941cd5b8bed63b17825d11b22643ee1c2aeca4fd8d8216ef8bf309f2f250bb3edc18c9e2e2fa1456590dd719c83e55e7e3177378dd8d5ee735a0c9b9779fa8c1d46a7eee8a3b2df2931d5c7e84a96b554c53e3a9533b2d2f7386650f783c365ba975e76501614163d2188ab0f392b5571f5b82e31af957e0782233de442af0950a12728f4621a9349f28a6ffa4fe0d6e2659a85ee1d1dbceab4abedc7fe7056ebf4eb8e89d1d0ef3d4aeb9998068370a7f9ed790b4eec3f93174d37f575df851f34af1b96764c4b4b549046db37e76bf5ad70c8b0e87d76e5f45298522c4c4a1dbb61e064acdedc41cda628f3853e83fe2f7dff15a7687d3e7ef9bf7349fd5002392b86a1f40ce0eb7ba3883ec894f1d79be825870b032c83fd5e3ce9577b8112b42b4b9dc974000a6dc7cdf9254250e2cff6528be33a947dc45d9aa77c06bf10179ef15c83111fcba169c8a6d990521ab5bf0cd6d88942cd7eeaeccafcf780a9cadcc6a65e9a63ace860003c884d6073d97a534a78ebfd4462f794c62e66cc6cc39cb98963fdb82954fc0c3550bb5997bb4d5d911c1c97ba5e801b9ee597c9c0402a9b28f69d47c8ca616c6b9935d8444b075990ea00e12287d721f8177fee342fdf2b483633af024ae93622e1cdc732bf79fae1ebbfa0bee22dc86110bdbdad2c706e675c432d89337716809e8cfc8e7a9a2857eafe2aca67074b6e0ff8613be4d5dc8751d32a8603cb2a3ebe331ce385dccb27277361c94272fc28b448f708a518e03ece3b5443827a46290d67135c555c1491536a58beb441d29d299013b29bcc3e7f3418358355afac976d3a2460fa5ddb734303f9e23afe23c87ee25ddb560ecd8d9b2b3262975664afc14bd02eda13068298085a56347d2c1f5ce80dfa11cea906068ea823f9abace566c2f34c5891379ad1add637f7d3b2eb78b175bb94a24abb05d36d1fcf8550be3818922901eb4e8f1aa6dd82d2d0d83b3271a62222168cedf691dfcc985d790374281d027439e358faa3623966b267ab7cae77827ac380da8ba4426c58a7249fd4a710cafb6086b3c2dbe9bb9c5ccb92fd8b436b89c2483b7de49b4bf73d5e7952bdfc7af8910addd2eb946ad04e8415eebb55f6d6919b68481210d1ef6e9799449f960999c62b4aa9454c3c2335aebdc0eb9353132955ab0990b8262707a96db28045d6c300bd4cb704530773819671a3404e1a3f5cb721b33c3dde18494908a9c7b636779880bae52b31f6d249d96068d82d38b8a840f7e7c66dddd4e0a7728d88cd30ec79b9b7fef3847de3acca89e12658713d0021f6a83fa51007bceae6dc259856b7d9d5b87106b94ac2977000d6bccb0bde89f0f01e5256aac9fd4381f5610928d2ae7adf871bade73e58aee0488a716cb26afd3c021eb4075d81014191f708dfa38fa77b03f9e26d34ab196b9fe554b61eb5d112ab9069fb30744698760ae7091aa01dc7fbbb14eb21720d54029cf3e8bc388483839c407e2227741d6173042f106d217b597f406f52590c3422757f1e9e12c8b9fc57f6555520cc90fb54f360d99f8899900c47244d9de26ef6bb7dc9c4e430eb7c4fb6751540186001a59093c772d6d269b11081f5524e8dcf8db3c1b5ebd7babe8be003b643a6a1334e010f1c238690a79cb6cf97083ec70b57b4dd7dd0920f02a92b3548736110370d99e509e6dc151c77d285000953a1ce5e70f9bd6d9814f9dd2fa0bcf4167472febc5398af7bd9a345972e5ba5210c6c0d9e8c57a3737ec7782bc908fb4786079a86e0e7a07339bfeba3e06dbc4c771fd81d5be4771cd74c53df0e1191eeafd9f2eb6ff398e15cbd6b4e2168cb51c710eebf766ec22d5c65003be7e60fecf7ce3706678c843d6612910ba654dd06236fd1deda712776b61bdba14bb6f883ce35c818c5836fe86133d1600914280681cc94e249901f628bb5030d7417ccd4953f956972838a2412b7a2e131d633951b999c373a2f3eafb05c9b9603ef7ab1327fb377496e1b9b2f0efb8223bda9f3cf56147d5595affa5bf97a92fff34b70e75dd59bc14e3a9a0ef857617e523e3d42ec0e821ac9c32a0f36f2f313b1481ca6da1517652155c69406b5207f4f7c0ea24d40040cc2cb00b9a58d36c1738cd56d08cd71ebc90cff4b125ff452d0069eda801c435cbd2c44ec16ffd2246de1059c1cefdb6d1dd2a234aff789d0b2c871aad59119a831c0481826a321e5b75f69a4ce3a436997e85f573fcdb0fb4e3c8be38d77997313f2f257972687a5a9df6c795d5a06e1c09b4f73375e45e00ca96d7fe3dfa3126f9c7840d39dda43a943ca3a6e754c02ac33e6f94e3316883d1bed962bacfb981720b480bb8497c89cd5f691213696d5f559a82723d1e30d27723523620bdba03df6bcf105ea84bd2986012a29af06b0d2be86c3a939cbd475f304a3e470fb69b01fb2c56c8c1d67ae89409f81f3c30a63a41b0c99cafee3082b29105b980c5c07a3e515e8eae4f0c2fbcda6db0e7f56b4b325a00b11a5ecac94e279bf1e42b24be9bf45a146674c51f66baa6e6cb4a6d90f95116546b451a96b67679fce00fdd80c9828ad2c4b3b1eed017a0968cad2544f65d677fb83f351df0997213b5ac939dd4d65c7e3905e93f258994989fb1e985045f0ee3bf155cca0438d10e18cce7cc19bc56f257f162f36e9044f375113d3bf2425307f4b123513c65b525ad0330ab79b150b63f2caf78774341bff48fe45647430ddbbc37c219d958df63d2cad82135d9da0c6bd6980d96065f8456357c06e33c4a432c5184acb57d60a6e1ac01c29c0a9046859f3aabbf91ad6c5fbdf95713ea2e06e9b3d3e05564050a7583c7fc21072c94a37af32ed3b764e7aeafe1194056a097f2feea90524b40978fbba8a7fc841231275d97f7d4365837ccbe11d24868deb9f74d90a32fe61f1cd3b37b00dc1f827e8e1d77f3155b7c02e234c7863ca7f45ce18fcccb67997ea5310f25afc224f2b4c1ef880f8eda760359915ac0573bb0b6ecf2203bd7786502144c4919e417f184e6cb56b08ecb6a39d5c8d487a965813e2e70a9302aa788d4819bf8c81d9fbb8d2d3d4ad45457a0d2e056fa87ae6056ef1d8f3b95e315d9ba47851ee5c246507bfd88f4fad1a96f52f5f328a2340fa36b88ef8d32dbc6ed18d637c760aa540be03edbc0d1fa9b1057c0546f07ffc3d83a568002d4ec59d683eedcd4adb26db8dc1efbdb7a84222b3ca8d7dc66f5e1c49faad6577b768ea8f2049357a40975226fa5ff5472d10673d6926e8a3f975e08b2087307bc1592347a3cd0355b3e568a34abf660d3cf958d8fb439ee77960694396dc6de9ddd05ff554855e2a1d41d5c0ce6f0c4dc96786737c15eac385e63520878908076f49b13f31b01765741bd0b9d1df98abd1e31f4a5847d773e69cbaebb8579e8e1b853e40b86f4cb8bec17868804ec327b84a45fb7809fdc12bee12d1f0d228b47eab6da0d41a704908984e51e89a41bdfca4f2763fd7a12a11ba43d4c973824246698d4ff8105600c2de8466407d3a323b1d7f4ebfed77368232b484a7955dd7c4a350f5307d6f164718aba3c807bc0bf445c39febc3e48004d5b12e16c70a486793bf5ee39a49e61af2515fcb940aefaf9172c31f46967e29df64f23ac708a57184200ac23f5789d1c2e73ece2dbdae87403353ba69e0bdf38edb141d3f635cfaba643fb5d39e16704f782f2aa8ef5ba2f4f0816c3d0cf84addebbe3aa438a56c3b343bb31e65b70aab8bd1df9b2e94883244d4a75d860aa58cc5eb8b165772d23ddc2471868cb92a6f17d96c67b8adb4af62a8142d5abc9d9adead110c8044ac327c9f88c0989a21a01ddc559079f58a4a11a626e21bdebb5ead332323b7bf18a8cf43b245f88bc613a789e222844b78b409ce670f0d68f015d15e1c2d34cfae79babea9d9c0a4a6d6f1a607b8bad38330d8d4982acfbf8984451d2a0212ad7bde821b19f575f1c0eba22b4952e4cea24ce2f3ffeb25d4b649bbbae3269dac28fd15e0164b20275577ba0e51801865e8bf6255dcd55c1e3da3f5c1c7a259721190ba521cf76a0a70d64e5ebea4f9192d999133aac97fe96595e1c3047f5c2b12f0a5d7d484b6cdc1890d9a157b6e33368f3e7068759909d08a2e5d4580a72d77164ef38dacb48299efd4379460bd62b7bcaa1220cef177ff917b0439e72540a83d5c343545ab39415a989d6956cae7752216618bc630b96ba23bece97ab77127d6aedfad98a890478c51d62ca2d47a858a8f802a0ef155a97d6a73cdad5204ffef78bd9101efec14aac2c62df3e81ce8e3ebb305b09942577211cd078abad04a31819d660eb3c7c8df788ad0556f0ce1ac283ff12eedc3bd5e4ed6412c1d88573cf1f3e5c4fa6c667b3950d0b8481fb00b0fba06590b919ffcea860e807cba1acb2f2303898737f6236836ecfa67bfbef5875a3f150c8934a1619072d5f278e074e4877738be4f5f9a0f2c50be71b9f0922a03ccd94619fd090c4504a2276f9a696ea0a9de49e41aec4deda23a2772ec6a2be453e471b85e2b0824d988c214def06eadad2a4d063a6e1d6ba99f1b53f11c277e7328fd875ded3c3cb4b80aaec6ec2bc29a5eac8e18def4bbb6b530918e1a92b6a6c71449c69115838cddbb360164c3abf56a1a30ceeb77f826a82bdbc29d61759515ecce6a79962ed3da89e632c7c7973136265d05bddcf595d5871031f87c4d271a0b0cc6df66327cc9da5fb9fa8e1d1988315b7b07a2b9f1dd2327c73a2a7b3bacd78b558c237ad38d731ad8ab9220d66d5d7ab0732251d9ef9812d7ca10aee220372b3ae2fa7db8924a7edf71d86c1f02c2ebc9c02746cd2e683e03319d3eec9c3f3592b784e8df460a900ee62815ca13ac4fa36178cf498756f6820a6f8df3b71cbe03da1fe364bb5de25a7277f6bc2f2c7d7d027c58e9a300820cd349d9dd375786bc9deb795a333d669d33ddd5b12afe2b8105c8b6328d4b356d653744c6c1704fb4d31405719db388f3d7b84bd5fd250317855a3890c176e4430e5f1ec26389f35b1b022440e18d32f542755ececd4bcf572da9a6c9ff8806dda74a07f0327996a7427b24ba62f1e177c9bbc7368ddbf2dfdcc1e03339cc45e5b17998803e486d13f67a51a15d5713a97d1723c5c09409e09ff33ee2ffff5548ef33fec7479673ead9724bbd01a8c995a9055b67d4d5d73afd9cc805ef7bf4d9ab391266daf70bf003a9711a6af44687a4fd5a755a2507e5b72ad9cc693236bd8eecb0e70b4c273abaa85e48e13e3e61af7cf48870cc45976b36f77a77ea59009918c01f6533833d4e648407fef6329f699ba77346160caaa57e7149298017713b4c92aa27e5446eaa8a38023e453a11b5a247f02d6b87803e0721bfbc153298b26dbb75d05b88822e8186584638242dc6364069db97338d3d20c09e0c768cd91d83e96e56b2f666808a6d569ecc1aaa8c1dc553439136cb921067766877fabe862e4441d561fc0cdc68b4663fc0951e958830f2b9b727399eef17c0d0b2f8b131f693216b5aa2a8e73634cb13569e2fed11369d56c0de2513c2d7d640adedbd3aa7080790d9e606a1a4033abd8a9e6fe1e57fe81ad752e178658268d9e5074d6a74c871cfa101cbcd8fbb7b238b414df7c8b93bf50eeaaa1506ccd20f593331dac3ba084df0aacb52c3d647d5a81d750048097af01f66bdd581b550426716835ab5e3c41499ae6be97ecc3e43a71badbde5a40093c91c3f032ae50e46627603e9de3b6f11ad544f53b7281842ffb8e77a1a6818177d0c007aef0ee0204f70de403aa65bca886620e7ef034636a6474482be6490015c658a8a0db268d629a776551060d7bcdae2969ea3ba5baaa7205d358bba84872e3a73cb57438ea104a5759c1dcc88a138826de926a61798c1b0c624627751fb3cab85fb06bbe724b14362cae15333c45ce956306372b96ed3455d85b114cacd8e89bdf3938815e148f68d5ced319ada179634d00aca59507cf6c1f224ea07b3ed9599f723235a9b39e793c1aa37d6de15413be22db9a6037c4ccef7e38f57130b7a66030f2ff00f7495da9038e68cf2d9d93e598c0c9ae6919e132478e9b813e0f6d11b7021cb7fe9563c933fca24d34d370d5d4da3eb68106774882eb05ef72589207a7cdeaf51f9859d48bbee07087b4beeebf2091e66998e8addc010d12883196325f3e9d2c8d13a5f1b14b19ed8380c1f5027ed61e4ff0397e1c47eb2888f52136dc4218a1abeb202ffc76649ad2fdba2a26fb82893234adc518e1a79e2c74f0835bf4aba51f58f29baa89f53005391b353d3e03f54c872ea73b86847e222f6df30670133b1a12b616ea23081a3955d884456e96df7b2614b58850145ab709b8e37c03916b06175b83aa63501a8622414d23f6473307b0d8dea8a21b0f826bb0527bec4f3a576eb7cc1aea743142f45defcd39fb23e7edbeb31e624fde02bcdfbed3af286d7f61be316a1874c30eb8274805bdbb589b28542245db0eb3c75ada7dc929d4a2c9326d7a6548e5e1386ce3a83246ca3086730442fcff79a17bc8b1115faab8ab11b8d68fd877f3db765b755e48b2f24c513d465e1d1810ceecdb519dad8f5fab77c29b9a02213a8eaa02aa38098ab07a02b19e63a41035967399f35921bc1d85e031c60096f6dc950548db6e29eb92a869ce63b3601b924be994fab61d6f5e9c23cd4b77f50bb040d00c0c57cf2ad023ae7c13b2c14c9a706fc1189a28679fd65de45f256b8515751e38f86c31b2aa74738dd74353fe32fb69d1fa71972619832c62f145cba32461e49c5a7a5e138695e9c593cc414b783ad2eec49c442cc6fb8d338f3f900febe681bff5f496f8c36dbefe796c1b1897abd02b9519c33f97345e13b1818672d323a064834e14a88a19de709e61c86909b2da1b59c35f097aa28116ccc698eb307f905d9443755e22d518a569e74350342c917ba4082fd4b7f47f9141c3b41b502634281917aebb725ac473834ab92c3692fc46bdbf051b6dac3228311357bfeaa0d7f3bf0c46cc8f5c86cfb582cd8700ce02a02e1a8d0f4bb505882d0d3a497871968a098eff70c3b464cde0e15125d7ba001fcecf0c520affee02ad3f2ce406b1d020c18368c63921cb9583a0c74ebf32ef02dc54fff430d0f13412d4510fce521736d430ae5a8eb68683f64078858e28f2bbc8904796ec76b8ce9856f05bcc95800f5a612c4733836bddaa9ac1752a14ca864bce3a4aabca13a8567736a8b767a2b5ccca63ac9f7c8d50ba4cd5d2fad5c3bf85b241d316872bb268062dcbe5bc5edc31ae87c3c80c34d6b9a000e821ffbf8950cb4d3b9617a528c80d0a74923ea0240c8ba03a28f83145f4099cea7b1b0a7e485ed9fe740dcd257350795a47f51312070216cb8a258141463e810b24d184cb8fd9aa3e94ed3434127260d81a1a8b252e8b4ab4aa82917f8dcee151af0cc2d039340a72cb554ce87fbdf856527baea889a322d6e72a010fda028a662358df7db7b88529e73fc2de2e76a5c90dd1cfe46be4c7a29a65615b84b8db3254ad9eca71ffed9cdb8b91444dd57ca80bcc89dcde699fc5908a2a09c517d2c41b326e211987778591f495e294b10089eff6feec39e2116b125be0af23ff38a64f317d9b1c0d13c8a65e21b4802b3d59d895b4c95aab61cf0dea299922078b8e31086a8b35c343347779cba1b49099e955ddd283a05c655631cb1fe9566d234d0275896ec7b6a0f5d6fe29ce3124829ee8eecd6136a3e0cec44cb652e206e076d4aa70ae854bce03865b25a7cc5b889028e16245a597a1c3d08cdc1e6c2bfba35ec76125a280aa33653b60376bcfd35e4999f9ee2653a574f189098ef1b5e4efacecabb2393678a51474f631b7c9758f793810c21a094f0ae3ab48da97667f72d48ad77df7ab3b6a0369b025bb3ab226e981b91ea8efa9c3fda246fc20b32d65e98830925d662fe7bc66ff198219c81c6efdd8fe27e5cbfdcfcb8cf1358e0c92302f35a7f4d9ef645da3ba1edf33de874a379d759211659fbda841f73399d2b6b2c86d7778d1a2f98287621fcc365594b3234e9069c190e64f587f679c232bd66f458f6e2a4955ebfddece3035cbdd0a81e8587f8ddb2e391eba7ac8a6addeaf32e363936351411b54ecd344b667b069f58daff47ee29ba691757593eb9e56d776672cf45e81610c774ab6b771ef82a6f71e0c3ddfeecc3934dcfe06e939286a835e2c1377d5e505fdb72168ceccbc8479073c3df967ac1b0d9d2e46cbc1f3f2f0b80a6762333303bfc944383749b00533b504766ccbeb9964dc934909fa1ce2c73d35cb6c474dede894f7a6c1992b824ca6ef7ab967965df4c2e7ac64da0559e2e3f1117af4d443914bf96562b4d44f176db94fb4433827579c3ea27f86042c263a5ca92d7a4023303fe91c63f3d8ac389835b8c70449efd1d63adfb8b4dbd4218922e8ab480262092b378cbcec30dacfc4c2c7af3e2a24c0f4ff243c6a3bb51a36cdf571b9a54930ea8d92538e3dbe0daacded424b0156af4b061093b777f418e3a11e7d385e7baf6a863bb1258841724a79dcc7a901fc77b2eb087c11f3b23d4e36976961a44ae397391dd7c9755194c22036017dfd7a6dfe767466241e57d899dee9bf0e4c33aac53a1cf900c7aebe29199f7a82552f477b70f9db6666684ac4ca3629c4aee804dd8c39fe604fd00da20c683b95cb36d8f2284699ae722940a2fa7ed8975d2e870e565e512469618c2a09fba021ff64602e95797455e5f0bb43be1fee6d1559a5bf8943268106f0e4171be5574a8c724ed3e17359de0c4835675fe7b3eafdea46ead31b5ede82b790a7b5cc34522a44ae8d60d2644649eff904c1719886a16d9a569b99baf6d21374d4ad8632727338418a4904aa79994218506c98777a787503717c170c83406fb821aea058ec978828c4591cff369bc3045cc9d0545679958159498e42fd29b44cdcbee9678b2d85ae30e96be2f2137d8fb2b46620e475326ed74b2ec154797801b82b9dc9ebaf965dda99817f8cd2224371f29c1b0840ae96e926ac912910bde479037b7c9792aa75bd22b920d0ab95f1df1091ad4b75f0921e44cb7c99b8997679ed36249d3c8d4831fb407685261cb22921673deb28aa2ea1861716492201716c0fe7244f672dc307fdbbea882d8daae851447ee2af79846df658ddf2401c7c73cd3976b15542933d5864f5117b4aff14565224b2efedda1ccf0200ca56874e92e66e1468a01fe4f032e9bcfbd5d8cd0d3dd8e0f21b5ac339986ca5ec5d9f00b3697d075c2dd247ecf1f7570ea71104e856c4ca4ced2ab866ee0d26c748f480262bba707667f6ac4129b4d2150dfac398693d32bfa6761a6d32f8b02391775b7485d00c9250dfc11d8bc864160ce023ee027c72495578704ad73c8c50ae45620b91797c23f471871376ee6c45617b568de03bb0692b19f26bd2f6010ae92c224451a55dce6ef223d9a5a1d8816c75944298ec5cdb42c6d5d2b3779a7930811a6a57e8a9857ad1c0a2982d0b7e6974ac4ee42e120a35300afd20c5e135d0966bba972d4c53731a66770797d38d89f97bff3ccd6cfd8f13292139a7c5ef1ac3f6b9bd4ceb3a2e1fa131fbd7656b50339d85003cca94297c147517875124c1771ec8ade9102186e7ce15ea934e615063ba3f2e54e9dc9d64baa9638c8e3b2a3212a042e573e2a81a8b544867892f346014de7502e03265715c7d94390efab96f2a59e1685e93fca21bfba3fab3c8c67d6a516787a5d165685e3310eb15c000ee0ec25a9ab15e69ed82f03d8cbcf50af8feb8a77b54b479de1899d95e994a6957a0be87213b97c7e9127647c4ae1d9248b18268b098565af06b280401f78c1b7dc450d1931a60f8a7c14f80e62afcba3bec9e48489ef9962a89e4ad59ccd1140a34869bc410a97d701e62821b8e1e3eac302bb454ef1488be564e8792a8097b43bea0116c29df328e2f98103a8e25cca2fd2a1ca107c9786411f603c646adf40672c920213f587c06a70839fea57ce3936a508f95f8fd2121408ab50d88fed16c4d926aa97e080ed194465ea5214406d20233ea11ab157779a4ced52eef7aebef089bd436aacbb9050713ac3092ec2b4445c3d3fd4192758542044acd9ba301431d8155827931bfeb9dcf6059ac00b06fcaf41783426bcb6e562f420bfd64d1dde046d7cf0143230a3d14dfea55abfd7b1789879db3663bd74d2771c80b945c3eae45534036d492db537f6bca0caa04fe9439b08f51e586adf8c5310b29cd3e74e12039cd151eb35945b6c72ce29aea6719096665449d2ae6de9e3a8465a5f081e9485babd0becc192e495bb0578dfadfff18290e8a9306efd234d73e0d3c95683cccbeda93bb9e1af8c48162ac52f8918d82e358eeed1ef8da7f2e803321485c6d814521ccc491fa19dfa30e6edbf6abf9396959a213b15741d0efa47fe6290b804c7c037b747e88ab02015fca40b4c033a5b1c9b83ee73e749e08e5faa02e5d8895c2eb3434e272061378bea0ca333ca46af1018c12dec095f027a63858e88523bb23c83fca5a2a75d118559dc51306204679431574ec7f553359f254acc4010c753c179a2bece79b0b45fac63c70e376b85dbc14f7fbb01a5e4c6dfdba7beba82fdc20296dd3372d6f94afdd2cd4e7800110ea3da8ce731e1807dab2c8d3dfcbca22cabb42409914275a1201ec213d43b6b61fd92a5b68c6a4fff0993608aea35bc2e4725f387bbdf46b946c61ff24ae686b2d52e153a64d40b0821f69caaf5cd5c84704859c34e100520a8c5af0994c020cca425235a643a8007438916765be92a24ebaff0fc7af9ab283ae7ac7b562b61aa9dd9952a2f4c24b6771ea5643ae142c306a4f0cd3829a81f11ca26a4c04dac2e541e0bef6946f77077c8ca3abb78d03d5767880faf80d5eb828e56021b72647ab8d3a04745c526aad61d52e8082e4544a946aad740c08784aa408769b82a2b7669c8b6cf081eb67ecfbf48d17e1d1eb01f9d63477548141de1627392af8c7419276e769e313e875e0be71d13e3d9f99f2efef26c5523cdff91686a75e88f20e946796ffa7219f230d28aa7bb5db4d14ec76979f439c0174f6caf8b98b7e87ca49a7cbd0daa34c1e3231a2c86a15fb8d1e6b29a2c7058fd1742a28fc7b80cbd82a482ca29cb70e92722f0d9b6a8a3667377ef06ed7720e71d6434c577371d43429c0b9b56f85d0321889488ffcceee33b5afd5642eecd4955452fae0f8ffd488d53fe6f88ec6a179eca099e38ab62f9f2eb83e6fb5009b65f8ff2525f11b2f93c230e09766c5e7005fb061366cb989c5a34b455469a8ae0fc4559fffe9d8f9ef7fe972fa2732a61881c957bc5e2301606e2013ac59205b51ff2605fa23903176c6d264b3591b7c42582f86b7a9240f541199b524b68925848bc63069ec4972d02f4d1b70a620aab9a29c922400db188fb7a6cc63044f15bb3e199f9c23f44db32aa9d0dc4510ae44584d8d7cfc3d564e86b2cb3fbe449a6385584a1ae7366a18ad7be31d6f869cb2629fdcfead44acb3c6972993992f50794d83d021c445469db5cb09dc6edef0266fdc056126d1cd95a9e9cceaa889e201658e2e959de31c9fb3d6fe940405266458c3030752f9d30fab9d81f6f86dc52e04aae8c455facd4d90217d0fb9e154c82d48ef65d3f7b3de7fcb3ab0e180ab429c0ce043cad4b9071410a47dc1a26ff2720ce79f7e800993aac9a99ea94dffb7f432ddb8ea9208047b3e29ab7fa49541d3e99d995eab11458669cc48f9ad77c25ee58642d2000c10c1067b31512c09662531d329aec437f770d78c758808e42494d3b7726bd654ef2a9cc6fc9db5112ec829b4949b47f47ff748647ddc1f00d9618ced4c66bf1bbb0e71c433163dac27953a6a083c897c9d53ff5635f8c698024096a18cd41c54ee9036a8a38f46350ab4486fd7f349121df0aef1ed2c8616564cefcd12fe7bcc3a9db8272815e321ba7904c0eb433e8486b0f7d9979be9db58b9db1235385cb3af7d8643cc7282f7d915132591d3715a0386131efe79a0066705485761d078ef5604a90e7c23585e8f2ff8ebe0f3fd269d9a8ca2cb6c08ab7bab0c0e869a2c27a0872c9a69a1b7559f9a56d609015af28ec3b5b8858da7d664edd4bef161e61faeabd4897899e889f0fe5b0f8fa201234c3cab80e9bfc8ff54f77e5c0caffcff6d7ec24e736688957cb1da68f9ffb664835979a9fd46c83562540a97a781c09ad92c8234fd2decc956b42bcd2975d1798a88b58dd3bf6e4b8063555f43790f4e5401cf1259e0a65d75a309aa1682f9786851d63de16ecdb5d383a3631f5bff696ae4eb0fab4b91af141c4dcb8e4b7b090f32a13b53f8e798ee8c8ae4e45a143753bd4316b0de8963c3249c7bb013cc5d7c7e564c798872ea708c921cc0b8a2b098aadb7c773ba502527778768d60a7ef4f75a3ac6c454a3e544108f04fee12e5982aabc6382ddaf2df1dfb81f2c3f6c60746283205c74927f4f060319807bdd36c7295daa61daa43880aaf2bff1f5ecd1b5e99e1bd2c14d00ed8418237434b53490c7115570aaeb4f9da5d5df13e9d9119518e9351b13aa13cc95a3d00db0e7cedae454a8bcbb7d9ab9e1ceb08729e6d1cf3847fcda6d78b8224c98db5ce1e7aedee366cd23f2455405fca9d8a3e533e308eb30392ebfd234db45e9ec59e04e83f4b39113019c8fb9fcee3b0c4a468a36c074ce17895be27609049f2a8321d42acc8b959e9ddd686da0de612b916a2a279882d47c28345f87f8010345440ce700fdbca6531807721185bb4e3c16a5f145fe9f2d101ab6865487b8b10e54a105f2a393858020a55786f264b462b6a0a0537fb1f83e72bc15f4f96a4d39596f1b238f04c37f7280ab87afc416f22084eac78b9028f42c60fafdb0dcecc03a1a01c8c8995848caa36f8ac79e5c95397fdbe44a23200f7fa08e8c97888f543c33e7766f9b05f14789303a390744f8c000210047f357b7ce6328e806dabe56c6146c9e7cd6f4c86849ec931ce1b01f1d37d1bbf94b2888a72ef34adb290498fd2d1452167b3417f3f378d9446845180d3cd3f3ee939e79b427aeacf28da59864677f36d775741e4eb7d0ee9b112e8c66cae7ec6d49cf7b6984afcb3d82a0531ca1d9abcf465c541854f366bb2502bb3a779e61a9dc3669d0916c4de39bab75dd2e9cc7b3991d4495272d4cb38c04a227d7a82f56c9e398802814d7d064d84364f12d5101f7316a531d0d799721be013ae97e15ed4b4624d97ac1e4cb946416fa70436aa242bd039cc4c387e190c0233e72f0135b2b54e2d5cb9195543dcbc02bfda1543de06b21e06c153063a82f5134f6e977394785c0035896868f2c6bb302dc1a6f3423b587d642dce2320181ccf902601eac04b91d2d34ca30cb1166235f16e36e03e2ad6702a92041891ae05c0352265ee93236b3494e025fc8a93d5c934828c80966c094890d4baee318b74b0bb80a4595c581e08bd1a03fa90d365dfe36d05f33a0b093fbb9b7ecf83392e1d7800b930e7c9584d9ed647f01ba1dad35c6ceeb942eea56d2a0fa6e436e4fe911e492fcc9969fcbb58956d5c5363b668ce0f56d34cf57a7123214938aa9e3a5b7efec22e5b3adde7af0afb2a9d90dfacdd246ff2ce7cd2ddb6b5e3801e139a4cff55fd2a0c0ecc1e2a0dc0fb19295ec53ea3f289577ee7d1144c7d450761711385af89d86b494bbabaf5de573f7cd1f53329ecdbc8506c47b22570858694653c777b3f5ad55f5dcbde1a623b12e707979940172adeaeeed9c2d0d90cdb5edc8525e55a4157a09bab180ce89d8b1232f46acc085a0df8d728fc239a4c392e5d118bc5c36c67d2b293404ea83df0a8255b7173e68e842d13a83f4f6611714c83da6de77b1470240614c15168acb0b252cb44e907eb82c8ee928b90075e06cab7b57ad0109f0b4a1abcb682d48d9b44df1b5c1879eabb2b1034fb778cf7c3e05253967d9f6a518475c5aceeac8cbb6519086d8812d394db13936d7fb8ee7ffb787489ca1843965afd7bb479ba038461f9c48f6f97942a0c3ac370fde5c9c76243b5379d23dc2944a10f4926b2882489874b90af09a94d0e8c39abeef8913b674b1502bfc0a17f2452051152ed1d1cdb8deac7d849ced5b382bfdb1f6fb7236cc2efebe2c99a13ae0c05fabd62f8bb2949df40c7d6a156185bfaf2281894186f2be7e668cbb529952975ac6040f002b9d1cea781529213b2f31c2897f8ab3c5596acea9825dd2fb4206f7a2b0e7c11b8526f96abdf36c53b25ce13237e9e48580bf22636e21a6dd9dd8421e8b8b03ed6bc8cc80fe12b8284b0770d5517c74000025cd25f93e1d66b11878d1feb0f5e5e9a67349c9d8037294251d16de0e8ef2a608067dc2a606634e9b4bce6dc00f61235d88166c84b3c3a57fff347dc593161c1d5c6a22819d8a549e7625ccb4dc53128eb900c39734e89bcfb24e2e2f43292b4550151904a1be55773c3739e8822fab918d4c777b1489fd069b590d0211c713ca3619cb4d590edf68a66e68af266d52d2adb39f1664453df3e72949ac45aa7b6a20d59dddda1b26aa858a2de8bc7f419361f619ac223ca377b84188ccd4769db7f203c8bd5949ea9274060910ddaa5d6be36070c0b3e7ae3eb043a367266fa3357441287791b178278fc63a6d67d867dfbbe7aa6b1b88e8b883148a763c50c33577061122764eaa22d1b290263a03e74d576163b6101bc26eb3747d79fa67e3ccff4b17edd0ddc11f70abfb908038777a1891c80c8c034b0288b84cd6c61a1b84ab87e67dfa6890eeb9fb142f9de442d6a7082ca152b4e43d07b9e5caf65ec350792fe7f7f09382e83d94297b2daa61a1ae79b883b9cbbad391e5b487875658748d2fb55232efaf80166ec5238feb3013c85494ee72793d4bade597409d3fd7b79c9bf21b054667a664cd52cd9cfaf6b11cfbf2db7648c268f612c0df6154a5b45922ed8713bc10bcf4e11894ae94c738505bbe501cb0b11c5430601d8eaa9514d8cb52cbde8ae548a9ba03e4c5089b0b5cad290d3696c29e16f4939ed9051b4c4acc62fb0e11e194d66c64842c06896dbf86e74ea4d690a0c913f4e5f519424640e0ec6d80f9718e86dcfc8548deb1e75c96adf74f44dd86bba83da39705e809984f41661427730c8478179452314380688c2b2111698f88335ceb5fbb302e8b8baa8a8a19f0c6d4aacb8b1abf846705160f7b787a4fcb611a2903bbb58ffbcd9d234298c3fe4bcbbfd350f0431c1275a1c15458071563ab580faba16e61e7acd8a561b8b55fd0351d82550d477378da8679692ae187b82b9af3e64b50d49f6d4592b270c10b6319ea034feb4c88b10af6a074605bf8f5dfce13e34d8d09b0d4c9cd53fb0b9452e415c2ca24c90955a927ac4d5101f4217c76f32cf626b34718b7c9d470f5d9afc6ca27166817c9864fdd3aeb0ab60ac7a6c9c55c68a9c7ac993e25a034d372a5a818da4370a056a129d178d668c72a3ca13be1f8180d5b04f824683b88b7f3c76ac599f9ebf252af21f62777629682bb345f0d391b1b74e5875e46d77bd3ca82edca827c4299f3692bee87ae8a7af5e309e369fe6334052db9b0a59c743e0d4f0b20505e16f7ddc03b47cbe5d1e508d81fbfe7b32ef5f37081a133cd8b208df645bca21c047210fe8af37f0e65a4bbae48f2c1d33d0eb41ae9655b88f64054375ebe103207751aeb9e7f6cac7486e7dfa1016551887797d1dc71981ad5ef6a5cc84c15a5faa98abf6fdbce40f924999f732603b6774a176e58d50fc0d82a6d8b96f30d2bcc3f10a167b082db1f082a1ce0efc35d749786b1ca40207958d6975d9008e67ed18cd9f9abfb50edf1a8e1ac98c4fe3384f215f949bda0f49b8c0e58eaf1e6706be7774409f73e1fb543df1e9a895a820abdb9ba6e92b5291ae4186b9a66c8625ada98ecce0ef92795471dedb20d19bf5498ca01646d4ecfae0d7d010f063a86a005ea530da7bde038e55185b02c5ae6101c255d4e30da30af71bd4fee4036557a28d86787d814003acdde3955c79019f7e1360ae68f435cbf073388f9fd1ca0fb294a884977ac4ca91f1b1ef1c13c84f7e3488eeb91e941941a08e6563f2c8a36b06db225bee467383eb6466dc5f72c2fdf7518f0a396651441c7a30b694726cbf3fe8e233a14466d368d4faa740bd087afcd13634a2982dc17daca115ea54a19795be18caf3920832d1f9978f1c117af9be48c18c866d93cc897fa224b026e4e90377b660c74867ab661bd166f249742068c77c53ead976ebf1446dde677b55a8a76362e45cf3aaed653382cbd0292697fc91143ad93854ad323dd4bd055c5227fa1996de59cc0b4388d0a5b5b512c7fb1bc900d0154192013ba2244cbf67ebc2504051913c6bcee260b33e215f6fa6e5051233f94227dbfa97a85a1c55ac833551d1b101162a0f4f4815bfb0984a3c07808c4912703b09bcb2eb3852c28b65c5cd48e96b1497dbb5474a3d83c312f5205d275673e789747c84c2033c49d826d7e2bf57f9fcb5e1049d17c30a4ef4aec9d47158a15b074b7029f880e515405194221f4e09edb52fe75c39830ef10b88ebd63f4112d2cf47f04b9ed5e1abaf48472868be396331651a6772c4f70b8317228a4e191c8fb97f719c7c61db24321938fe4cfb91dcfe2ade3305fba8b35fcb66acc91e05757122cf0e9e06de97f716192b31dbcde3cdb08aacc4d913adc012b4e480bbaf2c063710dfbc1ec79a214aed355389baedc2316c9e1576bfe5bc210744b7e2ae32f2ec7f7373302144204ec276d20a577355ac7e3284b8ee3b9884592bc3c05803b05968c9973dc75a3ef4641d1d80d27bf044fcdf8449f1b6839788780a1a2cd3e78c5a4b69306723df957a5fa8512188d59d3c13f77d755f7ebb5bf6feca0077874b483001d33bab24e99bc223e01a9cd1dceac4d946e4bac60a8e38f3b4156b7105cf4c119920787d3182732bc64462629a4bc11a777a1ca914594aa1507b5e5366e8cf2c63123b916d941a945008c82be1dac0ffe8e715b93155af8610b1f58b5714a014ee587bf6fb8c510141a9271c710b860e9622ab845c2dee2b67ecc62d4a9fcf9637309a16713a450579cfc458550ef16d406a1414c5eef669b6478e44ebcd7793021bd1f155e42ac1a951a281d76627b797a9a8877046778bbec35b4a82ebb158bef3153aaba43a5c4816565e651de474df248f8d298d0c44fb025e63e51975df612278d61530d966cb14cbcbec5a1cca9d97abf7700dec501a5c9792fa8324fcf7fdfdffd06aba50e7fa130e17c57dc51109bddcfd77efaed5a7c788514c5fccc2e804cf25ad96c931426fa6462d9abe4fd7caa07c0c12404360b578c7062dd41e2b0d5be26adcc06adce276b5e0f80a36a199c7355205d7a5c89aaa273f9e46d4ef1ced216c14e336882cf2399421199cb50016d13e26b4aed55eae6cf9d1ad7abce87c66226f42f81b053ee8bd96f2b5f083466efe25a896ca1ff0c463d4d2e2b089d38abf4d237b2f18731e306df25cb0abbb7522e14934feb52cfce64cc8c7f2e25f2d7c162144b68421b082dd568be82a095819a6b29fa64fd3798a08c1d23dc878e9181b022554c9e9eab62e88d978df6615df3c1d89755b4dd7becac046b519986aae9b1dec5884a139eddf894b51998b6fefc6d9f6ab7835439510c911ab1cc807ad280a7f84fb552a4f125d4b6c65dc443e9790936a00b93c711c533d31e6231db6cd2f8f61f373a162fd21e5a0ec34aa1e00420e7759fcddba23f92268c934b3170081d38d24c726be2e8b835807bdc0937c87d6ac66f57bb2c58e27b164e1058e99dd28e5a18eef0e14de2dc1a77befa245955c80625bc14a2ee3d93f7ddd0b6c168ddd6df781aff693544d29e24182db2492f9d17e34422d152f77364d1e957e5e89fed0c5f2e37e6ea1bb43465026810aea1522974feb08711d22b3ffd799141ee4ae1ac8d4cb4eabbd4dcf1efc64ba4904743a6cb4851ddf7463a4cbac5dc840f21bb0351efdb434fa8d0e18ef1cece5df5d7dcb3b8618c31bc04cf705696b4df34365d6e51715faf127ca9aec2bc85f720f48a47c7bdd74c1f516df6c194ff6d73144d795a6e6c19b52652f1a9ede186672cb82edeb801a114d6d9674c048413a5770dbc3a092cfddca6334cdadc1b995c37c0ebad48276966d2b44a5371aefe5856b1012811b89ac37e1e3eb6aca5c0cc65096001c32fe844870900f5366740408114edd2842edc7720fa2c8f6846ef17bb9cae77729d8594c78d6c9c29fa1d09fb152b7d8efa3d30a40fc4dc8ad46153ce55265f847390b3ce93d3654d71c8f6a721d31bad2d9285cc8547e102b8a2c158a685c4e0ddd9829b231c06fe80ce1de145e586fa63e96850feb94e0e3bdf4a58f1a774b78ba9c54911340b13669d5f62a3f93192e3f3c7d10f893bd7a55ea49040ed8560defd81174693f89097d3f9ce44b65951f8f92a7743021826e5fc25212cd057ed1d873442c94ed18ce856baaabbba335fafecfd1fd1883376c9e41841480446ac63049f41f9de22eb253a1b2596d4c553dca25c8b6b66163715164f3ca2e7b9f680e38a6bb5e1eb5b2ad125e2d4b32557fcc56a48000d549d9510183648df2044a7e23051fa83754cbfa25f57a4899ea7a2f819318c0e8d802b46864f2ab27830f9640175bb7a4c02d1eac8be10e1d99ad8e513ca00df07618e34b6adabdfafeaa66c527e17b86272e157068d0b4fe6becbde0e1b584a0009bbace46a22399fb7f509417b99a627f8b6d27fc3b4337231f6df87afdbcced7cb3c99d35bf0afe026b7b44196957e12beff097fb5461107f308fe4fa4df0529505a840951242402f12b821fe83f8e014861e4407ac4be009bbd3942ef47ff7fc8c8ab28a33ca36600c4110f9c8da75f51f66d442a1e404fa21294e8f2c78a0988d92fb3baa18b9163c09d54257bd00e023be21ef2334f20bbd6f8bef14addfd96af3008ff94f94151e5072d88025c49fac643a67a60aead39faeca4645e3c441ec27e0f43f79d6c49058567d895ae84b02ccdbf62df334008267603dac9d9292d2259acc40e81d444c8dae3f9604cdc3034081918f4717c056ca0daa79a4d6b042c8adcc6828e26099417b178f2986fbfc3928d4489113d1b8300128043d9192c81b2e07ad76c228e76270484dcecdecd14a7862f5b6a6e8696c78f4efe60e96651989e4e849328fab4f374d8895088526eb585e09bb8a21e2e52657e57d35a0a7b982588bd142baa188c4811883306af040f1c9d3d435f4e13e6e8277fe719687f4dbc9707e011d90e389212c877725294276ceb6722d01798d298ee0e1b4c67eac57f189269190b57ce72ea8dea7035d931c773efcabb3aad69fb398f4805dc1604d9845fc28cc3c5c71d97ba2381108b19c0a14caee86e260f3b8573ab31578de7d96bdae1a991ebec7659bf8df4186ae5926a583d26c421176f79aecff4fc52c9461eda7d6370fa4ba774155c140ed7ebf58aa63e63fa4e892faa9c220061c9abfba8786180e0fc57abd5647a61c71f9d40b3a929f17c070a6dd33d6d4b0071b86cd82603d08aa78fb6ef12cfb99957b51a09ce4c99de9b7ff94f62517acf44546ff5f4694acb026bd3e2c3533a72e4d603c29274475c496418ef1ac0af187690e50d27b174b298387af59aed7d1dbcc6f44222b5f8dcaa03ac3192d1927db2d8ae47f299d08da1efc9f46288254469cc5b627fd6ca3e5a861bde4b6cd4c8b00f56300a51a41bdc54d82ccb0f4804a77b7bf8b86d9af4ae8924cbf4a88ed150ef4efd831fbb49c7bc2024efe7bb5c005aa3391e92e213c01ffc0651a2672518cdac864b4b44635c1985fd414d133ef1b4080eed36abab6ab1050e5d45b5105613f9093eefab34fe79b445c1b07624dbf052c1d777f3d5e16986a22402e7bb773f5a1df72cd0d03053229b537b5a230a6e19f52abb7183967934ee74f765df632b0868a7ea3dcd628892fb072206bbe572158aead3dd55a9b2f81b219205ca83dd830094ff500efa2e6bc195fbb824eac4cb7e7bc39a258649f30a7b765db737fd67a68520c62a5297c744fcb849b776483dfeaca103af0ccd301edf4317c3a9d5f7d6f6bda41e2aca4dff50c826dbd5ea4d2c6148382c77d643ea6a0b6510c10042cee3695744249bf49b11596d19e7a976a522fdb710099237217bfd71cdb5e06e08e8cbfce50cb6850ac7b174f06b4beb6dfae346d4d6c213c4b374d82e90f75cbd46de782ed6810f4b702fe4a9be0f6c5195e26ffa46eae41fb92a35bf66ade7d918bba4d69d3ae108edaf5040f931d3eac0cb99c40787f69742d4596569adddc669f238df07a3db8a7b1ff38161dcae4de71f17d20d43ef539a9a57a14e18ed823cea392670702cd13ba301007a30e86b5d979e9dff47ba8a2043f2483fbb12dd8c3cac91c1b860fc7622038c3d8346056293574388ff6b039c2b7ffc73f64045afcfbbdeaaff94cea5730e66cc6a6576f6e0a2279d7738de1c70245ce3475454a90acd81b013002d5dc5ff363260bb6cc70a6ec8d024110147b77396f31644e03b418cd8144e404cb09930c3a0d1f60833005f96e3c52e4d2ba7dba7807f9a9b710194eda0b5fc620d52b93cf0fdb07ac78b467bcb41d1fd384ad88e99e94eab869e00e88c7dc679c1ffd9d6acfc9f8ae6eac2f62a188c1741ee86f85aae7f3b3623f117998736986ac03944103da2cd1308e8bc9a1b6aa77a06972321a0382de2f09c89dc640e4ac558d962f7e8814a6e350eef0d5bf45ff09ffe0f01f3d05085721ba8c0032a06b84c7087ae23d031f1922fce36aaf36790b0afec961989b748152ee64021f80f3d132c6b20335bd96e4f8b297e5fdaca501021b61fa18263163340240854b41eaadbe45c3b13de22155c8180f670e79b1f7ca77f0ed59abddbc30cc519c3b60351f01225e281ff6a6be3fb7433d8e360ac0c8608402c6f2827e07202ee1a8e8c968fea0b6171b1231dfb5aff54ed751b4e9710bb0f061f77b65aaaf291e13622774a14305288f8e42b6369f37d04bfc87cc571cc8fef3a687bb55a66ce37a2c66ac4b06193e51b0424a012aec384637228c8add1294b76440655e888126a895c592c869d8e5f208268fdeba50bc21e69c5edc44a7e2eabb67b27aabc0d924a40ec827164a609f1588e03dccd8723380b66fc0410f7ebef934fa46291eae50f57ba5f591579380fe7f21450bbb47004284f0b2fcb8ff6817920e74c89f411dccc377671d3b9e6aa28225e31fa7872c1168b119cecaa46c3f4be70755524fbf27c40cb31bee20e1e5fd632acdc6725203992b035bbe766b925bb6cd106703d0c8ee7460ebfdabe860a8aae1cd02f618927ccb43af314245da4fa8fcaf66ec63313ad60354a757bb1007cedb8ef64fb40657b3c8501e2f21a32e30a4c2acc3789a9a785b36bd5191f0d0d07920746d37af712795fac04ee8be8c4f4e00865b44f809e5c9e4715f4b6278c7eff0735a4645e0dec21ccf4d613f80e093952e0154a14f216b03ec106589530f605ce1adbc85ea5344da5c00b82a43ad9ba1a993772e2f70bbb08d76c71381e2917b0c5c7c1eba155ee4ff9014e91c1b7eb9a37208c03bee2be408133c97daae7fd076fb29c647046332166acae4d128215999f1c8f9cefffed11942aa3ab4f59b1ec0198a2f6f0dfdb586892b8101a957bb46184995b2f927bba575c77e88df3a1ef86ec359965fdce2b1798188d39924616b9593d67164ceb29296c2a1cd25ad16e6e48b24a8cccaec17a6db9b66308e4eb024d84ee43b05b56a36c02aa901d759aec27c05b897cf5e4b851fafc4a7f34e1a6194d4e04fdf650ac211cc46a48959801108229624fd827f98fdd52fb9b0904c77d87d64f316406f7e6669b05553005abde199136bd9f27bf7cf37cb471478454adf34fb39dbfab26d34363d593da74d6d675db56b63930b3427e78e2dfbbee65873ece893571ea98fd21b589579c243a513814524ec9930ec551030191f8bccf36181022e34f9e40a36753eadfc0bcbd8a47f9aa11cc7b71ef66f65499d85a32360e9572d296ce2d774701c991528da424faf902b9e0b94360d90f3138a925cafab74f59547821ad65691af9be89ffaaa0cc2dc88649fb5689c5e57d9a58e294247b2d513698699b1046de07ecaa64825dd9fd6fe825e5a91278c6600974efeabbb06757038af6b6e6692bf4d71d9f4da216b4536811dfa864ce6048d7bc680352db1617bac07f29c0338f315f6dac210017cda41e5e460dd6a5c51683bb73f73d0e2b268d251eb4bbe0a5b62982108f13ba12bc31bb66c6b1a20e154590461b5ccd76097cdc16042f659866edccb4b674385bef09cd5b4362ed6e9c679f6e378a39ab71937065355e760a08b93fff28bdc44fb8c0be00308d01eca08b07d14108a8b20e656fc22ce56d3f8665cc75317f89386433b945dfcd32527c8b61b79e2f093b204aa8bc83c11c2dc2325fd5e797a7b75da962e9a5d565bc3fab1e80a943d3a5124951b24dd5af1079d58125cf4e2ff1c988104b9296f4f2b3b531db2361ade052ec6b928620913e7adf6760796fb0d4cc0f9ade178e02829d931fcb8da3b8fa2fb6b7960143f479c93ccea4e51b797db3549e6b6cbf581b5582ba6312169e0e615ad5ccbf93f4bc383de4c93d29807c766d828920a31d4b98ea056a79c9355abc4570374c9c70d0ed695ef4328f51883f5ea988884698dc7bea92df02cd420adff8bf6067a4310ce55c141240821aac1ec2d368ad458bbbdd30cbc5facde40623336588eef41a097691abe81ce357ed72050bf34e88bad1e8b00a8826897d39837c7afa189522a8a499051f07185d648d7b21ad6b4177d782dd09abb74cb45b178b5099dda9d8a451dc425cf653d9bb99dbb2141e66b1e74c94b5143c281791715fe4ea04846d79db92f9a85efcc50798acf085aa294fb94e692775c0b9c8769fe8e13562f2f6dacb34fc3f20f6867043fb12ade48b4f329273587cce810ff8e6d4be1ef352344eb5a249c1544ae827c32a22da66bf826b28aa370cd8b665cc6836a8a849d4b1f221eac4a881d826351c6a5896cfc76c307d6c1d830c2c56b7264cc6b7c16af4a00e83babd62e08715963bd65afff780d9557fe1e6af7fbe52d3265035a4cb53d8e54e7c6ff44057121c8bc64cfc3df292142a07d80cb44a4cb98ca94449af6e2c8cfbefb4cff928b0aa477e3ff5bb23112537af6b05f8a4b5f86bc4dadc771da8bb5d3543ad204a0b42bd6d435fdd92a2abce6352eeeaee8979bf44c395ef06bd3d5b2dfc0b37d5cc4e4e8872dd52d3591c94183fe5e8a9ef0b11276000dd05bc2e27f17656a223e91ccf2d3ee9de0f7c7df1821cfadcac225b35fa2d6ff31405f67aa3e74de804ad904a0e2c809fb9e52f2bf6a514d467f8d306ff1d335d8f3e7098b091788cb9339fc673a1dd0d93ee784c1b886f6036c77d3b0f3c087c20109c1c2624d5919a28f4f41fe6312d978b503b182780e569324df990c3d904380c8644c7567d8afb60a72592147a485813ab4b3610219dfef3b6f000d1f68bee94e5f31db9b66aee2ca76abd02eb5a2f93337b0de98d61d12cd81c9e50e941ecc4819dc00cfa164d80038f39d22898fc885cf6a77c7824636e9aff2905c02854f097a8a9254ade3d72d5bb27b228fee299b8f137514584ceeffb46e50f59b84ddd608394d3ea7f8ce4f3901909b7bc72032811454774640530c493e0e92343835ec2a07a441861d0feeb2b245f0c226c1727163a772886dbf04f421903e31444667f7b4da0459ea2b9aed636ba3184649dfbab559f728a271b35436ee0a883c597a6f6a7d06de5046b4e95db00cbd5e365a26a66afd77250e7997eee39e3694d82b4d7f8505024acf1ed6ea517780dff3fff77b7b556d39441561961077b0535b064c9a2dcd74df0532c8bc4f3eab6900fd963cac5bb77f10d49e78d39bb2ada912e8ce0823c620e7dd5f612c55752c341a0eaeaaad8ad4d750aa3ebb39b7158b3160ade527b9221a8f7942b928063ea9ad090e761fdd6efc5d02ee63d7cb345a8b9f20092c7c6a6831cc4147baaae2a85812b736e351a1b73bd31c37f27bc8ef773ab64c497eee241a039836bc66a0a47b19e7517fd6f3d31475622271042b91f5942e365b6eba403ae300d77cf95c4812b9e2c10f1852f6a6982b54cc9716453949576e1713376fd69c9d50aea72fdc5221f8fce361298321407fd0655b6ab56194ab8578607d6c1ec61621a9e6ee37f7f5b2c34824bf545386ed98b50e5b9fcb6fb70ffd9d1601bd61e3998db78c58061295b933cf9625c812e961a27593ecb708822b058e47375d5a3412af9bd1a188661836c08e6520a639db42838c2506f2966a14efc626c8d83529fb3b3f95cc29647835e5a81252172da28804a77e985e32404d8f60536aa83c8656b5f000699d5b7c1d1261b959864c069a5f979c522860f59da6145d4577c31446fec8cad7278c400e542b5fecabd0712d014a48f8639c2dc6659451696fdb8b705aea7392d099def791371f95fc5a89dfc8e7ea3fe417706077692f237bec68b76cd6252c4e49dde26be5f65213eff21d047b9bd42657afc168ae1c6b9aeb8393350ff9141d05f1cd2c97539cb2666a4f5b243d8090ae58a3fe884c73cd9257fafa62a92130662be0b5cb964e38a5839138dbd889b47f8da25b89269134d771fb6b45e67045d4badcd99f699e7cc07d302d39bf21245ba2211d8ecf19113c47b76afba0788d7f94dc94fb6ffc1ac47eb9753904631a192561e26d6711fb6fe762dc34ac4dc558fd437d655817231b0eb398c900c9e74c2312a31a841c6244db118dd2287df87762db713dcd48c45111b4a185ed84560e7645e2c57289ba0577ce3eb2ada739e28be99cdd5a2f67267a6fa7bc85b0c774068c71d38fc56628d1781064e4bb703c96a0138935a03ac12fd4c1655fe9aa588044e3edfd3c13c6926b272d779ab1b8d6910af15901424382b5fc3fcc75ae641291bfbe737a07c000792618986191a2b9737e296678b7462e335f668cd2d83a3219cf7a6c9b88f2e8c0f5e7d3326004bfff8e0f035343daf371adf70294216cc2d08f7489b45a631632cdbbbb7f00dfc8fb2e14c3973efb93aa93238356675362417b10278be3f482f75059dfa75e3c6a9b08505af36e25361b6ee6a2153e6ee6f4bf28526335c7336093d9bc36f1d19bb8d6c3840f07508056b78824660d96c7f18dcce11d479f9935e0c311fa9c406c21c959a6c5784dcda44a4e3237c450ad80cc7ae56bf3591304d2e0111e13cc88cf01c067563c7eddd13dce226bd8294a0f13c8e6ff064f1f8e30e8418d18da731af808cfde7abce9792ab22e9bff440fb18f688e9c11f066b64e841c26a0f54b2eedfe27077d2fc8cbb302a3460468614e03b295b4025ebfd907594b8fe159e4005a1ad3b7fa8168945e94e390ab6e81ec6d44008c287d8b414638504cedc70258c3f5485c7b98dce5f16e4e7a21913bd0e02e555ef276ebea8707241fe73e449ac05c9a235fea9d7d371c7a84edab70fc0f8549cb763bb153b4202765665a8b6abe8fe3b8f132c9ff9e8c70597933073d302615edca165a421ded2cdf4b3a20b3232ea2ce3e5a18f25374b9f291a299048e4c8f55451e8e3e889b606313e420ddcdcc80b0d9cbb175755b88e9908da2770492c3eba89b3790c89b801fde98db190fa073ec7b8d98a1bb8cfe46ad766dc21f8817b3623a2f291227092d1e6c45c9534dffdbce29f7649b6f76932c5ab4c5bd56b430ed1eafcddb6eb231aa4ccb4dcfebd4b31b0e6c77a1f4b99356ca16169102beb02e35341c1c01637a9e3aec394345b381c44484d84246d113abf8e6b3a4da70018d77a279750f7239e40e0bc5a40caefe53c0862117bddfd21a61a8e562dff312f97dcfc2bcff5759f0e2fa3233c2fcd55a6e6b3fcab2c083b7d16e7a0d523818417f2b968df3ea9cd89734f96ce3435f9e1a5758fb12282ec4898674a1889c726321a69e8be28e3613c0c3fe9f5b46c2cf1aa69a2c3acb94a8a95c5461c9d24ba7d74e9d7f573853d6276b86addb32019f232b953b19c60d2f7ea02ef6b657a13be96a69affd23cbf4fb8dbfc6d83d7fdff890eb5925827295742df4fb2ade199bba5b76126266155561188f61870425458dfc1403df4913f9c0242163ae7e84d6f4f70345377a30f81d40beb90fdb700d086e656067c25a78f9194274d57216047f1481170f252e00f2f90927a66d2220b55a497624ed458b7fa0051562517af710c717343fdbb3ecaca91848e3d5e40cfcecd2523fc072ac6356e171ab16bad3e6942e984670ded480ba9232aa8d3af15b4c9c7da90d609037f177158f83378f38286f5764cedc2103bc5458205297c1e7d391fe1a4ebb5e313422335b590815193b18c86fc4aef7c901a6fbbc25220c598237078c2fdfacc1c50c63b06f152aed47dcb702d1cd58b072ca190b71705e15574d639bd907ab06c1b3349de7fe514c1730d47693c9412df4952e847d0eb7e6b0cc5b399b258566f2b5cc852150649b9af6c2085997392b80af70d714a8795acba984be96f0ed45ee2625e2b31b807dfe6dcb95686c9209fcd7a7a60716e7842373b9c963e74750e59edfb2cf7ea516fb9416258d895656e4965f7b96e63e493eee74ee1e8129b448ebdd856914bdffdf4a4e9dfbc67593ba2871407a3aad4a019f8141aeff80683edd47dc28fa5a1200bc9df2d792d246b1035a92044671a008909f31fa03895a9f3b5ff07f75e68517de8f6302507265fa407b9d2a72eeb4c2ed27c8c2b1b2c3232012a259cf72a734bd66239ed67882bfcef9abae6e892d4195953fed71fcd78492451be8896f28f30c8a6c6ebedced985794a964a5a24c7cc735746953e035fb246e045456688686caba2bf8dc7f387b997a4ecf7c431458da3be063c2b237ad0d82470792a83fe6ce15f83a965afcafcad0518b9db9ac500c9538fccf2811d3b5666b6fcb5b52cecf1712e81050bfc8b6ff7227e1272e04a52c337e495d1dbcb00bee6343d0790d06f2f35096fa76fbd662000efaa877d8fa0d4b594bc6c8146a09f375386124758a10f084544f4daed11e166e264317a276252ed0fe3b3cc9f267adb85974e965771baa41f79afe5c57b86ba8dcb0b5fbd81b9ae9424bd53683f6c9663b8c6f02e15ccb25edaf40939d3f5b4b458750327eed175929370c9e2cdda383da2748862b008016335ab03ae59e760cc937990f9bb0431379f5578a69bed1729ffa2357c695c658c1d2d8e53ff018e3a5ddcb0b8da274fd6940ae9f630870505aa9168a4e318c25bf10af9d9686e678caa908c3af69e0c03d6c1eccde238e7aee800ee72792e81ce9abef2bf9f93c6940d9b5eb8bca23a993d7602e774c39163997359415215105ed5fb080d320269e04c8600b087befe0238de408b96a8c6a0c31ccf830ad210356b107c94756f81655fd32a83db98239f38461d06f974354f5188070ae1b7e0403192d4bb4d5cbf1dad5ed714d7de691b0547e15a2dbd64177769e33a3d49b37b54d65c79daf1c4375ac558134341406731ae97a9d08ad135beabc516368a52ef132e76f64fd023092e161ec7f9dbc65956fe57a5d7a0d4268a3f814cf09fc296665fb979c13d431d695b237afcf1d3b09aac1cade6ddaf0502e71ee4785dae4af23fde8ed417209a94a848e291d982704dda529f880cbc8cc2d52d46aab9e292dc171fd381528e744fb2398e48e0b0b2f782813b67d99d57f944c1bc3b414705485efbdad32b8c1ee83d51b7e1115c4661b62dbaab8c642df32c069a2b1605660c5b18c355d4e4f6c5e40b92c8e14d59536e2c669d6e7850bbeff22f577b79ea80bb50062cfa2d1e3c772b50ebb5a22df2995b9a504f8df409a1260427cfe1fd3c21406d57372d6d06bc0498ccb548f63a2690a84884cc2b14ec76879ddeb7c0f7c5b219a71705536aeac8531386ef073944021a2fdc022d5a7f5b62c66fa0003bc7de5d1b085c264037c4c9c9ac01fa236ca5f55c2f489498cdc3236e59f5e0bc16b843a55257367a292b0f5d24bef8be67fe44379912f6dc0ddc60968764cca8288f77bd204865a6ff1ddbc2bea0031cf6bb2e36b7ef4117b016007ac98c8aed48ab38049e362c69fa1ac9400775570f036e00ce0fd153cdb87e892a3737cea239d1342b9b84d800be81622218bf29fb55241ec8063848ebdac4cc496da5fed1935aaa69278c8bae6c5e9d684fe13d6d92e16eb675e74348c4d8b1d098ed2b87610ecf7c3d5cfe4f8bffb27a0ba25e8d6452e74c84ae4234805da3e6facaee4fc560c53591e479f034acbe330d35a505dd557004e860541fd3afa6d1d5ce623441b5178568ba33c1fc3efeb9d613017de36ed594c97909073902d4f7a2706709c45ee0788545a558c0d9de641f405392083483d5563c1f85c9b3e6ac5f5a0785ac3054615969c14b456b60d7b07bc9caa0a83a4dafce9037a24e3b038daae7ebdf181cb5ea716451030d8504241555da38b64b65775c7638bee1df5c18b926b7cb402f7f7abb6417f7ca7158faf9fe10f3c05e441138bda5cbbd52b9d2ef37c240df5c2d0c6f390effbce42ff90fe5eea41f428f156d9dbfbb3e220b7c2479e89c1a9cb5e8ba63845703d6da8cee40bf4c881e42171215ec4bed434997d681cf85909710ed4cb57ecd5b30192080f52ecd08f782c3fbe5e8c0d78dfec8ca715b985aa4d03bec2cf828efaf8cf4e0f087a52d16c9524b2fb568993b2c95a23c5b1aebccf43822858b193e271f46a06ae5d2d8618bb1c0dc346a79f423498fbf35872f6815581f22ecf2190c33f2a189abc0f2e05b084ffe869efac028d1a6917b4fc597db96459a5bd05a69adc27698b595b3cc2b960a7a8a3cab754f64a11c8a6d0210d2b45b0bf6196d175e66318cacf13e3b4971d545e2170b7b2dd7284fc1691c7d7604bdbfde9b776539a65c3a10147f7cc2d446aeb5ce357b21f78e360875eb99f7afebb62b19e22bac2b253eeca3a5dd691d5e72492f0d0899fc209c0458562424e675ce9aea32b110df50d47a9e9f91f8f54e0379650e2db73ffbf7bd5ab88f64842cf8e5cd389274612766172c7826720480551328e39f8be6e16d2fbd536eea64a3a0ee959847aceb52c16911e62719e9f572a2cb1d9ff9f6724c90facb4b3dd8a2cc7253a81337d719fdb81ffb41e13ce38b908b96ef80f0f8d8236d379758aca13efddcab1ee354eea0ac7b247c4c32e1dcb23e11721da05e0c0e38b59e156273b71f585e12acc79b2229d43fa305d0ec939c29eca17aa1d9dac04582c96a10fb78904ad6ea316e57a7d9601374fb047861506f6a63ce43355c9ac586e73d4e270a452302cb0b614060b0c2a6df859a29f43c7809cbb7bce668dbbd26c435f2234400924bdc6ad042a2950eb1f37d1dfc0ec8d17e72b5c0ce0862007bff970ab8126aaafecb4ff9869c888157eec55d31a6ea966dee58d6dcdc49dd72673daf31349a997300da753411adc62dd6d2b96d82b5b285dd4f4f6df4c0bd25b1985421df727768d99f7a8b118bb61270bf5f3aef2357b8580641b21502e08c19be83bec469ff15ab7c1fce95b57ebe0c6acc6c5692e34b3a8e03e4385920731c9081b3e6804abadf02ca6d5d35352e57e82c1e7317823d67e24d4a9a882b7c6144825bb1878ba3c6d1536f97608e62c06c204b65cc64b94626b5707aa317d44f2b5051e39564d31eda2ccbc4e18709a5f4f748629ce884727084835c2fb811941e27ceb70a70200bda890ec04949c8ed85eabfbef4bb8484c58c3b685268b69d50be369de12964285769682bc886ea2c5ef2cd3451781e4d0bb3a4b64cf0e11c685f688a422225b0a2a070455e73eac8244bb064f4aee492abd3b97fe5428508ba311a32889fc9293d1525f156f1e5d58686253e964b18933e618db36f9b8514c08ddf0222f2dd0472cd02e8d1a19bf0849fe717953f399bb704ff3815eb69afca0d4bbc1a77e3b953a82657b071c27fa0a1752d12bf7bc0dd70ebfe1e22d1df192a9d868bee1a3314bc5f85a10e7f8ac1af7f425c52949ecb491222fdf07852178d30efd47a70ada7bd7615474aa3e02591814dbe200b8bf452d63b8637d480bcd9ba72c82a4c9890313191f98269534d62fedc8f6610b75fa2873ad4755bfb58eac06af3e4e9e7e976b2dd8965e5d6a02bcb3a1963b1d29e18754957e6296b23545043d26f8d39ae340c681512254a72995487b0946b85ca5d433db179467fece45e170ab6a1c5350e8c18c4b1637ada6d26ffe0bab7a722a8b9f9a1d30b6ebff0519d732353fa287e1de10c4cac96539e34eea2e9d4e81d9133c7593fbe667a365cad50c6f99985c587505ac267fa74b37fc65322cac5dceba31763475c32db7a14dee74a402c0aa9831b0a51971688133eb827ec1a0de525e95e6246ff82a06af7d1dcccca7287ca9900c4b1db7777074d4333265ecd0100bf9a2bc859bb04d6e0c621b21e7d9b4238f17fd03dfd66912012f0c4578f982e911709796447b2308ee0704a897efce8480404e74b0ff58ffa1107d5959a68620d2aae516fd1750457956eaf1a4d28e23c8654e58a0bc179bb5b8660686036d2305e517f19f523acef03a502ae6785c8d6a1fa6ffc71b7ab50163bce764e2535e7ddbbd2ad531de9c1e9897edfc913724d87a0ad39bb0734e25f47536d99e0da72753adee32ac99b7aaef187f5fc9c8496ff88badac86ce7fe98310323e7f2e10465d30467df21a49eb588fa2737f3ff682eaa23cb2ff363b45de023226caf61c8a68f95a20243702923b236b142f4c3b903e02dd0f7fa70b79afcb061969cae54eeaeb3c96ba10a598d35b229a67b3ba9f85561b48d029fa8a7b9d19924487c0849c71309cb92865e95099347a460c463d746f550a9d5261362ebee9599deb90c9726168a78474b41431362aa815ed12a6157347b4dc17a6de9b66d1fdeaf1f653ddab5f952b7b19f47fcb5a294b2c09630f4e1e8b0b02509f3ed4595eed0004c0e505d2c109cf770e61d8dd605a9e64a6b7d540fb1b99f642886c9ee75b064abaa9182ac5ccae3f3e03c7a3c7c64bdd1bba61474556a57c50c23d5438cf5f078203568c5425edc3ce953f22c312b61b12cf087fb893ac88565a4bafad630ddf5828c7da5ae9dd0a14c3f08d7d17be45425b1e5ad5fe52b0fcd927bac5ee0d16dfc148592df05790eefa0b9c685d8dec798e6e82a5e237fa75a2948314d65caa938fb0cb5596d19afb45d896692a4f2c84872cf276cd3e091137bada2389b27d3a46c03ef82f2aabdd8c7c4a42f010550d61a0158b5ba0d5c161ae7a8472c27ea9df66063661cf92b929f175ed64f294fee2fdd0ae795a406673f876a044f8fb9e2f4210c5b46681664497b79dce94a19c4382f94faed1cc5e030548efd7c0d96a3aaf06dba36ea9663706a9baf6600e73064ef9c84697717420e9df1efd664c31fd03610f0d6f694bc3edbabdb3897300fb24507c418d21fca42eaff384b5bcd4b95eb155a5b73c3d9b43b778ac15770048f931031141214ec4f64f7697caccf1d3dba57a60451f33b1a849816fb86555640022739d5e23d395f78a805478971339bf7a309ad4f1673805e0689ce32afe53ddfc09f351a516947cb453d1fdbb07a3b3866ef81d3e3364e121212cb5c9ed7d03ebe30c8c519519a38339ade538bc3d921f650d6cfc937cb7eceb4cf42e4514c57d03121e43d31dc569d63fc7fe1ce9f0a1f430f5cc2c454419ced33860a6eac931490313f07a0d0feff82d8a9b2636f242a71b5e7cf7415e3e0de1953f2dceb24efac6a1466d747861f9465fe20b66e9faf85f114dca62a5caf868584f38595a1a0f7736760ca0dd905732b47ac0746c350032bce4155101e610c5429ad9181b090bd7e8eb1ddbcb162e0c1f6f90aad4767cab2492f2f4ae0b3690380b8d19637e412e7b0a59a15885f3e186364a517f6cad230355b02714471e082442de43fe8e1c75d5e299189040173308abd9eb09a385e766e75195daa4c55182f008049f25bf55ddce6bdb9f9f891dcd8b2fbdd64f4ca91221f67091154086bb9c3027f4de34cc187609215835a0769f93a4d7d19552c723db85b7445506db99e4c848c17ecd2ddb7e1c0d4197e5bdedb4b18e6cb76992664ee5f360b36f278de87beb881aa2e5041031145eec893e8e846f60ee1bd2b881694c738a404620d4fd3a47b79e4daf7f4e063857eeb27ceae9860ef5f72756a06f31b544465395cb3d229d9481a4752d2217ac02f921d9dd94f85598c24b0236e9720f09d0876d71c4a75e8461b915872ba32e65c3de30a5643dcaa8512e93c1788b01a75f389abeada17bce450d28fae26abc6fcc0c5b0a0ecfbea9c6f5536903c4e5de6679df99178636d4cf497b87114a168a879e8be7c39603a5af7f6537538c24500b6cad1c3b8e4062924b461bad197ffe2100c119f7e20ee8fc449428bf937dcbc8aedb24071a4790cc4152d6996d4a3f40ffddc4af57cfbbb688336677ba02360df717cb9c367a62b337e2e15fbaa3be439e4496f55802d9dde86bd772df589dc8fa50eb6996fdadfba3add7299c93ee442059a519ab1d2ca8f99d4d83c84802cab1fa7f4483e36f74d0e49344556765a8a8b5f62948944725011ec44e7d4b2696ce6fef3f608884796b01a4f53249eea8a8ed9c0f2cd4e1589a4ff3d30b32292a6ff2d41e36257e39091ace4b79f8d000dc5bf006cba00da0654c4126e6cebdd3a0baa65c870381dfda4aeb75c00458f7157beb58e51bdec4b8997e9a58ec39ef40c87fb913c453a92cf7e520acfced5003d5b9962f3f26e199e9b9cf627066d146639f99a4a47dca82e6f0d3841cbc9a750cc14b011a09f9e2740c7a12609cfcbf89ae29bcad49ee8b7352d117dac265e579b1ee4bf725df0d2877630474f490265917328700857bfb322b778ebe0b15353b4b056d5807d888fd0dda45871acdecda9ee42df195cf46025c5fd2df772d8a373455c3c473b2d611355b84b431777ce35670498c4a8992d453d6554b9c0a06fe32b69370ae964c8ac44c22f4a1e4dd82f4ce976e71e3e242c930e92dfea59f11fda14c6ccc15cb88df4f6e974607304f17afa419b8fcc44de8d651e73b76fd5cbaf18fb4adae10c90a9b26fea7013e8230d6d01ed430ce5e5d6844be7a1ce58c0bfdf3dc96f54bd84336da142a6d597e12c9f65f4915eb565c49fe2e269ecf4a01a1e6722ec2e212994cb6a816cce6d01fb2b2094039e997b3d8867f311970cd387b9cad3108c8daf795d3e64ec3c9d1c14dd6bdfacca3ca5f7acfd0fb0b4f341b5305b2b286dff018fff7d57e7c9eb38bf55e000871723a9f1da390af9fa12904f35a7b859bfe618cd05975daca1301949325dc820f7abc77bd43f6599dd5d427b653fae7982e98ccdaf7d3b3c66a112291b4a356a95502f89fb907c0d3855a78e421b972184a9688296840ebf1dfdc13fa47a2d7f94217c30a89ae8151ddde803efba568fff4f5a61676ac0debfc93cc03cf2b99e569f588024444f09be76bbd30e5a1500d58ac40047a5bf23930335896207c8f87fe67199f8ccf03e46a5a50b72d530ea7bb16aa9eee788930eb82cdd74ab7849c6b6dba18e08546689388958bfc4fcba4da18fcf2ded90a083d578b5c2271945ef83683407ae45ccd388a1c1874a75598b3912330cd624d628c5952752fe293a3a2c1a1301dc7aa96faa8e7d1ca27105c4ec259055fd7c3766f140426c55bfc16bc534a349b532da58e3f5c4713b608e235dd113d3ff0710ae9cc30103887c7a2e251f3bf3d60004adc6d2fcdb20e980401ffb01bb3f9df6501a051b558c61a3508608cf4d26f8b33f767800e110d4a27732b107e01fc1f59e28e53fba710fba078cb74ddde38a615408d920fd87baa0416c32dd17a0feb2ef16686cc7dfe04c9333dadad9650806ff0492f04f03421285ebfeab57aa7a132f04ed6082c2d7f25ba01fd87634704b983f3814b299252354805f4c6a580ac950e5532210eb81856cc216e68a6c2be9125a900f97a7f0ec63d9a63b7f8c337e5fba0669bea20f0d571607963c2836d2b4e74f23ddda328b9d751b705437653dcde285d53a5319bf593d46a2645598a2d2efe2753f7281ef58fb0e7b26e483e9d2c41184efa434813ceaa4ce30f0b3e5434ceaa50eea867f7016e6f9386d6cf773a8189157f3b0355415d54e70616c5bc83935994a9b2a85dfd0950f57176f18177763d3c6c24a30e36d61edb71c7c79151151e2f3a1c9d259d9318f5ec0d9b44dd8a86a1a00fe3b4fe0ac196ffa5122a36ca946e7aa6d93dc334d679f332470b5372396cfb27b39884156de22da54f4933ff37607fc7f139eebfdf2b1c37188042d851a257797a2d747e430a4b8653eb74b047cd21d2b718f81c2b1230f0bf9100872cf6335922c2a512a470104c2519fbec12c5fcb82e5dd981a8075074099eb74e4d826aa2d7cd90af7d14650060650954c3017dea64d524a57cf1a7396418c2b9ba3411e12b21fcc6e4c8a67a79fb8e3dd623a2878a7e91a19e1a2c225db1389ff708c54ffe483ab1a105d41d35491040b92654a2ea687bbaaaedf6e4ed408a3fdd43f8614ac6de3ac22e03db55485a82e67ab0e283d1464689e7f19d90c2eac71c743a543046e50e7e6a456a7e348abd59dbc614cdd965e40be3a1c7fea0425e1a4d1bc21fe635b392f8cacce84c870004462ac4dc1be4ce7295d6e07e2b408e03e326aeee81d510f940d0a3bfb37ed6e325cae7694b775a9e5a4e2540b38372128e97181e37f257d45c8a181ac51b00fba05ec4a44a41cd3a2fc18c23351a4b9b30a7a5570933a5ddcd1d85226d276782c7a9fdd9560c0b3c1732e843586af4dc6ce5e2ca5f9cebc645879d9ad8b3cccf10ce2df70fb1de2995559eb8f37a8e076589b1fa1dfa1319017fc6c32253da6f997849a99160a46093d337bba67713088011407405bfce3fddd90270bbcd44749ca4e5d2fbb6d1ac79358f00908e8d0c9a2494b15bd662c9e30ea92f9b2cf861a96fea21a688493f8066435556c359704cf47d98a9887068de23e9a6a983bf47fcc4017a4f7c09b1767645569dc4f2144063bd78b14ad82e5e6db89c2640fce4f34c9f8d62e2c0021bbc04fd82332b4939baa0d065e28bf0453c270a10cbc137f5b4c720b71b10d449fdf123b931d06911ed00bd271c829190b0451a047d6a45a5966ee29919173173e6d676c3db35c7408b2d1c7f0f15a49c968eaf49d4a1ee54ac5ba83818f10aa3e9c2bdc3228196a04eeb2e7820a7e55719dfdc7a39f397a17416fc594d721f7c3240c561beb0843029c0a26f48d9a6e6d1a520bf17fe72cc14a69bc36c4da6dfa61d9006a6d445bd29635c2e2cedc9ae4a51427e244073a54a1cfc03377cdfb1e47d0dc9c0321e009a3726b3bb583c01f715e711ec87642c110fdc51594ce4d954225979ed2d4bed5e10d4361fe0fb0d45a2e1694238d1c71e5e86fae67fa3ea3c4c9a20e268f6d82abdfff39ef45a2378c5f209a9b513c9eed120c20db741bb1cb6f9c2e229bc5eb290502e71a00bb345f1bb0a31b10038da88c5077c69e2565b121b47d67f1db47ab51b8ca295e784802433dbab59694fc68cced40db10dfabeb97586498116b880471d8bf20bd31c212d9e68323cd859b38693ad81e8cdabe203e31e3d425e92cb95278b3795b17d2a39b115124ef0591b13ca6093d3173faaaac60fd4672ba7f03122dbb40e86133c9ca6b70a97c7be1b44b90dfa7b41a017091b3c449d94cd870f2982d52b7ce1ccf79bac19a0511215f33113660a4837926b401b66bbe82deb35b82d29ec6d6f9291d371199bd4c7e1009894dc36b959b0ce9572950d2c993efb003af809a6b3181a2074a2b12eada06b617b2d423b988acf05f296ac5b2a2b8af8db8afd13cc916b59794bd17b5261c49e1c4526edda960ec34636a5114a03b2013d225d03fce93876542bf5c67b0e67defb997e6d876a46d1f5f7df17fa71a8279059c32a16344b32ad55411bc232828a230646eb419d6ae1b43bbc966ebface56355946a2908d372ac0b692baab4d8ab7957c858dadc9ac4ae7159d7cfacd1f8549ead0c45a4f9bc8b41b33ec33e2abaa61976fd032a294199e79c15c907085b7cdd652c33e3da833f4c3e0ad0998c2d164feb05c7cdd14459bb9b6e10ef2a86f955a1b8dec99f7ed3d8e408d25f86f5edbdac4046bc931e50283c85e3fe01a941678beb144280afdc31e73acbebc660ce8bf1bcef129ead80d52225b5493baa2dc6c9a77d881313541a4971eb7388f04083913a6899a29b0d6d26759e41040c364a97181e15cd69e6cdc4674a918a3585627857482613ade43b4e1e2bb8bfb7484177dd02aacb5ce329cd98f62c4b0560fc9425c91267bb7b3bb10b05a3be3ea2a965ae6485bc4266116155fe240b6c53230907f92a1cf8cac56cf7b69a5589073e9d726bc5bebfced9600ac1adb901dce9b3e0ee1b8cc14891a19eabf18b8463b98dfda9cfd82a781b75bedcd7d023e7e4065a29c1b23c5b6f2a8fa8aa0775e27311a4e8e4e847bd3906a3ad3da880ae6c963fb4c3fbd6c5238cad1d5343b4301117f8b4813512ff8b65861836dee65192958f97b25a483938f6850c8e005f9ffc305f74dd9a5ee98b57692da33587ba98d699b5001c5ff00d568027f131e3fc17f7a9db33a9381410a4cfd92211c5060bdf31ddd04de7ddfa85e0041c0e447653808170748b4f6ca46cc4107d3859a4a3e6d1f63326a981189e04a4da970b338dbc08992098be1c0e21b77650c89f76412301abdc267e04bc081f1fcd1673bf5b6af5403847bcde02327d80322b7b3edf1b94bc444d73884261962d7c38d99a0306ff300db7ebbab06ca620a4b6ed75d454fb20fbee9a4662de594281eefc5582fdbf642bf16cc140c8e13f8e570dfb270bf1de16260011930889c65fb97ec9c906a758f907b290c5cdcd7a5593a86e1c9805e2f88a9fed670bd7f27087615272e356ccb94127cc2c035ef7768f25ab1ed90e453d5d25d3b1d425337d08142ff4bf5ea709c063b01b308af9b845d18e490e2899218bfcd277c7b0381313bd6bf6987cebc4d3484197ec66ee0fd5596b2fd5a4f918dc7b31928b149bb3c47514d5a316b232abc269a78ac96a0d2b6fe1efbb4dc0908cd571c0103228019b7d9bab80c40bc0e0bc7516fa3befe45bf9e7715dd651225e6682c156181f908be959ff43c08eb94d2f1770001efd38952a80395493353bb2ee15bfa83040834ee0bc51256008e6cc2465f08d2185ca7eed345c9b67aa5844ec28bbb088965976e1ac6c49058f5edd16f62de175cc4f9953b90733ab787469f1a8f0f46a7640658321b61478e364666d670a170d25530c1d6206a1d788d81c331e3d72f6c83518a8909b23e992af40881b78b6fc836700979cf59ca4008f6538e28ad4d6766b51f863af45c65dd8a44285c137a1f921a5e5ee29eb299281db3e276bd2148b278533547220be65fa657c6602c54836785f55c776496a20ec893a5ed3f9e630f49744f33be3f24a503427ad641477dafb2f7d21a403d7da4fe0db9509fb208bf1a1fa5cd793dc264b031e6a70027d58b05a696c9caa4d7707451c63955abb02b7dd9c5e50bcbfbe81216af383ddfa4fdbde519628c9bff334268e46ba346b200663d08a1da4da8fa3ff9178b28faf594432df698c8eabdc535b423f847ba1aa2fe4b186f58979a0bf17deb294a1edf3623a0f8f6492aeb3da80776da7b4c7dabecbcc767483bd11b4ed5227aa66b6440ee29cc75b97ff26732dfa1c472412b7b152333279031f873ead6eb6ae9c264f4fc08d4c251d457d387470a0796d9b0a775b157904295e59ed5e41169d14fb8236d18b01b18d96093aa451ff5a7818ecb7f5167ff6b77a4bd7c86da2ae4530a209ecae052f121da45b08016cd6deffe7a7169fbbc08249b10ceb1e58ba932c1930c3402231f96ec65082d8114e619c933cedcf270dc83932506a81542915adb9136bd9caa7a172789da031e331379fe0ac29f2e647ae9ccf23515dc6a034bc58c3003d1451464dae950fb8efd30484cfffae1df5883909c845a717d750c29987bd57626014b438242b99cbc2644e6d8b1439bd62be7cd2c0baaff30061da0fc3863011e7ed015b32c2d45fe8ab19eab580af0aa14519887363f2b9fa444c4bf20e7403b47604e1fbf15c41ee0a931a5916353d40761af1e9afdeddd053d6eee06799b47c2f58f2d786d0ce4e066b5bea440372af1a3c1724a178e0fded2b2d515a40be54d3fdf599ac3a1598f06eaccbfa065af0082c27d74d48d76595f27090842bfb52d9e7f76eda94845de039a61834f4c263838f4c02f80c822db70d04bebefd8e90b0cad8f0770d28199863c7ef00b4faed3e350023582ebb216011dfb002f57f449eb3ce88ff432fba1c6b6d279730dd33b818855ced424c5cf17ebc0dfaeca1c00239a1b59f48ff68e46bfa1188b188d46aae3aae48a5c1815ecd1e3ebcd188f9b2258c9b50c34256e44d82f54aa0c528e60b09fefd7fed506dfefdce056870f33c70afaf81fd675b96b1ffac325c9e2cda131fd8d49190c116ae0f2f1077f8f8b243a3bc10f83ebc8f3621d2327b16da7ccf331a231176b7da888116e3520e7c778e5b159feec8b732d7a4c1952ec1148f035ce3e89e5cba11e55b4eaaaccd8f2dde1fb8dd48aa60bcf216c2e4435e8c580d4721c4c206bce238edeb899707059f1084ecced19991890922cde4ab9f8ac43041487ddae6494ad69581a013accc6cb24d6acd64a044fd5c85b0ec5a462bded183b646ff5c1ba2996341ea6ce9cea22b73a8205ff45b4ce4610f6beb0d0b8704362e0eb60a8a36c64690060ce83dd6b1e092ebb03a7611e59d9735b7d85a8c6022f3e3f5fa020a528d7920d00968644da613693c4c9c469c64f38cc18ee527a6fe83b7ac3345f42a35baa83e6b9f7e3c6b18407c90ea93fa459d7615107ff4551efa3118b99eb05f550b4dc0a25f7f60cc2dd8fd49f1b78e82fe2bf2038019bfdf1b74fe13f5357b2fe4fa01cb33cbd25e835302ad08d3c97dedae818d4716493e7daf1dd23515ed6a6ec358452d761d32cca85791e8061344f1ef2cee686c732c4df8e89627f995c6982bbea6c91e125e977eeba87eab244961faa908c61195c294c58ed5f68195706abdf68c6cb4aebaff7ff6ed8f33c16faf3d13ee562e37686cdd7a564dc40812bdb293656b1510fff4378fb894e94c8a531b93aca4c2b6c61a3a50e5498879236950b55c13b9c3b6d41e0f9d359d449de060679ed8fc32e4597fae9302779df44913b2a6ad40d64689d9eaefb8cf18cf6e1508b8a0305d65e5eec2fe310bbc9e33bdbc437b8c315985d818943fafd1aebf8fa19c92a4f9bf6bc73e4bd2be176d4305e9d5ade7cece6828d51aaacd1ded6153ad4c8fc6f49aa7c9a059f0b1f88f911334a27c1f28ee6fd4b7eaa13a37e651d9adc750c2d96fb536f714cfc1e484d8aeced5439fa8ee579c438ac7bcc95be759150c61c33a60a2126d15cc466758408a9ac07ca133aa80bcc1074b3f2d2707c74cfaead4d9a01192a6ae939075fdebc80258c61f626b74bb6ef66f2380653910c59de243f3655efc8b8152f8c5bdf5591dcba3954cbb12542fc1e80b5802ab97016dbd99cc822074eaf365bad707921e30dd5c5c419835461d42bd262e86c8e2b33959096e951cd63ac48f9c3bc1b683f4a2ebc735694a67f57820493c8fc4a13a4997bb48a21b310eb5a9556ab5dddaa5f424b82e7cc5fa5ccb229d72a637199c1d23a13d5f39c50b8905c4a15b86fd5ccd75b47e4cf419cd44f14b5bc28f0882b179c7eda3fa761f7c337e5ac912ba4f7923427c4111658db6c95d2a9eea4dfda089d6ae350851b8f213049e2f858d558312c28347201b2699bdb6fbe3bb8edf489e1306c92ad4888069210c454af5d7b454c11bfccc72a7350ce23774b69f6cad6e055738ecc474c15d15ace3af79f231914235d3c9a3c4eae9a25f3c11096341f323c0d4957fda44704194a241b3d43bd0cb3a533db380320b24213bb7b53690a216c001b9ec4fd1f954e777c71125489dfeadd2b5e2d4805a86ed49dab92666847f822220dd8372e9d958490727ba3b2843bfe998057654c602e5574e8d954ad6a8995beb8392d301a8fa9988b54f7fdd7a605d8056df76149814f01a071d5e2e9407f8382597a052de3f1800b13cc5bd51767a6690338b2bef873b20ff651f33d576eaf779956f028ab926086cc83159eadd90d73007557b2352ea5cc87c73c8f2a35654c4ff84bacaff256a4e3aac3dc57a4552401ac4de9a8e9c237971398353e14ebc9d611ec1a4acdd80d222d6d44a34a0fb11e9fe90267311adc01d6e20afbb1c541b161fe9f78e407b579a4cb7e63af8f9e854ebe6595ce92257021c33e90a8b2f652ad288c41179008abba4d9d7a97dfa60633fd9eb4f738cfaf1e283f5cfe4e814fd980bc05d6684954c1782ce7499e6b66c678c49ee0e8be225c7b4bd077194e5c00e94d644a9d34959826cd98a19f2c70e0dc71f2cba999fe67ed44d829969ed672fe572cc0af349d77fccd8a4baf49f5f3638616d62096fa6f8394fa28df4427a9e21eab982e9ccdbda7934c074cb8101f2f76e7cbe842a3857355928bdafc0dc64c5b1be37ed0ea5c376f565b43035f80b5fadd7c175d7c234500e7a6a6a3c09ccdae72f0e4d05e5911a0866ea55eaaa120fa92242d0a94227cb561ed3bf102ea5d8b6b1671a964d95650ee05e547d80e3ae9f710b699ea88a7ffd9b07ba7f0385dd6804dc4a54514614ea99d2199cad0c77d2de38fae96f53e3bbfd9418e9d863d757b793070f1b7aa31580ecee47ead96d4f8d593d57b295c0e95703d0726e0a998427ffe3d00efd3ab3152b924138687a40fc735f7a0a42f7c6e2392a5ec4ed1f3080fca7da3e6fe3d70cf460b3fd1b57372733c19641033c5cc652c01559e6952b8cde460e70dccd6f99efe7284bc0dca4bb8e353e4ce5d352b441d247ccb456d513b646f7f80301946cfa5ef529a86b42a2dbe9a2b2565295bc7019c6719c9c86423f35002c73de4cb7dc23b56c4872a21f7f3b88797e81d1283753afa0dcd420bf2a4be141caa11c291bfc13c1729ae5d5c9d38c723d81225e795974394174d982b243d8bf5a8c305c7887761be729c01de44540924b7e807a056473b77fc524ffec4cdb0838c9853ddb01b933875eb64d3152f8680e513b023a1d9d9fc33342c38f36fc4a8499fa5219432d9cb41c9dc18365aee35462a5bd1e7009e58c7a3e5ca878202c3eb87f58e8ae8e2545f5468f1e2595c9fd1e710460cf328e982b9bf0fe33e8d7089c699fa4f80cfa8e3dc922d6cca6347ac44dc15aca3e01f70b95a551b786a37b7cd6217322d0f4bef41132c7398c2130fced0a80754d6cdf21a16e09c8d18df4ed02a027ed884c299dbadf67aacac615dfeb3e19d779c408a73a9e58c82d95751472b4f48340fdc087c7f67e3a78d1cbae47eb3776af46e3f3d53aab226c2b6925d6890d35a922de95c04ce7c9cfbdddeeaa01409fd2bcb53f7f5f7ee86d0211ed22bda3b7270f90aa78bef1bd1df66dc39f13c62b1e84180ca1880aaadbc19ca25f3ba53ff41b863e0e37bdd42b48a30823c972d01eeb4ba9eb73eaa347624bb06f7f40b784121bdec4f4482d7570b7a6c208d6b12773f06b2225bd14c35d77b2c81a881987597142ef1cb9b727ecda56097495f602afb7614d726c51d115e91c746dca8370dc9c93d289c4c5402437ffd676830f8c34fcec5a3e235fcdbbe063ffe89ab0a5e1b8c6111d43bed1cb8767000508cebc2391237c48228e10ebbff56240a565e27405a085edf3acc784eb8bcf0d09a294b19241cc71fe1042f12ba284dae4ba7634fa3b0b835ede24cfaeb6e28b8e02c1ca39084a236811883f47bb499b78b714298793b13ae994087523623af197c15016903b64124549bae69bd259de2a061172a1c69a9b6ebc9601220e67b2c6a2eeff8478e2ad3fb52e9a12e3bdc424b6d0aa30c8774794fc646b1d9c0e616aadee840d2a94e8190ff386b06e669ce44c577863c7aa928874c66ce650b78200be85ed94541679eb447c9edfee6e9bb0d17869f30abba85ec87191e2aadda87ce27204ceedc5faa1f2bb4d669982e7cb57760d295416e90de76b77674984da41d872cc724ac2479617eda2d167b31d826cba7e9d677bbe72ae30393490e3fe570d0fe6bc18fc3a64c92603c4bf7f93215be0cf5b11fd55ef6a4025136d95a190127e149a1d9e56bb02e3f2cecdbdfab8b949cc91ed17dc3fd91080deda31036e46feeb306ae72be00bdc1b199b387b4b4f1e81761f33f531929fa3ea7a70596f1f061005b4fe06f9b3461d088b52b0edc353b46e565a9bf55f71896a8465dc31a8e670b4cd1eeb7af95ad726c008f82996788f908cb013d795a9bb475594bdc4cc46201d6d44e1b2bb57f2c901a23e4a1183d39d765e3f111f039ab4de27330a47760026777bd80e75498afb378e04904ef5ac961df608295a9565e9fa321a03ef19eb2018e9f027b0cca3cd126c29cc5b46f8c5918e50c4bc32403273697940282691eaa49539b977c29b4f62c35c6632583553a61e00edd6293cdc07fa66e005df7d2d28b5df619e9a7ee872e5fba0a385523049da41ed9a17541e2295fe58776faeba79b56495d1ef9c0a81fb868a3e3ac192c86b971684b6f599aef7385f3e820ebebbef3f60e68a2cd5076cb101e36f12431ecc375be1ee14a244d7733ee11d311d57e952d0666d756c1b169df822a71bfc3b676429e8bd016db5953139e1370738f20a4dbf5911650e63bbd647e2374e44d0d1f58b3ff13e6a88b13985d231d06421fde6d92b8c6b7e145dae3701ce35edfafdd75e5cd0ca737ba8012e2b94e0a7ba59deb3c2b8693a57af089d2f1d3c2242fbf761ef94b3c5d672b7454d7416033363f1684ae306ee177340014adf76b28e2a42239d81f4c089695d4efaec46f3f6471321efdf5a26c8406a7446709bf0f19e0080077dd17cc56e993bb28c85010db72e0599cfa797d4e5e3aff8f835bc23fe5fd9bff6645f59a16d02771b75eed033ca271f90edffe2a1ec125cfadf99eb7f851acf3058e8b285538b259b17cdeab8487184b017ad6e40c432ed7b08142b9adbbf86dc58a6b3d315f6497ef5f0728943c4265e4ce843fbc479d81142a3f9c6bdf51cb36c95f590cd53525631633fc8730874e1aa11d37c1cb2828bc49a9f652c4930cf1a9e2f7516f320d7174b49dee7b8e04cfbb1d597834cd3d01ac9cc728812fee9a0d1c3214b4b0a923904ac916824689c270f0f9b3e83d11aa133df46e1fc541f24741f65f9575ea06cfe607ac1956cf652336168bebd49ec56afbf6c9471610ae2d5446df299c57f705074edde703fe72bd03ae70225c11bdd3f90d6d2cae0a2b74b9810b531d8c63eddbff841cde9dfa65bd318cfe564a12ed38ce8142712ff72ba4df4dd34df031cf5fdf2510a68af47fd83a28402f0faf40bbfcee9a227cf5e16853bbaa64250f80d700433ef2e8a79e768a502e23f5335f4d06e87ba87cd883ade11fc2c3cd7f7330e4b899765cebda0ffd5701ff12b713b55dbd75247c1a1a98d95074873b88598e6dde3c43235e8f7e0a103b7baab1c54bb5ec70c187da9a3d54664cfef1f8fee54f8978e75ce407a737cc5b3c5ae4f9c6ee6e6d37a5e8731f2dfa9943d3fc25d5fd8cad189e1447dad23849a1fe5a7418016f6128b090279e8e498f8a1b03c3f3b8bb9374e4468aca3cdd1f5bad13950cd07bacd2c8afe1ef07419fd3e821b47500797847f8ad684d0984630cd86aedf63621f301c7fc1f0e035f693a87e7ddec25b6cd34c7973ae0b4fc94112e069ad3d94987981f41fa0887c6ff0aba5e71f7b40ea0085c22f2b8c16828823f2e9e39e84b03936827075dc64bfcd847378118c5230a3964ddf5d304aefa68d41bac18542eef09e62b69f784fc5c7cc2bd7d44887edea536e376feea38caaed03830fc059f7fe35ec8e8c097cf279e3245a466088b4ce71d4fe694cab3f1c01fddd576225ded0ac2a198caf017ab7edfaf5863d7716741f69da6cb2198212c828a9320431c3f95252f9f7c3d5ae73db48d9c955117f6dbb1c5bb789ff1e0d7fbfbde264aab928451a080d3d40f2ac20715aabb7264d4fac2ed3b66bb5a6ceff656e0b007ae742f4f1fb7d73f78b4d0c43667644d7e9609d45c28a4650da1d8e6792846f6f2b429a28ee38b9bd03c5d9ec563a6a6a2c0c7729f959515b6ee4afebecdc89eee22b951e8ac747bac514e960742a8689b68bc7afb31b9dbfbbf4076d64a2e4e2a04b3267e423e02e2ac744b8db946eef85d0edc0d76f003825d05ebbd5e4ba0dea1b4359291acf7f6b3b52f61608c39971db5d177f5a7a43bc5c8c975f0f244b0033cf64d5c62ab89e1dfdd1bf5ef5828f9dcf5e151aaa0e3ea3beeaa6f58eaf09804b96939bb6d4758ed05919aabfcaa11d662519bb99b86f863d4ad093db0fbe8da8de6ffe7d62dc91ba1ac171c2698b47f8de224fdec9e7f0560a82208cce0f1d60246f66455f144345a36208427e074e7fae6470bc2c226f5091d8dd5dd40e8156061a831bc80dea314647c414e1c755ceb78f483efdf566f26a1fd1cc4d760007ae83e5b23c8b8d9035e4a876c96289be9b66cc38d1b0092e9d04c5120c02dbd4f3e1f322bfa29406b356ec3a2450d43386d8cbaa3cf44a5d5dc766bfd283624034723cb2d20377652e29dc555b0b6b256e06b448718949d647955e7316ae0995a6a517df28ab77f17695fa48d85842234ef10bdf91b3435b07ac40c4c77f9b274f4e927bf0f39411aa9498e5de29c4cebe903591205a899a1e409ac85797da4d49b90822a0c636915cef27fafd96b5cc0f8e231458fac259992df91f0d6f1f1484a408eac14dae5a9272610831a84ddb12bdfa7f80ccf4f7e745726b7b60dd8f9bca702c5dd8ea0ef11c4aa4d1dd024ad7c03674caa0ecf16b4af0709aea663a9f8631f8038894094161de7c0d7fc2d4268c3ef14a9ac95ed5848a670c44bbaefa93ecc726d688dadb530829bb2b37bff94deeda92dce3e66bfe207f23d6224a919f9d0b826fb4ebb20c387142128440625cdb7c576182868446a6d0d2e1fa70ea764bd090f25fd83f2f69824aafc39f2e8be09262e31f400e5d3f06398d4ee9dae305aaa69eaa207e47f7a61851f92c70942a0e925d5dd8100ce2f15116938d242bfb69bf3efcb3c42d15aab5a69e0f0a953a7a168d80da5b39815b91a4fbe2a3687f3185d3164b01f374530bde6970345f078f889ac96a5cc6942c7b25ee803947d85fc8e7753f70ae5a3e482a6e9e87834e9bb940217ede79e06e88bf7c00c77e3fa0dc5671e7347827631c999e844c31ed620787984c3b3584f1e16b743d8895505f2f87b04c477c0c340f8f3c85552e38ea9120b2954e023d725825d4962a1d5ac05c7ed131c2968f478379832082c40205a54c0988884acdbd04dc7a98513fe90a9759fae26201b05c4569ee5105192462114757378ddf6b2cde5205151777b60fa425ec4bd5eae7c7f82fdaa4c060c15a90cb75cbf39535441b6b41aaae77dc749cfa97df6336e10f84a009a8e473723942b6ef907ec523bb7a5ef9262165aa9ab1eaf7a3c8e14cefa0538a7af4afefc62e0c4af8f6229b67afc91a5f9802f873623a0cb643944f1f1e4aeee5a3db64789989e83e74dc21293e0077cbd5c6a024fe9bbfdbd73961091fb575fbcf9dee04e4471ceddfe6f46eaf3234f8fad43ee5cd0b856a6ba38d5411a6df0fb547bd04320231a2c415b36fbd7deed34e051807046c5a2dda184ddca70712bb2bca14e26ce340f9bcc59f375d56873b6f9349df2bcb0760c7e0819f3478ed8e381a2a81abfd70ede5c07346f7f42b8a8d31548cdb4d2754f93c8097533bc62bdab7572cb760c0dda61b1191e825450ce314db4c72e1c32e761a511a79f2d5d044c49c07fc9d16058d659ef6b13b57516eb5d28ee2a7d796c3db2b267d0d24ab9912b24559c522bf716da3430906909daa76540b918f3c4397f86da18a9bc8f872fda5cc3595d79791d08887fbb519151546e141882400b3a1af42803600a3da4f54722f44a57f1ab6ee776ec3e02fdde09fec9df80009e0ee6304e5ec70e74c7fac99f5140b58dbcae0b90540fc1ebbd7f5a788e4cb5c72d47f7352ea464b0351ad370a2ac10c67aac374ae32bf24ed92467bd0cca24223fc60b6680d4abe4d7527b276a33cb4cf9fc3373196b53cf4eb2dcd1960378157ea20bd0eb2818a89aa31cc099a4b27746d1713c425355faba2e47510de62738061b049f2730876b3d7af772c7bcaa2d0db1e9d9402b9e9f0af8a3f1ee5e573842d77fc7bba975b323ed1fe4aab3bd10b08ccd8ef7039806fb7ae3a5b661562c8476ee367165eb1c60a94104ab43ccc71f1aa828f4496a25931f06d54a301b34d3f7bb3304ab15ed4ce7dd61432d1b0b5a065c5b0c289f7a345a7d23b766</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">前往关于页联系本人</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>OpenStack</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>k8s部署Prometheus+Grafana</title>
    <link href="/2024/01/07/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana/"/>
    <url>/2024/01/07/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="k8s部署Prometheus-Grafana"><a href="#k8s部署Prometheus-Grafana" class="headerlink" title="k8s部署Prometheus+Grafana"></a>k8s部署Prometheus+Grafana</h1><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/99194bb5049ba5669d662e158dabf24c697559838.png" alt="image-20240107005039292"></p><table><thead><tr><th>主机名</th><th>ip1（NAT）</th><th>系统</th><th>磁盘</th><th>内存</th></tr></thead><tbody><tr><td>master1</td><td>192.168.48.101</td><td>Centos7.9</td><td>100G</td><td>4G</td></tr><tr><td>master2</td><td>192.168.48.102</td><td>Centos7.9</td><td>100G</td><td>4G</td></tr><tr><td>master3</td><td>192.168.48.103</td><td>Centos7.9</td><td>100G</td><td>4G</td></tr><tr><td>node01</td><td>192.168.48.104</td><td>Centos7.9</td><td>100G</td><td>6G</td></tr><tr><td>node02</td><td>192.168.48.105</td><td>Centos7.9</td><td>100G</td><td>6G</td></tr></tbody></table><p><font color='red'>做这个之前你要拥有一个k8s集群，参考以下教程</font></p><p><a href="https://blog.qianyios.top/2023/12/02/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/">K8S高可用集群（内部etcd） - 严千屹博客 (qianyios.top)</a></p><p><a href="https://blog.qianyios.top/2023/12/02/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/">K8S高可用集群（外部etcd） - 严千屹博客 (qianyios.top)</a></p><h2 id="部署Prometheus"><a href="#部署Prometheus" class="headerlink" title="部署Prometheus"></a>部署Prometheus</h2><p>创建命名空间</p><p><font color='red'>操作节点[master1]</font></p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql">kubectl <span class="hljs-keyword">create</span> <span class="hljs-keyword">namespace</span> prometheus-<span class="hljs-keyword">work</span><br></code></pre></td></tr></table></figure><p>部署Prometheus deploy</p><p><font color='red'>操作节点[master1]</font></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&gt;prome_deploy.yml&lt;&lt;</span> <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">prometheus-work</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">prometheus</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">prometheus</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">prometheus</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">securityContext:</span>                                   <span class="hljs-comment">#指定运行的用户为root</span><br>        <span class="hljs-attr">runAsUser:</span> <span class="hljs-number">0</span><br>      <span class="hljs-attr">serviceAccountName:</span> <span class="hljs-string">prometheus</span><br>      <span class="hljs-attr">containers:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">image:</span> <span class="hljs-string">prom/prometheus:v2.30.2</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span><br>        <span class="hljs-attr">args:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--config.file=/etc/prometheus/prometheus.yml&quot;</span> <span class="hljs-comment">#通过volume挂载prometheus.yml</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--storage.tsdb.path=/prometheus&quot;</span>              <span class="hljs-comment">#通过vlolume挂载目录/prometheus</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--storage.tsdb.retention.time=24h&quot;</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--web.enable-admin-api&quot;</span>                       <span class="hljs-comment">#控制对admin HTTP API的访问</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--web.enable-lifecycle&quot;</span>                       <span class="hljs-comment">#支持热更新，直接执行localhost:9090/-/reload立即生效</span><br>        <span class="hljs-attr">ports:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">9090</span><br>          <span class="hljs-attr">name:</span> <span class="hljs-string">http</span><br>        <span class="hljs-attr">volumeMounts:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">mountPath:</span> <span class="hljs-string">&quot;/etc/prometheus&quot;</span><br>          <span class="hljs-attr">name:</span> <span class="hljs-string">config-volume</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">mountPath:</span> <span class="hljs-string">&quot;/prometheus&quot;</span><br>          <span class="hljs-attr">name:</span> <span class="hljs-string">data</span><br>        <span class="hljs-attr">resources:</span><br>          <span class="hljs-attr">requests:</span><br>            <span class="hljs-attr">cpu:</span> <span class="hljs-string">100m</span><br>            <span class="hljs-attr">memory:</span> <span class="hljs-string">512Mi</span><br>          <span class="hljs-attr">limits:</span><br>            <span class="hljs-attr">cpu:</span> <span class="hljs-string">100m</span><br>            <span class="hljs-attr">memory:</span> <span class="hljs-string">512Mi</span><br>      <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">data</span><br>        <span class="hljs-attr">persistentVolumeClaim:</span><br>          <span class="hljs-attr">claimName:</span> <span class="hljs-string">prometheus-data</span>  <span class="hljs-comment">#本地存储</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">config-volume</span><br>        <span class="hljs-attr">configMap:</span><br>          <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus-config</span>     <span class="hljs-comment">#定义的prometeus.yaml</span><br><br><span class="hljs-string">EOF</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">prome_deploy.yml</span><br><br></code></pre></td></tr></table></figure><p>部署Prometheus service</p><p><font color='red'>操作节点[master1]</font></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat&gt;</span> <span class="hljs-string">prome_svc.yml&lt;&lt;</span> <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">prometheus-work</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">prometheus</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">prometheus</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">web</span><br>      <span class="hljs-attr">port:</span> <span class="hljs-number">9090</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-string">http</span><br><span class="hljs-string">EOF</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">prome_svc.yml</span><br><br></code></pre></td></tr></table></figure><p>部署configmap</p><p><font color='red'>操作节点[master1]</font></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">prome_cfg.yml</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">ConfigMap</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus-config</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">prometheus-work</span><br><span class="hljs-attr">data:</span><br>  <span class="hljs-attr">prometheus.yml:</span> <span class="hljs-string">|</span><br><span class="hljs-string">    global:</span><br><span class="hljs-string">      scrape_interval: 15s</span><br><span class="hljs-string">      scrape_timeout: 15s</span><br><span class="hljs-string">    scrape_configs:</span><br><span class="hljs-string">    - job_name: &#x27;prometheus&#x27;</span><br><span class="hljs-string">      static_configs:</span><br><span class="hljs-string">      - targets: [&#x27;localhost:9090&#x27;]</span><br><span class="hljs-string"></span><br><span class="hljs-string">EOF</span><br> <span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">prome_cfg.yml</span><br><br></code></pre></td></tr></table></figure><p>部署PV，PVC</p><p><font color='red'>操作节点[node01]</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#在node01节点上执行</span><br><span class="hljs-built_in">mkdir</span> /data/k8s/prometheus -p<br></code></pre></td></tr></table></figure><p><font color='red'>操作节点[master1]</font></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">prome_pvc.yml</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">PersistentVolume</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus-local</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">prometheus</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">accessModes:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">ReadWriteOnce</span><br>  <span class="hljs-attr">capacity:</span><br>    <span class="hljs-attr">storage:</span> <span class="hljs-string">5Gi</span><br>  <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">local-storage</span><br>  <span class="hljs-attr">local:</span><br>    <span class="hljs-attr">path:</span> <span class="hljs-string">/data/k8s/prometheus</span>  <span class="hljs-comment">#在node01节点创建此目录</span><br>  <span class="hljs-attr">nodeAffinity:</span><br>    <span class="hljs-attr">required:</span><br>      <span class="hljs-attr">nodeSelectorTerms:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">matchExpressions:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">kubernetes.io/hostname</span><br>          <span class="hljs-attr">operator:</span> <span class="hljs-string">In</span><br>          <span class="hljs-attr">values:</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-string">node01</span>   <span class="hljs-comment">#指定运行在node节点</span><br>  <span class="hljs-attr">persistentVolumeReclaimPolicy:</span> <span class="hljs-string">Retain</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">PersistentVolumeClaim</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus-data</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">prometheus-work</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">prometheus</span><br>  <span class="hljs-attr">accessModes:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">ReadWriteOnce</span><br>  <span class="hljs-attr">resources:</span><br>    <span class="hljs-attr">requests:</span><br>      <span class="hljs-attr">storage:</span> <span class="hljs-string">5Gi</span><br>  <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">local-storage</span><br><br><span class="hljs-string">EOF</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">prome_pvc.yml</span><br><br></code></pre></td></tr></table></figure><p>配置rabc</p><p><font color='red'>操作节点[master1]</font></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">prome_rabc.yml</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceAccount</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">prometheus-work</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">rbac.authorization.k8s.io/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">ClusterRole</span>        <span class="hljs-comment">#创建一个clusterrole</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span><br><span class="hljs-attr">rules:</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">apiGroups:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-attr">resources:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">nodes</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">services</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">endpoints</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">pods</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">nodes/proxy</span><br>  <span class="hljs-attr">verbs:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">get</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">list</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">watch</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">apiGroups:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;extensions&quot;</span><br>  <span class="hljs-attr">resources:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">ingresses</span><br>  <span class="hljs-attr">verbs:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">get</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">list</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">watch</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">apiGroups:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-attr">resources:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">configmaps</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">nodes/metrics</span><br>  <span class="hljs-attr">verbs:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">get</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">nonResourceURLs:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">/metrics</span><br>  <span class="hljs-attr">verbs:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">get</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">rbac.authorization.k8s.io/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">ClusterRoleBinding</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span><br><span class="hljs-attr">roleRef:</span><br>  <span class="hljs-attr">apiGroup:</span> <span class="hljs-string">rbac.authorization.k8s.io</span><br>  <span class="hljs-attr">kind:</span> <span class="hljs-string">ClusterRole</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span><br><span class="hljs-attr">subjects:</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceAccount</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">prometheus-work</span><br><br><span class="hljs-string">EOF</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">prome_rabc.yml</span><br><br></code></pre></td></tr></table></figure><p>查看部署的Prometheus服务</p><p><font color='red'>操作节点[master1]</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@master1 ~]<span class="hljs-comment"># kubectl get pod,svc,configmap,sa -n prometheus-work</span><br>NAME                             READY   STATUS    RESTARTS   AGE<br>pod/prometheus-db4b5c549-6gb7d   1/1     Running   0          4m39s<br><br>NAME                 TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE<br>service/prometheus   NodePort   10.103.99.200   &lt;none&gt;        9090:30512/TCP   15m    <span class="hljs-comment">#注意这个30512是后面要访问的端口</span><br><br>NAME                          DATA   AGE<br>configmap/kube-root-ca.crt    1      17m<br>configmap/prometheus-config   1      14m<br><br>NAME                        SECRETS   AGE<br>serviceaccount/default      0         17m<br>serviceaccount/prometheus   0         12m<br><br></code></pre></td></tr></table></figure><p>在浏览器访问Prometheus<br>访问地址是node节点IP加上service的nodeport端口</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">192.168.48.104:30512</span><br></code></pre></td></tr></table></figure><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/ff121d0cea6b3d700c126869c1ec57a6697559838.png" alt="image-20240103162100215"></p><h2 id="部署grafana"><a href="#部署grafana" class="headerlink" title="部署grafana"></a>部署grafana</h2><p>部署deployment</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&gt;grafana.yml</span> <span class="hljs-string">&lt;&lt;&quot;EOF&quot;</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">grafana</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">grafana</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">prometheus-work</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span><br>  <span class="hljs-attr">revisionHistoryLimit:</span> <span class="hljs-number">10</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">grafana</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">grafana</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">securityContext:</span><br>        <span class="hljs-attr">runAsNonRoot:</span> <span class="hljs-literal">true</span><br>        <span class="hljs-attr">runAsUser:</span> <span class="hljs-number">10555</span><br>        <span class="hljs-attr">fsGroup:</span> <span class="hljs-number">10555</span><br>      <span class="hljs-attr">containers:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">grafana</span><br>          <span class="hljs-attr">image:</span> <span class="hljs-string">grafana/grafana:8.4.4</span><br>          <span class="hljs-attr">imagePullPolicy:</span> <span class="hljs-string">IfNotPresent</span><br>          <span class="hljs-attr">env:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">GF_AUTH_BASIC_ENABLED</span><br>              <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;true&quot;</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">GF_AUTH_ANONYMOUS_ENABLED</span><br>              <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;false&quot;</span><br>          <span class="hljs-attr">readinessProbe:</span><br>            <span class="hljs-attr">httpGet:</span><br>              <span class="hljs-attr">path:</span> <span class="hljs-string">/login</span><br>              <span class="hljs-attr">port:</span> <span class="hljs-number">3000</span><br>          <span class="hljs-attr">volumeMounts:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/var/lib/grafana</span><br>              <span class="hljs-attr">name:</span> <span class="hljs-string">grafana-data-volume</span><br>          <span class="hljs-attr">ports:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">3000</span><br>              <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span><br>      <span class="hljs-attr">volumes:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">grafana-data-volume</span><br>          <span class="hljs-attr">emptyDir:</span> &#123;&#125;<br><br><span class="hljs-string">EOF</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">grafana.yml</span><br></code></pre></td></tr></table></figure><p>部署svc</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&gt;grafana_svc.yml&lt;&lt;&quot;EOF&quot;</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">grafana</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">grafana-service</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">prometheus-work</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">3000</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">3000</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">grafana</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span><br><br><span class="hljs-string">EOF</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">grafana_svc.yml</span><br><br></code></pre></td></tr></table></figure><p>查看服务</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@master1 ~]<span class="hljs-comment"># kubectl get pod,svc -n prometheus-work |grep grafana</span><br>pod<span class="hljs-regexp">/grafana-5d475d9d7-ctb2t      1/</span><span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">5</span>m18s<br>service<span class="hljs-regexp">/grafana-service   NodePort   10.99.157.212   &lt;none&gt;        3000:31163/</span>TCP   <span class="hljs-number">5</span>m12s<br><span class="hljs-comment">#查看grafana的pod在哪个节点</span><br>[root@master1 <span class="hljs-number">1</span>]<span class="hljs-comment"># kubectl describe pod -n prometheus-work grafana-5d475d9d7-ctb2t | grep Node:</span><br>Node:             node02/<span class="hljs-number">192.168</span>.<span class="hljs-number">48.105</span><br>[root@master1 <span class="hljs-number">1</span>]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><p>访问页面<a href="http://192.168.48.105:31163/">http://192.168.48.105:31163</a></p><p>首次登录grafana，<font color='red'>用户名和密码都是admin</font>，登陆之后会要求修改admin的密码，也可以不修改</p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/a7a86e95b368d4e4d5877738b9a0741f697559838.png" alt="image-20240103163411877"></p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/6fa04500240fafe21391975276fc8e6f697559838.png" alt="image-20240103164006642"></p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/164a86ddf205de933273884be556f56c697559838.png" alt="image-20240103164054258"></p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/9c15d8da3655b36cfbf47d5f8e5c0f5a697559838.png" alt="image-20240103164130946"></p><h2 id="监控开始"><a href="#监控开始" class="headerlink" title="监控开始"></a>监控开始</h2><p>以下测试均已监控node01来做测试</p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/3c8cba195ef369929b216e63061be620697559838.png" alt="image-20240107005309863"></p><p><a href="https://github.com/prometheus/node_exporter">GitHub - prometheus&#x2F;node_exporter: Exporter for machine metrics</a></p><h3 id="监控linux服务器"><a href="#监控linux服务器" class="headerlink" title="监控linux服务器"></a><strong>监控linux服务器</strong></h3><p>主要监控指标：</p><ul><li>CPU</li><li>内存</li><li>硬盘</li><li>网络流量</li><li>系统负载</li><li>系统服务</li></ul><h4 id="安装采集器"><a href="#安装采集器" class="headerlink" title="安装采集器"></a>安装采集器</h4><p>从上图得知监控linux需要使用<font color='red'>Node exporter</font>采集器</p><p>下载Node exporter采集器</p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/adadb2a4fdae2245309f74f48c037a2d697559838.png" alt="image-20240103164627575"></p><p>操作节点[node01]</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">wget -P <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/ https:/</span><span class="hljs-regexp">/github.com/</span>prometheus<span class="hljs-regexp">/node_exporter/</span>releases<span class="hljs-regexp">/download/</span>v1.<span class="hljs-number">7.0</span>/node_exporter-<span class="hljs-number">1.7</span>.<span class="hljs-number">0</span>.linux-amd64.tar.gz<br>#也可以自己先下载上传到<span class="hljs-regexp">/usr/</span>local/ 下<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /usr/local/<br>tar -xvf node_exporter-1.7.0.linux-amd64.tar.gz<br><span class="hljs-built_in">mv</span> node_exporter-1.7.0.linux-amd64 node_exporter<br><span class="hljs-built_in">cd</span> /usr/local/node_exporter<br>./node_exporter<br></code></pre></td></tr></table></figure><p>出现以下没关系</p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/78c7408333844d4be10795b9faaeb494697559838.png" alt="image-20240103165243667"></p><p>访问采集器</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.104</span>:<span class="hljs-number">9100</span>/<br></code></pre></td></tr></table></figure><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/c2700241ef8440f353b2e2d68e84e832697559838.png" alt="image-20240103165201596"></p><h4 id="设置采集器开机自启动"><a href="#设置采集器开机自启动" class="headerlink" title="设置采集器开机自启动"></a>设置采集器开机自启动</h4><p><strong>加入systemd管理</strong></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs gradle">cat &gt; <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system/node_exporter.service &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>[Unit]<br><span class="hljs-keyword">Description</span>=node_exporter<br>[Service]<br>#ExecStart=<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/node_exporter/</span>node_exporter --web.config=<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/node_exporter/</span>config.yml<br>ExecStart=<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/node_exporter/</span>node_exporter<br>ExecReload=<span class="hljs-regexp">/bin/</span>kill -HUP $MAINPID<br>KillMode=process<br>Restart=on-failure<br>[Install]<br>WantedBy=multi-user.target<br>EOF<br># 重新加载<br>systemctl daemon-reload<br># 启动<br>systemctl start node_exporter<br># 加入开机自启<br>systemctl enable node_exporter<br></code></pre></td></tr></table></figure><h4 id="Prometheus配置"><a href="#Prometheus配置" class="headerlink" title="Prometheus配置"></a>Prometheus配置</h4><p><strong>配置文件修改</strong></p><p><font color='red'>操作节点[master1]</font></p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">在Prometheus配置文件添加被监控端</span><br><span class="hljs-attribute">cat &gt; prome_cfg.yml &lt;&lt; &quot;EOF&quot;</span><br><span class="hljs-attribute">apiVersion</span><span class="hljs-punctuation">:</span> <span class="hljs-string">v1</span><br><span class="hljs-attribute">kind</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ConfigMap</span><br><span class="hljs-attribute">metadata</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">name</span><span class="hljs-punctuation">:</span> <span class="hljs-string">prometheus-config</span><br>  <span class="hljs-attribute">namespace</span><span class="hljs-punctuation">:</span> <span class="hljs-string">prometheus-work</span><br><span class="hljs-attribute">data</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">prometheus.yml</span><span class="hljs-punctuation">:</span> <span class="hljs-string">|</span><br>    <span class="hljs-attribute">global</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-attribute">scrape_interval</span><span class="hljs-punctuation">:</span> <span class="hljs-string">15s</span><br>      <span class="hljs-attribute">scrape_timeout</span><span class="hljs-punctuation">:</span> <span class="hljs-string">15s</span><br>    <span class="hljs-attribute">scrape_configs</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">job_name: &#x27;prometheus&#x27;</span><br>      <span class="hljs-attribute">static_configs</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">targets: [&#x27;localhost:9090&#x27;]</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">job_name: &#x27;test&#x27;</span><br>      <span class="hljs-attribute">static_configs</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">targets: [&#x27;192.168.48.104:9100&#x27;]</span><br><br>EOF<br>kubectl apply -f prome_cfg.yml<br></code></pre></td></tr></table></figure><p>热加载更新</p><p><font color='red'>操作节点[node01]</font>加的是哪个节点就在哪个节点进行热加载</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#实现Prometheus热更新</span><br>curl -X POST http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.104</span>:<span class="hljs-number">30512</span><span class="hljs-regexp">/-/</span>reload<br></code></pre></td></tr></table></figure><p>访问prometheus页面查看<a href="http://192.168.48.104:30512/">http://192.168.48.104:30512</a></p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/0bc9c1e585fc8faa1024148d386db551697559838.png" alt="image-20240103192048627"></p><p>可以看到有记录了</p><h4 id="Grafana展示"><a href="#Grafana展示" class="headerlink" title="Grafana展示"></a>Grafana展示</h4><p>展示数据需要配置仪表盘，仪表盘可以自己制作导入，也可以从官方下载使用。</p><p>进入grafana  <a href="http://192.168.48.105:31163/">http://192.168.48.105:31163</a></p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/68ce702e3a54fc010b5eed8a2f8a9445697559838.png" alt="image-20240103192229794"></p><p>这里直接输入9276仪表盘id，然后点击load</p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/bc89d64827561e2d817129c323b6135c697559838.png" alt="image-20240103192353726"></p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/7e68cce07a77c185791f1a78e4d020de697559838.png" alt="image-20240103192457219"></p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/e8173f303cf08d29d0c2cf67148a372c697559838.png" alt="image-20240103192553778"></p><p>默认情况下网络这部分是没有数据的</p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/6fb716206070e90ad7dbddb15fe7a439697559838.png" alt="image-20240103192648040"></p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/f7a3d89ddccd5d543b1cc85c8c096b9f697559838.png" alt="image-20240103192728841"></p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/7253c84bd73260228ace9c4eceeec130697559838.png" alt="image-20240103192904616"></p><p>点击右上角的save保存</p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/9a9b29f404b4e471832b80c35bea3094697559838.png" alt="image-20240103193009248"></p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/3fe3b746ea84bb1e57106ed40bb8db6e697559838.png" alt="image-20240103193028376"></p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/065c6e6e0252f22fe4190059064d58a9697559838.png" alt="image-20240103193049630"></p><h3 id="监控多台linux"><a href="#监控多台linux" class="headerlink" title="监控多台linux"></a>监控多台linux</h3><ul><li><strong>复制安装文件</strong></li></ul><p>远程复制到新增的机器</p><p><font color='red'>假设我还要监控node02</font></p><p><font color='red'>操作节点[node01]</font></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">scp -r <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/node_exporter root@192.168.48.105:/u</span>sr<span class="hljs-regexp">/local/</span><br>scp <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system<span class="hljs-regexp">/node_exporter.service root@192.168.48.105:/u</span>sr<span class="hljs-regexp">/lib/</span>systemd<span class="hljs-regexp">/system/</span><br></code></pre></td></tr></table></figure><p><font color='red'>操作节点[node02]</font></p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-comment"># 重新加载</span><br><span class="hljs-params">system</span>ctl daemon-reload<br><span class="hljs-comment"># 启动</span><br><span class="hljs-params">system</span>ctl start node_exporter<br><span class="hljs-comment"># 加入开机自启</span><br><span class="hljs-params">system</span>ctl enable node_exporter<br></code></pre></td></tr></table></figure><p>添加采集器信息</p><p><font color='red'>操作节点[master1]</font></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">在Prometheus配置文件添加被监控端</span><br><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">prome_cfg.yml</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">ConfigMap</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus-config</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">prometheus-work</span><br><span class="hljs-attr">data:</span><br>  <span class="hljs-attr">prometheus.yml:</span> <span class="hljs-string">|</span><br><span class="hljs-string">    global:</span><br><span class="hljs-string">      scrape_interval: 15s</span><br><span class="hljs-string">      scrape_timeout: 15s</span><br><span class="hljs-string">    scrape_configs:</span><br><span class="hljs-string">    - job_name: &#x27;prometheus&#x27;</span><br><span class="hljs-string">      static_configs:</span><br><span class="hljs-string">      - targets: [&#x27;localhost:9090&#x27;]</span><br><span class="hljs-string">    - job_name: &#x27;test&#x27;</span><br><span class="hljs-string">      static_configs:</span><br><span class="hljs-string">      - targets: [&#x27;192.168.48.104:9100&#x27;,&#x27;192.168.48.105:9100&#x27;]</span><br><span class="hljs-string"></span><span class="hljs-comment">#以逗号分割添加新的node02地址的采集器</span><br><span class="hljs-string">EOF</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">prome_cfg.yml</span><br></code></pre></td></tr></table></figure><p>热加载更新</p><p><font color='red'>操作节点[node02]</font></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#实现Prometheus热更新</span><br>curl -X POST http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.104</span>:<span class="hljs-number">30512</span><span class="hljs-regexp">/-/</span>reload<br></code></pre></td></tr></table></figure><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/e128ae8ca854893d5824a025b0458b5d697559838.png" alt="image-20240103195032856"></p><p><img src="/../img/k8s%E9%83%A8%E7%BD%B2Prometheus+Grafana.assets/e76669ac7347997d5111c26e452a98e9697559838.png" alt="image-20240103195105169"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>K8s</tag>
      
      <tag>Prometheus</tag>
      
      <tag>Grafana</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基于CentOS Stream 8一键安装OpenStack Yoga版本</title>
    <link href="/2023/12/30/%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E5%8D%95%E8%8A%82%E7%82%B9openstack-Yoga/"/>
    <url>/2023/12/30/%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E5%8D%95%E8%8A%82%E7%82%B9openstack-Yoga/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="基于CentOS-Stream-8一键安装OpenStack-Yoga版本"><a href="#基于CentOS-Stream-8一键安装OpenStack-Yoga版本" class="headerlink" title="基于CentOS Stream 8一键安装OpenStack Yoga版本"></a>基于CentOS Stream 8一键安装OpenStack Yoga版本</h1><h2 id="主机拓扑"><a href="#主机拓扑" class="headerlink" title="主机拓扑"></a>主机拓扑</h2><table><thead><tr><th>主机名</th><th>ip</th><th>内存</th><th>cpu</th><th>硬盘</th><th>OS</th></tr></thead><tbody><tr><td>openstack</td><td>192.168.48.100</td><td>8G</td><td>2v2c</td><td>100G+100G</td><td>CentOS Stream 8</td></tr></tbody></table><p><img src="/../img/%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E5%8D%95%E8%8A%82%E7%82%B9openstack-Yoga.assets/image-20231229212257188.png" alt="image-20231229212257188"></p><p><a href="https://mirrors.aliyun.com/centos/8-stream/isos/x86_64/?spm=a2c6h.25603864.0.0.462736abJsUNeH">centos-8-stream-isos-x86_64安装包下载_开源镜像站-阿里云 (aliyun.com)</a>镜像可以进入这里下载<a href="https://mirrors.aliyun.com/centos/8-stream/isos/x86_64/CentOS-Stream-8-x86_64-latest-boot.iso">CentOS-Stream-8-x86_64-latest-boot.iso</a></p><h2 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@localhost ~]</span><span class="hljs-comment"># vi /etc/sysconfig/network-scripts/ifcfg-ens160</span><br><span class="hljs-attr">TYPE</span>=Ethernet<br><span class="hljs-attr">PROXY_METHOD</span>=none<br><span class="hljs-attr">BROWSER_ONLY</span>=<span class="hljs-literal">no</span><br><span class="hljs-attr">BOOTPROTO</span>=static<br><span class="hljs-attr">DEFROUTE</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">IPV4_FAILURE_FATAL</span>=<span class="hljs-literal">no</span><br><span class="hljs-attr">IPV6INIT</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">IPV6_AUTOCONF</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">IPV6_DEFROUTE</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">IPV6_FAILURE_FATAL</span>=<span class="hljs-literal">no</span><br><span class="hljs-attr">IPV6_ADDR_GEN_MODE</span>=eui64<br><span class="hljs-attr">NAME</span>=ens160<br><span class="hljs-attr">UUID</span>=<span class="hljs-number">025</span>bf07f-<span class="hljs-number">8</span>fc9-<span class="hljs-number">41</span>eb-b26e-<span class="hljs-number">13218</span>b0d434b<br><span class="hljs-attr">DEVICE</span>=ens160<br><span class="hljs-attr">ONBOOT</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">IPADDR</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">48.100</span><br><span class="hljs-attr">PREFIX</span>=<span class="hljs-number">24</span><br><span class="hljs-attr">GATEWAY</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">48.2</span><br><span class="hljs-attr">DNS1</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">48.2</span><br><span class="hljs-attr">DNS2</span>=<span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span><br></code></pre></td></tr></table></figure><h2 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h2><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-comment">#设置主机名</span><br><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">openstack</span> &amp;&amp; <span class="hljs-string">bash</span><br><br><span class="hljs-comment">#添加本地名称解析</span><br><span class="hljs-string">cat</span> &gt;&gt;/<span class="hljs-string">etc</span>/<span class="hljs-string">hosts</span> &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-string">192</span>.<span class="hljs-string">168</span>.<span class="hljs-string">48</span>.<span class="hljs-string">100</span> <span class="hljs-string">openstack</span> <br><span class="hljs-string">EOF</span><br><span class="hljs-comment">#关闭防火墙</span><br><span class="hljs-string">systemctl</span> <span class="hljs-string">disable</span> <span class="hljs-string">firewalld</span> <span class="hljs-built_in">--now</span><br><span class="hljs-string">sed</span> -<span class="hljs-string">i</span> <span class="hljs-string">&quot;s#SELINUX=enforcing#SELINUX=disabled#g&quot;</span> /<span class="hljs-string">etc</span>/<span class="hljs-string">selinux</span>/<span class="hljs-string">config</span><br><span class="hljs-string">setenforce</span> <span class="hljs-string">0</span><br><br><span class="hljs-comment">#值得需要注意的是，openstack不允许使用NetworkManager，而是需要使用Network，所以我们还需要安装Network的服务。</span><br><span class="hljs-string">dnf</span> <span class="hljs-string">install</span> -<span class="hljs-string">y</span> <span class="hljs-string">network-scripts</span> <br><span class="hljs-string">systemctl</span> <span class="hljs-string">disable</span> <span class="hljs-built_in">--now</span> <span class="hljs-string">NetworkManager</span><br><span class="hljs-string">systemctl</span> <span class="hljs-string">restart</span> <span class="hljs-string">network</span><br><span class="hljs-string">systemctl</span> <span class="hljs-string">enable</span> <span class="hljs-built_in">--now</span> <span class="hljs-string">network</span><br><br><span class="hljs-comment">#启用powertools库</span><br><span class="hljs-string">dnf</span> <span class="hljs-string">config-manager</span> <span class="hljs-built_in">--enable</span> <span class="hljs-string">powertools</span><br><br><span class="hljs-comment">#重建以下缓存</span><br><span class="hljs-string">dnf</span> <span class="hljs-string">clean</span> <span class="hljs-string">all</span> &amp;&amp; <span class="hljs-string">dnf</span> <span class="hljs-string">makecache</span> <br><br><span class="hljs-comment">#升级软件包</span><br><span class="hljs-string">dnf</span> -<span class="hljs-string">y</span> <span class="hljs-string">update</span><br><span class="hljs-string">reboot</span><br><br></code></pre></td></tr></table></figure><h2 id="安装openstack"><a href="#安装openstack" class="headerlink" title="安装openstack"></a>安装openstack</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@openstack ~]<span class="hljs-comment">#  dnf search release-openstack</span><br>........<br>centos-release-openstack-yoga.noarch : OpenStack from the CentOS Cloud SIG repo configs<br><br><span class="hljs-comment">#安装最新的yoga版本</span><br>dnf install -y centos-release-openstack-yoga.noarch<br><br><span class="hljs-comment">#安装packstack软件包并生成应答文件</span><br>dnf install -y openstack-packstack<br>packstack --gen-answer-file <span class="hljs-regexp">/root/</span>openstack-answer.txt<br><br><span class="hljs-comment">#修改应答文件</span><br><span class="hljs-comment">#一键替换，若有其他需要根据需要自行修改其中的值</span><br>sed -i <span class="hljs-string">&#x27;s/CONFIG_HEAT_INSTALL=n/CONFIG_HEAT_INSTALL=y/g; s/CONFIG_PROVISION_DEMO=y/CONFIG_PROVISION_DEMO=n/g; s/CONFIG_NEUTRON_OVN_BRIDGE_IFACES=/CONFIG_NEUTRON_OVN_BRIDGE_IFACES=br-ex:ens160/g&#x27;</span> <span class="hljs-regexp">/root/</span>openstack-answer.txt<br><br>sed -i <span class="hljs-string">&#x27;s/CONFIG_KEYSTONE_ADMIN_PW=.*/CONFIG_KEYSTONE_ADMIN_PW=admin/g&#x27;</span> <span class="hljs-regexp">/root/</span>openstack-answer.txt<br><br><span class="hljs-comment">#也可以手动替换</span><br>vi <span class="hljs-regexp">/root/</span>openstack-answer.txt<br>-------------------------<br>CONFIG_HEAT_INSTALL=y           <span class="hljs-comment">#安装heat模板服务</span><br>CONFIG_PROVISION_DEMO=n         <span class="hljs-comment">#我们不要提供的demo项目</span><br>CONFIG_KEYSTONE_ADMIN_PW=admin  <span class="hljs-comment">#设置登陆密码</span><br>CONFIG_NEUTRON_OVN_BRIDGE_IFACES=br-ex:ens160            <span class="hljs-comment">#OVN端口映射，就是云主机连接外网时通过那块网卡进行数据包的转发</span><br>-------------------------<br><br><span class="hljs-comment">#开始安装</span><br>packstack --answer-file <span class="hljs-regexp">/root/</span>openstack-answer.txt <br></code></pre></td></tr></table></figure><p>然后你就可以通过<a href="http://192.168.48.100/dashboard%E8%AE%BF%E9%97%AE%E9%A1%B5%E9%9D%A2%E4%BA%86">http://192.168.48.100/dashboard访问页面了</a></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 8 stream</tag>
      
      <tag>OpenStack</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ceph集群分布式集群</title>
    <link href="/2023/12/22/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/"/>
    <url>/2023/12/22/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Ceph集群分布式集群"><a href="#Ceph集群分布式集群" class="headerlink" title="Ceph集群分布式集群"></a>Ceph集群分布式集群</h1><p>本篇教程针对<font color='red'>外部</font>ceph集群介绍教程，如果是给予K8S<font color='red'>内部</font>ceph请前往<a href="https://blog.qianyios.top/2023/11/19/rook%E9%83%A8%E7%BD%B2ceph/">基于K8S1.28.2实验rook部署ceph - 严千屹博客 (qianyios.top)</a></p><h2 id="机器拓扑"><a href="#机器拓扑" class="headerlink" title="机器拓扑"></a>机器拓扑</h2><table><thead><tr><th>主机名</th><th>ip</th><th>硬盘1</th><th>硬盘2</th><th>内存</th><th>cpu</th><th>软件</th><th>OS</th></tr></thead><tbody><tr><td>ceph1</td><td>192.168.48.101</td><td>100G</td><td>100G</td><td>2G</td><td>1v</td><td>Docker 24.0.7<br />epel最新版本<br />ceph（reef、18.2.0）</td><td>Centos stream 9</td></tr><tr><td>ceph2</td><td>192.168.48.102</td><td>100G</td><td>100G</td><td>2G</td><td>1v</td><td>Docker 24.0.7<br />epel最新版本<br />ceph（reef、18.2.0）</td><td>Centos stream 9</td></tr><tr><td>ceph3</td><td>192.168.48.103</td><td>100G</td><td>100G</td><td>2G</td><td>1v</td><td>Docker 24.0.7<br />epel最新版本<br />ceph（reef、18.2.0）</td><td>Centos stream 9</td></tr></tbody></table><p>已经<font color='red'>测试过</font>了，<font color='red'>最小配置</font>，可以满足<font color='red'>毕设</font>需求，后面可自行根据需要调整</p><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/ee4eca61c8df08d1a105e1140609e13f697559838.png" alt="image-20231222141636094"></p><h2 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h2><h3 id="系统基础配置"><a href="#系统基础配置" class="headerlink" title="系统基础配置"></a>系统基础配置</h3><p>配置主机名</p><p>ceph1</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">ceph1</span> &amp;&amp; <span class="hljs-string">bash</span><br></code></pre></td></tr></table></figure><p>ceph2</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">ceph2</span> &amp;&amp; <span class="hljs-string">bash</span><br></code></pre></td></tr></table></figure><p>ceph3</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">ceph3</span> &amp;&amp; <span class="hljs-string">bash</span><br></code></pre></td></tr></table></figure><p><font color='red'>操作节点[所有节点]</font></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#关闭防火墙和selinux</span><br>sed -i <span class="hljs-string">&quot;s#SELINUX=enforcing#SELINUX=disabled#g&quot;</span> <span class="hljs-regexp">/etc/</span>selinux/config<br>setenforce <span class="hljs-number">0</span><br>systemctl disable --now firewalld<br><br><span class="hljs-comment">#设置时间同步</span><br>yum install chrony -y<br>systemctl start chronyd<br>systemctl enable chronyd<br>chronyc sources<br>chronyc sources<br><br><span class="hljs-comment">#配置hosts</span><br>cat &lt;&lt; EOF &gt; <span class="hljs-regexp">/etc/</span>hosts<br><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>   localhost localhost.localdomain localhost4 localhost4.localdomain4<br>::<span class="hljs-number">1</span>         localhost localhost.localdomain localhost6 localhost6.localdomain6<br><span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> ceph1<br><span class="hljs-number">192.168</span>.<span class="hljs-number">48.102</span> ceph2<br><span class="hljs-number">192.168</span>.<span class="hljs-number">48.103</span> ceph3<br>EOF<br><br><span class="hljs-comment">#配置yum</span><br>mkdir repo.bak<br>mv <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/* repo.bak/</span><br>cat &gt; <span class="hljs-regexp">/etc/yum</span>.repos.d/centos9.repo&lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>[BaseOS]<br>name=Baseos<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/centos-stream/</span><span class="hljs-number">9</span>-stream<span class="hljs-regexp">/BaseOS/</span>x86_64/os<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br><br>[AppStream]<br>name=AppStream<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/centos-stream/</span><span class="hljs-number">9</span>-stream<span class="hljs-regexp">/AppStream/</span>x86_64<span class="hljs-regexp">/os/</span><br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br><br>[extras-common]<br>name=extras-common<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/centos-stream/</span>SIGs<span class="hljs-regexp">/9-stream/</span>extras<span class="hljs-regexp">/x86_64/</span>extras-common/<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">0</span><br><br>[ceph-reef]<br>name=ceph-reef<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ceph/</span>rpm-reef<span class="hljs-regexp">/el9/</span>x86_64/<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br><br>[epel]<br>name=epel<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/epel/</span><span class="hljs-number">9</span><span class="hljs-regexp">/Everything/</span>x86_64/<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br><br>[ceph-reef-noarch]<br>name=ceph-reef-noarch<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ceph/</span>rpm-reef<span class="hljs-regexp">/el9/</span>noarch/<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br><br>EOF<br><br><span class="hljs-comment"># 内核参数设置：开启IP转发，允许iptables对bridge的数据进行处理 </span><br>cat &lt;&lt; EOF &gt; <span class="hljs-regexp">/etc/</span>sysctl.conf <br>net.ipv4.ip_nonlocal_bind = <span class="hljs-number">1</span><br>net.ipv4.ip_forward = <span class="hljs-number">1</span><br>EOF<br><br>cat &lt;&lt; EOF &gt; <span class="hljs-regexp">/etc/</span>sysctl.d/ceph.conf <br>kernel.pid_max = <span class="hljs-number">4194303</span> <br>vm.swappiness = <span class="hljs-number">0</span> <br>EOF<br><br>sysctl -p<br><br><span class="hljs-comment">#更新yum源</span><br>dnf clean all &amp;&amp; dnf makecache<br><br><span class="hljs-comment">#安装软件</span><br>dnf install vim net-tools wget lsof python3 yum-utils device-mapper-persistent-data lvm2 -y<br></code></pre></td></tr></table></figure><h3 id="配置ssh免密"><a href="#配置ssh免密" class="headerlink" title="配置ssh免密"></a>配置ssh免密</h3><p><font color='red'>操作节点[ceph1]</font></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">yum</span> <span class="hljs-string">install</span> <span class="hljs-string">-y</span> <span class="hljs-string">sshpass</span> <br><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">sshmianmi.sh</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment"># 目标主机列表</span><br><span class="hljs-string">hosts=(&quot;ceph1&quot;</span> <span class="hljs-string">&quot;ceph2&quot;</span> <span class="hljs-string">&quot;ceph3&quot;</span><span class="hljs-string">)</span>  <span class="hljs-comment">#就改这个</span><br><span class="hljs-comment"># 主机密码</span><br><span class="hljs-string">password=&quot;123456&quot;</span>                    <span class="hljs-comment">#就改这个</span><br><span class="hljs-comment"># 生成 SSH 密钥对</span><br><span class="hljs-string">ssh-keygen</span> <span class="hljs-string">-t</span> <span class="hljs-string">rsa</span> <span class="hljs-string">-N</span> <span class="hljs-string">&quot;&quot;</span> <span class="hljs-string">-f</span> <span class="hljs-string">~/.ssh/id_rsa</span><br><br><span class="hljs-comment"># 循环遍历目标主机</span><br><span class="hljs-string">for</span> <span class="hljs-string">host</span> <span class="hljs-string">in</span> <span class="hljs-string">&quot;$&#123;hosts[@]&#125;&quot;</span><br><span class="hljs-string">do</span><br>    <span class="hljs-comment"># 复制公钥到目标主机</span><br>    <span class="hljs-string">sshpass</span> <span class="hljs-string">-p</span> <span class="hljs-string">&quot;$password&quot;</span> <span class="hljs-string">ssh-copy-id</span> <span class="hljs-string">-o</span> <span class="hljs-string">StrictHostKeyChecking=no</span> <span class="hljs-string">&quot;$host&quot;</span><br>    <br>    <span class="hljs-comment"># 验证免密登录</span><br>    <span class="hljs-string">sshpass</span> <span class="hljs-string">-p</span> <span class="hljs-string">&quot;$password&quot;</span> <span class="hljs-string">ssh</span> <span class="hljs-string">-o</span> <span class="hljs-string">StrictHostKeyChecking=no</span> <span class="hljs-string">&quot;$host&quot;</span> <span class="hljs-string">&quot;echo &#x27;免密登录成功&#x27;&quot;</span><br><span class="hljs-string">done</span><br><span class="hljs-string">EOF</span><br><br><span class="hljs-string">sh</span> <span class="hljs-string">sshmianmi.sh</span><br></code></pre></td></tr></table></figure><h2 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h2><p><font color='red'>操作节点[所有节点]</font></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs awk">yum-config-manager --add-repo https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/docker-ce/</span>linux<span class="hljs-regexp">/centos/</span>docker-ce.repo<br>dnf install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin<br>systemctl enable --now docker<br>mkdir -p <span class="hljs-regexp">/etc/</span>docker<br>tee <span class="hljs-regexp">/etc/</span>docker/daemon.json &lt;&lt;-<span class="hljs-string">&#x27;EOF&#x27;</span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://pw860av8.mirror.aliyuncs.com&quot;</span>]<br>&#125;<br>EOF<br>systemctl daemon-reload<br>systemctl restart docker<br>docker info<br></code></pre></td></tr></table></figure><h2 id="安装cephadm"><a href="#安装cephadm" class="headerlink" title="安装cephadm"></a>安装cephadm</h2><p><font color='red'>操作节点[所有节点]</font></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">dnf install <span class="hljs-comment">--assumeyes cephadm</span><br>which cephadm<br></code></pre></td></tr></table></figure><h2 id="安装ceph集群"><a href="#安装ceph集群" class="headerlink" title="安装ceph集群"></a>安装ceph集群</h2><h3 id="启动一个集群"><a href="#启动一个集群" class="headerlink" title="启动一个集群"></a>启动一个集群</h3><p><font color='red'>操作节点[ceph1]</font></p><p>在 ceph1 上启动 cephadm bootstrap</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">cephadm</span> bootstrap --mon-ip <span class="hljs-number">192.168.48.101</span><br></code></pre></td></tr></table></figure><p>上述指令会为我们完成以下工作：</p><ul><li>创建mon</li><li>创建ssh key并且添加到 &#x2F;root&#x2F;.ssh&#x2F;authorized_keys 文件</li><li>将集群间通信的最小配置写入&#x2F;etc&#x2F;ceph&#x2F;ceph.conf</li><li>将client.admin管理secret密钥的副本写入&#x2F;etc&#x2F;ceph&#x2F;ceph.client.admin.keyring。</li><li>将公用密钥的副本写入&#x2F;etc&#x2F;ceph&#x2F;ceph.pub</li></ul><p>执行结果如下：</p><p>框框中的是ceph页面的账号密码</p><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/452e9a762119d38b6bf2d09c4cf5871f697559838.png" alt="image-20231222140050214"></p><p><font color='red'>访问页面并用上面的账号密码登入，就会提示你修改密码，修改成你自己的密码</font></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span>:<span class="hljs-number">8443</span>/<br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/06d8cf6ce8eee0d48374ed664e384c67697559838.png" alt="image-20231222140150112"></p><p>运行ceph查看集群健康状态</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@ceph1</span> ~]<span class="hljs-meta"># ceph -s</span><br>bash: ceph: command <span class="hljs-literal">not</span> found<br></code></pre></td></tr></table></figure><p>这里会显示<font color='red'>报错</font>，我们要在<font color='red'>所有节点</font>需要安装ceph-common</p><p><font color='red'>操作节点[所有节点]</font></p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs smali">cephadm<span class="hljs-built_in"> add-repo </span>--release reef<br>dnf install -y liburing<br><span class="hljs-comment"># 安装ceph-common包</span><br>dnf install -y librbd1 ceph-common<br><span class="hljs-comment"># 查看ceph-common是否正常安装</span><br>ceph -v<br></code></pre></td></tr></table></figure><p>再次在<font color='red'>ceph1</font>查看集群健康状况</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ceph -s</span><br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/1b57598993c2effa3fb0f3c7f30edb34697559838.png" alt="image-20231222140331471"></p><p>这里有报错提示<font color='red'>HEALTH_WARN</font>暂时不用管</p><h3 id="添加ceph节点"><a href="#添加ceph节点" class="headerlink" title="添加ceph节点"></a>添加ceph节点</h3><p><font color='red'>操作节点[ceph1]</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#拷贝ceph1的Ceph 集群的公钥至其他节点，以便加入集群</span><br>ssh-copy-id -f -i /etc/ceph/ceph.pub root@ceph2<br>ssh-copy-id -f -i /etc/ceph/ceph.pub root@ceph3<br><span class="hljs-comment"># 添加ceph节点</span><br>ceph orch host add ceph2 192.168.48.102<br>ceph orch host add ceph3 192.168.48.103<br><br>删除可以用<br>ceph orch host <span class="hljs-built_in">rm</span> ceph3<br><span class="hljs-comment"># 查看现在的节点情况</span><br>ceph orch host <span class="hljs-built_in">ls</span><br><span class="hljs-comment"># 添加label后可以允许该节点运行ceph cli（比如cephadm shell命令）</span><br>ceph orch host label add ceph2 _admin<br>ceph orch host label add ceph3 _admin<br><span class="hljs-comment"># 设置 mon 节点</span><br>ceph orch apply mon 3<br>ceph orch apply mon ceph1,ceph2,ceph3<br><span class="hljs-comment"># 查看 mon 详情</span><br>[root@ceph1 ~]<span class="hljs-comment">#  ceph mon dump</span><br>epoch 3<br>fsid 233c64c8-9e76-11ee-86fc-000c2965f5d0<br>last_changed 2023-12-19T14:13:02.000188+0000<br>created 2023-12-19T13:56:10.829244+0000<br>min_mon_release 18 (reef)<br>election_strategy: 1<br>0: [v2:192.168.48.101:3300/0,v1:192.168.48.101:6789/0] mon.ceph1<br>1: [v2:192.168.48.103:3300/0,v1:192.168.48.103:6789/0] mon.ceph3<br>2: [v2:192.168.48.102:3300/0,v1:192.168.48.102:6789/0] mon.ceph2<br>dumped monmap epoch 3<br><br><span class="hljs-comment"># 设置 mgr 节点</span><br>ceph orch apply mgr 3<br>ceph orch apply mgr ceph1,ceph2,ceph3<br>[root@ceph1 ~]<span class="hljs-comment">#  ceph -s</span><br>  cluster:<br>    <span class="hljs-built_in">id</span>:     233c64c8-9e76-11ee-86fc-000c2965f5d0<br>    health: HEALTH_WARN<br>            OSD count 0 &lt; osd_pool_default_size 3<br><br>  services:<br>    mon: 3 daemons, quorum ceph1,ceph3,ceph2 (age 7m)<br>    mgr: ceph1.gtejkn(active, since 18m), standbys: ceph2.rvzimn, ceph3.pbajtu<br>    osd: 0 osds: 0 up, 0 <span class="hljs-keyword">in</span><br><br>  data:<br>    pools:   0 pools, 0 pgs<br>    objects: 0 objects, 0 B<br>    usage:   0 B used, 0 B / 0 B avail<br>    pgs:<br><br></code></pre></td></tr></table></figure><h3 id="添加OSD"><a href="#添加OSD" class="headerlink" title="添加OSD"></a>添加OSD</h3><p><font color='red'>操作节点[ceph1]</font></p><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/4b77a3a2f519ba8c01195299653efa24697559838.png" alt="image-20231222141243608"></p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade">ceph orch daemon add osd ceph1:<span class="hljs-regexp">/dev/</span>nvme0n2<br>ceph orch daemon add osd ceph2:<span class="hljs-regexp">/dev/</span>nvme0n2<br>ceph orch daemon add osd ceph3:<span class="hljs-regexp">/dev/</span>nvme0n2<br></code></pre></td></tr></table></figure><p>查看状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@ceph1 ~]<span class="hljs-comment"># ceph -s</span><br>  cluster:<br>    <span class="hljs-built_in">id</span>:     233c64c8-9e76-11ee-86fc-000c2965f5d0<br>    health: HEALTH_OK<br><br>  services:<br>    mon: 3 daemons, quorum ceph1,ceph3,ceph2 (age 25m)<br>    mgr: ceph1.gtejkn(active, since 36m), standbys: ceph2.rvzimn, ceph3.pbajtu<br>    osd: 3 osds: 3 up (since 20s), 3 <span class="hljs-keyword">in</span> (since 33s)<br><br>  data:<br>    pools:   1 pools, 1 pgs<br>    objects: 2 objects, 449 KiB<br>    usage:   81 MiB used, 300 GiB / 300 GiB avail<br>    pgs:     1 active+clean<br><br>[root@ceph1 ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><p><font color='green'>至此ceph集群部署成果</font></p><h2 id="ceph存储的使用"><a href="#ceph存储的使用" class="headerlink" title="ceph存储的使用"></a>ceph存储的使用</h2><table><thead><tr><th align="left">存储类型</th><th align="left">特征</th><th align="left">应用场景</th><th align="left">典型设备</th></tr></thead><tbody><tr><td align="left">块存储（RBD）</td><td align="left">存储速度较快 不支持共享存储 [<strong>ReadWriteOnce</strong>]</td><td align="left">虚拟机硬盘</td><td align="left">硬盘 Raid</td></tr><tr><td align="left">文件存储（CephFS）</td><td align="left">存储速度慢（需经操作系统处理再转为块存储） 支持共享存储 [<strong>ReadWriteMany</strong>]</td><td align="left">文件共享</td><td align="left">FTP NFS</td></tr><tr><td align="left">对象存储（Object）</td><td align="left">具备块存储的读写性能和文件存储的共享特性 操作系统不能直接访问，只能通过应用程序级别的API访问</td><td align="left">图片存储 视频存储</td><td align="left">OSS</td></tr></tbody></table><h3 id="块存储-RBD"><a href="#块存储-RBD" class="headerlink" title="块存储(RBD)"></a>块存储(RBD)</h3><h4 id="配置rbd"><a href="#配置rbd" class="headerlink" title="配置rbd"></a>配置rbd</h4><p><font color='red'>操作节点[ceph1]</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs bash">------------------------------------------------------<br><span class="hljs-comment">#创建名为qianyios-rbd的存储池pool</span><br>ceph osd pool create qianyios-rbd 128 128 <br><br>[root@ceph1 ~]<span class="hljs-comment"># ceph osd pool create qianyios-rbd 128 128</span><br>pool <span class="hljs-string">&#x27;qianyios-rbd&#x27;</span> created<br><br><br><span class="hljs-comment">#删除pool用这个</span><br>ceph osd pool delete qianyios-rbd qianyios-rbd --yes-i-really-really-mean-it<br>------------------------------------------------------<br><span class="hljs-comment">#查看列表</span><br>ceph osd pool <span class="hljs-built_in">ls</span><br><br>[root@ceph1 ~]<span class="hljs-comment"># ceph osd pool ls</span><br>.mgr<br>qianyios-rbd<br>------------------------------------------------------<br><span class="hljs-comment">#将类型为存储池的pool（qianyios-rbd）转换为rbd类型</span><br>ceph osd pool application <span class="hljs-built_in">enable</span> qianyios-rbd rbd<br><br>[root@ceph1 ~]<span class="hljs-comment"># ceph osd pool application enable qianyios-rbd rbd</span><br>enabled application <span class="hljs-string">&#x27;rbd&#x27;</span> on pool <span class="hljs-string">&#x27;qianyios-rbd&#x27;</span><br><br>------------------------------------------------------<br><span class="hljs-comment">#初始化qianyios-rbd存储池</span><br>rbd pool init qianyios-rbd<br>------------------------------------------------------<br><span class="hljs-comment">#创建一个名为 &quot;qy-rbd-img&quot; 的 RBD 镜像，存储在 &quot;qianyios-rbd&quot; 存储池中，镜像的大小为 10GB。</span><br>rbg create -p qianyios-rbd --image qy-rbd-img --size 10G<br>或者（二选一）<br>rbd create --size 10G qianyios-rbd/qy-rbd-img<br><span class="hljs-comment">#删除镜像用这个</span><br>rbd <span class="hljs-built_in">rm</span> qianyios-rbd/qy-rbd-img<br><br>------------------------------------------------------<br><span class="hljs-comment">#查看创建状态</span><br>rbd <span class="hljs-built_in">ls</span> qianyios-rbd<br><br>rbd info qianyios-rbd/qy-rbd-img<br><br>[root@ceph1 ~]<span class="hljs-comment"># rbd ls qianyios-rbd</span><br>qy-rbd-img<br>[root@ceph1 ~]<span class="hljs-comment"># rbd info qianyios-rbd/qy-rbd-img</span><br>rbd image <span class="hljs-string">&#x27;qy-rbd-img&#x27;</span>:<br>        size 10 GiB <span class="hljs-keyword">in</span> 2560 objects<br>        order 22 (4 MiB objects)<br>        snapshot_count: 0<br>        <span class="hljs-built_in">id</span>: 8589e2720f1f<br>        block_name_prefix: rbd_data.8589e2720f1f<br>        format: 2<br>        features: layering, exclusive-lock, object-map, fast-diff, deep-flatten<br>        op_features:<br>        flags:<br>        create_timestamp: Thu Dec 21 23:09:33 2023<br>        access_timestamp: Thu Dec 21 23:09:33 2023<br>        modify_timestamp: Thu Dec 21 23:09:33 2023<br><br>------------------------------------------------------<br><span class="hljs-comment"># 创建rbd 用户key（验证文件）</span><br><span class="hljs-comment">#创建一个名为 &quot;qianyios-user&quot; 的客户端，并为其授予读写qianyios-rbd存储池的权限</span><br>ceph auth get-or-create client.qianyios-user mon <span class="hljs-string">&#x27;profile rbd&#x27;</span> osd <span class="hljs-string">&#x27;profile rbd pool=qianyios-rbd&#x27;</span> mgr <span class="hljs-string">&#x27;profile rbd pool=qianyios-rbd&#x27;</span><br><span class="hljs-comment"># output会输出以下内容</span><br>[client.qianyios-user]<br>        key = AQDKVYRl1nZ8ARAAvhXZojmroyy+YIb9dnTGSw==<br><br>ceph auth get client.qianyios-user -o /root/ceph.client.qianyios-user.keyring<br><br>[root@ceph1 ~]<span class="hljs-comment"># cat /root/ceph.client.qianyios-user.keyring</span><br>[client.qianyios-user]<br>        key = AQDKVYRl1nZ8ARAAvhXZojmroyy+YIb9dnTGSw==<br>        caps mgr = <span class="hljs-string">&quot;profile rbd pool=qianyios-rbd&quot;</span><br>        caps mon = <span class="hljs-string">&quot;profile rbd&quot;</span><br>        caps osd = <span class="hljs-string">&quot;profile rbd pool=qianyios-rbd&quot;</span><br>------------------------------------------------------<br></code></pre></td></tr></table></figure><p><font color='red'>!讲解一下这个创建用户key（验证文件）</font></p><ol><li><p>讲解：通过这个命令，会创建一个用户，并分别指定这个用户对mon、osd、mgr的权限。如果不加pool&#x3D;xxx，则这个用户能管理整个守护进程。</p></li><li><p>mon的权限必须是mon ‘profile rbd’，因为Mon服务本身就是只读的，你再限制一个只读权限，脱裤子放屁。 </p></li><li><p>假设你写了 osd ‘profile rbd’，则用户能管理所有pool的osd设备。</p></li><li><p>假设你写了osd ‘profile rbd pool&#x3D;xxx’，则这个用户可以读写名叫xxx的pool的osd设备。</p></li><li><p>假设你写了osd ‘profile rbd-read-only pool&#x3D;xxx’，则这个用户只能读取名叫xxx的pool中的osd数据，不能写入。</p></li><li><p>mgr同理，但是最好不要写mgr ‘profile rbd’，否则A池的管理员能够关闭B池的librados接口，那就糟糕了。</p></li></ol><p><font color='red'>举例：</font></p><ol><li>创建一个volumes用户，该用户对volumes池拥有读写权限</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ceph auth get-or-create client.volumes mon <span class="hljs-string">&#x27;profile rbd&#x27;</span> osd <span class="hljs-string">&#x27;profile rbd pool=volumes&#x27;</span> mgr <span class="hljs-string">&#x27;profile rbd pool=volumes&#x27;</span><br></code></pre></td></tr></table></figure><ol start="2"><li>创建一个volumes用户，该用户对volumes池拥有只读权限。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ceph auth get-or-create client.volumes mon <span class="hljs-string">&#x27;profile rbd&#x27;</span> osd <span class="hljs-string">&#x27;profile rbd-read-only pool=volumes&#x27;</span> mgr <span class="hljs-string">&#x27;profile rbd pool=volumes&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="客户端挂载"><a href="#客户端挂载" class="headerlink" title="客户端挂载"></a>客户端挂载</h4><p>这里新开一台客户机centos stream 9，这个客户端可以是你的任何一台机要挂载的机子</p><h5 id="添加yum"><a href="#添加yum" class="headerlink" title="添加yum"></a>添加yum</h5><p><font color='red'>操作节点[test]测试机</font></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir repo.bak<br>mv <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/* repo.bak/</span><br>cat &gt; <span class="hljs-regexp">/etc/yum</span>.repos.d/centos9.repo&lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>[BaseOS]<br>name=Baseos<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/centos-stream/</span><span class="hljs-number">9</span>-stream<span class="hljs-regexp">/BaseOS/</span>x86_64/os<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br><br>[AppStream]<br>name=AppStream<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/centos-stream/</span><span class="hljs-number">9</span>-stream<span class="hljs-regexp">/AppStream/</span>x86_64<span class="hljs-regexp">/os/</span><br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br><br>[extras-common]<br>name=extras-common<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/centos-stream/</span>SIGs<span class="hljs-regexp">/9-stream/</span>extras<span class="hljs-regexp">/x86_64/</span>extras-common/<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">0</span><br><br>[ceph-reef]<br>name=ceph-reef<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ceph/</span>rpm-reef<span class="hljs-regexp">/el9/</span>x86_64/<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br><br>[epel]<br>name=epel<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/epel/</span><span class="hljs-number">9</span><span class="hljs-regexp">/Everything/</span>x86_64/<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br><br>[ceph-reef-noarch]<br>name=ceph-reef-noarch<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ceph/</span>rpm-reef<span class="hljs-regexp">/el9/</span>noarch/<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br><br>EOF<br>dnf clean all &amp;&amp; dnf makecache<br></code></pre></td></tr></table></figure><h5 id="客户端安装cephadm和ceph-common"><a href="#客户端安装cephadm和ceph-common" class="headerlink" title="客户端安装cephadm和ceph-common"></a>客户端安装cephadm和ceph-common</h5><p><font color='red'>操作节点[test]测试机</font></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">dnf</span> install -y cephadm ceph-<span class="hljs-meta">common</span><br></code></pre></td></tr></table></figure><h5 id="拷贝ceph1的证书至客户端"><a href="#拷贝ceph1的证书至客户端" class="headerlink" title="拷贝ceph1的证书至客户端"></a>拷贝ceph1的证书至客户端</h5><p>把ceph1创建的<code>ceph.client.qianyios-user.keyring </code>和<code>ceph.conf</code>复制到客户端（192.168.48.128）</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">scp <span class="hljs-regexp">/root/</span>ceph.client.qianyios-user.keyring <span class="hljs-regexp">/etc/</span>ceph<span class="hljs-regexp">/ceph.conf 192.168.48.128:/</span>etc<span class="hljs-regexp">/ceph/</span><br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/8dfd15373ce9782a78fce4cd6c6fab04697559838.png" alt="image-20231221234526458"></p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@test ~]<span class="hljs-comment"># ll /etc/ceph/</span><br>total 12<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 185 </span>Dec<span class="hljs-number"> 21 </span>23:45 ceph.client.qianyios-user.keyring<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 283 </span>Dec<span class="hljs-number"> 21 </span>23:45 ceph.conf<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 92 </span>Dec<span class="hljs-number"> 12 </span>08:01 rbdmap<br>[root@test ~]<span class="hljs-comment">#</span><br><br></code></pre></td></tr></table></figure><h5 id="开始挂载"><a href="#开始挂载" class="headerlink" title="开始挂载"></a>开始挂载</h5><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">lsblk</span><br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/7b9e98b0b89aaee9ebe74e3b00e327c9697559838.png" alt="image-20231221234732781"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#挂载块存储</span><br>rbd map qianyios-rbd/qy-rbd-img --keyring /etc/ceph/ceph.client.qianyios-user.keyring --<span class="hljs-built_in">id</span> qianyios-user<br>-----<br>/dev/rbd0<br>-----<br>lsblk<br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/beeceb41666f2a645bae6ef99ea31e79697559838.png" alt="image-20231221235206886"></p><p>此时的&#x2F;dev&#x2F;rbd0并不能使用，我们需要格式化，并且挂载到本机</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#格式化</span><br>mkfs.xfs <span class="hljs-regexp">/dev/</span>rbd0<br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/2895454912e2a32aef8bd9a44bc84524697559838.png" alt="image-20231221235300388"></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#创建挂载点</span><br>mkdir <span class="hljs-regexp">/opt/</span>qianyios-rbd<br>mount <span class="hljs-regexp">/dev/</span>rbd0 <span class="hljs-regexp">/opt/</span>qianyios-rbd<br>echo <span class="hljs-string">&quot;qianyios-rbd&quot;</span> &gt; <span class="hljs-regexp">/opt/</span>qianyios-rbd.txt<br>cat <span class="hljs-regexp">/opt/</span>qianyios-rbd.txt<br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/e5aeda5d2c58e59c16208e2424cacc38697559838.png" alt="image-20231221235710235"></p><h5 id="取消挂载"><a href="#取消挂载" class="headerlink" title="取消挂载"></a>取消挂载</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">umount <span class="hljs-regexp">/opt/</span>qianyios-rbd<br>rbd unmap qianyios-rbd/qy-rbd-img<br>lsblk<br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/6c15b24a872dc2c10e18c919d93f4be6697559838.png" alt="image-20231221235845353"></p><h3 id="文件存储-CephFS"><a href="#文件存储-CephFS" class="headerlink" title="文件存储(CephFS)"></a>文件存储(CephFS)</h3><h4 id="创建cephfs"><a href="#创建cephfs" class="headerlink" title="创建cephfs"></a>创建cephfs</h4><p>部署元数据服务器，创建一个CephFS(文件系统), 名字为qianyios-fs</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dos">ceph <span class="hljs-built_in">fs</span> volume create qianyios-<span class="hljs-built_in">fs</span> --placement=&quot;<span class="hljs-number">3</span> ceph1 ceph2 ceph3&quot;<br># 查看状态<br>ceph <span class="hljs-built_in">fs</span> volume ls<br>ceph orch ps --daemon-<span class="hljs-built_in">type</span> mds<br>ceph <span class="hljs-built_in">fs</span> status qianyios-<span class="hljs-built_in">fs</span><br>ceph mds stat<br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/f7d4c00cc9aa778e7644ec48f9295b50697559838.png" alt="image-20231222130830482"></p><h4 id="设置nfs高可用"><a href="#设置nfs高可用" class="headerlink" title="设置nfs高可用"></a>设置nfs高可用</h4><p>先生成nfs和nfs_ingress配置文件。其中nfs_ingress是为了nfs高可用配置的。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&lt;&lt;EOF</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">nfs.yaml</span><br><span class="hljs-attr">service_type:</span> <span class="hljs-string">nfs</span><br><span class="hljs-attr">service_id:</span> <span class="hljs-string">nkonfs</span><br><span class="hljs-attr">placement:</span><br>  <span class="hljs-attr">hosts:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">ceph1</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">ceph2</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">ceph3</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">2048</span><br><span class="hljs-string">EOF</span><br><br><span class="hljs-string">cat</span> <span class="hljs-string">&lt;&lt;EOF</span> <span class="hljs-string">&gt;nfs_ingress.yaml</span><br><span class="hljs-attr">service_type:</span> <span class="hljs-string">ingress</span><br><span class="hljs-attr">service_id:</span> <span class="hljs-string">nfs.nkonfs</span><br><span class="hljs-attr">placement:</span><br>  <span class="hljs-attr">count:</span> <span class="hljs-number">3</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">backend_service:</span> <span class="hljs-string">nfs.nkonfs</span><br>  <span class="hljs-attr">frontend_port:</span> <span class="hljs-number">2049</span><br>  <span class="hljs-attr">monitor_port:</span> <span class="hljs-number">9001</span><br>  <span class="hljs-attr">virtual_ip:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.200</span><span class="hljs-string">/24#高可用vip</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ceph orch apply -<span class="hljs-selector-tag">i</span> nfs<span class="hljs-selector-class">.yaml</span><br>ceph orch apply -<span class="hljs-selector-tag">i</span> nfs_ingress<span class="hljs-selector-class">.yaml</span><br><br>ceph orch ls <span class="hljs-attr">--service_name</span>=nfs<span class="hljs-selector-class">.nkonfs</span><br>ceph orch ls <span class="hljs-attr">--service_name</span>=ingress<span class="hljs-selector-class">.nfs</span><span class="hljs-selector-class">.nkonfs</span><br>ceph nfs cluster ls<br>ceph nfs cluster info nkonfs<br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/0c06c480d86468cb6fbd5af2477d7993697559838.png" alt="image-20231222131458220"></p><h4 id="导出nfs"><a href="#导出nfs" class="headerlink" title="导出nfs"></a>导出nfs</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ceph nfs <span class="hljs-built_in">export</span> create cephfs --cluster-id nkonfs --pseudo-path /qy-fs --fsname qianyios-fs<br><span class="hljs-comment"># 查看详情</span><br>ceph nfs <span class="hljs-built_in">export</span> <span class="hljs-built_in">info</span> nkonfs /qy-fs<br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/714155b3d6f26119cc937353e4d58155697559838.png" alt="image-20231222131516871"></p><h4 id="客户端挂载NFS"><a href="#客户端挂载NFS" class="headerlink" title="客户端挂载NFS"></a>客户端挂载NFS</h4><p>注意：只支持 NFS v4.0+ 的协议。<br>由于showmount 不支持 NFS v4，纯 NFSv4又不提供其他获取导出列表的方法，只能期望挂载的时候命令不要输错了。<br>在客户端执行以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">dnf install -y nfs-utils<br><span class="hljs-built_in">mkdir</span> /qy-fs-data<br>mount -t nfs -o nfsvers=4.1,proto=tcp 192.168.48.200:/qy-fs /qy-fs-data<br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/128567c29eeefce480d478ec756a75b2697559838.png" alt="image-20231222131709705"></p><h4 id="测试文件写入"><a href="#测试文件写入" class="headerlink" title="测试文件写入"></a>测试文件写入</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar zcf etc.tar.gz /etc<br> <br><span class="hljs-comment">#测试文件写入</span><br><span class="hljs-built_in">cp</span> etc.tar.gz /qy-fs-data/<br>ll /qy-fs-data/<br> <br><span class="hljs-comment">#生成500M大文件写入</span><br><span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=/qy-fs-data/testfile bs=1M count=500<br><br><span class="hljs-comment">#查看分区使用</span><br><span class="hljs-built_in">df</span> -h /fsdata<br></code></pre></td></tr></table></figure><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/c892100f0204746bde00a42e9659133c697559838.png" alt="image-20231222132148957"></p><h3 id="对象存储-RGW"><a href="#对象存储-RGW" class="headerlink" title="对象存储(RGW)"></a>对象存储(RGW)</h3><p><code>RGW（RADOS Gateway）</code>是Ceph存储系统的一部分，它提供了一个<code>对象存储服务</code></p><p><code>RGW</code>可以作为一个<code>独立的服务运行</code>，<code>也可以与Ceph集群的其他组件（如OSD和MON）一起部署</code>。</p><p><code>区域（zone）</code>: 一个ceph集群可以包含多个区域，一个区域只属于一个集群，一个区域可以有多个RGW</p><p><code>区域组（zonegroup）</code>：由一个或多个区域组成，包含一个主区域（master zone），其他区域称为Secondary Zone，区域组内的所有区域之间同步数据</p><p><code>域（realm）</code>: 同一个或多个区域组组成，包含一个主区域组，其他都次区域组。域中的所有rados网关都从位于主区域组和主区域中的rados网关拉取配置</p><h4 id="设置radosgw区域和用户"><a href="#设置radosgw区域和用户" class="headerlink" title="设置radosgw区域和用户"></a>设置radosgw区域和用户</h4><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/4c29c4111ef003546990e4512d6019df697559838.png" alt="image-20231220233812600"></p><p>在<font color='red'>所有节点</font>部署qianyios领域和qianyios-shenzhen 区域的rgw守护程序：</p><p><font color='red'>操作节点[所有节点]</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs bash">1.<span class="hljs-comment"># 如果尚未创建 realm（领域），请首先创建一个名字为qianyios的 realm（领域） ：</span><br>radosgw-admin realm create --rgw-realm=qianyios<br>radosgw-admin realm list<br><br>2.<span class="hljs-comment"># 接下来创建一个新的 zonegroup（区域组）：</span><br>radosgw-admin zonegroup create --rgw-zonegroup=qianyios-shenzhen  --master<br>radosgw-admin zonegroup list<br><br>3.<span class="hljs-comment">#接下来创建一个 zone：</span><br>radosgw-admin zone create --rgw-zonegroup=qianyios-shenzhen --rgw-zone=qianyios-shenzhen-zone1 --master<br><span class="hljs-comment">#这个命令用于创建一个名为 qianyios-shenzhen-zone1 的 RadosGW 区域（Zone），并将它归属于 qianyios-shenzhen 的区域组（Zone Group）。</span><br>radosgw-admin zone list<br><br>4.<span class="hljs-comment">#这个命令用于更新指定的 RadosGW 域（Realm）的周期（Period）。--rgw-realm=qianyios 参数指定要更新的 RadosGW 域的名称为 qianyios</span><br>radosgw-admin period update --rgw-realm=qianyios --commit<br><br><br>5.<span class="hljs-comment">#在 Ceph 集群中部署一个名为 qianyios-rgw 的 RadosGW 实例，并将其关联到指定的域（Realm）、区域组（Zone Group）和区域（Zone），并指定了存储位置。</span><br>ceph orch apply rgw qianyios-rgw --realm=qianyios --zonegroup=qianyios-shenzhen --zone=qianyios-shenzhen-zone1 --placement=<span class="hljs-string">&quot;3 ceph1 ceph2 ceph3&quot;</span> --port=8080<br><br><span class="hljs-comment">#删除实例用这个</span><br>ceph orch <span class="hljs-built_in">rm</span> rgw.qianyios-rgw<br><br>6.<span class="hljs-comment"># 查看各节点 rgw 是否启动</span><br>ceph orch ps --daemon-type rgw<br><br>7.<span class="hljs-comment"># 创建创建 radosgw 用户名为admin，显示名称为admin user</span><br>radosgw-admin user create --uid=<span class="hljs-string">&quot;admin&quot;</span> --display-name=<span class="hljs-string">&quot;admin user&quot;</span><br><br>8.<span class="hljs-comment"># 创建完成之后需要把access_key和secret_key保存下来，也可以使用下面的命令来查看</span><br>radosgw-admin user info --uid=admin<br><br><span class="hljs-string">&quot;keys&quot;</span>: [<br>        &#123;<br>            <span class="hljs-string">&quot;user&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>,<br>            <span class="hljs-string">&quot;access_key&quot;</span>: <span class="hljs-string">&quot;LAI14X0RJVJG3QGR16FP&quot;</span>,<br>            <span class="hljs-string">&quot;secret_key&quot;</span>: <span class="hljs-string">&quot;t11PVzqYtEvb22ajctD0U5tCN5d0CaDPkZENiqTb&quot;</span><br>        &#125;<br>    ],<br></code></pre></td></tr></table></figure><p>使用<a href="https://s3browser.com/">s3 browser点击这里访问官网下载软件</a>，将以上access_key,secret_key填上，可以正常连接，但是没有桶，手动创建一个桶，并上传文件，正常。</p><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/76a3ec58bebf509d1f3d142a7199d1cb697559838.png" alt="image-20231221001128450"></p><p>此时什么都没有，创建一个桶</p><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/3fd0f612edc0de586159ff4b9515acfe697559838.png" alt="image-20231221001200312"></p><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/8d6133baba34facea5a5023c32e0b8e5697559838.png" alt="image-20231221001228678"></p><p>在桌面创建一个test文件移进去</p><p><img src="/../img/Ceph%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E9%9B%86%E7%BE%A4/99676066de089ffb0795d766a676149f697559838.png" alt="image-20231221001351913"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 9 stream</tag>
      
      <tag>Ceph</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>K8S高可用集群（内部etcd）</title>
    <link href="/2023/12/02/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/"/>
    <url>/2023/12/02/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="K8S高可用集群（内部etcd）"><a href="#K8S高可用集群（内部etcd）" class="headerlink" title="K8S高可用集群（内部etcd）"></a>K8S高可用集群（内部etcd）</h1><p>以下会用到的资源<a href="https://www.123pan.com/s/MYnLVv-gLp4.html">K8s1.28.2（内外部etcd高可用）所需资源</a></p><h2 id="主机拓扑"><a href="#主机拓扑" class="headerlink" title="主机拓扑"></a>主机拓扑</h2><table><thead><tr><th>主机名</th><th>ip1（NAT）</th><th>系统</th><th>磁盘</th><th>内存</th></tr></thead><tbody><tr><td>master1</td><td>192.168.48.101</td><td>Centos7.9</td><td>100G</td><td>4G</td></tr><tr><td>master2</td><td>192.168.48.102</td><td>Centos7.9</td><td>100G</td><td>4G</td></tr><tr><td>master3</td><td>192.168.48.103</td><td>Centos7.9</td><td>100G</td><td>4G</td></tr><tr><td>node01</td><td>192.168.48.104</td><td>Centos7.9</td><td>100G</td><td>8G</td></tr></tbody></table><h2 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h2><p>centos通过单独安装，非克隆。安装完后进行基本环境的配置，配置一下几个方面：</p><ol><li>设置主机名</li><li>关闭NetworkManager、firewalld、dnsmasq、selinux</li><li>设置ens33</li><li>优化ssh</li><li>备份并新增清华yum源、epel源、docker-ce源、k8s源</li><li>更新yum源软件包缓存</li><li>修改history格式及记录数</li><li>添加hosts解析</li><li>关闭swap分区</li><li>安装chrony服务，并同步时间</li><li>配置limits.conf</li><li>安装必备工具</li><li>升级系统并重启</li></ol><p>操作主机：[master1,master2,master3,node01]</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -eq <span class="hljs-number">2</span> ];then<br>  echo <span class="hljs-string">&quot;设置主机名为：$1&quot;</span><br>  echo <span class="hljs-string">&quot;ens33设置IP地址为：192.168.48.$2&quot;</span><br><span class="hljs-keyword">else</span><br>  echo  <span class="hljs-string">&quot;使用方法：sh $0 主机名 主机位&quot;</span><br>  <span class="hljs-keyword">exit</span> <span class="hljs-number">2</span><br>fi<br><br>echo <span class="hljs-string">&quot;--------------------------------------&quot;</span><br>echo <span class="hljs-string">&quot;1.正在设置主机名：$1&quot;</span><br>hostnamectl set-hostname <span class="hljs-variable">$1</span><br><br><br>echo <span class="hljs-string">&quot;2.正在关闭NetworkManager、firewalld、dnsmasq、selinux&quot;</span><br>systemctl disable firewalld &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>systemctl disable NetworkManager &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>systemctl disable dnsmasq &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>systemctl stop firewalld<br>systemctl stop NetworkManager<br>systemctl stop dnsmasq<br>sed -i <span class="hljs-string">&quot;s#SELINUX=enforcing#SELINUX=disabled#g&quot;</span> <span class="hljs-regexp">/etc/</span>selinux/config<br>setenforce <span class="hljs-number">0</span><br><br><br>echo <span class="hljs-string">&quot;3.正在设置ens33：192.168.48.$2&quot;</span><br>cat &gt; <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/network-scripts/i</span>fcfg-ens33 &lt;&lt;EOF<br>TYPE=ensernet<br>BOOTPROTO=static<br>DEFROUTE=yes<br>NAME=ens33<br>DEVICE=ens33<br>ONBOOT=yes<br>IPADDR=<span class="hljs-number">192.168</span>.<span class="hljs-number">48</span>.<span class="hljs-variable">$2</span><br>NETMASK=<span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br>GATEWAY=<span class="hljs-number">192.168</span>.<span class="hljs-number">48.2</span><br>DNS1=<span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span><br>EOF<br>systemctl restart network<br><br><br>echo <span class="hljs-string">&quot;4.优化ssh&quot;</span><br>sed -i <span class="hljs-string">&quot;s#\#UseDNS yes#UseDNS no#g&quot;</span> <span class="hljs-regexp">/etc/</span>ssh/sshd_config<br>sed -i <span class="hljs-string">&quot;s#GSSAPIAuthentication yes#GSSAPIAuthentication no#g&quot;</span> <span class="hljs-regexp">/etc/</span>ssh/sshd_config<br>systemctl restart sshd<br><br>echo <span class="hljs-string">&quot;5.备份并新增清华yum源、epel源、docker-ce源、k8s源&quot;</span><br>rm -rf <span class="hljs-regexp">/etc/yum</span>.repos.d/*<br>cat &gt; <span class="hljs-regexp">/etc/yum</span>.repos.d/Centos-Base.repo &lt;&lt;EOF<br>[base]<br>name=CentOS-<span class="hljs-variable">$releasever</span> - Base<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/centos/</span>\<span class="hljs-variable">$releasever</span><span class="hljs-regexp">/os/</span>\<span class="hljs-variable">$basearch</span>/<br>gpgcheck=<span class="hljs-number">1</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-CentOS-<span class="hljs-number">7</span><br><br>[updates]<br>name=CentOS-<span class="hljs-variable">$releasever</span> - Updates<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/centos/</span>\<span class="hljs-variable">$releasever</span><span class="hljs-regexp">/updates/</span>\<span class="hljs-variable">$basearch</span>/<br>gpgcheck=<span class="hljs-number">1</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-CentOS-<span class="hljs-number">7</span><br><br>[extras]<br>name=CentOS-<span class="hljs-variable">$releasever</span> - Extras<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/centos/</span>\<span class="hljs-variable">$releasever</span><span class="hljs-regexp">/extras/</span>\<span class="hljs-variable">$basearch</span>/<br>gpgcheck=<span class="hljs-number">1</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-CentOS-<span class="hljs-number">7</span><br><br>[centosplus]<br>name=CentOS-<span class="hljs-variable">$releasever</span> - Plus<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/centos/</span>\<span class="hljs-variable">$releasever</span><span class="hljs-regexp">/centosplus/</span>\<span class="hljs-variable">$basearch</span>/<br>gpgcheck=<span class="hljs-number">1</span><br>enabled=<span class="hljs-number">0</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-CentOS-<span class="hljs-number">7</span><br>EOF<br><br>cat &gt; <span class="hljs-regexp">/etc/yum</span>.repos.d/epel.repo &lt;&lt;EOF<br>[epel]<br>name=Extra Packages <span class="hljs-keyword">for</span> Enterprise Linux <span class="hljs-number">7</span> - \<span class="hljs-variable">$basearch</span><br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/epel/</span><span class="hljs-number">7</span>/\<span class="hljs-variable">$basearch</span><br>failovermensod=priority<br>enabled=<span class="hljs-number">1</span><br>gpgcheck=<span class="hljs-number">1</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-EPEL-<span class="hljs-number">7</span><br><br>[epel-debuginfo]<br>name=Extra Packages <span class="hljs-keyword">for</span> Enterprise Linux <span class="hljs-number">7</span> - \<span class="hljs-variable">$basearch</span> - Debug<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/epel/</span><span class="hljs-number">7</span><span class="hljs-regexp">/\$basearch/</span>debug<br>failovermensod=priority<br>enabled=<span class="hljs-number">0</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-EPEL-<span class="hljs-number">7</span><br>gpgcheck=<span class="hljs-number">1</span><br><br>[epel-source]<br>name=Extra Packages <span class="hljs-keyword">for</span> Enterprise Linux <span class="hljs-number">7</span> - \<span class="hljs-variable">$basearch</span> - Source<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/epel/</span><span class="hljs-number">7</span>/SRPMS<br>failovermensod=priority<br>enabled=<span class="hljs-number">0</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-EPEL-<span class="hljs-number">7</span><br>gpgcheck=<span class="hljs-number">1</span><br>EOF<br><br>cat &gt; <span class="hljs-regexp">/etc/yum</span>.repos.d/kubernetes.repo &lt;&lt;EOF<br>[kubernetes]<br>name=Kubernetes<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/kubernetes/yum</span><span class="hljs-regexp">/repos/</span>kubernetes-el7-x86_64/<br>enabled=<span class="hljs-number">1</span><br>gpgcheck=<span class="hljs-number">0</span><br>repo_gpgcheck=<span class="hljs-number">0</span><br>gpgkey=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/kubernetes/yum</span><span class="hljs-regexp">/doc/yum</span>-key.gpg https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/kubernetes/yum</span><span class="hljs-regexp">/doc/</span>rpm-package-key.gpg<br>EOF<br><br>curl -o <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/docker-ce.repo https:/</span><span class="hljs-regexp">/mirrors.aliyun.com/</span>docker-ce<span class="hljs-regexp">/linux/</span>centos/docker-ce.repo<br><br>echo <span class="hljs-string">&quot;6.更新yum源软件包缓存&quot;</span><br> yum clean all &amp;&amp; yum makecache<br><br><br>echo <span class="hljs-string">&quot;7.修改history格式及记录数&quot;</span><br>sed -i <span class="hljs-string">&quot;s#HISTSIZE=1000##g&quot;</span> <span class="hljs-regexp">/etc/</span>profile<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>profile &lt;&lt;EOF<br>shopt -s histappend<br>USER_IP=`who -u am i <span class="hljs-number">2</span>&gt;<span class="hljs-regexp">/dev/</span>null| awk <span class="hljs-string">&#x27;&#123;print $NF&#125;&#x27;</span>|sed -e <span class="hljs-string">&#x27;s/[()]//g&#x27;</span>`<br>export HISTFILE=~/.commandline_warrior<br>export HISTTIMEFORMAT=<span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S  `whoami`@$&#123;USER_IP&#125;: &quot;</span><br>export HISTSIZE=<span class="hljs-number">200000</span><br>export HISTFILESIZE=<span class="hljs-number">1000000</span><br>export PROMPT_COMMAND=<span class="hljs-string">&quot;history -a&quot;</span><br>EOF<br>source <span class="hljs-regexp">/etc/</span>profile<br><br><br>echo <span class="hljs-string">&quot;8.添加hosts解析&quot;</span><br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>hosts &lt;&lt;EOF<br><span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> master1<br><span class="hljs-number">192.168</span>.<span class="hljs-number">48.102</span> master2<br><span class="hljs-number">192.168</span>.<span class="hljs-number">48.103</span> master3<br><span class="hljs-number">192.168</span>.<span class="hljs-number">48.104</span> node01<br>EOF<br><br><br>echo <span class="hljs-string">&quot;9.关闭swap分区&quot;</span><br>swapoff -a &amp;&amp; sysctl -w vm.swappiness=<span class="hljs-number">0</span> &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>sed -ri <span class="hljs-string">&#x27;/^[^#]*swap/s@^@#@&#x27;</span> <span class="hljs-regexp">/etc/</span>fstab<br><br><br>echo <span class="hljs-string">&quot;10.安装ntpdate服务，并同步时间&quot;</span><br>yum install chrony -y<br>systemctl start chronyd<br>systemctl enable chronyd<br>chronyc sources<br>chronyc sources<br><br>echo <span class="hljs-string">&quot;11.配置limits.conf&quot;</span><br>ulimit -SHn <span class="hljs-number">65535</span><br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>security/limits.conf &lt;&lt;EOF<br>* soft nofile <span class="hljs-number">65536</span><br>* hard nofile <span class="hljs-number">131072</span><br>* soft nproc <span class="hljs-number">65535</span><br>* hard nproc <span class="hljs-number">655350</span><br>* soft memlock unlimited<br>* hard memlock unlimited<br>EOF<br><br><br>echo <span class="hljs-string">&quot;12.必备工具安装&quot;</span><br>yum install wget psmisc vim net-tools telnet yum-utils device-mapper-persistent-data lvm2 git -y<br><br><br>echo <span class="hljs-string">&quot;13.升级系统并重启&quot;</span><br>yum update -y --exclude=kernel* &amp;&amp; reboot<br><br></code></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">sh </span>k8s_system_init.<span class="hljs-keyword">sh </span>主机名 主机位<br>[master1] <span class="hljs-keyword">sh </span>k8s_system_init.<span class="hljs-keyword">sh </span>master1 <span class="hljs-number">101</span><br><br>[master2] <span class="hljs-keyword">sh </span>k8s_system_init.<span class="hljs-keyword">sh </span>master2 <span class="hljs-number">102</span><br><br>[master3] <span class="hljs-keyword">sh </span>k8s_system_init.<span class="hljs-keyword">sh </span>master3 <span class="hljs-number">103</span><br><br>[node01] <span class="hljs-keyword">sh </span>k8s_system_init.<span class="hljs-keyword">sh </span>node01 <span class="hljs-number">104</span><br><br></code></pre></td></tr></table></figure><h3 id="配置ssh免密"><a href="#配置ssh免密" class="headerlink" title="配置ssh免密"></a>配置ssh免密</h3><p>操作节点[master1]</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install -y sshpass <br><span class="hljs-built_in">cat</span> &gt; sshmianmi.sh &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment"># 目标主机列表</span><br>hosts=(<span class="hljs-string">&quot;master1&quot;</span> <span class="hljs-string">&quot;master2&quot;</span> <span class="hljs-string">&quot;master3&quot;</span> <span class="hljs-string">&quot;node01&quot;</span>)<br><span class="hljs-comment"># 密码</span><br>password=<span class="hljs-string">&quot;123456&quot;</span><br><span class="hljs-comment"># 生成 SSH 密钥对</span><br>ssh-keygen -t rsa -N <span class="hljs-string">&quot;&quot;</span> -f ~/.ssh/id_rsa<br><br><span class="hljs-comment"># 循环遍历目标主机</span><br><span class="hljs-keyword">for</span> host <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;hosts[@]&#125;</span>&quot;</span><br><span class="hljs-keyword">do</span><br>    <span class="hljs-comment"># 复制公钥到目标主机</span><br>    sshpass -p <span class="hljs-string">&quot;<span class="hljs-variable">$password</span>&quot;</span> ssh-copy-id -o StrictHostKeyChecking=no <span class="hljs-string">&quot;<span class="hljs-variable">$host</span>&quot;</span><br>    <br>    <span class="hljs-comment"># 验证免密登录</span><br>    sshpass -p <span class="hljs-string">&quot;<span class="hljs-variable">$password</span>&quot;</span> ssh -o StrictHostKeyChecking=no <span class="hljs-string">&quot;<span class="hljs-variable">$host</span>&quot;</span> <span class="hljs-string">&quot;echo &#x27;免密登录成功&#x27;&quot;</span><br><span class="hljs-keyword">done</span><br>EOF<br><br>sh sshmianmi.sh<br></code></pre></td></tr></table></figure><h2 id="内核及ipvs模块配置"><a href="#内核及ipvs模块配置" class="headerlink" title="内核及ipvs模块配置"></a>内核及ipvs模块配置</h2><p>此步骤是升级内核、配置ipvs模块，开启一些k8s集群中必须的内核参数。配置一下几个方面：</p><ol><li>下载安装包到&#x2F;server&#x2F;soft</li><li>安装kernel</li><li>更改内核启动顺序</li><li>安装ipvsadm</li><li>配置ipvs模块</li><li>开启k8s集群必须的内核参数</li><li>配置完内核，重启服务器</li></ol><p>操作主机：[master1,master2,master3,node01]</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs gams">vi kernel_update.sh<br><br>#!/bin/bash<br>echo <span class="hljs-string">&quot;1.下载安装包到/server/soft&quot;</span><br>mkdir -p /server/soft ; cd /server/soft<br>wget https:<span class="hljs-comment">//mirrors.aliyun.com/elrepo/kernel/el7/x86_64/RPMS/kernel-ml-6.6.3-1.el7.elrepo.x86_64.rpm</span><br>wget https:<span class="hljs-comment">//mirrors.aliyun.com/elrepo/kernel/el7/x86_64/RPMS/kernel-ml-devel-6.6.3-1.el7.elrepo.x86_64.rpm</span><br><br><br>echo <span class="hljs-string">&quot;2.正在安装kernel&quot;</span><br>yum localinstall -y kernel-ml*<br><br><br>echo <span class="hljs-string">&quot;3.更改内核启动顺序&quot;</span><br>grub2-<span class="hljs-keyword">set</span>-default  <span class="hljs-comment">0 &amp;&amp; grub2-mkconfig -o</span> /etc/<span class="hljs-comment">grub2.cfg</span><br>grubby <span class="hljs-comment">--args=</span><span class="hljs-comment">&quot;user_namespace.enable=1&quot;</span> <span class="hljs-comment">--update-kernel=</span><span class="hljs-comment">&quot;$(grubby --default-kernel)&quot;</span><br><br><br>echo <span class="hljs-comment">&quot;4.输出现在内核版本信息&quot;</span><br>grubby <span class="hljs-comment">--default-kernel</span><br><br><br>echo <span class="hljs-comment">&quot;5.安装ipvsadm&quot;</span><br>yum <span class="hljs-comment">install ipvsadm ipset sysstat conntrack libseccomp -y &amp;&gt;</span> /dev/<span class="hljs-comment">null</span><br><br><br>echo <span class="hljs-comment">&quot;6.配置ipvs模块&quot;</span><br>modprobe <span class="hljs-comment">-- ip_vs</span><br>modprobe <span class="hljs-comment">-- ip_vs_rr</span><br>modprobe <span class="hljs-comment">-- ip_vs_wrr</span><br>modprobe <span class="hljs-comment">-- ip_vs_sh</span><br>modprobe <span class="hljs-comment">-- nf_conntrack</span><br><br>cat <span class="hljs-comment">&gt;&gt;</span> /etc/<span class="hljs-comment">modules-load.d</span>/ipvs.conf &lt;&lt;EOF<br>ip_vs<br>ip_vs_lc<br>ip_vs_wlc<br>ip_vs_rr<br>ip_vs_wrr<br>ip_vs_lblc<br>ip_vs_lblcr<br>ip_vs_dh<br>ip_vs_sh<br>ip_vs_fo<br>ip_vs_nq<br>ip_vs_sed<br>ip_vs_ftp<br>ip_vs_sh<br>nf_conntrack<br>ip_tables<br>ip_set<br>xt_set<br>ipt_set<br>ipt_rpfilter<br>ipt_REJECT<br>ipip<br>EOF<br>systemctl enable --now systemd-modules-load.service &amp;&gt; /<span class="hljs-comment">dev</span>/null<br><br><br>echo <span class="hljs-comment">&quot;7.开启k8s集群必须的内核参数&quot;</span><br>cat &lt;&lt;EOF &gt; /<span class="hljs-comment">etc</span>/sysctl.d/<span class="hljs-comment">k8s.conf</span><br>net.ipv4.ip_forward <span class="hljs-comment">= 1</span><br>net.bridge.bridge-nf-call-iptables <span class="hljs-comment">= 1</span><br>net.bridge.bridge-nf-call-ip6tables <span class="hljs-comment">= 1</span><br>fs.may_detach_mounts <span class="hljs-comment">= 1</span><br>net.ipv4.conf.all.route_localnet <span class="hljs-comment">= 1</span><br>vm.overcommit_memory=1<br>vm.panic_on_oom=0<br>fs.inotify.max_user_watches=89100<br>fs.file-max=52706963<br>fs.nr_open=52706963<br>net.netfilter.nf_conntrack_max=2310720<br><br>net.ipv4.tcp_keepalive_time <span class="hljs-comment">= 600</span><br>net.ipv4.tcp_keepalive_probes <span class="hljs-comment">= 3</span><br>net.ipv4.tcp_keepalive_intvl <span class="hljs-comment">=15</span><br>net.ipv4.tcp_max_tw_buckets <span class="hljs-comment">= 36000</span><br>net.ipv4.tcp_tw_reuse <span class="hljs-comment">= 1</span><br>net.ipv4.tcp_max_orphans <span class="hljs-comment">= 327680</span><br>net.ipv4.tcp_orphan_retries <span class="hljs-comment">= 3</span><br>net.ipv4.tcp_syncookies <span class="hljs-comment">= 1</span><br>net.ipv4.tcp_max_syn_backlog <span class="hljs-comment">= 16384</span><br>net.ipv4.ip_conntrack_max <span class="hljs-comment">= 65536</span><br>net.ipv4.tcp_max_syn_backlog <span class="hljs-comment">= 16384</span><br>net.ipv4.tcp_timestamps <span class="hljs-comment">= 0</span><br>net.core.somaxconn <span class="hljs-comment">= 16384</span><br>EOF<br>sysctl <span class="hljs-comment">--system</span><br><br><br>echo <span class="hljs-comment">&quot;8.配置完内核，重启服务器！&quot;</span><br>reboot<br><br></code></pre></td></tr></table></figure><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">sh</span> kernel_update.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><h2 id="检查ipvs加载、内核版本验证"><a href="#检查ipvs加载、内核版本验证" class="headerlink" title="检查ipvs加载、内核版本验证"></a>检查ipvs加载、内核版本验证</h2><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coq">lsmod | <span class="hljs-type">grep</span> --color=<span class="hljs-built_in">auto</span> -e ip_vs -e nf_conntrack<br>uname -a<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/7b6a9d8f90a78eced6f8ae1d42bbdec5697559838.png" alt="image-20231201233238841"></p><h2 id="高可用组件安装"><a href="#高可用组件安装" class="headerlink" title="高可用组件安装"></a>高可用组件安装</h2><h3 id="haproxy配置"><a href="#haproxy配置" class="headerlink" title="haproxy配置"></a>haproxy配置</h3><p>操作节点：[master1，master2,master3]</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> keepalived haproxy -y<br></code></pre></td></tr></table></figure><p>所有Master节点配置HAProxy，所有Master节点的HAProxy配置相同。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">操作节点：[master1，master2]</span><br><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">/etc/haproxy/haproxy.cfg</span> <span class="hljs-string">&lt;&lt;&quot;EOF&quot;</span><br><br><span class="hljs-string">global</span><br>  <span class="hljs-string">maxconn</span>  <span class="hljs-number">2000</span><br>  <span class="hljs-string">ulimit-n</span>  <span class="hljs-number">16384</span><br>  <span class="hljs-string">log</span>  <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> <span class="hljs-string">local0</span> <span class="hljs-string">err</span><br>  <span class="hljs-string">stats</span> <span class="hljs-string">timeout</span> <span class="hljs-string">30s</span><br><br><span class="hljs-string">defaults</span><br>  <span class="hljs-string">log</span> <span class="hljs-string">global</span><br>  <span class="hljs-string">mode</span>  <span class="hljs-string">http</span><br>  <span class="hljs-string">option</span>  <span class="hljs-string">httplog</span><br>  <span class="hljs-string">timeout</span> <span class="hljs-string">connect</span> <span class="hljs-number">5000</span><br>  <span class="hljs-string">timeout</span> <span class="hljs-string">client</span>  <span class="hljs-number">50000</span><br>  <span class="hljs-string">timeout</span> <span class="hljs-string">server</span>  <span class="hljs-number">50000</span><br>  <span class="hljs-string">timeout</span> <span class="hljs-string">http-request</span> <span class="hljs-string">15s</span><br>  <span class="hljs-string">timeout</span> <span class="hljs-string">http-keep-alive</span> <span class="hljs-string">15s</span><br><br><span class="hljs-string">frontend</span> <span class="hljs-string">monitor-in</span><br>  <span class="hljs-string">bind</span> <span class="hljs-string">*:33305</span><br>  <span class="hljs-string">mode</span> <span class="hljs-string">http</span><br>  <span class="hljs-string">option</span> <span class="hljs-string">httplog</span><br>  <span class="hljs-string">monitor-uri</span> <span class="hljs-string">/monitor</span><br><br><span class="hljs-string">frontend</span> <span class="hljs-string">k8s-master</span><br>  <span class="hljs-string">bind</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">:16443</span><br>  <span class="hljs-string">bind</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:16443</span><br>  <span class="hljs-string">mode</span> <span class="hljs-string">tcp</span><br>  <span class="hljs-string">option</span> <span class="hljs-string">tcplog</span><br>  <span class="hljs-string">tcp-request</span> <span class="hljs-string">inspect-delay</span> <span class="hljs-string">5s</span><br>  <span class="hljs-string">default_backend</span> <span class="hljs-string">k8s-master</span><br><br><span class="hljs-string">backend</span> <span class="hljs-string">k8s-master</span><br>  <span class="hljs-string">mode</span> <span class="hljs-string">tcp</span><br>  <span class="hljs-string">option</span> <span class="hljs-string">tcplog</span><br>  <span class="hljs-string">option</span> <span class="hljs-string">tcp-check</span><br>  <span class="hljs-string">balance</span> <span class="hljs-string">roundrobin</span><br>  <span class="hljs-string">default-server</span> <span class="hljs-string">inter</span> <span class="hljs-string">10s</span> <span class="hljs-string">downinter</span> <span class="hljs-string">5s</span> <span class="hljs-string">rise</span> <span class="hljs-number">2</span> <span class="hljs-string">fall</span> <span class="hljs-number">2</span> <span class="hljs-string">slowstart</span> <span class="hljs-string">60s</span> <span class="hljs-string">maxconn</span> <span class="hljs-number">250</span> <span class="hljs-string">maxqueue</span> <span class="hljs-number">256</span> <span class="hljs-string">weight</span> <span class="hljs-number">100</span><br>  <span class="hljs-string">server</span> <span class="hljs-string">master1</span>   <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span><span class="hljs-string">:6443</span>  <span class="hljs-string">check</span><br>  <span class="hljs-string">server</span> <span class="hljs-string">master2</span>   <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.102</span><span class="hljs-string">:6443</span>  <span class="hljs-string">check</span><br>  <span class="hljs-string">server</span> <span class="hljs-string">master3</span>   <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.103</span><span class="hljs-string">:6443</span>  <span class="hljs-string">check</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure><h3 id="Keepalived配置"><a href="#Keepalived配置" class="headerlink" title="Keepalived配置"></a>Keepalived配置</h3><p>操作节点：[master1，master2,master3]</p><p>所有Master节点配置Keepalived，以下三个Master节点配置注意ip和网卡。</p><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs fsharp">操作节点：[master1]<br><br>cat <span class="hljs-operator">&gt;/</span>etc<span class="hljs-operator">/</span>keepalived<span class="hljs-operator">/</span>keepalived.conf  <span class="hljs-operator">&lt;&lt;</span><span class="hljs-string">&quot;EOF&quot;</span><br><br><span class="hljs-operator">!</span> Configuration File <span class="hljs-keyword">for</span> keepalived<br><span class="hljs-keyword">global_defs</span> &#123;<br>    router_id LVS_DEVEL<br>script_user root<br>    enable_script_security<br>&#125;<br>vrrp_script <span class="hljs-keyword">chk_apiserver</span> &#123;<br>    script <span class="hljs-string">&quot;/etc/keepalived/check_apiserver.sh&quot;</span><br>    interval <span class="hljs-number">5</span><br>    weight <span class="hljs-number">-5</span><br>    fall <span class="hljs-number">2</span>  <br>rise <span class="hljs-number">1</span><br>&#125;<br>vrrp_instance VI_1 &#123;<br>    state MASTER<br>    <span class="hljs-keyword">interface</span> ens33<br>    mcast_src_ip <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span><br>    virtual_router_id <span class="hljs-number">51</span><br>    priority <span class="hljs-number">101</span><br>    advert_int <span class="hljs-number">2</span><br>    <span class="hljs-keyword">authentication</span> &#123;<br>        auth_type PASS<br>        auth_pass K8SHA_KA_AUTH<br>    &#125;<br>    <span class="hljs-keyword">virtual_ipaddress</span> &#123;<br>        <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.200</span><br>    &#125;<br>    <span class="hljs-keyword">track_script</span> &#123;<br>       chk_apiserver<br>    &#125;<br>&#125;<br>EOF<br></code></pre></td></tr></table></figure><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs fsharp">操作节点：[master2]<br>cat <span class="hljs-operator">&gt;/</span>etc<span class="hljs-operator">/</span>keepalived<span class="hljs-operator">/</span>keepalived.conf  <span class="hljs-operator">&lt;&lt;</span><span class="hljs-string">&quot;EOF&quot;</span><br><br><span class="hljs-operator">!</span> Configuration File <span class="hljs-keyword">for</span> keepalived<br><span class="hljs-keyword">global_defs</span> &#123;<br>    router_id LVS_DEVEL<br>script_user root<br>    enable_script_security<br>&#125;<br>vrrp_script <span class="hljs-keyword">chk_apiserver</span> &#123;<br>    script <span class="hljs-string">&quot;/etc/keepalived/check_apiserver.sh&quot;</span><br>    interval <span class="hljs-number">5</span><br>    weight <span class="hljs-number">-5</span><br>    fall <span class="hljs-number">2</span>  <br>rise <span class="hljs-number">1</span><br>&#125;<br>vrrp_instance VI_1 &#123;<br>    state BACKUP<br>    <span class="hljs-keyword">interface</span> ens33<br>    mcast_src_ip <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.102</span><br>    virtual_router_id <span class="hljs-number">51</span><br>    priority <span class="hljs-number">100</span><br>    advert_int <span class="hljs-number">2</span><br>    <span class="hljs-keyword">authentication</span> &#123;<br>        auth_type PASS<br>        auth_pass K8SHA_KA_AUTH<br>    &#125;<br>    <span class="hljs-keyword">virtual_ipaddress</span> &#123;<br>        <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.200</span><br>    &#125;<br>    <span class="hljs-keyword">track_script</span> &#123;<br>       chk_apiserver<br>    &#125;<br>&#125;<br>EOF<br></code></pre></td></tr></table></figure><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs fsharp">操作节点：[master3]<br>cat <span class="hljs-operator">&gt;/</span>etc<span class="hljs-operator">/</span>keepalived<span class="hljs-operator">/</span>keepalived.conf  <span class="hljs-operator">&lt;&lt;</span><span class="hljs-string">&quot;EOF&quot;</span><br><br><span class="hljs-operator">!</span> Configuration File <span class="hljs-keyword">for</span> keepalived<br><span class="hljs-keyword">global_defs</span> &#123;<br>    router_id LVS_DEVEL<br>script_user root<br>    enable_script_security<br>&#125;<br>vrrp_script <span class="hljs-keyword">chk_apiserver</span> &#123;<br>    script <span class="hljs-string">&quot;/etc/keepalived/check_apiserver.sh&quot;</span><br>    interval <span class="hljs-number">5</span><br>    weight <span class="hljs-number">-5</span><br>    fall <span class="hljs-number">2</span>  <br>rise <span class="hljs-number">1</span><br>&#125;<br>vrrp_instance VI_1 &#123;<br>    state BACKUP<br>    <span class="hljs-keyword">interface</span> ens33<br>    mcast_src_ip <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.103</span><br>    virtual_router_id <span class="hljs-number">51</span><br>    priority <span class="hljs-number">99</span><br>    advert_int <span class="hljs-number">2</span><br>    <span class="hljs-keyword">authentication</span> &#123;<br>        auth_type PASS<br>        auth_pass K8SHA_KA_AUTH<br>    &#125;<br>    <span class="hljs-keyword">virtual_ipaddress</span> &#123;<br>        <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.200</span><br>    &#125;<br>    <span class="hljs-keyword">track_script</span> &#123;<br>       chk_apiserver<br>    &#125;<br>&#125;<br>EOF<br></code></pre></td></tr></table></figure><h3 id="配置Keepalived健康检查文件"><a href="#配置Keepalived健康检查文件" class="headerlink" title="配置Keepalived健康检查文件"></a>配置Keepalived健康检查文件</h3><p>操作节点：[master1，master2,master3]</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat &gt; <span class="hljs-regexp">/etc/</span>keepalived/check_apiserver.sh &lt;&lt;<span class="hljs-string">&quot;EOF&quot;</span><br> <span class="hljs-comment">#!/bin/bash</span><br> err=<span class="hljs-number">0</span><br> <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> $(seq <span class="hljs-number">1</span> <span class="hljs-number">3</span>)<br> <span class="hljs-keyword">do</span><br>    check_code=$(pgrep haproxy)<br>    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$check_code</span> == <span class="hljs-string">&quot;&quot;</span> ]]; then<br>        err=$(expr <span class="hljs-variable">$err</span> + <span class="hljs-number">1</span>)<br>        sleep <span class="hljs-number">1</span><br>        <span class="hljs-keyword">continue</span><br>    <span class="hljs-keyword">else</span><br>        err=<span class="hljs-number">0</span><br>        <span class="hljs-keyword">break</span><br>    fi<br> done<br> <br> <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$err</span> != <span class="hljs-string">&quot;0&quot;</span> ]]; then<br>    echo <span class="hljs-string">&quot;systemctl stop keepalived&quot;</span><br>    <span class="hljs-regexp">/usr/</span>bin/systemctl stop keepalived<br>    <span class="hljs-keyword">exit</span> <span class="hljs-number">1</span><br> <span class="hljs-keyword">else</span><br>    <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br> fi<br>EOF<br><br>chmod +x <span class="hljs-regexp">/etc/</span>keepalived/check_apiserver.sh<br></code></pre></td></tr></table></figure><h3 id="启动haproxy和keepalived"><a href="#启动haproxy和keepalived" class="headerlink" title="启动haproxy和keepalived"></a>启动haproxy和keepalived</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">操作节点：[master，master2,master3]<br>systemctl daemon-reload<br>systemctl <span class="hljs-keyword">enable</span> <span class="hljs-comment">--now haproxy</span><br>systemctl <span class="hljs-keyword">enable</span> <span class="hljs-comment">--now keepalived</span><br></code></pre></td></tr></table></figure><h3 id="测试集群负载均衡高可用"><a href="#测试集群负载均衡高可用" class="headerlink" title="测试集群负载均衡高可用"></a>测试集群负载均衡高可用</h3><p>查看master1的vip</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">ip <span class="hljs-selector-tag">a</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/0176020d9bcd8b4c85ea2e4f8d6b4afa697559838.png" alt="image-20231109232708584"></p><p>模拟master1的宕机测试，看看vip会不会漂移到master2去</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[master1]</span> poweroff<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/126a03a1112b6ab1ae01e0603ac0023b697559838.png" alt="image-20231109232803276"></p><p>这时候查看master2的ip列表</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[master2]</span> poweroff<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/2a02b2b0a2310908a960dff95daf55d8697559838.png" alt="image-20231109232825999"></p><p>结论：这时可以知道，负载均衡集群成功，当master1出现宕机情况，vip会从master1漂移到master2</p><h2 id="docker安装"><a href="#docker安装" class="headerlink" title="docker安装"></a>docker安装</h2><h3 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h3><p>操作节点[master1，master2，master3,node01]</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//</span>download.docker.com<span class="hljs-regexp">/linux/</span>static<span class="hljs-regexp">/stable/</span>x86_64/docker-<span class="hljs-number">24.0</span>.<span class="hljs-number">7</span>.tgz<br>tar xf docker-*.tgz<br>cp docker<span class="hljs-regexp">/* /u</span>sr<span class="hljs-regexp">/bin/</span><br><span class="hljs-comment">#创建containerd的service文件,并且启动</span><br>cat &gt;<span class="hljs-regexp">/etc/</span>systemd<span class="hljs-regexp">/system/</span>containerd.service &lt;&lt;EOF<br>[Unit]<br>Description=containerd container runtime<br>Documentation=https:<span class="hljs-regexp">//</span>containerd.io<br>After=network.target local-fs.target<br>[Service]<br>ExecStartPre=-<span class="hljs-regexp">/sbin/m</span>odprobe overlay<br>ExecStart=<span class="hljs-regexp">/usr/</span>bin/containerd<br>Type=notify<br>Delegate=yes<br>KillMode=process<br>Restart=always<br>RestartSec=<span class="hljs-number">5</span><br>LimitNPROC=infinity<br>LimitCORE=infinity<br>LimitNOFILE=<span class="hljs-number">1048576</span><br>TasksMax=infinity<br>OOMScoreAdjust=-<span class="hljs-number">999</span><br>[Install]<br>WantedBy=multi-user.target<br>EOF<br>systemctl enable --now containerd.service<br><br><span class="hljs-comment">#准备docker的service文件</span><br><br>cat &gt; <span class="hljs-regexp">/etc/</span>systemd<span class="hljs-regexp">/system/</span>docker.service &lt;&lt;EOF<br>[Unit]<br>Description=Docker Application Container Engine<br>Documentation=https:<span class="hljs-regexp">//</span>docs.docker.com<br>After=network-online.target firewalld.service containerd.service<br>Wants=network-online.target<br>Requires=docker.socket containerd.service<br>[Service]<br>Type=notify<br>ExecStart=<span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/dockerd -H fd:/</span><span class="hljs-regexp">/ --containerd=/</span>run<span class="hljs-regexp">/containerd/</span>containerd.sock<br>ExecReload=<span class="hljs-regexp">/bin/</span>kill -s HUP <span class="hljs-variable">$MAINPID</span><br>TimeoutSec=<span class="hljs-number">0</span><br>RestartSec=<span class="hljs-number">2</span><br>Restart=always<br>StartLimitBurst=<span class="hljs-number">3</span><br>StartLimitInterval=<span class="hljs-number">60</span>s<br>LimitNOFILE=infinity<br>LimitNPROC=infinity<br>LimitCORE=infinity<br>TasksMax=infinity<br>Delegate=yes<br>KillMode=process<br>OOMScoreAdjust=-<span class="hljs-number">500</span><br>[Install]<br>WantedBy=multi-user.target<br>EOF<br><br><br><span class="hljs-comment">#准备docker的socket文件</span><br><br>cat &gt; <span class="hljs-regexp">/etc/</span>systemd<span class="hljs-regexp">/system/</span>docker.socket &lt;&lt;EOF<br>[Unit]<br>Description=Docker Socket <span class="hljs-keyword">for</span> the API<br>[Socket]<br>ListenStream=<span class="hljs-regexp">/var/</span>run/docker.sock<br>SocketMode=<span class="hljs-number">0660</span><br>SocketUser=root<br>SocketGroup=docker<br>[Install]<br>WantedBy=sockets.target<br>EOF<br>groupadd docker<br><br>systemctl enable --now docker.socket  &amp;&amp; systemctl enable --now docker.service<br><br><br><span class="hljs-comment">#验证</span><br>mkdir <span class="hljs-regexp">/etc/</span>docker<br>cat &gt;<span class="hljs-regexp">/etc/</span>docker/daemon.json &lt;&lt;EOF<br>&#123;<br>  <span class="hljs-string">&quot;exec-opts&quot;</span>: [<span class="hljs-string">&quot;native.cgroupdriver=systemd&quot;</span>],<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<br>    <span class="hljs-string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span>,<br>    <span class="hljs-string">&quot;http://hub-mirror.c.163.com&quot;</span><br>  ],<br>  <span class="hljs-string">&quot;max-concurrent-downloads&quot;</span>: <span class="hljs-number">10</span>,<br>  <span class="hljs-string">&quot;log-driver&quot;</span>: <span class="hljs-string">&quot;json-file&quot;</span>,<br>  <span class="hljs-string">&quot;log-level&quot;</span>: <span class="hljs-string">&quot;warn&quot;</span>,<br>  <span class="hljs-string">&quot;log-opts&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;max-size&quot;</span>: <span class="hljs-string">&quot;10m&quot;</span>,<br>    <span class="hljs-string">&quot;max-file&quot;</span>: <span class="hljs-string">&quot;3&quot;</span><br>    &#125;,<br>  <span class="hljs-string">&quot;data-root&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker&quot;</span><br>&#125;<br>EOF<br>systemctl restart docker<br></code></pre></td></tr></table></figure><h3 id="安装cri-docker"><a href="#安装cri-docker" class="headerlink" title="安装cri-docker"></a>安装cri-docker</h3><p>操作节点[master1，master2，master3,node01]</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/Mirantis/</span>cri-dockerd<span class="hljs-regexp">/releases/</span>download<span class="hljs-regexp">/v0.3.7/</span>cri-dockerd-<span class="hljs-number">0.3</span>.<span class="hljs-number">7</span>.amd64.tgz<br><br>tar -zxvf cri-dockerd-<span class="hljs-number">0.3</span>.<span class="hljs-number">7</span>.amd64.tgz<br>cp cri-dockerd<span class="hljs-regexp">/cri-dockerd  /u</span>sr<span class="hljs-regexp">/bin/</span><br>chmod +x <span class="hljs-regexp">/usr/</span>bin/cri-dockerd<br><br><br><span class="hljs-comment">#写入启动配置文件</span><br>cat &gt;  <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system/cri-docker.service &lt;&lt;EOF<br>[Unit]<br>Description=CRI Interface <span class="hljs-keyword">for</span> Docker Application Container Engine<br>Documentation=https:<span class="hljs-regexp">//</span>docs.mirantis.com<br>After=network-online.target firewalld.service docker.service<br>Wants=network-online.target<br>Requires=cri-docker.socket<br> <br>[Service]<br>Type=notify<br>ExecStart=<span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/cri-dockerd --network-plugin=cni --pod-infra-container-image=registry.aliyuncs.com/g</span>oogle_containers/pause:<span class="hljs-number">3.9</span><br>ExecReload=<span class="hljs-regexp">/bin/</span>kill -s HUP <span class="hljs-variable">$MAINPID</span><br>TimeoutSec=<span class="hljs-number">0</span><br>RestartSec=<span class="hljs-number">2</span><br>Restart=always<br> <br>StartLimitBurst=<span class="hljs-number">3</span><br> <br>StartLimitInterval=<span class="hljs-number">60</span>s<br> <br>LimitNOFILE=infinity<br>LimitNPROC=infinity<br>LimitCORE=infinity<br> <br>TasksMax=infinity<br>Delegate=yes<br>KillMode=process<br> <br>[Install]<br>WantedBy=multi-user.target<br>EOF<br><br><br><span class="hljs-comment">#写入socket配置文件</span><br>cat &gt; <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system/cri-docker.socket &lt;&lt;EOF<br>[Unit]<br>Description=CRI Docker Socket <span class="hljs-keyword">for</span> the API<br>PartOf=cri-docker.service<br> <br>[Socket]<br>ListenStream=%t/cri-dockerd.sock<br>SocketMode=<span class="hljs-number">0660</span><br>SocketUser=root<br>SocketGroup=docker<br> <br>[Install]<br>WantedBy=sockets.target<br>EOF<br><br>systemctl daemon-reload &amp;&amp; systemctl enable cri-docker --now<br></code></pre></td></tr></table></figure><h2 id="K8S集群安装"><a href="#K8S集群安装" class="headerlink" title="K8S集群安装"></a>K8S集群安装</h2><h3 id="安装k8s所需的工具"><a href="#安装k8s所需的工具" class="headerlink" title="安装k8s所需的工具"></a>安装k8s所需的工具</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros">操作节点[master1，master2，master3,node01]<br><br>yum -y install  kubeadm kubelet kubectl<br><br><span class="hljs-comment">#为了实现docker使用的cgroupdriver与kubelet使用的cgroup的一致性，配置如下：</span><br>sed -i <span class="hljs-string">&#x27;s/^KUBELET_EXTRA_ARGS=/KUBELET_EXTRA_ARGS=&quot;--cgroup-driver=systemd&quot;/g&#x27;</span> /etc/sysconfig/kubelet<br><br><span class="hljs-comment">#设置kubelet为开机自启动即可，由于没有生成配置文件，集群初始化后自动启动</span><br>systemctl <span class="hljs-built_in">enable</span> kubelet<br>systemctl <span class="hljs-built_in">enable</span> kubelet.service<br></code></pre></td></tr></table></figure><h3 id="集群初始化"><a href="#集群初始化" class="headerlink" title="集群初始化"></a>集群初始化</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">操作节点[master1]</span><br><br><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">kubeadm-config.yaml</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">EOF</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">kubeadm.k8s.io/v1beta3</span><br><span class="hljs-attr">bootstrapTokens:</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">groups:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">system:bootstrappers:kubeadm:default-node-token</span><br>  <span class="hljs-attr">token:</span> <span class="hljs-string">abcdef.0123456789abcdef</span><br>  <span class="hljs-attr">ttl:</span> <span class="hljs-string">24h0m0s</span><br>  <span class="hljs-attr">usages:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">signing</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">authentication</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">InitConfiguration</span><br><span class="hljs-attr">localAPIEndpoint:</span><br>  <span class="hljs-attr">advertiseAddress:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span><br>  <span class="hljs-attr">bindPort:</span> <span class="hljs-number">6443</span><br><span class="hljs-attr">nodeRegistration:</span><br>  <span class="hljs-attr">criSocket:</span> <span class="hljs-string">unix:///var/run/cri-dockerd.sock</span><br>  <span class="hljs-attr">imagePullPolicy:</span> <span class="hljs-string">IfNotPresent</span><br>  <span class="hljs-attr">taints:</span> <span class="hljs-literal">null</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiServer:</span><br>  <span class="hljs-attr">timeoutForControlPlane:</span> <span class="hljs-string">4m0s</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">kubeadm.k8s.io/v1beta3</span><br><span class="hljs-attr">certificatesDir:</span> <span class="hljs-string">/etc/kubernetes/pki</span><br><span class="hljs-attr">clusterName:</span> <span class="hljs-string">kubernetes</span><br><span class="hljs-attr">controllerManager:</span> &#123;&#125;<br><span class="hljs-attr">dns:</span> &#123;&#125;<br><span class="hljs-attr">etcd:</span><br>  <span class="hljs-attr">local:</span><br>    <span class="hljs-attr">dataDir:</span> <span class="hljs-string">/var/lib/etcd</span><br><span class="hljs-attr">imageRepository:</span> <span class="hljs-string">registry.aliyuncs.com/google_containers</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">ClusterConfiguration</span><br><span class="hljs-attr">kubernetesVersion:</span> <span class="hljs-number">1.28</span><span class="hljs-number">.2</span><br><span class="hljs-attr">networking:</span><br>  <span class="hljs-attr">dnsDomain:</span> <span class="hljs-string">cluster.local</span><br>  <span class="hljs-attr">podSubnet:</span> <span class="hljs-number">10.244</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/16</span><br>  <span class="hljs-attr">serviceSubnet:</span> <span class="hljs-number">10.96</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/12</span><br><span class="hljs-attr">scheduler:</span> &#123;&#125;<br><span class="hljs-attr">controlPlaneEndpoint:</span> <span class="hljs-string">&quot;192.168.48.200:16443&quot;</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">kubeproxy.config.k8s.io/v1alpha1</span><br><span class="hljs-attr">bindAddress:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br><span class="hljs-attr">bindAddressHardFail:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">clientConnection:</span><br>  <span class="hljs-attr">acceptContentTypes:</span> <span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-attr">burst:</span> <span class="hljs-number">0</span><br>  <span class="hljs-attr">contentType:</span> <span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-attr">kubeconfig:</span> <span class="hljs-string">/var/lib/kube-proxy/kubeconfig.conf</span><br>  <span class="hljs-attr">qps:</span> <span class="hljs-number">0</span><br><span class="hljs-attr">clusterCIDR:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-attr">configSyncPeriod:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">conntrack:</span><br>  <span class="hljs-attr">maxPerCore:</span> <span class="hljs-literal">null</span><br>  <span class="hljs-attr">min:</span> <span class="hljs-literal">null</span><br>  <span class="hljs-attr">tcpCloseWaitTimeout:</span> <span class="hljs-literal">null</span><br>  <span class="hljs-attr">tcpEstablishedTimeout:</span> <span class="hljs-literal">null</span><br><span class="hljs-attr">detectLocal:</span><br>  <span class="hljs-attr">bridgeInterface:</span> <span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-attr">interfaceNamePrefix:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-attr">detectLocalMode:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-attr">enableProfiling:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">healthzBindAddress:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-attr">hostnameOverride:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-attr">iptables:</span><br>  <span class="hljs-attr">localhostNodePorts:</span> <span class="hljs-literal">null</span><br>  <span class="hljs-attr">masqueradeAll:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">masqueradeBit:</span> <span class="hljs-literal">null</span><br>  <span class="hljs-attr">minSyncPeriod:</span> <span class="hljs-string">0s</span><br>  <span class="hljs-attr">syncPeriod:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">ipvs:</span><br>  <span class="hljs-attr">excludeCIDRs:</span> <span class="hljs-literal">null</span><br>  <span class="hljs-attr">minSyncPeriod:</span> <span class="hljs-string">0s</span><br>  <span class="hljs-attr">scheduler:</span> <span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-attr">strictARP:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">syncPeriod:</span> <span class="hljs-string">0s</span><br>  <span class="hljs-attr">tcpFinTimeout:</span> <span class="hljs-string">0s</span><br>  <span class="hljs-attr">tcpTimeout:</span> <span class="hljs-string">0s</span><br>  <span class="hljs-attr">udpTimeout:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">KubeProxyConfiguration</span><br><span class="hljs-attr">logging:</span><br>  <span class="hljs-attr">flushFrequency:</span> <span class="hljs-number">0</span><br>  <span class="hljs-attr">options:</span><br>    <span class="hljs-attr">json:</span><br>      <span class="hljs-attr">infoBufferSize:</span> <span class="hljs-string">&quot;0&quot;</span><br>  <span class="hljs-attr">verbosity:</span> <span class="hljs-number">0</span><br><span class="hljs-attr">metricsBindAddress:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-attr">mode:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-attr">nodePortAddresses:</span> <span class="hljs-literal">null</span><br><span class="hljs-attr">oomScoreAdj:</span> <span class="hljs-literal">null</span><br><span class="hljs-attr">portRange:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-attr">showHiddenMetricsForVersion:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-attr">winkernel:</span><br>  <span class="hljs-attr">enableDSR:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">forwardHealthCheckVip:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">networkName:</span> <span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-attr">rootHnsEndpointName:</span> <span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-attr">sourceVip:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">kubelet.config.k8s.io/v1beta1</span><br><span class="hljs-attr">authentication:</span><br>  <span class="hljs-attr">anonymous:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">webhook:</span><br>    <span class="hljs-attr">cacheTTL:</span> <span class="hljs-string">0s</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">x509:</span><br>    <span class="hljs-attr">clientCAFile:</span> <span class="hljs-string">/etc/kubernetes/pki/ca.crt</span><br><span class="hljs-attr">authorization:</span><br>  <span class="hljs-attr">mode:</span> <span class="hljs-string">Webhook</span><br>  <span class="hljs-attr">webhook:</span><br>    <span class="hljs-attr">cacheAuthorizedTTL:</span> <span class="hljs-string">0s</span><br>    <span class="hljs-attr">cacheUnauthorizedTTL:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">cgroupDriver:</span> <span class="hljs-string">systemd</span><br><span class="hljs-attr">clusterDNS:</span><br><span class="hljs-bullet">-</span> <span class="hljs-number">10.96</span><span class="hljs-number">.0</span><span class="hljs-number">.10</span><br><span class="hljs-attr">clusterDomain:</span> <span class="hljs-string">cluster.local</span><br><span class="hljs-attr">containerRuntimeEndpoint:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-attr">cpuManagerReconcilePeriod:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">evictionPressureTransitionPeriod:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">fileCheckFrequency:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">healthzBindAddress:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br><span class="hljs-attr">healthzPort:</span> <span class="hljs-number">10248</span><br><span class="hljs-attr">httpCheckFrequency:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">imageMinimumGCAge:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">KubeletConfiguration</span><br><span class="hljs-attr">logging:</span><br>  <span class="hljs-attr">flushFrequency:</span> <span class="hljs-number">0</span><br>  <span class="hljs-attr">options:</span><br>    <span class="hljs-attr">json:</span><br>      <span class="hljs-attr">infoBufferSize:</span> <span class="hljs-string">&quot;0&quot;</span><br>  <span class="hljs-attr">verbosity:</span> <span class="hljs-number">0</span><br><span class="hljs-attr">memorySwap:</span> &#123;&#125;<br><span class="hljs-attr">nodeStatusReportFrequency:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">nodeStatusUpdateFrequency:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">rotateCertificates:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">runtimeRequestTimeout:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">shutdownGracePeriod:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">shutdownGracePeriodCriticalPods:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">staticPodPath:</span> <span class="hljs-string">/etc/kubernetes/manifests</span><br><span class="hljs-attr">streamingConnectionIdleTimeout:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">syncFrequency:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">volumeStatsAggPeriod:</span> <span class="hljs-string">0s</span><br><br><span class="hljs-string">EOF</span><br><br><span class="hljs-string">kubeadm</span> <span class="hljs-string">config</span> <span class="hljs-string">migrate</span> <span class="hljs-string">--old-config</span> <span class="hljs-string">kubeadm-config.yaml</span> <span class="hljs-string">--new-config</span> <span class="hljs-string">new.yaml</span><br><br></code></pre></td></tr></table></figure><h3 id="准备k8s所需的镜像"><a href="#准备k8s所需的镜像" class="headerlink" title="准备k8s所需的镜像"></a>准备k8s所需的镜像</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino">操作节点[master1,master2,master3]<br><br>kubeadm config images pull --config /root/<span class="hljs-keyword">new</span>.yaml <br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/39a6655a68e7fb689d3d256f91e8074c697559838.png" alt="image-20231110100341121"></p><h3 id="master1节点初始化"><a href="#master1节点初始化" class="headerlink" title="master1节点初始化"></a>master1节点初始化</h3><p>操作节点[master1]</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">kubeadm init --config <span class="hljs-regexp">/root/</span><span class="hljs-keyword">new</span>.yaml  --upload-certs<br></code></pre></td></tr></table></figure><p>会生成信息</p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/71204e272d141fb2f7ef41d1d6a37658697559838.png" alt="image-20231110175843902"></p><p>记录信息后面会用到</p><p>初始化成功以后，会产生Token值，用于其他节点加入时使用，因此要记录下初始化成功生成的token值（令牌值），<strong>有效期24小时，后续需要操作可以重新生成Token</strong></p><p>操作节点[master1]</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs llvm">kubeadm join <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> --token abcdef.<span class="hljs-number">0123456789</span>abcdef \<br>        --discovery-token-ca-cert-hash sha<span class="hljs-number">256</span>:<span class="hljs-keyword">cc</span><span class="hljs-number">5427e0</span>e<span class="hljs-number">133</span>d<span class="hljs-number">95250</span>ab<span class="hljs-number">0</span>aa<span class="hljs-number">90976</span>fea<span class="hljs-number">2</span><span class="hljs-keyword">c</span><span class="hljs-number">383278</span>b<span class="hljs-number">6345</span>fd<span class="hljs-number">7e8</span><span class="hljs-keyword">c</span><span class="hljs-number">28702</span>ac<span class="hljs-number">8</span>dfc<span class="hljs-number">61</span>f \<br>        --control-plane --certificate-key <span class="hljs-number">45</span>eeadfc<span class="hljs-number">9135</span>a<span class="hljs-number">368</span>d<span class="hljs-number">08582</span>a<span class="hljs-number">90</span><span class="hljs-keyword">c</span><span class="hljs-number">779</span><span class="hljs-keyword">c</span><span class="hljs-number">0934</span>d<span class="hljs-number">24</span><span class="hljs-keyword">c</span><span class="hljs-number">54</span>f<span class="hljs-number">56134</span><span class="hljs-keyword">c</span><span class="hljs-number">65</span>d<span class="hljs-number">67516</span>f<span class="hljs-number">5e6</span>f<span class="hljs-number">981</span>d<br><br><br>kubeadm join <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> --token abcdef.<span class="hljs-number">0123456789</span>abcdef \<br>        --discovery-token-ca-cert-hash sha<span class="hljs-number">256</span>:<span class="hljs-keyword">cc</span><span class="hljs-number">5427e0</span>e<span class="hljs-number">133</span>d<span class="hljs-number">95250</span>ab<span class="hljs-number">0</span>aa<span class="hljs-number">90976</span>fea<span class="hljs-number">2</span><span class="hljs-keyword">c</span><span class="hljs-number">383278</span>b<span class="hljs-number">6345</span>fd<span class="hljs-number">7e8</span><span class="hljs-keyword">c</span><span class="hljs-number">28702</span>ac<span class="hljs-number">8</span>dfc<span class="hljs-number">61</span>f<br><br></code></pre></td></tr></table></figure><p><code>操作kubect报错：</code></p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/0ea7d75c613d48f13e34f481c6cf08b0697559838.png" alt="image-20231110180035297"></p><p>此时通过kubectl操作，会出现失败，因为还没有将集群的”钥匙”交给root用户。<code>/etc/kubernetes/admin.conf</code> 文件是 Kubernetes（K8s）集群中的管理员配置文件，它包含了用于管理集群的身份验证和访问信息。所以下面进行配置环境变量，用于访问Kubernetes集群：</p><p><code>添加环境变量</code></p><p>操作节点[master1]</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/.kube<br>sudo <span class="hljs-built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="hljs-variable">$HOME</span>/.kube/config<br>sudo <span class="hljs-built_in">chown</span> $(<span class="hljs-built_in">id</span> -u):$(<span class="hljs-built_in">id</span> -g) <span class="hljs-variable">$HOME</span>/.kube/config<br></code></pre></td></tr></table></figure><h3 id="添加其他master节点至集群中"><a href="#添加其他master节点至集群中" class="headerlink" title="添加其他master节点至集群中"></a>添加其他master节点至集群中</h3><p>操作节点[master2,master3]</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs llvm">操作节点[master<span class="hljs-number">2</span><span class="hljs-punctuation">,</span>master<span class="hljs-number">3</span>]<br>kubeadm join <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> --token abcdef.<span class="hljs-number">0123456789</span>abcdef \<br>        --discovery-token-ca-cert-hash sha<span class="hljs-number">256</span>:<span class="hljs-keyword">cc</span><span class="hljs-number">5427e0</span>e<span class="hljs-number">133</span>d<span class="hljs-number">95250</span>ab<span class="hljs-number">0</span>aa<span class="hljs-number">90976</span>fea<span class="hljs-number">2</span><span class="hljs-keyword">c</span><span class="hljs-number">383278</span>b<span class="hljs-number">6345</span>fd<span class="hljs-number">7e8</span><span class="hljs-keyword">c</span><span class="hljs-number">28702</span>ac<span class="hljs-number">8</span>dfc<span class="hljs-number">61</span>f \<br>        --control-plane --certificate-key <span class="hljs-number">45</span>eeadfc<span class="hljs-number">9135</span>a<span class="hljs-number">368</span>d<span class="hljs-number">08582</span>a<span class="hljs-number">90</span><span class="hljs-keyword">c</span><span class="hljs-number">779</span><span class="hljs-keyword">c</span><span class="hljs-number">0934</span>d<span class="hljs-number">24</span><span class="hljs-keyword">c</span><span class="hljs-number">54</span>f<span class="hljs-number">56134</span><span class="hljs-keyword">c</span><span class="hljs-number">65</span>d<span class="hljs-number">67516</span>f<span class="hljs-number">5e6</span>f<span class="hljs-number">981</span>d \<br>        --cri-socket unix:///var/run/cri-dockerd.sock <br></code></pre></td></tr></table></figure><p>注意：这里末尾添加了<code>--cri-socket unix:///var/run/cri-dockerd.sock </code></p><p>接着给<code>master2</code>添加环境变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">操作节点[master2,master3]<br><span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/.kube<br>sudo <span class="hljs-built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="hljs-variable">$HOME</span>/.kube/config<br>sudo <span class="hljs-built_in">chown</span> $(<span class="hljs-built_in">id</span> -u):$(<span class="hljs-built_in">id</span> -g) <span class="hljs-variable">$HOME</span>/.kube/config<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/3f20e99d3edff4874993811b81d45783697559838.png" alt="image-20231110180919008"></p><p>这里没有展示master3的图片，但是步骤一样的</p><h3 id="模拟Token过期重新生成并加入Node节点"><a href="#模拟Token过期重新生成并加入Node节点" class="headerlink" title="模拟Token过期重新生成并加入Node节点"></a>模拟Token过期重新生成并加入Node节点</h3><p>假设加入集群的token过期了。node01无法加入了，这里就模拟一下这种情况</p><ol><li>Token过期后生成新的token：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">kubeadm token create --print-join-command<br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">[root@master1 ~]# kubeadm token create --<span class="hljs-keyword">print</span>-<span class="hljs-keyword">join</span>-<span class="hljs-keyword">command</span><br>kubeadm <span class="hljs-keyword">join</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> --token tn5q1b.<span class="hljs-number">7</span>w1jj77ewup7k2in --discovery-token-<span class="hljs-keyword">ca</span>-cert-hash <span class="hljs-built_in">sha256</span>:cc5427e0e133d95250ab0aa90976fea2c383278b6345fd7e8c28702ac8dfc61f<br><br></code></pre></td></tr></table></figure><p>其中，<code>192.168.48.200:16443</code> 是你的 Kubernetes API 服务器的地址和端口，<code>tn5q1b.7w1jj77ewup7k2in</code> 是新的令牌，<code>sha256:cc5427e0e133d95250ab0aa90976fea2c383278b6345fd7e8c28702ac8dfc61f</code> 是令牌的 CA 证书哈希值。</p><ol start="2"><li>Master需要生成–certificate-key：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">kubeadm init phase upload-certs --upload-certs<br></code></pre></td></tr></table></figure><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript">[root@master1 ~]<span class="hljs-comment"># kubeadm init phase upload-certs --upload-certs</span><br>W1110 <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">03.426245</span>   <span class="hljs-number">10185</span> <span class="hljs-built_in">version</span>.go:<span class="hljs-number">104</span>] could <span class="hljs-keyword">not</span> fetch a Kubernetes <span class="hljs-built_in">version</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">the</span> internet: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> URL <span class="hljs-string">&quot;https://dl.k8s.io/release/stable-1.txt&quot;</span>: Get <span class="hljs-string">&quot;https://dl.k8s.io/release/stable-1.txt&quot;</span>: context deadline exceeded (Client.Timeout exceeded <span class="hljs-keyword">while</span> awaiting headers)<br>W1110 <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">03.426320</span>   <span class="hljs-number">10185</span> <span class="hljs-built_in">version</span>.go:<span class="hljs-number">105</span>] falling <span class="hljs-keyword">back</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">local</span> client <span class="hljs-built_in">version</span>: v1<span class="hljs-number">.28</span><span class="hljs-number">.2</span><br>[upload-certs] Storing <span class="hljs-keyword">the</span> certificates <span class="hljs-keyword">in</span> Secret <span class="hljs-string">&quot;kubeadm-certs&quot;</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> <span class="hljs-string">&quot;kube-system&quot;</span> Namespace<br>[upload-certs] Using certificate key:<br><span class="hljs-number">5</span>d3706028d5e569324a4c456c81ae0f5551ece88b3132f03917668c6b0605128<br></code></pre></td></tr></table></figure><p>其中，<code>5d3706028d5e569324a4c456c81ae0f5551ece88b3132f03917668c6b0605128</code> 是证书密钥。</p><ol start="3"><li>生成新的Token用于集群添加新Node节点</li></ol><p>操作节点[node01]</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">kubeadm join 192.168.48.200<span class="hljs-function">:16443</span> <span class="hljs-params">--token</span> tn5q1b.7w1jj77ewup7k2in <span class="hljs-params">--discovery-token-ca-cert-hash</span> sha256<span class="hljs-function">:cc5427e0e133d95250ab0aa90976fea2c383278b6345fd7e8c28702ac8dfc61f</span>  \<br>        <span class="hljs-params">--cri-socket</span> unix:<span class="hljs-string">///var/run/cri-dockerd.sock</span> <br></code></pre></td></tr></table></figure><p>注意：这里末尾添加了<code>--cri-socket unix:///var/run/cri-dockerd.sock </code></p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/3e809e4e0ccbd1d84b7563de484600dc697559838.png" alt="image-20231110181623386"></p><p>这时在master查看node状态（显示为notready不影响）</p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/35ee9666e8251b54f20eec2a53ff9058697559838.png" alt="image-20231111145807000"></p><h3 id="模拟新加master节点的加入K8S集群中"><a href="#模拟新加master节点的加入K8S集群中" class="headerlink" title="模拟新加master节点的加入K8S集群中"></a>模拟新加master节点的加入K8S集群中</h3><p>假设我们新加master节点的话，就拼接token，<code>从刚刚生成的token拼接</code></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">[root@master1 ~]# kubeadm token create --<span class="hljs-keyword">print</span>-<span class="hljs-keyword">join</span>-<span class="hljs-keyword">command</span><br>kubeadm <span class="hljs-keyword">join</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> --token tn5q1b.<span class="hljs-number">7</span>w1jj77ewup7k2in --discovery-token-<span class="hljs-keyword">ca</span>-cert-hash <span class="hljs-built_in">sha256</span>:cc5427e0e133d95250ab0aa90976fea2c383278b6345fd7e8c28702ac8dfc61f<br></code></pre></td></tr></table></figure><p>这里提取信息1</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">kubeadm join <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> --token tn<span class="hljs-number">5</span>q<span class="hljs-number">1</span>b.<span class="hljs-number">7</span>w<span class="hljs-number">1</span>jj<span class="hljs-number">77</span>ewup<span class="hljs-number">7</span>k<span class="hljs-number">2</span>in --discovery-token-ca-cert-hash sha<span class="hljs-number">256</span>:<span class="hljs-keyword">cc</span><span class="hljs-number">5427e0</span>e<span class="hljs-number">133</span>d<span class="hljs-number">95250</span>ab<span class="hljs-number">0</span>aa<span class="hljs-number">90976</span>fea<span class="hljs-number">2</span><span class="hljs-keyword">c</span><span class="hljs-number">383278</span>b<span class="hljs-number">6345</span>fd<span class="hljs-number">7e8</span><span class="hljs-keyword">c</span><span class="hljs-number">28702</span>ac<span class="hljs-number">8</span>dfc<span class="hljs-number">61</span>f<br></code></pre></td></tr></table></figure><p>接着</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript">[root@master1 ~]<span class="hljs-comment"># kubeadm init phase upload-certs --upload-certs</span><br>W1110 <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">03.426245</span>   <span class="hljs-number">10185</span> <span class="hljs-built_in">version</span>.go:<span class="hljs-number">104</span>] could <span class="hljs-keyword">not</span> fetch a Kubernetes <span class="hljs-built_in">version</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">the</span> internet: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> URL <span class="hljs-string">&quot;https://dl.k8s.io/release/stable-1.txt&quot;</span>: Get <span class="hljs-string">&quot;https://dl.k8s.io/release/stable-1.txt&quot;</span>: context deadline exceeded (Client.Timeout exceeded <span class="hljs-keyword">while</span> awaiting headers)<br>W1110 <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">03.426320</span>   <span class="hljs-number">10185</span> <span class="hljs-built_in">version</span>.go:<span class="hljs-number">105</span>] falling <span class="hljs-keyword">back</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">local</span> client <span class="hljs-built_in">version</span>: v1<span class="hljs-number">.28</span><span class="hljs-number">.2</span><br>[upload-certs] Storing <span class="hljs-keyword">the</span> certificates <span class="hljs-keyword">in</span> Secret <span class="hljs-string">&quot;kubeadm-certs&quot;</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> <span class="hljs-string">&quot;kube-system&quot;</span> Namespace<br>[upload-certs] Using certificate key:<br><span class="hljs-number">5</span>d3706028d5e569324a4c456c81ae0f5551ece88b3132f03917668c6b0605128<br></code></pre></td></tr></table></figure><p>这里提取信息2：这里前面要加上<code>--control-plane --certificate-key</code></p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">--control-plane --certificate-key <span class="hljs-number">5</span>d<span class="hljs-number">3706028</span>d<span class="hljs-number">5e569324</span>a<span class="hljs-number">4</span><span class="hljs-keyword">c</span><span class="hljs-number">456</span><span class="hljs-keyword">c</span><span class="hljs-number">81</span>ae<span class="hljs-number">0</span>f<span class="hljs-number">5551</span>ece<span class="hljs-number">88</span>b<span class="hljs-number">3132</span>f<span class="hljs-number">03917668</span><span class="hljs-keyword">c</span><span class="hljs-number">6</span>b<span class="hljs-number">0605128</span><br></code></pre></td></tr></table></figure><p>合成</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus">kubeadm join <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> <span class="hljs-attr">--token</span> tn5q1b.<span class="hljs-number">7</span>w1jj77ewup7k2in \<br>        <span class="hljs-attr">--discovery-token-ca-cert-hash</span> sha256:cc5427e0e133d95250ab0aa90976fea2c383278b6345fd7e8c28702ac8dfc61f  \<br>        <span class="hljs-attr">--control-plane</span> <span class="hljs-attr">--certificate-key</span> <span class="hljs-number">5</span>d3706028d5e569324a4c456c81ae0f5551ece88b3132f03917668c6b0605128 \<br>        <span class="hljs-attr">--cri-socket</span> unix:<span class="hljs-comment">///var/run/cri-dockerd.sock</span><br>        <br>        <br>kubeadm join <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> <span class="hljs-attr">--token</span> lnkno8<span class="hljs-selector-class">.u4v1l8n9pahzf0kj</span> \<br>        <span class="hljs-attr">--discovery-token-ca-cert-hash</span> sha256:cc5427e0e133d95250ab0aa90976fea2c383278b6345fd7e8c28702ac8dfc61f \<br>        <span class="hljs-attr">--control-plane</span> <span class="hljs-attr">--certificate-key</span> <span class="hljs-number">41</span>e441fe56cb4bdfcc2fc0291958e6b1da54d01f4649b6651471c07583f85cdf \<br>        <span class="hljs-attr">--cri-socket</span> unix:<span class="hljs-comment">///var/run/cri-dockerd.sock</span><br><br><br></code></pre></td></tr></table></figure><p>注意：这里末尾添加了<code>--cri-socket unix:///var/run/cri-dockerd.sock </code></p><p>图示</p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/7dcec71d06d286a5b7b1fcebbef15a7b697559838.png" alt="image-20231110182741430"></p><h2 id="安装calico网络插件"><a href="#安装calico网络插件" class="headerlink" title="安装calico网络插件"></a>安装calico网络插件</h2><p>操作节点[master1]</p><p>添加解析记录，否则无法访问</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo <span class="hljs-string">&#x27;185.199.108.133 raw.githubusercontent.com&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>hosts<br></code></pre></td></tr></table></figure><h3 id="应用operator资源清单文件"><a href="#应用operator资源清单文件" class="headerlink" title="应用operator资源清单文件"></a>应用operator资源清单文件</h3><p>网络组件有很多种，只需要部署其中一个即可，推荐Calico。<br>Calico是一个纯三层的数据中心网络方案，Calico支持广泛的平台，包括Kubernetes、OpenStack等。<br>Calico 在每一个计算节点利用 Linux Kernel 实现了一个高效的虚拟路由器（ vRouter） 来负责数据转发，而每个 vRouter 通过 BGP 协议负责把自己上运行的 workload 的路由信息向整个 Calico 网络内传播。<br>此外，Calico 项目还实现了 Kubernetes 网络策略，提供ACL功能。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl https:<span class="hljs-regexp">//</span>raw.githubusercontent.com<span class="hljs-regexp">/projectcalico/</span>calico<span class="hljs-regexp">/v3.25.1/m</span>anifests/calico.yaml -O<br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">root@master1</span> <span class="hljs-string">~</span>]<span class="hljs-comment"># vim calico.yaml</span><br><span class="hljs-comment">#添加两行</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">IP_AUTODETECTION_METHOD</span><br>  <span class="hljs-attr">value:</span> <span class="hljs-string">interface=ens33</span><br><br><span class="hljs-comment">#ens33是你的网卡</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/12da23b4f8d928a8ac610de1419f8f01697559838.png" alt="image-20231110183944854"></p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coq">sed -i &#x27;s| <span class="hljs-type">docker</span>.io/calico/| <span class="hljs-type">registry</span>.cn-hangzhou.aliyuncs.com/qianyios/|<span class="hljs-type">&#x27; calico</span>.yaml<br>kubectl <span class="hljs-built_in">apply</span> -f calico.yaml<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/515614f130cb327d7e301ddff0ea1b75697559838.png" alt="image-20231110184031455"></p><h3 id="监视kube-system命名空间中pod运行情况"><a href="#监视kube-system命名空间中pod运行情况" class="headerlink" title="监视kube-system命名空间中pod运行情况"></a>监视kube-system命名空间中pod运行情况</h3><p>等待估计20分钟左右吧(确保全部running)</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">kubectl <span class="hljs-built_in">get</span> pods -n kube-<span class="hljs-keyword">system</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/65e576c8a0ad30192f63c585bda21254697559838.png" alt="image-20231110193921266"></p><h3 id="拿掉master节点的污点"><a href="#拿掉master节点的污点" class="headerlink" title="拿掉master节点的污点"></a>拿掉master节点的污点</h3><p>节点 master1 和 master2 都有一个名为 <code>node-role.kubernetes.io/control-plane:NoSchedule</code> 的污点。这个污点的作用是阻止普通的 Pod 被调度到这些节点上，只允许特定的控制平面组件（如 kube-apiserver、kube-controller-manager 和 kube-scheduler）在这些节点上运行。</p><p>这种设置有助于确保控制平面节点专门用于运行 Kubernetes 的核心组件，而不会被普通的工作负载占用。通过将污点添加到节点上，可以确保只有被授权的控制平面组件才能在这些节点上运行。</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">kubectl describe <span class="hljs-keyword">node</span> <span class="hljs-title">master1</span> | grep -i taint<br>kubectl describe <span class="hljs-keyword">node</span> <span class="hljs-title">master2</span> | grep -i taint<br>kubectl describe <span class="hljs-keyword">node</span> <span class="hljs-title">master3</span> | grep -i taint<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/7e79bf5ee514955fa2bc88a482aeace0697559838.png" alt="image-20231111152324023"></p><p>去除污点</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">kubectl taint <span class="hljs-keyword">node</span> <span class="hljs-title">master1</span> <span class="hljs-keyword">node</span><span class="hljs-title">-role</span>.kubernetes.io/control-plane:NoSchedule-<br>kubectl taint <span class="hljs-keyword">node</span> <span class="hljs-title">master2</span> <span class="hljs-keyword">node</span><span class="hljs-title">-role</span>.kubernetes.io/control-plane:NoSchedule-<br>kubectl taint <span class="hljs-keyword">node</span> <span class="hljs-title">master3</span> <span class="hljs-keyword">node</span><span class="hljs-title">-role</span>.kubernetes.io/control-plane:NoSchedule-<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/787ed2d5c1bfbafd6bf56ca9127c4d59697559838.png" alt="image-20231111152342956"></p><h2 id="安装dashboard"><a href="#安装dashboard" class="headerlink" title="安装dashboard"></a>安装dashboard</h2><p>操作节点[master1]</p><p>下载文件</p><p><a href="https://github.com/kubernetes/dashboard/releases/tag/v2.7.0">https://github.com/kubernetes/dashboard/releases/tag/v2.7.0</a></p><p>目前最新版本v2.7.0 </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//</span>raw.githubusercontent.com<span class="hljs-regexp">/kubernetes/</span>dashboard<span class="hljs-regexp">/v2.7.0/</span>aio<span class="hljs-regexp">/deploy/</span>recommended.yaml<br><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/765d82d207c2fefcc00048060c4d1146697559838.png" alt="image-20231014174400992"></p><p>修改配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">recommended.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">kubernetes-dashboard</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">kubernetes-dashboard</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kubernetes-dashboard</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">443</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">8443</span><br>      <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30001</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">kubernetes-dashboard</span><br><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/33ac61c500136a4ce86567aafd1c1382697559838.png" alt="image-20231014174511047"></p><p>运行dashboard</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq">kubectl <span class="hljs-built_in">apply</span> -f recommended.yaml<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/2332124844a312fa6b5261eb90fb2c26697559838.png" alt="image-20231014174622344"></p><p>检查运行状态</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">kubectl <span class="hljs-built_in">get</span> pods -n kubernetes-dashboard<br>kubectl <span class="hljs-built_in">get</span> pod,svc -o wide -n kubernetes-dashboard<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/39d745dff08f596e4d810445df33dbdc697559838.png" alt="image-20231111025752605"></p><h3 id="创建cluster-admin用户"><a href="#创建cluster-admin用户" class="headerlink" title="创建cluster-admin用户"></a>创建cluster-admin用户</h3><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nsis">创建service account并绑定默认cluster-<span class="hljs-literal">admin</span>管理员群角色<br><span class="hljs-comment">#创建用户</span><br>kubectl create serviceaccount dashboard-<span class="hljs-literal">admin</span> -n kubernetes-dashboard<br><span class="hljs-comment">#用户授权</span><br>kubectl create clusterrolebinding dashboard-<span class="hljs-literal">admin</span> --clusterrole=cluster-<span class="hljs-literal">admin</span> --serviceaccount=kubernetes-dashboard:dashboard-<span class="hljs-literal">admin</span><br><span class="hljs-comment">#获取用户Token</span><br>kubectl create token dashboard-<span class="hljs-literal">admin</span> -n kubernetes-dashboard<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/5e1825e420253c9b7aaba3307e80d3ef697559838.png" alt="image-20231111025817854"></p><p>记录token</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs smali">eyJhbGciOiJSUzI1NiIsImtpZCI6IjJxb21sRTZSckhEZ09FMnlvWU5IY3dfTTRIWDEzRUpsQ000MThhSWxYNDgifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNjk5NjQ2Mjg3LCJpYXQiOjE2OTk2NDI2ODcsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJkYXNoYm9hcmQtYWRtaW4iLCJ1aWQiOiIyNTBhNTQ2MS03MGJlLTRhZTItOWY2Yi1hMDQwOWE1NWJhMTMifX0sIm5iZiI6MTY5OTY0MjY4Nywic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmVybmV0ZXMtZGFzaGJvYXJkOmRhc2hib2FyZC1hZG1pbiJ9.U-lH9_sRU4TVrpAznqS60INNSev9NxHu61igGUTzTBoaWo7WjPG7vzTnpZYhvsoglTzMEKhfranJkkkn95pe-prkvSasaAL6kXHw0jQjlSMzcYiF7DoLdkOtDJSukuALEubidf9eIwZXFZ-sezZdZHm4hnk5nWme5YtdOmYOJPh5sv1dzRvM1XuOHknJPTA1BbdZuVAtSGHSjkhwx-wl-41uuQoROW5GjJs0bz4zLBFn1w_pWaSMCn7pjGJNcbr6IuDV41km_etpwwxacWyfAcxNykzCtIiE1abJj7m-e944GvAn_eqxz3wCZD6Bgt41FWRzyMHjrppJfDjk7FaHNw<br><br></code></pre></td></tr></table></figure><h3 id="登录浏览器访问"><a href="#登录浏览器访问" class="headerlink" title="登录浏览器访问"></a>登录浏览器访问</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">https://192.168.48.200:30001<br><br><span class="hljs-section">输入token：</span><br><span class="hljs-section">----</span><br>eyJhbGciOiJSUzI1NiIsImtpZCI6IjJxb21sRTZSckhEZ09FMnlvWU5IY3dfTTRIWDEzRUpsQ000MThhSWxYNDgifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNjk5NjQ2Mjg3LCJpYXQiOjE2OTk2NDI2ODcsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJkYXNoYm9hcmQtYWRtaW4iLCJ1aWQiOiIyNTBhNTQ2MS03MGJlLTRhZTItOWY2Yi1hMDQwOWE1NWJhMTMifX0sIm5iZiI6MTY5OTY0MjY4Nywic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmVybmV0ZXMtZGFzaGJvYXJkOmRhc2hib2FyZC1hZG1pbiJ9.U-lH9_sRU4TVrpAznqS60INNSev9NxHu61igGUTzTBoaWo7WjPG7vzTnpZYhvsoglTzMEKhfranJkkkn95pe-prkvSasaAL6kXHw0jQjlSMzcYiF7DoLdkOtDJSukuALEubidf9eIwZXFZ-sezZdZHm4hnk5nWme5YtdOmYOJPh5sv1dzRvM1XuOHknJPTA1BbdZuVAtSGHSjkhwx-wl-41uuQoROW5GjJs0bz4zLBFn1w_pWaSMCn7pjGJNcbr6IuDV41km_etpwwxacWyfAcxNykzCtIiE1abJj7m-e944GvAn_eqxz3wCZD6Bgt41FWRzyMHjrppJfDjk7FaHNw<br><br><span class="hljs-code">----</span><br><span class="hljs-code"></span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/d9e668b5905d26157c9377c9462266e5697559838.png" alt="image-20231111025910110"></p><h3 id="部署一个nginx测试"><a href="#部署一个nginx测试" class="headerlink" title="部署一个nginx测试"></a>部署一个nginx测试</h3><p>操作节点[master1]</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">web.yaml</span><br><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span><br><span class="hljs-comment">#apiVersion: extensions/v1beta1</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">web-deployment-label</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">web-deployment</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">default</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">web-selector</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">web-selector</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">containers:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">web-container</span><br>        <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:latest</span><br>        <span class="hljs-attr">imagePullPolicy:</span> <span class="hljs-string">Always</span><br>        <span class="hljs-attr">ports:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span><br>          <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span><br>          <span class="hljs-attr">name:</span> <span class="hljs-string">http</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">443</span><br>          <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span><br>          <span class="hljs-attr">name:</span> <span class="hljs-string">https</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">web-service-label</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">web-service</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">default</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span><br>  <span class="hljs-attr">ports:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">http</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br>    <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span><br>    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">80</span><br>    <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30080</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">https</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">443</span><br>    <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span><br>    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">443</span><br>    <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30443</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">web-selector</span><br>    <br><span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">web.yaml</span> <br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/a43ccc12f086a6b24663f4030e058d51697559838.png" alt="image-20231014180923818"></p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">### 查看nginx的pod 的详细信息<br>kubectl get deploy,svc,pod -o wide<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/6061b13260d568766dd53ec7fc3036ce697559838.png" alt="image-20231016203536987"></p><p>访问nginx网站</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">30080</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%86%85%E9%83%A8etcd%EF%BC%89/e162ff6ccabaf5e49f416b7a1974777c697559838.png" alt="image-20231111030413487"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>K8s</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>K8S高可用集群（外部etcd）</title>
    <link href="/2023/12/02/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/"/>
    <url>/2023/12/02/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="K8S高可用集群（外部etcd）"><a href="#K8S高可用集群（外部etcd）" class="headerlink" title="K8S高可用集群（外部etcd）"></a>K8S高可用集群（外部etcd）</h1><p>以下会用到的资源<a href="https://www.123pan.com/s/MYnLVv-gLp4.html">K8s1.28.2（内外部etcd高可用）所需资源</a></p><h2 id="主机拓扑"><a href="#主机拓扑" class="headerlink" title="主机拓扑"></a>主机拓扑</h2><table><thead><tr><th>主机名</th><th>ip1（NAT）</th><th>系统</th><th>磁盘</th><th>内存</th></tr></thead><tbody><tr><td>master1</td><td>192.168.48.101</td><td>Centos7.9</td><td>100G</td><td>4G</td></tr><tr><td>master2</td><td>192.168.48.102</td><td>Centos7.9</td><td>100G</td><td>4G</td></tr><tr><td>master3</td><td>192.168.48.103</td><td>Centos7.9</td><td>100G</td><td>4G</td></tr><tr><td>node01</td><td>192.168.48.104</td><td>Centos7.9</td><td>100G</td><td>8G</td></tr></tbody></table><h2 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h2><p>centos通过单独安装，非克隆。安装完后进行基本环境的配置，配置一下几个方面：</p><ol><li>设置主机名</li><li>关闭NetworkManager、firewalld、dnsmasq、selinux</li><li>设置ens33</li><li>优化ssh</li><li>备份并新增清华yum源、epel源、docker-ce源、k8s源</li><li>更新yum源软件包缓存</li><li>修改history格式及记录数</li><li>添加hosts解析</li><li>关闭swap分区</li><li>安装chrony服务，并同步时间</li><li>配置limits.conf</li><li>安装必备工具</li><li>升级系统并重启</li></ol><p>操作主机：[master1,master2,master3,node01]</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> k8s_system_init.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -eq <span class="hljs-number">2</span> ];then<br>  echo <span class="hljs-string">&quot;设置主机名为：$1&quot;</span><br>  echo <span class="hljs-string">&quot;ens33设置IP地址为：192.168.48.$2&quot;</span><br><span class="hljs-keyword">else</span><br>  echo  <span class="hljs-string">&quot;使用方法：sh $0 主机名 主机位&quot;</span><br>  <span class="hljs-keyword">exit</span> <span class="hljs-number">2</span><br>fi<br><br>echo <span class="hljs-string">&quot;--------------------------------------&quot;</span><br>echo <span class="hljs-string">&quot;1.正在设置主机名：$1&quot;</span><br>hostnamectl set-hostname <span class="hljs-variable">$1</span><br><br><br>echo <span class="hljs-string">&quot;2.正在关闭NetworkManager、firewalld、dnsmasq、selinux&quot;</span><br>systemctl disable firewalld &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>systemctl disable NetworkManager &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>systemctl disable dnsmasq &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>systemctl stop firewalld<br>systemctl stop NetworkManager<br>systemctl stop dnsmasq<br>sed -i <span class="hljs-string">&quot;s#SELINUX=enforcing#SELINUX=disabled#g&quot;</span> <span class="hljs-regexp">/etc/</span>selinux/config<br>setenforce <span class="hljs-number">0</span><br><br><br>echo <span class="hljs-string">&quot;3.正在设置ens33：192.168.48.$2&quot;</span><br>cat &gt; <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/network-scripts/i</span>fcfg-ens33 &lt;&lt;EOF<br>TYPE=ensernet<br>BOOTPROTO=static<br>DEFROUTE=yes<br>NAME=ens33<br>DEVICE=ens33<br>ONBOOT=yes<br>IPADDR=<span class="hljs-number">192.168</span>.<span class="hljs-number">48</span>.<span class="hljs-variable">$2</span><br>NETMASK=<span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br>GATEWAY=<span class="hljs-number">192.168</span>.<span class="hljs-number">48.2</span><br>DNS1=<span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span><br>EOF<br>systemctl restart network<br><br><br>echo <span class="hljs-string">&quot;4.优化ssh&quot;</span><br>sed -i <span class="hljs-string">&quot;s#\#UseDNS yes#UseDNS no#g&quot;</span> <span class="hljs-regexp">/etc/</span>ssh/sshd_config<br>sed -i <span class="hljs-string">&quot;s#GSSAPIAuthentication yes#GSSAPIAuthentication no#g&quot;</span> <span class="hljs-regexp">/etc/</span>ssh/sshd_config<br>systemctl restart sshd<br><br>echo <span class="hljs-string">&quot;5.备份并新增清华yum源、epel源、docker-ce源、k8s源&quot;</span><br>rm -rf <span class="hljs-regexp">/etc/yum</span>.repos.d/*<br>cat &gt; <span class="hljs-regexp">/etc/yum</span>.repos.d/Centos-Base.repo &lt;&lt;EOF<br>[base]<br>name=CentOS-<span class="hljs-variable">$releasever</span> - Base<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/centos/</span>\<span class="hljs-variable">$releasever</span><span class="hljs-regexp">/os/</span>\<span class="hljs-variable">$basearch</span>/<br>gpgcheck=<span class="hljs-number">1</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-CentOS-<span class="hljs-number">7</span><br><br>[updates]<br>name=CentOS-<span class="hljs-variable">$releasever</span> - Updates<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/centos/</span>\<span class="hljs-variable">$releasever</span><span class="hljs-regexp">/updates/</span>\<span class="hljs-variable">$basearch</span>/<br>gpgcheck=<span class="hljs-number">1</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-CentOS-<span class="hljs-number">7</span><br><br>[extras]<br>name=CentOS-<span class="hljs-variable">$releasever</span> - Extras<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/centos/</span>\<span class="hljs-variable">$releasever</span><span class="hljs-regexp">/extras/</span>\<span class="hljs-variable">$basearch</span>/<br>gpgcheck=<span class="hljs-number">1</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-CentOS-<span class="hljs-number">7</span><br><br>[centosplus]<br>name=CentOS-<span class="hljs-variable">$releasever</span> - Plus<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/centos/</span>\<span class="hljs-variable">$releasever</span><span class="hljs-regexp">/centosplus/</span>\<span class="hljs-variable">$basearch</span>/<br>gpgcheck=<span class="hljs-number">1</span><br>enabled=<span class="hljs-number">0</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-CentOS-<span class="hljs-number">7</span><br>EOF<br><br>cat &gt; <span class="hljs-regexp">/etc/yum</span>.repos.d/epel.repo &lt;&lt;EOF<br>[epel]<br>name=Extra Packages <span class="hljs-keyword">for</span> Enterprise Linux <span class="hljs-number">7</span> - \<span class="hljs-variable">$basearch</span><br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/epel/</span><span class="hljs-number">7</span>/\<span class="hljs-variable">$basearch</span><br>failovermensod=priority<br>enabled=<span class="hljs-number">1</span><br>gpgcheck=<span class="hljs-number">1</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-EPEL-<span class="hljs-number">7</span><br><br>[epel-debuginfo]<br>name=Extra Packages <span class="hljs-keyword">for</span> Enterprise Linux <span class="hljs-number">7</span> - \<span class="hljs-variable">$basearch</span> - Debug<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/epel/</span><span class="hljs-number">7</span><span class="hljs-regexp">/\$basearch/</span>debug<br>failovermensod=priority<br>enabled=<span class="hljs-number">0</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-EPEL-<span class="hljs-number">7</span><br>gpgcheck=<span class="hljs-number">1</span><br><br>[epel-source]<br>name=Extra Packages <span class="hljs-keyword">for</span> Enterprise Linux <span class="hljs-number">7</span> - \<span class="hljs-variable">$basearch</span> - Source<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/epel/</span><span class="hljs-number">7</span>/SRPMS<br>failovermensod=priority<br>enabled=<span class="hljs-number">0</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-EPEL-<span class="hljs-number">7</span><br>gpgcheck=<span class="hljs-number">1</span><br>EOF<br><br>cat &gt; <span class="hljs-regexp">/etc/yum</span>.repos.d/kubernetes.repo &lt;&lt;EOF<br>[kubernetes]<br>name=Kubernetes<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/kubernetes/yum</span><span class="hljs-regexp">/repos/</span>kubernetes-el7-x86_64/<br>enabled=<span class="hljs-number">1</span><br>gpgcheck=<span class="hljs-number">0</span><br>repo_gpgcheck=<span class="hljs-number">0</span><br>gpgkey=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/kubernetes/yum</span><span class="hljs-regexp">/doc/yum</span>-key.gpg https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/kubernetes/yum</span><span class="hljs-regexp">/doc/</span>rpm-package-key.gpg<br>EOF<br><br>curl -o <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/docker-ce.repo https:/</span><span class="hljs-regexp">/mirrors.aliyun.com/</span>docker-ce<span class="hljs-regexp">/linux/</span>centos/docker-ce.repo<br><br>echo <span class="hljs-string">&quot;6.更新yum源软件包缓存&quot;</span><br> yum clean all &amp;&amp; yum makecache<br><br><br>echo <span class="hljs-string">&quot;7.修改history格式及记录数&quot;</span><br>sed -i <span class="hljs-string">&quot;s#HISTSIZE=1000##g&quot;</span> <span class="hljs-regexp">/etc/</span>profile<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>profile &lt;&lt;EOF<br>shopt -s histappend<br>USER_IP=`who -u am i <span class="hljs-number">2</span>&gt;<span class="hljs-regexp">/dev/</span>null| awk <span class="hljs-string">&#x27;&#123;print $NF&#125;&#x27;</span>|sed -e <span class="hljs-string">&#x27;s/[()]//g&#x27;</span>`<br>export HISTFILE=~/.commandline_warrior<br>export HISTTIMEFORMAT=<span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S  `whoami`@$&#123;USER_IP&#125;: &quot;</span><br>export HISTSIZE=<span class="hljs-number">200000</span><br>export HISTFILESIZE=<span class="hljs-number">1000000</span><br>export PROMPT_COMMAND=<span class="hljs-string">&quot;history -a&quot;</span><br>EOF<br>source <span class="hljs-regexp">/etc/</span>profile<br><br><br>echo <span class="hljs-string">&quot;8.添加hosts解析&quot;</span><br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>hosts &lt;&lt;EOF<br><span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> master1<br><span class="hljs-number">192.168</span>.<span class="hljs-number">48.102</span> master2<br><span class="hljs-number">192.168</span>.<span class="hljs-number">48.103</span> master3<br><span class="hljs-number">192.168</span>.<span class="hljs-number">48.104</span> node01<br>EOF<br><br><br>echo <span class="hljs-string">&quot;9.关闭swap分区&quot;</span><br>swapoff -a &amp;&amp; sysctl -w vm.swappiness=<span class="hljs-number">0</span> &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>sed -ri <span class="hljs-string">&#x27;/^[^#]*swap/s@^@#@&#x27;</span> <span class="hljs-regexp">/etc/</span>fstab<br><br><br>echo <span class="hljs-string">&quot;10.安装ntpdate服务，并同步时间&quot;</span><br>yum install chrony -y<br>systemctl start chronyd<br>systemctl enable chronyd<br>chronyc sources<br>chronyc sources<br><br>echo <span class="hljs-string">&quot;11.配置limits.conf&quot;</span><br>ulimit -SHn <span class="hljs-number">65535</span><br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>security/limits.conf &lt;&lt;EOF<br>* soft nofile <span class="hljs-number">65536</span><br>* hard nofile <span class="hljs-number">131072</span><br>* soft nproc <span class="hljs-number">65535</span><br>* hard nproc <span class="hljs-number">655350</span><br>* soft memlock unlimited<br>* hard memlock unlimited<br>EOF<br><br><br>echo <span class="hljs-string">&quot;12.必备工具安装&quot;</span><br>yum install wget psmisc vim net-tools telnet yum-utils device-mapper-persistent-data lvm2 git -y<br><br><br>echo <span class="hljs-string">&quot;13.升级系统并重启&quot;</span><br>yum update -y --exclude=kernel* &amp;&amp; reboot<br><br></code></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">sh </span>k8s_system_init.<span class="hljs-keyword">sh </span>主机名 主机位<br>[master1] <span class="hljs-keyword">sh </span>k8s_system_init.<span class="hljs-keyword">sh </span>master1 <span class="hljs-number">101</span><br><br>[master2] <span class="hljs-keyword">sh </span>k8s_system_init.<span class="hljs-keyword">sh </span>master2 <span class="hljs-number">102</span><br><br>[master3] <span class="hljs-keyword">sh </span>k8s_system_init.<span class="hljs-keyword">sh </span>master3 <span class="hljs-number">103</span><br><br>[node01] <span class="hljs-keyword">sh </span>k8s_system_init.<span class="hljs-keyword">sh </span>node01 <span class="hljs-number">104</span><br><br></code></pre></td></tr></table></figure><h3 id="配置ssh免密"><a href="#配置ssh免密" class="headerlink" title="配置ssh免密"></a>配置ssh免密</h3><p>操作节点[master1]</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install -y sshpass <br><span class="hljs-built_in">cat</span> &gt; sshmianmi.sh &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment"># 目标主机列表</span><br>hosts=(<span class="hljs-string">&quot;master1&quot;</span> <span class="hljs-string">&quot;master2&quot;</span> <span class="hljs-string">&quot;master3&quot;</span> <span class="hljs-string">&quot;node01&quot;</span>)<br><span class="hljs-comment"># 密码</span><br>password=<span class="hljs-string">&quot;123456&quot;</span><br><span class="hljs-comment"># 生成 SSH 密钥对</span><br>ssh-keygen -t rsa -N <span class="hljs-string">&quot;&quot;</span> -f ~/.ssh/id_rsa<br><br><span class="hljs-comment"># 循环遍历目标主机</span><br><span class="hljs-keyword">for</span> host <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;hosts[@]&#125;</span>&quot;</span><br><span class="hljs-keyword">do</span><br>    <span class="hljs-comment"># 复制公钥到目标主机</span><br>    sshpass -p <span class="hljs-string">&quot;<span class="hljs-variable">$password</span>&quot;</span> ssh-copy-id -o StrictHostKeyChecking=no <span class="hljs-string">&quot;<span class="hljs-variable">$host</span>&quot;</span><br>    <br>    <span class="hljs-comment"># 验证免密登录</span><br>    sshpass -p <span class="hljs-string">&quot;<span class="hljs-variable">$password</span>&quot;</span> ssh -o StrictHostKeyChecking=no <span class="hljs-string">&quot;<span class="hljs-variable">$host</span>&quot;</span> <span class="hljs-string">&quot;echo &#x27;免密登录成功&#x27;&quot;</span><br><span class="hljs-keyword">done</span><br>EOF<br><br>sh sshmianmi.sh<br></code></pre></td></tr></table></figure><h2 id="内核及ipvs模块配置"><a href="#内核及ipvs模块配置" class="headerlink" title="内核及ipvs模块配置"></a>内核及ipvs模块配置</h2><p>此步骤是升级内核、配置ipvs模块，开启一些k8s集群中必须的内核参数。配置一下几个方面：</p><ol><li>下载安装包到&#x2F;server&#x2F;soft</li><li>安装kernel</li><li>更改内核启动顺序</li><li>安装ipvsadm</li><li>配置ipvs模块</li><li>开启k8s集群必须的内核参数</li><li>配置完内核，重启服务器</li></ol><p>操作主机：[master1,master2,master3,node01]</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs gams">vi kernel_update.sh<br><br>#!/bin/bash<br>echo <span class="hljs-string">&quot;1.下载安装包到/server/soft&quot;</span><br>mkdir -p /server/soft ; cd /server/soft<br>wget https:<span class="hljs-comment">//mirrors.aliyun.com/elrepo/kernel/el7/x86_64/RPMS/kernel-ml-6.6.3-1.el7.elrepo.x86_64.rpm</span><br>wget https:<span class="hljs-comment">//mirrors.aliyun.com/elrepo/kernel/el7/x86_64/RPMS/kernel-ml-devel-6.6.3-1.el7.elrepo.x86_64.rpm</span><br><br><br>echo <span class="hljs-string">&quot;2.正在安装kernel&quot;</span><br>yum localinstall -y kernel-ml*<br><br><br>echo <span class="hljs-string">&quot;3.更改内核启动顺序&quot;</span><br>grub2-<span class="hljs-keyword">set</span>-default  <span class="hljs-comment">0 &amp;&amp; grub2-mkconfig -o</span> /etc/<span class="hljs-comment">grub2.cfg</span><br>grubby <span class="hljs-comment">--args=</span><span class="hljs-comment">&quot;user_namespace.enable=1&quot;</span> <span class="hljs-comment">--update-kernel=</span><span class="hljs-comment">&quot;$(grubby --default-kernel)&quot;</span><br><br><br>echo <span class="hljs-comment">&quot;4.输出现在内核版本信息&quot;</span><br>grubby <span class="hljs-comment">--default-kernel</span><br><br><br>echo <span class="hljs-comment">&quot;5.安装ipvsadm&quot;</span><br>yum <span class="hljs-comment">install ipvsadm ipset sysstat conntrack libseccomp -y &amp;&gt;</span> /dev/<span class="hljs-comment">null</span><br><br><br>echo <span class="hljs-comment">&quot;6.配置ipvs模块&quot;</span><br>modprobe <span class="hljs-comment">-- ip_vs</span><br>modprobe <span class="hljs-comment">-- ip_vs_rr</span><br>modprobe <span class="hljs-comment">-- ip_vs_wrr</span><br>modprobe <span class="hljs-comment">-- ip_vs_sh</span><br>modprobe <span class="hljs-comment">-- nf_conntrack</span><br><br>cat <span class="hljs-comment">&gt;&gt;</span> /etc/<span class="hljs-comment">modules-load.d</span>/ipvs.conf &lt;&lt;EOF<br>ip_vs<br>ip_vs_lc<br>ip_vs_wlc<br>ip_vs_rr<br>ip_vs_wrr<br>ip_vs_lblc<br>ip_vs_lblcr<br>ip_vs_dh<br>ip_vs_sh<br>ip_vs_fo<br>ip_vs_nq<br>ip_vs_sed<br>ip_vs_ftp<br>ip_vs_sh<br>nf_conntrack<br>ip_tables<br>ip_set<br>xt_set<br>ipt_set<br>ipt_rpfilter<br>ipt_REJECT<br>ipip<br>EOF<br>systemctl enable --now systemd-modules-load.service &amp;&gt; /<span class="hljs-comment">dev</span>/null<br><br><br>echo <span class="hljs-comment">&quot;7.开启k8s集群必须的内核参数&quot;</span><br>cat &lt;&lt;EOF &gt; /<span class="hljs-comment">etc</span>/sysctl.d/<span class="hljs-comment">k8s.conf</span><br>net.ipv4.ip_forward <span class="hljs-comment">= 1</span><br>net.bridge.bridge-nf-call-iptables <span class="hljs-comment">= 1</span><br>net.bridge.bridge-nf-call-ip6tables <span class="hljs-comment">= 1</span><br>fs.may_detach_mounts <span class="hljs-comment">= 1</span><br>net.ipv4.conf.all.route_localnet <span class="hljs-comment">= 1</span><br>vm.overcommit_memory=1<br>vm.panic_on_oom=0<br>fs.inotify.max_user_watches=89100<br>fs.file-max=52706963<br>fs.nr_open=52706963<br>net.netfilter.nf_conntrack_max=2310720<br><br>net.ipv4.tcp_keepalive_time <span class="hljs-comment">= 600</span><br>net.ipv4.tcp_keepalive_probes <span class="hljs-comment">= 3</span><br>net.ipv4.tcp_keepalive_intvl <span class="hljs-comment">=15</span><br>net.ipv4.tcp_max_tw_buckets <span class="hljs-comment">= 36000</span><br>net.ipv4.tcp_tw_reuse <span class="hljs-comment">= 1</span><br>net.ipv4.tcp_max_orphans <span class="hljs-comment">= 327680</span><br>net.ipv4.tcp_orphan_retries <span class="hljs-comment">= 3</span><br>net.ipv4.tcp_syncookies <span class="hljs-comment">= 1</span><br>net.ipv4.tcp_max_syn_backlog <span class="hljs-comment">= 16384</span><br>net.ipv4.ip_conntrack_max <span class="hljs-comment">= 65536</span><br>net.ipv4.tcp_max_syn_backlog <span class="hljs-comment">= 16384</span><br>net.ipv4.tcp_timestamps <span class="hljs-comment">= 0</span><br>net.core.somaxconn <span class="hljs-comment">= 16384</span><br>EOF<br>sysctl <span class="hljs-comment">--system</span><br><br><br>echo <span class="hljs-comment">&quot;8.配置完内核，重启服务器！&quot;</span><br>reboot<br><br></code></pre></td></tr></table></figure><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">sh</span> kernel_update.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><h2 id="检查ipvs加载、内核版本验证"><a href="#检查ipvs加载、内核版本验证" class="headerlink" title="检查ipvs加载、内核版本验证"></a>检查ipvs加载、内核版本验证</h2><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coq">lsmod | <span class="hljs-type">grep</span> --color=<span class="hljs-built_in">auto</span> -e ip_vs -e nf_conntrack<br>uname -a<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/7b6a9d8f90a78eced6f8ae1d42bbdec5697559838.png" alt="image-20231201233238841"></p><h2 id="部署ETCD集群"><a href="#部署ETCD集群" class="headerlink" title="部署ETCD集群"></a>部署ETCD集群</h2><p>本次在master1、master2、master3上进行etcd集群部署</p><h3 id="安装etcd"><a href="#安装etcd" class="headerlink" title="安装etcd"></a>安装etcd</h3><h4 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a>下载安装包</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/etcd-io/</span>etcd<span class="hljs-regexp">/releases/</span>download<span class="hljs-regexp">/v3.5.10/</span>etcd-v3.<span class="hljs-number">5.10</span>-linux-amd64.tar.gz --no-check-certificate<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/e651e3d7cbd00991c8afa5ad082945cc697559838.png" alt="image-20231201233751721"></p><h4 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">tar xf etcd-v3.<span class="hljs-number">5.10</span>-linux-amd64.tar.gz<br>mv etcd-v3.<span class="hljs-number">5.10</span>-linux-amd64 <span class="hljs-regexp">/tmp/</span>etcd<br>cp <span class="hljs-regexp">/tmp/</span>etcd<span class="hljs-regexp">/etcd* /u</span>sr<span class="hljs-regexp">/local/</span>bin/<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/67d93a3046dffd6ee8c251428424acac697559838.png" alt="image-20231201234030329"></p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/8771daaf594a82a3d312ac6e55254ecc697559838.png" alt="image-20231015012712425"></p><h4 id="添加环境变量"><a href="#添加环境变量" class="headerlink" title="添加环境变量"></a>添加环境变量</h4><p>将文件夹中<strong>etcd</strong>和<strong>etcdctl</strong>两个文件添加到环境变量中</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir -p <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/etcd/</span><br>mkdir -p <span class="hljs-regexp">/etc/</span>etcd/<br>chmod <span class="hljs-number">700</span> <span class="hljs-regexp">/var/</span>lib/etcd<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/ca7ff97219be392c73ce9e36ebe09b40697559838.png" alt="image-20231015012808701"></p><h4 id="创建默认配置文件"><a href="#创建默认配置文件" class="headerlink" title="创建默认配置文件"></a>创建默认配置文件</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat &lt;&lt;EOF | sudo tee <span class="hljs-regexp">/etc/</span>etcd/etcd.conf<br><span class="hljs-comment">#节点名称</span><br>ETCD_NAME=$(hostname -s)<br><span class="hljs-comment">#数据存放位置</span><br>ETCD_DATA_DIR=<span class="hljs-regexp">/var/</span>lib/etcd<br>EOF<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/ab7af0c23088dfbd6083947b7b59c127697559838.png" alt="image-20231015012819394"></p><h4 id="创建etcd服务"><a href="#创建etcd服务" class="headerlink" title="创建etcd服务"></a>创建etcd服务</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs routeros">cat &lt;&lt;EOF | sudo tee /etc/systemd/system/etcd.service<br> <br>[Unit]<br><span class="hljs-attribute">Description</span>=Etcd<span class="hljs-built_in"> Server</span><br><span class="hljs-built_in"></span><span class="hljs-attribute">Documentation</span>=https://github.com/coreos/etcd<br><span class="hljs-attribute">After</span>=network.target<br> <br>[Service]<br><span class="hljs-attribute">User</span>=root<br><span class="hljs-attribute">Type</span>=notify<br><span class="hljs-attribute">EnvironmentFile</span>=-/etc/etcd/etcd.conf<br><span class="hljs-attribute">ExecStart</span>=/tmp/etcd/etcd<br><span class="hljs-attribute">Restart</span>=on-failure<br><span class="hljs-attribute">RestartSec</span>=10s<br><span class="hljs-attribute">LimitNOFILE</span>=40000<br> <br>[Install]<br><span class="hljs-attribute">WantedBy</span>=multi-user.target<br>EOF<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/de5dec2c81df4b27cbb395f0da812217697559838.png" alt="image-20231015012847141"></p><h4 id="开启服务"><a href="#开启服务" class="headerlink" title="开启服务"></a>开启服务</h4><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-params">system</span>ctl daemon-reload &amp;&amp; <span class="hljs-params">system</span>ctl enable etcd &amp;&amp; <span class="hljs-params">system</span>ctl start etcd<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/e6dd7c1044841ed87f880586044f817f697559838.png" alt="image-20231015012901227"></p><h4 id="查看版本信息"><a href="#查看版本信息" class="headerlink" title="查看版本信息"></a><strong>查看版本信息</strong></h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">etcd -<span class="hljs-built_in">version</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/a2a7efe249c90e8a65947102b5aec717697559838.png" alt="image-20231201234123720"></p><h3 id="在master1节点上生成etcd配置文件"><a href="#在master1节点上生成etcd配置文件" class="headerlink" title="在master1节点上生成etcd配置文件"></a>在<font color='red'>master1</font>节点上生成etcd配置文件</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs routeros">vim etcd_install.sh<br><br><span class="hljs-attribute">etcd1</span>=192.168.48.101<br><span class="hljs-attribute">etcd2</span>=192.168.48.102<br><span class="hljs-attribute">etcd3</span>=192.168.48.103<br><br><span class="hljs-attribute">TOKEN</span>=smartgo<br>ETCDHOSTS=(<span class="hljs-variable">$etcd1</span> <span class="hljs-variable">$etcd2</span> <span class="hljs-variable">$etcd3</span>)<br>NAMES=(<span class="hljs-string">&quot;master1&quot;</span> <span class="hljs-string">&quot;master2&quot;</span> <span class="hljs-string">&quot;master3&quot;</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;!ETCDHOSTS[@]&#125;</span>&quot;</span>; <span class="hljs-keyword">do</span><br><span class="hljs-attribute">HOST</span>=<span class="hljs-variable">$&#123;ETCDHOSTS[$i]&#125;</span><br><span class="hljs-attribute">NAME</span>=<span class="hljs-variable">$&#123;NAMES[$i]&#125;</span><br>cat &lt;&lt; EOF &gt; /tmp/<span class="hljs-variable">$NAME</span>.conf<br><span class="hljs-comment"># [member]</span><br><span class="hljs-attribute">ETCD_NAME</span>=<span class="hljs-variable">$NAME</span><br><span class="hljs-attribute">ETCD_DATA_DIR</span>=<span class="hljs-string">&quot;/var/lib/etcd/default.etcd&quot;</span><br><span class="hljs-attribute">ETCD_LISTEN_PEER_URLS</span>=<span class="hljs-string">&quot;http://<span class="hljs-variable">$HOST</span>:2380&quot;</span><br><span class="hljs-attribute">ETCD_LISTEN_CLIENT_URLS</span>=<span class="hljs-string">&quot;http://<span class="hljs-variable">$HOST</span>:2379,http://127.0.0.1:2379&quot;</span><br><span class="hljs-comment">#[cluster]</span><br><span class="hljs-attribute">ETCD_INITIAL_ADVERTISE_PEER_URLS</span>=<span class="hljs-string">&quot;http://<span class="hljs-variable">$HOST</span>:2380&quot;</span><br><span class="hljs-attribute">ETCD_INITIAL_CLUSTER</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;NAMES[0]&#125;</span>=http://<span class="hljs-variable">$&#123;ETCDHOSTS[0]&#125;</span>:2380,<span class="hljs-variable">$&#123;NAMES[1]&#125;</span>=http://<span class="hljs-variable">$&#123;ETCDHOSTS[1]&#125;</span>:2380,<span class="hljs-variable">$&#123;NAMES[2]&#125;</span>=http://<span class="hljs-variable">$&#123;ETCDHOSTS[2]&#125;</span>:2380&quot;</span><br><span class="hljs-attribute">ETCD_INITIAL_CLUSTER_STATE</span>=<span class="hljs-string">&quot;new&quot;</span><br><span class="hljs-attribute">ETCD_INITIAL_CLUSTER_TOKEN</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$TOKEN</span>&quot;</span><br><span class="hljs-attribute">ETCD_ADVERTISE_CLIENT_URLS</span>=<span class="hljs-string">&quot;http://<span class="hljs-variable">$HOST</span>:2379&quot;</span><br>EOF<br>done<br>ls /tmp/master*<br>scp /tmp/master2.conf <span class="hljs-variable">$etcd2</span>:/etc/etcd/etcd.conf<br>scp /tmp/master3.conf <span class="hljs-variable">$etcd3</span>:/etc/etcd/etcd.conf<br>cp /tmp/master1.conf /etc/etcd/etcd.conf<br>rm -f /tmp/master*.conf<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/01b659900a16525724d55fa35984fbf1697559838.png" alt="image-20231014195615912"></p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">sh</span> etcd_install.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/0b062e64c96a5015d933f85645d66577697559838.png" alt="image-20231014195602840"></p><h3 id="在k8s集群master节点上启动etcd"><a href="#在k8s集群master节点上启动etcd" class="headerlink" title="在k8s集群master节点上启动etcd"></a>在k8s集群master节点上启动etcd</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">systemctl <span class="hljs-keyword">restart</span> etcd<br>systemctl <span class="hljs-keyword">enable</span> <span class="hljs-comment">--now etcd</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/9fa6cc52778a5f76435e622e12b340d5697559838.png" alt="image-20231014195712942"></p><h3 id="检查etcd集群是否正常"><a href="#检查etcd集群是否正常" class="headerlink" title="检查etcd集群是否正常"></a>检查etcd集群是否正常</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">etcdctl member list</span><br><span class="hljs-attribute">etcdctl endpoint health</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/e5f0c10de8411ddb2b53def5a838e744697559838.png" alt="image-20231015013040955"></p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/a92e88f10383a90ed89a0c0f843d29bd697559838.png" alt="image-20231015013053386"></p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/5dd106819d20f456f21da551140a8039697559838.png" alt="image-20231015013100578"></p><h2 id="高可用组件安装"><a href="#高可用组件安装" class="headerlink" title="高可用组件安装"></a>高可用组件安装</h2><h3 id="haproxy配置"><a href="#haproxy配置" class="headerlink" title="haproxy配置"></a>haproxy配置</h3><p>操作节点：[master1，master2,master3]</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> keepalived haproxy -y<br></code></pre></td></tr></table></figure><p>所有Master节点配置HAProxy，所有Master节点的HAProxy配置相同。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">操作节点：[master1，master2]</span><br><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">/etc/haproxy/haproxy.cfg</span> <span class="hljs-string">&lt;&lt;&quot;EOF&quot;</span><br><br><span class="hljs-string">global</span><br>  <span class="hljs-string">maxconn</span>  <span class="hljs-number">2000</span><br>  <span class="hljs-string">ulimit-n</span>  <span class="hljs-number">16384</span><br>  <span class="hljs-string">log</span>  <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> <span class="hljs-string">local0</span> <span class="hljs-string">err</span><br>  <span class="hljs-string">stats</span> <span class="hljs-string">timeout</span> <span class="hljs-string">30s</span><br><br><span class="hljs-string">defaults</span><br>  <span class="hljs-string">log</span> <span class="hljs-string">global</span><br>  <span class="hljs-string">mode</span>  <span class="hljs-string">http</span><br>  <span class="hljs-string">option</span>  <span class="hljs-string">httplog</span><br>  <span class="hljs-string">timeout</span> <span class="hljs-string">connect</span> <span class="hljs-number">5000</span><br>  <span class="hljs-string">timeout</span> <span class="hljs-string">client</span>  <span class="hljs-number">50000</span><br>  <span class="hljs-string">timeout</span> <span class="hljs-string">server</span>  <span class="hljs-number">50000</span><br>  <span class="hljs-string">timeout</span> <span class="hljs-string">http-request</span> <span class="hljs-string">15s</span><br>  <span class="hljs-string">timeout</span> <span class="hljs-string">http-keep-alive</span> <span class="hljs-string">15s</span><br><br><span class="hljs-string">frontend</span> <span class="hljs-string">monitor-in</span><br>  <span class="hljs-string">bind</span> <span class="hljs-string">*:33305</span><br>  <span class="hljs-string">mode</span> <span class="hljs-string">http</span><br>  <span class="hljs-string">option</span> <span class="hljs-string">httplog</span><br>  <span class="hljs-string">monitor-uri</span> <span class="hljs-string">/monitor</span><br><br><span class="hljs-string">frontend</span> <span class="hljs-string">k8s-master</span><br>  <span class="hljs-string">bind</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">:16443</span><br>  <span class="hljs-string">bind</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:16443</span><br>  <span class="hljs-string">mode</span> <span class="hljs-string">tcp</span><br>  <span class="hljs-string">option</span> <span class="hljs-string">tcplog</span><br>  <span class="hljs-string">tcp-request</span> <span class="hljs-string">inspect-delay</span> <span class="hljs-string">5s</span><br>  <span class="hljs-string">default_backend</span> <span class="hljs-string">k8s-master</span><br><br><span class="hljs-string">backend</span> <span class="hljs-string">k8s-master</span><br>  <span class="hljs-string">mode</span> <span class="hljs-string">tcp</span><br>  <span class="hljs-string">option</span> <span class="hljs-string">tcplog</span><br>  <span class="hljs-string">option</span> <span class="hljs-string">tcp-check</span><br>  <span class="hljs-string">balance</span> <span class="hljs-string">roundrobin</span><br>  <span class="hljs-string">default-server</span> <span class="hljs-string">inter</span> <span class="hljs-string">10s</span> <span class="hljs-string">downinter</span> <span class="hljs-string">5s</span> <span class="hljs-string">rise</span> <span class="hljs-number">2</span> <span class="hljs-string">fall</span> <span class="hljs-number">2</span> <span class="hljs-string">slowstart</span> <span class="hljs-string">60s</span> <span class="hljs-string">maxconn</span> <span class="hljs-number">250</span> <span class="hljs-string">maxqueue</span> <span class="hljs-number">256</span> <span class="hljs-string">weight</span> <span class="hljs-number">100</span><br>  <span class="hljs-string">server</span> <span class="hljs-string">master1</span>   <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span><span class="hljs-string">:6443</span>  <span class="hljs-string">check</span><br>  <span class="hljs-string">server</span> <span class="hljs-string">master2</span>   <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.102</span><span class="hljs-string">:6443</span>  <span class="hljs-string">check</span><br>  <span class="hljs-string">server</span> <span class="hljs-string">master3</span>   <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.103</span><span class="hljs-string">:6443</span>  <span class="hljs-string">check</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure><h3 id="Keepalived配置"><a href="#Keepalived配置" class="headerlink" title="Keepalived配置"></a>Keepalived配置</h3><p>操作节点：[master1，master2,master3]</p><p>所有Master节点配置Keepalived，以下三个Master节点配置注意ip和网卡。</p><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs fsharp">操作节点：[master1]<br><br>cat <span class="hljs-operator">&gt;/</span>etc<span class="hljs-operator">/</span>keepalived<span class="hljs-operator">/</span>keepalived.conf  <span class="hljs-operator">&lt;&lt;</span><span class="hljs-string">&quot;EOF&quot;</span><br><br><span class="hljs-operator">!</span> Configuration File <span class="hljs-keyword">for</span> keepalived<br><span class="hljs-keyword">global_defs</span> &#123;<br>    router_id LVS_DEVEL<br>script_user root<br>    enable_script_security<br>&#125;<br>vrrp_script <span class="hljs-keyword">chk_apiserver</span> &#123;<br>    script <span class="hljs-string">&quot;/etc/keepalived/check_apiserver.sh&quot;</span><br>    interval <span class="hljs-number">5</span><br>    weight <span class="hljs-number">-5</span><br>    fall <span class="hljs-number">2</span>  <br>rise <span class="hljs-number">1</span><br>&#125;<br>vrrp_instance VI_1 &#123;<br>    state MASTER<br>    <span class="hljs-keyword">interface</span> ens33<br>    mcast_src_ip <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span><br>    virtual_router_id <span class="hljs-number">51</span><br>    priority <span class="hljs-number">101</span><br>    advert_int <span class="hljs-number">2</span><br>    <span class="hljs-keyword">authentication</span> &#123;<br>        auth_type PASS<br>        auth_pass K8SHA_KA_AUTH<br>    &#125;<br>    <span class="hljs-keyword">virtual_ipaddress</span> &#123;<br>        <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.200</span><br>    &#125;<br>    <span class="hljs-keyword">track_script</span> &#123;<br>       chk_apiserver<br>    &#125;<br>&#125;<br>EOF<br></code></pre></td></tr></table></figure><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs fsharp">操作节点：[master2]<br>cat <span class="hljs-operator">&gt;/</span>etc<span class="hljs-operator">/</span>keepalived<span class="hljs-operator">/</span>keepalived.conf  <span class="hljs-operator">&lt;&lt;</span><span class="hljs-string">&quot;EOF&quot;</span><br><br><span class="hljs-operator">!</span> Configuration File <span class="hljs-keyword">for</span> keepalived<br><span class="hljs-keyword">global_defs</span> &#123;<br>    router_id LVS_DEVEL<br>script_user root<br>    enable_script_security<br>&#125;<br>vrrp_script <span class="hljs-keyword">chk_apiserver</span> &#123;<br>    script <span class="hljs-string">&quot;/etc/keepalived/check_apiserver.sh&quot;</span><br>    interval <span class="hljs-number">5</span><br>    weight <span class="hljs-number">-5</span><br>    fall <span class="hljs-number">2</span>  <br>rise <span class="hljs-number">1</span><br>&#125;<br>vrrp_instance VI_1 &#123;<br>    state BACKUP<br>    <span class="hljs-keyword">interface</span> ens33<br>    mcast_src_ip <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.102</span><br>    virtual_router_id <span class="hljs-number">51</span><br>    priority <span class="hljs-number">100</span><br>    advert_int <span class="hljs-number">2</span><br>    <span class="hljs-keyword">authentication</span> &#123;<br>        auth_type PASS<br>        auth_pass K8SHA_KA_AUTH<br>    &#125;<br>    <span class="hljs-keyword">virtual_ipaddress</span> &#123;<br>        <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.200</span><br>    &#125;<br>    <span class="hljs-keyword">track_script</span> &#123;<br>       chk_apiserver<br>    &#125;<br>&#125;<br>EOF<br></code></pre></td></tr></table></figure><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs fsharp">操作节点：[master3]<br>cat <span class="hljs-operator">&gt;/</span>etc<span class="hljs-operator">/</span>keepalived<span class="hljs-operator">/</span>keepalived.conf  <span class="hljs-operator">&lt;&lt;</span><span class="hljs-string">&quot;EOF&quot;</span><br><br><span class="hljs-operator">!</span> Configuration File <span class="hljs-keyword">for</span> keepalived<br><span class="hljs-keyword">global_defs</span> &#123;<br>    router_id LVS_DEVEL<br>script_user root<br>    enable_script_security<br>&#125;<br>vrrp_script <span class="hljs-keyword">chk_apiserver</span> &#123;<br>    script <span class="hljs-string">&quot;/etc/keepalived/check_apiserver.sh&quot;</span><br>    interval <span class="hljs-number">5</span><br>    weight <span class="hljs-number">-5</span><br>    fall <span class="hljs-number">2</span>  <br>rise <span class="hljs-number">1</span><br>&#125;<br>vrrp_instance VI_1 &#123;<br>    state BACKUP<br>    <span class="hljs-keyword">interface</span> ens33<br>    mcast_src_ip <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.103</span><br>    virtual_router_id <span class="hljs-number">51</span><br>    priority <span class="hljs-number">99</span><br>    advert_int <span class="hljs-number">2</span><br>    <span class="hljs-keyword">authentication</span> &#123;<br>        auth_type PASS<br>        auth_pass K8SHA_KA_AUTH<br>    &#125;<br>    <span class="hljs-keyword">virtual_ipaddress</span> &#123;<br>        <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.200</span><br>    &#125;<br>    <span class="hljs-keyword">track_script</span> &#123;<br>       chk_apiserver<br>    &#125;<br>&#125;<br>EOF<br></code></pre></td></tr></table></figure><h3 id="配置Keepalived健康检查文件"><a href="#配置Keepalived健康检查文件" class="headerlink" title="配置Keepalived健康检查文件"></a>配置Keepalived健康检查文件</h3><p>操作节点：[master1，master2,master3]</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat &gt; <span class="hljs-regexp">/etc/</span>keepalived/check_apiserver.sh &lt;&lt;<span class="hljs-string">&quot;EOF&quot;</span><br> <span class="hljs-comment">#!/bin/bash</span><br> err=<span class="hljs-number">0</span><br> <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> $(seq <span class="hljs-number">1</span> <span class="hljs-number">3</span>)<br> <span class="hljs-keyword">do</span><br>    check_code=$(pgrep haproxy)<br>    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$check_code</span> == <span class="hljs-string">&quot;&quot;</span> ]]; then<br>        err=$(expr <span class="hljs-variable">$err</span> + <span class="hljs-number">1</span>)<br>        sleep <span class="hljs-number">1</span><br>        <span class="hljs-keyword">continue</span><br>    <span class="hljs-keyword">else</span><br>        err=<span class="hljs-number">0</span><br>        <span class="hljs-keyword">break</span><br>    fi<br> done<br> <br> <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$err</span> != <span class="hljs-string">&quot;0&quot;</span> ]]; then<br>    echo <span class="hljs-string">&quot;systemctl stop keepalived&quot;</span><br>    <span class="hljs-regexp">/usr/</span>bin/systemctl stop keepalived<br>    <span class="hljs-keyword">exit</span> <span class="hljs-number">1</span><br> <span class="hljs-keyword">else</span><br>    <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br> fi<br>EOF<br><br>chmod +x <span class="hljs-regexp">/etc/</span>keepalived/check_apiserver.sh<br></code></pre></td></tr></table></figure><h3 id="启动haproxy和keepalived"><a href="#启动haproxy和keepalived" class="headerlink" title="启动haproxy和keepalived"></a>启动haproxy和keepalived</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">操作节点：[master，master2,master3]<br>systemctl daemon-reload<br>systemctl <span class="hljs-keyword">enable</span> <span class="hljs-comment">--now haproxy</span><br>systemctl <span class="hljs-keyword">enable</span> <span class="hljs-comment">--now keepalived</span><br></code></pre></td></tr></table></figure><h3 id="测试集群负载均衡高可用"><a href="#测试集群负载均衡高可用" class="headerlink" title="测试集群负载均衡高可用"></a>测试集群负载均衡高可用</h3><p>查看master1的vip</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">ip <span class="hljs-selector-tag">a</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/0176020d9bcd8b4c85ea2e4f8d6b4afa697559838.png" alt="image-20231109232708584"></p><p>模拟master1的宕机测试，看看vip会不会漂移到master2去</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[master1]</span> poweroff<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/126a03a1112b6ab1ae01e0603ac0023b697559838.png" alt="image-20231109232803276"></p><p>这时候查看master2的ip列表</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[master2]</span> poweroff<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/2a02b2b0a2310908a960dff95daf55d8697559838.png" alt="image-20231109232825999"></p><p>结论：这时可以知道，负载均衡集群成功，当master1出现宕机情况，vip会从master1漂移到master2</p><h2 id="docker安装"><a href="#docker安装" class="headerlink" title="docker安装"></a>docker安装</h2><h3 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h3><p>操作节点[master1，master2，master3,node01]</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//</span>download.docker.com<span class="hljs-regexp">/linux/</span>static<span class="hljs-regexp">/stable/</span>x86_64/docker-<span class="hljs-number">24.0</span>.<span class="hljs-number">7</span>.tgz<br>tar xf docker-*.tgz<br>cp docker<span class="hljs-regexp">/* /u</span>sr<span class="hljs-regexp">/bin/</span><br><span class="hljs-comment">#创建containerd的service文件,并且启动</span><br>cat &gt;<span class="hljs-regexp">/etc/</span>systemd<span class="hljs-regexp">/system/</span>containerd.service &lt;&lt;EOF<br>[Unit]<br>Description=containerd container runtime<br>Documentation=https:<span class="hljs-regexp">//</span>containerd.io<br>After=network.target local-fs.target<br>[Service]<br>ExecStartPre=-<span class="hljs-regexp">/sbin/m</span>odprobe overlay<br>ExecStart=<span class="hljs-regexp">/usr/</span>bin/containerd<br>Type=notify<br>Delegate=yes<br>KillMode=process<br>Restart=always<br>RestartSec=<span class="hljs-number">5</span><br>LimitNPROC=infinity<br>LimitCORE=infinity<br>LimitNOFILE=<span class="hljs-number">1048576</span><br>TasksMax=infinity<br>OOMScoreAdjust=-<span class="hljs-number">999</span><br>[Install]<br>WantedBy=multi-user.target<br>EOF<br>systemctl enable --now containerd.service<br><br><span class="hljs-comment">#准备docker的service文件</span><br><br>cat &gt; <span class="hljs-regexp">/etc/</span>systemd<span class="hljs-regexp">/system/</span>docker.service &lt;&lt;EOF<br>[Unit]<br>Description=Docker Application Container Engine<br>Documentation=https:<span class="hljs-regexp">//</span>docs.docker.com<br>After=network-online.target firewalld.service containerd.service<br>Wants=network-online.target<br>Requires=docker.socket containerd.service<br>[Service]<br>Type=notify<br>ExecStart=<span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/dockerd -H fd:/</span><span class="hljs-regexp">/ --containerd=/</span>run<span class="hljs-regexp">/containerd/</span>containerd.sock<br>ExecReload=<span class="hljs-regexp">/bin/</span>kill -s HUP <span class="hljs-variable">$MAINPID</span><br>TimeoutSec=<span class="hljs-number">0</span><br>RestartSec=<span class="hljs-number">2</span><br>Restart=always<br>StartLimitBurst=<span class="hljs-number">3</span><br>StartLimitInterval=<span class="hljs-number">60</span>s<br>LimitNOFILE=infinity<br>LimitNPROC=infinity<br>LimitCORE=infinity<br>TasksMax=infinity<br>Delegate=yes<br>KillMode=process<br>OOMScoreAdjust=-<span class="hljs-number">500</span><br>[Install]<br>WantedBy=multi-user.target<br>EOF<br><br><br><span class="hljs-comment">#准备docker的socket文件</span><br><br>cat &gt; <span class="hljs-regexp">/etc/</span>systemd<span class="hljs-regexp">/system/</span>docker.socket &lt;&lt;EOF<br>[Unit]<br>Description=Docker Socket <span class="hljs-keyword">for</span> the API<br>[Socket]<br>ListenStream=<span class="hljs-regexp">/var/</span>run/docker.sock<br>SocketMode=<span class="hljs-number">0660</span><br>SocketUser=root<br>SocketGroup=docker<br>[Install]<br>WantedBy=sockets.target<br>EOF<br>groupadd docker<br><br>systemctl enable --now docker.socket  &amp;&amp; systemctl enable --now docker.service<br><br><br><span class="hljs-comment">#验证</span><br>mkdir <span class="hljs-regexp">/etc/</span>docker<br>cat &gt;<span class="hljs-regexp">/etc/</span>docker/daemon.json &lt;&lt;EOF<br>&#123;<br>  <span class="hljs-string">&quot;exec-opts&quot;</span>: [<span class="hljs-string">&quot;native.cgroupdriver=systemd&quot;</span>],<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<br>    <span class="hljs-string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span>,<br>    <span class="hljs-string">&quot;http://hub-mirror.c.163.com&quot;</span><br>  ],<br>  <span class="hljs-string">&quot;max-concurrent-downloads&quot;</span>: <span class="hljs-number">10</span>,<br>  <span class="hljs-string">&quot;log-driver&quot;</span>: <span class="hljs-string">&quot;json-file&quot;</span>,<br>  <span class="hljs-string">&quot;log-level&quot;</span>: <span class="hljs-string">&quot;warn&quot;</span>,<br>  <span class="hljs-string">&quot;log-opts&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;max-size&quot;</span>: <span class="hljs-string">&quot;10m&quot;</span>,<br>    <span class="hljs-string">&quot;max-file&quot;</span>: <span class="hljs-string">&quot;3&quot;</span><br>    &#125;,<br>  <span class="hljs-string">&quot;data-root&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker&quot;</span><br>&#125;<br>EOF<br>systemctl restart docker<br></code></pre></td></tr></table></figure><h3 id="安装cri-docker"><a href="#安装cri-docker" class="headerlink" title="安装cri-docker"></a>安装cri-docker</h3><p>操作节点[master1，master2，master3,node01]</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/Mirantis/</span>cri-dockerd<span class="hljs-regexp">/releases/</span>download<span class="hljs-regexp">/v0.3.7/</span>cri-dockerd-<span class="hljs-number">0.3</span>.<span class="hljs-number">7</span>.amd64.tgz<br><br>tar -zxvf cri-dockerd-<span class="hljs-number">0.3</span>.<span class="hljs-number">7</span>.amd64.tgz<br>cp cri-dockerd<span class="hljs-regexp">/cri-dockerd  /u</span>sr<span class="hljs-regexp">/bin/</span><br>chmod +x <span class="hljs-regexp">/usr/</span>bin/cri-dockerd<br><br><br><span class="hljs-comment">#写入启动配置文件</span><br>cat &gt;  <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system/cri-docker.service &lt;&lt;EOF<br>[Unit]<br>Description=CRI Interface <span class="hljs-keyword">for</span> Docker Application Container Engine<br>Documentation=https:<span class="hljs-regexp">//</span>docs.mirantis.com<br>After=network-online.target firewalld.service docker.service<br>Wants=network-online.target<br>Requires=cri-docker.socket<br> <br>[Service]<br>Type=notify<br>ExecStart=<span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/cri-dockerd --network-plugin=cni --pod-infra-container-image=registry.aliyuncs.com/g</span>oogle_containers/pause:<span class="hljs-number">3.9</span><br>ExecReload=<span class="hljs-regexp">/bin/</span>kill -s HUP <span class="hljs-variable">$MAINPID</span><br>TimeoutSec=<span class="hljs-number">0</span><br>RestartSec=<span class="hljs-number">2</span><br>Restart=always<br> <br>StartLimitBurst=<span class="hljs-number">3</span><br> <br>StartLimitInterval=<span class="hljs-number">60</span>s<br> <br>LimitNOFILE=infinity<br>LimitNPROC=infinity<br>LimitCORE=infinity<br> <br>TasksMax=infinity<br>Delegate=yes<br>KillMode=process<br> <br>[Install]<br>WantedBy=multi-user.target<br>EOF<br><br><br><span class="hljs-comment">#写入socket配置文件</span><br>cat &gt; <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system/cri-docker.socket &lt;&lt;EOF<br>[Unit]<br>Description=CRI Docker Socket <span class="hljs-keyword">for</span> the API<br>PartOf=cri-docker.service<br> <br>[Socket]<br>ListenStream=%t/cri-dockerd.sock<br>SocketMode=<span class="hljs-number">0660</span><br>SocketUser=root<br>SocketGroup=docker<br> <br>[Install]<br>WantedBy=sockets.target<br>EOF<br><br>systemctl daemon-reload &amp;&amp; systemctl enable cri-docker --now<br></code></pre></td></tr></table></figure><h2 id="K8S集群安装"><a href="#K8S集群安装" class="headerlink" title="K8S集群安装"></a>K8S集群安装</h2><h3 id="安装k8s所需的工具"><a href="#安装k8s所需的工具" class="headerlink" title="安装k8s所需的工具"></a>安装k8s所需的工具</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros">操作节点[master1，master2，master3,node01]<br><br>yum -y install  kubeadm kubelet kubectl<br><br><span class="hljs-comment">#为了实现docker使用的cgroupdriver与kubelet使用的cgroup的一致性，配置如下：</span><br>sed -i <span class="hljs-string">&#x27;s/^KUBELET_EXTRA_ARGS=/KUBELET_EXTRA_ARGS=&quot;--cgroup-driver=systemd&quot;/g&#x27;</span> /etc/sysconfig/kubelet<br><br><span class="hljs-comment">#设置kubelet为开机自启动即可，由于没有生成配置文件，集群初始化后自动启动</span><br>systemctl <span class="hljs-built_in">enable</span> kubelet<br>systemctl <span class="hljs-built_in">enable</span> kubelet.service<br></code></pre></td></tr></table></figure><h3 id="初始化集群"><a href="#初始化集群" class="headerlink" title="初始化集群"></a>初始化集群</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">kubeadm-config.yaml</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">EOF</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">kubeadm.k8s.io/v1beta3</span><br><span class="hljs-attr">bootstrapTokens:</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">groups:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">system:bootstrappers:kubeadm:default-node-token</span><br>  <span class="hljs-attr">token:</span> <span class="hljs-string">abcdef.0123456789abcdef</span><br>  <span class="hljs-attr">ttl:</span> <span class="hljs-string">24h0m0s</span><br>  <span class="hljs-attr">usages:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">signing</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">authentication</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">InitConfiguration</span><br><span class="hljs-attr">localAPIEndpoint:</span><br>  <span class="hljs-attr">advertiseAddress:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span><br>  <span class="hljs-attr">bindPort:</span> <span class="hljs-number">6443</span><br><span class="hljs-attr">nodeRegistration:</span><br>  <span class="hljs-attr">criSocket:</span> <span class="hljs-string">unix:///var/run/cri-dockerd.sock</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">kubeadm.k8s.io/v1beta3</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">ClusterConfiguration</span><br><span class="hljs-attr">kubernetesVersion:</span> <span class="hljs-number">1.28</span><span class="hljs-number">.2</span><br><span class="hljs-attr">imageRepository:</span> <span class="hljs-string">registry.aliyuncs.com/google_containers</span><br><span class="hljs-attr">networking:</span><br>  <span class="hljs-attr">dnsDomain:</span> <span class="hljs-string">cluster.local</span><br>  <span class="hljs-attr">podSubnet:</span> <span class="hljs-number">10.244</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/16</span><br>  <span class="hljs-attr">serviceSubnet:</span> <span class="hljs-number">10.96</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/12</span><br><span class="hljs-attr">scheduler:</span> &#123;&#125;<br><span class="hljs-attr">apiServerCertSANs:</span><br><span class="hljs-bullet">-</span> <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.200</span><br><span class="hljs-attr">controlPlaneEndpoint:</span> <span class="hljs-string">&quot;192.168.48.200:16443&quot;</span><br><span class="hljs-attr">etcd:</span><br>  <span class="hljs-attr">external:</span><br>    <span class="hljs-attr">endpoints:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">http://192.168.48.101:2379</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">http://192.168.48.102:2379</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">http://192.168.48.103:2379</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">kubeproxy.config.k8s.io/v1alpha1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">KubeProxyConfiguration</span><br><span class="hljs-attr">featureGates:</span><br>  <span class="hljs-comment"># SupportIPVSProxyMode: false</span><br><span class="hljs-attr">mode:</span> <span class="hljs-string">ipvs</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">kubelet.config.k8s.io/v1beta1</span><br><span class="hljs-attr">authentication:</span><br>  <span class="hljs-attr">anonymous:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">webhook:</span><br>    <span class="hljs-attr">cacheTTL:</span> <span class="hljs-string">0s</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">x509:</span><br>    <span class="hljs-attr">clientCAFile:</span> <span class="hljs-string">/etc/kubernetes/pki/ca.crt</span><br><span class="hljs-attr">authorization:</span><br>  <span class="hljs-attr">mode:</span> <span class="hljs-string">Webhook</span><br>  <span class="hljs-attr">webhook:</span><br>    <span class="hljs-attr">cacheAuthorizedTTL:</span> <span class="hljs-string">0s</span><br>    <span class="hljs-attr">cacheUnauthorizedTTL:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">cgroupDriver:</span> <span class="hljs-string">systemd</span><br><span class="hljs-attr">clusterDNS:</span><br><span class="hljs-bullet">-</span> <span class="hljs-number">10.96</span><span class="hljs-number">.0</span><span class="hljs-number">.10</span><br><span class="hljs-attr">clusterDomain:</span> <span class="hljs-string">cluster.local</span><br><span class="hljs-attr">cpuManagerReconcilePeriod:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">evictionPressureTransitionPeriod:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">fileCheckFrequency:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">healthzBindAddress:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br><span class="hljs-attr">healthzPort:</span> <span class="hljs-number">10248</span><br><span class="hljs-attr">httpCheckFrequency:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">imageMinimumGCAge:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">KubeletConfiguration</span><br><span class="hljs-attr">logging:</span><br>  <span class="hljs-attr">flushFrequency:</span> <span class="hljs-number">0</span><br>  <span class="hljs-attr">options:</span><br>    <span class="hljs-attr">json:</span><br>      <span class="hljs-attr">infoBufferSize:</span> <span class="hljs-string">&quot;0&quot;</span><br>  <span class="hljs-attr">verbosity:</span> <span class="hljs-number">0</span><br><span class="hljs-attr">memorySwap:</span> &#123;&#125;<br><span class="hljs-attr">nodeStatusReportFrequency:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">nodeStatusUpdateFrequency:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">rotateCertificates:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">runtimeRequestTimeout:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">shutdownGracePeriod:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">shutdownGracePeriodCriticalPods:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">staticPodPath:</span> <span class="hljs-string">/etc/kubernetes/manifests</span><br><span class="hljs-attr">streamingConnectionIdleTimeout:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">syncFrequency:</span> <span class="hljs-string">0s</span><br><span class="hljs-attr">volumeStatsAggPeriod:</span> <span class="hljs-string">0s</span><br><span class="hljs-string">EOF</span><br><br></code></pre></td></tr></table></figure><h3 id="准备k8s所需的镜像"><a href="#准备k8s所需的镜像" class="headerlink" title="准备k8s所需的镜像"></a>准备k8s所需的镜像</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino">操作节点[master1]<br><br>kubeadm config images pull --config kubeadm-config.yaml<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/ce115b5b28cc5ab3ebcd567294737a43697559838.png" alt="image-20231202000515399"></p><h3 id="master1节点初始化"><a href="#master1节点初始化" class="headerlink" title="master1节点初始化"></a>master1节点初始化</h3><p>操作节点[master1]</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">kubeadm init <span class="hljs-attr">--config</span> kubeadm-config<span class="hljs-selector-class">.yaml</span> <span class="hljs-attr">--upload-certs</span> <span class="hljs-attr">--v</span>=<span class="hljs-number">9</span><br></code></pre></td></tr></table></figure><p>会生成信息</p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/7f60e65f8637a54135d92dd6a756595f697559838.png" alt="image-20231202000611013"></p><p>记录信息后面会用到</p><p>初始化成功以后，会产生Token值，用于其他节点加入时使用，因此要记录下初始化成功生成的token值（令牌值），<strong>有效期24小时，后续需要操作可以重新生成Token</strong></p><p>操作节点[master1]</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">kubeadm <span class="hljs-keyword">join</span> <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.200</span>:<span class="hljs-number">16443</span> <span class="hljs-comment">--token abcdef.0123456789abcdef \</span><br>        <span class="hljs-comment">--discovery-token-ca-cert-hash sha256:bc27d821932d27bb4b49c187ddd412569ead01b14009e03b6d03aa3ea54e4612 \</span><br>        <span class="hljs-comment">--control-plane --certificate-key 37b1370abd3584c354517603bf97e10c795e3367e05e5ff3f2f6ca14288d8054</span><br><br><br>kubeadm <span class="hljs-keyword">join</span> <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.200</span>:<span class="hljs-number">16443</span> <span class="hljs-comment">--token abcdef.0123456789abcdef \</span><br>        <span class="hljs-comment">--discovery-token-ca-cert-hash sha256:bc27d821932d27bb4b49c187ddd412569ead01b14009e03b6d03aa3ea54e4612</span><br></code></pre></td></tr></table></figure><p><code>操作kubect报错：</code></p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/0ea7d75c613d48f13e34f481c6cf08b0697559838.png" alt="image-20231110180035297"></p><p>此时通过kubectl操作，会出现失败，因为还没有将集群的”钥匙”交给root用户。<code>/etc/kubernetes/admin.conf</code> 文件是 Kubernetes（K8s）集群中的管理员配置文件，它包含了用于管理集群的身份验证和访问信息。所以下面进行配置环境变量，用于访问Kubernetes集群：</p><p><code>添加环境变量</code></p><p>操作节点[master1]</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/.kube<br>sudo <span class="hljs-built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="hljs-variable">$HOME</span>/.kube/config<br>sudo <span class="hljs-built_in">chown</span> $(<span class="hljs-built_in">id</span> -u):$(<span class="hljs-built_in">id</span> -g) <span class="hljs-variable">$HOME</span>/.kube/config<br></code></pre></td></tr></table></figure><h3 id="添加其他master节点至集群中"><a href="#添加其他master节点至集群中" class="headerlink" title="添加其他master节点至集群中"></a>添加其他master节点至集群中</h3><p>操作节点[master2,master3]</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">操作节点<span class="hljs-selector-attr">[master2,master3]</span><br>kubeadm join <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> <span class="hljs-attr">--token</span> abcdef.<span class="hljs-number">0123456789</span>abcdef \<br>        <span class="hljs-attr">--discovery-token-ca-cert-hash</span> sha256:bc27d821932d27bb4b49c187ddd412569ead01b14009e03b6d03aa3ea54e4612 \<br>        <span class="hljs-attr">--control-plane</span> <span class="hljs-attr">--certificate-key</span> <span class="hljs-number">37</span>b1370abd3584c354517603bf97e10c795e3367e05e5ff3f2f6ca14288d8054 \<br>        <span class="hljs-attr">--cri-socket</span> unix:<span class="hljs-comment">///var/run/cri-dockerd.sock </span><br></code></pre></td></tr></table></figure><p>注意：这里末尾添加了<code>--cri-socket unix:///var/run/cri-dockerd.sock </code></p><p>接着给<code>master2</code>添加环境变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">操作节点[master2,master3]<br><span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/.kube<br>sudo <span class="hljs-built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="hljs-variable">$HOME</span>/.kube/config<br>sudo <span class="hljs-built_in">chown</span> $(<span class="hljs-built_in">id</span> -u):$(<span class="hljs-built_in">id</span> -g) <span class="hljs-variable">$HOME</span>/.kube/config<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/3f20e99d3edff4874993811b81d45783697559838.png" alt="image-20231110180919008"></p><p>这里没有展示master3的图片，但是步骤一样的</p><h3 id="模拟Token过期重新生成并加入Node节点"><a href="#模拟Token过期重新生成并加入Node节点" class="headerlink" title="模拟Token过期重新生成并加入Node节点"></a>模拟Token过期重新生成并加入Node节点</h3><p>假设加入集群的token过期了。node01无法加入了，这里就模拟一下这种情况</p><ol><li>Token过期后生成新的token：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">kubeadm token create --print-join-command<br></code></pre></td></tr></table></figure><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs perl">[root@master1 ~]<span class="hljs-comment"># kubeadm token create --print-join-command</span><br>kubeadm <span class="hljs-keyword">join</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> --token ke773y.<span class="hljs-number">6</span>hv9utk33to4vwfy --discovery-token-ca-cert-hash sha256:bc27d821932d27bb4b49c187ddd412569ead01b14009e03b6d03aa3ea54e4612<br>[root@master1 ~]<span class="hljs-comment">#</span><br><br></code></pre></td></tr></table></figure><p>其中，<code>192.168.48.200:16443</code> 是你的 Kubernetes API 服务器的地址和端口，<code>ke773y.6hv9utk33to4vwfy</code> 是新的令牌，<code>sha256:bc27d821932d27bb4b49c187ddd412569ead01b14009e03b6d03aa3ea54e4612</code> 是令牌的 CA 证书哈希值。</p><ol start="2"><li>Master需要生成–certificate-key：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">kubeadm init phase upload-certs --upload-certs<br></code></pre></td></tr></table></figure><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript">[root@master1 ~]<span class="hljs-comment"># kubeadm init phase upload-certs --upload-certs</span><br>W1110 <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">03.426245</span>   <span class="hljs-number">10185</span> <span class="hljs-built_in">version</span>.go:<span class="hljs-number">104</span>] could <span class="hljs-keyword">not</span> fetch a Kubernetes <span class="hljs-built_in">version</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">the</span> internet: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> URL <span class="hljs-string">&quot;https://dl.k8s.io/release/stable-1.txt&quot;</span>: Get <span class="hljs-string">&quot;https://dl.k8s.io/release/stable-1.txt&quot;</span>: context deadline exceeded (Client.Timeout exceeded <span class="hljs-keyword">while</span> awaiting headers)<br>W1110 <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">03.426320</span>   <span class="hljs-number">10185</span> <span class="hljs-built_in">version</span>.go:<span class="hljs-number">105</span>] falling <span class="hljs-keyword">back</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">local</span> client <span class="hljs-built_in">version</span>: v1<span class="hljs-number">.28</span><span class="hljs-number">.2</span><br>[upload-certs] Storing <span class="hljs-keyword">the</span> certificates <span class="hljs-keyword">in</span> Secret <span class="hljs-string">&quot;kubeadm-certs&quot;</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> <span class="hljs-string">&quot;kube-system&quot;</span> Namespace<br>[upload-certs] Using certificate key:<br><span class="hljs-number">5</span>d3706028d5e569324a4c456c81ae0f5551ece88b3132f03917668c6b0605128<br></code></pre></td></tr></table></figure><p>其中，<code>5d3706028d5e569324a4c456c81ae0f5551ece88b3132f03917668c6b0605128</code> 是证书密钥。</p><ol start="3"><li>生成新的Token用于集群添加新Node节点</li></ol><p>操作节点[node01]</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">kubeadm join 192.168.48.200<span class="hljs-function">:16443</span> \<br>        <span class="hljs-params">--token</span> ke773y.6hv9utk33to4vwfy \<br>        <span class="hljs-params">--discovery-token-ca-cert-hash</span> sha256<span class="hljs-function">:bc27d821932d27bb4b49c187ddd412569ead01b14009e03b6d03aa3ea54e4612</span>  \<br>        <span class="hljs-params">--cri-socket</span> unix:<span class="hljs-string">///var/run/cri-dockerd.sock</span> <br></code></pre></td></tr></table></figure><p>注意：这里末尾添加了<code>--cri-socket unix:///var/run/cri-dockerd.sock </code></p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/3e809e4e0ccbd1d84b7563de484600dc697559838.png" alt="image-20231110181623386"></p><p>这时在master查看node状态（显示为notready不影响）</p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/35ee9666e8251b54f20eec2a53ff9058697559838.png" alt="image-20231111145807000"></p><h3 id="模拟新加master节点的加入K8S集群中"><a href="#模拟新加master节点的加入K8S集群中" class="headerlink" title="模拟新加master节点的加入K8S集群中"></a>模拟新加master节点的加入K8S集群中</h3><p>假设我们新加master节点的话，就拼接token，<code>从刚刚生成的token拼接</code></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">[root@master1 ~]# kubeadm token create --<span class="hljs-keyword">print</span>-<span class="hljs-keyword">join</span>-<span class="hljs-keyword">command</span><br>kubeadm <span class="hljs-keyword">join</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> --token tn5q1b.<span class="hljs-number">7</span>w1jj77ewup7k2in --discovery-token-<span class="hljs-keyword">ca</span>-cert-hash <span class="hljs-built_in">sha256</span>:cc5427e0e133d95250ab0aa90976fea2c383278b6345fd7e8c28702ac8dfc61f<br></code></pre></td></tr></table></figure><p>这里提取信息1</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">kubeadm join <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> --token tn<span class="hljs-number">5</span>q<span class="hljs-number">1</span>b.<span class="hljs-number">7</span>w<span class="hljs-number">1</span>jj<span class="hljs-number">77</span>ewup<span class="hljs-number">7</span>k<span class="hljs-number">2</span>in --discovery-token-ca-cert-hash sha<span class="hljs-number">256</span>:<span class="hljs-keyword">cc</span><span class="hljs-number">5427e0</span>e<span class="hljs-number">133</span>d<span class="hljs-number">95250</span>ab<span class="hljs-number">0</span>aa<span class="hljs-number">90976</span>fea<span class="hljs-number">2</span><span class="hljs-keyword">c</span><span class="hljs-number">383278</span>b<span class="hljs-number">6345</span>fd<span class="hljs-number">7e8</span><span class="hljs-keyword">c</span><span class="hljs-number">28702</span>ac<span class="hljs-number">8</span>dfc<span class="hljs-number">61</span>f<br></code></pre></td></tr></table></figure><p>接着</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript">[root@master1 ~]<span class="hljs-comment"># kubeadm init phase upload-certs --upload-certs</span><br>W1110 <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">03.426245</span>   <span class="hljs-number">10185</span> <span class="hljs-built_in">version</span>.go:<span class="hljs-number">104</span>] could <span class="hljs-keyword">not</span> fetch a Kubernetes <span class="hljs-built_in">version</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">the</span> internet: unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> URL <span class="hljs-string">&quot;https://dl.k8s.io/release/stable-1.txt&quot;</span>: Get <span class="hljs-string">&quot;https://dl.k8s.io/release/stable-1.txt&quot;</span>: context deadline exceeded (Client.Timeout exceeded <span class="hljs-keyword">while</span> awaiting headers)<br>W1110 <span class="hljs-number">18</span>:<span class="hljs-number">12</span>:<span class="hljs-number">03.426320</span>   <span class="hljs-number">10185</span> <span class="hljs-built_in">version</span>.go:<span class="hljs-number">105</span>] falling <span class="hljs-keyword">back</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">local</span> client <span class="hljs-built_in">version</span>: v1<span class="hljs-number">.28</span><span class="hljs-number">.2</span><br>[upload-certs] Storing <span class="hljs-keyword">the</span> certificates <span class="hljs-keyword">in</span> Secret <span class="hljs-string">&quot;kubeadm-certs&quot;</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> <span class="hljs-string">&quot;kube-system&quot;</span> Namespace<br>[upload-certs] Using certificate key:<br><span class="hljs-number">5</span>d3706028d5e569324a4c456c81ae0f5551ece88b3132f03917668c6b0605128<br></code></pre></td></tr></table></figure><p>这里提取信息2：这里前面要加上<code>--control-plane --certificate-key</code></p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">--control-plane --certificate-key <span class="hljs-number">5</span>d<span class="hljs-number">3706028</span>d<span class="hljs-number">5e569324</span>a<span class="hljs-number">4</span><span class="hljs-keyword">c</span><span class="hljs-number">456</span><span class="hljs-keyword">c</span><span class="hljs-number">81</span>ae<span class="hljs-number">0</span>f<span class="hljs-number">5551</span>ece<span class="hljs-number">88</span>b<span class="hljs-number">3132</span>f<span class="hljs-number">03917668</span><span class="hljs-keyword">c</span><span class="hljs-number">6</span>b<span class="hljs-number">0605128</span><br></code></pre></td></tr></table></figure><p>合成</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus">kubeadm join <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> <span class="hljs-attr">--token</span> tn5q1b.<span class="hljs-number">7</span>w1jj77ewup7k2in \<br>        <span class="hljs-attr">--discovery-token-ca-cert-hash</span> sha256:cc5427e0e133d95250ab0aa90976fea2c383278b6345fd7e8c28702ac8dfc61f  \<br>        <span class="hljs-attr">--control-plane</span> <span class="hljs-attr">--certificate-key</span> <span class="hljs-number">5</span>d3706028d5e569324a4c456c81ae0f5551ece88b3132f03917668c6b0605128 \<br>        <span class="hljs-attr">--cri-socket</span> unix:<span class="hljs-comment">///var/run/cri-dockerd.sock</span><br>        <br>        <br>kubeadm join <span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">16443</span> <span class="hljs-attr">--token</span> lnkno8<span class="hljs-selector-class">.u4v1l8n9pahzf0kj</span> \<br>        <span class="hljs-attr">--discovery-token-ca-cert-hash</span> sha256:cc5427e0e133d95250ab0aa90976fea2c383278b6345fd7e8c28702ac8dfc61f \<br>        <span class="hljs-attr">--control-plane</span> <span class="hljs-attr">--certificate-key</span> <span class="hljs-number">41</span>e441fe56cb4bdfcc2fc0291958e6b1da54d01f4649b6651471c07583f85cdf \<br>        <span class="hljs-attr">--cri-socket</span> unix:<span class="hljs-comment">///var/run/cri-dockerd.sock</span><br><br><br></code></pre></td></tr></table></figure><p>注意：这里末尾添加了<code>--cri-socket unix:///var/run/cri-dockerd.sock </code></p><p>图示</p><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/7dcec71d06d286a5b7b1fcebbef15a7b697559838.png" alt="image-20231110182741430"></p><h2 id="安装calico网络插件"><a href="#安装calico网络插件" class="headerlink" title="安装calico网络插件"></a>安装calico网络插件</h2><p>操作节点[master1]</p><p>添加解析记录，否则无法访问</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo <span class="hljs-string">&#x27;185.199.108.133 raw.githubusercontent.com&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>hosts<br></code></pre></td></tr></table></figure><h3 id="应用operator资源清单文件"><a href="#应用operator资源清单文件" class="headerlink" title="应用operator资源清单文件"></a>应用operator资源清单文件</h3><p>网络组件有很多种，只需要部署其中一个即可，推荐Calico。<br>Calico是一个纯三层的数据中心网络方案，Calico支持广泛的平台，包括Kubernetes、OpenStack等。<br>Calico 在每一个计算节点利用 Linux Kernel 实现了一个高效的虚拟路由器（ vRouter） 来负责数据转发，而每个 vRouter 通过 BGP 协议负责把自己上运行的 workload 的路由信息向整个 Calico 网络内传播。<br>此外，Calico 项目还实现了 Kubernetes 网络策略，提供ACL功能。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl https:<span class="hljs-regexp">//</span>raw.githubusercontent.com<span class="hljs-regexp">/projectcalico/</span>calico<span class="hljs-regexp">/v3.25.1/m</span>anifests/calico.yaml -O<br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">root@master1</span> <span class="hljs-string">~</span>]<span class="hljs-comment"># vim calico.yaml</span><br><span class="hljs-comment">#添加两行</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">WAIT_FOR_DATASTORE</span><br>  <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;true&quot;</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">IP_AUTODETECTION_METHOD</span><br>  <span class="hljs-attr">value:</span> <span class="hljs-string">interface=ens33</span><br><span class="hljs-comment">#ens33是你的网卡</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/12da23b4f8d928a8ac610de1419f8f01697559838.png" alt="image-20231110183944854"></p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coq">sed -i &#x27;s| <span class="hljs-type">docker</span>.io/calico/| <span class="hljs-type">registry</span>.cn-hangzhou.aliyuncs.com/qianyios/|<span class="hljs-type">&#x27; calico</span>.yaml<br>kubectl <span class="hljs-built_in">apply</span> -f calico.yaml<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/515614f130cb327d7e301ddff0ea1b75697559838.png" alt="image-20231110184031455"></p><h3 id="监视kube-system命名空间中pod运行情况"><a href="#监视kube-system命名空间中pod运行情况" class="headerlink" title="监视kube-system命名空间中pod运行情况"></a>监视kube-system命名空间中pod运行情况</h3><p>等待估计20分钟左右吧(确保全部running)</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">kubectl <span class="hljs-built_in">get</span> pods -n kube-<span class="hljs-keyword">system</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/65e576c8a0ad30192f63c585bda21254697559838.png" alt="image-20231110193921266"></p><h3 id="拿掉master节点的污点"><a href="#拿掉master节点的污点" class="headerlink" title="拿掉master节点的污点"></a>拿掉master节点的污点</h3><p>节点 master1 和 master2 都有一个名为 <code>node-role.kubernetes.io/control-plane:NoSchedule</code> 的污点。这个污点的作用是阻止普通的 Pod 被调度到这些节点上，只允许特定的控制平面组件（如 kube-apiserver、kube-controller-manager 和 kube-scheduler）在这些节点上运行。</p><p>这种设置有助于确保控制平面节点专门用于运行 Kubernetes 的核心组件，而不会被普通的工作负载占用。通过将污点添加到节点上，可以确保只有被授权的控制平面组件才能在这些节点上运行。</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">kubectl describe <span class="hljs-keyword">node</span> <span class="hljs-title">master1</span> | grep -i taint<br>kubectl describe <span class="hljs-keyword">node</span> <span class="hljs-title">master2</span> | grep -i taint<br>kubectl describe <span class="hljs-keyword">node</span> <span class="hljs-title">master3</span> | grep -i taint<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/7e79bf5ee514955fa2bc88a482aeace0697559838.png" alt="image-20231111152324023"></p><p>去除污点</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">kubectl taint <span class="hljs-keyword">node</span> <span class="hljs-title">master1</span> <span class="hljs-keyword">node</span><span class="hljs-title">-role</span>.kubernetes.io/control-plane:NoSchedule-<br>kubectl taint <span class="hljs-keyword">node</span> <span class="hljs-title">master2</span> <span class="hljs-keyword">node</span><span class="hljs-title">-role</span>.kubernetes.io/control-plane:NoSchedule-<br>kubectl taint <span class="hljs-keyword">node</span> <span class="hljs-title">master3</span> <span class="hljs-keyword">node</span><span class="hljs-title">-role</span>.kubernetes.io/control-plane:NoSchedule-<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/787ed2d5c1bfbafd6bf56ca9127c4d59697559838.png" alt="image-20231111152342956"></p><h2 id="安装dashboard"><a href="#安装dashboard" class="headerlink" title="安装dashboard"></a>安装dashboard</h2><p>操作节点[master1]</p><p>下载文件</p><p><a href="https://github.com/kubernetes/dashboard/releases/tag/v2.7.0">https://github.com/kubernetes/dashboard/releases/tag/v2.7.0</a></p><p>目前最新版本v2.7.0 </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//</span>raw.githubusercontent.com<span class="hljs-regexp">/kubernetes/</span>dashboard<span class="hljs-regexp">/v2.7.0/</span>aio<span class="hljs-regexp">/deploy/</span>recommended.yaml<br><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/765d82d207c2fefcc00048060c4d1146697559838.png" alt="image-20231014174400992"></p><p>修改配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">recommended.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">kubernetes-dashboard</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">kubernetes-dashboard</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kubernetes-dashboard</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">443</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">8443</span><br>      <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30001</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">kubernetes-dashboard</span><br><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/33ac61c500136a4ce86567aafd1c1382697559838.png" alt="image-20231014174511047"></p><p>运行dashboard</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq">kubectl <span class="hljs-built_in">apply</span> -f recommended.yaml<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/2332124844a312fa6b5261eb90fb2c26697559838.png" alt="image-20231014174622344"></p><p>检查运行状态</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">kubectl <span class="hljs-built_in">get</span> pods -n kubernetes-dashboard<br>kubectl <span class="hljs-built_in">get</span> pod,svc -o wide -n kubernetes-dashboard<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/39d745dff08f596e4d810445df33dbdc697559838.png" alt="image-20231111025752605"></p><h3 id="创建cluster-admin用户"><a href="#创建cluster-admin用户" class="headerlink" title="创建cluster-admin用户"></a>创建cluster-admin用户</h3><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nsis">创建service account并绑定默认cluster-<span class="hljs-literal">admin</span>管理员群角色<br><span class="hljs-comment">#创建用户</span><br>kubectl create serviceaccount dashboard-<span class="hljs-literal">admin</span> -n kubernetes-dashboard<br><span class="hljs-comment">#用户授权</span><br>kubectl create clusterrolebinding dashboard-<span class="hljs-literal">admin</span> --clusterrole=cluster-<span class="hljs-literal">admin</span> --serviceaccount=kubernetes-dashboard:dashboard-<span class="hljs-literal">admin</span><br><span class="hljs-comment">#获取用户Token</span><br>kubectl create token dashboard-<span class="hljs-literal">admin</span> -n kubernetes-dashboard<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/5e1825e420253c9b7aaba3307e80d3ef697559838.png" alt="image-20231111025817854"></p><p>记录token</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs smali">eyJhbGciOiJSUzI1NiIsImtpZCI6IjJxb21sRTZSckhEZ09FMnlvWU5IY3dfTTRIWDEzRUpsQ000MThhSWxYNDgifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNjk5NjQ2Mjg3LCJpYXQiOjE2OTk2NDI2ODcsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJkYXNoYm9hcmQtYWRtaW4iLCJ1aWQiOiIyNTBhNTQ2MS03MGJlLTRhZTItOWY2Yi1hMDQwOWE1NWJhMTMifX0sIm5iZiI6MTY5OTY0MjY4Nywic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmVybmV0ZXMtZGFzaGJvYXJkOmRhc2hib2FyZC1hZG1pbiJ9.U-lH9_sRU4TVrpAznqS60INNSev9NxHu61igGUTzTBoaWo7WjPG7vzTnpZYhvsoglTzMEKhfranJkkkn95pe-prkvSasaAL6kXHw0jQjlSMzcYiF7DoLdkOtDJSukuALEubidf9eIwZXFZ-sezZdZHm4hnk5nWme5YtdOmYOJPh5sv1dzRvM1XuOHknJPTA1BbdZuVAtSGHSjkhwx-wl-41uuQoROW5GjJs0bz4zLBFn1w_pWaSMCn7pjGJNcbr6IuDV41km_etpwwxacWyfAcxNykzCtIiE1abJj7m-e944GvAn_eqxz3wCZD6Bgt41FWRzyMHjrppJfDjk7FaHNw<br><br></code></pre></td></tr></table></figure><h3 id="登录浏览器访问"><a href="#登录浏览器访问" class="headerlink" title="登录浏览器访问"></a>登录浏览器访问</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">https://192.168.48.200:30001<br><br><span class="hljs-section">输入token：</span><br><span class="hljs-section">----</span><br>eyJhbGciOiJSUzI1NiIsImtpZCI6IjJxb21sRTZSckhEZ09FMnlvWU5IY3dfTTRIWDEzRUpsQ000MThhSWxYNDgifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNjk5NjQ2Mjg3LCJpYXQiOjE2OTk2NDI2ODcsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJkYXNoYm9hcmQtYWRtaW4iLCJ1aWQiOiIyNTBhNTQ2MS03MGJlLTRhZTItOWY2Yi1hMDQwOWE1NWJhMTMifX0sIm5iZiI6MTY5OTY0MjY4Nywic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmVybmV0ZXMtZGFzaGJvYXJkOmRhc2hib2FyZC1hZG1pbiJ9.U-lH9_sRU4TVrpAznqS60INNSev9NxHu61igGUTzTBoaWo7WjPG7vzTnpZYhvsoglTzMEKhfranJkkkn95pe-prkvSasaAL6kXHw0jQjlSMzcYiF7DoLdkOtDJSukuALEubidf9eIwZXFZ-sezZdZHm4hnk5nWme5YtdOmYOJPh5sv1dzRvM1XuOHknJPTA1BbdZuVAtSGHSjkhwx-wl-41uuQoROW5GjJs0bz4zLBFn1w_pWaSMCn7pjGJNcbr6IuDV41km_etpwwxacWyfAcxNykzCtIiE1abJj7m-e944GvAn_eqxz3wCZD6Bgt41FWRzyMHjrppJfDjk7FaHNw<br><br><span class="hljs-code">----</span><br><span class="hljs-code"></span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/d9e668b5905d26157c9377c9462266e5697559838.png" alt="image-20231111025910110"></p><h3 id="部署一个nginx测试"><a href="#部署一个nginx测试" class="headerlink" title="部署一个nginx测试"></a>部署一个nginx测试</h3><p>操作节点[master1]</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">web.yaml</span><br><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span><br><span class="hljs-comment">#apiVersion: extensions/v1beta1</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">web-deployment-label</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">web-deployment</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">default</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">web-selector</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">web-selector</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">containers:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">web-container</span><br>        <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:latest</span><br>        <span class="hljs-attr">imagePullPolicy:</span> <span class="hljs-string">Always</span><br>        <span class="hljs-attr">ports:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span><br>          <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span><br>          <span class="hljs-attr">name:</span> <span class="hljs-string">http</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">443</span><br>          <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span><br>          <span class="hljs-attr">name:</span> <span class="hljs-string">https</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">web-service-label</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">web-service</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">default</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span><br>  <span class="hljs-attr">ports:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">http</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br>    <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span><br>    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">80</span><br>    <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30080</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">https</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">443</span><br>    <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span><br>    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">443</span><br>    <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30443</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">web-selector</span><br>    <br><span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">web.yaml</span> <br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/a43ccc12f086a6b24663f4030e058d51697559838.png" alt="image-20231014180923818"></p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">### 查看nginx的pod 的详细信息<br>kubectl get deploy,svc,pod -o wide<br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/6061b13260d568766dd53ec7fc3036ce697559838.png" alt="image-20231016203536987"></p><p>访问nginx网站</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">30080</span><br></code></pre></td></tr></table></figure><p><img src="/../img/K8S%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%EF%BC%88%E5%A4%96%E9%83%A8etcd%EF%BC%89/e162ff6ccabaf5e49f416b7a1974777c697559838.png" alt="image-20231111030413487"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>K8s</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基于阿里云容器服务构建私人docker镜像</title>
    <link href="/2023/11/30/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/"/>
    <url>/2023/11/30/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="基于阿里云容器服务构建私人docker镜像"><a href="#基于阿里云容器服务构建私人docker镜像" class="headerlink" title="基于阿里云容器服务构建私人docker镜像"></a>基于阿里云容器服务构建私人docker镜像</h1><h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>你是否被<font color='red'>国外镜像</font>拉取速度<font color='red'>慢</font>的情况所折磨，甚至一个小时都未必能下载好或者下载不到。</p><p>接下来我们通过阿里云容器服务构建这些<font color='red'>海外镜像</font>为<font color='red'>私人镜像</font></p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/962688b00e6628fafeca069533d9ff87697559838.png" alt="image-20231130213622452"></p><p><font color='red'>使用之前，要有自己的阿里云账户，且要有一定的dockerfile知识</font></p><p><a href="https://blog.qianyios.top/2023/03/26/Docker%20node/">Docker笔记 - 严千屹博客 (qianyios.top)</a></p><p>原理图：</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/1b2e659b30bdb217780825f7cb56c865697559838.png" alt="image-20231130220200466"></p><h2 id="创建海外镜像Dockerfile"><a href="#创建海外镜像Dockerfile" class="headerlink" title="创建海外镜像Dockerfile"></a>创建海外镜像Dockerfile</h2><p><a href="https://codeup.aliyun.com/">Codeup · 企业级代码管理平台 (aliyun.com)</a></p><p>注册账号过程不解释，自行探索</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/9f50e6ef0965a3bf02c2ac801a958b48697559838.png" alt="image-20231130212602525"></p><p>添加文件</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/a2d705e5c71361d13f0ff1d99bd6e7df697559838.png" alt="image-20231130212529981"></p><p>创建dockerfile</p><p>假设这里是你遇到的海外镜像，拉取很慢的镜像</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/024b2f811e483b26d56cb03fc5e79c70697559838.png" alt="image-20231130213751443"></p><p>提交之后我们就可以看见文件了</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/0db126c45476ef2593b6cbd9c9b6afab697559838.png" alt="image-20231130213811247"></p><p>去个人中心设置里设置你的克隆密码</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/d2a8b4fcc14ae81839a9e5f8f6ebbb17697559838.png" alt="image-20231130214355804"></p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/cd3acb1ed8dc41133a49c25a986f3b34697559838.png" alt="image-20231130214422020"></p><p>创建个人访问令牌</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/8e8a098fe3436944d6534fe735726ee0697559838.png" alt="image-20231130214730356"></p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/37b23cc0c76e4be9636bb7aa7afaab92697559838.png" alt="image-20231130214749060"></p><p>下面构建镜像要用到这个个人访问令牌（<font color='red'>这个只会出现一次，要记下来</font>）</p><h2 id="阿里容器服务构建镜像"><a href="#阿里容器服务构建镜像" class="headerlink" title="阿里容器服务构建镜像"></a>阿里容器服务构建镜像</h2><p><a href="https://cr.console.aliyun.com/cn-hangzhou/instances">容器镜像服务 (aliyun.com)</a></p><p>同样，注册账号过程不做解释</p><p>创建个人实例，并点击</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/338968eb03407a98fd073e2f50b6f259697559838.png" alt="image-20231130213006943"></p><p>创建命名空间</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/4e02ec7838fb97dfecb3d328b94cc9be697559838.png" alt="image-20231130213103002"></p><p>创建镜像仓库（仓库名称&#x3D;docker镜像名称），并点击进去</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/73d9479c86d63a7b49d22e41eba6c7a8697559838.png" alt="image-20231130213902477"></p><p>绑定代码源（一定要勾选海外构建镜像）</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/8f6823af84aa3eb0c19b072d54dcf775697559838.png" alt="image-20231130214016359"></p><p>用codeup获取的克隆账号</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/bd980a3805f988ee058f9c305360be5e697559838.png" alt="image-20231130214912189"></p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/e25c874218fec925ba4f9ffdc74a62b6697559838.png" alt="image-20231130215146722"></p><p>填写信息</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/0f64618ec6dd79a76180fd1e77dc4d1f697559838.png" alt="image-20231130215527348"></p><p>构建镜像，过一会他会自己构建好</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/ed9dc9e6f70bb80d4dfcab01517216ed697559838.png" alt="image-20231130215727359"></p><p>获取镜像地址</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/e8bcea4dc207821759287b73db662bd1697559838.png" alt="image-20231130215810561"></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">registry<span class="hljs-selector-class">.cn-hangzhou</span><span class="hljs-selector-class">.aliyuncs</span>.com/qianyios/<span class="hljs-attribute">pause</span>:<span class="hljs-number">3.1</span><br></code></pre></td></tr></table></figure><h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">docker pull registry<span class="hljs-selector-class">.cn-hangzhou</span><span class="hljs-selector-class">.aliyuncs</span>.com/qianyios/<span class="hljs-attribute">pause</span>:<span class="hljs-number">3.1</span><br></code></pre></td></tr></table></figure><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/7ce31274e625643173f8de8e36b51a16697559838.png" alt="image-20231130215905914"></p><p><font color='red'>你会发现已经下载好了！还很快！</font></p><p>以下是一个k8s部署实例文件，有时候会因为镜像拉取慢，我们就可以替换为我们自己构建的镜像</p><p><img src="/../img/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%B9%E5%99%A8%E7%A7%81%E4%BA%BAdocker%E9%95%9C%E5%83%8F/fb9aa1ccf6eeba72514434d916fd35ee697559838.png" alt="image-20231130220355498"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lsky Pro图床</title>
    <link href="/2023/11/30/Lsky-por/"/>
    <url>/2023/11/30/Lsky-por/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Lsky-Pro图床"><a href="#Lsky-Pro图床" class="headerlink" title="Lsky Pro图床"></a>Lsky Pro图床</h1><p>系统：centos 8 stream  ip：192.168.48.11</p><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><ul><li>支持<code>本地</code>等多种第三方云储存 <code>AWS S3</code>、<code>阿里云 OSS</code>、<code>腾讯云 COS</code>、<code>七牛云</code>、<code>又拍云</code>、<code>SFTP</code>、<code>FTP</code>、<code>WebDav</code>、<code>Minio</code></li><li>多种数据库驱动支持，<code>MySQL 5.7+</code>、<code>PostgreSQL 9.6+</code>、<code>SQLite 3.8.8+</code>、<code>SQL Server 2017+</code></li><li>支持配置使用多种缓存驱动，<code>Memcached</code>、<code>Redis</code>、<code>DynamoDB</code>、等其他关系型数据库，默认以文件的方式缓存</li><li>多图上传、拖拽上传、粘贴上传、动态设置策略上传、复制、一键复制链接</li><li>强大的图片管理功能，瀑布流展示，支持鼠标右键、单选多选、重命名等操作</li><li>自由度极高的角色组配置，可以为每个组配置多个储存策略，同时储存策略可以配置多个角色组</li><li>可针对角色组设置上传文件、文件夹路径命名规则、上传频率限制、图片审核等功能</li><li>支持图片水印、文字水印、水印平铺、设置水印位置、X&#x2F;y 轴偏移量设置、旋转角度等</li><li>支持通过接口上传、管理图片、管理相册</li><li>支持在线增量更新、跨版本更新</li><li>图片广场</li></ul><h2 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h2><ul><li>PHP &gt;&#x3D; 8.0.2</li><li>BCMath PHP 扩展</li><li>Ctype PHP 扩展</li><li>DOM PHP 拓展</li><li>Fileinfo PHP 扩展</li><li>JSON PHP 扩展</li><li>Mbstring PHP 扩展</li><li>OpenSSL PHP 扩展</li><li>PDO PHP 扩展</li><li>Tokenizer PHP 扩展</li><li>XML PHP 扩展</li><li>Imagick 拓展</li><li>exec、shell_exec 函数</li><li>readlink、symlink 函数</li><li>putenv、getenv 函数</li><li>chmod、chown、fileperms 函数</li></ul><h2 id="安装Lsky-Pro"><a href="#安装Lsky-Pro" class="headerlink" title="安装Lsky Pro"></a>安装Lsky Pro</h2><h3 id="下载Lsky-Pro项目文件"><a href="#下载Lsky-Pro项目文件" class="headerlink" title="下载Lsky Pro项目文件"></a>下载Lsky Pro项目文件</h3><p>项目地址:<a href="https://github.com/lsky-org/lsky-pro/releases">Releases · lsky-org&#x2F;lsky-pro (github.com)</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/lsky-org/</span>lsky-pro<span class="hljs-regexp">/releases/</span>download<span class="hljs-regexp">/2.1/</span>lsky-pro-<span class="hljs-number">2.1</span>.zip<br>unzip lsky-pro-<span class="hljs-number">2.1</span>.zip -d <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>lsky<br>chmod <span class="hljs-number">755</span> -R <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>lsky<br>chown -R nginx:nginx <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>lsky<br></code></pre></td></tr></table></figure><h3 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo dnf upgrade --refresh -y<br>sudo dnf install \<br>   https:<span class="hljs-regexp">//</span>dl.fedoraproject.org<span class="hljs-regexp">/pub/</span>epel<span class="hljs-regexp">/8/</span>Everything<span class="hljs-regexp">/x86_64/</span>Packages<span class="hljs-regexp">/e/</span>epel-release-<span class="hljs-number">8</span>-<span class="hljs-number">19</span>.el8.noarch.rpm \<br>   https:<span class="hljs-regexp">//</span>dl.fedoraproject.org<span class="hljs-regexp">/pub/</span>epel<span class="hljs-regexp">/8/</span>Everything<span class="hljs-regexp">/x86_64/</span>Packages<span class="hljs-regexp">/e/</span>epel-<span class="hljs-keyword">next</span>-release-<span class="hljs-number">8</span>-<span class="hljs-number">19</span>.el8.noarch.rpm \<br>   http:<span class="hljs-regexp">//</span>rpms.remirepo.net<span class="hljs-regexp">/enterprise/</span>remi-release-<span class="hljs-number">8.8</span>.rpm \<br>   dnf-utils -y<br>dnf module list | grep php<br><br><span class="hljs-comment"># 删除 PHP</span><br>sudo dnf -y remove php php-fpm<br>   <br><span class="hljs-comment"># 删除相关扩展包</span><br>sudo dnf -y remove php*<br>   <br><span class="hljs-comment"># 重置 PHP 模块列表</span><br>sudo dnf -y module reset php<br><br>启用（安装）PHP <span class="hljs-number">8.0</span><br>sudo dnf -y module enable php:remi-<span class="hljs-number">8.0</span><br><br>sudo dnf -y install php php-fpm<br><br>sudo dnf install php-cli php-fpm php-curl php-mysqlnd php-gd php-opcache php-zip php-intl php-common php-bcmath php-imagick php-xmlrpc php-json php-readline php-memcached php-redis php-mbstring php-apcu php-xml php-dom php-redis php-memcached php-memcache php-devel php-ctype php-fileinfo  php-openssl php-pdo php-tokenizer -y<br><br>sed -i <span class="hljs-string">&#x27;s/user = apache/user = nginx/; s/group = apache/group = nginx/&#x27;</span> <span class="hljs-regexp">/etc/</span>php-fpm.d/www.conf<br><br>dnf install -y http:<span class="hljs-regexp">//</span>nginx.org<span class="hljs-regexp">/packages/</span>rhel<span class="hljs-regexp">/8/</span>x86_64<span class="hljs-regexp">/RPMS/</span>nginx-<span class="hljs-number">1.24</span>.<span class="hljs-number">0</span>-<span class="hljs-number">1</span>.el8.ngx.x86_64.rpm<br>systemctlenable --now nginx<br>sudo systemctl restart php-fpm.service<br><br></code></pre></td></tr></table></figure><h3 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">sudo dnf install mysql-<span class="hljs-keyword">server</span> mysql -y<br>systemctl <span class="hljs-keyword">enable</span> <span class="hljs-comment">--now mysqld</span><br><span class="hljs-meta">#mysql初始化</span><br>sudo mysql_secure_installation<br>根据自身需要设置<br>mysql -uroot -p<br></code></pre></td></tr></table></figure><h3 id="设置兰空页面"><a href="#设置兰空页面" class="headerlink" title="设置兰空页面"></a>设置兰空页面</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@localhost ~]<span class="hljs-comment"># cat /etc/nginx/conf.d/default.conf</span><br>server &#123;<br>    listen       <span class="hljs-number">80</span>;<br>    server_name  localhost;<br>    root          <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>lsky<span class="hljs-regexp">/public/</span>;<br>    index        index.php;<br>    location / &#123;<br>      try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span><span class="hljs-regexp">/ /i</span>ndex.php?<span class="hljs-variable">$query_string</span>;<br>    &#125;<br>    location ~ \.php$ &#123;<br>      root           <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span>lsky<span class="hljs-regexp">/public/</span>;<br>      fastcgi_pass   unix:<span class="hljs-regexp">/run/</span>php-fpm/www.sock;<br>      fastcgi_index  index.php;<br>      fastcgi_param  SCRIPT_FILENAME <span class="hljs-variable">$document_root</span><span class="hljs-variable">$fastcgi_script_name</span>;<br>      include        fastcgi_params;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">#重启nginx</span><br>nginx -s reload<br><br><br></code></pre></td></tr></table></figure><p>访问页面192.168.48.11</p><p><img src="/../img/Lsky-por/image-20231130195414702.png" alt="image-20231130195414702"></p><p><img src="/../img/Lsky-por/image-20231130195439402.png" alt="image-20231130195439402"></p><h2 id="利用postman获取token"><a href="#利用postman获取token" class="headerlink" title="利用postman获取token"></a>利用postman获取token</h2><p>官网：<a href="https://www.postman.com/">Postman API Platform</a></p><p>自己注册一个账号，并且下载桌面版的postman（如果你的项目部署在服务器，可以不用下载，直接从第二步开始）</p><p>软件下载：<a href="https://www.postman.com/downloads/">Download Postman | Get Started for Free</a></p><h3 id="下载软件并双击运行"><a href="#下载软件并双击运行" class="headerlink" title="下载软件并双击运行"></a>下载软件并双击运行</h3><p><img src="/../img/Lsky-por/image-20231130201640225.png" alt="image-20231130201640225"></p><p><img src="/../img/Lsky-por/image-20231130201704089.png" alt="image-20231130201704089"></p><h3 id="打开页面"><a href="#打开页面" class="headerlink" title="打开页面"></a>打开页面</h3><p><img src="/../img/Lsky-por/image-20231130201727276.png" alt="image-20231130201727276"></p><p><img src="/../img/Lsky-por/image-20231130202249851.png" alt="image-20231130202249851"></p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs smali">6|0kKPF29VXPv2Kv6lEqu1chyxHjTpjiiEdwwkRE0T<br></code></pre></td></tr></table></figure><h2 id="实现typro自动上传"><a href="#实现typro自动上传" class="headerlink" title="实现typro自动上传"></a>实现typro自动上传</h2><p><a href="https://github.com/ygxbnet/lsky-upload/releases">Releases · ygxbnet&#x2F;lsky-upload (github.com)</a></p><h3 id="下载自动上传项目"><a href="#下载自动上传项目" class="headerlink" title="下载自动上传项目"></a>下载自动上传项目</h3><p><a href="https://github.com/ygxbnet/lsky-upload/releases/download/0.3.0/lsky-upload_0.3.0_windows_amd64.zip">https://github.com/ygxbnet/lsky-upload/releases/download/0.3.0/lsky-upload_0.3.0_windows_amd64.zip</a></p><p><img src="/../img/Lsky-por/image-20231130194623114.png" alt="image-20231130194623114"></p><p>打开配置文件可以看见一下信息，更换为前面的获取的token</p><p><img src="/../img/Lsky-por/6568818d78139.png" alt="image-20231130203425977"></p><h3 id="验证能否自动上传"><a href="#验证能否自动上传" class="headerlink" title="验证能否自动上传"></a>验证能否自动上传</h3><p>打开typroa</p><p><img src="/../img/Lsky-por/656881521a4d8.png" alt="image-20231130203326580"></p><p><img src="/../img/Lsky-por/656881c07f24c.png" alt="image-20231130203516988"></p><p>再去看看后台图库</p><p><img src="/../img/Lsky-por/656881e175d77.png" alt="image-20231130203549871"></p><p>至此项目成功</p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 8 stream</tag>
      
      <tag>Lsky Pro</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基于K8S1.28.2实验rook部署ceph</title>
    <link href="/2023/11/19/rook%E9%83%A8%E7%BD%B2ceph/"/>
    <url>/2023/11/19/rook%E9%83%A8%E7%BD%B2ceph/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="基于K8S1-28-2实验rook部署ceph"><a href="#基于K8S1-28-2实验rook部署ceph" class="headerlink" title="基于K8S1.28.2实验rook部署ceph"></a>基于K8S1.28.2实验rook部署ceph</h1><p>Rook 支持 Kubernetes <strong>v1.22</strong> 或更高版本。</p><p>rook版本1.12.8</p><p>K8S版本1.28.2</p><p>部署出来ceph版本是quincy版本</p><table><thead><tr><th>主机名</th><th>ip1（NAT）</th><th>系统</th><th>新硬盘</th><th>磁盘</th><th>内存</th></tr></thead><tbody><tr><td>master1</td><td>192.168.48.101</td><td>Centos7.9</td><td>100G</td><td>100G</td><td>4G</td></tr><tr><td>master2</td><td>192.168.48.102</td><td>Centos7.9</td><td></td><td>100G</td><td>4G</td></tr><tr><td>master3</td><td>192.168.48.103</td><td>Centos7.9</td><td></td><td>100G</td><td>4G</td></tr><tr><td>node01</td><td>192.168.48.104</td><td>Centos7.9</td><td>100G</td><td>100G</td><td>6G</td></tr><tr><td>node02</td><td>192.168.48.105</td><td>Centos7.9</td><td>100G</td><td>100G</td><td>6G</td></tr></tbody></table><p>我这里是五台机，本应该ceph（三节点）是需要部署在三台node上的，这里为了测试方便，<font color='red'>仅部署在master1，node01，node02上所以需要给这三台加一个物理硬盘</font></p><p><font color='red'>以下所有操作都在master进行</font></p><h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><h3 id="克隆仓库"><a href="#克隆仓库" class="headerlink" title="克隆仓库"></a>克隆仓库</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone --single-branch --branch v1.<span class="hljs-number">12.8</span> https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/rook/</span>rook.git<br>cd rook<span class="hljs-regexp">/deploy/</span>examples<br></code></pre></td></tr></table></figure><h3 id="查看所需镜像"><a href="#查看所需镜像" class="headerlink" title="查看所需镜像"></a>查看所需镜像</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@master1</span> examples]<span class="hljs-meta"># cat operator.yaml | grep IMAGE:</span><br>  <span class="hljs-meta"># ROOK_CSI_CEPH_IMAGE: <span class="hljs-string">&quot;quay.io/cephcsi/cephcsi:v3.9.0&quot;</span></span><br>  <span class="hljs-meta"># ROOK_CSI_REGISTRAR_IMAGE: <span class="hljs-string">&quot;registry.k8s.io/sig-storage/csi-node-driver-registrar:v2.8.0&quot;</span></span><br>  <span class="hljs-meta"># ROOK_CSI_RESIZER_IMAGE: <span class="hljs-string">&quot;registry.k8s.io/sig-storage/csi-resizer:v1.8.0&quot;</span></span><br>  <span class="hljs-meta"># ROOK_CSI_PROVISIONER_IMAGE: <span class="hljs-string">&quot;registry.k8s.io/sig-storage/csi-provisioner:v3.5.0&quot;</span></span><br>  <span class="hljs-meta"># ROOK_CSI_SNAPSHOTTER_IMAGE: <span class="hljs-string">&quot;registry.k8s.io/sig-storage/csi-snapshotter:v6.2.2&quot;</span></span><br>  <span class="hljs-meta"># ROOK_CSI_ATTACHER_IMAGE: <span class="hljs-string">&quot;registry.k8s.io/sig-storage/csi-attacher:v4.3.0&quot;</span></span><br>  <span class="hljs-meta"># ROOK_CSIADDONS_IMAGE: <span class="hljs-string">&quot;quay.io/csiaddons/k8s-sidecar:v0.7.0&quot;</span></span><br>  <br>[root<span class="hljs-symbol">@master1</span> examples]<span class="hljs-meta"># cat operator.yaml | grep image:</span><br>          image: rook/ceph:v1<span class="hljs-number">.12</span><span class="hljs-number">.8</span><br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/e8d02f5e7e6cffb17ea83b39794b45b6697559838.png" alt="image-20231119001814854"></p><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/99bdb183c537ef879eb2ac4a6bc59914697559838.png" alt="image-20231122001213717"></p><p>基本都是国外的镜像，在这里通过阿里云+github方式构建镜像仓库解决（以下是添加为自己私人构建的镜像）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">sed</span> <span class="hljs-string">-i</span> <span class="hljs-string">&#x27;s/# ROOK_CSI_CEPH_IMAGE: &quot;quay.io\/cephcsi\/cephcsi:v3.9.0&quot;/ROOK_CSI_CEPH_IMAGE: &quot;registry.cn-hangzhou.aliyuncs.com\/qianyios\/cephcsi:v3.9.0&quot;/g&#x27;</span> <span class="hljs-string">operator.yaml</span><br><br><span class="hljs-string">sed</span> <span class="hljs-string">-i</span> <span class="hljs-string">&#x27;s/# ROOK_CSI_REGISTRAR_IMAGE: &quot;registry.k8s.io\/sig-storage\/csi-node-driver-registrar:v2.8.0&quot;/ROOK_CSI_REGISTRAR_IMAGE: &quot;registry.cn-hangzhou.aliyuncs.com\/qianyios\/csi-node-driver-registrar:v2.8.0&quot;/g&#x27;</span> <span class="hljs-string">operator.yaml</span><br><br><span class="hljs-string">sed</span> <span class="hljs-string">-i</span> <span class="hljs-string">&#x27;s/# ROOK_CSI_RESIZER_IMAGE: &quot;registry.k8s.io\/sig-storage\/csi-resizer:v1.8.0&quot;/ROOK_CSI_RESIZER_IMAGE: &quot;registry.cn-hangzhou.aliyuncs.com\/qianyios\/csi-resizer:v1.8.0&quot;/g&#x27;</span> <span class="hljs-string">operator.yaml</span><br><br><span class="hljs-string">sed</span> <span class="hljs-string">-i</span> <span class="hljs-string">&#x27;s/# ROOK_CSI_PROVISIONER_IMAGE: &quot;registry.k8s.io\/sig-storage\/csi-provisioner:v3.5.0&quot;/ROOK_CSI_PROVISIONER_IMAGE: &quot;registry.cn-hangzhou.aliyuncs.com\/qianyios\/csi-provisioner:v3.5.0&quot;/g&#x27;</span> <span class="hljs-string">operator.yaml</span><br><br><span class="hljs-string">sed</span> <span class="hljs-string">-i</span> <span class="hljs-string">&#x27;s/# ROOK_CSI_SNAPSHOTTER_IMAGE: &quot;registry.k8s.io\/sig-storage\/csi-snapshotter:v6.2.2&quot;/ROOK_CSI_SNAPSHOTTER_IMAGE: &quot;registry.cn-hangzhou.aliyuncs.com\/qianyios\/csi-snapshotter:v6.2.2&quot;/g&#x27;</span> <span class="hljs-string">operator.yaml</span><br><br><span class="hljs-string">sed</span> <span class="hljs-string">-i</span> <span class="hljs-string">&#x27;s/# ROOK_CSI_ATTACHER_IMAGE: &quot;registry.k8s.io\/sig-storage\/csi-attacher:v4.3.0&quot;/ROOK_CSI_ATTACHER_IMAGE: &quot;registry.cn-hangzhou.aliyuncs.com\/qianyios\/csi-attacher:v4.3.0&quot;/g&#x27;</span> <span class="hljs-string">operator.yaml</span><br><br><span class="hljs-string">sed</span> <span class="hljs-string">-i</span> <span class="hljs-string">&#x27;s/# ROOK_CSIADDONS_IMAGE: &quot;quay.io\/csiaddons\/k8s-sidecar:v0.7.0&quot;/ROOK_CSIADDONS_IMAGE: &quot;registry.cn-hangzhou.aliyuncs.com\/qianyios\/k8s-sidecar:v0.7.0&quot;/g&#x27;</span> <span class="hljs-string">operator.yaml</span><br><br><span class="hljs-string">sed</span> <span class="hljs-string">-i</span> <span class="hljs-string">&#x27;s/image: rook\/ceph:v1.12.8/image: registry.cn-hangzhou.aliyuncs.com\/qianyios\/ceph:v1.12.8/g&#x27;</span> <span class="hljs-string">operator.yaml</span><br><br></code></pre></td></tr></table></figure><p>开启自动发现磁盘（用于后期扩展）</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sed -i <span class="hljs-string">&#x27;s/ROOK_ENABLE_DISCOVERY_DAEMON: &quot;false&quot;/ROOK_ENABLE_DISCOVERY_DAEMON: &quot;true&quot;/&#x27;</span> <span class="hljs-regexp">/root/</span>rook<span class="hljs-regexp">/deploy/</span>examples/operator.yaml<br></code></pre></td></tr></table></figure><p>建议提前下载镜像</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> pull registry.cn-hangzhou.aliyuncs.com/qianyios/cephcsi:v3.<span class="hljs-number">9</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">docker</span> pull registry.cn-hangzhou.aliyuncs.com/qianyios/csi-node-driver-registrar:v2.<span class="hljs-number">8</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">docker</span> pull registry.cn-hangzhou.aliyuncs.com/qianyios/csi-resizer:v1.<span class="hljs-number">8</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">docker</span> pull registry.cn-hangzhou.aliyuncs.com/qianyios/csi-provisioner:v3.<span class="hljs-number">5</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">docker</span> pull registry.cn-hangzhou.aliyuncs.com/qianyios/csi-snapshotter:v6.<span class="hljs-number">2</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">docker</span> pull registry.cn-hangzhou.aliyuncs.com/qianyios/csi-attacher:v4.<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">docker</span> pull registry.cn-hangzhou.aliyuncs.com/qianyios/k8s-sidecar:v0.<span class="hljs-number">7</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">docker</span> pull registry.cn-hangzhou.aliyuncs.com/qianyios/ceph:v1.<span class="hljs-number">12</span>.<span class="hljs-number">8</span><br></code></pre></td></tr></table></figure><h2 id="安装rook-ceph集群"><a href="#安装rook-ceph集群" class="headerlink" title="安装rook+ceph集群"></a>安装rook+ceph集群</h2><h3 id="开始部署"><a href="#开始部署" class="headerlink" title="开始部署"></a>开始部署</h3><ol><li>创建crd&amp;common&amp;operator</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">kubectl create <span class="hljs-operator">-f</span> crds.yaml <span class="hljs-operator">-f</span> common.yaml <span class="hljs-operator">-f</span> operator.yaml<br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/4482ea21f7f87a432695f6fcd5e48880697559838.png" alt="image-20231119182815198"></p><ol start="2"><li>创建cluster（ceph）</li></ol><p><font color='red'>修改配置：</font>等待operator容器和discover容器<font color='red'>启动</font>，配置osd节点</p><p>先注意一下自己的磁盘（lsblk）根据自身情况修改下面的配置文件</p><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/c9ffdcc25e86bb74b11a58deed32eccf697559838.png" alt="image-20231119011441790"></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">#更改为国内镜像</span><br><span class="hljs-attribute">sed</span> -i &#x27;s#image: quay.io/ceph/ceph:v17.<span class="hljs-number">2</span>.<span class="hljs-number">6</span>#image: registry.cn-hangzhou.aliyuncs.com/qianyios/ceph:v17.<span class="hljs-number">2</span>.<span class="hljs-number">6</span>#&#x27; cluster.yaml<br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">cluster.yaml</span><br><span class="hljs-string">-------------------------------------</span><br> <br><span class="hljs-bullet">-</span> <span class="hljs-string">修改镜像</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">registry.cn-hangzhou.aliyuncs.com/qianyios/ceph:v17.2.6</span><br> <br><span class="hljs-bullet">-</span> <span class="hljs-string">改为false，并非使用所有节点所有磁盘作为osd</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">启用deviceFilter</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">按需配置config</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">会自动跳过非裸盘</span><br>  <span class="hljs-attr">storage:</span> <span class="hljs-comment"># cluster level storage configuration and selection</span><br>    <span class="hljs-attr">useAllNodes:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">useAllDevices:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">deviceFilter:</span><br>    <span class="hljs-attr">config:</span><br>    <span class="hljs-attr">nodes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;master1&quot;</span><br>        <span class="hljs-attr">deviceFilter:</span> <span class="hljs-string">&quot;sda&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;node01&quot;</span><br>        <span class="hljs-attr">deviceFilter:</span> <span class="hljs-string">&quot;sda&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;node02&quot;</span><br>        <span class="hljs-attr">deviceFilter:</span> <span class="hljs-string">&quot;^sd.&quot;</span>  <span class="hljs-comment">#自动匹配sd开头的裸盘</span><br></code></pre></td></tr></table></figure><p>这里的三个节点，是我们开头讲到的三台机，自行根据修改调整，注意这里的名字是k8s集群的名字可以在<font color='red'>kubectl get nodes</font>查看</p><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/8defa12ca29d58735dd919b3cd62897f697559838.png" alt="image-20231119011622231"></p><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/1f4a6c053724354ce60c86d5c5233631697559838.png" alt="image-20231119011844526"></p><p>部署cluster</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql">kubectl <span class="hljs-keyword">create</span> -f <span class="hljs-keyword">cluster</span>.yaml<br></code></pre></td></tr></table></figure><h3 id="查看状态"><a href="#查看状态" class="headerlink" title="查看状态"></a>查看状态</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros">- 实时查看pod创建进度<br>kubectl <span class="hljs-built_in">get</span> pod -n rook-ceph -w<br> <br>- 实时查看集群创建进度<br>kubectl <span class="hljs-built_in">get</span> cephcluster -n rook-ceph rook-ceph -w<br> <br>- 详细描述<br>kubectl describe cephcluster -n rook-ceph rook-ceph<br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/a8a6ca303cfdcd6afe66ac9cbf0157fd697559838.png" alt="image-20231119184740824"></p><p>安装ceph客户端工具</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs ldif"><span class="hljs-literal">-</span> 进入工作目录<br>cd rook/deploy/examples/<br><br><span class="hljs-literal">-</span> 查看所需镜像<br>[root@master1 examples]<span class="hljs-comment"># cat toolbox.yaml | grep image:</span><br>          image: quay.io/ceph/ceph:v17.2.6<br><span class="hljs-literal">-</span> 更改为国内镜像<br><br>sed -i &#x27;s<span class="hljs-comment">#image: quay.io/ceph/ceph:v17.2.6#image: registry.cn-hangzhou.aliyuncs.com/qianyios/ceph:v17.2.6#&#x27; toolbox.yaml</span><br><br><span class="hljs-literal">-</span> 创建toolbox<br>kubectl  create -f toolbox.yaml -n rook-ceph<br> <br><span class="hljs-literal">-</span> 查看pod<br>kubectl  get pod -n rook-ceph -l app=rook-ceph-tools<br> <br><span class="hljs-literal">-</span> 进入pod<br>kubectl -n rook-ceph exec -it deploy/rook-ceph-tools -- bash<br> <br><span class="hljs-literal">-</span> 查看集群状态<br>ceph status<br> <br><span class="hljs-literal">-</span> 查看osd状态<br>ceph osd status<br> <br><span class="hljs-literal">-</span> 集群空间用量<br>ceph df<br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/db949d4f6d00b47903b66498f1e892a4697559838.png" alt="image-20231119185510701"></p><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/2c7745862a1dd2c9ef38fd73af0e9e9d697559838.png" alt="image-20231119185604869"></p><h3 id="暴露dashboard"><a href="#暴露dashboard" class="headerlink" title="暴露dashboard"></a>暴露dashboard</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">rook-dashboard.yaml</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">EOF</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">rook-ceph-mgr</span><br>    <span class="hljs-attr">ceph_daemon_id:</span> <span class="hljs-string">a</span><br>    <span class="hljs-attr">rook_cluster:</span> <span class="hljs-string">rook-ceph</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">rook-ceph-mgr-dashboard-np</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rook-ceph</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">ports:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">http-dashboard</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">8443</span><br>    <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span><br>    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">8443</span><br>    <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30700</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">rook-ceph-mgr</span><br>    <span class="hljs-attr">ceph_daemon_id:</span> <span class="hljs-string">a</span><br>  <span class="hljs-attr">sessionAffinity:</span> <span class="hljs-string">None</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span><br><span class="hljs-string">EOF</span><br><br><span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">rook-dashboard.yaml</span><br></code></pre></td></tr></table></figure><p>查看dashboard密码</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">kubectl -n rook-ceph <span class="hljs-built_in">get</span><span class="hljs-built_in"> secret </span>rook-ceph-dashboard-password -o <span class="hljs-attribute">jsonpath</span>=<span class="hljs-string">&quot;&#123;[&#x27;data&#x27;][&#x27;password&#x27;]&#125;&quot;</span> | base64 --decode &amp;&amp; echo<br><br>Qmu/!<span class="hljs-variable">$ZvfQTAd</span>-aCuHF+<br></code></pre></td></tr></table></figure><p>访问dashboard</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.200</span>:<span class="hljs-number">30700</span><br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/970359409249d0b62859dc76b67e5a05697559838.png" alt="image-20231119194020314"></p><p>如果出现以下报错（可以按下面解决，反之跳过）</p><p>消除HEALTH_WARN警告</p><ul><li>查看警告详情<ul><li>AUTH_INSECURE_GLOBAL_ID_RECLAIM_ALLOWED: mons are allowing insecure global_id reclaim</li><li>MON_DISK_LOW: mons a,b,c are low on available space</li></ul></li></ul><p><img src="/./../img/rook%E9%83%A8%E7%BD%B2ceph/f363d6115f47d3be9b65b691e8676c62.png" alt="image-20210621191403196"></p><blockquote><p>官方解决方案：<a href="https://docs.ceph.com/en/latest/rados/operations/health-checks/">https://docs.ceph.com/en/latest/rados/operations/health-checks/</a></p></blockquote><ul><li>AUTH_INSECURE_GLOBAL_ID_RECLAIM_ALLOWED</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">方法一：</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">进入toolbox</span><br><br><span class="hljs-string">kubectl</span> <span class="hljs-string">-n</span> <span class="hljs-string">rook-ceph</span> <span class="hljs-string">exec</span> <span class="hljs-string">-it</span> <span class="hljs-string">deploy/rook-ceph-tools</span> <span class="hljs-string">--</span> <span class="hljs-string">bash</span><br><br><span class="hljs-string">ceph</span> <span class="hljs-string">config</span> <span class="hljs-string">set</span> <span class="hljs-string">mon</span> <span class="hljs-string">auth_allow_insecure_global_id_reclaim</span> <span class="hljs-literal">false</span><br><br><span class="hljs-string">方法二：</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">get</span> <span class="hljs-string">configmap</span> <span class="hljs-string">rook-config-override</span> <span class="hljs-string">-n</span> <span class="hljs-string">rook-ceph</span> <span class="hljs-string">-o</span> <span class="hljs-string">yaml</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">edit</span> <span class="hljs-string">configmap</span> <span class="hljs-string">rook-config-override</span> <span class="hljs-string">-n</span> <span class="hljs-string">rook-ceph</span> <span class="hljs-string">-o</span> <span class="hljs-string">yaml</span><br><br><br><span class="hljs-attr">config:</span> <span class="hljs-string">|</span><br><span class="hljs-string">    [global]</span><br><span class="hljs-string">    mon clock drift allowed = 1</span><br><span class="hljs-string"></span>    <br><span class="hljs-comment">#删除pod</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">-n</span> <span class="hljs-string">rook-ceph</span> <span class="hljs-string">delete</span> <span class="hljs-string">pod</span> <span class="hljs-string">$(kubectl</span> <span class="hljs-string">-n</span> <span class="hljs-string">rook-ceph</span> <span class="hljs-string">get</span> <span class="hljs-string">pods</span> <span class="hljs-string">-o</span> <span class="hljs-string">custom-columns=NAME:.metadata.name</span> <span class="hljs-string">--no-headers|</span> <span class="hljs-string">grep</span> <span class="hljs-string">mon)</span><br><span class="hljs-comment">#显示一下信息</span><br><span class="hljs-string">pod</span> <span class="hljs-string">&quot;rook-ceph-mon-a-557d88c-6ksmg&quot;</span> <span class="hljs-string">deleted</span><br><span class="hljs-string">pod</span> <span class="hljs-string">&quot;rook-ceph-mon-b-748dcc9b89-j8l24&quot;</span> <span class="hljs-string">deleted</span><br><span class="hljs-string">pod</span> <span class="hljs-string">&quot;rook-ceph-mon-c-5d47c664-p855m&quot;</span> <span class="hljs-string">deleted</span><br><span class="hljs-comment">#最后查看健康值</span><br><span class="hljs-string">ceph</span> <span class="hljs-string">-s</span><br></code></pre></td></tr></table></figure><p><img src="/./../img/rook%E9%83%A8%E7%BD%B2ceph/a1e3b048a1ff9259316edb8f3b7a7df9697559838.png" alt="image-20231203203949171"></p><ul><li>MON_DISK_LOW：根分区使用率过高，清理即可。</li></ul><p><img src="/./../img/rook%E9%83%A8%E7%BD%B2ceph/261190930bee367b1a07ee81a311b3e2.png" alt="image-20210621195325516"></p><h2 id="Ceph存储使用"><a href="#Ceph存储使用" class="headerlink" title="Ceph存储使用"></a>Ceph存储使用</h2><h3 id="三种存储类型"><a href="#三种存储类型" class="headerlink" title="三种存储类型"></a>三种存储类型</h3><table><thead><tr><th align="left">存储类型</th><th align="left">特征</th><th align="left">应用场景</th><th align="left">典型设备</th></tr></thead><tbody><tr><td align="left">块存储（RBD）</td><td align="left">存储速度较快 不支持共享存储 [<strong>ReadWriteOnce</strong>]</td><td align="left">虚拟机硬盘</td><td align="left">硬盘 Raid</td></tr><tr><td align="left">文件存储（CephFS）</td><td align="left">存储速度慢（需经操作系统处理再转为块存储） 支持共享存储 [<strong>ReadWriteMany</strong>]</td><td align="left">文件共享</td><td align="left">FTP NFS</td></tr><tr><td align="left">对象存储（Object）</td><td align="left">具备块存储的读写性能和文件存储的共享特性 操作系统不能直接访问，只能通过应用程序级别的API访问</td><td align="left">图片存储 视频存储</td><td align="left">OSS</td></tr></tbody></table><h3 id="块存储"><a href="#块存储" class="headerlink" title="块存储"></a>块存储</h3><h4 id="创建CephBlockPool和StorageClass"><a href="#创建CephBlockPool和StorageClass" class="headerlink" title="创建CephBlockPool和StorageClass"></a>创建CephBlockPool和StorageClass</h4><ul><li>文件路径：<code>/root/rook/deploy/examples/csi/rbd/storageclass.yaml</code></li><li>CephBlockPool和StorageClass都位于storageclass.yaml 文件</li><li>配置文件简要解读：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cd</span> <span class="hljs-string">/root/rook/deploy/examples/csi/rbd</span><br>[<span class="hljs-string">root@master1</span> <span class="hljs-string">rbd</span>]<span class="hljs-comment"># grep -vE &#x27;^\s*(#|$)&#x27; storageclass.yaml</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">ceph.rook.io/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">CephBlockPool</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">replicapool</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rook-ceph</span> <span class="hljs-comment"># namespace:cluster</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">failureDomain:</span> <span class="hljs-string">host</span>              <span class="hljs-comment"># host级容灾</span><br>  <span class="hljs-attr">replicated:</span><br>    <span class="hljs-attr">size:</span> <span class="hljs-number">3</span>                              <span class="hljs-comment"># 默认三个副本</span><br>    <span class="hljs-attr">requireSafeReplicaSize:</span> <span class="hljs-literal">true</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">storage.k8s.io/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">StorageClass</span>                 <span class="hljs-comment"># sc无需指定命名空间</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">rook-ceph-block</span><br><span class="hljs-attr">provisioner:</span> <span class="hljs-string">rook-ceph.rbd.csi.ceph.com</span>    <span class="hljs-comment"># 存储驱动</span><br><span class="hljs-attr">parameters:</span><br>  <span class="hljs-attr">clusterID:</span> <span class="hljs-string">rook-ceph</span> <span class="hljs-comment"># namespace:cluster</span><br>  <span class="hljs-attr">pool:</span> <span class="hljs-string">replicapool</span>                  <span class="hljs-comment"># 关联到CephBlockPool</span><br>  <span class="hljs-attr">imageFormat:</span> <span class="hljs-string">&quot;2&quot;</span><br>  <span class="hljs-attr">imageFeatures:</span> <span class="hljs-string">layering</span><br>  <span class="hljs-attr">csi.storage.k8s.io/provisioner-secret-name:</span> <span class="hljs-string">rook-csi-rbd-provisioner</span><br>  <span class="hljs-attr">csi.storage.k8s.io/provisioner-secret-namespace:</span> <span class="hljs-string">rook-ceph</span> <span class="hljs-comment"># namespace:cluster</span><br>  <span class="hljs-attr">csi.storage.k8s.io/controller-expand-secret-name:</span> <span class="hljs-string">rook-csi-rbd-provisioner</span><br>  <span class="hljs-attr">csi.storage.k8s.io/controller-expand-secret-namespace:</span> <span class="hljs-string">rook-ceph</span> <span class="hljs-comment"># namespace:cluster</span><br>  <span class="hljs-attr">csi.storage.k8s.io/node-stage-secret-name:</span> <span class="hljs-string">rook-csi-rbd-node</span><br>  <span class="hljs-attr">csi.storage.k8s.io/node-stage-secret-namespace:</span> <span class="hljs-string">rook-ceph</span> <span class="hljs-comment"># namespace:cluster</span><br>  <span class="hljs-attr">csi.storage.k8s.io/fstype:</span> <span class="hljs-string">ext4</span><br><span class="hljs-attr">allowVolumeExpansion:</span> <span class="hljs-literal">true</span>                          <span class="hljs-comment"># 是否允许扩容</span><br><span class="hljs-attr">reclaimPolicy:</span> <span class="hljs-string">Delete</span>                                    <span class="hljs-comment"># PV回收策略</span><br>[<span class="hljs-string">root@master1</span> <span class="hljs-string">rbd</span>]<span class="hljs-comment">#</span><br><br></code></pre></td></tr></table></figure><p>创建CephBlockPool和StorageClass</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">kubectl <span class="hljs-keyword">create</span> -f storageclass.yaml<br></code></pre></td></tr></table></figure><p>查看</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros">- 查看sc<br>kubectl <span class="hljs-built_in">get</span> sc<br> <br>- 查看CephBlockPool（也可在dashboard中查看）<br>kubectl <span class="hljs-built_in">get</span> cephblockpools -n rook-ceph<br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/8eb33944dd86046d203aefd8da82cf26697559838.png" alt="image-20231119195332077"></p><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/cd95d62d7f3131ac890383048257ed3c697559838.png" alt="image-20231119195400264"></p><h4 id="块存储使用示例"><a href="#块存储使用示例" class="headerlink" title="块存储使用示例"></a>块存储使用示例</h4><ul><li><strong>Deployment</strong>单副本+<strong>PersistentVolumeClaim</strong></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">nginx-deploy-rbd.yaml</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">&quot;EOF&quot;</span><br><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-deploy-rbd</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-deploy-rbd</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-deploy-rbd</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-deploy-rbd</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">containers:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">image:</span> <span class="hljs-string">registry.cn-hangzhou.aliyuncs.com/qianyios/nginx:latest</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>        <span class="hljs-attr">volumeMounts:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">data</span><br>          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/usr/share/nginx/html</span><br>      <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">data</span><br>        <span class="hljs-attr">persistentVolumeClaim:</span><br>          <span class="hljs-attr">claimName:</span> <span class="hljs-string">nginx-rbd-pvc</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">PersistentVolumeClaim</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-rbd-pvc</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">&quot;rook-ceph-block&quot;</span>   <span class="hljs-comment">#就是这里指定了前面的创建的sc</span><br>  <span class="hljs-attr">accessModes:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">ReadWriteOnce</span><br>  <span class="hljs-attr">resources:</span><br>    <span class="hljs-attr">requests:</span><br>      <span class="hljs-attr">storage:</span> <span class="hljs-string">5Gi</span><br><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">kubectl create -f nginx-deploy-rbd.yaml<br>kubectl exec -it nginx-deploy-rbd-<span class="hljs-number">7886</span>bf6666-qhw74 bash<br>echo <span class="hljs-string">&quot;hello,nginx-deploy-rbd&quot;</span> &gt; <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/nginx/</span>html/index.html<br><span class="hljs-keyword">exit</span><br><br>kubectl get pod -o wide | grep nginx<br><br><span class="hljs-comment">#测试完就删除</span><br>kubectl <span class="hljs-keyword">delete</span> -f nginx-deploy-rbd.yaml<br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/78427bca0ed2e464f619a1d20b9bca9d697559838.png" alt="image-20231119203414038"></p><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/47d21207397036100c7d1e4969615e7b697559838.png" alt="image-20231119203735080"></p><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/cf68495385eb2de397cda2f6c851f1d4697559838.png" alt="image-20231119203755919"></p><ul><li><strong>StatefulSet</strong>多副本+<strong>volumeClaimTemplates</strong></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">nginx-ss-rbd.yaml</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">&quot;EOF&quot;</span><br> <br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">StatefulSet</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ss-rbd</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-ss-rbd</span> <br>  <span class="hljs-attr">serviceName:</span> <span class="hljs-string">&quot;nginx&quot;</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span> <br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-ss-rbd</span> <br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">containers:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>        <span class="hljs-attr">image:</span> <span class="hljs-string">registry.cn-hangzhou.aliyuncs.com/qianyios/nginx:latest</span><br>        <span class="hljs-attr">ports:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span><br>          <span class="hljs-attr">name:</span> <span class="hljs-string">web</span><br>        <span class="hljs-attr">volumeMounts:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">www</span><br>          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/usr/share/nginx/html</span><br>  <span class="hljs-attr">volumeClaimTemplates:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">www</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">accessModes:</span> [ <span class="hljs-string">&quot;ReadWriteOnce&quot;</span> ]<br>      <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">&quot;rook-ceph-block&quot;</span>  <span class="hljs-comment">#就是这里指定了前面的创建的sc</span><br>      <span class="hljs-attr">resources:</span><br>        <span class="hljs-attr">requests:</span><br>          <span class="hljs-attr">storage:</span> <span class="hljs-string">2Gi</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure><p>部署</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs awk">kubectl create -f nginx-ss-rbd.yaml<br><br>kubectl get pod -o wide | grep nginx-ss<br><br>kubectl exec -it nginx-ss-rbd-<span class="hljs-number">0</span> bash<br>echo <span class="hljs-string">&quot;hello,nginx-ss-rbd-0&quot;</span> &gt; <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/nginx/</span>html/index.html &amp;&amp; <span class="hljs-keyword">exit</span><br><br>kubectl exec -it nginx-ss-rbd-<span class="hljs-number">1</span> bash<br>echo <span class="hljs-string">&quot;hello,nginx-ss-rbd-1&quot;</span> &gt; <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/nginx/</span>html/index.html &amp;&amp; <span class="hljs-keyword">exit</span><br><br>kubectl exec -it nginx-ss-rbd-<span class="hljs-number">2</span> bash<br>echo <span class="hljs-string">&quot;hello,nginx-ss-rbd-2&quot;</span> &gt; <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/nginx/</span>html/index.html &amp;&amp; <span class="hljs-keyword">exit</span><br><br><span class="hljs-comment">#测试完就删除</span><br>kubectl <span class="hljs-keyword">delete</span> -f nginx-ss-rbd.yaml<br><br>这里可能需要手动删除一下pvc<br>[root@master1 ~]<span class="hljs-comment"># kubectl get pvc</span><br>NAME                 STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS      AGE<br>www-nginx-ss-rbd-<span class="hljs-number">0</span>   Bound    pvc-<span class="hljs-number">4</span>a75f201-eec0-<span class="hljs-number">47</span>fa-<span class="hljs-number">990</span>c-<span class="hljs-number">353</span>c52fe14f4   <span class="hljs-number">2</span>Gi        RWO            rook-ceph-block   <span class="hljs-number">6</span>m27s<br>www-nginx-ss-rbd-<span class="hljs-number">1</span>   Bound    pvc-d5f7e29f-<span class="hljs-number">79</span>e4-<span class="hljs-number">4</span>d1e-bcbb-<span class="hljs-number">65</span>ece15a8172   <span class="hljs-number">2</span>Gi        RWO            rook-ceph-block   <span class="hljs-number">6</span>m21s<br>www-nginx-ss-rbd-<span class="hljs-number">2</span>   Bound    pvc-<span class="hljs-number">8</span>cce06e9-dfe4-<span class="hljs-number">429</span>d-ae44-<span class="hljs-number">878</span>f8e4665e0   <span class="hljs-number">2</span>Gi        RWO            rook-ceph-block   <span class="hljs-number">5</span>m53s<br>[root@master1 ~]<span class="hljs-comment"># kubectl delete  pvc www-nginx-ss-rbd-0</span><br>persistentvolumeclaim <span class="hljs-string">&quot;www-nginx-ss-rbd-0&quot;</span> deleted<br>[root@master1 ~]<span class="hljs-comment"># kubectl delete  pvc www-nginx-ss-rbd-1</span><br>persistentvolumeclaim <span class="hljs-string">&quot;www-nginx-ss-rbd-1&quot;</span> deleted<br>[root@master1 ~]<span class="hljs-comment"># kubectl delete  pvc www-nginx-ss-rbd-2</span><br>persistentvolumeclaim <span class="hljs-string">&quot;www-nginx-ss-rbd-2&quot;</span> deleted<br><br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/491fde79a9bd682388bda9159e9f7053697559838.png" alt="image-20231119204319948"></p><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/4fcb24bea5788cb9245410d95ec051ce697559838.png" alt="image-20231119204602188"></p><h3 id="共享文件存储"><a href="#共享文件存储" class="headerlink" title="共享文件存储"></a>共享文件存储</h3><h4 id="部署MDS服务"><a href="#部署MDS服务" class="headerlink" title="部署MDS服务"></a>部署MDS服务</h4><p>创建Cephfs文件系统需要先部署MDS服务，该服务负责处理文件系统中的元数据。</p><ul><li>文件路径：<code>/root/rook/deploy/examples/filesystem.yaml</code></li></ul><p>配置文件解读</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cd</span> <span class="hljs-string">/root/rook/deploy/examples</span><br>[<span class="hljs-string">root@master1</span> <span class="hljs-string">examples</span>]<span class="hljs-comment"># grep -vE &#x27;^\s*(#|$)&#x27; filesystem.yaml</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">ceph.rook.io/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">CephFilesystem</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">myfs</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rook-ceph</span> <span class="hljs-comment"># namespace:cluster</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">metadataPool:</span><br>    <span class="hljs-attr">replicated:</span><br>      <span class="hljs-attr">size:</span> <span class="hljs-number">3</span>            <span class="hljs-comment"># 元数据副本数</span><br>      <span class="hljs-attr">requireSafeReplicaSize:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">parameters:</span><br>      <span class="hljs-attr">compression_mode:</span><br>        <span class="hljs-string">none</span><br>  <span class="hljs-attr">dataPools:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">replicated</span><br>      <span class="hljs-attr">failureDomain:</span> <span class="hljs-string">host</span><br>      <span class="hljs-attr">replicated:</span><br>        <span class="hljs-attr">size:</span> <span class="hljs-number">3</span>             <span class="hljs-comment"># 存储数据的副本数</span><br>        <span class="hljs-attr">requireSafeReplicaSize:</span> <span class="hljs-literal">true</span><br>      <span class="hljs-attr">parameters:</span><br>        <span class="hljs-attr">compression_mode:</span><br>          <span class="hljs-string">none</span><br>  <span class="hljs-attr">preserveFilesystemOnDelete:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">metadataServer:</span><br>    <span class="hljs-attr">activeCount:</span> <span class="hljs-number">1</span>        <span class="hljs-comment"># MDS实例的副本数，默认1，生产环境建议设置为3</span><br>    <span class="hljs-attr">activeStandby:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-string">......省略</span><br><br><span class="hljs-string">kubectl</span> <span class="hljs-string">create</span> <span class="hljs-string">-f</span> <span class="hljs-string">filesystem.yaml</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">get</span> <span class="hljs-string">pod</span> <span class="hljs-string">-n</span> <span class="hljs-string">rook-ceph</span> <span class="hljs-string">|</span> <span class="hljs-string">grep</span> <span class="hljs-string">mds</span><br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/380a84c6e412e69d84beba5b6b7e47f3697559838.png" alt="image-20231119210143026"></p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">- 进入pod<br>kubectl -n rook-ceph exec -<span class="hljs-keyword">it</span> deploy/rook-ceph-tools <span class="hljs-comment">-- bash</span><br> <br>- 查看集群状态<br>ceph status<br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/5b4dd656122e2b64787fb30b8a20a97c697559838.png" alt="image-20231119210339096"></p><h4 id="配置存储-StorageClass"><a href="#配置存储-StorageClass" class="headerlink" title="配置存储(StorageClass)"></a>配置存储(StorageClass)</h4><p>配置文件：<code>/root/rook/deploy/examples/csi/cephfs/storageclass.yaml</code></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/root/</span>rook<span class="hljs-regexp">/deploy/</span>examples<span class="hljs-regexp">/csi/</span>cephfs<br>kubectl apply -f storageclass.yaml<br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/19ede1d5988df074b7b8bd884ce5feb1697559838.png" alt="image-20231119210625832"></p><h4 id="共享文件存储使用示例"><a href="#共享文件存储使用示例" class="headerlink" title="共享文件存储使用示例"></a>共享文件存储使用示例</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cat</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">nginx-deploy-cephfs.yaml</span> <span class="hljs-string">&lt;&lt;</span> <span class="hljs-string">&quot;EOF&quot;</span><br> <br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-deploy-cephfs</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-deploy-cephfs</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">matchLabels:</span><br>      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-deploy-cephfs</span><br>  <span class="hljs-attr">template:</span><br>    <span class="hljs-attr">metadata:</span><br>      <span class="hljs-attr">labels:</span><br>        <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-deploy-cephfs</span><br>    <span class="hljs-attr">spec:</span><br>      <span class="hljs-attr">containers:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">image:</span> <span class="hljs-string">registry.cn-hangzhou.aliyuncs.com/qianyios/nginx:latest</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>        <span class="hljs-attr">volumeMounts:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">data</span><br>          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/usr/share/nginx/html</span><br>      <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">data</span><br>        <span class="hljs-attr">persistentVolumeClaim:</span><br>          <span class="hljs-attr">claimName:</span> <span class="hljs-string">nginx-cephfs-pvc</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">PersistentVolumeClaim</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-cephfs-pvc</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">&quot;rook-cephfs&quot;</span><br>  <span class="hljs-attr">accessModes:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">ReadWriteMany</span><br>  <span class="hljs-attr">resources:</span><br>    <span class="hljs-attr">requests:</span><br>      <span class="hljs-attr">storage:</span> <span class="hljs-string">1Gi</span><br><span class="hljs-string">EOF</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">nginx-deploy-cephfs.yaml</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">get</span> <span class="hljs-string">pod</span> <span class="hljs-string">-o</span> <span class="hljs-string">wide</span> <span class="hljs-string">|</span> <span class="hljs-string">grep</span> <span class="hljs-string">cephfs</span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">exec</span> <span class="hljs-string">-it</span> <span class="hljs-string">nginx-deploy-cephfs-6dc8797866-4s564</span> <span class="hljs-string">bash</span><br><span class="hljs-string">echo</span> <span class="hljs-string">&quot;hello cephfs&quot;</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">/usr/share/nginx/html/index.html</span> <span class="hljs-string">&amp;&amp;</span> <span class="hljs-string">exit</span><br><br><span class="hljs-comment">#测试完删除 </span><br><span class="hljs-string">kubectl</span> <span class="hljs-string">delete</span> <span class="hljs-string">-f</span> <span class="hljs-string">nginx-deploy-cephfs.yaml</span><br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/a6ab12847a41e35c1564805a5246d9af697559838.png" alt="image-20231119215220294"></p><h2 id="在K8S中直接调用出ceph命令"><a href="#在K8S中直接调用出ceph命令" class="headerlink" title="在K8S中直接调用出ceph命令"></a>在K8S中直接调用出ceph命令</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#安装epel源</span><br>yum install epel-release -y<br><br><span class="hljs-comment">#安装ceph仓库</span><br>yum install https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/ceph/</span>rpm-octopus<span class="hljs-regexp">/el7/</span>noarch/ceph-release-<span class="hljs-number">1</span>-<span class="hljs-number">1</span>.el7.noarch.rpm -y<br>yum list ceph-common  --showduplicates |sort -r<br><br><span class="hljs-comment">#安装ceph客户端</span><br>yum install ceph-common -y<br></code></pre></td></tr></table></figure><p>同步ceph中的认证文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs awk">kubectl -n rook-ceph exec -it deploy/rook-ceph-tools -- bash<br><br>[root@master1 ~]<span class="hljs-comment"># kubectl -n rook-ceph exec -it deploy/rook-ceph-tools -- bash</span><br><br>bash-<span class="hljs-number">4.4</span>$  cat <span class="hljs-regexp">/etc/</span>ceph/ceph.conf<br>[global]<br>mon_host = <span class="hljs-number">10.97</span>.<span class="hljs-number">121.57</span>:<span class="hljs-number">6789</span>,<span class="hljs-number">10.104</span>.<span class="hljs-number">235.210</span>:<span class="hljs-number">6789</span>,<span class="hljs-number">10.96</span>.<span class="hljs-number">136.90</span>:<span class="hljs-number">6789</span><br><br>[client.admin]<br>keyring = <span class="hljs-regexp">/etc/</span>ceph/keyring<br><br>bash-<span class="hljs-number">4.4</span>$ cat <span class="hljs-regexp">/etc/</span>ceph/keyring<br>[client.admin]<br>key = AQC241lltDbVKBAANrzwgqZd1A2eY+<span class="hljs-number">8</span>h1A+BOg==<br>bash-<span class="hljs-number">4.4</span>$<br><br><br>注意这两个文件，复制内容之后<span class="hljs-keyword">exit</span>退出<br><br></code></pre></td></tr></table></figure><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/226133fd1f73556b78ec0135527d2750697559838.png" alt="image-20231119221441175"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br>直接在master1创建这两个文件（这里的master1是指我要在master1可以调用ceph的客户端）<br><br>cat &gt; <span class="hljs-regexp">/etc/</span>ceph/ceph.<span class="hljs-property">conf</span> &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>[<span class="hljs-variable language_">global</span>]<br>mon_host = <span class="hljs-number">10.97</span><span class="hljs-number">.121</span><span class="hljs-number">.57</span>:<span class="hljs-number">6789</span>,<span class="hljs-number">10.104</span><span class="hljs-number">.235</span><span class="hljs-number">.210</span>:<span class="hljs-number">6789</span>,<span class="hljs-number">10.96</span><span class="hljs-number">.136</span><span class="hljs-number">.90</span>:<span class="hljs-number">6789</span><br><br>[client.<span class="hljs-property">admin</span>]<br>keyring = <span class="hljs-regexp">/etc/</span>ceph/keyring<br><span class="hljs-variable constant_">EOF</span><br><br>cat &gt; <span class="hljs-regexp">/etc/</span>ceph/keyring &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br>[client.<span class="hljs-property">admin</span>]<br>key = <span class="hljs-title class_">AQC241</span>lltDbVKBAANrzwgqZd1A2eY+8h1A+<span class="hljs-title class_">BOg</span>==<br><span class="hljs-variable constant_">EOF</span><br></code></pre></td></tr></table></figure><p>当你添加完之后直接调用ceph的命令</p><p><img src="/../img/rook%E9%83%A8%E7%BD%B2ceph/697b4f16bd1e1a5d7ec359d02c91ff73697559838.png" alt="image-20231119221546943"></p><h2 id="删除pvc，sc及对应的存储资源"><a href="#删除pvc，sc及对应的存储资源" class="headerlink" title="删除pvc，sc及对应的存储资源"></a>删除pvc，sc及对应的存储资源</h2><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs maxima">- 按需删除pvc、<span class="hljs-built_in">pv</span><br>kubectl <span class="hljs-built_in">get</span> pvc -n [namespace] | awk &#x27;&#123;<span class="hljs-built_in">print</span> $<span class="hljs-number">1</span>&#125;;&#x27; | xargs kubectl <span class="hljs-built_in">delete</span> pvc -n [namespace]<br>kubectl <span class="hljs-built_in">get</span> <span class="hljs-built_in">pv</span> | grep Released | awk &#x27;&#123;<span class="hljs-built_in">print</span> $<span class="hljs-number">1</span>&#125;;&#x27; | xargs kubectl <span class="hljs-built_in">delete</span> <span class="hljs-built_in">pv</span><br> <br>- 删除块存储及SC<br>kubectl <span class="hljs-built_in">delete</span> -n rook-ceph cephblockpool replicapool<br>kubectl <span class="hljs-built_in">delete</span> storageclass rook-ceph-<span class="hljs-built_in">block</span><br><br></code></pre></td></tr></table></figure><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Ceph</tag>
      
      <tag>K8s</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ansible-Roles</title>
    <link href="/2023/11/13/ansible/Ansible-Roles/"/>
    <url>/2023/11/13/ansible/Ansible-Roles/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Roles"><a href="#Roles" class="headerlink" title="Roles"></a>Roles</h1><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">·由来: ansible自动化运行，基础由AD-Hoc命令来完成，在命令变多时，产生了playbook进行管理任务，简单任务使用playcook可以轻松处理，但是有复杂任务时单个playbook不可以胜任了，这时需要把多个playbook进行组合，少量用<span class="hljs-meta"><span class="hljs-keyword">include</span>将剧本中任务互相关联即可完成，但是playbook还在增多的情况时就不方便管理了，这时引入roles对playbook进行有效组织就十分必要了</span><br><span class="hljs-meta">· Roles:角色，是ansible自1.2版本开始引入的新特性</span><br><span class="hljs-meta">·目的:用于层次性，结构化地组织playbook, roles能够根据层次型结构自动装载变量、文件、任务、模块及触发器·方法: roles通过分别将放置于变量、文件、任务、模块及触发器单独的目录中，并可以便捷地<span class="hljs-keyword">include</span>它们的一种机制·应用:角色一般用于基于主机构建服务的场景中、但也可以是用于构建守护进程等场景中</span><br></code></pre></td></tr></table></figure><h2 id="roles默认路径设置"><a href="#roles默认路径设置" class="headerlink" title="roles默认路径设置"></a>roles默认路径设置</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/etc/</span>ansible/ansible.cfg<br>roles_path= <span class="hljs-regexp">/etc/</span>ansible/roles<br></code></pre></td></tr></table></figure><h2 id="Roles各目录结构及作用"><a href="#Roles各目录结构及作用" class="headerlink" title="Roles各目录结构及作用"></a>Roles各目录结构及作用</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs gradle">每个角色，以特定的层级目录结构进行组织<br>roles目录结构：<br>playbook.yml  调用角色<br>roles/<br>  <span class="hljs-keyword">project</span>/ (角色名称)<br>    tasks/<br>    files/<br>    vars/<br>    templates/<br>    handlers/<br>    <span class="hljs-keyword">default</span>/ 不常用，设定默认变量时使用此目录中的main.yml文件<br>    meta/    不常用，定义当前角色的特殊设定及其依赖关系,至少应该包含一个名为main.yml的文件；其它文件需在此文件中通过<span class="hljs-keyword">include</span>进行包含<br>各目录的作用：<br><span class="hljs-regexp">/roles/</span><span class="hljs-keyword">project</span>/ :项目名称,有以下子目录，<span class="hljs-keyword">project</span>可以是mysql\httpd\nginx\memcached等<br>    files/ ：存放由<span class="hljs-keyword">copy</span>或script模块等调用的文件<br>    templates/：template模块查找所需要模板文件的目录<br>    tasks/：定义<span class="hljs-keyword">task</span>,role的基本元素，至少应该包含一个名为main.yml的文件, 其定义了此角色的任务列表.<br>             在handler中使用<span class="hljs-keyword">include</span>包含的其它的handler文件也应该位于此目录中；<br>    handlers/：至少应该包含一个名为main.yml的文件；用于定义此角色用到的各handler；<br>               其它的文件需要在此文件中通过<span class="hljs-keyword">include</span>进行包含<br>    vars/：定义变量，至少应该包含一个名为main.yml的文件,；<br>           其它的文件需要在此文件中通过<span class="hljs-keyword">include</span>进行包含<br>    meta/：定义当前角色的特殊设定及其依赖关系,至少应该包含一个名为main.yml的文件，<br>           其它文件需在此文件中通过<span class="hljs-keyword">include</span>进行包含, ansible1.<span class="hljs-number">3</span>及其以后的版本才支持；<br>    defaults/：为当前角色设定默认变量时使用此目录；应当包含一个main.yml文件<br></code></pre></td></tr></table></figure><h3 id="创建role框架"><a href="#创建role框架" class="headerlink" title="创建role框架"></a>创建role框架</h3><p>您可以使用标准Linux命令创建新角色所需的所有子目录和文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /etc/ansible/roles/<br><span class="hljs-built_in">mkdir</span>  httpd<br><span class="hljs-built_in">cd</span> httpd<br><span class="hljs-built_in">mkdir</span>  tasks  handlers  vars  meta  defaults templates files <br></code></pre></td></tr></table></figure><p>或者可以运行ansible-galaxy init来创建新角色的目录结构。指定角色的名称作为命令的参数，该命令在当前工作目录中为新角色创建子目录。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/etc/</span>ansible/roles<br>ansible-galaxy init httpd<br>tree httpd<br>[root@controller roles]<span class="hljs-comment"># tree httpd</span><br>httpd      <span class="hljs-comment">#具体的⾓⾊项⽬名称，   ⽐如nginx、tomcat、php  (⾃由设置)</span><br>├── defaults  <span class="hljs-comment">#⽤于为当前⾓⾊设定默认变量，  此⽬录应当包含⼀个main.yml⽂件</span><br>│   └── main.yml  <span class="hljs-comment">#类似代码中的主函数，  进⾏统⼀管理</span><br>├── files      <span class="hljs-comment">#⽤来存放由copy模块或script模块等模块调⽤的⽂件</span><br>├── handlers    <span class="hljs-comment">#⽤于定义此⾓⾊中触发条件时执⾏的动作，  此⽬录应当包含⼀个main.yml⽂件</span><br>│   └── main.yml<br>├── meta      <span class="hljs-comment">#⽤于定义此⾓⾊的特殊设定及其依赖关系，  此⽬录应当包含⼀个main.yml⽂件</span><br>│   └── main.yml<br>├── README.md   <span class="hljs-comment">#说明⽂件</span><br>├── tasks       <span class="hljs-comment">#⽤于定义当前⾓⾊的任务列表，  此⽬录应当包含⼀个main.yml⽂件</span><br>│   └── main.yml<br>├── templates  <span class="hljs-comment">#⽤来存放jinjia2模板，template模块会⾃动在此⽬录中寻找jinjia2模板⽂件</span><br>├── tests   <span class="hljs-comment">#⽤于存放测试role本⾝功能的playbook和主机定义⽂件，  在开发测试阶段⽐较常⽤ ,此⽬录应当包含⼀个main.yml⽂件和⾃⾝资源设定invetory</span><br>│   ├── inventory<br>│   └── test.yml<br>└── vars    <span class="hljs-comment">#⽤于定义此⾓⾊⽤到的变量，  此⽬录应当包含⼀个main.yml⽂件</span><br>    └── main.yml<br><br></code></pre></td></tr></table></figure><h1 id="实验任务：安装httpd服务"><a href="#实验任务：安装httpd服务" class="headerlink" title="实验任务：安装httpd服务"></a>实验任务：安装httpd服务</h1><p>原始的playbook版本</p><p>1、制作主页</p><p>echo hi &gt; index.html</p><p>2、拷贝本机httpd的配置文件为httpd.conf.j2模版，并修改</p><p>cp &#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf  httpd.conf.j2</p><p>vim  httpd.j2   #42行 修改为</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> http_port is defined %&#125;</span><span class="language-xml"></span><br><span class="language-xml">Listen </span><span class="hljs-template-variable">&#123;&#123; ansible_facts.default_ipv4.address &#125;&#125;</span><span class="language-xml">:</span><span class="hljs-template-variable">&#123;&#123; http_port &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><p>3、编写playbook文件，</p><p>创建变量http_port: 8080</p><p>执行任务：</p><p>1)安装httpd</p><p>2)拷贝主页</p><p>3)拷贝配置（做触发器）</p><p>4)防火墙放通自定义的端口</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">firewalld</span> <span class="hljs-string">configuration</span><br>  <span class="hljs-attr">firewalld:</span>  <br>    <span class="hljs-attr">port:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123;  http_port &#125;&#125;</span>/tcp&quot;</span><br>    <span class="hljs-attr">permanent:</span> <span class="hljs-literal">yes</span> <br>    <span class="hljs-attr">immediate:</span> <span class="hljs-literal">yes</span> <br>    <span class="hljs-attr">state:</span> <span class="hljs-string">enabled</span><br>  <span class="hljs-attr">when:</span> <span class="hljs-string">http_port</span> <span class="hljs-string">is</span> <span class="hljs-string">defined</span><br></code></pre></td></tr></table></figure><p>5)开启服务</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---                                                                                                                                                                           </span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span> <br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">vars:</span><br>    <span class="hljs-attr">http_port:</span> <span class="hljs-number">8080</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">httpd</span> <span class="hljs-string">package</span><br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">a</span> <span class="hljs-string">web</span> <span class="hljs-string">content</span><br>    <span class="hljs-attr">copy:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">index.html</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/var/www/html/index.html</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">config</span> <span class="hljs-string">file</span><br>    <span class="hljs-attr">template:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">httpd.conf.j2</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/httpd/conf/httpd.conf</span><br>    <span class="hljs-attr">notify:</span> <span class="hljs-string">restart_httpd</span><br>    <span class="hljs-attr">when:</span> <span class="hljs-string">http_port</span> <span class="hljs-string">is</span> <span class="hljs-string">defined</span>                                                                                                                                                <br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">firewalld</span> <span class="hljs-string">configuration</span><br>    <span class="hljs-attr">firewalld:</span>                                                                   <br>      <span class="hljs-attr">port:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123;  http_port &#125;&#125;</span>/tcp&quot;</span><br>      <span class="hljs-attr">permanent:</span> <span class="hljs-literal">yes</span> <br>      <span class="hljs-attr">immediate:</span> <span class="hljs-literal">yes</span> <br>      <span class="hljs-attr">state:</span> <span class="hljs-string">enabled</span><br>    <span class="hljs-attr">when:</span> <span class="hljs-string">http_port</span> <span class="hljs-string">is</span> <span class="hljs-string">defined</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">start</span> <span class="hljs-string">service</span><br>    <span class="hljs-attr">service:</span> <br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span> <br>      <span class="hljs-attr">state:</span> <span class="hljs-string">started</span> <br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span><br>  <span class="hljs-attr">handlers:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">restart_httpd</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">restarted</span><br></code></pre></td></tr></table></figure><p>验证端口及主页</p><p>ansible all -m shell -a “ss -tunlp|grep httpd” </p><h2 id="任务分析："><a href="#任务分析：" class="headerlink" title="任务分析："></a>任务分析：</h2><p>1.配置 httpd 的时候，可能存在配置文件，配置文件可能含有变量</p><p>2.必要变量的定义</p><p>3.源码文件的定义</p><h2 id="1-gt-创建httpd角色框架"><a href="#1-gt-创建httpd角色框架" class="headerlink" title="1&gt; 创建httpd角色框架"></a>1&gt; 创建httpd角色框架</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">ansible-galaxy <span class="hljs-keyword">init</span> httpd<br></code></pre></td></tr></table></figure><p>查看目录结构</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[root@controller roles]</span># tree httpd<br>httpd<br>├── defaults<br>│  └── <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.yml</span><br>├── files<br>├── handlers<br>│   └── <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.yml</span><br>├── meta<br>│   └── <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.yml</span><br>├── README<span class="hljs-selector-class">.md</span><br>├── tasks<br>│   └── <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.yml</span><br>├── templates<br>├── tests<br>│   ├── inventory<br>│   └── test<span class="hljs-selector-class">.yml</span><br>└── vars<br>    └── <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.yml</span><br></code></pre></td></tr></table></figure><h2 id="2-gt-部署完善httpd角色框架"><a href="#2-gt-部署完善httpd角色框架" class="headerlink" title="2&gt; 部署完善httpd角色框架"></a>2&gt; 部署完善httpd角色框架</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">cd roles/httpd/tasks/<br>touch install<span class="hljs-selector-class">.yml</span> conf_template<span class="hljs-selector-class">.yml</span> service<span class="hljs-selector-class">.yml</span> index<span class="hljs-selector-class">.yml</span>   httpd_firewalld.yml<br></code></pre></td></tr></table></figure><h2 id="3-gt-定义分任务-tasks-x2F-中存放"><a href="#3-gt-定义分任务-tasks-x2F-中存放" class="headerlink" title="3&gt; 定义分任务(tasks&#x2F;中存放)"></a>3&gt; 定义分任务(tasks&#x2F;中存放)</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">install.yml</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">httpd</span> <span class="hljs-string">package</span><br>  <span class="hljs-attr">yum:</span> <br>    <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span><br>    <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>     <br><span class="hljs-string">vim</span> <span class="hljs-string">conf_template.yml</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">config</span> <span class="hljs-string">file</span><br>  <span class="hljs-attr">template:</span> <br>    <span class="hljs-attr">src:</span> <span class="hljs-string">httpd.conf.j2</span> <br>    <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/httpd/conf/httpd.conf</span> <br>  <span class="hljs-attr">notify:</span> <span class="hljs-string">restart_httpd</span><br>  <span class="hljs-attr">when:</span> <span class="hljs-string">http_port</span> <span class="hljs-string">is</span> <span class="hljs-string">defined</span><br>         <br><span class="hljs-string">vim</span> <span class="hljs-string">service.yml</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">start</span> <span class="hljs-string">service</span><br>  <span class="hljs-attr">service:</span> <br>    <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span> <br>    <span class="hljs-attr">state:</span> <span class="hljs-string">started</span> <br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span><br>    <br><span class="hljs-string">vim</span>  <span class="hljs-string">index.yml</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">a</span> <span class="hljs-string">web</span> <span class="hljs-string">content</span><br>  <span class="hljs-attr">copy:</span><br>    <span class="hljs-attr">src:</span> <span class="hljs-string">index.html</span><br>    <span class="hljs-attr">dest:</span> <span class="hljs-string">/var/www/html/index.html</span><br><br><span class="hljs-string">vim</span> <span class="hljs-string">httpd_firewalld.yml</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">firewalld</span> <span class="hljs-string">configuration</span><br>  <span class="hljs-attr">firewalld:</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123;  http_port &#125;&#125;</span>/tcp&quot;</span><br>    <span class="hljs-attr">permanent:</span> <span class="hljs-literal">yes</span><br>    <span class="hljs-attr">immediate:</span> <span class="hljs-literal">yes</span><br>    <span class="hljs-attr">state:</span> <span class="hljs-string">enabled</span><br>  <span class="hljs-attr">when:</span> <span class="hljs-string">http_port</span> <span class="hljs-string">is</span> <span class="hljs-string">defined</span><br></code></pre></td></tr></table></figure><h2 id="4-gt-定义主任务-tasks-x2F-main-yml"><a href="#4-gt-定义主任务-tasks-x2F-main-yml" class="headerlink" title="4&gt;定义主任务(tasks&#x2F;main.yml)"></a>4&gt;定义主任务(tasks&#x2F;main.yml)</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">创建<span class="hljs-selector-tag">main</span>.yml主控文件,调用以上单独的yml文件,<span class="hljs-selector-tag">main</span>.yml定义了谁先执行谁后执行的顺序<br>vim <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.yml</span><br>- include: install<span class="hljs-selector-class">.yml</span><br>- include: index<span class="hljs-selector-class">.yml</span><br>- include: conf_template<span class="hljs-selector-class">.yml</span><br>- include: httpd_firewalld<span class="hljs-selector-class">.yml</span><br>- include: service.yml<br></code></pre></td></tr></table></figure><h2 id="5-gt-定义变量（vars-x2F-main-yml）"><a href="#5-gt-定义变量（vars-x2F-main-yml）" class="headerlink" title="5&gt;定义变量（vars&#x2F;main.yml）"></a>5&gt;定义变量（vars&#x2F;main.yml）</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">/etc/ansible/roles/httpd/vars/main.yml</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-comment">#vars file for httpd</span><br><span class="hljs-attr">http_port:</span> <span class="hljs-number">8080</span><br></code></pre></td></tr></table></figure><h2 id="6-gt-定义首页文件（files-x2F-index-html）"><a href="#6-gt-定义首页文件（files-x2F-index-html）" class="headerlink" title="6&gt; 定义首页文件（files&#x2F;index.html）"></a>6&gt; 定义首页文件（files&#x2F;index.html）</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd    <span class="hljs-regexp">/etc/</span>ansible<span class="hljs-regexp">/roles/</span>httpd<span class="hljs-regexp">/files/</span><br>vim index.html<br>&lt;h1&gt; welcome to wd home &lt;\h1&gt;<br></code></pre></td></tr></table></figure><h2 id="7-gt-定义模板-templates-x2F-httpd-conf-j2"><a href="#7-gt-定义模板-templates-x2F-httpd-conf-j2" class="headerlink" title="7&gt; 定义模板(templates&#x2F;httpd.conf.j2 )"></a>7&gt; 定义模板(templates&#x2F;httpd.conf.j2 )</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs fr">yum -y install httpd<br><br>cp /etc/httpd/conf/httpd.conf  /etc/ansible/roles/httpd/templates/httpd.conf.j2 <br><br>vim templates/httpd.conf.j2<br>将LISTEN 80 行修改为以下内容<br>&#123;% if http_port is defined %&#125;<br>Listen &#123;&#123; ansible_facts.default_ipv4.address &#125;&#125;:&#123;&#123; http_port &#125;&#125;<br>&#123;% endif %&#125;<br></code></pre></td></tr></table></figure><h2 id="8-gt-定义角色处理程序（handlers-x2F-mail-yml）"><a href="#8-gt-定义角色处理程序（handlers-x2F-mail-yml）" class="headerlink" title="8&gt; 定义角色处理程序（handlers&#x2F;mail.yml）"></a>8&gt; 定义角色处理程序（handlers&#x2F;mail.yml）</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/</span>ansible<span class="hljs-regexp">/roles/</span>httpd<span class="hljs-regexp">/handlers/m</span>ain.yml<br>- name: restart_httpd<br>  service: <br>    name: httpd <br>    state: restarted<br></code></pre></td></tr></table></figure><h2 id="9-gt-调用角色，配置httpd服务（roles-x2F-role-httpd-yml）"><a href="#9-gt-调用角色，配置httpd服务（roles-x2F-role-httpd-yml）" class="headerlink" title="9&gt; 调用角色，配置httpd服务（roles&#x2F;role_httpd.yml）"></a>9&gt; 调用角色，配置httpd服务（roles&#x2F;role_httpd.yml）</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cd</span> <span class="hljs-string">/etc/ansidle/roles</span><br><span class="hljs-string">vim</span> <span class="hljs-string">role_httpd.yml</span><br><span class="hljs-meta">---</span><br><span class="hljs-comment"># httpd role</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span> <span class="hljs-string">deployment</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">websrvs</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span>    <br>  <br>  <span class="hljs-attr">roles:</span>       <span class="hljs-comment">#调用角色</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">httpd</span>   <br></code></pre></td></tr></table></figure><h2 id="10-gt-检查语法及冒烟运行"><a href="#10-gt-检查语法及冒烟运行" class="headerlink" title="10&gt; 检查语法及冒烟运行"></a>10&gt; 检查语法及冒烟运行</h2><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">ansible</span><span class="hljs-operator">-</span><span class="hljs-variable">playbook</span> <span class="hljs-type">role_httpd</span><span class="hljs-operator">.</span><span class="hljs-variable">yml</span> <span class="hljs-operator">-</span><span class="hljs-built_in">C</span><br></code></pre></td></tr></table></figure><h2 id="11-gt-正式执行"><a href="#11-gt-正式执行" class="headerlink" title="11&gt;正式执行"></a>11&gt;正式执行</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">ansible-playbook role_httpd.yml<br></code></pre></td></tr></table></figure><h2 id="12-gt-验证服务"><a href="#12-gt-验证服务" class="headerlink" title="12&gt;验证服务"></a>12&gt;验证服务</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ansible</span> <span class="hljs-literal">all</span> -m shell -a <span class="hljs-string">&quot;ss -tunlp |grep httpd&quot;</span><br><span class="hljs-attribute">curl</span> <span class="hljs-number">192.168.142.101:8080</span><br><br></code></pre></td></tr></table></figure><p><code>可以返回目录！</code></p><p><a href="https://blog.qianyios.top/2023/09/10/ansible/Ansible-%E6%80%BB%E6%89%8B%E5%86%8C/">Ansible练习目录 - 严千屹博客 (qianyios.top)</a></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>Ansible</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ansible-templates</title>
    <link href="/2023/11/13/ansible/Ansible-templates/"/>
    <url>/2023/11/13/ansible/Ansible-templates/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Ansible-templates"><a href="#Ansible-templates" class="headerlink" title="Ansible-templates"></a>Ansible-templates</h1><h2 id="JINJA2语法简要介绍"><a href="#JINJA2语法简要介绍" class="headerlink" title="JINJA2语法简要介绍"></a>JINJA2语法简要介绍</h2><p>Jinja2语言，支持的数据类型：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">字符串：使用单引号或双引号<br>数字：整数，浮点数<br>列表：[item1, item2, <span class="hljs-string">...</span>]<br>元组：<span class="hljs-params">(item1, item2, ...)</span><br>字典：&#123;key1<span class="hljs-function">:value1</span>, key2<span class="hljs-function">:value2</span>, <span class="hljs-string">...</span>&#125;<br>布尔型：<span class="hljs-literal">true</span>/<span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>支持的运算及操作：</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arcade">算术运算：+, -, *, /, <span class="hljs-comment">//, %, **</span><br>比较操作：==, !=, &gt;, &gt;=, &lt;, &lt;=<br>逻辑运算：and，or，not<br>流表达式：<span class="hljs-keyword">For</span>，<span class="hljs-keyword">If</span>，<span class="hljs-built_in">When</span><br></code></pre></td></tr></table></figure><h2 id="Playbook的进阶应用"><a href="#Playbook的进阶应用" class="headerlink" title="Playbook的进阶应用"></a>Playbook的进阶应用</h2><h3 id="使用when实现条件判断"><a href="#使用when实现条件判断" class="headerlink" title="使用when实现条件判断"></a>使用when实现条件判断</h3><p>条件测试:如果需要根据变量、facts或此前任务的执行结果来做为某task执行与否的前提时要用到条件测试。<strong>剧本中不能使用if判断，需要使用when判断。</strong></p><p>when语句：在task后添加when子句即可使用条件测试，可以使用facts或playbook中定义的变量，支持Jinja2表达式语法</p><p>示例：</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arcade">tasks:<br>  - name: <span class="hljs-string">&quot;shutdown RedHat flavored systems&quot;</span><br>    command: <span class="hljs-regexp">/sbin/</span>shutdown -h <span class="hljs-built_in">now</span><br>    <span class="hljs-built_in">when</span>: ansible_os_family == <span class="hljs-string">&quot;RedHat&quot;</span>  当系统属于红帽系列,执行command模块，注意：<span class="hljs-string">&#x27;所有变量&#x27;</span>都可以直接在条件语句中使用，而无需使用双大括号<br></code></pre></td></tr></table></figure><p>也可以使用多个when进行多条件判断，等效于and。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_when.yml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy</span> <span class="hljs-string">file</span><br>    <span class="hljs-attr">copy:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/etc/hosts</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/root/hosts_when</span><br>    <span class="hljs-attr">when:</span> <span class="hljs-string">ansible_hostname</span> <span class="hljs-string">is</span> <span class="hljs-string">match</span> <span class="hljs-string">&quot;node1&quot;</span><span class="hljs-comment">#when支持通配符</span><br><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">--list</span><br><span class="hljs-string">ansible-playbook</span>  <span class="hljs-string">test_when.yml</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&quot;ls -l /root/hosts_when&quot;</span><br></code></pre></td></tr></table></figure><h3 id="使用with-items实现迭代"><a href="#使用with-items实现迭代" class="headerlink" title="使用with_items实现迭代"></a>使用with_items实现迭代</h3><p>迭代：当有需要重复性执行的任务时，可以使用迭代机制<br>    &gt; 对迭代项的引用，固定变量名为”item”</p><blockquote><p>要在task中使用with_items给定要迭代的元素列表，<br>    &gt; 列表格式：<br>         字符串<br>         字典</p></blockquote><h3 id="示例：打印1、2、3"><a href="#示例：打印1、2、3" class="headerlink" title="示例：打印1、2、3"></a><strong>示例：打印1、2、3</strong></h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_items.yml</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">add</span> <span class="hljs-string">serveral</span> <span class="hljs-string">users</span><br>  <span class="hljs-attr">gather_facts:</span> <span class="hljs-literal">no</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">test</span> <span class="hljs-string">loop</span><br>    <span class="hljs-attr">debug:</span> <br>      <span class="hljs-attr">msg:</span> <span class="hljs-string">&quot;name --- <span class="hljs-template-variable">&#123;&#123; item &#125;&#125;</span>&quot;</span> <span class="hljs-comment">#&#123;&#123; item &#125;&#125; 系统自定义变量</span><br>    <span class="hljs-attr">with_items:</span>   <span class="hljs-comment">##with_items定义&#123;&#123; item &#125;&#125; 的值和个数,      一般放到模块的末尾，与模块同一缩进级别    </span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">one</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">two</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">three</span><br></code></pre></td></tr></table></figure><h3 id="示例：创建用户"><a href="#示例：创建用户" class="headerlink" title="示例：创建用户"></a>示例：创建用户</h3><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs pf">vim test_items.yml<br><br>---<br>- name: add serveral users<br>  hosts: <span class="hljs-literal">all</span><br>  tasks:<br>  - <span class="hljs-keyword">user</span>:<br>      name: <span class="hljs-string">&quot;&#123;&#123; item  &#125;&#125;&quot;</span>  <span class="hljs-comment">#&#123;&#123; item &#125;&#125; 系统自定义变量</span><br>      <span class="hljs-keyword">state</span>: present<br>    with_items:           <span class="hljs-comment">##with_items定义&#123;&#123; item &#125;&#125; 的值和个数,一般放到模块的末尾，与模块同一缩进级别    </span><br>    - testuser1<br>    - testuser2<br><br>ansible <span class="hljs-literal">all</span> --list<br>ansible-playbook  test_items.yml<br>ansible <span class="hljs-literal">all</span> -m shell -a <span class="hljs-string">&quot;getent passwd testuser1&quot;</span><br><br>上面语句的功能等同于下面的语句：<br>- name: add <span class="hljs-keyword">user</span> testuser1<br>  <span class="hljs-keyword">user</span>: name=testuser1 <span class="hljs-keyword">state</span>=present <br>- name: add <span class="hljs-keyword">user</span> testuser2<br>  <span class="hljs-keyword">user</span>: name=testuser2 <span class="hljs-keyword">state</span>=present <br></code></pre></td></tr></table></figure><h3 id="示例：拷贝多个文件"><a href="#示例：拷贝多个文件" class="headerlink" title="示例：拷贝多个文件"></a>示例：拷贝多个文件</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">touch</span> <span class="hljs-string">/root/1.txt</span> <span class="hljs-string">/root/2.txt</span><br><br><span class="hljs-string">vim</span> <span class="hljs-string">test_items2.yml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy</span> <span class="hljs-string">serveral</span> <span class="hljs-string">files</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">copy:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/&#123;&#123;</span> <span class="hljs-string">item</span>  <span class="hljs-string">&#125;&#125;</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/&#123;&#123;</span> <span class="hljs-string">item</span> <span class="hljs-string">&#125;&#125;</span><br>    <span class="hljs-attr">with_items:</span>          <br>    <span class="hljs-bullet">-</span> <span class="hljs-number">1.</span><span class="hljs-string">txt</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-number">2.</span><span class="hljs-string">txt</span><br><br><span class="hljs-string">ansible-playbook</span>  <span class="hljs-string">test_items2.yml</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&quot;ls -l /etc/*.txt&quot;</span><br></code></pre></td></tr></table></figure><h3 id="示例：迭代字典"><a href="#示例：迭代字典" class="headerlink" title="示例：迭代字典"></a>示例：迭代字典</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">with_items中可以使用元素还可为hashes</span><br><span class="hljs-string">示例：</span><br><span class="hljs-string">vim</span> <span class="hljs-string">test_items3.yml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">add</span> <span class="hljs-string">several</span> <span class="hljs-string">users</span><br>  <span class="hljs-attr">gather_facts:</span> <span class="hljs-literal">no</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">user:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; item.name &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>      <span class="hljs-attr">groups:</span> <span class="hljs-string">&quot; <span class="hljs-template-variable">&#123;&#123; item.groups &#125;&#125;</span>&quot;</span><br>    <span class="hljs-attr">with_items:</span><br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">name:</span> <span class="hljs-string">&#x27;testuser3&#x27;</span>, <span class="hljs-attr">groups:</span> <span class="hljs-string">&#x27;wheel&#x27;</span> &#125;<br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">name:</span> <span class="hljs-string">&#x27;testuser4&#x27;</span>, <span class="hljs-attr">groups:</span> <span class="hljs-string">&#x27;root&#x27;</span> &#125;<br><br><br><span class="hljs-string">ansible-playbook</span>  <span class="hljs-string">test_items3.yml</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&quot;getent passwd testuser3&quot;</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&quot;id testuser3&quot;</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&quot;getent passwd testuser4&quot;</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&quot;id testuser4&quot;</span><br><br></code></pre></td></tr></table></figure><h3 id="课堂作业：使用with—items拷贝多个文件"><a href="#课堂作业：使用with—items拷贝多个文件" class="headerlink" title="课堂作业：使用with—items拷贝多个文件"></a>课堂作业：使用with—items拷贝多个文件</h3><p>要求：item列表条目为字典类型，包含src、dest、mode3个键值对，使用with_items实现多个文件的拷贝，并赋予设定的权限。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">touch</span> <span class="hljs-string">/root/3.txt</span> <span class="hljs-string">/root/4.txt</span><br><span class="hljs-string">vim</span> <span class="hljs-string">test_items4.yml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy</span> <span class="hljs-string">several</span> <span class="hljs-string">files</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">copy:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; item.src &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; item.dest &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">mode:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; item.mode &#125;&#125;</span>&quot;</span><br>    <span class="hljs-attr">with_items:</span>          <br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">src:</span> <span class="hljs-string">&quot;/root/3.txt&quot;</span>, <span class="hljs-attr">dest:</span> <span class="hljs-string">&quot;/root/&quot;</span>, <span class="hljs-attr">mode:</span> <span class="hljs-string">&quot;0644&quot;</span> &#125;<br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">src:</span> <span class="hljs-string">&quot;/root/4.txt&quot;</span>, <span class="hljs-attr">dest:</span> <span class="hljs-string">&quot;/root/&quot;</span>, <span class="hljs-attr">mode:</span> <span class="hljs-string">&quot;0644&quot;</span> &#125;<br><br><span class="hljs-string">ansible-playbook</span>  <span class="hljs-string">test_items4.yml</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&quot;ls -l /root/*.txt&quot;</span><br><br></code></pre></td></tr></table></figure><h4 id="when和with-items组合使用"><a href="#when和with-items组合使用" class="headerlink" title="when和with items组合使用"></a>when和with items组合使用</h4><p> 当when和with_items一起使用的时候，每个项都会单独被when语句处理</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_when_items.yml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">command:</span> <span class="hljs-string">echo</span> &#123;&#123; <span class="hljs-string">item</span> &#125;&#125;<br>    <span class="hljs-attr">with_items:</span> [ <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">8</span>,<span class="hljs-number">10</span>]<br>    <span class="hljs-attr">when:</span> <span class="hljs-string">item</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">5</span><br>         <br> <span class="hljs-string">ansible-playbook</span> <span class="hljs-string">test_when_items.yml</span><br></code></pre></td></tr></table></figure><h2 id="templates-模板"><a href="#templates-模板" class="headerlink" title="templates 模板"></a>templates 模板</h2><p>templates功能：根据模板文件动态生成对应的配置文件，命名必须以.j2结尾，支持jinja2语法。</p><p>在呈现 JINJA2模板时，文件中引用的变量和表达式被替换为对应的值。模板中使用的变量可以在 Playbook 的 vars 部分中指定。可以将受管主机的事实用作模板中的变量。</p><p>分隔符使用规范：</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="hljs-template-tag">&#123;% <span class="hljs-name">EXPR</span> %&#125;</span><span class="language-xml">：用于表达式或逻辑（如循环、判断等）</span><br><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; EXPR &#125;&#125;</span><span class="language-xml">：用于向最终用户输出表达式或变量的结果。在呈现时将被替换为一个或多个值，对最终用户可见。</span><br><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-comment">&#123;# COMMENT #&#125;</span><span class="language-xml">，用于注释，不会出现在最终文件中。</span><br></code></pre></td></tr></table></figure><h3 id="templates的使用场景"><a href="#templates的使用场景" class="headerlink" title="templates的使用场景"></a>templates的使用场景</h3><p>在实际的工作中由于每台服务器的环境配置都可能不同，但是往往很多服务的配置文件都需要根据服务器环境进行不同的配置，比如Nginx最大进程数、Redis最大内存等。</p><p>为了解决这个问题可以使用Ansible的template模块，该模块和copy模块作用基本一样，都是把管理端的文件复制到客户端主机上，但是区别在于template模块可以通过变量来获取配置值，支持多种判断、循环、逻辑运算等，而copy只能原封不动的把文件内容复制过去。</p><h4 id="示例：httpd-conf的templates模板"><a href="#示例：httpd-conf的templates模板" class="headerlink" title="示例：httpd.conf的templates模板"></a>示例：httpd.conf的templates模板</h4><p>创建并编辑httpd.conf.j2文件</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">yum -y install httpd<br>rpm -qa httpd<br> <br>cp /etc/httpd/conf/httpd.conf /root/httpd.conf.j2<br> <br>vim /root/httpd.conf.j2<br> <br>---------<span class="hljs-number">42</span>行----------<br>Listen &#123;&#123;port&#125;&#125;<br> <br>----------<span class="hljs-number">95</span>行---------<br>ServerName &#123;&#123;domain&#125;&#125;<br> <br>vim /etc/ansible/hosts<br> <br><span class="hljs-string">[websrvs]</span><br><span class="hljs-number">192.168.142.101</span> port=<span class="hljs-number">80</span> domain=www.node1.com<br><span class="hljs-number">192.168.142.102</span> port=<span class="hljs-number">81</span> domain=www.node2.com<br></code></pre></td></tr></table></figure><p>卸载受控机上的httpd服务</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible websrvs -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;yum remove -y httpd&#x27;</span><br>ansible websrvs -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;yum remove -y nginx&#x27;</span><br></code></pre></td></tr></table></figure><p>新建yaml文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">cd</span> <span class="hljs-string">/root</span><br><span class="hljs-string">vim</span> <span class="hljs-string">a.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">websrvs</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">vars:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">package:</span> <span class="hljs-string">httpd</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">service:</span> <span class="hljs-string">httpd</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">service</span><br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; package &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">latest</span><br><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">httpd.conf</span><br>    <span class="hljs-attr">template:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/httpd.conf.j2</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/httpd/conf/httpd.conf</span><br>    <span class="hljs-attr">notify:</span> <span class="hljs-string">restart</span> <span class="hljs-string">service</span><br><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">start</span> <span class="hljs-string">service</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; service &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">started</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br> <br> <span class="hljs-attr">handlers:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">restart</span> <span class="hljs-string">service</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; service &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">restarted</span><br><br></code></pre></td></tr></table></figure><p>执行yaml文件并验证</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible-playbook <span class="hljs-keyword">a</span>.yaml <span class="hljs-comment">--syntax-check</span><br>ansible-playbook <span class="hljs-keyword">a</span>.yaml<br>ansible websrvs -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;systemctl status httpd&#x27;</span><br>ansible websrvs -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;ss -ntl&#x27;</span><br>ansible websrvs -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;netstat -ntlp |grep httpd&#x27;</span><br>ansible websrvs -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;lsof -i:80&#x27;</span><br>ansible websrvs -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;lsof -i:81&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="tamplates-for-循环"><a href="#tamplates-for-循环" class="headerlink" title="tamplates-for(循环)"></a>tamplates-for(循环)</h4><p>语法：</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> 变量 <span class="hljs-keyword">in</span> 列表 %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 文本内容调用变量 &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><p>示例：使用for循环遍历调用users列表变量的元素</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">&#123;%  for <span class="hljs-keyword">user</span> <span class="hljs-title">in</span> users %&#125;<br>&#123;&#123;  <span class="hljs-keyword">user</span> <span class="hljs-title">&#125;&#125;</span><br><span class="hljs-title">&#123;% endfor</span> %&#125;<br></code></pre></td></tr></table></figure><h3 id="示例：yaml文件中变量的调用"><a href="#示例：yaml文件中变量的调用" class="headerlink" title="示例：yaml文件中变量的调用"></a>示例：yaml文件中变量的调用</h3><p>编写yaml文件 jinja2_for.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">jinja2_for.yml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">jinja2_for</span> <span class="hljs-string">example</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">vars:</span><br>    <span class="hljs-attr">users:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">user1</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">user2</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Copy</span> <span class="hljs-string">template</span><br>    <span class="hljs-attr">template:</span> <br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/users.j2</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/root/users</span> <br></code></pre></td></tr></table></figure><p>编写&#x2F;root&#x2F;users.j2文件</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">vim /root/users.j2<br>&#123;% for <span class="hljs-keyword">user</span> <span class="hljs-title">in</span> users %&#125;<br>username: &#123;&#123; <span class="hljs-keyword">user</span> <span class="hljs-title">&#125;&#125;</span><br><span class="hljs-title">&#123;% endfor</span> %&#125;<br></code></pre></td></tr></table></figure><p>执行并验证</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ansible-playbook jinjia2_for<span class="hljs-selector-class">.yml</span> <span class="hljs-attr">--syntax-check</span><br>ansible-playbook jinjia2_for<span class="hljs-selector-class">.yml</span><br>ansible <span class="hljs-attribute">all</span> -m shell -a <span class="hljs-string">&quot;cat /root/users&quot;</span><br></code></pre></td></tr></table></figure><p><strong>扩展示例：</strong></p><p>以下示例模板使用for语句逐一运行users变量中的所有值，将user替换为各个值，但值为root时除外。</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="language-xml">vim users.j2</span><br><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-comment">&#123;# for statement #&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> user <span class="hljs-keyword">in</span> users if not user ==&quot;root&quot; %&#125;</span><span class="language-xml"></span><br><span class="language-xml">User number </span><span class="hljs-template-variable">&#123;&#123; loop.index &#125;&#125;</span><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123; user &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><p>loop.index变量扩展至循环当前所处的索引号。它在循环第一次执行时值为1，每一次迭代递增1.</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ansible-playbook jinjia2_for<span class="hljs-selector-class">.yml</span> <span class="hljs-attr">--syntax-check</span><br>ansible-playbook jinjia2_for<span class="hljs-selector-class">.yml</span><br><br>ansible <span class="hljs-attribute">all</span> -m shell -a <span class="hljs-string">&quot;cat /root/users&quot;</span><br></code></pre></td></tr></table></figure><h3 id="示例：事实变量的调用"><a href="#示例：事实变量的调用" class="headerlink" title="示例：事实变量的调用"></a>示例：事实变量的调用</h3><p>编写yaml文件  jinja2_for2.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">jinja2_for2.yml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">jinja2_for</span> <span class="hljs-string">example2</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">vars:</span><br>    <span class="hljs-attr">users:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">user1</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">user2</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Copy</span> <span class="hljs-string">template</span><br>    <span class="hljs-attr">template:</span> <br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/host.j2</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/root/hosts</span> <br></code></pre></td></tr></table></figure><p>编写&#x2F;root&#x2F;host.j2文件</p><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs twig"><span class="language-xml">vim /root/host.j2</span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;%</span> <span class="hljs-name">for</span> host <span class="hljs-keyword">in</span> groups[<span class="hljs-string">&#x27;websrvs&#x27;</span>] <span class="hljs-template-tag">%&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; ansible_facts.default_ipv<span class="hljs-number">4</span>.address &#125;&#125;</span><span class="hljs-template-variable">&#123;&#123; ansible_facts.fqdn &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;%</span> <span class="hljs-name">endfor</span> <span class="hljs-template-tag">%&#125;</span><br></code></pre></td></tr></table></figure><p>执行并验证</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ansible-playbook jinjia2_for2<span class="hljs-selector-class">.yml</span> <span class="hljs-attr">--syntax-check</span><br>ansible-playbook jinjia2_for2<span class="hljs-selector-class">.yml</span><br><br>ansible websrvs -m shell -<span class="hljs-selector-tag">a</span> <span class="hljs-string">&quot;cat /root/hosts&quot;</span><br></code></pre></td></tr></table></figure><h4 id="tamplates-if（判断）"><a href="#tamplates-if（判断）" class="headerlink" title="tamplates-if（判断）"></a>tamplates-if（判断）</h4><p>Jinja2使用 if 语句来提供条件控制。如果满足条件，允许在文件中添加一行内容。</p><p>语法：</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs django"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> 条件 %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; 语句 &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><p>编写yaml文件 jinja2_if.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">jinja2_if.yml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">jinja2_if</span> <span class="hljs-string">example</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">websrvs</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Copy</span> <span class="hljs-string">template</span><br>    <span class="hljs-attr">template:</span> <br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/host2.j2</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/root/hosts2</span> <br></code></pre></td></tr></table></figure><p>编辑host2.j2文件</p><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs twig"><span class="language-xml">vim /root/host2.j2</span><br><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;%</span> <span class="hljs-name">if</span> ansible_facts.default_ipv<span class="hljs-number">4</span>.address ==<span class="hljs-string">&#x27;192.168.142.101&#x27;</span> <span class="hljs-template-tag">%&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; ansible_facts.default_ipv<span class="hljs-number">4</span>.address &#125;&#125;</span><span class="hljs-template-variable">&#123;&#123; ansible_facts.fqdn &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;%</span> <span class="hljs-name">endif</span> <span class="hljs-template-tag">%&#125;</span><br></code></pre></td></tr></table></figure><p>执行并验证</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ansible-playbook jinja2_if<span class="hljs-selector-class">.yml</span> <span class="hljs-attr">--syntax-check</span><br>ansible-playbook jinja2_if<span class="hljs-selector-class">.yml</span><br>ansible <span class="hljs-attribute">all</span> -m shell -a <span class="hljs-string">&quot;cat /root/hosts2&quot;</span><br></code></pre></td></tr></table></figure><h2 id="综合案例：nginx-templates"><a href="#综合案例：nginx-templates" class="headerlink" title="综合案例：nginx templates"></a>综合案例：nginx templates</h2><p>0、编辑主机清单，组websrvs，包含2台受控主机</p><p>1、主控端安装ngxin、拷贝nginx配置文件为nginx.conf.j2模板文件。创建nginx首页模版，命名为html.j2,引用实事变量：主机名，文件内容格式如： Welcome to </p><p>2、编写test_template.yaml文件，要求tasks</p><p>​      1）安装epel源 2）安装nginx 3）拷贝nginx.conf.j2模板文件为受控主机的nginx配置文件4）拷贝html.j2模板文件为受控主机的nginx首页文件4）开启服务</p><p>3、校验playbook语法并执行，验证受控主机的nginx进程数\服务端口\首页</p><p>4、修改nginx.conf.j2模板文件，配置 worker_processes数量为实事变量：受控主机处理器vcpu个数的两倍，保存</p><p>5、修改test_template.yaml文件，添加notify和handlers，在配置文件变化时，重启nginx</p><p>6、校验playbook语法并执行，验证受控主机的nginx进程数</p><p>7、修改hosts文件为每台主机定义服务端口变量 第一台 8082，第二台8083</p><p>8、修改test_template.yaml文件，修改监听端口行，增加主机端口变量的引用</p><p>9、校验playbook语法并执行，验证受控主机的nginx服务端口</p><p>10、修改test_template.yaml，增加端口变量定义，端口88</p><p>11、校验playbook语法并执行，验证受控主机的nginx服务端口</p><p>1、主控端安装ngxin、拷贝nginx配置文件为nginx.conf.j2模板文件</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vim">yum install -<span class="hljs-keyword">y</span> nginx<br><span class="hljs-keyword">cp</span> /etc/nginx/nginx.<span class="hljs-keyword">conf</span> /root/nginx.<span class="hljs-keyword">conf</span>.j2<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;welcome to &#123;&#123; ansible_hostname  &#125;&#125;&quot;</span> &gt; html.j2<br><br>ansible <span class="hljs-keyword">all</span> -<span class="hljs-keyword">m</span> setup |<span class="hljs-keyword">grep</span> <span class="hljs-built_in">hostname</span><br>ansible <span class="hljs-keyword">all</span> -<span class="hljs-keyword">m</span> setup |<span class="hljs-keyword">grep</span> vcpu<br></code></pre></td></tr></table></figure><p>2、创建nginx首页模版，命名为html.j2,引用实事变量：主机名</p><p>内容格式如： Welcome to </p><p>2、编写test_template.yaml文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_template.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">websrvs</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">epel</span><br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">epel-release</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">package</span><br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy</span> <span class="hljs-string">template</span><br>    <span class="hljs-attr">template:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/nginx.conf.j2</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/nginx/nginx.conf</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy</span> <span class="hljs-string">template</span><br>    <span class="hljs-attr">template:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/html.j2</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/usr/share/nginx/html</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy</span> <span class="hljs-string">html</span><br>    <span class="hljs-attr">template:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/html.j2</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/usr/share/nginx/html/index.html</span>    <br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">start</span> <span class="hljs-string">service</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">started</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span><br></code></pre></td></tr></table></figure><p>执行并验证</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible-playbook test_template.yaml  <span class="hljs-comment">--syntax-check</span><br>ansible-playbook test_template.yaml  <br>ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;systemctl status nginx&#x27;</span><br>ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;ss -ntpl|grep nginx&#x27;</span><br><span class="hljs-comment">#可以查看到进程，每个cpu一个</span><br>ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;ps aux|grep nginx&#x27;</span><br></code></pre></td></tr></table></figure><p>3、修改template文件，修改进程数为cpu内核的2倍</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs i">ansible websrvs -m setup|grep &quot;cpu&quot;<br><br>vim nginx.conf.j2<br>修改第6行<br>worker_processes &#123;&#123; ansible_processor_vcpus*2  &#125;&#125;    #worker_processes auto<br></code></pre></td></tr></table></figure><p>修改test_template.yaml文件，添加notify和handlers，在配置文件变化时，重启nginx</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_template.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">websrvs</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">package</span><br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy</span> <span class="hljs-string">template</span><br>    <span class="hljs-attr">template:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/nginx.conf.j2</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/nginx/nginx.conf</span><br>    <span class="hljs-attr">notify:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">restart</span> <span class="hljs-string">service</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy</span> <span class="hljs-string">html</span><br>    <span class="hljs-attr">template:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/html.j2</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/usr/share/nginx/html/index.html</span>    <br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">start</span> <span class="hljs-string">service</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">started</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span><br>  <span class="hljs-attr">handlers:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">restart</span> <span class="hljs-string">service</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">restarted</span><br></code></pre></td></tr></table></figure><p>执行并验证</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible-playbook test_template.yaml<br><span class="hljs-comment">#可以查看到进程，</span><br>ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;ps aux|grep nginx&#x27;</span> <span class="hljs-comment">#查看nginx进程数为cpu核数的2倍</span><br></code></pre></td></tr></table></figure><p>检验nginx配置文件是否存在语法错误</p><p>nginx -t </p><p>nginx和httpd服务，web服务保证只有一个运行。</p><p>4、使用主机变量，修改服务端口</p><p>修改hosts文件增加端口变量</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">#使用主机变量</span><br><span class="hljs-comment">#修改nginx对应的端口</span><br><span class="hljs-attribute">vim</span> /etc/ansible/hosts<span class="hljs-meta"></span><br><span class="hljs-meta">[websrvs]</span><br><span class="hljs-attribute">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">142</span>.<span class="hljs-number">101</span> http_port=<span class="hljs-number">8083</span><br><span class="hljs-attribute">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">142</span>.<span class="hljs-number">102</span> http_port=<span class="hljs-number">8084</span><br></code></pre></td></tr></table></figure><p>修改模板文件，增加端口引用</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">vim nginx.conf.j2</span><br><span class="language-xml">修改39、40行</span><br><span class="language-xml">server&#123;</span><br><span class="language-xml">    listen   </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">http_port</span> &#125;&#125;</span><span class="language-xml"> ;</span><br><span class="language-xml">    listen   [::]:</span><span class="hljs-template-variable">&#123;&#123;  <span class="hljs-name">http_port</span>  &#125;&#125;</span><span class="language-xml"> ;</span><br><span class="language-xml">&#125;</span><br></code></pre></td></tr></table></figure><p>执行并验证</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible-playbook test_template.yaml<br>ansible websrvs -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;ss -ntpl|grep nginx&#x27;</span><br></code></pre></td></tr></table></figure><p>5、使用playbook变量</p><p>修改test_template.yaml，增加端口信息</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_template.yaml</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">websrvs</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-string">vars：</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">http_port:</span> <span class="hljs-number">88</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">package</span><br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy</span> <span class="hljs-string">template</span><br>    <span class="hljs-attr">template:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/nginx.conf.j2</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/nginx/nginx.conf</span><br>    <span class="hljs-attr">notify:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">restart</span> <span class="hljs-string">service</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy</span> <span class="hljs-string">html</span><br>    <span class="hljs-attr">template:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/html.j2</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/usr/share/nginx/html/index.html</span>   <br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">start</span> <span class="hljs-string">service</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">started</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span><br>  <span class="hljs-attr">handlers:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">restart</span> <span class="hljs-string">service</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">restarted</span><br><br></code></pre></td></tr></table></figure><p>执行并验证</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible-playbook test_template.yaml<br>ansible websrvs -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;ss -ntpl|grep nginx&#x27;</span><br><span class="hljs-comment">#发现端口变成88</span><br></code></pre></td></tr></table></figure><p>6、使用命令行变量</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible-playbook -e <span class="hljs-string">&quot;http_port=99&quot;</span>  test_template.yaml<br>ansible websrvs -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;ss -ntpl|grep nginx&#x27;</span><br><span class="hljs-comment">#发现端口变成99</span><br></code></pre></td></tr></table></figure><p><code>可以返回目录！</code></p><p><a href="https://blog.qianyios.top/2023/09/10/ansible/Ansible-%E6%80%BB%E6%89%8B%E5%86%8C/">Ansible练习目录 - 严千屹博客 (qianyios.top)</a></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>Ansible</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python-总手册</title>
    <link href="/2023/11/11/python/Python-%E6%80%BB%E6%89%8B%E5%86%8C/"/>
    <url>/2023/11/11/python/Python-%E6%80%BB%E6%89%8B%E5%86%8C/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Python-总手册"><a href="#Python-总手册" class="headerlink" title="Python-总手册"></a>Python-总手册</h1><ol><li><a href="https://blog.qianyios.top/2023/09/11/python/Python%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/">Python环境准备</a></li><li><a href="https://blog.qianyios.top/2023/09/11/python/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/">Python程序手册</a></li></ol><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ansible-总手册</title>
    <link href="/2023/11/10/ansible/Ansible-%E6%80%BB%E6%89%8B%E5%86%8C/"/>
    <url>/2023/11/10/ansible/Ansible-%E6%80%BB%E6%89%8B%E5%86%8C/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Ansible-总手册"><a href="#Ansible-总手册" class="headerlink" title="Ansible-总手册"></a>Ansible-总手册</h1><ol><li><a href="https://blog.qianyios.top/2023/09/09/ansible/Ansible-3%E6%9C%BA%E9%83%A8%E7%BD%B2/">Ansible三机部署</a></li><li><a href="https://blog.qianyios.top/2023/09/10/ansible/Ansible-%E9%85%8D%E7%BD%AE%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%8C%87%E4%BB%A4/">Ansible配置及相关指令</a></li><li><a href="https://blog.qianyios.top/2023/09/10/ansible/%E7%94%A8%E6%88%B7%E7%BA%A7ansible%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA/">用户级ansible环境构建（小练习）</a></li><li><a href="https://blog.qianyios.top/2023/09/20/ansible/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/">Ansible-常用模块</a></li><li><a href="https://blog.qianyios.top/2023/10/02/ansible/Ansible-playblock/">Ansible-playblock</a></li><li><a href="https://blog.qianyios.top/2023/11/13/ansible/Ansible-templates/">Ansible-templates</a></li><li><a href="https://blog.qianyios.top/2023/11/13/ansible/Ansible-Roles/">Ansible-Roles</a></li></ol><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>Ansible</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ansible-Playbook</title>
    <link href="/2023/10/02/ansible/Ansible-playblock/"/>
    <url>/2023/10/02/ansible/Ansible-playblock/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Ansible-Playbook"><a href="#Ansible-Playbook" class="headerlink" title="Ansible-Playbook"></a>Ansible-Playbook</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><blockquote><p>playbook是由一个或多个”play”组成的列表<br>play的主要功能在于将预定义的一组主机，装扮成事先通过ansible中的task定义好的角色。<br>Task实际是调用ansible的一个module，将多个play组织在一个playbook中，<br>即可以让它们联合起来，按事先编排的机制执行预定义的动作<br>Playbook采用YAML语言编写</p></blockquote><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mel">用户通过ansible命令直接调用yml语言写好的playbook,playbook由多条<span class="hljs-keyword">play</span>组成<br>每条<span class="hljs-keyword">play</span>都有一个任务(task)相对应的操作,然后调用模块modules，应用在主机清单上,通过ssh远程连接<br>从而控制远程主机或者网络设备<br></code></pre></td></tr></table></figure><h2 id="YAML语法"><a href="#YAML语法" class="headerlink" title="YAML语法"></a>YAML语法</h2><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs node-repl"><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">在单一档案中，可用连续三个连字号（---）区分多个档案。</span><br>  另外，还有选择性的连续三个点号( ... )用来表示档案结尾<br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">次行开始正常写<span class="hljs-title class_">Playbook</span>的内容，一般建议写明该<span class="hljs-title class_">Playbook</span>的功能</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">使用#号注释代码</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">缩进必须是统一的，不能空格和tab混用，一般缩进<span class="hljs-number">2</span>个空格</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">缩进的级别也必须是一致的，同样的缩进代表同样的级别，程序判别配置的级别是通过缩进结合换行来实现的</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript"><span class="hljs-variable constant_">YAML</span>文件内容是区别大小写的，key/value的值均需大小写敏感</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">多个key/value可同行写也可换行写，同行使用:分隔，同一行使用 , 逗号分隔</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">value可以是个字符串，也可是另一个列表[]</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">一个完整的代码块功能需最少元素需包括 name 和 task</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">一个name只能包括一个task</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript"><span class="hljs-variable constant_">YAML</span>中不允许在双引号中出现转义符号，所以都是以单引号来避免转义符错误</span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">使用 | 和 &gt; 来分隔多行，实际上这只是一行。 </span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript"><span class="hljs-variable constant_">YAML</span>文件扩展名通常为yml或yaml</span><br></code></pre></td></tr></table></figure><p>三种常见的数据交换格式</p><p><img src="/../../img/Ansible-Playbook/6d25ede5ab790631644fba9130862376697559838.png" alt="7"></p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs dts">YAML的语法和其他高阶语言类似，并且可以简单表达清单、散列表、标量等数据结构。<br>序列（Sequence）里的项用<span class="hljs-string">&quot;-&quot;</span>来代表，Map里的键值对（字典）用<span class="hljs-string">&quot;:&quot;</span>分隔<br>示例<br><span class="hljs-symbol">    name:</span> John Smith<br><span class="hljs-symbol">    age:</span> <span class="hljs-number">41</span><br><span class="hljs-symbol">    gender:</span> Male<br><span class="hljs-symbol">    spouse:</span><br><span class="hljs-symbol">      name:</span> Jane Smith<br><span class="hljs-symbol">      age:</span> <span class="hljs-number">37</span><br><span class="hljs-symbol">      gender:</span> Female<br><span class="hljs-symbol">    children:</span><br>      - name: Jimmy Smith<br><span class="hljs-symbol">        age:</span> <span class="hljs-number">17</span><br><span class="hljs-symbol">        gender:</span> Male<br>      - name: Jenny Smith<br>        age <span class="hljs-number">13</span><br><span class="hljs-symbol">        gender:</span> Female<br></code></pre></td></tr></table></figure><h2 id="修改vim"><a href="#修改vim" class="headerlink" title="修改vim"></a>修改vim</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs routeros">vim ~/.vimrc<br><span class="hljs-built_in">set</span> nu       <br><span class="hljs-built_in">set</span> paste    <br><span class="hljs-built_in">set</span> cursorline <br><span class="hljs-built_in">set</span> cursorcolumn <br>autocmd FileType yaml setlocal ai et <span class="hljs-attribute">ts</span>=2 <span class="hljs-attribute">sw</span>=2 <br><br><br><span class="hljs-built_in">set</span> nu       #显示行号<br><span class="hljs-built_in">set</span> paste    #黏贴内容保留格式<br><span class="hljs-built_in">set</span> cursorline #行定位<br><span class="hljs-built_in">set</span> cursorcolumn #列定位<br>autocmd FileType yaml setlocal ai et <span class="hljs-attribute">ts</span>=2 <span class="hljs-attribute">sw</span>=2 <br><span class="hljs-comment">#FileType 代表文件类型,后边跟参数yaml，就是这个作用于yaml文件，编写其他文件时不起作用</span><br><span class="hljs-comment">#ts=2是tabstop=2的缩写，表示使用2个空格自动代替tab键</span><br><span class="hljs-comment">#et=expandtab 表示tab键的缩写</span><br><span class="hljs-comment">#sw=2 是shiftwidth=2的缩写，表示开启自动缩进对齐，缩进宽度为2个空格</span><br><span class="hljs-comment">#ai=auto indent   自动退格对齐\</span><br><br></code></pre></td></tr></table></figure><p>将这段代码添加到 <code>~/.vimrc</code> 文件中，以使 Vim 在启动时自动应用这些设置</p><h2 id="playbook基础组件"><a href="#playbook基础组件" class="headerlink" title="playbook基础组件"></a>playbook基础组件</h2><p>一个简单的剧本模型（YAML语言） </p><p>1&gt; 缩进：用两个空格缩进 </p><p>2&gt; 列表：用 - </p><p>3&gt; 字典：key: value </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">--- </span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">YYY</span>          <span class="hljs-comment">#待操作主机集，可以不写，执行时通过 -i 调用host文件</span><br>  <span class="hljs-string">remote_user：</span> <span class="hljs-string">root</span>  <span class="hljs-comment">#在远端使用哪个用户执行</span><br>  <span class="hljs-attr">tasks:</span>              <span class="hljs-comment">#任务集（必须）</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">task1</span>       <span class="hljs-comment">#只是一个文本提示，执行时会输出其中内容（例如输出Install httpd）</span><br>    <span class="hljs-attr">module1:</span>          <span class="hljs-comment">#真正干活的部分，其实就是前面讲过的ansible各种模块</span><br>      <span class="hljs-attr">argument1 :</span> <span class="hljs-string">value1</span> <br>      <span class="hljs-attr">argument2 :</span> <span class="hljs-string">value2</span> <br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">task2</span> <br>    <span class="hljs-attr">module2:</span><br>      <span class="hljs-attr">argument1 :</span> <span class="hljs-string">value1</span> <br>      <span class="hljs-attr">argument2 :</span> <span class="hljs-string">value2</span> <br><span class="hljs-string">...</span> <br></code></pre></td></tr></table></figure><p>解释：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">Hosts：<br><span class="hljs-code">    &gt; playbook中的每一个play的目的都是为了让特定主机以某个指定的用户身份执行任务。</span><br><span class="hljs-code">      hosts用于指定要执行指定任务的主机，须事先定义在主机清单中</span><br><span class="hljs-code"></span><br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">remote_user:</span> <br>    <span class="hljs-string">可用于Host和task中。</span><br>    <span class="hljs-string">也可以通过指定其通过sudo的方式在远程主机上执行任务，其可用于play全局或某任务；</span><br>    <span class="hljs-string">此外，甚至可以在sudo时使用sudo_user指定sudo时切换的用户</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>      <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span>   <span class="hljs-string">(可省略,默认为root)</span>  <span class="hljs-string">以root身份连接</span><br>      <span class="hljs-attr">tasks:</span>    <span class="hljs-string">指定任务</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">test</span> <span class="hljs-string">connection</span><br>        <span class="hljs-attr">ping:</span><br>          <span class="hljs-attr">remote_user:</span> <span class="hljs-string">magedu</span><br>          <span class="hljs-attr">sudo:</span> <span class="hljs-literal">yes</span>           <span class="hljs-string">默认sudo为root</span><br>          <span class="hljs-string">sudo_user:wang</span>      <span class="hljs-string">sudo为wang</span><br></code></pre></td></tr></table></figure><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">task</span>列表和action<br>    任务列表<span class="hljs-keyword">task</span>:由多个动作,多个任务组合起来的,每个任务都调用的模块,一个模块一个模块执行<br>    <span class="hljs-number">1</span>&gt; play的主体部分是<span class="hljs-keyword">task</span> list，<span class="hljs-keyword">task</span> list中的各任务按次序逐个在hosts中指定的所有主机上执行，<br>       即在所有主机上完成第一个任务后，再开始第二个任务<br><br>    <span class="hljs-number">2</span>&gt; <span class="hljs-keyword">task</span>的目的是使用指定的参数执行模块，而在模块参数中可以使用变量。<br>   模块执行是幂等的，这意味着多次执行是安全的，因为其结果均一致<br><br>    <span class="hljs-number">3</span>&gt; 每个<span class="hljs-keyword">task</span>都应该有其name，用于playbook的执行结果输出，建议其内容能清晰地描述任务执行步骤。<br>   如果未提供name，则action的结果将用于输出<br></code></pre></td></tr></table></figure><h2 id="playbook书写风格"><a href="#playbook书写风格" class="headerlink" title="playbook书写风格"></a>playbook书写风格</h2><p>简单案例：</p><p>编写echo.yaml文件，内容如下</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">echo.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.102</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">输出1</span><br>    <span class="hljs-attr">shell:</span> <span class="hljs-string">echo</span> <span class="hljs-string">&quot;1&quot;</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">输出2</span><br>    <span class="hljs-attr">shell:</span> <span class="hljs-string">echo</span> <span class="hljs-string">&quot;2&quot;</span><br><span class="hljs-string">...</span><br><span class="hljs-comment">#执行该剧本文件：</span><br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">echo.yaml</span>  <br></code></pre></td></tr></table></figure><p>命令执行返回的结果:</p><p>第一行PLAY表示执行的主机或者主机组。<br>第二行TASK[Gathering Facts]，在 Playbook 中并没有定义，这是Ansible自带的task 收集主机的信息，此功能非常实用，后面的任务中会详细讲解。这里仅需知晓task为Ansible自带的功能，可以通过Playbook中添加 gather_facts: no 进行关闭。<br>下面两个task是自行编辑的task，可以发现没有返回结果，但是当出现黄色的changed时代表执行或者修改成功。changed代表前后状态发生改变,例如使用copy模块，拷贝同一个东西，第一次执行成功的时候是changed状态，第二次再执行的时候就是ok状态。ok状态代表:Ansible检查了需要更改的内容发现前后没有变化，所以直接返回ok状态，实际上 Ansible并没有去执行该操作。最后代表状态,即 Playbook的执行结果。ok表示检查了但不需要操作的任务量。failed表示执行失败的数量，changRed代表状unreachable表示不可达的主机数态更改的数量，ok+changed 才代表执行完成的任务数量。</p><h2 id="编写playbook"><a href="#编写playbook" class="headerlink" title="编写playbook"></a>编写playbook</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">httpd.yaml</span><br><span class="hljs-string">---</span> <span class="hljs-comment">##列出第一个play </span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">httpd</span> <span class="hljs-string">package</span> <span class="hljs-string">and</span> <span class="hljs-string">start</span> <span class="hljs-string">httpd</span> <span class="hljs-string">service</span> <span class="hljs-comment">##标明 该play的用途 </span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.142</span><span class="hljs-number">.101</span> <span class="hljs-comment">##指定对其运行play中任务的主机（必填项，指定多台主机可以使用分组，或者 , 分隔） </span><br>  <span class="hljs-attr">tasks:</span> <span class="hljs-comment">##play的任务列表 </span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">httpd</span> <span class="hljs-string">package</span> <span class="hljs-comment">##任务1的描述 </span><br>    <span class="hljs-attr">yum:</span> <span class="hljs-comment">##任务1调用yum模块，模块内容往下写 </span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span> <span class="hljs-comment">##参数1：yum模块需要使用的软件包 </span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span> <span class="hljs-comment">##参数2：安装软件包#以上任务等同于 ansible 192.168.142.101 -m yum -a &quot;name=httpd state=present&quot; </span><br><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Start</span> <span class="hljs-string">httpd</span> <span class="hljs-string">service</span> <span class="hljs-comment">##任务2的描述 </span><br>    <span class="hljs-attr">service:</span> <span class="hljs-comment">##任务2调用服务模块 </span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span> <span class="hljs-comment">##参数1：service调用的服务名称 </span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">started</span> <span class="hljs-comment">##参数2：service调用服务要达到的目标状态 </span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span> <span class="hljs-comment">##参数3：调用的服务开机启动 </span><br><span class="hljs-comment">#以上任务等同于 ansible 192.168.142.101 -m service -a &quot;name=httpd state=started enabled=yes&quot; </span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-Playbook/e4a47c22c19d749ae824b8f8d2655448697559838.png" alt="image-20221114191416282"></p><h2 id="运行playbook"><a href="#运行playbook" class="headerlink" title="运行playbook"></a>运行playbook</h2><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs scss">运行playbook的方式<br>    ansible-playbook &lt;filename<span class="hljs-selector-class">.yaml</span>&gt; ... <span class="hljs-selector-attr">[options]</span><br><br>常见选项<br>    <span class="hljs-attr">--check</span> -C       只检测可能会发生的改变，但不真正执行操作 <br>                     (只检查语法,如果执行过程中出现问题,-C无法检测出来)<br>                     (执行playbook生成的文件不存在,后面的程序如果依赖这些文件,也会导致检测失败)<br>    <span class="hljs-attr">--list-hosts</span>     列出运行任务的主机<br>    <span class="hljs-attr">--list-tags</span>      列出tag  (列出标签)<br>    <span class="hljs-attr">--list-tasks</span>     列出task (列出任务)<br>    <span class="hljs-attr">--limit</span> 主机列表 只针对主机列表中的主机执行<br>    -v -vv -vvv      显示过程<br><br>示例<br>    ansible-playbook hello<span class="hljs-selector-class">.yaml</span> <span class="hljs-attr">--check</span> 只检测<br>    ansible-playbook hello<span class="hljs-selector-class">.yaml</span> <span class="hljs-attr">--list-hosts</span>  显示运行任务的主机<br>    ansible-playbook hello<span class="hljs-selector-class">.yaml</span> <span class="hljs-attr">--limit</span> <span class="hljs-number">192.168</span><span class="hljs-selector-class">.142</span><span class="hljs-selector-class">.101</span>  限制主机<br>    ansible-playbook hello<span class="hljs-selector-class">.yaml</span> <span class="hljs-attr">--list-tasks</span>  显示运行任务的主机<br><br></code></pre></td></tr></table></figure><p><strong>1、在ansible工作目录运行</strong> 完整剧本：httpd.yaml</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">执行剧本<br>ansible-playbook playbooks/httpd.yaml<br>验证服务<br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.142</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;rpm -qa |grep httpd&#x27;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.142</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;netstat -ntulp |grep 80&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-Playbook/9d8e4de4a53235c06cc98d7027aac9cd697559838.png" alt="image-20221025160724333"></p><p><strong>2.提高输出的详细程度</strong></p><p><img src="/../../img/Ansible-Playbook/6e71091401ef6effdf554c168e470138697559838.png" alt="image-20221025160900182"></p><p>注：通常使用 ansible-playbook -v 即可。</p><p><img src="/../../img/Ansible-Playbook/fd747cfdd210d44aa72b40f993300d36697559838.png" alt="image-20221025160914676"></p><p><strong>3.执行空运行（冒烟运行）</strong></p><p><img src="/../../img/Ansible-Playbook/5718cb2943f06fd233226a0ba1e57270697559838.png" alt="image-20221025160948414"></p><p><img src="/../../img/Ansible-Playbook/7a8f0489f30f62619e7d5abbcc904cb3697559838.png" alt="image-20221025160959873"></p><h2 id="handlers-notify"><a href="#handlers-notify" class="headerlink" title="handlers+notify"></a>handlers+notify</h2><p>Handlers 实际上就是一个<font color='red'>触发</font>器，是task列表，这些task与前述的task并没有本质上的不同,用于当关注的资源发生变化时，才会采取一定的操作。任务都有状态changed或者ok，只有在任务执行状态为change时，才执行该任务调用的handler。</p><p>Notify此action可用于在每个play的最后被触发，这样可避免多次有改变发生时每次都执行指定的操作，仅在所有的变化发生完成后一次性地执行指定操作。在notify中列出的操作称为handler，也<font color='red'>即notify中调用handler中定义的操作</font></p><p><font color='red'>示例1：</font></p><ol><li>使用playbook安装httpd，并验证服务启动，查看httpd使用的端口</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim httpd3.yaml<br>---<br>- hosts: all<br>  remote_user: root<br><br>  tasks:<br>  - name: Install httpd<br>    yum:<br>      name: httpd<br>      state: present<br>  - name: ensure apache is running<br>    service:<br>      name: httpd<br>      state: started<br>      enabled: yes<br><br>ansible-playbook httpd3.yaml<br>ansible all -m shell -a &#x27;systemctl status httpd&#x27;<br>ansible all -m shell -a &#x27;netstat -tunlp|grep httpd&#x27;<br></code></pre></td></tr></table></figure><ol start="2"><li>在被控端（<font color='red'>两台机</font>）修改httpd的conf文件，监听端口改成8080</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">mkdir</span> <span class="hljs-string">-p</span> <span class="hljs-string">/root/ansible/files</span><br><span class="hljs-string">cp</span> <span class="hljs-string">/etc/httpd/conf/httpd.conf</span>  <span class="hljs-string">/root/ansible/files</span><br><span class="hljs-comment">#如果前面httpd3运行成功，说明成功安装httpd，则httpd.conf会存在</span><br><span class="hljs-string">vim</span> <span class="hljs-string">/root/ansible/files/httpd.conf</span><br><span class="hljs-comment">#将Listen 80 修改为Listen 8080</span><br></code></pre></td></tr></table></figure><ol start="3"><li>修改剧本文件，增加拷贝配置文件的task，并重新执行剧本。</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">httpd4.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">tasks:</span>   <br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">httpd</span><br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">backup</span> <span class="hljs-string">httpd.conf</span><br>    <span class="hljs-attr">shell:</span> <span class="hljs-string">cp</span> <span class="hljs-string">/etc/httpd/conf/httpd.conf&#123;,.bak&#125;</span><br>  <span class="hljs-comment">#备份原文件</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy</span> <span class="hljs-string">configure</span> <span class="hljs-string">file</span><br>    <span class="hljs-attr">copy:</span> <br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/ansible/files/httpd.conf</span> <br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/httpd/conf/</span><br>      <span class="hljs-attr">backup:</span> <span class="hljs-literal">yes</span><br>  <span class="hljs-comment">#第二步修改了8080端口，将文件移回原处覆盖源文件</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">ensure</span> <span class="hljs-string">apache</span> <span class="hljs-string">is</span> <span class="hljs-string">running</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">started</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span><br><br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">httpd4.yaml</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;cat /etc/httpd/conf/httpd.conf|grep 8080&#x27;</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;systemctl status httpd&#x27;</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;netstat -tunlp|grep httpd&#x27;</span><br><span class="hljs-comment">#发现修改配置，但没有生效，因为没有重启httpd应用</span><br></code></pre></td></tr></table></figure><ol start="3"><li>增加handlers和notify</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">httpd4.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">tasks:</span>   <br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">httpd</span><br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">copy</span> <span class="hljs-string">configure</span> <span class="hljs-string">file</span><br>    <span class="hljs-attr">copy:</span> <br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/root/ansible/files/httpd.conf</span> <br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/httpd/conf/</span><br>      <span class="hljs-attr">backup:</span> <span class="hljs-literal">yes</span><br>    <span class="hljs-comment">#调用触发列表里的 restart httpd任务，调用之后重启httpd，配置文件即刻生效</span><br>    <span class="hljs-attr">notify:</span> <span class="hljs-string">restart</span> <span class="hljs-string">httpd</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">ensure</span> <span class="hljs-string">apache</span> <span class="hljs-string">is</span> <span class="hljs-string">running</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">started</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span><br><span class="hljs-comment">#触发器列表</span><br>  <span class="hljs-attr">handlers:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">restart</span> <span class="hljs-string">httpd</span><br>    <span class="hljs-attr">service:</span> <br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span> <br>      <span class="hljs-attr">state:</span> <span class="hljs-string">restarted</span><br>        <br>        <br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">httpd4.yaml</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;netstat -tunlp|grep httpd&#x27;</span><br><span class="hljs-string">发现端口是8080（即成功）</span><br></code></pre></td></tr></table></figure><p>修改&#x2F;root&#x2F;ansible&#x2F;files&#x2F;httpd.conf ，将端口修改为8081，重新执行httpd4.yaml，并验证服务端口已经改变。</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible-playbook httpd4.yaml<br>ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;netstat -tunlp|grep httpd&#x27;</span><br></code></pre></td></tr></table></figure><p>发现端口变成8081，说明只有在任务执行状态为change时，才执行该任务调用的handler。</p><h2 id="TAGS"><a href="#TAGS" class="headerlink" title="TAGS"></a>TAGS</h2><p><font color='red'>tage: 添加标签 </font><br><font color='orange'>可以指定某一个任务添加一个标签,添加标签以后,想执行某个动作可以做出挑选来执行,多个动作可以使用同一个标签</font></p><p>停止httpd服务</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pf">ansible <span class="hljs-literal">all</span> -m service -a &#x27;name=httpd  <span class="hljs-keyword">state</span>=stopped&#x27;<br>ansible <span class="hljs-literal">all</span> -m shell -a &#x27;ss -tln |grep :<span class="hljs-number">8081</span>&#x27;<br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">root@controller</span> <span class="hljs-string">~</span>]<span class="hljs-comment"># vi httpd5.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">httpd</span><br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>    <span class="hljs-attr">tags:</span> <span class="hljs-string">install</span> <span class="hljs-comment">#install标签</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">set</span> <span class="hljs-string">listen8080</span><br>    <span class="hljs-attr">shell:</span> <span class="hljs-string">sed</span> <span class="hljs-string">-i</span> <span class="hljs-string">&quot;s/Listen 80/Listen 8080/g&quot;</span> <span class="hljs-string">/etc/httpd/conf/httpd.conf</span><br>    <span class="hljs-attr">tags:</span> <span class="hljs-string">set8080</span> <span class="hljs-comment">#设置8080标签</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">backup</span> <span class="hljs-string">cofing</span><br>    <span class="hljs-attr">copy:</span><br>      <span class="hljs-attr">src:</span> <span class="hljs-string">/etc/httpd/conf/httpd.conf</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/etc/httpd/conf/httpd.conf</span><br>      <span class="hljs-attr">backup:</span> <span class="hljs-literal">yes</span><br>    <span class="hljs-attr">notify:</span> <span class="hljs-string">restart</span> <span class="hljs-string">httpd</span><br>    <span class="hljs-attr">tags:</span> <span class="hljs-string">backup</span> <span class="hljs-comment">#备份标签</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">配置</span> <span class="hljs-string">httpd</span> <span class="hljs-string">服务</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">started</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span><br>    <span class="hljs-attr">tags:</span> <span class="hljs-string">started</span> <span class="hljs-comment">#开启httpd服务标签</span><br>  <span class="hljs-attr">handlers:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">restart</span> <span class="hljs-string">httpd</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">restarted</span><br>    <span class="hljs-attr">tags:</span> <span class="hljs-string">restart</span>  <span class="hljs-comment">#重启服务标签</span><br><span class="hljs-string">...</span><br><br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">-tstarted</span> <span class="hljs-string">httpd5.yaml</span>   <br><span class="hljs-comment">#指定执行started 这个标签</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;ss -tln |grep :8080&#x27;</span><br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">-t</span> <span class="hljs-string">install,conf</span> <span class="hljs-string">httpd.yaml</span>   <br><span class="hljs-comment">#指定执行install,backup 两个标签</span><br></code></pre></td></tr></table></figure><h2 id="管理变量"><a href="#管理变量" class="headerlink" title="管理变量"></a>管理变量</h2><p><img src="/../../img/Ansible-Playbook/a1b3b9d59704be3a027fdff3f63eb71a697559838.png" alt="image-20221025165509586"></p><p>变量定义：key&#x3D;value<br>    示例：http_port&#x3D;80</p><p>变量调用方式：<br>    1&gt; 通过 调用变量，<font color='red'>且变量名前后必须有空格</font>，有时用”“才生效 (<font color='red'>引号</font>）</p><h3 id="在playbook中定义"><a href="#在playbook中定义" class="headerlink" title="在playbook中定义"></a>在playbook中定义</h3><p>vars语句定义全局变量（该变量作用于整个Play） </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_vars.yaml</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">test_var</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">vars:</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">test_user1</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span>  <span class="hljs-string">create</span> <span class="hljs-string">user</span> <span class="hljs-string">via</span> <span class="hljs-string">a</span> <span class="hljs-string">variable</span> <span class="hljs-string">file</span><br>    <span class="hljs-attr">user:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; username &#125;&#125;</span>&quot;</span>    <br>      <span class="hljs-comment">#冒号后面不能以&#123;开头，不然会报语法错误，需要加上引号。</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br><span class="hljs-comment">#创建一个test_user1的用户</span><br> <br> <span class="hljs-string">ansible-playbook</span> <span class="hljs-string">-v</span> <span class="hljs-string">test_vars.yaml</span> <br> <br> <span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;getent passwd test_user1&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-Playbook/6715748112921f36189e65587864122e697559838.png" alt="image-20221025165757353"></p><p>执行结果： </p><p><img src="/../../img/Ansible-Playbook/94157e2c204012de5cd0e7e96ab2f67e697559838.png" alt="image-20221025165815465"></p><h4 id="课堂练习"><a href="#课堂练习" class="headerlink" title="课堂练习"></a>课堂练习</h4><p>通过playbook中定义用户名和组名，实现变量引用，创建用户和组。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">var.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">vars:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">username:</span> <span class="hljs-string">user1</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">groupname:</span> <span class="hljs-string">group1</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">group</span><br>    <span class="hljs-attr">group:</span> <br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; groupname &#125;&#125;</span>&quot;</span> <br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">user</span><br>    <span class="hljs-attr">user:</span> <br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; username &#125;&#125;</span>&quot;</span> <br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br><br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">-v</span> <span class="hljs-string">var.yaml</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;getent passwd user1&#x27;</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;getent group group1&#x27;</span><br></code></pre></td></tr></table></figure><ol start="2"><li></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">开启防火墙</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;systemctl start firewalld&#x27;</span><br><br><span class="hljs-string">vim</span> <span class="hljs-string">firewall.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">vars:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">http_port:</span> <span class="hljs-number">80</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">insert</span> <span class="hljs-string">firewalld</span> <span class="hljs-string">rule</span> <span class="hljs-string">for</span> <span class="hljs-string">httpd</span><br>    <span class="hljs-attr">firewalld:</span> <br>      <span class="hljs-attr">port:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; http_port &#125;&#125;</span>/tcp&quot;</span> <br>      <span class="hljs-attr">permanent:</span> <span class="hljs-literal">true</span> <br>      <span class="hljs-attr">state:</span> <span class="hljs-string">enabled</span> <br>      <span class="hljs-attr">immediate:</span> <span class="hljs-literal">yes</span><br>    <br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">-v</span> <span class="hljs-string">firewall.yaml</span><br><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;systemctl stop firewalld&#x27;</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;firewall-cmd --query-port=80/tcp&#x27;</span>  <br></code></pre></td></tr></table></figure><h3 id="在独立的变量YAML文件中定义"><a href="#在独立的变量YAML文件中定义" class="headerlink" title="在独立的变量YAML文件中定义"></a>在独立的变量YAML文件中定义</h3><p>当变量较多的时候，或者变量需要多个playbook重用的时候，可以把变量放到独立的文件中，通过关键字”var_files”把文件中定义的变量引用到playbook中。</p><p>vars_files 引用变量文件（只能所用于Play全局，不能在某个task中单独被引用）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">var_file.yaml</span><br><span class="hljs-attr">username:</span> <span class="hljs-string">test_user3</span><br><br><span class="hljs-string">vim</span> <span class="hljs-string">test_var_file.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">test_var_file</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">vars_files:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">/root/var_file.yaml</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span>  <span class="hljs-string">create</span> <span class="hljs-string">user</span> <span class="hljs-string">via</span> <span class="hljs-string">a</span> <span class="hljs-string">variable</span> <span class="hljs-string">file</span><br>    <span class="hljs-attr">user:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; username &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br><span class="hljs-string">...</span><br> <br> <span class="hljs-string">ansible-playbook</span> <span class="hljs-string">-v</span> <span class="hljs-string">test_var_file.yaml</span><br> <br> <span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;getent passwd test_user3&#x27;</span><br><br></code></pre></td></tr></table></figure><p>练习：将防火墙端口写入</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">将变量写进单独的配置文件中引用</span><br><span class="hljs-string">test_var_file.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">vars_files:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">/root/var_file.yaml</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">insert</span> <span class="hljs-string">firewalld</span> <span class="hljs-string">rule</span> <span class="hljs-string">for</span> <span class="hljs-string">httpd</span><br>    <span class="hljs-attr">firewalld:</span> <br>      <span class="hljs-attr">port:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; http_port &#125;&#125;</span>/tcp&quot;</span> <br>      <span class="hljs-attr">permanent:</span> <span class="hljs-literal">true</span> <br>      <span class="hljs-attr">state:</span> <span class="hljs-string">enabled</span> <br>      <span class="hljs-attr">immediate:</span> <span class="hljs-literal">yes</span><br><span class="hljs-string">...</span><br><span class="hljs-string">vim</span> <span class="hljs-string">var_file.yaml</span><br><span class="hljs-attr">http_port:</span> <span class="hljs-number">78</span><br><br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">-v</span> <span class="hljs-string">test_var_file.yaml</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;firewall-cmd --query-port=78/tcp&#x27;</span>  <br></code></pre></td></tr></table></figure><h3 id="远程主机上的系统变量（Facts事实）"><a href="#远程主机上的系统变量（Facts事实）" class="headerlink" title="远程主机上的系统变量（Facts事实）"></a>远程主机上的系统变量（Facts事实）</h3><p>ansible会通过setup模块来搜集主机的系统信息，这些搜集到的系统信息叫做Facts。</p><p><img src="/../../img/Ansible-Playbook/ba6ee4c01d80245e9e3470d29c6c1dc9697559838.png" alt="image-20221026102238684"></p><p>每个playbook在执行前都会默认执行setup模块，所以这些facts信息是可以以变量的形式被使用。</p><h4 id="查看Facts变量"><a href="#查看Facts变量" class="headerlink" title="查看Facts变量"></a>查看Facts变量</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">setup</span> <span class="hljs-string">能查看到node节点的所有信息</span><br><span class="hljs-string">ansible</span> <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> <span class="hljs-string">-m</span> <span class="hljs-string">setup</span> <span class="hljs-string">|grep</span> <span class="hljs-string">ansible_hostname</span><br><span class="hljs-string">或者可以使用filter过滤信息</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">setup</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;filter=&quot;ansible_hostname&quot;&#x27;</span>  <span class="hljs-string">查询主机名</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">setup</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;filter=&quot;ansible_default_ipv4&quot;&#x27;</span>  <span class="hljs-string">查询ipv4地址</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">setup</span> <span class="hljs-string">-a</span> <span class="hljs-string">&quot;filter=ansible_memory_mb&quot;</span><span class="hljs-string">查询内存</span><br><br><br><span class="hljs-string">其他常用信息列出如下：</span><br><span class="hljs-string">ansible_all_ipv4_addresses：仅显示ipv4的信息。</span><br><span class="hljs-string">ansible_devices：仅显示磁盘设备信息。</span><br><span class="hljs-string">ansible_distribution：显示是什么系统，例：centos,suse等。</span><br><span class="hljs-string">ansible_distribution_major_version：显示是系统主版本。</span><br><span class="hljs-string">ansible_distribution_version：仅显示系统版本。</span><br><span class="hljs-string">ansible_machine：显示系统类型，例：32位，还是64位。</span><br><span class="hljs-string">ansible_eth0：仅显示eth0的信息。</span><br><span class="hljs-string">ansible_hostname：仅显示主机名。</span><br><span class="hljs-string">ansible_kernel：仅显示内核版本。</span><br><span class="hljs-string">ansible_lvm：显示lvm相关信息。</span><br><span class="hljs-string">ansible_memtotal_mb：显示系统总内存。</span><br><span class="hljs-string">ansible_memfree_mb：显示可用系统内存。</span><br><span class="hljs-string">ansible_memory_mb：详细显示内存情况。</span><br><span class="hljs-string">ansible_swaptotal_mb：显示总的swap内存。</span><br><span class="hljs-string">ansible_swapfree_mb：显示swap内存的可用内存。</span><br><span class="hljs-string">ansible_mounts：显示系统磁盘挂载情况。</span><br><span class="hljs-string">ansible_processor：显示cpu个数(具体显示每个cpu的型号)。</span><br><span class="hljs-string">ansible_processor_vcpus：显示cpu个数(只显示总的个数)。</span><br></code></pre></td></tr></table></figure><h4 id="使用Facts变量"><a href="#使用Facts变量" class="headerlink" title="使用Facts变量"></a>使用Facts变量</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">var2.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">log</span> <span class="hljs-string">file</span><br>    <span class="hljs-attr">file:</span> <br>      <span class="hljs-attr">name:</span> <span class="hljs-string">/root/&#123;&#123;</span> <span class="hljs-string">ansible_hostname</span> <span class="hljs-string">&#125;&#125;</span> <br>      <span class="hljs-attr">state:</span> <span class="hljs-string">touch</span><br><br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">var2.yaml</span><br><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;ls /root|grep node*&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="复杂Facts变量的使用"><a href="#复杂Facts变量的使用" class="headerlink" title="复杂Facts变量的使用"></a>复杂Facts变量的使用</h4><p><img src="/../../img/Ansible-Playbook/ad49d416af3e83a87b737e0fb248a356697559838.png" alt="image-20231002194745624"></p><p>方式1：使用中括号</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">ansible_date_time</span>[&quot;date&quot;] &#125;&#125;</span><br></code></pre></td></tr></table></figure><p>方式2：使用点号（<font color='red'>推荐</font>）</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">ansible_date_time.date</span> &#125;&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">var2.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-number">22</span><br>    <span class="hljs-attr">copy:</span><br>      <span class="hljs-attr">content:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; ansible_date_time.date &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">dest:</span> <span class="hljs-string">/tmp/f1</span><br><br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">var2.yaml</span><br><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;cat /tmp/f1&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="关闭Facts"><a href="#关闭Facts" class="headerlink" title="关闭Facts"></a>关闭Facts</h4><p>搜集facts会消耗额外时间，可以在剧本中设置是否开启和关闭facts搜集。</p><p>开启gather_facts:yes，关闭gather_facts:no</p><p><img src="/../../img/Ansible-Playbook/6e994eb5b3ad5f58e5d2479d26ad8545697559838.png" alt="image-20221026112345723"></p><h3 id="在-x2F-etc-x2F-ansible-x2F-hosts-主机清单-中定义变量"><a href="#在-x2F-etc-x2F-ansible-x2F-hosts-主机清单-中定义变量" class="headerlink" title="在&#x2F;etc&#x2F;ansible&#x2F;hosts(主机清单)中定义变量"></a>在&#x2F;etc&#x2F;ansible&#x2F;hosts(主机清单)中定义变量</h3><p><font color='red'>普通变量</font>：主机组中主机单独定义，优先级高于公共变量(单个主机 )<br><font color='red'>公共(组)变量</font>：针对主机组中所有主机定义统一变量(一组主机的同一类别)</p><p>可以是主机级别或者是主机组级别的 </p><p><strong>定义主机级别变量</strong></p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">vim  /etc/ansible/hosts<br><span class="hljs-string">[all]</span><br><span class="hljs-number">192.168.48.101</span> username=test_user3   #主机级别变量<br><span class="hljs-number">192.168.48.102</span> username=test_user4  <br><br></code></pre></td></tr></table></figure><p>编辑剧本文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_vars2.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">test</span> <span class="hljs-string">inventory</span> <span class="hljs-string">vars</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span>  <span class="hljs-string">create</span> <span class="hljs-string">user</span> <span class="hljs-string">via</span> <span class="hljs-string">a</span> <span class="hljs-string">variable</span> <span class="hljs-string">file</span><br>    <span class="hljs-attr">user:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; username &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br><br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">-v</span> <span class="hljs-string">test_vars2.yaml</span> <br> <br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;getent passwd test_user3&#x27;</span><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span> <span class="hljs-string">&#x27;getent passwd test_user4&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>主机组级别定义变量（相对于主机级别定义的变量，优先级较低）</strong></p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">vim  /etc/ansible/hosts<br><span class="hljs-string">[all]</span><br><span class="hljs-number">192.168.142.101</span> username=test_user3   #主机级别变量<br><span class="hljs-number">192.168.142.102</span>   <br><br><span class="hljs-string">[all:vars]</span><br>username=test_user5<br><br>ansible-playbook -v test_vars2.yaml <br>发现第一台主机不变，第二台主机创建新的用户test_user5,证明主机组变量比主机变量优先级低<br></code></pre></td></tr></table></figure><h3 id="通过命令行指定变量"><a href="#通过命令行指定变量" class="headerlink" title="通过命令行指定变量"></a>通过命令行指定变量</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ansible-playbook -e 变量 剧本（优先级最高）<br><br>ansible-playbook -v -e <span class="hljs-attribute">username</span>=test_user10 test_vars2.yaml <br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-Playbook/80ae4be537e0468e58fbc06bc00cae37697559838.png" alt="image-20231002210715495"></p><p>安装httpd服务</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">示例：test_vars3.yaml</span> <br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">package</span><br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; pkname &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">start</span> <span class="hljs-string">service</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; pkname &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">started</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span><br><br><br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">–e</span> <span class="hljs-string">pkname=httpd</span> <span class="hljs-string">test_vars3.yaml</span> <br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">示例：test_vars3.yaml</span> <br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">package</span><br>    <span class="hljs-attr">yum:</span> <br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; pkname1 &#125;&#125;</span>&quot;</span> <br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">package</span><br>    <span class="hljs-attr">yum:</span> <br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; pkname2 &#125;&#125;</span>&quot;</span> <br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>  <br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">-e</span> <span class="hljs-string">&#x27;pkname1=httpd pkname2=tree&#x27;</span> <span class="hljs-string">-v</span> <span class="hljs-string">test_vars3.yaml</span> <br></code></pre></td></tr></table></figure><h3 id="复杂变量的使用"><a href="#复杂变量的使用" class="headerlink" title="复杂变量的使用"></a>复杂变量的使用</h3><h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a><strong>数组</strong></h4><p>如果我们定义变量，而这些值都属于同一类型的元素，那么我们必定要用数组。</p><p>例如：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_com_var.yaml</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">vars:</span><br>    <span class="hljs-attr">user_name:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_user11</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_user12</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_user13</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">test_user14</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">users</span><br>    <span class="hljs-attr">user:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_name[1] &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-Playbook/18b07d1c98743e1ed6e903746b899b74697559838.png" alt="image-20221115081508398"></p><p>验证：ansible-playbook -v test_com_var.yaml</p><p><img src="/../../img/Ansible-Playbook/7a20d3c31513fa922d5af6fa2c25f341697559838.png" alt="image-20221026101059249"></p><p>注意：在用user模块建用户的时候，只能调用数组中的某一个值，不能全部调用，否则报错“用户名不合法”</p><p><img src="/../../img/Ansible-Playbook/2c942be4b377ac0dd999fe69e86177d0697559838.png" alt="image-20221026101118216"></p><p><img src="/../../img/Ansible-Playbook/77279caae2feba7c7d1cc4da416e0c22697559838.png" alt="image-20221115081951322"></p><h4 id="字典（dictionary）"><a href="#字典（dictionary）" class="headerlink" title="字典（dictionary）"></a>字典（dictionary）</h4><p>如果我们的变量信息中具备多种不同的元素时，采用字典。</p><p>例如：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_com_var.yaml</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">test_dict</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">vars:</span><br>    <span class="hljs-attr">user_info:</span><br>      <span class="hljs-attr">test_user20:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">test_user20</span><br>        <span class="hljs-attr">shell:</span> <span class="hljs-string">/bin/bash</span><br>        <span class="hljs-attr">comment:</span> <span class="hljs-string">test_user20</span><br>      <span class="hljs-attr">test_user21:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">test_user21</span><br>        <span class="hljs-attr">shell:</span> <span class="hljs-string">/bin/bash</span><br>        <span class="hljs-attr">comment:</span> <span class="hljs-string">test_user21</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">users</span> <span class="hljs-string">via</span> <span class="hljs-string">dict</span><br>    <span class="hljs-attr">user:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_info[&#x27;test_user20&#x27;][&#x27;name&#x27;] &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">shell:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_info[&#x27;test_user20&#x27;][&#x27;shell&#x27;] &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-Playbook/7f23d3deb164c42b92072a7efeb030b3697559838.png" alt="image-20221026101138894"></p><p><img src="/../../img/Ansible-Playbook/fd43931772722231061957f91f167a1d697559838.png" alt="image-20221115083012804"></p><p>变量引用的另一种写法：引用对象写法（python语法）</p><p><img src="/../../img/Ansible-Playbook/7900f3905c9a285bf87d2c04cc34d640697559838.png" alt="image-20221026101222577"></p><p>注意：以点作为分隔（引用对象）这种方式，可能会和python本身的语义引起冲突，所以不建议使用这种方式</p><h3 id="注册变量"><a href="#注册变量" class="headerlink" title="注册变量"></a>注册变量</h3><p>注册变量是指将一个任务（task）的输出结果定义到一个变量中，这个变量就可以在随后的任务中像普通变量一样使用。<br>很多情况下，注册变量用来收集shell的执行结果，结果中包含标准输入和标准输出。接下来使用shell模块执行命令将命令结果传入名为var_echo 的变量并使用debug进行检测。<br>register 的使用形如 register: varname，即 register模块后直接加变量名即可，而register这一行仅仅需要写在需要收集输出的那一行下即可。</p><p>案例：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_com_var.yaml</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">test_dict</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">vars:</span><br>    <span class="hljs-attr">user_info:</span><br>      <span class="hljs-attr">test_user20:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">test_user20</span><br>        <span class="hljs-attr">shell:</span> <span class="hljs-string">/bin/bash</span><br>        <span class="hljs-attr">comment:</span> <span class="hljs-string">test_user20</span><br>      <span class="hljs-attr">test_user21:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">test_user21</span><br>        <span class="hljs-attr">shell:</span> <span class="hljs-string">/bin/bash</span><br>        <span class="hljs-attr">comment:</span> <span class="hljs-string">test_user21</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">users</span> <span class="hljs-string">via</span> <span class="hljs-string">dict</span><br>    <span class="hljs-attr">user:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_info.test_user21.name &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">shell:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_info.test_user21.shell &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br><br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">test_com_var.yaml</span><br><br></code></pre></td></tr></table></figure><p>执行结果如下：</p><p><img src="/../../img/Ansible-Playbook/e43c68294231cc8c6eeef5338f811993697559838.png" alt="image-20221115083847092"></p><p>修改剧本文件，加入debug模块</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_com_var.yaml</span><br><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">test_dict</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">vars:</span><br>    <span class="hljs-attr">user_info:</span><br>      <span class="hljs-attr">test_user20:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">test_user20</span><br>        <span class="hljs-attr">shell:</span> <span class="hljs-string">/sbin/nologin</span><br>        <span class="hljs-attr">comment:</span> <span class="hljs-string">test_user20</span><br>      <span class="hljs-attr">test_user21:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">test_user21</span><br>        <span class="hljs-attr">shell:</span> <span class="hljs-string">/sbin/nologin</span><br>        <span class="hljs-attr">comment:</span> <span class="hljs-string">test_user21</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">users</span> <span class="hljs-string">via</span> <span class="hljs-string">dict</span><br>    <span class="hljs-attr">user:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_info.test_user21.name &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">shell:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_info.test_user21.shell &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>    <span class="hljs-attr">register:</span> <span class="hljs-string">user_result</span><br><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">debug</span> <span class="hljs-string">result</span> <span class="hljs-string">of</span> <span class="hljs-string">user</span> <span class="hljs-string">creation</span><br>    <span class="hljs-attr">debug:</span><br>      <span class="hljs-attr">msg:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_result &#125;&#125;</span>&quot;</span><br><br>      <br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">test_com_var.yaml</span><br><br></code></pre></td></tr></table></figure><p>运行结果：</p><p><img src="/../../img/Ansible-Playbook/b3e2f46843690c04305feda6bcbb2b80697559838.png" alt="image-20221115084502083"></p><p>可以引用结果中的部分元素（user_result[‘uid’] &#x2F; user_result.uid）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_com_var.yaml</span><br><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">test_dict</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">vars:</span><br>    <span class="hljs-attr">user_info:</span><br>      <span class="hljs-attr">test_user20:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">test_user20</span><br>        <span class="hljs-attr">shell:</span> <span class="hljs-string">/sbin/nologin</span><br>        <span class="hljs-attr">comment:</span> <span class="hljs-string">test_user20</span><br>      <span class="hljs-attr">test_user21:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">test_user21</span><br>        <span class="hljs-attr">shell:</span> <span class="hljs-string">/sbin/nologin</span><br>        <span class="hljs-attr">comment:</span> <span class="hljs-string">test_user21</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">users</span> <span class="hljs-string">via</span> <span class="hljs-string">dict</span><br>    <span class="hljs-attr">user:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_info.test_user21.name &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">shell:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_info.test_user21.shell &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>    <span class="hljs-attr">register:</span> <span class="hljs-string">user_result</span><br><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">debug</span> <span class="hljs-string">result</span> <span class="hljs-string">of</span> <span class="hljs-string">user</span> <span class="hljs-string">creation</span><br>    <span class="hljs-attr">debug:</span><br>      <span class="hljs-attr">msg:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_result.uid &#125;&#125;</span>&quot;</span><br>      <br>  <span class="hljs-string">ansible-playbook</span> <span class="hljs-string">test_com_var.yaml</span>    <br></code></pre></td></tr></table></figure><p>运行结果：</p><p><img src="/../../img/Ansible-Playbook/b523c1286448aeda79a19dee9dabbedb697559838.png" alt="image-20221115084642928"></p><p>可以对输出结果进行迭代引用（用register存在多个变量中）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_com_var.yaml</span><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">test_dict</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">vars:</span><br>    <span class="hljs-attr">user_info:</span><br>      <span class="hljs-attr">test_user20:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">test_user20</span><br>        <span class="hljs-attr">shell:</span> <span class="hljs-string">/sbin/nologin</span><br>        <span class="hljs-attr">comment:</span> <span class="hljs-string">test_user20</span><br>      <span class="hljs-attr">test_user21:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">test_user21</span><br>        <span class="hljs-attr">shell:</span> <span class="hljs-string">/sbin/nologin</span><br>        <span class="hljs-attr">comment:</span> <span class="hljs-string">test_user21</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">create</span> <span class="hljs-string">users</span> <span class="hljs-string">via</span> <span class="hljs-string">dict</span><br>    <span class="hljs-attr">user:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_info.test_user21.name &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">shell:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_info.test_user21.shell &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>    <span class="hljs-attr">register:</span> <span class="hljs-string">user_result</span><br><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">debug</span> <span class="hljs-string">result</span> <span class="hljs-string">of</span> <span class="hljs-string">user</span> <span class="hljs-string">creation</span><br>    <span class="hljs-attr">debug:</span><br>      <span class="hljs-attr">msg:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; user_result.uid &#125;&#125;</span>&quot;</span><br>    <span class="hljs-attr">register:</span> <span class="hljs-string">shell_result</span><br>  <br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">debug</span> <span class="hljs-string">result</span> <span class="hljs-string">of</span> <span class="hljs-string">shell</span><br>    <span class="hljs-attr">debug:</span><br>      <span class="hljs-attr">msg:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; shell_result &#125;&#125;</span>&quot;</span><br>      <br>  <span class="hljs-string">ansible-playbook</span> <span class="hljs-string">test_com_var.yaml</span>    <br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-Playbook/dd86056141f0f9b2275311165b687f4f697559838.png" alt="image-20221026101500419"></p><h2 id="Ansible-Vault（Ansible-保管箱）"><a href="#Ansible-Vault（Ansible-保管箱）" class="headerlink" title="Ansible Vault（Ansible 保管箱）"></a>Ansible Vault（Ansible 保管箱）</h2><p>作用：加密敏感的数据、密码等信息，通常情况下都是定义在变量内的敏感信息。</p><p>应用的情景：</p><p>1&gt; 加密变量文件（敏感数据、密码信息等）</p><p>2&gt; 加密证书</p><p>命令：ansible-vault</p><p>命令用法：</p><h3 id="创建一个加密文件："><a href="#创建一个加密文件：" class="headerlink" title="创建一个加密文件："></a>创建一个加密文件：</h3><p><strong>ansible-vault create sec.yaml</strong></p><p><img src="/../../img/Ansible-Playbook/35e09ef50f593d9fa72815e0c2bb4d61697559838.png" alt="image-20221026101756674"></p><p>使用vim sec.ym或者cat sec.yaml只能看到加密后的内容</p><p><img src="/../../img/Ansible-Playbook/33c301572b62272a845f4a83aa746a74697559838.png" alt="image-20221115085325103"></p><h3 id="如何查看加密过的文件内容："><a href="#如何查看加密过的文件内容：" class="headerlink" title="如何查看加密过的文件内容："></a>如何查看加密过的文件内容：</h3><p><img src="/../../img/Ansible-Playbook/a1e0f0906df9382fc641caaa969adf29697559838.png" alt="image-20221026101816806"></p><h3 id="如何在剧本中调用加密文件"><a href="#如何在剧本中调用加密文件" class="headerlink" title="如何在剧本中调用加密文件"></a>如何在剧本中调用加密文件</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">vim</span> <span class="hljs-string">test_vault.yaml</span><br><br><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">users</span> <span class="hljs-string">via</span> <span class="hljs-string">vault</span><br>  <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">vars_files:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">/root/sec.yaml</span><br>  <span class="hljs-attr">tasks:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Create</span> <span class="hljs-string">users</span><br>    <span class="hljs-attr">user:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; username &#125;&#125;</span>&quot;</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br><br></code></pre></td></tr></table></figure><p>执行剧本时报错</p><p><img src="/../../img/Ansible-Playbook/a8d15bab9284c32503d7a80d67def94c697559838.png" alt="image-20221115090123132"></p><p>解决方法：</p><p>方法一：ansible-playbook 命令时候添加–ask-vault-pass参数</p><p>ansible-playbook –ask-vault-pass test_vault.yaml</p><p><img src="/../../img/Ansible-Playbook/98b4bf6472637f89da53f58ae4f439f0697559838.png" alt="image-20221115090305979"></p><p>方法二：ansible-playbook –vault-id @prompt test_vault.yaml（2.3之后使用，建议）</p><p><img src="/../../img/Ansible-Playbook/b1aceb4680193b67ecb1d22f48d2aa48697559838.png" alt="image-20221115090343892"></p><p>方法三：ansible-playbook –vault-password-file&#x3D;pass.yaml  test_vault.yaml</p><p>（纯文本形式的密码存放在文件中，只能单行写一个密码，需要对该密码文件加强安全措施）</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">echo</span> <span class="hljs-number">123456</span> &gt; pass.yaml<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-Playbook/1f0f19e15802dac6438bc0b0eea5d843697559838.png" alt="image-20221115090537834"></p><h3 id="解密"><a href="#解密" class="headerlink" title="解密"></a>解密</h3><p><img src="/../../img/Ansible-Playbook/78e17d8fd861560b5c1d8981705b2a06697559838.png" alt="image-20221115090755579"></p><h3 id="加密一个已存在的文件"><a href="#加密一个已存在的文件" class="headerlink" title="加密一个已存在的文件"></a>加密一个已存在的文件</h3><p><img src="/../../img/Ansible-Playbook/f4b507f2bbc1d7098929e3fbfbbb18e6697559838.png" alt="image-20221115090808908"></p><h3 id="重置加密文件的密码"><a href="#重置加密文件的密码" class="headerlink" title="重置加密文件的密码"></a>重置加密文件的密码</h3><p><img src="/../../img/Ansible-Playbook/3942868d538251f3d92954a618e556ca697559838.png" alt="image-20221115090908211"></p><h3 id="编辑已存在的加密文件"><a href="#编辑已存在的加密文件" class="headerlink" title="编辑已存在的加密文件"></a>编辑已存在的加密文件</h3><p><img src="/../../img/Ansible-Playbook/db819275d2e2d480c4ddf6af4bbaf3bf697559838.png" alt="image-20221115090956109"></p><p>Tips：如果我们使用加密文件保存变量、密码等敏感数据，最好采用隐藏文件来存放，增强安全性。</p><p><img src="/../../img/Ansible-Playbook/76dd5b54e324f61e9822761b4d1af9bf697559838.png" alt="image-20221115091217928"></p><p><img src="/../../img/Ansible-Playbook/099b998b4f32527a41a5f87d2fca1634697559838.png" alt="image-20221115091252760"></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">ansible-playbook <span class="hljs-attr">--vault-password-file</span>=<span class="hljs-selector-class">.pass</span><span class="hljs-selector-class">.yaml</span>  test_vault.yaml<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-Playbook/9c52fcb5e4d333fb8e06bf044093aade697559838.png" alt="image-20221115091403345"></p><h2 id="综合实践"><a href="#综合实践" class="headerlink" title="综合实践"></a>综合实践</h2><p>编辑剧本文件实现以下功能：</p><p>0、设置主机组 all</p><p>1、设置变量 定义nginx服务端口为8081</p><p>2、关闭facts</p><p>3、调用service模块，卸载受控端的httpd</p><p>4、调用SELinux模块，关闭selinux</p><p>5、调用yum模块安装epel源</p><p>6、调用yum模块安装nginx</p><p>7、调用lineinfile模块修改nginx配置文件中的监听端口，使用自定义的服务端口变量，并将结果注册到 port_result</p><p>8、调用service模块启动nginx，并设置为开机自启动</p><p>9、调用debug模块，msg信息为port_result</p><p>10、验证受控端服务及端口</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-string">all</span><br>  <span class="hljs-attr">gather_facts:</span> <span class="hljs-literal">no</span><br>  <span class="hljs-attr">vars:</span> <br>    <span class="hljs-attr">nginx_port:</span> <span class="hljs-string">&quot;8081&quot;</span><br>  <span class="hljs-attr">tasks:</span>   <br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">uninstall</span> <span class="hljs-string">httpd</span><br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">httpd</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">absent</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">stop</span> <span class="hljs-string">selinux</span><br>    <span class="hljs-attr">selinux:</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">disabled</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">epel</span><br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">epel-release</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <br>    <span class="hljs-attr">yum:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">present</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">set</span> <span class="hljs-string">nginx_port</span><br>    <span class="hljs-attr">lineinfile:</span><br>      <span class="hljs-attr">path:</span> <span class="hljs-string">/etc/nginx/nginx.conf</span><br>      <span class="hljs-attr">regexp:</span> <span class="hljs-string">&quot;        listen       80;&quot;</span><br>      <span class="hljs-attr">line:</span> <span class="hljs-string">&quot;        listen       <span class="hljs-template-variable">&#123;&#123; nginx_port &#125;&#125;</span>;&quot;</span><br>    <span class="hljs-attr">register:</span> <span class="hljs-string">port_result</span>   <br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">start</span> <span class="hljs-string">nginx</span><br>    <span class="hljs-attr">service:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span><br>      <span class="hljs-attr">state:</span> <span class="hljs-string">started</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">yes</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">debug</span> <span class="hljs-string">msg</span><br>    <span class="hljs-attr">debug:</span><br>      <span class="hljs-attr">msg:</span> <span class="hljs-string">&quot;<span class="hljs-template-variable">&#123;&#123; port_result &#125;&#125;</span>&quot;</span><br><br><br><span class="hljs-string">ansible-playbook</span>  <span class="hljs-string">install_nginx.yaml</span> <span class="hljs-string">-C</span><br><br><span class="hljs-string">ansible-playbook</span> <span class="hljs-string">install_nginx.yaml</span>  <br><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span>  <span class="hljs-string">&quot;ps aux |grep nginx &quot;</span>  <br><br><span class="hljs-string">ansible</span> <span class="hljs-string">all</span> <span class="hljs-string">-m</span> <span class="hljs-string">shell</span> <span class="hljs-string">-a</span>  <span class="hljs-string">&quot;netstat -lntp |grep nginx &quot;</span> <br><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-Playbook/dcf3390c047b46a7daeb46d9872253a8697559838.png" alt="image-20230926165830835"></p><p><img src="/../../img/Ansible-Playbook/a84b3eca573df546f160b8bed26c3c8f697559838.png" alt="image-20230926165852495"></p><p><code>可以返回目录！</code></p><p><a href="https://blog.qianyios.top/2023/09/10/ansible/Ansible-%E6%80%BB%E6%89%8B%E5%86%8C/">Ansible练习目录 - 严千屹博客 (qianyios.top)</a></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>Ansible</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>超星网课脚本部署教程</title>
    <link href="/2023/09/20/%E8%B6%85%E6%98%9F%E7%BD%91%E8%AF%BE%E8%84%9A%E6%9C%AC%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/"/>
    <url>/2023/09/20/%E8%B6%85%E6%98%9F%E7%BD%91%E8%AF%BE%E8%84%9A%E6%9C%AC%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="超星网课脚本部署教程"><a href="#超星网课脚本部署教程" class="headerlink" title="超星网课脚本部署教程"></a>超星网课脚本部署教程</h1><h2 id="前提！"><a href="#前提！" class="headerlink" title="前提！"></a>前提！</h2><h3 id="浏览器：（其中一个即可）"><a href="#浏览器：（其中一个即可）" class="headerlink" title="浏览器：（其中一个即可）"></a>浏览器：（其中一个即可）</h3><p>  1.1 <a href="https://www.microsoft.com/zh-cn/edge/download?form=MA13FJ">下载 Microsoft Edge</a>（<font color='red'>以下仅用此浏览器介绍</font>）</p><p>  1.2 <a href="https://www.google.com/intl/zh-CN/chrome/">Google Chrome 网络浏览器</a>（魔法）</p><p>有就下一步，不用重复安装</p><h3 id="edge浏览器安装扩展（选一个即可，可以都测试一下）"><a href="#edge浏览器安装扩展（选一个即可，可以都测试一下）" class="headerlink" title="edge浏览器安装扩展（选一个即可，可以都测试一下）"></a><font color='red'>edge浏览器</font>安装扩展（选一个即可，可以都测试一下）</h3><h4 id="脚本猫"><a href="#脚本猫" class="headerlink" title="脚本猫"></a><a href="https://docs.scriptcat.org/">脚本猫</a></h4><p>点击<a href="https://microsoftedge.microsoft.com/addons/detail/scriptcat/liilgpjgabokdklappibcjfablkpcekh">ScriptCat - Microsoft Edge Addons</a>（edge安装扩展）</p><p><img src="/../img/%E8%B6%85%E6%98%9F%E7%BD%91%E8%AF%BE%E8%84%9A%E6%9C%AC%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/2f172091524e6da2d1dd1a339aca0809697559838.png" alt="image-20230920190513089"></p><p><img src="/../img/%E8%B6%85%E6%98%9F%E7%BD%91%E8%AF%BE%E8%84%9A%E6%9C%AC%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/801f3c0ce5ffdcc40823dced3fdbf2ac697559838.png" alt="image-20230920190705841"></p><h4 id="油猴"><a href="#油猴" class="headerlink" title="油猴"></a>油猴</h4><p> 点击<a href="https://microsoftedge.microsoft.com/addons/detail/%E7%AF%A1%E6%94%B9%E7%8C%B4/iikmkjmpaadaobahmlepeloendndfphd?refid=bingshortanswersdownload">篡改猴 - Microsoft Edge Addons</a>（edge安装扩展）</p><p>安装步骤如上</p><p>最后在设置-扩展，看见你安装的扩展即可</p><p><img src="/../img/%E8%B6%85%E6%98%9F%E7%BD%91%E8%AF%BE%E8%84%9A%E6%9C%AC%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/42c30b483f1ae21b7b3ec9a8e863ed6a697559838.png" alt="image-20230920201244312"></p><h2 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h2><p>油叉官网：<a href="https://greasyfork.org/zh-CN">Greasy Fork - 安全、实用的用户脚本大全</a></p><p>可以自行搜索脚本</p><p><img src="/../img/%E8%B6%85%E6%98%9F%E7%BD%91%E8%AF%BE%E8%84%9A%E6%9C%AC%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/8f67fcc76c2297a67726c163ae68e11d697559838.png" alt="image-20230921005847300"></p><p>推荐脚本：</p><p>1.<a href="https://greasyfork.org/zh-CN/scripts/451356-%E4%B8%87%E8%83%BD-%E5%85%A8%E5%B9%B3%E5%8F%B0%E8%87%AA%E5%8A%A8%E7%AD%94%E9%A2%98%E8%84%9A%E6%9C%AC">【万能】全平台自动答题脚本 (greasyfork.org)</a></p><p>2.<a href="https://greasyfork.org/zh-CN/scripts/437781-%E8%B6%85%E6%98%9F-%E5%AD%A6%E4%B9%A0%E9%80%9A%E7%BD%91%E8%AF%BE%E5%B0%8F%E5%8A%A9%E6%89%8B-%E4%BF%AE%E5%A4%8D%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE-%E8%87%AA%E5%8A%A8%E8%B7%B3%E8%BD%AC%E4%BB%BB%E5%8A%A1%E7%82%B9-%E7%AB%A0%E6%B5%8B%E4%BD%9C%E4%B8%9A%E5%AD%97%E4%BD%93%E8%A7%A3%E5%AF%86-%E8%87%AA%E5%8A%A8%E7%AD%94%E9%A2%98-%E9%A2%98%E5%BA%93%E8%A6%86%E7%9B%96%E7%8E%87%E9%AB%98-%E5%AE%8C%E5%85%A8%E5%85%8D%E8%B4%B9">🥇超星&#x2F;学习通网课小助手|修复视频播放|自动跳转任务点|章测作业字体解密|自动答题|题库覆盖率高、完全免费 (greasyfork.org)</a></p><p>3.<a href="https://greasyfork.org/zh-CN/scripts/435357-%E8%B6%85%E6%98%9F%E5%AD%A6%E4%B9%A0%E9%80%9A%E5%B0%8F%E5%8A%A9%E6%89%8B-%E7%AB%A0%E8%8A%82-%E4%BD%9C%E4%B8%9A-%E8%80%83%E8%AF%95%E8%A6%86%E7%9B%9698-%E5%90%8E%E5%8F%B0%E8%87%AA%E5%8A%A8%E6%8C%82%E6%9C%BA-%E9%97%AF%E5%85%B3%E8%AF%BE%E7%A8%8B-%E8%87%AA%E5%8A%A8%E7%AD%94%E9%A2%98-%E9%98%85%E8%AF%BB%E6%97%B6%E9%95%BF-%E5%85%AC%E5%BC%8F%E9%A2%98-%E5%9B%BE%E7%89%87%E9%A2%98-1-1%E6%97%B6%E9%95%BF-%E4%B8%8D%E6%B8%85%E8%BF%9B%E5%BA%A6-%E4%BA%91%E7%AB%AF%E9%A2%98%E5%BA%93%E5%AE%9E%E6%97%B6%E6%9B%B4%E6%96%B0">🔥超星学习通小助手-章节、作业、考试覆盖98%|后台自动挂机|闯关课程|自动答题|阅读时长|公式题、图片题|1:1时长|不清进度|云端题库实时更新 (greasyfork.org)</a></p><p><font color='red'>自行测试</font>，例子：（安装即可）</p><p><img src="/../img/%E8%B6%85%E6%98%9F%E7%BD%91%E8%AF%BE%E8%84%9A%E6%9C%AC%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/87731adef1ea9b6771ebe22ad814e43b697559838.png" alt="image-20230920202025222"></p><p><font color='red'>篡改猴</font>：管理脚本面板（查看安装的脚本）</p><p><img src="/../img/%E8%B6%85%E6%98%9F%E7%BD%91%E8%AF%BE%E8%84%9A%E6%9C%AC%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/b71ba007c0767192c6104cbc2f14be9e697559838.png" alt="image-20230920235710807"></p><p><font color='red'>！！</font>进入<a href="http://www.chaoxing.com/">超星学习通测试</a></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>超星网课</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ansible-常用模块</title>
    <link href="/2023/09/20/ansible/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/"/>
    <url>/2023/09/20/ansible/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Ansible-常用模块"><a href="#Ansible-常用模块" class="headerlink" title="Ansible-常用模块"></a>Ansible-常用模块</h1><h2 id="command模块"><a href="#command模块" class="headerlink" title="command模块"></a>command模块</h2><p>linux命令，不支持管道、重定向等，不建议使用</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim">ansible <span class="hljs-keyword">all</span> -<span class="hljs-keyword">m</span> <span class="hljs-keyword">command</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;pwd&quot;</span><br>ansible <span class="hljs-keyword">all</span> -<span class="hljs-keyword">m</span> <span class="hljs-keyword">command</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;ls&quot;</span><br>ansible <span class="hljs-keyword">all</span> -<span class="hljs-keyword">m</span> <span class="hljs-keyword">command</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;cat /etc/passwd |grep student&quot;</span> #这个不能正常使用 ansible <span class="hljs-keyword">all</span> -<span class="hljs-keyword">m</span> <span class="hljs-keyword">command</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;echo bb &gt;&gt;/tmp/testansible&quot;</span><br>ansible <span class="hljs-keyword">all</span> -<span class="hljs-keyword">m</span> <span class="hljs-keyword">command</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;cat /tmp/testansible&quot;</span><br></code></pre></td></tr></table></figure><p>#重定向也无法正常使用</p><p>课堂练习：</p><p>使用command命令查询各主机磁盘状态、查询内存状态</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">ansible <span class="hljs-keyword">all</span> -<span class="hljs-keyword">m</span> <span class="hljs-keyword">command</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;df -h&quot;</span><br>ansible <span class="hljs-keyword">all</span> -<span class="hljs-keyword">m</span> <span class="hljs-keyword">command</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;free -m&quot;</span><br></code></pre></td></tr></table></figure><h2 id="shell模块"><a href="#shell模块" class="headerlink" title="shell模块"></a>shell模块</h2><p>支持管道、重定向等，常用模块</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;cat /etc/passwd | grep student&quot;</span> <span class="hljs-comment">#支持管道</span><br>ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;echo bb &gt;&gt;/tmp/testansible&quot;</span><br>ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;cat /tmp/testansible&quot;</span><br></code></pre></td></tr></table></figure><p>#支持重定向</p><p>课堂练习：</p><p>使用shell模块查看selinux状态</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;getenforce&quot;</span><br></code></pre></td></tr></table></figure><p>通过shell模块批量关闭selinux</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">临时关闭：<br><br>ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;setenforce 0&quot;</span><br><br>永久关闭：<br><br>ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;sed -ri &#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27; /etc/selinux/config&quot;</span><br><br>ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;reboot&quot;</span><br><br></code></pre></td></tr></table></figure><h2 id="文件模块"><a href="#文件模块" class="headerlink" title="文件模块"></a>文件模块</h2><h3 id="copy模块"><a href="#copy模块" class="headerlink" title="copy模块"></a>copy模块</h3><p>从主控端复制文件到远程主机</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">ansible-doc <span class="hljs-keyword">copy</span><br></code></pre></td></tr></table></figure><p><font color='red'>常用参数</font></p><p><font color='red'>src</font>：source源路径文件&#x2F;目录。即要复制到远程主机的文件在本地的地址，可以是绝对路径，也可以是 相对路径。如果路径是一个目录，它将递归复制。在这种情况下，<font color='red'>如果路径使用”&#x2F;“来结尾，则只复制目录里的内容，如果没有使用”&#x2F;“来结尾，则包含目录在内的整个内容全部复制。</font></p><p><font color='red'>dest</font>：destnation受管主机上的一个目标路径，即要将源文件复制到的远程主机的绝对路径，<font color='red'>如果源文件是一个目录，那么该路径也必须是个目录（必须）</font></p><p><font color='red'>content</font>：代替src，将本机指定内容传至远程主机并生成目标文件，相当于 echo 重定向内容到文件</p><p><font color='red'>mode</font>：文件权限（chmod）</p><p>linux权限回顾</p><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/87669b61b1f4fab7aae28d6532ec3ee4697559838.png" alt="image-20230919103608153"></p><p>owner：文件属主（chown）<br>group：文件属组（chgrp）<br>backup：在覆盖之前将原文件备份，备份文件包含时间信息。<br>directory_mode： 递归地设定目录的权限，默认为系统默认权限<br>force： 若目标主机包含该文件，但内容不同，如果设置为yes，则强制覆盖，如果为no，则只有当目标 主机的存放位置不存在该文件时，才复制。默认为yes</p><h4 id="使用案例"><a href="#使用案例" class="headerlink" title="使用案例"></a>使用案例</h4><hr><ol><li>复制dir1目录及其文件到受控主机&#x2F;tmp&#x2F;下（无斜杠-操作整个目录）</li></ol><p>注：关于src目录加不加&#x2F;的演示</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#复制dir1目录及其文件到受控主机/tmp/下</span><br>su student<br><span class="hljs-built_in">cd</span> ~<br>ll<br><span class="hljs-built_in">mkdir</span> ansible<br><span class="hljs-built_in">cd</span> ansible/<br><span class="hljs-built_in">mkdir</span> dir1<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;123&quot;</span> &gt;dir1/file1<br>ansible 192.168.48.101 -m copy -a <span class="hljs-string">&quot;src=&#x27;dir1&#x27; dest=/tmp/&quot;</span> <br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/e7151289c6d68983fbb2a955e2f7016a697559838.png" alt="image-20230919104532341"></p><p>查看受控主机是否复制成功</p><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/862da4e1e91bfd6754ed50ebab779b31697559838.png" alt="image-20230919104230231"></p><p>成功</p><hr><p>2.仅复制dir1目录下的文件（有斜杠-操作目录下的文件，不复制目录）</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ansible</span> <span class="hljs-number">192.168.48.101</span> -m copy -a<span class="hljs-string">&quot;src=&#x27;dir1/&#x27; dest=/tmp/&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/2ec8564457c96f50d23623872c7cd4b8697559838.png" alt="image-20230919104627377"></p><hr><h4 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h4><ol><li>将控制主机的copyfile<font color='red'>文件</font>复制到受管主机的 &#x2F;tmp 目录</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">echo</span> <span class="hljs-string">&#x27;123&#x27;</span> &gt; copyfile<br>ansible <span class="hljs-number">192.168.48.101</span> -m copy -a <span class="hljs-string">&#x27;src=copyfile dest=/tmp&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/e4312fce782d686e9586945006bba981697559838.png" alt="image-20230919104938353"></p><ol start="2"><li>直接在受管主机上生成一个指定内容的文件文件</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ansible</span> <span class="hljs-number">192.168.48.101</span> -m copy -a <span class="hljs-string">&quot;content=&#x27;test copy\n&#x27; dest=/tmp/f1&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/cb18e2b19f03a8666eee7263b142ebce697559838.png" alt="image-20230919105205728"></p><ol start="3"><li>在受管主机上生成指定属性和内容的文件</li></ol><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">ansible <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">48</span>.<span class="hljs-number">101</span> -m <span class="hljs-built_in">copy</span> -a &quot;content=&#x27;test <span class="hljs-built_in">copy</span> <span class="hljs-number">2</span>\n&#x27; dest=/tmp/f2 <span class="hljs-built_in">mode</span>=<span class="hljs-number">0644</span> owner=student group=student&quot;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/bd5109bd7f9e218d16b18fabe137ee71697559838.png" alt="image-20230919105358641"></p><ol start="4"><li>在文件覆盖前生成备份文件</li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m copy -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;content=&#x27;test copy 1\n&#x27; dest=/tmp/f1 backup=yes&quot;</span><br><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;ls -l /tmp/f1*&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/bb020f71974ad9084438a176289f0484697559838.png" alt="image-20230919105648041"></p><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/6ae9da91cd8afb7527a0f22498267ae1697559838.png" alt="image-20230919105803096"></p><h3 id="script模块"><a href="#script模块" class="headerlink" title="script模块"></a>script模块</h3><p>在远程主机上运行ansible服务器上的脚本，优点是不需手动传送脚本至每个服务器。</p><p>其实是ansible自动传到远程主机、执行然后再删除脚本：copy+shell+delete</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">cat</span> &gt;&gt; tesh.<span class="hljs-keyword">sh</span> &lt;&lt; EOF<br>#！/bin/bash <br><span class="hljs-keyword">echo</span> hello<br>EOF<br>ansible <span class="hljs-keyword">all</span> -<span class="hljs-keyword">m</span> script -<span class="hljs-keyword">a</span> tesh.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/f43845a7b08bb2cf0addaab362dada4e697559838.png" alt="image-20230919110133298"></p><p>执行结果显示了每台主机的执行情况。</p><p><code>CHANGED</code> 表示执行过程中发生了变化，即脚本被成功执行。</p><p><code>rc</code> 字段显示返回码为 0，表示执行成功。</p><p><code>stderr</code> 字段显示了标准错误输出，其中包含了连接关闭的信息。</p><p><code>stdout</code> 字段显示了标准输出，其中包含了脚本执行的结果，即 “hello”。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat &gt;&gt;  ansible_ntp.sh &lt;&lt; EOF<br><span class="hljs-comment">#!/bin/bash</span><br>systemctl status ntpd &gt;<span class="hljs-regexp">/dev/</span>null <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span><br><span class="hljs-keyword">if</span> [ \$? == <span class="hljs-number">0</span> ]; then<br>echo <span class="hljs-string">&quot;ntp service has been installed&quot;</span><br><span class="hljs-keyword">exit</span><br>fi<br>yum install -y ntp &gt;<span class="hljs-regexp">/dev/</span>null <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span><br><span class="hljs-keyword">if</span> [ \$? == <span class="hljs-number">0</span> ]; then<br>systemctl start ntpd<br>systemctl enabled ntpd &gt;<span class="hljs-regexp">/dev/</span>null <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span><br>sleep <span class="hljs-number">5</span><br>ntpq -p<br><span class="hljs-keyword">else</span><br>echo <span class="hljs-string">&quot;ntp service install failed,check network or yum&quot;</span><br>fi<br>EOF<br><br>这条命令的意思就是在后台执行这个程序,并将错误输出<span class="hljs-number">2</span>重定向到标准输出<span class="hljs-number">1</span>,然后将标准输出<span class="hljs-number">1</span>全部放 到<span class="hljs-regexp">/dev/</span>null文件,也就是清空.<br>所以可以看出<span class="hljs-string">&quot; &gt;/dev/null 2&gt;&amp;1 &quot;</span>常用来避免shell命令或者程序等运行中有内容输出。<br><br>chmod <span class="hljs-number">777</span> ansible_ntp.sh<br><br>ansible all -m script -a <span class="hljs-string">&quot;ansible_ntp.sh&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/32c5314551c89e763040047f9091491c697559838.png" alt="image-20230919112000710"></p><h3 id="fetch模块"><a href="#fetch模块" class="headerlink" title="fetch模块"></a>fetch模块</h3><p>从受管主机上，拉取文件到控制节点（目前不支持目录,可以先打包,再提取文件）</p><p>常见参数</p><p><font color='red'>dest</font>：控制节点的保存路径</p><p><font color='red'>src</font>：受管节点要拉取文件的路径（必须是文件，不能是目录）</p><p><font color='red'>flat</font>：直接保存到目标指定位置，而不是在受管主机名下的文件路径中。</p><p><font color='cornflowerblue'>使用案例</font></p><ol><li>从受管主机拉取指定文件</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ansible</span> <span class="hljs-number">192.168.48.101</span> -m fetch -a <span class="hljs-string">&quot;src=/etc/hosts dest=/home/student/ansible&quot;</span><br></code></pre></td></tr></table></figure><p>索取到本地目录下的文件会<font color='red'>自动生成与目标主机的域名或IP地址的目录</font>存放索取的文件</p><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/0f187bc657996e606aa6a8a1d05e3cd8697559838.png" alt="image-20230919122430880"></p><ol start="2"><li>直接拉取受管主机文件到控制节点指定位置</li></ol><p><font color='red'>flat</font>：直接保存到目标指定位置，而不是在受管主机名下的文件路径中。</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ansible</span> <span class="hljs-number">192.168.48.101</span> -m fetch -a <span class="hljs-string">&quot;src=/etc/hosts dest=/home/student/ansible/file1 flat=yes&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/78dec4bee22da5223c32c98af141d705697559838.png" alt="image-20230919124219445"></p><ol start="3"><li>打包目录并所有内容到控制节点指定位置</li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;pwd&#x27;</span><br><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;tar cf test.tar.gz /var/log&#x27;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;ls -l /home/student/&#x27;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m fetch -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;src=/home/student/test.tar.gz dest=/home/student/ansible/ flat=yes&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/bc12ce0bc14b42746e339deaee8a4a97697559838.png" alt="image-20230919124935075"></p><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/13a333cde234d2002e4fd89ea329305d697559838.png" alt="image-20230919125130417"></p><h3 id="file模块"><a href="#file模块" class="headerlink" title="file模块"></a>file模块</h3><p>file 模块可以帮助我们完成一些对文件的基本操作。比如，创建文件或目录、删除文件或目录、修改文 件权限等。</p><p><font color='red'>常用参数</font></p><p><font color='red'>mode</font>： 定义文件&#x2F;目录的权限,比如，如果想要将文件权限设置为”rw-r-x—“，则可以使用mode&#x3D;650进行 设置，或者使用mode&#x3D;0650，效果也是相同的。<br><font color='red'>owner</font>： 定义文件&#x2F;目录的所有者,属主对应的用户必须在远程主机中存在,否则会报错。<br><font color='red'>group</font>： 定义文件&#x2F;目录的属组,属组对应的组必须在远程主机中存在，否则会报错。<br><font color='red'>path</font>： 必选项，定义受管主机的文件&#x2F;目录的路径<br><font color='red'>recurse</font>： 递归地设置文件的属性，只对目录有效<br><font color='red'>src</font>： 要被链接的源文件的路径，只应用于state&#x3D;hard&#x2F;link的情况<br><font color='red'>dest</font>： 被链接到的路径，只应用于state&#x3D;hard&#x2F;link的情况。<br><font color='red'>state</font>： 操作方法<br>    <font color='red'>directory</font>：如果目录不存在，创建目录<br>   <font color='red'>file</font>：即使文件不存在，也不会被创建（只能指定已存在的文件）<br>   <font color='red'>touch</font>：如果文件不存在，则会创建一个新的文件，如果文件或目录已存在，则更新其最后修改时间<br>    <font color='red'>link</font>：创建软链接<br>    <font color='red'>hard</font>：创建硬链接<br>    <font color='red'>absent</font>：删除目录、文件或者取消链接文件，相当于rm -rf<br><font color='red'>force</font>： 只应用于state&#x3D;hard&#x2F;link的情况，若需要在两种情况下<font color='red'>强制创建软链接</font>，一种是源文件不存在但 之后会建立的情况下；另一种是目标软链接已存在，需要先取消之前的软链，然后创建新的软链，有两个选 项：yes|no</p><p><font color='cornflowerblue'>使用案例</font></p><ol><li>创建指定文件属性的空目录</li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">file</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;path=/tmp/dir2 state=directory owner=student group=student mode=0755&quot;</span><br><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;ls -l /tmp/&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/9b3a63b7390154eea228d289561b2d2f697559838.png" alt="image-20230919130328712"></p><ol start="2"><li>创建指定文件属性的空文件</li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">file</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;path=/tmp/file2 state=touch owner=student group=student mode=0755&quot;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;ls -l /tmp/&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/f767c4608c2ce1a55625007cff7f4a50697559838.png" alt="image-20230919130652157"></p><p><font color='red'>注意：为何不能用state&#x3D;file</font></p><p><font color='red'>file</font>：即使文件不存在，也不会被创建（只能指定已存在的文件） </p><p>file3不存在</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">file</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;path=/tmp/file3 state=file owner=student group=student mode=0755&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/329b1a6567b84ac8ad92586b762a5ce8697559838.png" alt="image-20230919131409780"></p><p>如果指定file1（已存在）呢（将root用户属组改成student）</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">file</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;path=/tmp/file1 state=file owner=student group=student mode=0755&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/f2af176de6a0df816f587dc4f1322ca5697559838.png" alt="image-20230919131653294"></p><ol start="3"><li>删除目录、删除文件</li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">file</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;path=/tmp/dir1 state=absent&quot;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">file</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;path=/tmp/file1 state=absent&quot;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;ls -l /tmp/&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/c6cb0e226d17a5ced983f12cce11934e697559838.png" alt="image-20230919131825229"></p><ol start="4"><li>创建链接文件</li></ol><p>软链接：快捷方式<br>file2→file1（link）</p><p>生成file1（<font color='red'>如果已存在就忽略这步</font>）</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ansible</span> <span class="hljs-number">192.168.48.101</span> -m copy -a <span class="hljs-string">&quot;content=&#x27;123 \n&#x27; dest=/tmp/file1&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/d2876ae992ed7f8c147dff4a6739e669697559838.png" alt="image-20230919132425256"></p><p>生成软链接</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">file</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;src=/tmp/file1 path=/tmp/file2 state=link force=true&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/5dc984c91c2c9d494077b6c1877a8917697559838.png" alt="image-20230919132542883"></p><p>取消软连接</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">file</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;path=/tmp/file2 state=absent&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/df7dd446561f6f30a51673bbc1c2bc19697559838.png" alt="image-20230919132733624"></p><p>硬链接：指向同一个inode</p><p>file3→file1（hard）</p><p>file3不存在</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">file</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;src=/tmp/file1 path=/tmp/file3 state=hard&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/318a952cda7b83ad26964847a76acf8f697559838.png" alt="image-20230919132952435"></p><h4 id="课堂练习"><a href="#课堂练习" class="headerlink" title="课堂练习"></a>课堂练习</h4><p>1、在&#x2F;tmp&#x2F;下创建目录ansiblefile,并在该文件夹下创建test.txt文件，指定属主student,赋予权限0700</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pf">ansible <span class="hljs-literal">all</span> -m shell -a <span class="hljs-string">&quot;useradd student&quot;</span><span class="hljs-comment">#创建一个用户与组</span><br>ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m file -a &#x27;path=/tmp/ansiblefile <span class="hljs-keyword">state</span>=directory&#x27;<br>ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m file -a &#x27;path=/tmp/ansiblefile/test.txt <span class="hljs-keyword">state</span>=touch owner=student mode=<span class="hljs-number">0700</span>&#x27;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/2ed4b2c1574aa91850534fb4c1982b1e697559838.png" alt="image-20230919133407177"></p><p>2、删除远程机器上的指定文件或目录(删除远程主机上的文件：&#x2F;tmp&#x2F;ansiblefile&#x2F;test.txt</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf">ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m file -a &#x27;path=/tmp/ansiblefile/test.txt <span class="hljs-keyword">state</span>=absent&#x27;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/f9a265c2adc4a2adaa42053dc37e424f697559838.png" alt="image-20230919133445932"></p><h3 id="lineinfile模块"><a href="#lineinfile模块" class="headerlink" title="lineinfile模块"></a>lineinfile模块</h3><p>增加或修改文件内容（以行为单位做流式处理），该模块在自动化运维中非常重要,他可以通过正则表达 式替换指定文本;例如开启一些配置选项等可以新加一行文本,或者是删除指定的行,本命令一定认真掌握 下来.</p><p><em><strong>*常见参数*</strong></em></p><p><font color='red'>path</font>：必须参数，远端文件路径 </p><p><font color='red'>line</font>：必须参数，修改后的内容（按行写入），追加 </p><p><font color='red'>regexp</font>：（定位）匹配正则语句,与要过滤的关键字 </p><p><font color='red'>state</font>：文件修改状态（present 添加生效 &#x2F; absent 删除） </p><p><font color='red'>replace</font>：替换文件内容 </p><p><font color='red'>create</font>：当文件不存在时，是否创建对应文件 </p><p><font color='red'>backup</font>：若文件更新时创建备份副本 </p><p><font color='red'>insertafter</font>：在指定位置的下一行插入（定位） </p><p><font color='red'>insertbefore</font>：在指定位置的上一行插入（定位）</p><p><font color='orange'>使用案例</font></p><p>假设前提：将控制节点的&#x2F;etc&#x2F;selinux&#x2F;config文件复制到受管主机192.168.48.101，另存为&#x2F;tmp&#x2F;selinux文件</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m copy -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;src=/etc/selinux/config dest=/tmp/selinux&quot;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;cat /tmp/selinux&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/82cd2adf7ec9f9bc29064bf5d9f5b7fc697559838.png" alt="image-20230919134240077"></p><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/30e7894c3150b4b05d7125d5ecf90cc7697559838.png" alt="image-20230919134251941"></p><ol><li>修改文件内容：考虑两个问题，修改哪个部分，修改成什么内容</li></ol><p>修改SELINUX开头的行，更新内容为：SELINUX&#x3D;disabled</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m lineinfile -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;path=/tmp/selinux regexp=&#x27;^SELINUX=&#x27; line=&#x27;SELINUX=disabled&#x27; &quot;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;cat /tmp/selinux&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/75fe6ee62e8f655c4152e4bc99246523697559838.png" alt="image-20230919134315158"></p><p>2.增加文件内容：考虑两个问题，增加什么内容，增加在哪个位置（上一行或下一行）</p><p>在SELINUX开头的行，在下一行加个注释，并且应用生效</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ansible</span> <span class="hljs-number">192.168.48.101</span> -m lineinfile -a <span class="hljs-string">&quot;path=/tmp/selinux insertafter=&#x27;^SELINUX=&#x27; line=&#x27;##Disabled SELINUX&#x27; &quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/5eea1bab6be9d6bfbdbf2ceb74884606697559838.png" alt="image-20230919134429117"></p><p>通过正则匹配查找&#x2F;tmp&#x2F;selinux文本,并在文本末尾插入一行##end</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m lineinfile -a <span class="hljs-symbol">&#x27;path</span>=/tmp/selinux regexp=<span class="hljs-string">&quot;EOF&quot;</span> <span class="hljs-literal">line</span>=<span class="hljs-string">&quot;#end&quot;</span>&#x27;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/ae4a84a778dc6973520028d2d3ba931d697559838.png" alt="image-20230919134600319"></p><p>3.删除文件内容:把刚才添加的“<font color='orange'>##disabled selinux</font>”注释去掉（删除所在行）</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m lineinfile -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;path=/tmp/selinux regexp=&#x27;^##Disa&#x27; state=absent&quot;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;cat /tmp/selinux&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/ee7e71eb274258ca876c640780ec90fe697559838.png" alt="image-20230919134741516"></p><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/cc45c530e4d91ce9fbba0b3bd6c0a341697559838.png" alt="image-20230919134748069"></p><ol start="4"><li>备份文件:在SELINUX开头的行，前一行加个注释，并且生效，生成备份文件</li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m lineinfile -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;path=/tmp/selinux insertbefore=&#x27;^SELINUX=&#x27; line=&#x27;##Disabled SELINUX&#x27; backup=yes state=present&quot;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;ls -l /tmp/selinux*&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/5bc1d39f945acc39525cb24b8caf4edd697559838.png" alt="image-20230919134951862"></p><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/42b408168dae51f599fa1260d9c5dd74697559838.png" alt="image-20230919135043656"></p><p>课堂练习：</p><p>修改192.168.48.101主机的&#x2F;etc&#x2F;hosts文件，</p><p>1、增加内容192.168.48.102 node03,验证增加成功</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m lineinfile -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;path=/etc/hosts line=&#x27;192.168.48.102 node03&#x27; &quot;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;cat /etc/hosts&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/8f44e09a2c719ee14875359f80a9ebaa697559838.png" alt="image-20230919143706370"></p><p>2、匹配以192开头的行，修改192.168.48.102 对应的 域名为node02，验证增加成功</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ansible</span> <span class="hljs-number">192.168.48.101</span> -m lineinfile -a <span class="hljs-string">&quot;path=/etc/hosts regexp=&#x27;^192&#x27; line=&#x27;192.168.48.102 node02&#x27; &quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/c84989b5dd4b6204a0942297189744e6697559838.png" alt="image-20230919143745061"></p><p>3、匹配以192开头的行之前增加 192.168.48.101 node01 ，验证增加成功</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ansible</span> <span class="hljs-number">192.168.48.101</span> -m lineinfile -a <span class="hljs-string">&quot;path=/etc/hosts insertbefore=&#x27;^192&#x27; line=&#x27;192.168.48.101 node01&#x27; &quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/0d65b1911f6f91e330db768114f80e68697559838.png" alt="image-20230919143806128"></p><p>4、在文档结尾增加 192.168.48.100 controller</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m lineinfile -a <span class="hljs-symbol">&#x27;path</span>=/etc/hosts regexp=<span class="hljs-string">&quot;EOF&quot;</span> <span class="hljs-literal">line</span>=<span class="hljs-string">&quot;192.168.48.100 controller&quot;</span>&#x27;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/8aa7bc46ad5bb1a3207b690e1ac61d2b697559838.png" alt="image-20230919143820201"></p><p>5、删除步骤1-3加入的内容</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m lineinfile -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;path=/etc/hosts regexp=&#x27;^192.&#x27; state=absent&quot;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;cat /etc/hosts&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/a3edd1dd18bb1414fa69f0fb769622b6697559838.png" alt="image-20230919143831042"></p><h2 id="软件包模块"><a href="#软件包模块" class="headerlink" title="软件包模块"></a>软件包模块</h2><h3 id="yum模块"><a href="#yum模块" class="headerlink" title="yum模块"></a>yum模块</h3><p><em><strong>*常用参数*</strong></em></p><p>name：软件包名称（必填） </p><p>state：</p><p>latest（更新到最新） </p><p>present（安装） </p><p>version（版本） </p><p>absent（卸载）</p><p>查看是否安装了某个服务 rpm -qa|grep httpd</p><p><em><strong>*使用案例*</strong></em></p><p>给node01安装httpd服务</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf">ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m yum -a &#x27;name=httpd <span class="hljs-keyword">state</span>=present&#x27;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/6585d14d6ddb96560f91568875504e6a697559838.png" alt="image-20230919144212748"></p><p>验证安装</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;rpm -qa|grep httpd&#x27;</span><br></code></pre></td></tr></table></figure><p>卸载 state&#x3D;absent</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf">ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m yum -a &#x27;name=httpd <span class="hljs-keyword">state</span>=absent&#x27;<br></code></pre></td></tr></table></figure><p>更新软件state&#x3D;latest</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf">ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m yum -a &#x27;name=&#x27;httpd&#x27; <span class="hljs-keyword">state</span>=latest&#x27;<br></code></pre></td></tr></table></figure><h2 id="系统模块"><a href="#系统模块" class="headerlink" title="系统模块"></a>系统模块</h2><h3 id="user模块"><a href="#user模块" class="headerlink" title="user模块"></a>user模块</h3><p><font color='red'>常用参数</font></p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pf">comment：注释信息<br><span class="hljs-keyword">group</span>：主要组<br>groups：附加组<br><span class="hljs-keyword">state</span>：present/absent<br>generate_ssh_key：生成SSH验证密钥<br>name：用户名<br>shell：Shell类型<br>uid：UID<br></code></pre></td></tr></table></figure><p><font color='red'>使用案例</font></p><p>1、在node1上创建用户 test_user UID&#x3D;1010</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m <span class="hljs-keyword">user</span> <span class="hljs-title">-a</span> <span class="hljs-string">&quot;name=test_user  uid=1010 comment=&#x27;ansible_test_user&#x27; shell=/bin/bash generate_ssh_key=yes  state=present&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;id test_user&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/53b3f1e7ed56723a6e5c22757cc7dc35697559838.png" alt="image-20230920001519202"></p><p>2、删除用户test_user（userdel test_user）</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m user -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;name=test_user  state=absent force=yes&quot;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;getent passwd |grep test_user&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/96be7d07d20396a86eaed3608ec385eb697559838.png" alt="image-20230920001533536"></p><h3 id="group组模块"><a href="#group组模块" class="headerlink" title="group组模块"></a>group组模块</h3><p>1、创建组test_group (groupadd -g 1010 test_group）</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m group -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;name=test_group  gid=1010  state=present&quot;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;getent group|grep test_group&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/e08ea0aad39e59ba538ba16baa56ffd8697559838.png" alt="image-20230920001545680"></p><p>2、删除组test_group （groupdel test_group）</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m group -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;name=test_group   state=absent&quot;</span><br>ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;getent group|grep test_group&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/dbdef8bc21b1892b93124d95f9e4dc4d697559838.png" alt="image-20230920001557200"></p><h3 id="service模块"><a href="#service模块" class="headerlink" title="service模块"></a>service模块</h3><p>启用&#x2F;启动&#x2F;停止指定的服务</p><p><font color='red'>常用参数</font></p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pf">name：服务名（确定服务存在）（必选项）<br><span class="hljs-keyword">state</span>：服务目标状态<br>（<span class="hljs-keyword">state</span>=started/stopped/restarted/...）（必选项）<br>enabled：是否开机启动(yes/<span class="hljs-keyword">no</span>)<br></code></pre></td></tr></table></figure><p>1、在node01上安装和启用httpd服务（相当于systemctl enable –now httpd）</p><p>安装</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf">ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m yum -a &#x27;name=httpd <span class="hljs-keyword">state</span>=present&#x27;<br></code></pre></td></tr></table></figure><p>启用</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ansible</span> <span class="hljs-number">192.168.48.101</span> -m service -a <span class="hljs-string">&quot;name=httpd state=started  enabled=yes&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.101</span> -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&#x27;systemctl status httpd&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/692149cd40500b744b3cf058ddd31350697559838.png" alt="image-20230920001809879"></p><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/135c5e6ff8f7b10b2bee5c39f5b6f6c7697559838.png" alt="image-20230920001826386"></p><p>2、停止服务</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf">ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m service -a &#x27;name=httpd <span class="hljs-keyword">state</span>=stopped&#x27;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/02585ddcbe55b9c4880bc7137b9247f2697559838.png" alt="image-20230920001941649"></p><p>3、重启服务</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf">ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m service -a &#x27;name=httpd <span class="hljs-keyword">state</span>=restarted&#x27;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/024ff5a68b565a12448f0943147e9f3b697559838.png" alt="image-20230920002005593"></p><h3 id="firewalld模块"><a href="#firewalld模块" class="headerlink" title="firewalld模块"></a>firewalld模块</h3><p><font color='red'>常见参数</font></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">source：数据源（相当于<span class="hljs-comment">--add-source）</span><br>interface：端口（相当于<span class="hljs-comment">--add-port）</span><br>service：服务（相当于<span class="hljs-comment">--add-service）</span><br><span class="hljs-type">zone</span>：关联区域（相当于<span class="hljs-comment">--zone）</span><br>permanent：永久生效（相当于<span class="hljs-comment">--permanent）</span><br><span class="hljs-keyword">immediate</span>：立即生效（相当于执行了firewall-cmd <span class="hljs-comment">--reload）</span><br>state：防火墙规则状态（enabled | disabled）（必填项）<br>rich_rule：富规则（相当于<span class="hljs-comment">--add-rich-rule=&#x27;&#x27;）</span><br></code></pre></td></tr></table></figure><p><font color='red'>使用案例</font></p><p>1、添加基本规则</p><p>在node1中将http服务进行放行，并关联到public区域中，立即生效且永久生效</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pf">ansible <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span> -m firewalld -a &#x27;zone=public service=http permanent=yes immediate=yes <span class="hljs-keyword">state</span>=enabled&#x27;<br></code></pre></td></tr></table></figure><h2 id="综合练习"><a href="#综合练习" class="headerlink" title="综合练习"></a>综合练习</h2><p>（1）在node01上创建一个用户devops：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ansible node01 -m user -a &quot;name=devops state=present&quot;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/1a13762195dd9eda3aa1c207eea26be0697559838.png" alt="image-20230919211657605"></p><p>（2）在node01上创建一个目录 &#x2F;devops，设置所属组、权限：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">ansible node01 -m file -a &quot;path=/devops state=directory owner=devops group=devops mode=0755&quot;<br> ansible node01 -m shell -a &quot;ls -l /&quot;  <br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/6f69de4a1bbf333276a14cd9b22d51c9697559838.png" alt="image-20230919211756676"></p><p>（3）安装httpd服务，设定开机自启动，验证服务状态为启动：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">ansible node01 -m yum -a &quot;name=httpd state=present&quot;<br>ansible node01 -m service -a &quot;name=httpd state=started enabled=yes&quot;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/ca6ea0131ea78bb2ff9b4df0fadcee0ac3e00dca.png" alt="image-20230912173234830"></p><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/eacb355b580a737ef0200ca208308e816b820fab.png" alt="image-20230912173228899"></p><p>（4）创建一个文件 &#x2F;devops&#x2F;index.html 包含一行内容：DevOps：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ansible node01 -m copy -a &quot;content=&#x27;DevOps\n&#x27; dest=/devops/index.html&quot;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/3a7cdae6ac12bce40515d311bed4bef7697559838.png" alt="image-20230919211916628"></p><p>（5）创建软链接：&#x2F;var&#x2F;www&#x2F;html&#x2F;index.html 到 &#x2F;devops&#x2F;index.html：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ansible node01 -m file -a &quot;src=/devops/index.html dest=/var/www/html/index.html state=link force=true&quot;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/fb52d9476f39adc97718d78aa94d2614697559838.png" alt="image-20230919211928515"></p><p>（6）验证软链接：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ansible node01 -m shell -a &quot;ls -l  /var/www/html/index.html&quot;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/676ec01daa24b66354ce313985dc7ef0697559838.png" alt="image-20230919211941716"></p><p>（7）取消软链接，新建&#x2F;var&#x2F;www&#x2F;html&#x2F;index.html 文档，访问网页：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">ansible node01 -m file -a &quot;path=/var/www/html/index.html state=absent&quot;<br>ansible node01 -m copy -a &quot;content=&#x27;Hello World&#x27; dest=/var/www/html/index.html&quot;<br></code></pre></td></tr></table></figure><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/5062ffb691b5967a099fab28e87928e5697559838.png" alt="image-20230919212000893"></p><p><img src="/../../img/Ansible-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/c1b1c60ac1651b7568b05b1104fef230697559838.png" alt="image-20230919212022836"></p><p>使用浏览器访问<a href="http://192.168.48.101验证主页信息/">http://192.168.48.101验证主页信息</a></p><p><code>可以返回目录！</code></p><p><a href="https://blog.qianyios.top/2023/09/10/ansible/Ansible-%E6%80%BB%E6%89%8B%E5%86%8C/">Ansible练习目录 - 严千屹博客 (qianyios.top)</a></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Ansible</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python环境准备</title>
    <link href="/2023/09/11/python/Python%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/"/>
    <url>/2023/09/11/python/Python%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Python环境准备"><a href="#Python环境准备" class="headerlink" title="Python环境准备"></a>Python环境准备</h1><h2 id="Thonny（首推，自用！！）"><a href="#Thonny（首推，自用！！）" class="headerlink" title="Thonny（首推，自用！！）"></a>Thonny（首推，自用！！）</h2><p>Thonny 由爱沙尼亚的 Tartu 大学开发，它采用了不同的方法，因为它的调试器是专为学习和教学编程而设计的。</p><p>该软件基于python内置图形库tkinter开发，体积小巧，界面直观，支持语法着色、代码自动补全、debug等强劲功能，并具备了一个友好的IDE，为您提供了几个有用的学习工具，所有这些都打包成一个直观的GUI，能够让你更快的熟悉Python编程语言。同时，thonny内置了Python3.7，因此只需要一个简单的安装程序，您就可以学习编程了，可谓称的上是最好的自助服务教学工具。</p><p>官网地址：<a href="https://thonny.org/">Thonny，Python IDE初学者</a></p><h3 id="进入官网下载"><a href="#进入官网下载" class="headerlink" title="进入官网下载"></a>进入官网下载</h3><p><img src="/../../img/Python%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/c8099719e962a1986f0b3477afea6fcfbfe04452.png" alt="image-20230911213459655"></p><p><img src="/../../img/Python%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/6759a1f4d67e3298d0c193e35a60fd204188bfd8.png" alt="image-20230911213655489"></p><h3 id="双击运行"><a href="#双击运行" class="headerlink" title="双击运行"></a>双击运行</h3><p><img src="/../../img/Python%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/3693e61e00196c4b1793c6da94c58e8e8bfc6455.png" alt="image-20230911213731514"></p><p><img src="/../../img/Python%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/e80b8f094dcc85c7166f4501bbf7b800a7000005.png" alt="image-20230911213742866"></p><h3 id="接受安装协议，安装"><a href="#接受安装协议，安装" class="headerlink" title="接受安装协议，安装"></a>接受安装协议，安装</h3><p><font color='red'>请选择一个不带中文的路径存放他</font></p><p>这里的c盘仅做测试</p><p><img src="/../../img/Python%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/7c8b64d86fb9a2e895589168f52b199b46313408.png" alt="image-20230911213952417"></p><h3 id="创建桌面图标"><a href="#创建桌面图标" class="headerlink" title="创建桌面图标"></a>创建桌面图标</h3><p><img src="/../../img/Python%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/a5c15b9f02c7fefbe07ffc0d9209be056fd79212.png" alt="image-20230911213946121"></p><h3 id="选择中文"><a href="#选择中文" class="headerlink" title="选择中文"></a>选择中文</h3><p><img src="/../../img/Python%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/ec46eaeb9444c467ebd7bd2c720a25927d4d8ea4.png" alt="image-20230911214016041"></p><h3 id="安装成功"><a href="#安装成功" class="headerlink" title="安装成功"></a>安装成功</h3><p><img src="/../../img/Python%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/ccf69f4daeb9b05d21cd0bd9af7648651c37daf3.png" alt="image-20230911214038572"></p><h2 id="Centos7部署Python"><a href="#Centos7部署Python" class="headerlink" title="Centos7部署Python"></a>Centos7部署Python</h2><p>在 CentOS 7.9 上安装 Python，你可以使用 yum 包管理器和 EPEL 存储库来完成。以下是安装的步骤：</p><ol><li>首先，确保你的系统已经安装了 EPEL 存储库。EPEL 是一个额外的软件源，提供了许多额外的软件包。如果你的系统尚未安装 EPEL 存储库，可以使用以下命令安装它：</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">sudo yum <span class="hljs-keyword">update</span> <span class="hljs-operator">-</span>y<br>sudo yum install epel<span class="hljs-operator">-</span><span class="hljs-keyword">release</span><br></code></pre></td></tr></table></figure><p><font color='red'>自选版本</font></p><ol start="2"><li>安装 Python 3：CentOS 7 默认使用 Python 2.7，但是你可以安装 Python 3。使用以下命令安装 Python 3：</li></ol><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo yum <span class="hljs-keyword">install</span> python3<br></code></pre></td></tr></table></figure><ol start="3"><li>安装 Python 2：如果你还需要安装 Python 2，可以使用以下命令安装：</li></ol><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo yum <span class="hljs-keyword">install</span> python2<br></code></pre></td></tr></table></figure><ol start="4"><li>验证安装：安装完成后，你可以使用以下命令验证 Python 的安装：</li></ol><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python3</span> --<span class="hljs-keyword">version</span><br>python2 --<span class="hljs-keyword">version</span><br></code></pre></td></tr></table></figure><p>这些命令将显示安装的 Python 版本号，确认安装成功。</p><h3 id="使用python"><a href="#使用python" class="headerlink" title="使用python"></a>使用python</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">python</span><br></code></pre></td></tr></table></figure><h2 id="Pycham"><a href="#Pycham" class="headerlink" title="Pycham"></a>Pycham</h2><p>这里不介绍安装教程，</p><p>官网地址<a href="https://www.jetbrains.com/zh-cn/pycharm/">PyCharm：JetBrains为专业开发者提供的Python IDE</a></p><p><font color='red'>返回总目录</font></p><p><a href="https://blog.qianyios.top/2023/09/11/python/Python-%E6%80%BB%E6%89%8B%E5%86%8C/">Python-总手册 - 严千屹博客 (qianyios.top)</a></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python程序手册</title>
    <link href="/2023/09/11/python/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/"/>
    <url>/2023/09/11/python/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Python程序手册"><a href="#Python程序手册" class="headerlink" title="Python程序手册"></a>Python程序手册</h1><h2 id="Python程序基础"><a href="#Python程序基础" class="headerlink" title="Python程序基础"></a>Python程序基础</h2><h3 id="初识Python程序"><a href="#初识Python程序" class="headerlink" title="初识Python程序"></a>初识Python程序</h3><p>新建一个hello.py</p><p><img src="/../../img/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/be107876f089bb105714edeb908e55abfcda36e7.png" alt="image-20230911221032751">→<img src="/../../img/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/23da562133d5d5abda87fe9795d3c3ea1df500d9.png" alt="image-20230911221044375"> </p><p>打开输入代码→运行</p><p><img src="/../../img/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/f0141934281be1baa7c85c7518c754bd7c169225.png" alt="image-20230911220949326"></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">#格式</span><br><span class="hljs-attribute">print</span>(输出项<span class="hljs-number">1</span>,输出项<span class="hljs-number">2</span>,······)<br></code></pre></td></tr></table></figure><p>每个输出项可以是数值，字符串等</p><h3 id="Python程序风格"><a href="#Python程序风格" class="headerlink" title="Python程序风格"></a>Python程序风格</h3><p>一个程序往往有输入输出语句，还带有逻辑判断，现在介绍一个程序</p><p>例2.1 输入一个数，计算平方根</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import math<br><span class="hljs-attribute">s</span>=input(&quot;请输入一个数：&quot;)<br><span class="hljs-attribute">s</span>=float(s)<br><span class="hljs-keyword">if</span> s&gt;=0:<br>    <span class="hljs-attribute">s</span>=math.sqrt(s)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;平方根是：&quot;</span>,s)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;负数不是平方根&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The End&quot;</span>)<br></code></pre></td></tr></table></figure><p>在这可以很清晰看到python程序的风格，不会像c语言，需要先声明变量类型，才可以使用</p><p>如：</p><p>c语言：(可以看见没行语句，需要一个<font color='red'>分号</font>)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> s</span><br><span class="hljs-function"><span class="hljs-title">printf</span><span class="hljs-params">(<span class="hljs-string">&quot;请输入一个数:&quot;</span>)</span></span>;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;s);<br></code></pre></td></tr></table></figure><blockquote><p><font color='red'>在这显得python更加简单快捷</font></p></blockquote><p><img src="/../../img/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/3517eb301ba0893c47a45d706a69832457a8fb91.png" alt="image-20230911222208194"></p><h4 id="开始分解"><a href="#开始分解" class="headerlink" title="开始分解"></a>开始分解</h4><ol><li>输入语句</li></ol><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">s</span><span class="hljs-operator">=</span>input(<span class="hljs-string">&quot;请输入一个数：&quot;</span>)<br></code></pre></td></tr></table></figure><p>此时输入4之后，会存入到s，<font color='red'>但是此时的s是个字符串，还不是数值，不能进行计算，需要转换类型</font></p><ol start="2"><li>转化类型</li></ol><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">s</span><span class="hljs-operator">=</span>float(s)<br></code></pre></td></tr></table></figure><p>在这，需要将s（字符串）转化为实数，才可以计算</p><ol start="3"><li>缩进</li></ol><p>要注意缩进量，否则代码会串行</p><p><img src="/../../img/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/19d939fc05daa6e3edbc5d6daacfe2655649fb3a.png" alt="image-20230911223018053"></p><p><font color='red'>如：</font></p><p><font color='red'>错误代码：</font></p><p><img src="/../../img/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/774e6e9ba7c39b3e91bbf630cd75ecd8ff4b53ac.png" alt="image-20230911223124209"></p><p>正确显示结果：</p><p><img src="/../../img/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/c7d90cc45856724a926dec270e52bfb0b71df666.png" alt="image-20230911223204576"></p><p>通过之前修改代码变成else的语句之后，就没显示了，</p><p><img src="/../../img/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/a2ba8b96b8ba4a661030846962909c1f29633d26.png" alt="image-20230911223230379"></p><p>必须输入负数之后才显示出来</p><p><img src="/../../img/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/647fd0495ae122968576879b645ed79277f45d22.png" alt="image-20230911223314908"></p><p>所以要注意缩进量</p><h3 id="Python注释"><a href="#Python注释" class="headerlink" title="Python注释"></a>Python注释</h3><p>在 Python 中，注释用于在代码中添加解释、说明或提供文档。Python 支持两种类型的注释：单行注释和多行注释。</p><ol><li>单行注释：以 <code>#</code> 开头，用于在一行中添加注释。</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 这是一个单行注释</span><br></code></pre></td></tr></table></figure><ol start="2"><li>多行注释：用三个单引号 <code>&#39;&#39;&#39;</code> 或三个双引号 <code>&quot;&quot;&quot;</code> 包围的多行文本，用于添加多行注释。</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">这是一个多行注释。</span><br><span class="hljs-string">可以在这里添加多行的说明。</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><p>或者</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">这是一个多行注释。</span><br><span class="hljs-string">可以在这里添加多行的说明。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br></code></pre></td></tr></table></figure><p>注释是非常有用的工具，可以提高代码的可读性和可维护性。它们可以用于解释代码的目的、算法、参数、返回值等信息，使其他人更容易理解和使用你的代码。</p><p>请注意，注释不会被 Python 解释器执行，它们只是用于代码的解释和文档目的。在运行程序时，注释部分会被忽略。</p><h3 id="Python数据类型"><a href="#Python数据类型" class="headerlink" title="Python数据类型"></a>Python数据类型</h3><h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><h5 id="常量："><a href="#常量：" class="headerlink" title="常量："></a>常量：</h5><p>Python 中有许多内置的数据类型，用于存储和操作不同类型的数据。下面是 Python 的一些常见数据类型：</p><ol><li>整数（int）：用于表示整数值，例如 <code>42</code>、<code>-10</code>、<code>0</code> 等。</li><li>浮点数（float）：用于表示带有小数部分的数值，例如 <code>3.14</code>、<code>-0.5</code> 等。</li><li>字符串（str）：用于表示文本数据，由一系列字符组成，例如 <code>&quot;Hello, World!&quot;</code>、<code>&#39;Python&#39;</code> 等。</li><li>列表（list）：用于存储多个有序的元素，可以包含不同类型的数据，例如 <code>[1, 2, 3]</code>、<code>[&#39;apple&#39;, &#39;banana&#39;, &#39;cherry&#39;]</code> 等。</li></ol><h5 id="变量："><a href="#变量：" class="headerlink" title="变量："></a>变量：</h5><ol><li>变量命名规则：</li></ol><ul><li>变量名由字母、数字和下划线组成。</li><li>变量名必须以字母或下划线开头，不能以<font color='red'>数字</font>开头。</li><li>变量名区分大小写，例如 <code>count</code> 和 <code>Count</code> 是不同的变量名。</li><li>避免使用 Python 的关键字（如 <code>if</code>、<code>for</code>、<code>while</code> 等）作为变量名。</li><li>建议使用有意义的变量名，以提高代码的可读性。</li></ul><ol start="2"><li>变量赋值：</li></ol><ul><li>使用赋值运算符 <code>=</code> 将一个值赋给一个变量。</li><li>变量在首次赋值时被创建，并根据赋值的值确定其数据类型。</li><li>可以将不同类型的数据赋给同一个变量，变量的类型会随着赋值而改变。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">42</span>  <span class="hljs-comment"># 整数</span><br>y = <span class="hljs-number">3.14</span>  <span class="hljs-comment"># 浮点数</span><br>name = <span class="hljs-string">&quot;Alice&quot;</span>  <span class="hljs-comment"># 字符串</span><br></code></pre></td></tr></table></figure><ol start="3"><li>变量使用：</li></ol><ul><li>可以使用变量名来访问存储在变量中的值。</li><li>可以在表达式中使用变量，并对其进行操作。</li><li>变量的值可以随时改变，可以重新赋值给同一个变量。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">10</span><br>y = x + <span class="hljs-number">5</span><br><span class="hljs-built_in">print</span>(y)  <span class="hljs-comment"># 输出：15</span><br><br>x = <span class="hljs-number">20</span><br><span class="hljs-built_in">print</span>(x)  <span class="hljs-comment"># 输出：20</span><br></code></pre></td></tr></table></figure><p>变量在 Python 中是一种非常重要的概念，它们允许我们存储和操作数据。通过合理使用变量，可以使代码更灵活、可读性更好，并且可以减少重复代码。</p><h4 id="数据类型的转换"><a href="#数据类型的转换" class="headerlink" title="数据类型的转换"></a>数据类型的转换</h4><p>1.数值转换字符串</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">a</span>=<span class="hljs-number">1</span><br><span class="hljs-attr">b</span>=<span class="hljs-number">1.2</span><br><span class="hljs-attr">x</span>=str(a)<br><span class="hljs-attr">y</span>=str(b)<br><span class="hljs-comment">#此时，要是输出，他们在系统中是带引号的字符串</span><br><span class="hljs-comment">#  &quot;1&quot;,&quot;1.2&quot;</span><br></code></pre></td></tr></table></figure><p>2.字符串转换数值</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">a</span>=<span class="hljs-string">&quot;1&quot;</span><br><span class="hljs-attr">b</span>=<span class="hljs-string">&quot;1.2&quot;</span><br><span class="hljs-attr">x</span>=int(a)<br><span class="hljs-attr">y</span>=float(b)  <span class="hljs-comment">#实数（带小数）</span><br><span class="hljs-comment">#此时，要是输出，他们在系统中是数值</span><br><span class="hljs-comment">#  1,1.2</span><br></code></pre></td></tr></table></figure><p><font color='red'>错误形态：</font></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">s</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;1a&quot;</span><br><span class="hljs-attribute">a</span><span class="hljs-operator">=</span>int(s)<br></code></pre></td></tr></table></figure><p>在这种情况下，字符串 <code>&quot;1a&quot;</code> 包含了字母 <code>&quot;a&quot;</code>，因此无法将其转换为整数。如果你想要将一个合法的整数字符串转换为整数，确保字符串只包含数字字符。</p><h4 id="整数格式化输出"><a href="#整数格式化输出" class="headerlink" title="整数格式化输出"></a>整数格式化输出</h4><ol><li>使用 <code>format()</code> 方法格式化输出整数的示例：</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">10</span><br>y = <span class="hljs-number">20</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x: &#123;&#125;, y: &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(x, y))<br></code></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">x</span>: <span class="hljs-number">10</span>, y: <span class="hljs-number">20</span><br></code></pre></td></tr></table></figure><p>在这个示例中，我们使用了 <code>&quot;x: &#123;&#125;, y: &#123;&#125;&quot;</code> 这个字符串作为格式化模板。在模板中的 <code>&#123;&#125;</code> 部分会被 <code>format()</code> 方法中的参数依次替换。</p><ol start="2"><li>使用 f-string。下面是使用 f-string 格式化输出整数的示例：</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">10</span><br>y = <span class="hljs-number">20</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;x: <span class="hljs-subst">&#123;x&#125;</span>, y: <span class="hljs-subst">&#123;y&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><p>输出结果也是：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">x</span>: <span class="hljs-number">10</span>, y: <span class="hljs-number">20</span><br></code></pre></td></tr></table></figure><p>在这个示例中，我们在字符串前面加上了 <code>f</code>，然后在字符串中使用花括号 <code>&#123;&#125;</code> 来引用变量。</p><p><img src="/../../img/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/f624bcf9ec2c15c1f787856894b11bf23ece130d.png" alt="image-20230911230031082"></p><ol start="3"><li>使用使用 <code>%</code> 符号进行格式化输出整数的示例：</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">10</span><br>y = <span class="hljs-number">20</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x: %d, y: %d&quot;</span> % (x, y))<br></code></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">x</span>: <span class="hljs-number">10</span>, y: <span class="hljs-number">20</span><br></code></pre></td></tr></table></figure><p>在这个示例中，我们使用了 <code>&quot;x: %d, y: %d&quot;</code> 这个字符串作为格式化模板。<code>%d</code> 是整数的占位符。然后，我们将要格式化的整数值 <code>(x, y)</code> 作为元组传递给 <code>%</code> 运算符。</p><p>例：1.4.3.1输出年月日</p><p><img src="/../../img/Python%E7%A8%8B%E5%BA%8F%E6%89%8B%E5%86%8C/5c31f48eaab585c33f0ddd127b4e042f92ccf368.png" alt="image-20230911225550413"></p><h4 id="浮点数格式化输出"><a href="#浮点数格式化输出" class="headerlink" title="浮点数格式化输出"></a>浮点数格式化输出</h4><p>使用 <code>%</code> 符号配合格式化字符串来实现。下面是一个示例代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">num = <span class="hljs-number">3.14159</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;浮点数：%.2f&quot;</span> % num)<br></code></pre></td></tr></table></figure><p>在这个示例中，<code>%.2f</code> 是浮点数的格式化字符串。<code>%</code> 符号后的 <code>.2f</code> 表示将浮点数保留两位小数进行输出。如果要保留更多或更少的小数位数，只需相应地调整数字即可。</p><p>输出结果为：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">浮点数：3.14<br></code></pre></td></tr></table></figure><p>这样就实现了将浮点数格式化输出并保留指定小数位数。</p><h3 id="Python表达式"><a href="#Python表达式" class="headerlink" title="Python表达式"></a>Python表达式</h3><table><thead><tr><th>类别</th><th>运算符</th><th>描述</th><th>实例</th></tr></thead><tbody><tr><td>算术运算符</td><td>+</td><td>加法</td><td>2 + 3 &#x3D; 5</td></tr><tr><td></td><td>-</td><td>减法</td><td>5 - 2 &#x3D; 3</td></tr><tr><td></td><td>*</td><td>乘法</td><td>2 * 3 &#x3D; 6</td></tr><tr><td></td><td>&#x2F;</td><td>除法</td><td>6 &#x2F; 2 &#x3D; 3</td></tr><tr><td></td><td>%</td><td>取模（取余数）</td><td>7 % 3 &#x3D; 1</td></tr><tr><td></td><td>**</td><td>幂运算</td><td>2 ** 3 &#x3D; 8</td></tr><tr><td></td><td>&#x2F;&#x2F;</td><td>整除（取商的整数部分）</td><td>7 &#x2F;&#x2F; 3 &#x3D; 2</td></tr><tr><td>赋值运算符</td><td>&#x3D;</td><td>赋值</td><td>x &#x3D; 5</td></tr><tr><td></td><td>+&#x3D;</td><td>加法赋值</td><td>x +&#x3D; 3 （等价于 x &#x3D; x + 3）</td></tr><tr><td></td><td>-&#x3D;</td><td>减法赋值</td><td>x -&#x3D; 2 （等价于 x &#x3D; x - 2）</td></tr><tr><td></td><td>*&#x3D;</td><td>乘法赋值</td><td>x *&#x3D; 2 （等价于 x &#x3D; x * 2）</td></tr><tr><td></td><td>&#x2F;&#x3D;</td><td>除法赋值</td><td>x &#x2F;&#x3D; 4 （等价于 x &#x3D; x &#x2F; 4）</td></tr><tr><td></td><td>%&#x3D;</td><td>取模赋值</td><td>x %&#x3D; 3 （等价于 x &#x3D; x % 3）</td></tr><tr><td>比较运算符</td><td>&#x3D;&#x3D;</td><td>等于</td><td>3 &#x3D;&#x3D; 3 （返回 True）</td></tr><tr><td></td><td>!&#x3D;</td><td>不等于</td><td>2 !&#x3D; 3 （返回 True）</td></tr><tr><td></td><td>&gt;</td><td>大于</td><td>5 &gt; 2 （返回 True）</td></tr><tr><td></td><td>&lt;</td><td>小于</td><td>2 &lt; 5 （返回 True）</td></tr><tr><td></td><td>&gt;&#x3D;</td><td>大于等于</td><td>5 &gt;&#x3D; 5 （返回 True）</td></tr><tr><td></td><td>&lt;&#x3D;</td><td>小于等于</td><td>2 &lt;&#x3D; 5 （返回 True）</td></tr><tr><td>逻辑运算符</td><td>and</td><td>与</td><td>True and False （返回 False）两者为真才为真</td></tr><tr><td></td><td>or</td><td>或</td><td>True or False （返回 True）一个为真就为真</td></tr><tr><td></td><td>not</td><td>非</td><td>not True （返回 False）</td></tr><tr><td>成员运算符</td><td>in</td><td>存在于</td><td>2 in [1, 2, 3] （返回 True）</td></tr><tr><td></td><td>not in</td><td>不存在于</td><td>4 not in [1, 2, 3] （返回 True）</td></tr><tr><td>身份运算符</td><td>is</td><td>是</td><td>x is None （返回 True，如果 x 为 None）</td></tr><tr><td></td><td>is not</td><td>不是</td><td>x is not None （返回 True，如果 x 不为 None）</td></tr></tbody></table><p><font color='red'>返回总目录</font></p><p><a href="https://blog.qianyios.top/2023/09/11/python/Python-%E6%80%BB%E6%89%8B%E5%86%8C/">Python-总手册 - 严千屹博客 (qianyios.top)</a></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ansible-配置及相关指令</title>
    <link href="/2023/09/10/ansible/Ansible-%E9%85%8D%E7%BD%AE%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%8C%87%E4%BB%A4/"/>
    <url>/2023/09/10/ansible/Ansible-%E9%85%8D%E7%BD%AE%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%8C%87%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Ansible配置及相关指令"><a href="#Ansible配置及相关指令" class="headerlink" title="Ansible配置及相关指令"></a>Ansible配置及相关指令</h1><h2 id="ansible-程序结构"><a href="#ansible-程序结构" class="headerlink" title="ansible 程序结构"></a>ansible 程序结构</h2><p>安装目录如下(yum安装)：<br>　　配置文件目录：&#x2F;etc&#x2F;ansible&#x2F;<br>　　执行文件目录：&#x2F;usr&#x2F;bin&#x2F;<br>　　Lib库依赖目录：&#x2F;usr&#x2F;lib&#x2F;pythonX.X&#x2F;site-packages&#x2F;ansible&#x2F;<br>　　Help文档目录：&#x2F;usr&#x2F;share&#x2F;doc&#x2F;ansible-X.X.X&#x2F;<br>　　Man文档目录：&#x2F;usr&#x2F;share&#x2F;man&#x2F;man1&#x2F;</p><h2 id="ansible配置文件查找顺序"><a href="#ansible配置文件查找顺序" class="headerlink" title="ansible配置文件查找顺序"></a>ansible配置文件查找顺序</h2><p>ansible与我们其他的服务在这一点上有很大不同，这里的配置文件查找是从多个地方找的，顺序如下：</p><ol><li><p>检查环境变量<code>ANSIBLE_CONFIG</code>指向的路径文件<br>(export ANSIBLE_CONFIG&#x3D;&#x2F;etc&#x2F;ansible.cfg)；</p></li><li><p><code>~/.ansible.cfg</code>，检查当前目录下的ansible.cfg配置文件；</p></li><li><p><code>/etc/ansible.cfg</code>检查etc目录的配置文件。</p></li></ol><h2 id="ansible配置文件"><a href="#ansible配置文件" class="headerlink" title="ansible配置文件"></a>ansible配置文件</h2><p>　ansible 的配置文件为<code>/etc/ansible/ansible.cfg</code>，ansible 有许多参数，下面我们列出一些常见的参数：</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs clean">[defaults]<br> <br>#inventory      = /etc/ansible/hosts   <span class="hljs-comment">//定义Inventory</span><br>#library        = /usr/share/my_modules/  <span class="hljs-comment">//自定义lib库存放目录 </span><br>#remote_tmp     = ~/.ansible/tmp       <span class="hljs-comment">//零时文件远程主机存放目录</span><br>#local_tmp      = ~/.ansible/tmp       <span class="hljs-comment">//零时文件本地存放目录</span><br>#forks          = <span class="hljs-number">5</span>                    <span class="hljs-comment">//默认开启的并发数</span><br>#poll_interval  = <span class="hljs-number">15</span>                   <span class="hljs-comment">//默认轮询时间间隔</span><br>#sudo_user      = root                 <span class="hljs-comment">//默认sudo用户</span><br>#ask_sudo_pass = <span class="hljs-literal">True</span>                  <span class="hljs-comment">//是否需要sudo密码</span><br>#ask_pass      = <span class="hljs-literal">True</span>                  <span class="hljs-comment">//是否需要密码</span><br>#host_key_checking = <span class="hljs-literal">False</span>             <span class="hljs-comment">//首次连接是否检查key认证</span><br>#roles_path    = /etc/ansible/roles    <span class="hljs-comment">//默认下载的Roles存放的目录</span><br>#log_path = /var/log/ansible.log       <span class="hljs-comment">//执行日志存放目录</span><br>#module_name = command                 <span class="hljs-comment">//默认执行的模块</span><br>#action_plugins     = /usr/share/ansible/plugins/action <span class="hljs-comment">//action插件存放目录</span><br>#callback_plugins   = /usr/share/ansible/plugins/callback <span class="hljs-comment">//callback插件存放目录</span><br>#connection_plugins = /usr/share/ansible/plugins/connection  <span class="hljs-comment">//connection插件存放目录</span><br>#lookup_plugins     = /usr/share/ansible/plugins/lookup <span class="hljs-comment">//lookup插件存放目录</span><br>#vars_plugins       = /usr/share/ansible/plugins/vars <span class="hljs-comment">//vars插件存放目录</span><br>#filter_plugins     = /usr/share/ansible/plugins/filter <span class="hljs-comment">//filter插件存放目录</span><br>#test_plugins       = /usr/share/ansible/plugins/test <span class="hljs-comment">//test插件存放目录</span><br>#strategy_plugins   = /usr/share/ansible/plugins/strategy <span class="hljs-comment">//strategy插件存放目录</span><br>#fact_caching = memory                 <span class="hljs-comment">//getfact缓存的主机信息存放方式</span><br>#retry_files_enabled = <span class="hljs-literal">False</span>              <br>#retry_files_save_path = ~/.ansible-retry  <span class="hljs-comment">//错误重启文件存放目录</span><br></code></pre></td></tr></table></figure><h3 id="配置文件的分类与优先级"><a href="#配置文件的分类与优先级" class="headerlink" title="配置文件的分类与优先级"></a>配置文件的分类与优先级</h3><p>Ansible只有一个配置文件ansible.cfg，但配置文件可以存在不同的位置，并且只有一个可用 (数字代表优先级，数字越小代表优先级越高) :</p><p><img src="/../../img/Ansible-%E9%85%8D%E7%BD%AE%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%8C%87%E4%BB%A4/3e62e0f58987c36f1c281e569f0ef32e54050a02.png" alt="image-20230912232830688"></p><h3 id="配置文件选项"><a href="#配置文件选项" class="headerlink" title="配置文件选项"></a>配置文件选项</h3><p><img src="/../../img/Ansible-%E9%85%8D%E7%BD%AE%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%8C%87%E4%BB%A4/95f5be24e45da5da859f5a8acc399b4db58d07ce.png" alt="image-20230912232950364"></p><p><img src="/../../img/Ansible-%E9%85%8D%E7%BD%AE%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%8C%87%E4%BB%A4/1d9d44369615e84436eb8b2eaf128ea95ad99951.png" alt="image-20230912233003740"></p><p><img src="/../../img/Ansible-%E9%85%8D%E7%BD%AE%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%8C%87%E4%BB%A4/adfcdc9386fa5b860378d83e6951e4a2f0c593ac.png" alt="image-20230912233019308"></p><p>官网配置参考网址</p><p><a href="https://docs.ansible.com/ansible/2.9/reference_appendices/config.html">Ansible Configuration Settings — Ansible Documentation</a></p><p><img src="/../../img/Ansible-%E9%85%8D%E7%BD%AE%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%8C%87%E4%BB%A4/d2f0fbdcae4790300822cc6874ca63a9006fb7cf.png" alt="image-20230912233124916"></p><h2 id="ansuble主机清单"><a href="#ansuble主机清单" class="headerlink" title="ansuble主机清单"></a>ansuble主机清单</h2><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs clean"><span class="hljs-number">1</span>、 定义单独主机：<br>## green.example.com#<br># blue.example.com#<br># <span class="hljs-number">192.168</span><span class="hljs-number">.100</span><span class="hljs-number">.1</span><br># <span class="hljs-number">192.168</span><span class="hljs-number">.100</span><span class="hljs-number">.10</span><br><span class="hljs-number">2</span>、 定义一个主机组[组名]把地址或主机名加进去<br>[mysql_test]<br><span class="hljs-number">192.168</span><span class="hljs-number">.253</span><span class="hljs-number">.159</span><br><span class="hljs-number">192.168</span><span class="hljs-number">.253</span><span class="hljs-number">.160</span><br><span class="hljs-number">192.168</span><span class="hljs-number">.253</span><span class="hljs-number">.153</span><br></code></pre></td></tr></table></figure><p>需要注意的是，这里的<code>组成员可以使用通配符来匹配</code>，这样对于一些标准化的管理来说就很轻松方便了。<br>　　我们可以根据实际情况来配置我们的主机列表，具体操作如下：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs csharp">[<span class="hljs-meta">root@server ~</span>]<span class="hljs-meta"># vim /etc/ansible/hosts</span><br>[<span class="hljs-meta">web</span>]<br><span class="hljs-number">192.168</span><span class="hljs-number">.37</span><span class="hljs-number">.122</span><br><span class="hljs-number">192.168</span><span class="hljs-number">.37</span><span class="hljs-number">.133</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-number">3</span>、 定义嵌套组<br>    <span class="hljs-selector-attr">[web-mysql]</span><br>       mysql_test<br>       web<br><span class="hljs-number">4</span>、 定义范围化ip<br>    <span class="hljs-number">172.16</span>.<span class="hljs-selector-attr">[0:4]</span>.<span class="hljs-selector-attr">[2:254]</span>  <br></code></pre></td></tr></table></figure><h2 id="ansible-常用命令"><a href="#ansible-常用命令" class="headerlink" title="ansible 常用命令"></a>ansible 常用命令</h2><blockquote><p><code>/usr/bin/ansible</code>　　Ansibe AD-Hoc 临时命令执行工具，常用于临时命令的执行<br><code>/usr/bin/ansible-doc</code> 　Ansible 模块功能查看工具<br><code>/usr/bin/ansible-galaxy</code>　　下载&#x2F;上传优秀代码或Roles模块 的官网平台，基于网络的<br><code>/usr/bin/ansible-playbook</code>　　Ansible 定制自动化的任务集编排工具<br><code>/usr/bin/ansible-pull</code>　　Ansible远程执行命令的工具，拉取配置而非推送配置（使用较少，海量机器时使用，对运维的架构能力要求较高）<br><code>/usr/bin/ansible-vault</code>　　Ansible 文件加密工具<br><code>/usr/bin/ansible-console</code>　　Ansible基于Linux Consoble界面可与用户交互的命令执行工具</p></blockquote><p>　　其中，我们比较常用的是<code>/usr/bin/ansible</code>和<code>/usr/bin/ansible-playbook</code>。</p><h3 id="ansible-命令详解"><a href="#ansible-命令详解" class="headerlink" title="ansible 命令详解"></a>ansible 命令详解</h3><p>命令的具体格式如下：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">ansible &lt;host-pattern&gt; <span class="hljs-selector-attr">[-f forks]</span> <span class="hljs-selector-attr">[-m module_name]</span> <span class="hljs-selector-attr">[-a args]</span><br></code></pre></td></tr></table></figure><p>　　也可以通过<code>ansible -h</code>来查看帮助，下面我们列出一些比较常用的选项，并解释其含义：</p><blockquote><p><code>-a MODULE_ARGS</code>　　　#模块的参数，如果执行默认COMMAND的模块，即是命令参数，如： “date”，“pwd”等等<br><code>-k</code>，<code>--ask-pass</code> #ask for SSH password。登录密码，提示输入SSH密码而不是假设基于密钥的验证<br><code>--ask-su-pass</code> #ask for su password。su切换密码<br><code>-K</code>，<code>--ask-sudo-pass</code> #ask for sudo password。提示密码使用sudo，sudo表示提权操作<br><code>--ask-vault-pass</code> #ask for vault password。假设我们设定了加密的密码，则用该选项进行访问<br><code>-B SECONDS</code> #后台运行超时时间<br><code>-C</code> #模拟运行环境并进行预运行，可以进行查错测试<br><code>-c CONNECTION</code> #连接类型使用<br><code>-f FORKS</code> #并行任务数，默认为5<br><code>-i INVENTORY</code> #指定主机清单的路径，默认为<code>/etc/ansible/hosts</code><br><code>--list-hosts</code> #查看有哪些主机组<br><code>-m MODULE_NAME</code> #执行模块的名字，默认使用 command 模块，所以如果是只执行单一命令可以不用 -m参数<br><code>-o</code> #压缩输出，尝试将所有结果在一行输出，一般针对收集工具使用<br><code>-S</code> #用 su 命令<br><code>-R SU_USER</code> #指定 su 的用户，默认为 root 用户<br><code>-s</code> #用 sudo 命令<br><code>-U SUDO_USER</code> #指定 sudo 到哪个用户，默认为 root 用户<br><code>-T TIMEOUT</code> #指定 ssh 默认超时时间，默认为10s，也可在配置文件中修改<br><code>-u REMOTE_USER</code> #远程用户，默认为 root 用户<br><code>-v</code> #查看详细信息，同时支持<code>-vvv</code>，<code>-vvvv</code>可查看更详细信息</p></blockquote><h2 id="ansible-配置公私钥"><a href="#ansible-配置公私钥" class="headerlink" title="ansible 配置公私钥"></a>ansible 配置公私钥</h2><p>　　上面我们已经提到过 ansible 是基于 ssh 协议实现的，所以其配置公私钥的方式与 ssh 协议的方式相同，具体操作步骤如下：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-meta">#1.生成私钥</span><br>[<span class="hljs-meta">root@server ~</span>]<span class="hljs-meta"># ssh-keygen </span><br><span class="hljs-meta">#2.向主机分发私钥</span><br>[<span class="hljs-meta">root@server ~</span>]<span class="hljs-meta"># ssh-copy-id root@192.168.48.101</span><br>[<span class="hljs-meta">root@server ~</span>]<span class="hljs-meta"># ssh-copy-id root@192.168.48.102</span><br></code></pre></td></tr></table></figure><p><code>192.168.48.101为node01的ip地址</code></p><p>这样的话，就可以实现无密码登录，我们的实验过程也会顺畅很多。<br>　　注意，如果出现了一下报错：</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">-bash: ssh-<span class="hljs-keyword">copy</span><span class="language-bash">-<span class="hljs-built_in">id</span>: <span class="hljs-built_in">command</span> not found</span><br></code></pre></td></tr></table></figure><p>　　那么就证明我们需要安装一个包：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">yum -y install openssh<br></code></pre></td></tr></table></figure><p>　　把包安装上即可。</p><p>注意：先ssh 192.168.48.101和ssh 192.168.48.102各节点，生成缓存信息，才能进行<code>主机连通性测试</code></p><h2 id="ansible-常用模块"><a href="#ansible-常用模块" class="headerlink" title="ansible 常用模块"></a>ansible 常用模块</h2><h3 id="主机连通性测试"><a href="#主机连通性测试" class="headerlink" title="主机连通性测试"></a>主机连通性测试</h3><p>　　我们使用<code>ansible web -m ping</code>命令来进行主机连通性测试，效果如下：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ruby">[root<span class="hljs-variable">@server</span> ~]<span class="hljs-comment"># ansible web -m ping</span><br><span class="hljs-meta prompt_">192.168.48.101 | SUCCESS =&gt;</span> &#123;<br>    <span class="hljs-string">&quot;changed&quot;</span>: <span class="hljs-literal">false</span>, <br>    <span class="hljs-string">&quot;ping&quot;</span>: <span class="hljs-string">&quot;pong&quot;</span><br>&#125;<br><span class="hljs-meta prompt_">192.168.48.102 | SUCCESS =&gt;</span> &#123;<br>    <span class="hljs-string">&quot;changed&quot;</span>: <span class="hljs-literal">false</span>, <br>    <span class="hljs-string">&quot;ping&quot;</span>: <span class="hljs-string">&quot;pong&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>　　这样就说明我们的主机是连通状态的。接下来的操作才可以正常进行。</p><p><code>可以返回目录！</code></p><p><a href="https://blog.qianyios.top/2023/09/10/ansible/Ansible-%E6%80%BB%E6%89%8B%E5%86%8C/">Ansible练习目录 - 严千屹博客 (qianyios.top)</a></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>Ansible</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>用户级ansible环境构建</title>
    <link href="/2023/09/10/ansible/%E7%94%A8%E6%88%B7%E7%BA%A7ansible%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA/"/>
    <url>/2023/09/10/ansible/%E7%94%A8%E6%88%B7%E7%BA%A7ansible%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="用户级ansible环境构建"><a href="#用户级ansible环境构建" class="headerlink" title="用户级ansible环境构建"></a>用户级ansible环境构建</h1><h2 id="主机分布"><a href="#主机分布" class="headerlink" title="主机分布"></a>主机分布</h2><table><thead><tr><th>主机名</th><th>ip</th><th>系统</th><th>内存</th><th>硬盘</th></tr></thead><tbody><tr><td>controller</td><td>192.168.48.100</td><td>Centos7.9</td><td>4G</td><td>100G</td></tr><tr><td>node01</td><td>192.168.48.101</td><td>Centos7.9</td><td>4G</td><td>100G</td></tr><tr><td>node02</td><td>192.168.48.102</td><td>Centos7.9</td><td>4G</td><td>100G</td></tr></tbody></table><h2 id="创建student用户"><a href="#创建student用户" class="headerlink" title="创建student用户"></a>创建student用户</h2><p><font color='red'>三台机创建student用户</font></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment">#创建student用户</span><br><span class="hljs-attribute">useradd</span> student<br>passwd student<br><span class="hljs-number">123456</span><br></code></pre></td></tr></table></figure><h2 id="controller创建student用户工作目录"><a href="#controller创建student用户工作目录" class="headerlink" title="controller创建student用户工作目录"></a>controller创建student用户工作目录</h2><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">#切换student用户，创建工作目录，新建ansible.cfg配置文件，验证配置文件生效。<br>su student<br>cd <br>#创建资产清单 <br>mkdir ansible<br>cat &gt;&gt; /home/student/ansible/inventory &lt;&lt;EOF<br><span class="hljs-string">[servers]</span><br><span class="hljs-number">192.168.48.101</span><br><span class="hljs-number">192.168.48.102</span><br>EOF<br></code></pre></td></tr></table></figure><h2 id="controller编辑配置文件ansible-cfg"><a href="#controller编辑配置文件ansible-cfg" class="headerlink" title="controller编辑配置文件ansible.cfg"></a>controller编辑配置文件ansible.cfg</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd ansible<br>cat &gt;&gt; <span class="hljs-regexp">/home/</span>student<span class="hljs-regexp">/ansible/</span>ansible.cfg &lt;&lt;EOF<br>[defaults]<br>inventory=<span class="hljs-regexp">/home/</span>student<span class="hljs-regexp">/ansible/i</span>nventory<br>remote_port=<span class="hljs-number">22</span><br>remote_user=root<br><span class="hljs-comment">#指定远程用户为root</span><br>ask_pass=True<br>EOF<br></code></pre></td></tr></table></figure><h2 id="验证清单主机存活（指定root）"><a href="#验证清单主机存活（指定root）" class="headerlink" title="验证清单主机存活（指定root）"></a>验证清单主机存活（指定root）</h2><p>验证清单主机存活 ,执行命令进行测试，可以看到在每次执行ansible时都会询问连接用户的密码（相 当于-K参数）</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ansible</span> all --list<br><br>[student<span class="hljs-variable">@controller</span> ansible]$ ansible all --list<br>SSH password:<br>  hosts (<span class="hljs-number">2</span>):<br>    <span class="hljs-number">192.168.48.101</span><br>    <span class="hljs-number">192.168.48.102</span><br>[student<span class="hljs-variable">@controller</span> ansible]$<br><span class="hljs-comment">#成功</span><br></code></pre></td></tr></table></figure><p>如果不想输入密码，那需要修改配置文件：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle">vi <span class="hljs-regexp">/home/</span>student<span class="hljs-regexp">/ansible/</span>ansible.cfg<br>······<br>ask_pass=<span class="hljs-keyword">False</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/%E7%94%A8%E6%88%B7%E7%BA%A7ansible%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA/e1d902512d1ed9c395ad0dc927a3211e04e28fba.png" alt="image-20230912224807001"></p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crystal">[student<span class="hljs-variable">@controller</span> ansible]<span class="hljs-variable">$ </span>ansible all --list<br>  hosts (<span class="hljs-number">2</span>):<br>    <span class="hljs-number">192.168</span>.<span class="hljs-number">48.101</span><br>    <span class="hljs-number">192.168</span>.<span class="hljs-number">48.102</span><br>[student<span class="hljs-variable">@controller</span> ansible]<span class="hljs-variable">$</span><br><span class="hljs-variable"></span><span class="hljs-comment">#无输入密码选项</span><br></code></pre></td></tr></table></figure><h2 id="实例（指定student）"><a href="#实例（指定student）" class="headerlink" title="实例（指定student）"></a>实例（指定student）</h2><p><font color='red'>远程用户指定为普通用户（student）</font></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[student@controller ansible]$ vim ansible.cfg<br>[defaults]<br><span class="hljs-attribute">inventory</span>=/home/student/ansible/inventory<br><span class="hljs-attribute">remote_port</span>=22<br><span class="hljs-attribute">remote_user</span>=student<br><span class="hljs-comment">#指定远程用户为student</span><br><span class="hljs-attribute">ask_pass</span>=<span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p>这时候执行ping会报错</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">ansible <span class="hljs-keyword">all</span> -m ping<br></code></pre></td></tr></table></figure><p><img src="/../../img/%E7%94%A8%E6%88%B7%E7%BA%A7ansible%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA/36030bdebb9cbe2cb9cf85a57f527991fc70eba3.png" alt="image-20230912225310702"></p><p><img src="/../../img/%E7%94%A8%E6%88%B7%E7%BA%A7ansible%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA/093cb2bedadf9dacdf83186c216de62efbbea1bb.png" alt="image-20230912225331509"></p><p>这时候我们要配置免密登入（这里的密钥是student用户的，和root不一样，不会覆盖root用户的，这是在student用户下执行的命令）</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs crystal">[student<span class="hljs-variable">@controller</span> ansible]<span class="hljs-variable">$ </span>ssh-keygen<br><span class="hljs-comment">#回车三次</span><br>[student<span class="hljs-variable">@controller</span> ansible]<span class="hljs-variable">$ </span>ssh-copy-id student<span class="hljs-variable">@192</span>.<span class="hljs-number">168.48</span>.<span class="hljs-number">101</span><br><span class="hljs-comment">#输入yes和node1的root密码</span><br><br>[student<span class="hljs-variable">@controller</span> ansible]<span class="hljs-variable">$ </span>ssh-copy-id student<span class="hljs-variable">@192</span>.<span class="hljs-number">168.48</span>.<span class="hljs-number">102</span><br><span class="hljs-comment">#输入yes和node2的root密码</span><br></code></pre></td></tr></table></figure><p>这是执行ping命令</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">ansible <span class="hljs-keyword">all</span> -m ping<br></code></pre></td></tr></table></figure><p><img src="/../../img/%E7%94%A8%E6%88%B7%E7%BA%A7ansible%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA/fbfb0421bf54c003e1a9cc2e28ffd60fea8755cf.png" alt="image-20230912230245638"></p><h2 id="测试提取文件"><a href="#测试提取文件" class="headerlink" title="测试提取文件"></a>测试提取文件</h2><p>这个普通用户（student）并不能执行所有的操作，比如ansible以student身份登录，执行（ls &#x2F;root）发普通用户没有权限，</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;ls /root&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/%E7%94%A8%E6%88%B7%E7%BA%A7ansible%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA/dcc6b723a386323cf562bade58b2cf2a8957be6f.png" alt="image-20230912230504092"></p><p>解决这个问题就需要提权：sudo 提权</p><p>在受控主机(<font color='red'>node01、node02</font>)上执行visudo（配置 &#x2F;etc&#x2F;sudoers）</p><p><font color='red'>node01机子</font></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@node01</span> ~]<span class="hljs-meta"># visudo</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/%E7%94%A8%E6%88%B7%E7%BA%A7ansible%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA/91e2a38e7ef071a3cb51f5b89dc133df750e339c.png" alt="image-20230912230747742"></p><p><font color='red'>node02机子</font></p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@node02</span> ~]<span class="hljs-meta"># visudo</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/%E7%94%A8%E6%88%B7%E7%BA%A7ansible%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA/645d2da0ea2f30c86fe3f4719053de461825fd10.png" alt="image-20230912230906568"></p><p>或者(<font color='red'>node01和node02执行以下指令</font>)</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade">cat &gt;&gt;<span class="hljs-regexp">/etc/</span>sudoers.d/student &lt;&lt; EOF <br>student          <span class="hljs-built_in">ALL</span>=(<span class="hljs-built_in">ALL</span>)        NOPASSWD: <span class="hljs-built_in">ALL</span><br>EOF<br></code></pre></td></tr></table></figure><p>在<font color='red'>控制主机（controller）</font>上(<font color='red'>student用户</font>)修改ansible.cfg配置文件提权</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[student@controller ansible]$ vim ansible.cfg<br>[defaults]<br><span class="hljs-attribute">inventory</span>=/home/student/ansible/inventory<br><span class="hljs-attribute">remote_port</span>=22<br><span class="hljs-attribute">remote_user</span>=student<br><span class="hljs-attribute">ask_pass</span>=<span class="hljs-literal">False</span><br>[privilege_escalation]<br><span class="hljs-attribute">become</span>=<span class="hljs-literal">True</span><br><span class="hljs-attribute">become_method</span>=sudo<br><span class="hljs-attribute">become_user</span>=root<br><span class="hljs-attribute">become_ask_pass</span>=<span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/%E7%94%A8%E6%88%B7%E7%BA%A7ansible%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA/0575ae46b3b79b6f7beffd757fd79427cee52b0e.png" alt="image-20230912231556770"></p><p>验证</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ansible all -m <span class="hljs-built_in">shell</span> -<span class="hljs-keyword">a</span> <span class="hljs-string">&quot;ls /root&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../../img/%E7%94%A8%E6%88%B7%E7%BA%A7ansible%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA/5e66812c14fd8690a9025e8436b5d6d3edd08ccf.png" alt="image-20230912231635877"></p><p><font color='red'>#在控制节点的student经过sudo提权之后可以读取&#x2F;root目录了</font></p><p><code>可以返回目录！</code></p><p><a href="https://blog.qianyios.top/2023/09/10/ansible/Ansible-%E6%80%BB%E6%89%8B%E5%86%8C/">Ansible练习目录 - 严千屹博客 (qianyios.top)</a></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>Ansible</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ansible三机部署</title>
    <link href="/2023/09/09/ansible/Ansible-3%E6%9C%BA%E9%83%A8%E7%BD%B2/"/>
    <url>/2023/09/09/ansible/Ansible-3%E6%9C%BA%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Ansible三机部署"><a href="#Ansible三机部署" class="headerlink" title="Ansible三机部署"></a>Ansible三机部署</h1><h2 id="关于"><a href="#关于" class="headerlink" title="关于"></a>关于</h2><p>　ansible是新出现的自动化运维工具，基于Python开发，集合了众多运维工具（puppet、chef、func、fabric）的优点，实现了批量系统配置、批量程序部署、批量运行命令等功能。<br>　　ansible是基于 paramiko 开发的,并且基于模块化工作，本身没有批量部署的能力。真正具有批量部署的是ansible所运行的模块，ansible只是提供一种框架。ansible不需要在远程主机上安装client&#x2F;agents，因为它们是基于ssh来和远<br>程主机通讯的。ansible目前已经已经被红帽官方收购，是自动化运维工具中大家认可度最高的，并且上手容易，学习简单。是每位运维工程师必须掌握的技能之一。</p><h2 id="主机分布"><a href="#主机分布" class="headerlink" title="主机分布"></a>主机分布</h2><table><thead><tr><th>主机名</th><th>ip</th><th>系统</th><th>内存</th><th>硬盘</th></tr></thead><tbody><tr><td>controller</td><td>192.168.48.100</td><td>Centos7.9</td><td>4G</td><td>100G</td></tr><tr><td>node01</td><td>192.168.48.101</td><td>Centos7.9</td><td>4G</td><td>100G</td></tr><tr><td>node02</td><td>192.168.48.102</td><td>Centos7.9</td><td>4G</td><td>100G</td></tr></tbody></table><h2 id="修改主机名"><a href="#修改主机名" class="headerlink" title="修改主机名"></a>修改主机名</h2><p><code>controlle</code></p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">controller</span> &amp;&amp; <span class="hljs-string">bash</span><br></code></pre></td></tr></table></figure><p><code>node01</code></p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">node01</span> &amp;&amp; <span class="hljs-string">bash</span><br></code></pre></td></tr></table></figure><p><code>node02</code></p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">node02</span> &amp;&amp; <span class="hljs-string">bash</span><br></code></pre></td></tr></table></figure><p><code>三台机加入hosts</code></p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">cat &gt;&gt; /etc/hosts &lt;&lt; EOF<br><span class="hljs-number">192.168.48.100</span> controller<br><span class="hljs-number">192.168.48.101</span> node01<br><span class="hljs-number">192.168.48.102</span> node02<br>EOF<br></code></pre></td></tr></table></figure><h2 id="设置阿里yum"><a href="#设置阿里yum" class="headerlink" title="设置阿里yum"></a>设置阿里yum</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir repo.bak<br>mv <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/* repo.bak/</span><br>wget -O <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/CentOSase.repo https:/</span><span class="hljs-regexp">/mirrors.aliyun.com/</span>repo/Centos-<span class="hljs-number">7</span>.repo<br>yum clean all &amp;&amp; yum makecache<br>systemctl disable firewalld --now<br>sed -i <span class="hljs-string">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> <span class="hljs-regexp">/etc/</span>sysconfig/selinux<br>sed -i <span class="hljs-string">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> <span class="hljs-regexp">/etc/</span>selinux/config<br>yum update -y<br></code></pre></td></tr></table></figure><h2 id="安装python"><a href="#安装python" class="headerlink" title="安装python"></a>安装python</h2><p><code>已安装可以忽略。</code></p><p><code>确保python版本&gt;=2.6</code></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo yum <span class="hljs-keyword">install</span> epel-release<br>sudo yum <span class="hljs-keyword">install</span> https://centos7.iuscommunity.org/ius-release.rpm<br>sudo yum <span class="hljs-keyword">install</span> python27<br></code></pre></td></tr></table></figure><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@controller</span> ~]<span class="hljs-meta"># python --version</span><br>Python <span class="hljs-number">2.7</span><span class="hljs-number">.5</span><br><span class="hljs-meta">#有显示说明python安装成功</span><br></code></pre></td></tr></table></figure><h2 id="安装Ansible"><a href="#安装Ansible" class="headerlink" title="安装Ansible"></a>安装Ansible</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo yum install epel-release ansible openssh<br><br>[root@controller ~]<span class="hljs-comment"># ansible --version</span><br>ansible <span class="hljs-number">2.9</span>.<span class="hljs-number">27</span><br>  config file = <span class="hljs-regexp">/etc/</span>ansible/ansible.cfg<br>  configured module search path = [<span class="hljs-string">u&#x27;/root/.ansible/plugins/modules&#x27;</span>, <span class="hljs-string">u&#x27;/usr/share/ansible/plugins/modules&#x27;</span>]<br>  ansible python module location = <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/python2.7/</span>site-packages/ansible<br>  executable location = <span class="hljs-regexp">/usr/</span>bin/ansible<br>  python version = <span class="hljs-number">2.7</span>.<span class="hljs-number">5</span> (default, Oct <span class="hljs-number">14</span> <span class="hljs-number">2020</span>, <span class="hljs-number">14</span>:<span class="hljs-number">45</span>:<span class="hljs-number">30</span>) [GCC <span class="hljs-number">4.8</span>.<span class="hljs-number">5</span> <span class="hljs-number">20150623</span> (Red Hat <span class="hljs-number">4.8</span>.<span class="hljs-number">5</span>-<span class="hljs-number">44</span>)]<br><br></code></pre></td></tr></table></figure><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><h3 id="测试主机是否存活"><a href="#测试主机是否存活" class="headerlink" title="测试主机是否存活"></a>测试主机是否存活</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">vim /etc/ansible/hosts<br><br>#在末尾添加ip<br><span class="hljs-number">192.168.48.101</span><br><span class="hljs-number">192.168.48.102</span><br>-----------------------<br></code></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ansible</span> <span class="hljs-number">192.168.48.101</span> -m ping -k<br>ansible <span class="hljs-number">192.168.48.102</span> -m ping -k<br></code></pre></td></tr></table></figure><p>如果controller没有首次进行ssh至node01-02节点，则ansible会出错，如下图：</p><p><img src="/../../img/Ansible-3%E6%9C%BA%E9%83%A8%E7%BD%B2/1c1f5e66e1bf50c1de7a72ee04e27d5460203708.png" alt="image-20230909230311692"></p><p><img src="/../../img/Ansible-3%E6%9C%BA%E9%83%A8%E7%BD%B2/91c5a16a5a3cd0526ff16b5a22bbf14ce0c084f2.png" alt="image-20230909230328295"></p><p>所以我们必须先ssh至各节点，让其生成缓存信息</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@controller</span> ~]<span class="hljs-meta"># ssh 192.168.48.101</span><br><span class="hljs-meta">##输入密码</span><br><br>[root<span class="hljs-symbol">@node01</span> ~]<span class="hljs-meta"># exit</span><br><br><br>[root<span class="hljs-symbol">@controller</span> ~]<span class="hljs-meta"># ssh 192.168.48.102</span><br><span class="hljs-meta">##输入密码</span><br><br>[root<span class="hljs-symbol">@node02</span> ~]<span class="hljs-meta"># exit</span><br></code></pre></td></tr></table></figure><p>这时我们在进行测试</p><p><img src="/../../img/Ansible-3%E6%9C%BA%E9%83%A8%E7%BD%B2/0897e20e5401e4c4acd26b08733c8ac6b03929f6.png" alt="image-20230909230535153"></p><h2 id="SSH免密配置"><a href="#SSH免密配置" class="headerlink" title="SSH免密配置"></a>SSH免密配置</h2><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tap">ssh-keygen   （一路回车，三次）<br>[root@controller ~]<span class="hljs-comment"># ls -al ~/.ssh</span><br>total 12<br>drwx------ <span class="hljs-number"> 2 </span>root root  <span class="hljs-number"> 57 </span>Sep <span class="hljs-number"> 6 </span>00:43 .<br>dr-xr-x---.<span class="hljs-number"> 8 </span>root root <span class="hljs-number"> 236 </span>Sep <span class="hljs-number"> 9 </span>23:05 ..<br>-rw------- <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 1675 </span>Sep <span class="hljs-number"> 6 </span>00:42 id_rsa<br>-rw-r--r-- <span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 397 </span>Sep <span class="hljs-number"> 6 </span>00:42 id_rsa.pub<br>-rw-r--r-- <span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 352 </span>Sep <span class="hljs-number"> 6 </span>00:35 known_hosts<br><span class="hljs-comment">#有密钥文件了</span><br><br><span class="hljs-comment">#将密钥文件复制到node01-02节点，实现ssh免密登入</span><br>(先yes 然后输入密码即可)<br>ssh-copy-id root@192.168.48.101<br><br>ssh-copy-id root@192.168.48.102<br></code></pre></td></tr></table></figure><p>最后我们在进行测试</p><p><img src="/../../img/Ansible-3%E6%9C%BA%E9%83%A8%E7%BD%B2/10d5ca803b1d8d3c695ab4b78f277c402d1f13dd.png" alt="image-20230909231047461"></p><p><img src="/../../img/Ansible-3%E6%9C%BA%E9%83%A8%E7%BD%B2/80bc6b59310db67a9f2a26f4767adfa8056794b5.png" alt="image-20230909231103976"></p><p><code>可以返回目录！</code></p><p><a href="https://blog.qianyios.top/2023/09/10/ansible/Ansible-%E6%80%BB%E6%89%8B%E5%86%8C/">Ansible练习目录 - 严千屹博客 (qianyios.top)</a></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>Ansible</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos7 部署 k8s（基于containerd 运行时）</title>
    <link href="/2023/07/08/ck8s1.26.1/"/>
    <url>/2023/07/08/ck8s1.26.1/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Centos7-部署-k8s（基于containerd-运行时）"><a href="#Centos7-部署-k8s（基于containerd-运行时）" class="headerlink" title="Centos7 部署 k8s（基于containerd 运行时）"></a>Centos7 部署 k8s（基于containerd 运行时）</h1><p>因本教程的个别资源需要外网才可下载，可以通过<a href="https://pan.quark.cn/s/e8d31c514e9f#/list/share">千屹资源</a>下载k8s资源</p><h2 id="节点分布架构"><a href="#节点分布架构" class="headerlink" title="节点分布架构"></a>节点分布架构</h2><p>1、Master主机：2核CPU、4G内存、20G硬盘<br>2、Node主机：4+核CPU、8G+内存、40G+硬盘</p><table><thead><tr><th>Hostname</th><th>IP</th><th>说明</th></tr></thead><tbody><tr><td>master</td><td>192.168.48.100</td><td>master</td></tr><tr><td>node01</td><td>192.168.48.101</td><td>node01</td></tr><tr><td>node02</td><td>192.168.48.102</td><td>node02</td></tr></tbody></table><h2 id="制作master模板机"><a href="#制作master模板机" class="headerlink" title="制作master模板机"></a>制作master模板机</h2><h3 id="升级系统内核"><a href="#升级系统内核" class="headerlink" title="升级系统内核"></a>升级系统内核</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># uname -sr</span><br>Linux <span class="hljs-number">3.10</span><span class="hljs-number">.0</span><span class="hljs-number">-1160.</span>el7.x86_64<br></code></pre></td></tr></table></figure><p>下载必要的网页工具</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> -y vim wget git<br></code></pre></td></tr></table></figure><p>启用ELRepo仓库</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">yum</span> install -y https://www.elrepo.org/elrepo-release-<span class="hljs-number">7</span>.<span class="hljs-number">0</span>-<span class="hljs-number">4</span>.el7.elrepo.noarch.rpm<br><span class="hljs-attribute">yum</span> clean <span class="hljs-literal">all</span> &amp;&amp; yum makecache<br></code></pre></td></tr></table></figure><p>仓库启用后，列出可用的系统内核相关包</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">yum --disablerepo<span class="hljs-operator">=</span><span class="hljs-string">&quot;*&quot;</span> --enablerepo<span class="hljs-operator">=</span><span class="hljs-string">&quot;elrepo-kernel&quot;</span> list available <br></code></pre></td></tr></table></figure><p>安装主线稳定内核</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">yum <span class="hljs-attribute">--enablerepo</span>=elrepo-kernel install kernel-ml -y<br></code></pre></td></tr></table></figure><p>设置 GRUB 默认的内核版本</p><p>打开并编辑 &#x2F;etc&#x2F;default&#x2F;grub并设置CRUB_DEFAULT&#x3D;0,让GRUB初始化页面的第一个内核作为默认内核。</p><p>运行命令重新创建内核配置，重启并应用最新内核，开机后检查内核版本</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">sed -i <span class="hljs-string">&#x27;s/GRUB_DEFAULT=saved/GRUB_DEFAULT=0/g&#x27;</span> <span class="hljs-regexp">/etc/</span>default/grub<br>grub2-mkconfig -o <span class="hljs-regexp">/boot/g</span>rub2/grub.cfg<br>reboot<br>uname -sr<br>[root@localhost ~]<span class="hljs-comment"># uname -sr</span><br>Linux <span class="hljs-number">6.3</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>.el7.elrepo.x86_64<br></code></pre></td></tr></table></figure><h3 id="修改主机名"><a href="#修改主机名" class="headerlink" title="修改主机名"></a>修改主机名</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">master</span> &amp;&amp; <span class="hljs-string">bash</span><br></code></pre></td></tr></table></figure><h3 id="修改host解析"><a href="#修改host解析" class="headerlink" title="修改host解析"></a>修改host解析</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">cat &gt;&gt; /etc/hosts  &lt;&lt; EOF<br><span class="hljs-number">192.168.48.100</span> master<br><span class="hljs-number">192.168.48.101</span> node01<br><span class="hljs-number">192.168.48.102</span> node02<br>EOF<br></code></pre></td></tr></table></figure><h3 id="关闭防火墙和selinux"><a href="#关闭防火墙和selinux" class="headerlink" title="关闭防火墙和selinux"></a>关闭防火墙和selinux</h3><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-params">system</span>ctl stop firewalld &amp;&amp; <span class="hljs-params">system</span>ctl disable firewalld &amp;&amp; <span class="hljs-params">system</span>ctl status firewalld<br><br>setenforce <span class="hljs-number">0</span><br>sed -i <span class="hljs-string">&#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27;</span> /etc/selinux/config<br><span class="hljs-comment">#查看selinux的状态</span><br>getenforce<br></code></pre></td></tr></table></figure><h3 id="关闭swap分区"><a href="#关闭swap分区" class="headerlink" title="关闭swap分区"></a>关闭swap分区</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#临时关闭</span><br>swapoff -a<br><span class="hljs-comment">#永久关闭修改/etc/fstab 文件，注释掉 SWAP 的自动挂载，</span><br>sed -i <span class="hljs-string">&#x27;s/.*swap.*/#&amp;/&#x27;</span>  <span class="hljs-regexp">/etc/</span>fstab<br><span class="hljs-comment">#验证</span><br>free -m<br></code></pre></td></tr></table></figure><h3 id="时间同步"><a href="#时间同步" class="headerlink" title="时间同步"></a>时间同步</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-comment">#设置时区</span><br><span class="hljs-string">sudo</span> <span class="hljs-string">timedatectl</span> <span class="hljs-built_in">set-timezone</span> <span class="hljs-string">Asia</span>/<span class="hljs-string">Shanghai</span><br><span class="hljs-comment">#安装ntpdate</span><br><span class="hljs-string">yum</span> <span class="hljs-string">install</span> <span class="hljs-string">ntpdate</span> -<span class="hljs-string">y</span><br><span class="hljs-string">ntpdate</span> <span class="hljs-string">time</span>.<span class="hljs-string">windows</span>.<span class="hljs-string">com</span><br>备注:<span class="hljs-string">ntpdate</span>源也可以设置成其它如：<span class="hljs-string">ntpdate</span> <span class="hljs-string">cn</span>.<span class="hljs-string">pool</span>.<span class="hljs-string">net</span>.<span class="hljs-string">org</span><br><span class="hljs-comment">#将系统时间写入到系统硬件当中</span><br><span class="hljs-string">hwclock</span> -<span class="hljs-string">w</span><br><span class="hljs-comment">#验证时间</span><br></code></pre></td></tr></table></figure><h3 id="加载内核模块"><a href="#加载内核模块" class="headerlink" title=".加载内核模块"></a>.加载内核模块</h3><p>br_netfilter模块用于将桥接流量转发至iptables链，加载br_netfilter模块</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade">modprobe br_netfilter<br>echo <span class="hljs-string">&quot;modprobe br_netfilter&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br></code></pre></td></tr></table></figure><p>#验证模块是否加载成功：</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@<span class="hljs-keyword">master</span> <span class="hljs-title">~]# lsmod</span> |grep br_netfilter<br>br_netfilter           <span class="hljs-number">32768</span>  <span class="hljs-number">0</span><br><br></code></pre></td></tr></table></figure><h3 id="修改内核参数"><a href="#修改内核参数" class="headerlink" title="修改内核参数"></a>修改内核参数</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#开启网桥模式，可将网桥的流量传递给iptables链</span><br>cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF<br>net.bridge.<span class="hljs-attribute">bridge-nf-call-ip6tables</span>=1<br>net.bridge.<span class="hljs-attribute">bridge-nf-call-iptables</span>=1<br>net.ipv4.<span class="hljs-attribute">ip_forward</span>=1<br>vm.<span class="hljs-attribute">swappiness</span>=0<br>EOF<br><span class="hljs-comment">#使配置生效</span><br>sysctl -p /etc/sysctl.d/k8s.conf<br></code></pre></td></tr></table></figure><p>说明：<br>        net.bridge.bridge-nf-call-ip6tables 和 net.bridge.bridge-nf-call-iptables，netfilter实际上既可以在L2层过滤，也可以在L3层过滤的。当值为 0 ，即要求iptables不对bridge的数据进行处理。当值为 1，也就意味着二层的网桥在转发包时也会被iptables的FORWARD规则所过滤，这样就会出现L3层的iptables rules去过滤L2的帧的问题。<br>        max_map_count，文件包含限制一个进程可以拥有的VMA(虚拟内存区域)的数量。如不设置可能会报错：“max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]”<br>        net.ipv4.ip_forward，出于安全考虑，Linux系统默认是禁止数据包转发的。所谓转发即当主机拥有多于一块的网卡时，其中一块收到数据包，根据数据包的目的ip地址将数据包发往本机另一块网卡，该网卡根据路由表继续发送数据包。这通常是路由器所要实现的功能。要让Linux系统具有路由转发功能，需要配置 Linux 的内核参数 net.ipv4.ip_forward &#x3D; 1<br>        swappiness，等于 0 的时候表示最大限度使用物理内存，然后才是 swap空间，swappiness&#x3D;100的时候表示积极的使用swap分区，并且把内存上的数据及时的搬运到swap空间里面。</p><h3 id="ipvs转发"><a href="#ipvs转发" class="headerlink" title="ipvs转发"></a>ipvs转发</h3><p>不开启ipvs将会使用iptables进行数据包转发，但是效率低，所以官网推荐需要开通ipvs.</p><p>1.安装系统依赖包，开启ipvs转发</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs awk">yum install -y  ipvsadm ipset <br><br>cat &gt; <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/i</span>pvs.modules &lt;&lt; EOF<br><span class="hljs-comment">#!/bin/bash</span><br>modprobe -- ip_vs<br>modprobe -- ip_vs_rr<br>modprobe -- ip_vs_wrr<br>modprobe -- ip_vs_sh<br>modprobe -- nf_conntrack<br>EOF<br><br><span class="hljs-comment">#所有节点上给脚本⽂件添加权限并执⾏</span><br>chmod <span class="hljs-number">755</span> <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/i</span>pvs.modules <br>bash <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/i</span>pvs.modules<br><br><span class="hljs-comment">#查看是否模块加载情况</span><br>lsmod |  grep ip_vs<br></code></pre></td></tr></table></figure><h3 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#配置yum源</span><br>mkdir repo.bak<br>mv <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/* repo.bak/</span><br><span class="hljs-comment">##添加阿里源</span><br>wget -O <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/CentOS-Base.repo http:/</span><span class="hljs-regexp">/mirrors.aliyun.com/</span>repo/Centos-<span class="hljs-number">7</span>.repo<br><span class="hljs-comment">#添加yum docker软件源</span><br>wget https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/docker-ce/</span>linux<span class="hljs-regexp">/centos/</span>docker-ce.repo -O <span class="hljs-regexp">/etc/yum</span>.repos.d/docker-ce.repo<br>yum clean all &amp;&amp; yum makecache<br><br><span class="hljs-comment">#安装docker</span><br>yum -y install docker-ce<br><span class="hljs-comment">#启用并启动docker</span><br>systemctl enable docker &amp;&amp; systemctl start docker<br><br><span class="hljs-comment">##配置镜像加速器</span><br><br>cat &gt; <span class="hljs-regexp">/etc/</span>docker/daemon.json &lt;&lt; EOF<br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://b9pmyelo.mirror.aliyuncs.com&quot;</span>],<br>  <span class="hljs-string">&quot;exec-opts&quot;</span>: [<span class="hljs-string">&quot;native.cgroupdriver=systemd&quot;</span>]<br>&#125;<br>EOF<br><br><span class="hljs-comment">#重启docker</span><br>systemctl daemon-reload &amp;&amp; systemctl restart docker<br>docker info |grep  <span class="hljs-string">&quot;Cgroup Driver&quot;</span><br></code></pre></td></tr></table></figure><h3 id="安装cri-dockerd"><a href="#安装cri-dockerd" class="headerlink" title="安装cri-dockerd"></a>安装cri-dockerd</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#下载cri-dockerd安装包</span><br>wget https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/Mirantis/</span>cri-dockerd<span class="hljs-regexp">/releases/</span>download<span class="hljs-regexp">/v0.3.1/</span>cri-dockerd-<span class="hljs-number">0.3</span>.<span class="hljs-number">1</span>-<span class="hljs-number">3</span>.el7.x86_64.rpm<br><span class="hljs-comment">#安装cri-dockerd</span><br>rpm -ivh cri-dockerd-<span class="hljs-number">0.3</span>.<span class="hljs-number">1</span>-<span class="hljs-number">3</span>.el7.x86_64.rpm<br><span class="hljs-comment">#如果报错，直接按下列网址安装</span><br>rpm -ivh  https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/Mirantis/</span>cri-dockerd<span class="hljs-regexp">/releases/</span>download<span class="hljs-regexp">/v0.3.1/</span>cri-dockerd-<span class="hljs-number">0.3</span>.<span class="hljs-number">1</span>-<span class="hljs-number">3</span>.el7.x86_64.rpm<br><span class="hljs-comment">#修改镜像地址为国内，否则kubelet拉取不了镜像导致启动失败</span><br>vi <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system/cri-docker.service<br>修改下列行<br>ExecStart=<span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/cri-dockerd --container-runtime-endpoint fd:/</span><span class="hljs-regexp">/ --pod-infra-container-image=registry.aliyuncs.com/g</span>oogle_containers/pause:<span class="hljs-number">3.7</span><br><br>yum install -y containerd.io<br>systemctl enable containerd &amp;&amp; systemctl start containerd<br><br>mkdir -p <span class="hljs-regexp">/etc/</span>containerd<br>containerd config default | sudo tee <span class="hljs-regexp">/etc/</span>containerd/config.toml<br><span class="hljs-comment"># 替换配置文件</span><br>sed -i <span class="hljs-string">&#x27;s#SystemdCgroup = false#SystemdCgroup = true#&#x27;</span> <span class="hljs-regexp">/etc/</span>containerd/config.toml<br>sed -i <span class="hljs-string">&#x27;s#sandbox_image = &quot;registry.k8s.io/pause:3.6&quot;#sandbox_image = &quot;registry.aliyuncs.com/google_containers/pause:3.6&quot;#&#x27;</span> <span class="hljs-regexp">/etc/</span>containerd/config.toml<br><br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>crictl.yaml &lt;&lt; EOF<br>runtime-endpoint: unix:<span class="hljs-regexp">//</span><span class="hljs-regexp">/run/</span>containerd/containerd.sock<br>image-endpoint: unix:<span class="hljs-regexp">//</span><span class="hljs-regexp">/run/</span>containerd/containerd.sock<br>timeout: <span class="hljs-number">10</span><br>debug: false<br>EOF<br><br><span class="hljs-comment">#启动cri-dockerd</span><br>systemctl daemon-reload <br>systemctl enable cri-docker &amp;&amp; systemctl start cri-docker<br>systemctl restart containerd<br><br></code></pre></td></tr></table></figure><h3 id="添加yum-k8s软件源"><a href="#添加yum-k8s软件源" class="headerlink" title="添加yum k8s软件源"></a>添加yum k8s软件源</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat &gt; <span class="hljs-regexp">/etc/yum</span>.repos.d/kubernetes.repo &lt;&lt; EOF<br>[kubernetes]<br>name=Kubernetes<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/kubernetes/yum</span><span class="hljs-regexp">/repos/</span>kubernetes-el7-x86_64<br>enabled=<span class="hljs-number">1</span><br>gpgcheck=<span class="hljs-number">0</span><br>repo_gpgcheck=<span class="hljs-number">0</span><br>gpgkey=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/kubernetes/yum</span><span class="hljs-regexp">/doc/yum</span>-key.gpg https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/kubernetes/yum</span><span class="hljs-regexp">/doc/</span>rpm-package-key.gpg<br>EOF<br><br></code></pre></td></tr></table></figure><h3 id="安装kubeadm、kubelet、kubectl"><a href="#安装kubeadm、kubelet、kubectl" class="headerlink" title="安装kubeadm、kubelet、kubectl"></a>安装kubeadm、kubelet、kubectl</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">yum</span> install -y kubelet-<span class="hljs-number">1</span>.<span class="hljs-number">26</span>.<span class="hljs-number">1</span> kubeadm-<span class="hljs-number">1</span>.<span class="hljs-number">26</span>.<span class="hljs-number">1</span> kubectl-<span class="hljs-number">1</span>.<span class="hljs-number">26</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">systemctl</span> enable kubelet --now<br><span class="hljs-attribute">kubeadm</span> version<br><span class="hljs-attribute">crictl</span> image<br></code></pre></td></tr></table></figure><p>关机poweroff</p><p>打快照</p><h2 id="完整克隆两台node01和node02"><a href="#完整克隆两台node01和node02" class="headerlink" title="完整克隆两台node01和node02"></a>完整克隆两台node01和node02</h2><table><thead><tr><th>Hostname</th><th>IP</th><th>说明</th></tr></thead><tbody><tr><td>master01</td><td>192.168.48.100</td><td>master</td></tr><tr><td>node01</td><td>192.168.48.101</td><td>node01</td></tr><tr><td>node02</td><td>192.168.48.102</td><td>node02</td></tr></tbody></table><p>根据节点分布，改好<span style=color:red>两台机ip和主机名</span>，不做解释</p><h2 id="配置各主机之间的免密登录"><a href="#配置各主机之间的免密登录" class="headerlink" title="配置各主机之间的免密登录"></a>配置各主机之间的免密登录</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">在master节点：<br>ssh-keygen <br><span class="hljs-comment">##三次回车</span><br>for i in node01 node02;do ssh-<span class="hljs-keyword">copy</span><span class="language-bash">-<span class="hljs-built_in">id</span> -i .ssh/id_rsa.pub <span class="hljs-variable">$i</span>;<span class="hljs-keyword">done</span></span><br></code></pre></td></tr></table></figure><p>关机快照（集群基础环境）poweroff</p><h2 id="在master节点初始化Kubernetes"><a href="#在master节点初始化Kubernetes" class="headerlink" title="在master节点初始化Kubernetes"></a>在master节点初始化Kubernetes</h2><p><span style=color:red>以下操作在master节点操作</span></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus">kubeadm init \<br>  <span class="hljs-attr">--apiserver-advertise-address</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">48.100</span> \<br>  <span class="hljs-attr">--image-repository</span> registry<span class="hljs-selector-class">.aliyuncs</span>.com/google_containers \<br>  <span class="hljs-attr">--kubernetes-version</span> v1.<span class="hljs-number">26.1</span> \<br>  <span class="hljs-attr">--service-cidr</span>=<span class="hljs-number">10.96</span>.<span class="hljs-number">0.0</span>/<span class="hljs-number">12</span> \<br>  <span class="hljs-attr">--pod-network-cidr</span>=<span class="hljs-number">10.244</span>.<span class="hljs-number">0.0</span>/<span class="hljs-number">16</span> \<br>  <span class="hljs-attr">--cri-socket</span>=unix:<span class="hljs-comment">///run/containerd/containerd.sock \</span><br>  <span class="hljs-attr">--ignore-preflight-errors</span>=<span class="hljs-attribute">all</span><br><br>–apiserver-advertise-address：集群通告地址<br>–image-repository：由于默认拉取镜像地址k8s<span class="hljs-selector-class">.gcr</span>.io国内无法访问，这里指定阿里云镜像仓库地址<br>–kubernetes-version：K8s版本，与上面安装的一致<br>–service-cidr：集群内部虚拟网络，Pod统一访问入口<br>–pod-network-cidr：Pod网络，与下面部署的CNI网络组件yaml中保持一致<br>–cri-socket：指定cri-dockerd接口，如果是containerd则使用unix:<span class="hljs-comment">///run/containerd/containerd.sock</span><br></code></pre></td></tr></table></figure><p>PS：</p><p>1、如果不记得token，利用kubeadm命令重新生成token</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">kubeadm <span class="hljs-built_in">token</span> <span class="hljs-keyword">create</span> --<span class="hljs-keyword">print</span>-join-command --ttl=<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>#–ttl&#x3D;0:配置该参数，生成的token将永不失效</p><p>2、如果初始化master有问题，可将集群重置，再次初始化master，其他节点重新加入前也要kubeadm reset</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">kubeadm reset<br></code></pre></td></tr></table></figure><p>保存记录的信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">[addons] Applied essential addon: kube-proxy<br><br>Your Kubernetes control-plane has initialized successfully!<br><br>To start using your cluster, you need to run the following as a regular user:<br><br>  <span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/.kube<br>  sudo <span class="hljs-built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="hljs-variable">$HOME</span>/.kube/config<br>  sudo <span class="hljs-built_in">chown</span> $(<span class="hljs-built_in">id</span> -u):$(<span class="hljs-built_in">id</span> -g) <span class="hljs-variable">$HOME</span>/.kube/config<br><br>Alternatively, <span class="hljs-keyword">if</span> you are the root user, you can run:<br><br>  <span class="hljs-built_in">export</span> KUBECONFIG=/etc/kubernetes/admin.conf<br><br>You should now deploy a pod network to the cluster.<br>Run <span class="hljs-string">&quot;kubectl apply -f [podnetwork].yaml&quot;</span> with one of the options listed at:<br>  https://kubernetes.io/docs/concepts/cluster-administration/addons/<br><br>Then you can <span class="hljs-built_in">join</span> any number of worker nodes by running the following on each as root:<br><br>kubeadm <span class="hljs-built_in">join</span> 192.168.48.100:6443 --token wkw927.l5024sn7bqga1vt4 \<br>        --discovery-token-ca-cert-hash sha256:cb69142ace324c2de1261a2bb8e540dc2310c3cdc0973ca1093a47bc8d61ac29<br><br></code></pre></td></tr></table></figure><h3 id="使用kubectl"><a href="#使用kubectl" class="headerlink" title="使用kubectl"></a>使用kubectl</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/.kube<br>sudo <span class="hljs-built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="hljs-variable">$HOME</span>/.kube/config<br>sudo <span class="hljs-built_in">chown</span> $(<span class="hljs-built_in">id</span> -u):$(<span class="hljs-built_in">id</span> -g) <span class="hljs-variable">$HOME</span>/.kube/config<br></code></pre></td></tr></table></figure><h3 id="安装kubectl命令补全"><a href="#安装kubectl命令补全" class="headerlink" title="安装kubectl命令补全"></a>安装kubectl命令补全</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install -y bash-completion<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;source /usr/share/bash-completion/bash_completion&#x27;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">source</span> ~/.bashrc<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;source &lt;(kubectl completion bash)&#x27;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure><h2 id="node01、node02加入集群"><a href="#node01、node02加入集群" class="headerlink" title="node01、node02加入集群"></a>node01、node02加入集群</h2><p>两个node都打</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">kubeadm join <span class="hljs-number">192.168</span>.<span class="hljs-number">48.100</span>:<span class="hljs-number">6443</span> <span class="hljs-attr">--token</span> wkw927<span class="hljs-selector-class">.l5024sn7bqga1vt4</span> \<br>        <span class="hljs-attr">--discovery-token-ca-cert-hash</span> sha256:cb69142ace324c2de1261a2bb8e540dc2310c3cdc0973ca1093a47bc8d61ac29 <span class="hljs-attr">--cri-socket</span> unix:<span class="hljs-comment">///run/containerd/containerd.sock</span><br></code></pre></td></tr></table></figure><h2 id="master配置网络插件calico"><a href="#master配置网络插件calico" class="headerlink" title="master配置网络插件calico"></a>master配置网络插件calico</h2><p>如果calico的文件下载不了，直接用文章最顶部的资源，已经给你们下载好了</p><p><span style=color:red>以下操作在master节点操作</span></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">增加解析记录<br>echo <span class="hljs-string">&#x27;185.199.108.133 raw.githubusercontent.com&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>hosts <br>curl https:<span class="hljs-regexp">//</span>raw.githubusercontent.com<span class="hljs-regexp">/projectcalico/</span>calico<span class="hljs-regexp">/v3.25.1/m</span>anifests/calico.yaml -O<br>kubectl apply -f calico.yaml<br></code></pre></td></tr></table></figure><p>PS：如果部署失败，则删除calico ：kubectl  delete -f calico.yaml</p><p>验证集群节点状态正常</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">kubectl get nodes<br>kubectl label <span class="hljs-keyword">node</span> <span class="hljs-title">node01</span> <span class="hljs-keyword">node</span><span class="hljs-title">-role</span>.kubernetes.io/<span class="hljs-attr">worker=</span>worker<br>kubectl label <span class="hljs-keyword">node</span> <span class="hljs-title">node02</span> <span class="hljs-keyword">node</span><span class="hljs-title">-role</span>.kubernetes.io/<span class="hljs-attr">worker=</span>worker<br></code></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-comment">#正常信息</span><br>[root@<span class="hljs-keyword">master</span> <span class="hljs-title">~]# kubectl</span> get nodes<br>NAME     STATUS   ROLES           AGE   <span class="hljs-keyword">VERSION</span><br><span class="hljs-keyword">master</span>   <span class="hljs-title">Ready</span>    control-plane   <span class="hljs-number">53m</span>   v1.<span class="hljs-number">26.1</span><br>node01   Ready    worker          <span class="hljs-number">46m</span>   v1.<span class="hljs-number">26.1</span><br>node02   Ready    worker          <span class="hljs-number">46m</span>   v1.<span class="hljs-number">26.1</span><br><span class="hljs-comment">##要过1分钟才会为Ready</span><br></code></pre></td></tr></table></figure><h2 id="部署Dashboard"><a href="#部署Dashboard" class="headerlink" title="部署Dashboard"></a>部署Dashboard</h2><p>如果dashboard的文件下载不了，直接用文章最顶部的资源，已经给你们下载好了</p><p>在master节点</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">wget</span> <span class="hljs-string">https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml</span><br><br><span class="hljs-comment">#默认Dashboard只能集群内部访问，修改Service为NodePort类型，暴露到外部访问，修改如下：</span><br><span class="hljs-string">vim</span> <span class="hljs-string">recommended.yaml</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">k8s-app:</span> <span class="hljs-string">kubernetes-dashboard</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">kubernetes-dashboard</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kubernetes-dashboard</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">443</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">8443</span><br>      <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30001</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">k8s-app:</span> <span class="hljs-string">kubernetes-dashboard</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span><br></code></pre></td></tr></table></figure><img src="../img/ck8s1.26.1/8f9a85eb20ed5fc6ab567942b969fe96d74570db.png" alt="image-20230512171256847" style="zoom:67%;" /><p>位置顺序要按如图所示</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs nsis">kubectl apply -f recommended.yaml<br>kubectl get pods -n kubernetes-dashboard<br><span class="hljs-comment">#以下是正常信息 （Running）</span><br>[root@master ~]<span class="hljs-comment"># kubectl get pods -n kubernetes-dashboard</span><br><span class="hljs-keyword">NAME</span>                                        READY   STATUS    RESTARTS   AGE<br>dashboard-metrics-scraper-<span class="hljs-number">7</span>bc864c59-krfmg   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m9s<br>kubernetes-dashboard-<span class="hljs-number">6</span>c7ccbcf87-krzr6       <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m9s<br><br><br>创建service account并绑定默认cluster-<span class="hljs-literal">admin</span>管理员群角色<br><span class="hljs-comment">#创建用户</span><br>kubectl create serviceaccount dashboard-<span class="hljs-literal">admin</span> -n kubernetes-dashboard<br><span class="hljs-comment">#用户授权</span><br>kubectl create clusterrolebinding dashboard-<span class="hljs-literal">admin</span> --clusterrole=cluster-<span class="hljs-literal">admin</span> --serviceaccount=kubernetes-dashboard:dashboard-<span class="hljs-literal">admin</span><br><span class="hljs-comment">#获取用户Token</span><br>kubectl create token dashboard-<span class="hljs-literal">admin</span> -n kubernetes-dashboard<br><br>eyJhbGciOiJSUzI1NiIsImtpZCI6IjdOQUpMNDVpVGpqMWxmSHdzdm81WGFkSmtQUTludHo5TEJvbk56NXFUOGcifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNjg4ODMyNDYxLCJpYXQiOjE2ODg4Mjg4NjEsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJkYXNoYm9hcmQtYWRtaW4iLCJ1aWQiOiI2MjBiMjNlZS1jMmYzLTQ5NjYtYTVlNS02M2Y4MGYxNGJhMDkifX0sIm5iZiI6MTY4ODgyODg2MSwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmVybmV0ZXMtZGFzaGJvYXJkOmRhc2hib2FyZC1hZG1pbiJ9.uZEgVhEVDgZJ7jMTiTeUMvkZ0j-TtJ7cx1bwK4f7lLlifTO6rvG3EjCkufsVEbY1oRruC30T3hDZI_xupkv9InTjJwFV1ZSTJyXfijr-xYShELBMCQ4W1c_gGPkvP_OIhr7yfes2pfk066HzZz_gsJB_TakkVtjS1aJPjrWtO7vkzWxOTmF9jQF0Ja3iNh8EYJOcQz5oJBkiwN3TdCc0cf44To0HSmG9Mytn2uy4UJsgxN1LKjrERb8JAn25Xm9ubFNG5U2Zp8yVD5MyoAraWpo0sQOZzTvQaFc6CsXcSUd8EEPkY2eUEdC1gKf2ugpS9T7r398AVlUOSyob7T8kqQ<br><br></code></pre></td></tr></table></figure><p>查询pod状态</p><p><img src="/../img/ck8s1.26.1/23f5aebbfbff61d18504aec0426069a152465f7d.png" alt="image-20230519155939383"></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">kubectl</span> <span class="hljs-meta">get</span> pod,<span class="hljs-keyword">svc</span> -o wide -n kubernetes-dashboard<br></code></pre></td></tr></table></figure><p>浏览器访问https:&#x2F;&#x2F;所在node的ip:30001<br><a href="https://192.168.48.101:30001/">https://192.168.48.101:30001</a>    因本pod在node01，请根据实际情况修改。<br>输入token</p><p><img src="/../img/ck8s1.26.1/392cff12471a1bfd15d67213f8e461adc1690a9b.png" alt="image-20230519160425152"></p><h2 id="测试集群"><a href="#测试集群" class="headerlink" title="测试集群"></a>测试集群</h2><p>master</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">kubectl create deployment nginx <span class="hljs-attribute">--image</span>=nginx<br>kubectl expose deployment nginx <span class="hljs-attribute">--port</span>=80 <span class="hljs-attribute">--type</span>=NodePort<br>kubectl <span class="hljs-built_in">get</span> pod,svc,deployment -o wide<br></code></pre></td></tr></table></figure><p><img src="/../img/ck8s1.26.1/b99a6da4e87724539fd69eeacff17a19e35aeb8c.png" alt="image-20230519160645944"></p><p>如图可知，pod在node02，所以浏览器访问ip:31971</p><p><a href="http://192.168.48.102:31971/">http://192.168.48.102:31971</a></p><p><img src="/../img/ck8s1.26.1/1f5a167746606c84af0ea8fe5859cc81a5055d7d.png" alt="image-20230519160800617"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>K8s</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>先电IaaS2.2部署OpenStack</title>
    <link href="/2023/06/19/xiandian-openstack/"/>
    <url>/2023/06/19/xiandian-openstack/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="先电IaaS2-2私有云部署OpenStack"><a href="#先电IaaS2-2私有云部署OpenStack" class="headerlink" title="先电IaaS2.2私有云部署OpenStack"></a>先电IaaS2.2私有云部署OpenStack</h1><h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><h3 id="ip拓扑"><a href="#ip拓扑" class="headerlink" title="ip拓扑"></a>ip拓扑</h3><table><thead><tr><th align="center">主机名</th><th align="center">ip1（NAT）</th><th align="center">ip2（仅主机）</th><th align="center">硬盘</th><th align="center">内存</th></tr></thead><tbody><tr><td align="center">controller-48</td><td align="center">192.168.48.10</td><td align="center">192.168.148.10</td><td align="center">100G</td><td align="center">8G</td></tr><tr><td align="center">computer-48</td><td align="center">192.168.48.20</td><td align="center">192.168.148.20</td><td align="center">100G</td><td align="center">3G</td></tr></tbody></table><h3 id="基础镜像"><a href="#基础镜像" class="headerlink" title="基础镜像"></a>基础镜像</h3><p><a href="https://mirrors.aliyun.com/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-2009.iso?spm=a2c6h.25603864.0.0.74092d1ctaON7P">CentOS-7-x86_64-DVD-2009.iso</a><br><a href="https://pan.quark.cn/s/baeeb5269112">chinaskills_cloud_iaas.iso</a></p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># ll</span><br>total 4758568<br>-rw-r--r-- <span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 861155328 </span>Jun<span class="hljs-number"> 19 </span>03:06 CentOS-7-x86_64-DVD-2009.iso<br>-rw-r--r-- <span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 3799093248 </span>Jun<span class="hljs-number"> 19 </span>03:06 chinaskills_cloud_iaas.iso<br></code></pre></td></tr></table></figure><h3 id="虚拟机硬件配置"><a href="#虚拟机硬件配置" class="headerlink" title="虚拟机硬件配置"></a>虚拟机硬件配置</h3><p><img src="/../img/xiandian-openstack/2c6ee30d82a77a9207d568f1f75ebeaf539c598f.png" alt="image-20230619160042336"></p><p>controller</p><img src="../img/xiandian-openstack/b461d257e41adb937a439d26f546e0971e9d7562.png" alt="image-20230618184223889" style="zoom:67%;" /><p>computer</p><p><img src="/../img/xiandian-openstack/181f86237817db4d8a51d251d6d6138463bea45e.png" alt="image-20230618184522907"></p><p><strong>sdb和sdc是分别作为cinder服务和swift服务的存储磁盘。</strong></p><h3 id="配置主机名和hosts，关闭防火墙和永久关闭selinux"><a href="#配置主机名和hosts，关闭防火墙和永久关闭selinux" class="headerlink" title="配置主机名和hosts，关闭防火墙和永久关闭selinux"></a>配置主机名和hosts，关闭防火墙和永久关闭selinux</h3><p>controller</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gams">hostnamectl <span class="hljs-keyword">set</span>-hostname <span class="hljs-comment">controller &amp;&amp; bash</span><br>systemctl <span class="hljs-comment">disable firewalld --now</span><br>sed <span class="hljs-comment">-i</span> <span class="hljs-comment">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/<span class="hljs-comment">sysconfig</span>/selinux<br>sed -i <span class="hljs-comment">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /<span class="hljs-comment">etc</span>/selinux/<span class="hljs-comment">config</span><br>echo <span class="hljs-comment">&quot;192.168.48.10 controller&quot;</span> <span class="hljs-comment">&gt;&gt;</span> /etc/<span class="hljs-comment">hosts</span><br>echo <span class="hljs-comment">&quot;192.168.48.20 computer&quot;</span> <span class="hljs-comment">&gt;&gt;</span> /etc/<span class="hljs-comment">hosts</span><br>setenforce <span class="hljs-comment">0</span><br></code></pre></td></tr></table></figure><p>computer</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gams">hostnamectl <span class="hljs-keyword">set</span>-hostname <span class="hljs-comment">computer &amp;&amp; bash</span><br>systemctl <span class="hljs-comment">disable firewalld --now</span><br>sed <span class="hljs-comment">-i</span> <span class="hljs-comment">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/<span class="hljs-comment">sysconfig</span>/selinux<br>sed -i <span class="hljs-comment">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /<span class="hljs-comment">etc</span>/selinux/<span class="hljs-comment">config</span><br>echo <span class="hljs-comment">&quot;192.168.48.10 controller&quot;</span> <span class="hljs-comment">&gt;&gt;</span> /etc/<span class="hljs-comment">hosts</span><br>echo <span class="hljs-comment">&quot;192.168.48.20 computer&quot;</span> <span class="hljs-comment">&gt;&gt;</span> /etc/<span class="hljs-comment">hosts</span><br>setenforce <span class="hljs-comment">0</span><br></code></pre></td></tr></table></figure><p>确保两者可以互通！</p><h3 id="格式化compute磁盘（在compute中操作）"><a href="#格式化compute磁盘（在compute中操作）" class="headerlink" title="格式化compute磁盘（在compute中操作）"></a>格式化compute磁盘（在compute中操作）</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkfs.xfs <span class="hljs-regexp">/dev/</span>sdb<br>mkfs.xfs <span class="hljs-regexp">/dev/</span>sdc<br></code></pre></td></tr></table></figure><h3 id="配置yum源"><a href="#配置yum源" class="headerlink" title="配置yum源"></a>配置yum源</h3><p>controller</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk">rm -rf <span class="hljs-regexp">/etc/yum</span>.repos.d/*<br>cat &gt;&gt; <span class="hljs-regexp">/etc/yum</span>.repos.d/centos.repo &lt;&lt; EOF<br>[centos]<br>name=centos<br>baseurl=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/qianyios/</span>centos<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br>[iaas]<br>name=iaas<br>baseurl=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/qianyios/i</span>aas-repo<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br>EOF<br></code></pre></td></tr></table></figure><p>computer</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir repo.bak<br>mv <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/* repo.bak/</span><br>cat &gt;&gt; <span class="hljs-regexp">/etc/yum</span>.repos.d/centos.repo &lt;&lt; EOF<br>[centos]<br>name=centos<br>baseurl=ftp:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.10</span>/centos<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br>[iaas]<br>name=iaas<br>baseurl=ftp:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.10</span>/iaas-repo<br>gpgcheck=<span class="hljs-number">0</span><br>enabled=<span class="hljs-number">1</span><br>EOF<br></code></pre></td></tr></table></figure><h3 id="挂载iso镜像文件"><a href="#挂载iso镜像文件" class="headerlink" title="挂载iso镜像文件"></a>挂载iso镜像文件</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#控制节点</span><br>mkdir <span class="hljs-regexp">/qianyios/</span>centos -p<br>mount -o loop CentOS-<span class="hljs-number">7</span>-x86_64-DVD-<span class="hljs-number">2009</span>.iso <span class="hljs-regexp">/mnt/</span><br>cp -rvf <span class="hljs-regexp">/mnt/</span>* <span class="hljs-regexp">/qianyios/</span>centos/<br>umount <span class="hljs-regexp">/mnt/</span><br>mount -o loop chinaskills_cloud_iaas.iso <span class="hljs-regexp">/mnt/</span><br>cp -rvf <span class="hljs-regexp">/mnt/</span>* <span class="hljs-regexp">/qianyios/</span><br>umount <span class="hljs-regexp">/mnt/</span><br>yum clean all &amp;&amp; yum makecache<br></code></pre></td></tr></table></figure><h3 id="搭建ftp服务器"><a href="#搭建ftp服务器" class="headerlink" title="搭建ftp服务器"></a>搭建ftp服务器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">控制节点<br>yum install vsftpd -y<br><span class="hljs-built_in">cat</span>&gt;&gt; /etc/vsftpd/vsftpd.conf &lt;&lt;<span class="hljs-string">EOF</span><br><span class="hljs-string">anon_root=/qianyios/</span><br><span class="hljs-string">EOF</span><br>systemctl start vsftpd &amp;&amp; systemctl <span class="hljs-built_in">enable</span> vsftpd<br></code></pre></td></tr></table></figure><p>验证操作</p><p>1.清理yum缓存</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta">#各节点</span><br>yum clean all <span class="hljs-meta">&amp;&amp; yum makecache</span><br></code></pre></td></tr></table></figure><p>2.在文件资源管理器输入<a href="ftp://192.168.48.10/">ftp://192.168.48.10/</a></p><p><img src="/../img/xiandian-openstack/e8657f54037c60e02ba43b1b9c4410e75f05a433.png" alt="image-20230618192456867"></p><h2 id="编辑xiandian变量"><a href="#编辑xiandian变量" class="headerlink" title="编辑xiandian变量"></a>编辑xiandian变量</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#各节点</span><br>yum install iaas-xiandian -y<br><span class="hljs-comment">#使用sed命令批量去除第一个#注释符为空</span><br>sed -i -e <span class="hljs-string">&#x27;s/^#//&#x27;</span>g <span class="hljs-regexp">/etc/</span>xiandian/openrc.sh<br>使用sed命令批量修改密码默认<span class="hljs-number">000000</span><br>sed -i -e <span class="hljs-string">&#x27;s/PASS=/PASS=000000/&#x27;</span>g <span class="hljs-regexp">/etc/</span>xiandian/openrc.sh<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs routeros">grep -v <span class="hljs-string">&quot;^#&quot;</span> /etc/xiandian/openrc.sh | grep -v <span class="hljs-string">&quot;^$&quot;</span><br><span class="hljs-attribute">HOST_IP</span>=192.168.48.10<br><span class="hljs-attribute">HOST_PASS</span>=123456<br><span class="hljs-comment">#ssh登入密码</span><br><span class="hljs-attribute">HOST_NAME</span>=controller<br><span class="hljs-attribute">HOST_IP_NODE</span>=192.168.48.20<br><span class="hljs-attribute">HOST_PASS_NODE</span>=123456<br><span class="hljs-comment">#ssh登入密码</span><br><span class="hljs-attribute">HOST_NAME_NODE</span>=computer<br><span class="hljs-attribute">network_segment_IP</span>=192.168.48.0/24<br><span class="hljs-attribute">RABBIT_USER</span>=openstack<br><span class="hljs-attribute">RABBIT_PASS</span>=000000<br><span class="hljs-attribute">DB_PASS</span>=000000<br><span class="hljs-attribute">DOMAIN_NAME</span>=demo<br><span class="hljs-attribute">ADMIN_PASS</span>=000000<br><span class="hljs-attribute">DEMO_PASS</span>=000000<br><span class="hljs-attribute">KEYSTONE_DBPASS</span>=000000<br><span class="hljs-attribute">GLANCE_DBPASS</span>=000000<br><span class="hljs-attribute">GLANCE_PASS</span>=000000<br><span class="hljs-attribute">NOVA_DBPASS</span>=000000<br><span class="hljs-attribute">NOVA_PASS</span>=000000<br><span class="hljs-attribute">NEUTRON_DBPASS</span>=000000<br><span class="hljs-attribute">NEUTRON_PASS</span>=000000<br><span class="hljs-attribute">METADATA_SECRET</span>=000000<br><span class="hljs-attribute">INTERFACE_IP</span>=192.168.48.10<br><span class="hljs-comment">#复制到第二台机的时候，记得改成192.168.48.20</span><br><span class="hljs-attribute">INTERFACE_NAME</span>=ens36<br><span class="hljs-comment">#第二块网卡的名字</span><br><span class="hljs-attribute">Physical_NAME</span>=provider<br><span class="hljs-attribute">minvlan</span>=2<br><span class="hljs-attribute">maxvlan</span>=300<br><span class="hljs-attribute">CINDER_DBPASS</span>=000000<br><span class="hljs-attribute">CINDER_PASS</span>=000000<br><span class="hljs-attribute">BLOCK_DISK</span>=sdb<br><span class="hljs-attribute">SWIFT_PASS</span>=000000<br><span class="hljs-attribute">OBJECT_DISK</span>=sdc<br><span class="hljs-attribute">STORAGE_LOCAL_NET_IP</span>=192.168.48.20<br><span class="hljs-attribute">HEAT_DBPASS</span>=000000<br><span class="hljs-attribute">HEAT_PASS</span>=000000<br><span class="hljs-attribute">ZUN_DBPASS</span>=000000<br><span class="hljs-attribute">ZUN_PASS</span>=000000<br><span class="hljs-attribute">KURYR_DBPASS</span>=000000<br><span class="hljs-attribute">KURYR_PASS</span>=000000<br><span class="hljs-attribute">CEILOMETER_DBPASS</span>=000000<br><span class="hljs-attribute">CEILOMETER_PASS</span>=000000<br><span class="hljs-attribute">AODH_DBPASS</span>=000000<br><span class="hljs-attribute">AODH_PASS</span>=000000<br><span class="hljs-attribute">BARBICAN_DBPASS</span>=000000<br><span class="hljs-attribute">BARBICAN_PASS</span>=000000<br><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">scp <span class="hljs-regexp">/etc/</span>xiandian<span class="hljs-regexp">/openrc.sh computer:/</span>etc<span class="hljs-regexp">/xiandian/</span>openrc.sh <br><span class="hljs-comment">#以下在计算节点</span><br>sed -i <span class="hljs-string">&#x27;s/INTERFACE_IP=192.168.48.10/INTERFACE_IP=192.168.48.20/g&#x27;</span> <span class="hljs-regexp">/etc/</span>xiandian/openrc.sh<br></code></pre></td></tr></table></figure><h2 id="安装平台基本服务"><a href="#安装平台基本服务" class="headerlink" title="安装平台基本服务"></a>安装平台基本服务</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@controller ~]<span class="hljs-comment"># iaas-pre-host.sh </span><br>[root@compute ~]<span class="hljs-comment"># iaas-pre-host.sh </span><br><span class="hljs-comment">#双节点</span><br>reboot<br><span class="hljs-comment"># 可同时执行，执行完毕后脚本会提示重启，不然rabbitmq服务会报错！！！此脚本会初始化虚拟机环境，如修改主机</span><br>名、主机映射、时间同步等，自己可去尝试解读脚本，手工搭建平台！！！！，由于重启可能导致平台出现问题可用ssh<br>连接自己的IP地址重新登陆，只要出现屏幕登录时间以及看到屏幕欢迎界面即可<br>Controller节点<br>iaas-install-mysql.sh<br>iaas-install-keystone.sh<br>iaas-install-glance.sh<br><br>Controller节点<br>iaas-install-nova-controller.sh<br>Compute节点<br>iaas-install-nova-compute.sh<br><br>Controller节点<br>sed -i <span class="hljs-string">&#x27;s/yum install openstack-neutron openstack-neutron-ml2 openstack-neutron-linuxbridge ebtables -y/yum install openstack-neutron openstack-neutron-ml2 openstack-neutron-linuxbridge ebtables -y --skip-broken/g&#x27;</span> <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/i</span>aas-install-neutron-controller.sh<br><br>iaas-install-neutron-controller.sh<br>Compute节点<br>iaas-install-neutron-compute.sh<br><br>Controller节点<br>iaas-install-dashboard.sh<br><br>从Ftp服务器上下载镜像到本地。（在controller中操作）<br>source <span class="hljs-regexp">/etc/</span>keystone/admin-openrc.sh<br>glance image-create --name CentOS7.<span class="hljs-number">5</span> --disk-format qcow2 --container-format bare --progress &lt; <span class="hljs-regexp">/qianyios/im</span>ages/CentOS_7.<span class="hljs-number">5</span>_x86_64_XD.qcow2<br><br></code></pre></td></tr></table></figure><p>访问页面<a href="http://192.168.48.10/dashboard/">http://192.168.48.10/dashboard/</a></p><p><img src="/../img/xiandian-openstack/5080427a3e62da8a697977a9a280cce2a6c194b4.png" alt="image-20230619014112445"></p><h2 id="更多服务"><a href="#更多服务" class="headerlink" title="更多服务"></a>更多服务</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#所以安装脚本都在/usr/local/bin/目录下</span><br><span class="hljs-comment">#按照自己需求安装</span><br>安装Swift对象存储服务<br>iaas-<span class="hljs-keyword">install</span>-swift-controller.sh<br>安装Heat编配服务<br>iaas-<span class="hljs-keyword">install</span>-heat.sh<br>安装Zun服务<br>iaas-<span class="hljs-keyword">install</span>-zun-controller.sh<br>安装Ceilometer监控服务<br>iaas-<span class="hljs-keyword">install</span>-ceilometer-controller.sh<br>安装Aodh监控服务<br>iaas-<span class="hljs-keyword">install</span>-aodh.sh<br></code></pre></td></tr></table></figure><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>OpenStack</tag>
      
      <tag>Iaas</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ChatGPT千屹镜像站</title>
    <link href="/2023/06/14/ChatGPT/"/>
    <url>/2023/06/14/ChatGPT/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><div class="all animate__animated  animate__infinite animate__fadeIn animate__slow" style="display: flex;justify-content: center;margin-bottom:30px; ">        <div class="icon" style="width:36px;height: 36px;float:left;background-size: cover">            <svg t="1684948258846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1080" width="36" height="36"><path d="M334.12987 788.779221m-187.012987 0a187.012987 187.012987 0 1 0 374.025974 0 187.012987 187.012987 0 1 0-374.025974 0Z" fill="#FFDEBB" p-id="1081"></path><path d="M114.094545 861.779117C114.094545 925.124156 164.987013 975.792208 228.608 975.792208h611.893195c63.617662 0 114.511792-50.673039 114.511792-114.013091V163.883221C955.012987 100.543169 904.118857 49.87013 840.501195 49.87013H230.925299C167.307636 49.87013 116.413506 100.543169 116.413506 163.883221v82.920727H86.336831C77.082597 246.803948 68.987013 254.866286 68.987013 264.075636v50.674702c0 9.212675 8.095584 17.276675 17.349818 17.276675H116.413506v64.493714H86.336831C77.082597 396.520727 68.987013 404.57974 68.987013 413.792416v50.674701c0 9.211013 8.095584 17.271688 17.349818 17.271688H116.413506v62.188052H86.336831C77.082597 543.926857 68.987013 551.995844 68.987013 561.205195v52.972052c0 9.216 8.095584 17.276675 17.349818 17.276675H116.413506v64.492052H86.336831C77.082597 695.945974 68.987013 704.008312 68.987013 713.219325v50.673039c0 9.212675 8.095584 17.278338 17.349818 17.278337H116.413506v54.125715l-2.313974 26.487688-0.004987-0.004987z m94.138182-164.849039H167.433974v-64.432208h40.798753c9.329039 0 17.487792-8.059013 17.487792-17.263376v-50.626494c0-9.202701-8.158753-17.25839-17.487792-17.25839H167.433974v-64.432207h40.798753c9.329039 0 17.487792-8.052364 17.487792-17.256728v-50.63148c0-9.204364-8.158753-17.25839-17.487792-17.25839H167.433974v-64.432208h40.798753c9.329039 0 17.487792-8.054026 17.487792-17.258389v-50.626494c0-9.204364-8.158753-17.261714-17.487792-17.261714H167.433974V164.200727c0-31.069091 24.481247-55.229506 55.949299-55.229506h616.610909c31.474701 0 55.950961 24.165403 55.950961 55.229506v697.260883c0 31.069091-24.47626 55.229506-55.950961 55.229507H223.384935c-31.468052 0-55.949299-24.160416-55.949299-55.229507v-80.540259h40.798754c9.329039 0 17.487792-8.052364 17.487792-17.256728v-47.17548c0-11.505039-8.158753-19.559065-17.487792-19.559065z m162.819325-272.751377h380.342857c25.357299 0 46.10161-21.274597 46.10161-47.28187V235.054545c0-26.002286-20.744312-47.28187-46.103272-47.28187H371.052052c-25.353974 0-46.10161 21.274597-46.10161 47.28187v140.660364c0 27.189195 20.744312 48.463792 46.10161 48.463792z" fill="#86BC9F" p-id="1082"></path></svg>        </div>        <div class="wz" style="padding:0 5px;line-height: 38px;height: 36px;float:left;        font-size: 20px;text-align: center;letter-spacing: 5px;">            <a href="https://qy.qianyios.top">ChatGPT千屹镜像站</a>        </div>                <div class="icon" style="width:36px;height: 36px;float:left;background-size: cover">            <svg t="1684948258846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1080" width="36" height="36"><path d="M334.12987 788.779221m-187.012987 0a187.012987 187.012987 0 1 0 374.025974 0 187.012987 187.012987 0 1 0-374.025974 0Z" fill="#FFDEBB" p-id="1081"></path><path d="M114.094545 861.779117C114.094545 925.124156 164.987013 975.792208 228.608 975.792208h611.893195c63.617662 0 114.511792-50.673039 114.511792-114.013091V163.883221C955.012987 100.543169 904.118857 49.87013 840.501195 49.87013H230.925299C167.307636 49.87013 116.413506 100.543169 116.413506 163.883221v82.920727H86.336831C77.082597 246.803948 68.987013 254.866286 68.987013 264.075636v50.674702c0 9.212675 8.095584 17.276675 17.349818 17.276675H116.413506v64.493714H86.336831C77.082597 396.520727 68.987013 404.57974 68.987013 413.792416v50.674701c0 9.211013 8.095584 17.271688 17.349818 17.271688H116.413506v62.188052H86.336831C77.082597 543.926857 68.987013 551.995844 68.987013 561.205195v52.972052c0 9.216 8.095584 17.276675 17.349818 17.276675H116.413506v64.492052H86.336831C77.082597 695.945974 68.987013 704.008312 68.987013 713.219325v50.673039c0 9.212675 8.095584 17.278338 17.349818 17.278337H116.413506v54.125715l-2.313974 26.487688-0.004987-0.004987z m94.138182-164.849039H167.433974v-64.432208h40.798753c9.329039 0 17.487792-8.059013 17.487792-17.263376v-50.626494c0-9.202701-8.158753-17.25839-17.487792-17.25839H167.433974v-64.432207h40.798753c9.329039 0 17.487792-8.052364 17.487792-17.256728v-50.63148c0-9.204364-8.158753-17.25839-17.487792-17.25839H167.433974v-64.432208h40.798753c9.329039 0 17.487792-8.054026 17.487792-17.258389v-50.626494c0-9.204364-8.158753-17.261714-17.487792-17.261714H167.433974V164.200727c0-31.069091 24.481247-55.229506 55.949299-55.229506h616.610909c31.474701 0 55.950961 24.165403 55.950961 55.229506v697.260883c0 31.069091-24.47626 55.229506-55.950961 55.229507H223.384935c-31.468052 0-55.949299-24.160416-55.949299-55.229507v-80.540259h40.798754c9.329039 0 17.487792-8.052364 17.487792-17.256728v-47.17548c0-11.505039-8.158753-19.559065-17.487792-19.559065z m162.819325-272.751377h380.342857c25.357299 0 46.10161-21.274597 46.10161-47.28187V235.054545c0-26.002286-20.744312-47.28187-46.103272-47.28187H371.052052c-25.353974 0-46.10161 21.274597-46.10161 47.28187v140.660364c0 27.189195 20.744312 48.463792 46.10161 48.463792z" fill="#86BC9F" p-id="1082"></path></svg>        </div>    </div><div class="animate__animated animate__slideInRight animate__slow animate__slower "style="font-size: 20px;letter-spacing: 5px; text-align:center;">     点击标题进入聊天哦！<br>    一个会解决你大部分学习问题的聊天机器人！！<br>    还不趁现在好好利用他！</div><p><img src="/../img/ChatGPT%E5%8D%83%E5%B1%B9%E9%95%9C%E5%83%8F%E7%AB%99/6e535d02a1378e9e6cf5e177f52570dfc5ea6fe1.png" alt="image-20230614164235386"></p><p><img src="/../img/ChatGPT%E5%8D%83%E5%B1%B9%E9%95%9C%E5%83%8F%E7%AB%99/4f4a1ff0d7b04480767d0230b1268d42fa40408e.png" alt="cover"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>ChatGPT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>公共留言区</title>
    <link href="/2023/05/24/%E5%8D%83%E5%B1%B9%E7%95%99%E8%A8%80%E5%8C%BA/"/>
    <url>/2023/05/24/%E5%8D%83%E5%B1%B9%E7%95%99%E8%A8%80%E5%8C%BA/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" /><div class="all animate__animated  animate__infinite animate__fadeIn animate__slow" style="display: flex;justify-content: center;margin-bottom:30px; ">        <div class="icon" style="width:36px;height: 36px;float:left;background-size: cover">            <svg t="1684948258846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1080" width="36" height="36"><path d="M334.12987 788.779221m-187.012987 0a187.012987 187.012987 0 1 0 374.025974 0 187.012987 187.012987 0 1 0-374.025974 0Z" fill="#FFDEBB" p-id="1081"></path><path d="M114.094545 861.779117C114.094545 925.124156 164.987013 975.792208 228.608 975.792208h611.893195c63.617662 0 114.511792-50.673039 114.511792-114.013091V163.883221C955.012987 100.543169 904.118857 49.87013 840.501195 49.87013H230.925299C167.307636 49.87013 116.413506 100.543169 116.413506 163.883221v82.920727H86.336831C77.082597 246.803948 68.987013 254.866286 68.987013 264.075636v50.674702c0 9.212675 8.095584 17.276675 17.349818 17.276675H116.413506v64.493714H86.336831C77.082597 396.520727 68.987013 404.57974 68.987013 413.792416v50.674701c0 9.211013 8.095584 17.271688 17.349818 17.271688H116.413506v62.188052H86.336831C77.082597 543.926857 68.987013 551.995844 68.987013 561.205195v52.972052c0 9.216 8.095584 17.276675 17.349818 17.276675H116.413506v64.492052H86.336831C77.082597 695.945974 68.987013 704.008312 68.987013 713.219325v50.673039c0 9.212675 8.095584 17.278338 17.349818 17.278337H116.413506v54.125715l-2.313974 26.487688-0.004987-0.004987z m94.138182-164.849039H167.433974v-64.432208h40.798753c9.329039 0 17.487792-8.059013 17.487792-17.263376v-50.626494c0-9.202701-8.158753-17.25839-17.487792-17.25839H167.433974v-64.432207h40.798753c9.329039 0 17.487792-8.052364 17.487792-17.256728v-50.63148c0-9.204364-8.158753-17.25839-17.487792-17.25839H167.433974v-64.432208h40.798753c9.329039 0 17.487792-8.054026 17.487792-17.258389v-50.626494c0-9.204364-8.158753-17.261714-17.487792-17.261714H167.433974V164.200727c0-31.069091 24.481247-55.229506 55.949299-55.229506h616.610909c31.474701 0 55.950961 24.165403 55.950961 55.229506v697.260883c0 31.069091-24.47626 55.229506-55.950961 55.229507H223.384935c-31.468052 0-55.949299-24.160416-55.949299-55.229507v-80.540259h40.798754c9.329039 0 17.487792-8.052364 17.487792-17.256728v-47.17548c0-11.505039-8.158753-19.559065-17.487792-19.559065z m162.819325-272.751377h380.342857c25.357299 0 46.10161-21.274597 46.10161-47.28187V235.054545c0-26.002286-20.744312-47.28187-46.103272-47.28187H371.052052c-25.353974 0-46.10161 21.274597-46.10161 47.28187v140.660364c0 27.189195 20.744312 48.463792 46.10161 48.463792z" fill="#86BC9F" p-id="1082"></path></svg>        </div>        <div class="wz" style="padding:0 5px;line-height: 38px;height: 36px;float:left;        font-size: 20px;text-align: center;letter-spacing: 5px;">            千屹留言区        </div>                <div class="icon" style="width:36px;height: 36px;float:left;background-size: cover">            <svg t="1684948258846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1080" width="36" height="36"><path d="M334.12987 788.779221m-187.012987 0a187.012987 187.012987 0 1 0 374.025974 0 187.012987 187.012987 0 1 0-374.025974 0Z" fill="#FFDEBB" p-id="1081"></path><path d="M114.094545 861.779117C114.094545 925.124156 164.987013 975.792208 228.608 975.792208h611.893195c63.617662 0 114.511792-50.673039 114.511792-114.013091V163.883221C955.012987 100.543169 904.118857 49.87013 840.501195 49.87013H230.925299C167.307636 49.87013 116.413506 100.543169 116.413506 163.883221v82.920727H86.336831C77.082597 246.803948 68.987013 254.866286 68.987013 264.075636v50.674702c0 9.212675 8.095584 17.276675 17.349818 17.276675H116.413506v64.493714H86.336831C77.082597 396.520727 68.987013 404.57974 68.987013 413.792416v50.674701c0 9.211013 8.095584 17.271688 17.349818 17.271688H116.413506v62.188052H86.336831C77.082597 543.926857 68.987013 551.995844 68.987013 561.205195v52.972052c0 9.216 8.095584 17.276675 17.349818 17.276675H116.413506v64.492052H86.336831C77.082597 695.945974 68.987013 704.008312 68.987013 713.219325v50.673039c0 9.212675 8.095584 17.278338 17.349818 17.278337H116.413506v54.125715l-2.313974 26.487688-0.004987-0.004987z m94.138182-164.849039H167.433974v-64.432208h40.798753c9.329039 0 17.487792-8.059013 17.487792-17.263376v-50.626494c0-9.202701-8.158753-17.25839-17.487792-17.25839H167.433974v-64.432207h40.798753c9.329039 0 17.487792-8.052364 17.487792-17.256728v-50.63148c0-9.204364-8.158753-17.25839-17.487792-17.25839H167.433974v-64.432208h40.798753c9.329039 0 17.487792-8.054026 17.487792-17.258389v-50.626494c0-9.204364-8.158753-17.261714-17.487792-17.261714H167.433974V164.200727c0-31.069091 24.481247-55.229506 55.949299-55.229506h616.610909c31.474701 0 55.950961 24.165403 55.950961 55.229506v697.260883c0 31.069091-24.47626 55.229506-55.950961 55.229507H223.384935c-31.468052 0-55.949299-24.160416-55.949299-55.229507v-80.540259h40.798754c9.329039 0 17.487792-8.052364 17.487792-17.256728v-47.17548c0-11.505039-8.158753-19.559065-17.487792-19.559065z m162.819325-272.751377h380.342857c25.357299 0 46.10161-21.274597 46.10161-47.28187V235.054545c0-26.002286-20.744312-47.28187-46.103272-47.28187H371.052052c-25.353974 0-46.10161 21.274597-46.10161 47.28187v140.660364c0 27.189195 20.744312 48.463792 46.10161 48.463792z" fill="#86BC9F" p-id="1082"></path></svg>        </div>    </div><div class="animate__animated animate__slideInRight animate__slow animate__slower "style="font-size: 20px;letter-spacing: 5px; text-align:center;">     这里是公共留言区，有什么问题和建议都可以畅所欲言，在下面留言哦！</div><p><img src="/../img/%E5%8D%83%E5%B1%B9%E7%95%99%E8%A8%80%E5%8C%BA/462ade84ae8f233a3ac9ddf3cfad433a7c3f1f90.png" alt="image-20230525011705837"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Public</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos7 部署 k8s（基于docker运行时）</title>
    <link href="/2023/05/19/dK8s1.26.1/"/>
    <url>/2023/05/19/dK8s1.26.1/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Centos7-部-署-k8s（基于docker运行时）"><a href="#Centos7-部-署-k8s（基于docker运行时）" class="headerlink" title="Centos7 部 署 k8s（基于docker运行时）"></a>Centos7 部 署 k8s（基于docker运行时）</h1><p>因本教程的个别资源需要外网才可下载，可以通过<a href="https://pan.quark.cn/s/e8d31c514e9f">千屹资源</a>下载k8s资源</p><h2 id="节点分布架构"><a href="#节点分布架构" class="headerlink" title="节点分布架构"></a>节点分布架构</h2><p>1、Master主机：2核CPU、4G内存、20G硬盘<br>2、Node主机：4+核CPU、8G+内存、40G+硬盘</p><table><thead><tr><th>Hostname</th><th>IP</th><th>说明</th></tr></thead><tbody><tr><td>master</td><td>192.168.48.100</td><td>master</td></tr><tr><td>node01</td><td>192.168.48.101</td><td>node01</td></tr><tr><td>node02</td><td>192.168.48.102</td><td>node02</td></tr></tbody></table><h2 id="制作master模板机"><a href="#制作master模板机" class="headerlink" title="制作master模板机"></a>制作master模板机</h2><h3 id="升级系统内核"><a href="#升级系统内核" class="headerlink" title="升级系统内核"></a>升级系统内核</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># uname -sr</span><br>Linux <span class="hljs-number">3.10</span><span class="hljs-number">.0</span><span class="hljs-number">-1160.</span>el7.x86_64<br></code></pre></td></tr></table></figure><p>下载必要的网页工具</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> -y vim wget<br></code></pre></td></tr></table></figure><p>启用ELRepo仓库</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">yum</span> install -y https://www.elrepo.org/elrepo-release-<span class="hljs-number">7</span>.<span class="hljs-number">0</span>-<span class="hljs-number">4</span>.el7.elrepo.noarch.rpm<br><span class="hljs-attribute">yum</span> clean <span class="hljs-literal">all</span> &amp;&amp; yum makecache<br></code></pre></td></tr></table></figure><p>仓库启用后，列出可用的系统内核相关包</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">yum --disablerepo<span class="hljs-operator">=</span><span class="hljs-string">&quot;*&quot;</span> --enablerepo<span class="hljs-operator">=</span><span class="hljs-string">&quot;elrepo-kernel&quot;</span> list available <br></code></pre></td></tr></table></figure><p>安装主线稳定内核</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">yum <span class="hljs-attribute">--enablerepo</span>=elrepo-kernel install kernel-ml -y<br></code></pre></td></tr></table></figure><p>设置 GRUB 默认的内核版本</p><p>打开并编辑 &#x2F;etc&#x2F;default&#x2F;grub并设置CRUB_DEFAULT&#x3D;0,让GRUB初始化页面的第一个内核作为默认内核。</p><p>运行命令重新创建内核配置，重启并应用最新内核，开机后检查内核版本</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">sed -i <span class="hljs-string">&#x27;s/GRUB_DEFAULT=saved/GRUB_DEFAULT=0/g&#x27;</span> <span class="hljs-regexp">/etc/</span>default/grub<br>grub2-mkconfig -o <span class="hljs-regexp">/boot/g</span>rub2/grub.cfg<br>reboot<br>uname -sr<br>[root@localhost ~]<span class="hljs-comment"># uname -sr</span><br>Linux <span class="hljs-number">6.3</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>.el7.elrepo.x86_64<br></code></pre></td></tr></table></figure><h3 id="修改主机名"><a href="#修改主机名" class="headerlink" title="修改主机名"></a>修改主机名</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">master</span> &amp;&amp; <span class="hljs-string">bash</span><br></code></pre></td></tr></table></figure><h3 id="修改host解析"><a href="#修改host解析" class="headerlink" title="修改host解析"></a>修改host解析</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">cat &gt;&gt; /etc/hosts  &lt;&lt; EOF<br><span class="hljs-number">192.168.48.100</span> master<br><span class="hljs-number">192.168.48.101</span> node01<br><span class="hljs-number">192.168.48.102</span> node02<br>EOF<br></code></pre></td></tr></table></figure><h3 id="关闭防火墙和selinux"><a href="#关闭防火墙和selinux" class="headerlink" title="关闭防火墙和selinux"></a>关闭防火墙和selinux</h3><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-params">system</span>ctl stop firewalld &amp;&amp; <span class="hljs-params">system</span>ctl disable firewalld &amp;&amp; <span class="hljs-params">system</span>ctl status firewalld<br><br>setenforce <span class="hljs-number">0</span><br>sed -i <span class="hljs-string">&#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27;</span> /etc/selinux/config<br><span class="hljs-comment">#查看selinux的状态</span><br>getenforce<br></code></pre></td></tr></table></figure><h3 id="关闭swap分区"><a href="#关闭swap分区" class="headerlink" title="关闭swap分区"></a>关闭swap分区</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#临时关闭</span><br>swapoff -a<br><span class="hljs-comment">#永久关闭修改/etc/fstab 文件，注释掉 SWAP 的自动挂载，</span><br>sed -i <span class="hljs-string">&#x27;s/.*swap.*/#&amp;/&#x27;</span>  <span class="hljs-regexp">/etc/</span>fstab<br><span class="hljs-comment">#验证</span><br>free -m<br></code></pre></td></tr></table></figure><h3 id="时间同步"><a href="#时间同步" class="headerlink" title="时间同步"></a>时间同步</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-comment">#设置时区</span><br><span class="hljs-string">sudo</span> <span class="hljs-string">timedatectl</span> <span class="hljs-built_in">set-timezone</span> <span class="hljs-string">Asia</span>/<span class="hljs-string">Shanghai</span><br><span class="hljs-comment">#安装ntpdate</span><br><span class="hljs-string">yum</span> <span class="hljs-string">install</span> <span class="hljs-string">ntpdate</span> -<span class="hljs-string">y</span><br><span class="hljs-string">ntpdate</span> <span class="hljs-string">time</span>.<span class="hljs-string">windows</span>.<span class="hljs-string">com</span><br>备注:<span class="hljs-string">ntpdate</span>源也可以设置成其它如：<span class="hljs-string">ntpdate</span> <span class="hljs-string">cn</span>.<span class="hljs-string">pool</span>.<span class="hljs-string">net</span>.<span class="hljs-string">org</span><br><span class="hljs-comment">#将系统时间写入到系统硬件当中</span><br><span class="hljs-string">hwclock</span> -<span class="hljs-string">w</span><br><span class="hljs-comment">#验证时间</span><br></code></pre></td></tr></table></figure><h3 id="加载内核模块"><a href="#加载内核模块" class="headerlink" title=".加载内核模块"></a>.加载内核模块</h3><p>br_netfilter模块用于将桥接流量转发至iptables链，加载br_netfilter模块</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade">modprobe br_netfilter<br>echo <span class="hljs-string">&quot;modprobe br_netfilter&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br></code></pre></td></tr></table></figure><p>#验证模块是否加载成功：</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@<span class="hljs-keyword">master</span> <span class="hljs-title">~]# lsmod</span> |grep br_netfilter<br>br_netfilter           <span class="hljs-number">32768</span>  <span class="hljs-number">0</span><br><br></code></pre></td></tr></table></figure><h3 id="修改内核参数"><a href="#修改内核参数" class="headerlink" title="修改内核参数"></a>修改内核参数</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#开启网桥模式，可将网桥的流量传递给iptables链</span><br>cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF<br>net.bridge.<span class="hljs-attribute">bridge-nf-call-ip6tables</span>=1<br>net.bridge.<span class="hljs-attribute">bridge-nf-call-iptables</span>=1<br>net.ipv4.<span class="hljs-attribute">ip_forward</span>=1<br>vm.<span class="hljs-attribute">swappiness</span>=0<br>EOF<br><span class="hljs-comment">#使配置生效</span><br>sysctl -p /etc/sysctl.d/k8s.conf<br></code></pre></td></tr></table></figure><p>说明：<br>        net.bridge.bridge-nf-call-ip6tables 和 net.bridge.bridge-nf-call-iptables，netfilter实际上既可以在L2层过滤，也可以在L3层过滤的。当值为 0 ，即要求iptables不对bridge的数据进行处理。当值为 1，也就意味着二层的网桥在转发包时也会被iptables的FORWARD规则所过滤，这样就会出现L3层的iptables rules去过滤L2的帧的问题。<br>        max_map_count，文件包含限制一个进程可以拥有的VMA(虚拟内存区域)的数量。如不设置可能会报错：“max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]”<br>        net.ipv4.ip_forward，出于安全考虑，Linux系统默认是禁止数据包转发的。所谓转发即当主机拥有多于一块的网卡时，其中一块收到数据包，根据数据包的目的ip地址将数据包发往本机另一块网卡，该网卡根据路由表继续发送数据包。这通常是路由器所要实现的功能。要让Linux系统具有路由转发功能，需要配置 Linux 的内核参数 net.ipv4.ip_forward &#x3D; 1<br>        swappiness，等于 0 的时候表示最大限度使用物理内存，然后才是 swap空间，swappiness&#x3D;100的时候表示积极的使用swap分区，并且把内存上的数据及时的搬运到swap空间里面。</p><h3 id="ipvs转发"><a href="#ipvs转发" class="headerlink" title="ipvs转发"></a>ipvs转发</h3><p>不开启ipvs将会使用iptables进行数据包转发，但是效率低，所以官网推荐需要开通ipvs.</p><p>1.安装系统依赖包，开启ipvs转发</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs awk">yum install -y  ipvsadm ipset <br><br>cat &gt; <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/i</span>pvs.modules &lt;&lt; EOF<br><span class="hljs-comment">#!/bin/bash</span><br>modprobe -- ip_vs<br>modprobe -- ip_vs_rr<br>modprobe -- ip_vs_wrr<br>modprobe -- ip_vs_sh<br>modprobe -- nf_conntrack<br>EOF<br><br><span class="hljs-comment">#所有节点上给脚本⽂件添加权限并执⾏</span><br>chmod <span class="hljs-number">755</span> <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/i</span>pvs.modules <br>bash <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/i</span>pvs.modules<br><br><span class="hljs-comment">#查看是否模块加载情况</span><br>lsmod |  grep ip_vs<br></code></pre></td></tr></table></figure><h3 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#配置yum源</span><br>mkdir repo.bak<br>mv <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/* repo.bak/</span><br><span class="hljs-comment">##添加阿里源</span><br>wget -O <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/CentOS-Base.repo http:/</span><span class="hljs-regexp">/mirrors.aliyun.com/</span>repo/Centos-<span class="hljs-number">7</span>.repo<br><span class="hljs-comment">#添加yum docker软件源</span><br>wget https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/docker-ce/</span>linux<span class="hljs-regexp">/centos/</span>docker-ce.repo -O <span class="hljs-regexp">/etc/yum</span>.repos.d/docker-ce.repo<br>yum clean all &amp;&amp; yum makecache<br><br><span class="hljs-comment">#安装docker</span><br>yum -y install docker-ce<br><span class="hljs-comment">#启用并启动docker</span><br>systemctl enable docker &amp;&amp; systemctl start docker<br><br><span class="hljs-comment">##配置镜像加速器</span><br><br>cat &gt; <span class="hljs-regexp">/etc/</span>docker/daemon.json &lt;&lt; EOF<br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://b9pmyelo.mirror.aliyuncs.com&quot;</span>],<br>  <span class="hljs-string">&quot;exec-opts&quot;</span>: [<span class="hljs-string">&quot;native.cgroupdriver=systemd&quot;</span>]<br>&#125;<br>EOF<br><br><span class="hljs-comment">#重启docker</span><br>systemctl daemon-reload &amp;&amp; systemctl restart docker<br>docker info |grep  <span class="hljs-string">&quot;Cgroup Driver&quot;</span><br></code></pre></td></tr></table></figure><h3 id="安装cri-dockerd"><a href="#安装cri-dockerd" class="headerlink" title="安装cri-dockerd"></a>安装cri-dockerd</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#下载cri-dockerd安装包</span><br>wget https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/Mirantis/</span>cri-dockerd<span class="hljs-regexp">/releases/</span>download<span class="hljs-regexp">/v0.3.1/</span>cri-dockerd-<span class="hljs-number">0.3</span>.<span class="hljs-number">1</span>-<span class="hljs-number">3</span>.el7.x86_64.rpm<br><span class="hljs-comment">#安装cri-dockerd</span><br>rpm -ivh cri-dockerd-<span class="hljs-number">0.3</span>.<span class="hljs-number">1</span>-<span class="hljs-number">3</span>.el7.x86_64.rpm<br><span class="hljs-comment">#如果报错，直接按下列网址安装</span><br>rpm -ivh  https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/Mirantis/</span>cri-dockerd<span class="hljs-regexp">/releases/</span>download<span class="hljs-regexp">/v0.3.1/</span>cri-dockerd-<span class="hljs-number">0.3</span>.<span class="hljs-number">1</span>-<span class="hljs-number">3</span>.el7.x86_64.rpm<br><span class="hljs-comment">#修改镜像地址为国内，否则kubelet拉取不了镜像导致启动失败</span><br>vi <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system/cri-docker.service<br>修改下列行<br>ExecStart=<span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/cri-dockerd --container-runtime-endpoint fd:/</span><span class="hljs-regexp">/ --pod-infra-container-image=registry.aliyuncs.com/g</span>oogle_containers/pause:<span class="hljs-number">3.7</span><br><br><span class="hljs-comment">#启动cri-dockerd</span><br>systemctl daemon-reload <br>systemctl enable cri-docker &amp;&amp; systemctl start cri-docker<br></code></pre></td></tr></table></figure><h3 id="添加yum-k8s软件源"><a href="#添加yum-k8s软件源" class="headerlink" title="添加yum k8s软件源"></a>添加yum k8s软件源</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat &gt; <span class="hljs-regexp">/etc/yum</span>.repos.d/kubernetes.repo &lt;&lt; EOF<br>[kubernetes]<br>name=Kubernetes<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/kubernetes/yum</span><span class="hljs-regexp">/repos/</span>kubernetes-el7-x86_64<br>enabled=<span class="hljs-number">1</span><br>gpgcheck=<span class="hljs-number">0</span><br>repo_gpgcheck=<span class="hljs-number">0</span><br>gpgkey=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/kubernetes/yum</span><span class="hljs-regexp">/doc/yum</span>-key.gpg https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/kubernetes/yum</span><span class="hljs-regexp">/doc/</span>rpm-package-key.gpg<br>EOF<br></code></pre></td></tr></table></figure><h3 id="安装kubeadm、kubelet、kubectl"><a href="#安装kubeadm、kubelet、kubectl" class="headerlink" title="安装kubeadm、kubelet、kubectl"></a>安装kubeadm、kubelet、kubectl</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">yum</span> install -y kubelet-<span class="hljs-number">1</span>.<span class="hljs-number">26</span>.<span class="hljs-number">1</span> kubeadm-<span class="hljs-number">1</span>.<span class="hljs-number">26</span>.<span class="hljs-number">1</span> kubectl-<span class="hljs-number">1</span>.<span class="hljs-number">26</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">systemctl</span> enable kubelet --now<br><span class="hljs-attribute">kubeadm</span> version<br><span class="hljs-attribute">crictl</span> image<br></code></pre></td></tr></table></figure><p>关机poweroff</p><p>打快照</p><h2 id="完整克隆两台node01和node02"><a href="#完整克隆两台node01和node02" class="headerlink" title="完整克隆两台node01和node02"></a>完整克隆两台node01和node02</h2><table><thead><tr><th>Hostname</th><th>IP</th><th>说明</th></tr></thead><tbody><tr><td>master01</td><td>192.168.48.100</td><td>master</td></tr><tr><td>node01</td><td>192.168.48.101</td><td>node01</td></tr><tr><td>node02</td><td>192.168.48.102</td><td>node02</td></tr></tbody></table><p>根据节点分布，改好<span style=color:red>两台机ip和主机名</span>，不做解释</p><h2 id="配置各主机之间的免密登录"><a href="#配置各主机之间的免密登录" class="headerlink" title="配置各主机之间的免密登录"></a>配置各主机之间的免密登录</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">在master节点：<br>ssh-keygen <br><span class="hljs-comment">##三次回车</span><br>for i in node01 node02;do ssh-<span class="hljs-keyword">copy</span><span class="language-bash">-<span class="hljs-built_in">id</span> -i .ssh/id_rsa.pub <span class="hljs-variable">$i</span>;<span class="hljs-keyword">done</span></span><br></code></pre></td></tr></table></figure><p>关机快照（集群基础环境）poweroff</p><h2 id="在master节点初始化Kubernetes"><a href="#在master节点初始化Kubernetes" class="headerlink" title="在master节点初始化Kubernetes"></a>在master节点初始化Kubernetes</h2><p><span style=color:red>以下操作在master节点操作</span></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus">kubeadm init \<br>  <span class="hljs-attr">--apiserver-advertise-address</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">48.100</span> \<br>  <span class="hljs-attr">--image-repository</span> registry<span class="hljs-selector-class">.aliyuncs</span>.com/google_containers \<br>  <span class="hljs-attr">--kubernetes-version</span> v1.<span class="hljs-number">26.1</span> \<br>  <span class="hljs-attr">--service-cidr</span>=<span class="hljs-number">10.96</span>.<span class="hljs-number">0.0</span>/<span class="hljs-number">12</span> \<br>  <span class="hljs-attr">--pod-network-cidr</span>=<span class="hljs-number">10.244</span>.<span class="hljs-number">0.0</span>/<span class="hljs-number">16</span> \<br>  <span class="hljs-attr">--cri-socket</span>=unix:<span class="hljs-comment">///var/run/cri-dockerd.sock \</span><br>  <span class="hljs-attr">--ignore-preflight-errors</span>=<span class="hljs-attribute">all</span><br><br>–apiserver-advertise-address：集群通告地址<br>–image-repository：由于默认拉取镜像地址k8s<span class="hljs-selector-class">.gcr</span>.io国内无法访问，这里指定阿里云镜像仓库地址<br>–kubernetes-version：K8s版本，与上面安装的一致<br>–service-cidr：集群内部虚拟网络，Pod统一访问入口<br>–pod-network-cidr：Pod网络，与下面部署的CNI网络组件yaml中保持一致<br>–cri-socket：指定cri-dockerd接口，如果是containerd则使用unix:<span class="hljs-comment">///run/containerd/containerd.sock</span><br></code></pre></td></tr></table></figure><p>PS：</p><p>1、如果不记得token，利用kubeadm命令重新生成token<br>kubeadm token create –print-join-command –ttl&#x3D;0<br>#–ttl&#x3D;0:配置该参数，生成的token将永不失效</p><p>2、如果初始化master有问题，可将集群重置，再次初始化master，其他节点重新加入前也要kubeadm reset</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">kubeadm reset<br></code></pre></td></tr></table></figure><p>保存记录的信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">[addons] Applied essential addon: kube-proxy<br><br>Your Kubernetes control-plane has initialized successfully!<br><br>To start using your cluster, you need to run the following as a regular user:<br><br>  <span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/.kube<br>  sudo <span class="hljs-built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="hljs-variable">$HOME</span>/.kube/config<br>  sudo <span class="hljs-built_in">chown</span> $(<span class="hljs-built_in">id</span> -u):$(<span class="hljs-built_in">id</span> -g) <span class="hljs-variable">$HOME</span>/.kube/config<br><br>Alternatively, <span class="hljs-keyword">if</span> you are the root user, you can run:<br><br>  <span class="hljs-built_in">export</span> KUBECONFIG=/etc/kubernetes/admin.conf<br><br>You should now deploy a pod network to the cluster.<br>Run <span class="hljs-string">&quot;kubectl apply -f [podnetwork].yaml&quot;</span> with one of the options listed at:<br>  https://kubernetes.io/docs/concepts/cluster-administration/addons/<br><br>Then you can <span class="hljs-built_in">join</span> any number of worker nodes by running the following on each as root:<br><br>kubeadm <span class="hljs-built_in">join</span> 192.168.48.100:6443 --token 66nkqe.7yo5d2r48wor8r8l \<br>        --discovery-token-ca-cert-hash sha256:5f62fbf4775349e16431fc62e25c1feed9e5a6c76ab457a2641b371386d1170e<br><br></code></pre></td></tr></table></figure><h3 id="使用kubectl"><a href="#使用kubectl" class="headerlink" title="使用kubectl"></a>使用kubectl</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/.kube<br>sudo <span class="hljs-built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="hljs-variable">$HOME</span>/.kube/config<br>sudo <span class="hljs-built_in">chown</span> $(<span class="hljs-built_in">id</span> -u):$(<span class="hljs-built_in">id</span> -g) <span class="hljs-variable">$HOME</span>/.kube/config<br></code></pre></td></tr></table></figure><h3 id="安装kubectl命令补全"><a href="#安装kubectl命令补全" class="headerlink" title="安装kubectl命令补全"></a>安装kubectl命令补全</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install -y bash-completion<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;source /usr/share/bash-completion/bash_completion&#x27;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">source</span> ~/.bashrc<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;source &lt;(kubectl completion bash)&#x27;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure><h2 id="node01、node02加入集群"><a href="#node01、node02加入集群" class="headerlink" title="node01、node02加入集群"></a>node01、node02加入集群</h2><p>两个node都打</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">kubeadm join 192.168.48.100<span class="hljs-function">:6443</span> <span class="hljs-params">--token</span> 66nkqe.7yo5d2r48wor8r8l \<br>        <span class="hljs-params">--discovery-token-ca-cert-hash</span> sha256<span class="hljs-function">:5f62fbf4775349e16431fc62e25c1feed9e5a6c76ab457a2641b371386d1170e</span> <span class="hljs-params">--cri-socket</span> unix:<span class="hljs-string">///var/run/cri-dockerd.sock</span><br></code></pre></td></tr></table></figure><h2 id="master配置网络插件calico"><a href="#master配置网络插件calico" class="headerlink" title="master配置网络插件calico"></a>master配置网络插件calico</h2><p>如果calico的文件下载不了，直接用文章最顶部的资源，已经给你们下载好了</p><p><span style=color:red>以下操作在master节点操作</span></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">增加解析记录<br>echo <span class="hljs-string">&#x27;185.199.108.133 raw.githubusercontent.com&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>hosts <br>curl https:<span class="hljs-regexp">//</span>raw.githubusercontent.com<span class="hljs-regexp">/projectcalico/</span>calico<span class="hljs-regexp">/v3.25.1/m</span>anifests/calico.yaml -O<br>kubectl apply -f calico.yaml<br></code></pre></td></tr></table></figure><p>PS：如果部署失败，则删除calico ：kubectl  delete -f calico.yaml</p><p>验证集群节点状态正常</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">kubectl get nodes<br>kubectl label <span class="hljs-keyword">node</span> <span class="hljs-title">node01</span> <span class="hljs-keyword">node</span><span class="hljs-title">-role</span>.kubernetes.io/<span class="hljs-attr">worker=</span>worker<br>kubectl label <span class="hljs-keyword">node</span> <span class="hljs-title">node02</span> <span class="hljs-keyword">node</span><span class="hljs-title">-role</span>.kubernetes.io/<span class="hljs-attr">worker=</span>worker<br></code></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-comment">#正常信息</span><br>[root@<span class="hljs-keyword">master</span> <span class="hljs-title">~]# kubectl</span> get nodes<br>NAME     STATUS   ROLES           AGE   <span class="hljs-keyword">VERSION</span><br><span class="hljs-keyword">master</span>   <span class="hljs-title">Ready</span>    control-plane   <span class="hljs-number">53m</span>   v1.<span class="hljs-number">26.1</span><br>node01   Ready    worker          <span class="hljs-number">46m</span>   v1.<span class="hljs-number">26.1</span><br>node02   Ready    worker          <span class="hljs-number">46m</span>   v1.<span class="hljs-number">26.1</span><br><span class="hljs-comment">##要过1分钟才会为Ready</span><br></code></pre></td></tr></table></figure><h2 id="部署Dashboard"><a href="#部署Dashboard" class="headerlink" title="部署Dashboard"></a>部署Dashboard</h2><p>如果dashboard的文件下载不了，直接用文章最顶部的资源，已经给你们下载好了</p><p>在master节点</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">wget</span> <span class="hljs-string">https://raw.githubusercontent.com/cby-chen/Kubernetes/main/yaml/dashboard.yaml</span><br><br><span class="hljs-comment">#默认Dashboard只能集群内部访问，修改Service为NodePort类型，暴露到外部访问，修改如下：</span><br><span class="hljs-string">vim</span> <span class="hljs-string">dashboard.yaml</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">k8s-app:</span> <span class="hljs-string">kubernetes-dashboard</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">kubernetes-dashboard</span><br>  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kubernetes-dashboard</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">443</span><br>      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">8443</span><br>      <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30001</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">k8s-app:</span> <span class="hljs-string">kubernetes-dashboard</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span><br></code></pre></td></tr></table></figure><img src="../img/dK8s1.26.1/8f9a85eb20ed5fc6ab567942b969fe96d74570db.png" alt="image-20230512171256847" style="zoom:67%;" /><p>位置顺序要按如图所示</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs nsis">kubectl apply -f dashboard.yaml<br>kubectl get pods -n kubernetes-dashboard<br><span class="hljs-comment">#以下是正常信息 （Running）</span><br>[root@master ~]<span class="hljs-comment"># kubectl get pods -n kubernetes-dashboard</span><br><span class="hljs-keyword">NAME</span>                                        READY   STATUS    RESTARTS   AGE<br>dashboard-metrics-scraper-<span class="hljs-number">7</span>bc864c59-krfmg   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m9s<br>kubernetes-dashboard-<span class="hljs-number">6</span>c7ccbcf87-krzr6       <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running   <span class="hljs-number">0</span>          <span class="hljs-number">2</span>m9s<br><br><br>创建service account并绑定默认cluster-<span class="hljs-literal">admin</span>管理员群角色<br><span class="hljs-comment">#创建用户</span><br>kubectl create serviceaccount dashboard-<span class="hljs-literal">admin</span> -n kubernetes-dashboard<br><span class="hljs-comment">#用户授权</span><br>kubectl create clusterrolebinding dashboard-<span class="hljs-literal">admin</span> --clusterrole=cluster-<span class="hljs-literal">admin</span> --serviceaccount=kubernetes-dashboard:dashboard-<span class="hljs-literal">admin</span><br><span class="hljs-comment">#获取用户Token</span><br>kubectl create token dashboard-<span class="hljs-literal">admin</span> -n kubernetes-dashboard<br><br>eyJhbGciOiJSUzI1NiIsImtpZCI6IlNkWU1MVzBVV3ZNTXM1NVBHUlJmZlhHd2VtbGRiRW9vWUFtTk45eXZGb1EifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNjg0NDg2NzM2LCJpYXQiOjE2ODQ0ODMxMzYsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJkYXNoYm9hcmQtYWRtaW4iLCJ1aWQiOiJhMDcxYWVhYi1jOTkyLTRjNDAtOTA2ZC0yMGYwZjZmMjdmMzUifX0sIm5iZiI6MTY4NDQ4MzEzNiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmVybmV0ZXMtZGFzaGJvYXJkOmRhc2hib2FyZC1hZG1pbiJ9.osqhDrXydY_KoiXE61qlbtIAY6kKGh3Se2oQdNQ4Rl0doDB1yQTA_6REKC24AKBWvllaQdWhUHH-<span class="hljs-number">76</span>ch6C9W2Kus7i00efTPuvDIJGsDK3c_jSR0OdL2beqwqZNTOaBc-RoDn0Q5BpTqS2qsjhIAN4px4d4vrhSOF2K3hQusaYtqF46bvaSvFPHAuzePLIgSIp69qYiqxQFBCHenfajx5m4LmgkhlSDA6Wf8ISs7tDKwPsSGwPCKkxgs0i8pzTSqld9raGr0fLN67LeWpGMP8m8tkmOMXXZpx9cFdOShzACj29GSt8s3tYBt77uAv2dTTp1TPAkyHHOkOKgv4kfXqw<br></code></pre></td></tr></table></figure><p>查询pod状态</p><p><img src="/../img/dK8s1.26.1/23f5aebbfbff61d18504aec0426069a152465f7d.png" alt="image-20230519155939383"></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@<span class="hljs-keyword">master</span> <span class="hljs-title">~]# kubectl</span> get pod,svc -o wide -n kubernetes-dashboard<br></code></pre></td></tr></table></figure><p>浏览器访问https:&#x2F;&#x2F;所在node的ip:30001<br><a href="https://192.168.48.101:30001/">https://192.168.48.101:30001</a>    因本pod在node01，请根据实际情况修改。<br>输入token</p><p><img src="/../img/dK8s1.26.1/392cff12471a1bfd15d67213f8e461adc1690a9b.png" alt="image-20230519160425152"></p><h2 id="测试集群"><a href="#测试集群" class="headerlink" title="测试集群"></a>测试集群</h2><p>master</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">kubectl create deployment nginx <span class="hljs-attribute">--image</span>=nginx<br>kubectl expose deployment nginx <span class="hljs-attribute">--port</span>=80 <span class="hljs-attribute">--type</span>=NodePort<br>kubectl <span class="hljs-built_in">get</span> pod,svc,deployment -o wide<br></code></pre></td></tr></table></figure><p><img src="/../img/dK8s1.26.1/b99a6da4e87724539fd69eeacff17a19e35aeb8c.png" alt="image-20230519160645944"></p><p>如图可知，pod在node02，所以浏览器访问ip:31971</p><p><a href="http://192.168.48.102:31971/">http://192.168.48.102:31971</a></p><p><img src="/../img/dK8s1.26.1/1f5a167746606c84af0ea8fe5859cc81a5055d7d.png" alt="image-20230519160800617"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>K8s</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GitBash笔记</title>
    <link href="/2023/04/30/GitBash/"/>
    <url>/2023/04/30/GitBash/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="GitBash笔记"><a href="#GitBash笔记" class="headerlink" title="GitBash笔记"></a>GitBash笔记</h1><p>下载gitbash工具<a href="https://gitforwindows.org/">Git for Windows</a>安装教程在**<u>文末</u>**</p><p>·官网下载 <a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a><br>·Windows系统直接用<a href="https://gitforwindows.org/">https://gitforwindows.org/</a></p><h2 id="基本环境"><a href="#基本环境" class="headerlink" title="基本环境"></a>基本环境</h2><h3 id="定义用户名和邮箱"><a href="#定义用户名和邮箱" class="headerlink" title="定义用户名和邮箱"></a>定义用户名和邮箱</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs verilog">git <span class="hljs-keyword">config</span> --<span class="hljs-keyword">global</span> user<span class="hljs-variable">.name</span> <span class="hljs-string">&quot;xxx&quot;</span><br>git <span class="hljs-keyword">config</span> --<span class="hljs-keyword">global</span> user<span class="hljs-variable">.email</span> <span class="hljs-string">&quot;xxx@xxx.xxx&quot;</span><br><br>检查设对没有<br>git <span class="hljs-keyword">config</span> user<span class="hljs-variable">.name</span><br>git <span class="hljs-keyword">config</span> user<span class="hljs-variable">.email</span><br></code></pre></td></tr></table></figure><p><img src="/../img/GitBash/58e73758ae7c606bc967c3e090df2e69550a8886.png" alt="image-20230412004900608">用户名，邮箱就是你绑定的邮箱</p><h3 id="生成远程连接密钥"><a href="#生成远程连接密钥" class="headerlink" title="生成远程连接密钥"></a>生成远程连接密钥</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs arcade">ssh-keygen -t rsa -C <span class="hljs-string">&quot;xxx@xxx.xxx&quot;</span><br>查看密钥<br>cat ~<span class="hljs-regexp">/.ssh/i</span>d_rsa.pub<br><br>会有一串密密麻麻的文字，全部复制到这 生成就行了<br></code></pre></td></tr></table></figure><p>全局使用</p><p><img src="/../img/GitBash/40216bcf81c291877129352b3e60819b7fabe274.png" alt="image-20230412005423098"></p><h3 id="测试远程连接"><a href="#测试远程连接" class="headerlink" title="测试远程连接"></a>测试远程连接</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ssh</span> -T git<span class="hljs-variable">@github</span>.com<br></code></pre></td></tr></table></figure><h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><p>官方给了一个较好的解释文档</p><p><img src="/../img/GitBash/60bb244f9e296e276d574e0c708e36a75f2f761d.png" alt="image-20230412022423485"></p><h3 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-meta">#初始化一个新的git仓库</span><br>git <span class="hljs-keyword">init</span><br></code></pre></td></tr></table></figure><h3 id="README-MD文件"><a href="#README-MD文件" class="headerlink" title="README.MD文件"></a>README.MD文件</h3><p>没有它会报错，如果你没准备可以用以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;# 123456&quot;</span> &gt;&gt; README.md<br></code></pre></td></tr></table></figure><p><code>README.md</code>是一个文本文件，通常在Git项目的根目录中，用于向其他人介绍该项目的信息。其中，<code>.md</code>是Markdown（标记语言）的文件格式，在GitHub等网站中被广泛使用。</p><p>具体来说，<code>README.md</code>文件通常包含以下信息：</p><ol><li>项目名称和描述</li><li>如何安装和运行该项目</li><li>项目的使用方法和注意事项</li><li>贡献者的信息和代码许可</li><li>项目的版本历史和最新更新内容等等。</li></ol><p>通过编写<code>README.md</code>文件，可以提供给其他人一个简洁、清晰的项目概述，方便其他人快速了解和使用该项目。同时，也可以通过修改<code>README.md</code>文件来更新和维护项目的最新信息和文档。</p><p>在GitHub等网站中，<code>README.md</code>文件会被自动渲染为网页显示，因此对项目的宣传和文档编写具有重要意义。</p><h3 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">将文件添加到git仓库<br>git <span class="hljs-built_in">add</span> &lt;file&gt;<br>例如 ：<br>注意指令末尾小数点<br>git <span class="hljs-built_in">add</span> . <br><span class="hljs-comment">#将项目的所有文件添加到仓库中</span><br></code></pre></td></tr></table></figure><h3 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">git</span> commit -m <span class="hljs-string">&quot;message&quot;</span><br>提交更改，并附上提交信息<br></code></pre></td></tr></table></figure><h3 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment">#查看Git仓库状态</span><br><span class="hljs-attribute">git</span> status<br></code></pre></td></tr></table></figure><h3 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">git <span class="hljs-built_in">log</span><br>查看提交记录<br></code></pre></td></tr></table></figure><h3 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone "></a>git clone <url></h3><p><img src="/../img/GitBash/98806c97ba049a4349a5c30259daf2eaf217673c.png" alt="image-20230412012126767"></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://github.com······<br><span class="hljs-comment">#克隆一个Git仓库到本地</span><br></code></pre></td></tr></table></figure><h3 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h3><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-meta">#将本地的更改推送到远程仓库</span><br>git <span class="hljs-keyword">push</span><br></code></pre></td></tr></table></figure><h3 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment">#从远程仓库拉取最新更改</span><br><span class="hljs-attribute">git</span> pull<br></code></pre></td></tr></table></figure><h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment">#查看和管理分支</span><br><span class="hljs-attribute">git</span> branch<br></code></pre></td></tr></table></figure><h3 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge "></a>git merge <branch></h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">git <span class="hljs-built_in">merge</span><br><span class="hljs-comment">#将一个分支合并到当前分支中</span><br></code></pre></td></tr></table></figure><h3 id="git-stash："><a href="#git-stash：" class="headerlink" title="git stash："></a>git stash：</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment">#将当前的更改保存到“存储区”，以便以后再次使用</span><br><span class="hljs-attribute">git</span> stash<br></code></pre></td></tr></table></figure><h3 id="git-remote-add-："><a href="#git-remote-add-：" class="headerlink" title="git remote add  ："></a>git remote add <name> <url>：</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta">#将远程仓库添加到本地Git仓库中</span><br>关联本地仓库和远程仓库<br></code></pre></td></tr></table></figure><h2 id="实例操作"><a href="#实例操作" class="headerlink" title="实例操作"></a>实例操作</h2><p><span style=color:red;font-size:18px>请先完成 <strong>1.基本环境</strong>的所有步骤</span></p><p>假设我要上传项目</p><h3 id="GitHub建好一个新库"><a href="#GitHub建好一个新库" class="headerlink" title="GitHub建好一个新库"></a>GitHub建好一个新库</h3><p><img src="/../img/GitBash/534f06d9a51cf391c26370aa6132f7e8eca7fabc.png" alt="image-20230412021445830"></p><h3 id="在本地也创建一个本地库"><a href="#在本地也创建一个本地库" class="headerlink" title="在本地也创建一个本地库"></a>在本地也创建一个本地库</h3><p>勾选显示隐藏的项目</p><p><img src="/../img/GitBash/44c261e2a705959f8f0ceb87f35e2591e7c508c9.png" alt="image-20230412012857747"></p><p><img src="/../img/GitBash/7daadf525c1c8828d00b1e0a4e471976ad1a8362.png" alt="image-20230412021542032"></p><p>右键空白处</p><p><img src="/../img/GitBash/86b28b1209dc8c90595fcf9864967f8190863acb.png" alt="image-20230412021558652"></p><h3 id="初始化本地仓库"><a href="#初始化本地仓库" class="headerlink" title="初始化本地仓库"></a>初始化本地仓库</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">git <span class="hljs-keyword">init</span><br></code></pre></td></tr></table></figure><p><img src="/../img/GitBash/ff6eb402955eb345213491c87d72a15ef389ed9f.png" alt="image-20230412021648634"></p><h3 id="将项目的所有文件添加到本地仓库中"><a href="#将项目的所有文件添加到本地仓库中" class="headerlink" title="将项目的所有文件添加到本地仓库中"></a>将项目的所有文件添加到本地仓库中</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">git <span class="hljs-built_in">add</span> .<br><span class="hljs-comment">#注意小数点</span><br></code></pre></td></tr></table></figure><h3 id="添加README-md文件"><a href="#添加README-md文件" class="headerlink" title="添加README.md文件"></a>添加README.md文件</h3><p>要求当前文件下有这个文件，没有会报错</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">git <span class="hljs-built_in">add</span> README.md<br></code></pre></td></tr></table></figure><h3 id="提交到仓库，附上信息备注"><a href="#提交到仓库，附上信息备注" class="headerlink" title="提交到仓库，附上信息备注"></a>提交到仓库，附上信息备注</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">git</span> commit -m <span class="hljs-string">&quot;上传测试文件&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/../img/GitBash/bde6c3201ca433b1fef97b64df466e8d5b404985.png" alt="image-20230412021712910"></p><h3 id="修改分支（名字自定）"><a href="#修改分支（名字自定）" class="headerlink" title="修改分支（名字自定）"></a>修改分支（名字自定）</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">git branch -M <span class="hljs-selector-tag">main</span><br></code></pre></td></tr></table></figure><p><code>git branch -M main</code>命令用于将当前分支的名称修改为<code>main</code>，并将所有已有分支指向新的主分支<code>main</code>。</p><h3 id="将本地仓库关联到GitHub仓库"><a href="#将本地仓库关联到GitHub仓库" class="headerlink" title="将本地仓库关联到GitHub仓库"></a>将本地仓库关联到GitHub仓库</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">git</span> remote <span class="hljs-keyword">add</span> origin https:<span class="hljs-comment">//github.com/······</span><br></code></pre></td></tr></table></figure><p>https的地址，如果https不行也可以换成ssh地址</p><p><img src="/../img/GitBash/405ae6f37791bad3e46a087d3170def4041dfd47.png" alt="image-20230412021750914"></p><h3 id="拉取最新更改"><a href="#拉取最新更改" class="headerlink" title="拉取最新更改"></a>拉取最新更改</h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">git pull origin main<br>##上传github之前pull一下,第一次创建的库没有main分支,所有第一次不用打这个，以后建议，习惯的pull以下<br></code></pre></td></tr></table></figure><h3 id="上传代码至GitHub远程仓库"><a href="#上传代码至GitHub远程仓库" class="headerlink" title="上传代码至GitHub远程仓库"></a>上传代码至GitHub远程仓库</h3><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">git <span class="hljs-built_in">push</span> -u <span class="hljs-built_in">origin</span> main<br></code></pre></td></tr></table></figure><p><img src="/../img/GitBash/536ee70341cf5273432f947c3ab29f6c20f6f93f.png" alt="image-20230412021831978"></p><p><img src="/../img/GitBash/9132fb58eda2e345b8fd5edca2e56d5b240338e1.png" alt="image-20230412021905011"></p><h2 id="克隆代码"><a href="#克隆代码" class="headerlink" title="克隆代码"></a>克隆代码</h2><p>###从远程库克隆<br>这是针对在本地的一个空的项目，要从远程库考代码下来，一般有<strong>两个</strong>步骤：</p><p><strong>1.在本地想要克隆的文件夹下面创建GIT版本库，以及建立远程库的连接。（详细步骤可以查看前面章节内容）</strong></p><p>####建好本地库，基础环境 初始化等步骤，最后pull一下</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp">git <span class="hljs-keyword">init</span><br>git remote <span class="hljs-keyword">add</span> origin https:<span class="hljs-comment">//github.com/·······</span><br>git pull origin main<br></code></pre></td></tr></table></figure><p><img src="/../img/GitBash/cd960cede63ee9bda65a9e114fb341c6375fb4b4.png" alt="image-20230412020003450"></p><p><strong>2.用git clone克隆远程库所在项目的代码，比如要克隆上一节的代码，用下面命令即可</strong></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://github.com/·······<br></code></pre></td></tr></table></figure><p><img src="/../img/GitBash/97a6403c89ccd5dfd51cf2bb7844ad045d34771e.png" alt="image-20230412021953276"></p><h2 id="更新代码"><a href="#更新代码" class="headerlink" title="更新代码"></a>更新代码</h2><p>在本地仓库添加一个test2.txt</p><p><img src="/../img/GitBash/f78640adb66874cff18c24fb1c4173118503b68e.png" alt="image-20230412020630452"></p><ol><li>查看当前的git仓库状态</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">git status</span><br></code></pre></td></tr></table></figure><ol start="2"><li>更新test2.txt文件</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">git <span class="hljs-built_in">add</span> test2.txt<br></code></pre></td></tr></table></figure><ol start="3"><li>对test2.txt文件注入备注信息</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">git</span> commit -m <span class="hljs-string">&quot;上传test2.txt&quot;</span><br></code></pre></td></tr></table></figure><ol start="4"><li>拉取main分支最新代码</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">git pull origin <span class="hljs-selector-tag">main</span><br></code></pre></td></tr></table></figure><ol start="5"><li>push到远程main分支上</li></ol><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">git <span class="hljs-built_in">push</span> <span class="hljs-built_in">origin</span> main<br></code></pre></td></tr></table></figure><p>你也可以更新全部</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs maxima">git add *<br>git commit -m <span class="hljs-string">&quot;上传所有文件&quot;</span><br>git pull <span class="hljs-built_in">origin</span> main<br>git <span class="hljs-built_in">push</span> <span class="hljs-built_in">origin</span> main<br></code></pre></td></tr></table></figure><p>打开GitHub已经同步了</p><p><img src="/../img/GitBash/c836702bafb01847aad25089b436afdfc3c8d995.png" alt="image-20230412020938339"></p><h2 id="安装教程"><a href="#安装教程" class="headerlink" title="安装教程"></a>安装教程</h2><h3 id="建议新建一个文件夹，放git，作为安装路径"><a href="#建议新建一个文件夹，放git，作为安装路径" class="headerlink" title="建议新建一个文件夹，放git，作为安装路径"></a>建议新建一个文件夹，放git，作为安装路径</h3><p><img src="/../img/GitBash/59b310da6cac2759c4dad518aa320a35c753c388.png" alt="image-20230412001233082"></p><p><img src="/../img/GitBash/e1ae716c98cd8f95e02e07e0d5d8f9ad75801b59.png" alt="image-20230412001348748"></p><h3 id="更换路径"><a href="#更换路径" class="headerlink" title="更换路径"></a>更换路径</h3><p><img src="/../img/GitBash/07c2d38ab489d892fb7764a580efa632acbd2023.png" alt="image-20230412001424892"></p><h3 id="按需自助选择"><a href="#按需自助选择" class="headerlink" title="按需自助选择"></a>按需自助选择</h3><p><img src="/../img/GitBash/aeda6d2f6bfb12f8c73fd092fc04125883f829ca.png" alt="image-20230412001812933"></p><p><img src="/../img/GitBash/dc57717b7f1110709dfbff07630513010c05742b.png" alt="image-20230412001959068"></p><h3 id="选择开始文件夹"><a href="#选择开始文件夹" class="headerlink" title="选择开始文件夹"></a>选择开始文件夹</h3><p>方框内 Git 可改为其他名字，也可点击 “Browse…” 选择其他文件夹或者给”Don’t create a Start Menu folder” 打勾不要文件夹，点击 [next]</p><p><img src="/../img/GitBash/e94d7b0df64115e771ce255f7e86cab7c63c19ec.png" alt="image-20230412002158820"></p><h3 id="Git编辑器"><a href="#Git编辑器" class="headerlink" title="Git编辑器"></a>Git编辑器</h3><p><img src="/../img/GitBash/ba491439ced78aef015bd5bbafc90dccfd5a48e9.png" alt="image-20230412002151766"></p><h3 id="决定初始化新项目-仓库-的主干名字"><a href="#决定初始化新项目-仓库-的主干名字" class="headerlink" title="决定初始化新项目(仓库)的主干名字"></a>决定初始化新项目(仓库)的主干名字</h3><p><img src="/../img/GitBash/dddd718c71ad2392e6cfc4166d20a6e54f66f2c2.png" alt="image-20230412002328765"></p><h3 id="调整环境变量"><a href="#调整环境变量" class="headerlink" title="调整环境变量"></a>调整环境变量</h3><p><img src="/../img/GitBash/0ffa79254e4ef5ed0d31bf38363c4eafbe49900f.png" alt="image-20230412002502629"></p><h3 id="选择SSH执行文件"><a href="#选择SSH执行文件" class="headerlink" title="选择SSH执行文件"></a>选择SSH执行文件</h3><p><img src="/../img/GitBash/a9841e6a5668e102ce9cc6c5dea649ef9b96bd61.png" alt="image-20230412002529388"></p><h3 id="选择HTTPS后端传输"><a href="#选择HTTPS后端传输" class="headerlink" title="选择HTTPS后端传输"></a>选择HTTPS后端传输</h3><p>注意：如果具有企业管理证书的组织中使用Git，就需要使用安全通道。</p><p><img src="/../img/GitBash/ef6b6ebd40cfbe21eb565a0bd6107031fb9fc6de.png" alt="image-20230412003005628"></p><h3 id="配置行尾符号转换"><a href="#配置行尾符号转换" class="headerlink" title="配置行尾符号转换"></a>配置行尾符号转换</h3><p><img src="/../img/GitBash/435edd74569571f7af49772b297b2ca6a6803809.png" alt="image-20230412003215788"></p><h3 id="配置终端模拟器以与-Git-Bash-一起使用"><a href="#配置终端模拟器以与-Git-Bash-一起使用" class="headerlink" title="配置终端模拟器以与 Git Bash 一起使用"></a>配置终端模拟器以与 Git Bash 一起使用</h3><p><img src="/../img/GitBash/092402ecec84b2b1d2c66d65d7dcac010d6e9091.png" alt="image-20230412003320788"></p><h3 id="选择默认的-git-pull-模式"><a href="#选择默认的-git-pull-模式" class="headerlink" title="选择默认的 git pull 模式"></a>选择默认的 git pull 模式</h3><p><code>git pull</code> 就是获取最新的远程仓库分支到本地，并与本地分支合并。</p><p><img src="/../img/GitBash/c9f6c5f14c09d7640f421bb6ab19141cd33aa846.png" alt="image-20230412003411911"></p><h3 id="选择一个凭证帮助程序"><a href="#选择一个凭证帮助程序" class="headerlink" title="选择一个凭证帮助程序"></a>选择一个凭证帮助程序</h3><p><img src="/../img/GitBash/d13036dc15fe51c408fae1c0cfc8956b68f043f4.png" alt="image-20230412003524413"></p><h3 id="配置额外的选项"><a href="#配置额外的选项" class="headerlink" title="配置额外的选项"></a>配置额外的选项</h3><p>配置建议两个都选</p><p><img src="/../img/GitBash/91b859e7561297074a5b07826757e8d4b47db990.png" alt="image-20230412003604092"></p><h3 id="配置实验性选择"><a href="#配置实验性选择" class="headerlink" title="配置实验性选择"></a>配置实验性选择</h3><p><img src="/../img/GitBash/f1ee851e62e8b3f64add0f38616858324428f4f7.png" alt="image-20230412003707549"></p><p>安装完成！！</p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>GitBash</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hadoop组件部署</title>
    <link href="/2023/04/13/Hadoop_zj/"/>
    <url>/2023/04/13/Hadoop_zj/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Hadoop组件部署"><a href="#Hadoop组件部署" class="headerlink" title="Hadoop组件部署"></a>Hadoop组件部署</h1><p><a href="https://blog.qianyios.top/2023/03/24/Hadoop/">Hadoop部署 - 严千屹 (qianyios.top)</a>本笔记建立在Hadoop伪分布机子上，可以前往查看安装机子</p><h2 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h2><table><thead><tr><th align="center">名称</th><th align="center">ip</th></tr></thead><tbody><tr><td align="center">zk01</td><td align="center">192.168.48.11</td></tr><tr><td align="center">zk02</td><td align="center">192.168.48.12</td></tr><tr><td align="center">zk03</td><td align="center">192.168.48.13</td></tr></tbody></table><h3 id="设置hosts"><a href="#设置hosts" class="headerlink" title="设置hosts"></a>设置hosts</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-string">[root@localhost ~]</span># cat /etc/hosts<br><span class="hljs-number">127.0.0.1</span>   localhost localhost.localdomain localhost4 localhost4.localdomain4<br>::<span class="hljs-number">1</span>         localhost localhost.localdomain localhost6 localhost6.localdomain6<br><span class="hljs-number">192.168.48.11</span> zk01<br><span class="hljs-number">192.168.48.12</span> zk02<br><span class="hljs-number">192.168.48.13</span> zk03<br></code></pre></td></tr></table></figure><h3 id="更改主机名"><a href="#更改主机名" class="headerlink" title="更改主机名"></a>更改主机名</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">zk01</span> &amp;&amp; <span class="hljs-string">bash</span><br></code></pre></td></tr></table></figure><h3 id="检查java版本"><a href="#检查java版本" class="headerlink" title="检查java版本"></a>检查java版本</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">[root@zk01 ~]<span class="hljs-comment"># java -version</span><br><span class="hljs-keyword">java </span>version <span class="hljs-string">&quot;1.8.0_162&quot;</span><br><span class="hljs-keyword">Java(TM) </span>SE Runtime Environment (<span class="hljs-keyword">build </span><span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">0</span>_162-<span class="hljs-keyword">b12)</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">Java </span>HotSpot(TM) <span class="hljs-number">64</span>-<span class="hljs-keyword">Bit </span>Server VM (<span class="hljs-keyword">build </span><span class="hljs-number">25</span>.<span class="hljs-number">162</span>-<span class="hljs-keyword">b12, </span>mixed mode)<br></code></pre></td></tr></table></figure><h3 id="检查hadoop版本"><a href="#检查hadoop版本" class="headerlink" title="检查hadoop版本"></a>检查hadoop版本</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@zk01 ~]<span class="hljs-comment"># hadoop version</span><br>Hadoop <span class="hljs-number">3.1</span>.<span class="hljs-number">3</span><br>Source code repository https:<span class="hljs-regexp">//gi</span>tbox.apache.org<span class="hljs-regexp">/repos/</span>asf/hadoop.git -r ba631c436b806728f8ec2f54ab1e289526c90579<br>Compiled by ztang on <span class="hljs-number">2019</span>-<span class="hljs-number">09</span>-<span class="hljs-number">12</span>T02:<span class="hljs-number">47</span>Z<br>Compiled with protoc <span class="hljs-number">2.5</span>.<span class="hljs-number">0</span><br>From source with checksum ec785077c385118ac91aadde5ec9799<br>This command was run using <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>share<span class="hljs-regexp">/hadoop/</span>common/hadoop-common-<span class="hljs-number">3.1</span>.<span class="hljs-number">3</span>.jar<br></code></pre></td></tr></table></figure><h3 id="安装zookeeper"><a href="#安装zookeeper" class="headerlink" title="安装zookeeper"></a>安装zookeeper</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> -xf apache-zookeeper-<span class="hljs-number">3</span>.<span class="hljs-number">8</span>.<span class="hljs-number">0</span>-bin.tar.gz -C /opt<br><span class="hljs-attribute">echo</span> <span class="hljs-string">&quot;export ZOOKEEPER_HOME=/opt/apache-zookeeper-3.8.0-bin&quot;</span> &gt;&gt; /etc/profile<br><span class="hljs-attribute">echo</span> <span class="hljs-string">&quot;export PATH=\$ZOOKEEPER_HOME/bin:\$PATH&quot;</span> &gt;&gt; /etc/profile<br><span class="hljs-attribute">source</span> /etc/profile<br><span class="hljs-attribute">cd</span> /opt/apache-zookeeper-<span class="hljs-number">3</span>.<span class="hljs-number">8</span>.<span class="hljs-number">0</span>-bin/<br><span class="hljs-attribute">cp</span> conf/zoo_sample.cfg conf/zoo.cfg<br><br><span class="hljs-attribute">vi</span> conf/zoo.cfg<br>    <span class="hljs-attribute">tickTime</span>=<span class="hljs-number">2000</span><br>    <span class="hljs-attribute">dataDir</span>=/opt/apache-zookeeper-<span class="hljs-number">3</span>.<span class="hljs-number">8</span>.<span class="hljs-number">0</span>-bin/data<br>    <span class="hljs-attribute">clientPort</span>=<span class="hljs-number">2181</span><br>    <span class="hljs-attribute">initLimit</span>=<span class="hljs-number">10</span><br>    <span class="hljs-attribute">syncLimit</span>=<span class="hljs-number">5</span><br>    <span class="hljs-attribute">maxClientCnxns</span>=<span class="hljs-number">60</span><br>    <span class="hljs-attribute">server</span>.<span class="hljs-number">1</span>=zk01:<span class="hljs-number">2888</span>:<span class="hljs-number">3888</span><br>    <span class="hljs-attribute">server</span>.<span class="hljs-number">2</span>=zk02:<span class="hljs-number">2888</span>:<span class="hljs-number">3888</span><br>    <span class="hljs-attribute">server</span>.<span class="hljs-number">3</span>=zk03:<span class="hljs-number">2888</span>:<span class="hljs-number">3888</span><br><br><span class="hljs-attribute">mkdir</span> /opt/apache-zookeeper-<span class="hljs-number">3</span>.<span class="hljs-number">8</span>.<span class="hljs-number">0</span>-bin/data<br><span class="hljs-attribute">echo</span> <span class="hljs-number">1</span> &gt; /opt/apache-zookeeper-<span class="hljs-number">3</span>.<span class="hljs-number">8</span>.<span class="hljs-number">0</span>-bin/data/myid<br><span class="hljs-attribute">cat</span> /opt/apache-zookeeper-<span class="hljs-number">3</span>.<span class="hljs-number">8</span>.<span class="hljs-number">0</span>-bin/data/myid<br></code></pre></td></tr></table></figure><h3 id="关机克隆出两台机-zk02-zk03"><a href="#关机克隆出两台机-zk02-zk03" class="headerlink" title="关机克隆出两台机 zk02 zk03"></a>关机克隆出两台机 zk02 zk03</h3><p>zk02  192.168.48.12</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">vi <span class="hljs-regexp">/opt/</span>apache-zookeeper-<span class="hljs-number">3.8</span>.<span class="hljs-number">0</span>-bin<span class="hljs-regexp">/data/myi</span>d<br><span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>zk03  192.168.48.13</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">vi <span class="hljs-regexp">/opt/</span>apache-zookeeper-<span class="hljs-number">3.8</span>.<span class="hljs-number">0</span>-bin<span class="hljs-regexp">/data/myi</span>d<br><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="互相ping测试连通性"><a href="#互相ping测试连通性" class="headerlink" title="互相ping测试连通性"></a>互相ping测试连通性</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-built_in">ping</span> zk01<br><span class="hljs-built_in">ping</span> zk02<br><span class="hljs-built_in">ping</span> zk03<br></code></pre></td></tr></table></figure><p>能互通说明成功</p><h3 id="开启zookeeper服务"><a href="#开启zookeeper服务" class="headerlink" title="开启zookeeper服务"></a>开启zookeeper服务</h3><p>需开启两台才能看见Mode: follower</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">zkServer.<span class="hljs-keyword">sh</span> start<br>zkServer.<span class="hljs-keyword">sh</span> status<br>zkServer.<span class="hljs-keyword">sh</span> <span class="hljs-keyword">stop</span><br></code></pre></td></tr></table></figure><h2 id="HBase安装"><a href="#HBase安装" class="headerlink" title="HBase安装"></a>HBase安装</h2><h3 id="安装hbase"><a href="#安装hbase" class="headerlink" title="安装hbase"></a>安装hbase</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@hadoop ~]<span class="hljs-comment"># ll</span><br>-rw-r--r--  <span class="hljs-number">1</span> root root <span class="hljs-number">232190985</span> <span class="hljs-number">3</span>月  <span class="hljs-number">17</span> <span class="hljs-number">19</span>:<span class="hljs-number">37</span> hbase-<span class="hljs-number">2.2</span>.<span class="hljs-number">2</span>-bin.tar.gz<br><br>tar -xf hbase-<span class="hljs-number">2.2</span>.<span class="hljs-number">2</span>-bin.tar.gz -C <span class="hljs-regexp">/usr/</span>local/<br>mv <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hbase-2.2.2 /u</span>sr<span class="hljs-regexp">/local/</span>hbase<br>echo <span class="hljs-string">&quot;export HBASE_HOME=/usr/local/hbase&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br>echo <span class="hljs-string">&quot;export PATH=\$PATH:\$HBASE_HOME/bin&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br>source <span class="hljs-regexp">/etc/</span>profile<br><br>------------------------------------------------------------------------<br>[root@hadoop ~]<span class="hljs-comment"># vi /usr/local/hbase/bin/hbase</span><br>CLASSPATH=<span class="hljs-variable">$&#123;CLASSPATH&#125;</span>:<span class="hljs-variable">$JAVA_HOME</span><span class="hljs-regexp">/lib/</span>tools.jar:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hbase/</span>lib/*<br>或<br>[root@hadoop ~]<span class="hljs-comment"># sed -i &quot;s/CLASSPATH=\$&#123;CLASSPATH&#125;:\$JAVA_HOME\/lib\/tools.jar/CLASSPATH=\$&#123;CLASSPATH&#125;:\$JAVA_HOME\/lib\/tools.jar:\/usr\/local\/hbase\/lib\/*/g&quot; /usr/local/hbase/bin/hbase</span><br>------------------------------------------------------------------------<br><br>[root@hadoop ~]<span class="hljs-comment"># hbase version                                                       SLF4J: Class path contains multiple SLF4J bindings.</span><br>SLF4J: Found binding <span class="hljs-keyword">in</span> [jar:file:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>share<span class="hljs-regexp">/hadoop/</span>common<span class="hljs-regexp">/lib/</span>slf4j-log4j12-<span class="hljs-number">1.7</span>.<span class="hljs-number">25</span>.jar!<span class="hljs-regexp">/org/</span>slf4j<span class="hljs-regexp">/impl/</span>StaticLoggerBinder.class]<br>SLF4J: Found binding <span class="hljs-keyword">in</span> [jar:file:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hbase/</span>lib<span class="hljs-regexp">/client-facing-thirdparty/</span>slf4j-log4j12-<span class="hljs-number">1.7</span>.<span class="hljs-number">25</span>.jar!<span class="hljs-regexp">/org/</span>slf4j<span class="hljs-regexp">/impl/</span>StaticLoggerBinder.class]<br>SLF4J: See http:<span class="hljs-regexp">//</span>www.slf4j.org/codes.html<span class="hljs-comment">#multiple_bindings for an explanation.</span><br>SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]<br>HBase <span class="hljs-number">2.2</span>.<span class="hljs-number">2</span><br>Source code repository git:<span class="hljs-regexp">//</span><span class="hljs-number">6</span>ad68c41b902<span class="hljs-regexp">/opt/</span>hbase-rm<span class="hljs-regexp">/output/</span>hbase revision=e6513a76c91cceda95dad7af246ac81d46fa2589<br>Compiled by hbase-rm on Sat Oct <span class="hljs-number">19</span> <span class="hljs-number">10</span>:<span class="hljs-number">10</span>:<span class="hljs-number">12</span> UTC <span class="hljs-number">2019</span><br>From source with checksum <span class="hljs-number">4</span>d23f97701e395c5d34db1882ac5021b<br></code></pre></td></tr></table></figure><h3 id="HBase配置"><a href="#HBase配置" class="headerlink" title="HBase配置"></a>HBase配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_162&quot;</span> &gt;&gt; <span class="hljs-variable">$HBASE_HOME</span>/conf/hbase-env.sh<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;export HBASE_CLASSPATH=/usr/local/hbase/conf&quot;</span> &gt;&gt; <span class="hljs-variable">$HBASE_HOME</span>/conf/hbase-env.sh<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;export HBASE_MANAGES_ZK=true&quot;</span> &gt;&gt; <span class="hljs-variable">$HBASE_HOME</span>/conf/hbase-env.sh<br><br>vi <span class="hljs-variable">$HBASE_HOME</span>/conf/hbase-site.xml<br>&lt;configuration&gt;<br>        &lt;property&gt;<br>                &lt;name&gt;hbase.rootdir&lt;/name&gt;<br>                &lt;value&gt;hdfs://yjx48:9000/hbase&lt;/value&gt;<br>        &lt;/property&gt;<br>        &lt;property&gt;<br>                &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;<br>                &lt;value&gt;<span class="hljs-literal">true</span>&lt;/value&gt;<br>        &lt;/property&gt;<br>        &lt;property&gt;<br>                &lt;name&gt;hbase.unsafe.stream.capability.enforce&lt;/name&gt;<br>                &lt;value&gt;<span class="hljs-literal">false</span>&lt;/value&gt;<br>        &lt;/property&gt;<br>&lt;/configuration&gt;<br></code></pre></td></tr></table></figure><h3 id="HBase启动"><a href="#HBase启动" class="headerlink" title="HBase启动"></a>HBase启动</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs awk">start-all.sh <br>start-hbase.sh<br>[root@hadoop hbase]<span class="hljs-comment"># jps</span><br><span class="hljs-number">16532</span> ResourceManager<br><span class="hljs-number">22502</span> HMaster-----------<br><span class="hljs-number">15799</span> NameNode<br><span class="hljs-number">16697</span> NodeManager<br><span class="hljs-number">23097</span> Jps<br><span class="hljs-number">15962</span> DataNode<br><span class="hljs-number">22666</span> HRegionServer-----------<br><span class="hljs-number">16223</span> SecondaryNameNode<br><span class="hljs-number">22431</span> HQuorumPeer<br>[root@hadoop ~]<span class="hljs-comment"># hbase shell</span><br>hbase(main):<span class="hljs-number">001</span>:<span class="hljs-number">0</span>&gt; list<br>TABLE<br><span class="hljs-number">0</span> row(s)<br>Took <span class="hljs-number">0.3118</span> seconds<br>=&gt; []<br>hbase(main):<span class="hljs-number">002</span>:<span class="hljs-number">0</span>&gt; <span class="hljs-keyword">exit</span><br></code></pre></td></tr></table></figure><h3 id="访问网页"><a href="#访问网页" class="headerlink" title="访问网页"></a>访问网页</h3><p>ip:16010</p><h3 id="HBase管理"><a href="#HBase管理" class="headerlink" title="HBase管理"></a>HBase管理</h3><table><thead><tr><th align="center">学号（S_No）</th><th align="center">姓名（S_Name）</th><th align="center">性别（S_Sex）</th><th align="center">年龄（S_Age）</th></tr></thead><tbody><tr><td align="center">2015001</td><td align="center">zhangsan</td><td align="center">male</td><td align="center">23</td></tr><tr><td align="center">2015002</td><td align="center">Mary</td><td align="center">female</td><td align="center">22</td></tr><tr><td align="center">2015003</td><td align="center">Lisi</td><td align="center">male</td><td align="center">24</td></tr></tbody></table><h4 id="创建学生表"><a href="#创建学生表" class="headerlink" title="创建学生表"></a>创建学生表</h4><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs excel">hbase(main)<span class="hljs-symbol">:004</span><span class="hljs-symbol">:0</span>&gt; create &#x27;student&#x27;,&#x27;no&#x27;,&#x27;name&#x27;,&#x27;sex&#x27;,&#x27;age&#x27;<br>Created table student<br>Took <span class="hljs-number">1.3125</span> seconds<br>=&gt; Hba<span class="hljs-symbol">se:</span><span class="hljs-symbol">:Ta</span>ble - student<br>hbase(main)<span class="hljs-symbol">:005</span><span class="hljs-symbol">:0</span>&gt; list<br>TABLE<br>student<br><span class="hljs-number">1</span> <span class="hljs-built_in">row</span>(s)<br>Took <span class="hljs-number">0.0074</span> seconds<br>=&gt; [<span class="hljs-string">&quot;student&quot;</span>]<br>#查看表结构<br>hbase(main)<span class="hljs-symbol">:001</span><span class="hljs-symbol">:0</span>&gt; describe &#x27;student&#x27;<br>Table student is ENABLED<br>student<br><span class="hljs-built_in">COLUMN</span> FAMILIES DESCRIPTION<br>&#123;NAME =&gt; &#x27;age&#x27;, VERSIONS =&gt; &#x27;<span class="hljs-number">1</span>&#x27;, EVICT_BLOCKS_ON_CLOSE =&gt; &#x27;<span class="hljs-built_in">false</span>&#x27;<br>.......<br></code></pre></td></tr></table></figure><h4 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h4><p>s001为行键</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">hbase</span><span class="hljs-params">(main)</span></span>:<span class="hljs-number">001</span>:<span class="hljs-number">0</span>&gt; scan <span class="hljs-string">&#x27;student&#x27;</span><br>ROW                        COLUMN+CELL<br><span class="hljs-number">0</span> <span class="hljs-built_in">row</span>(s)<br>Took <span class="hljs-number">0.2712</span> seconds<br><span class="hljs-function"><span class="hljs-title">hbase</span><span class="hljs-params">(main)</span></span>:<span class="hljs-number">002</span>:<span class="hljs-number">0</span>&gt; put <span class="hljs-string">&#x27;student&#x27;</span>,<span class="hljs-string">&#x27;s001&#x27;</span>,<span class="hljs-string">&#x27;no&#x27;</span>,<span class="hljs-string">&#x27;2015001&#x27;</span><br>Took <span class="hljs-number">0.0236</span> seconds<br><span class="hljs-function"><span class="hljs-title">hbase</span><span class="hljs-params">(main)</span></span>:<span class="hljs-number">003</span>:<span class="hljs-number">0</span>&gt; put <span class="hljs-string">&#x27;student&#x27;</span>,<span class="hljs-string">&#x27;s001&#x27;</span>,<span class="hljs-string">&#x27;name&#x27;</span>,<span class="hljs-string">&#x27;zhangsan&#x27;</span><br>Took <span class="hljs-number">0.0057</span> seconds<br><span class="hljs-function"><span class="hljs-title">hbase</span><span class="hljs-params">(main)</span></span>:<span class="hljs-number">004</span>:<span class="hljs-number">0</span>&gt; scan <span class="hljs-string">&#x27;student&#x27;</span><br>ROW                        COLUMN+CELL<br> s001                      column=name:, timestamp=<span class="hljs-number">1679058447572</span>, value=zhangsan<br> s001                      column=no:, timestamp=<span class="hljs-number">1679058447550</span>, value=<span class="hljs-number">2015001</span><br><span class="hljs-number">1</span> <span class="hljs-built_in">row</span>(s)<br>Took <span class="hljs-number">0.0179</span> seconds<br></code></pre></td></tr></table></figure><h4 id="查看整行"><a href="#查看整行" class="headerlink" title="查看整行"></a>查看整行</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">hbase(main):001:0&gt; <span class="hljs-built_in">get</span> <span class="hljs-string">&#x27;student&#x27;</span>,<span class="hljs-string">&#x27;s001&#x27;</span><br>COLUMN                     CELL<br> name:                     <span class="hljs-attribute">timestamp</span>=1679058447572, <span class="hljs-attribute">value</span>=zhangsan<br> <span class="hljs-literal">no</span>:                       <span class="hljs-attribute">timestamp</span>=1679058447550, <span class="hljs-attribute">value</span>=2015001<br>1 row(s)<br>Took 0.2910 seconds<br></code></pre></td></tr></table></figure><h4 id="查看单元格"><a href="#查看单元格" class="headerlink" title="查看单元格"></a>查看单元格</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros">hbase(main):008:0&gt; <span class="hljs-built_in">get</span> <span class="hljs-string">&#x27;student&#x27;</span>,<span class="hljs-string">&#x27;s001&#x27;</span>,<span class="hljs-string">&#x27;name&#x27;</span><br>COLUMN                     CELL<br> name:                     <span class="hljs-attribute">timestamp</span>=1679058447572, <span class="hljs-attribute">value</span>=zhangsan<br>1 row(s)<br>Took 0.0053 seconds<br></code></pre></td></tr></table></figure><h3 id="订单例子"><a href="#订单例子" class="headerlink" title="订单例子"></a>订单例子</h3><p><img src="/../img/Hadoop%E7%BB%84%E4%BB%B6%E9%83%A8%E7%BD%B2/7105ba3fd997598b9d7de8368254d5aaf24c1aec.png" alt="image-20230317212813880"></p><h4 id="创建order表"><a href="#创建order表" class="headerlink" title="创建order表"></a>创建order表</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs routeros">create <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;userinfo&#x27;</span>,<span class="hljs-string">&#x27;orderinfo&#x27;</span><br>list<br>put <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;userinfo:name&#x27;</span>,<span class="hljs-string">&#x27;sw&#x27;</span><br>put <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;userinfo:age&#x27;</span>,<span class="hljs-string">&#x27;24&#x27;</span><br>put <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;orderinfo:id&#x27;</span>,<span class="hljs-string">&#x27;23333&#x27;</span><br>put <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;orderinfo:money&#x27;</span>,<span class="hljs-string">&#x27;30&#x27;</span><br>scan <span class="hljs-string">&#x27;order&#x27;</span><br>-----------------------------------------------------------<br>hbase(main):017:0* create <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;userinfo&#x27;</span>,<span class="hljs-string">&#x27;orderinfo&#x27;</span><br>Created table order<br>Took 2.3102 seconds<br>=&gt; Hbase::Table - order<br>hbase(main):018:0&gt; list<br>TABLE<br>order<br>student<br>2 row(s)<br>Took 0.0104 seconds<br>=&gt; [<span class="hljs-string">&quot;order&quot;</span>, <span class="hljs-string">&quot;student&quot;</span>]<br>hbase(main):019:0&gt; put <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;userinfo:name&#x27;</span>,<span class="hljs-string">&#x27;sw&#x27;</span><br>Took 0.0326 seconds<br>hbase(main):020:0&gt; put <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;userinfo:age&#x27;</span>,<span class="hljs-string">&#x27;24&#x27;</span><br>Took 0.0031 seconds<br>hbase(main):021:0&gt; put <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;orderinfo:id&#x27;</span>,<span class="hljs-string">&#x27;23333&#x27;</span><br>Took 0.0036 seconds<br>hbase(main):022:0&gt; put <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;orderinfo:money&#x27;</span>,<span class="hljs-string">&#x27;30&#x27;</span><br>Took 0.0031 seconds<br>hbase(main):023:0&gt; scan <span class="hljs-string">&#x27;order&#x27;</span><br>ROW                        COLUMN+CELL<br> 1                         <span class="hljs-attribute">column</span>=orderinfo:id, <span class="hljs-attribute">timestamp</span>=1679060732699, <span class="hljs-attribute">value</span>=23333<br> 1                         <span class="hljs-attribute">column</span>=orderinfo:money, <span class="hljs-attribute">timestamp</span>=1679060732711, <span class="hljs-attribute">value</span>=30<br> 1                         <span class="hljs-attribute">column</span>=userinfo:age, <span class="hljs-attribute">timestamp</span>=1679060732685, <span class="hljs-attribute">value</span>=24<br> 1                         <span class="hljs-attribute">column</span>=userinfo:name, <span class="hljs-attribute">timestamp</span>=1679060732667, <span class="hljs-attribute">value</span>=sw<br>1 row(s)<br>Took 0.0116 seconds<br></code></pre></td></tr></table></figure><h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">hbase</span><span class="hljs-params">(main)</span></span>:<span class="hljs-number">001</span>:<span class="hljs-number">0</span>&gt; put <span class="hljs-string">&#x27;student&#x27;</span>,<span class="hljs-string">&#x27;s001&#x27;</span>,<span class="hljs-string">&#x27;name&#x27;</span>,<span class="hljs-string">&#x27;zhangxiaosan&#x27;</span><br>Took <span class="hljs-number">0.2879</span> seconds<br><span class="hljs-function"><span class="hljs-title">hbase</span><span class="hljs-params">(main)</span></span>:<span class="hljs-number">002</span>:<span class="hljs-number">0</span>&gt; get <span class="hljs-string">&#x27;student&#x27;</span>,<span class="hljs-string">&#x27;s001&#x27;</span>,<span class="hljs-string">&#x27;name&#x27;</span><br>COLUMN                     CELL<br> name:                     timestamp=<span class="hljs-number">1679061655288</span>, value=zhangxiaosan<br><span class="hljs-number">1</span> <span class="hljs-built_in">row</span>(s)<br>Took <span class="hljs-number">0.0280</span> seconds<br></code></pre></td></tr></table></figure><h3 id="时间戳"><a href="#时间戳" class="headerlink" title="时间戳"></a>时间戳</h3><p>#数据添加到HBase的时候都会被记录一个时间戳，这个时间戳被我们当做一个版本。</p><p>当修改某一条的时候，本质上是往里边新增一条数据，记录的版本加一。</p><p><img src="/../img/Hadoop%E7%BB%84%E4%BB%B6%E9%83%A8%E7%BD%B2/41ae96ec2b636400a97d0c0377d7ba5f7e4467f6.png" alt="image-20230317220909473"></p><p>#现在要把这条记录的值改为40，实际上就是多添加一条记录，在读的时候按照时间戳读最新的记录</p><p><img src="/../img/Hadoop%E7%BB%84%E4%BB%B6%E9%83%A8%E7%BD%B2/b5b87b734906aa507db9aa8474c02f6856295bca.png" alt="image-20230317221537086"></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs routeros">put <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;orderinfo:money&#x27;</span>,<span class="hljs-string">&#x27;40&#x27;</span><br><span class="hljs-built_in">get</span> <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;orderinfo:money&#x27;</span><br><br>hbase(main):008:0&gt; put <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;orderinfo:money&#x27;</span>,<span class="hljs-string">&#x27;40&#x27;</span><br>Took 0.0190 seconds<br>hbase(main):009:0&gt; <span class="hljs-built_in">get</span> <span class="hljs-string">&#x27;order&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;orderinfo:money&#x27;</span><br>COLUMN                     CELL<br> orderinfo:money           <span class="hljs-attribute">timestamp</span>=1679064515487, <span class="hljs-attribute">value</span>=40<br>1 row(s)<br>Took 0.0096 seconds<br><br></code></pre></td></tr></table></figure><h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">scan <span class="hljs-string">&#x27;student&#x27;</span><br><span class="hljs-keyword">delete</span> <span class="hljs-string">&#x27;student&#x27;</span>,<span class="hljs-string">&#x27;s001&#x27;</span>,<span class="hljs-string">&#x27;name&#x27;</span><br><span class="hljs-keyword">get</span> <span class="hljs-string">&#x27;student&#x27;</span>,<span class="hljs-string">&#x27;s001&#x27;</span>,<span class="hljs-string">&#x27;name&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">disable</span> <span class="hljs-string">&#x27;student&#x27;</span><br>describe <span class="hljs-string">&#x27;student&#x27;</span><br><span class="hljs-keyword">drop</span> <span class="hljs-string">&#x27;student&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="访问网页-1"><a href="#访问网页-1" class="headerlink" title="访问网页"></a>访问网页</h3><p>ip:16010</p><h2 id="NoSQL数据库安装"><a href="#NoSQL数据库安装" class="headerlink" title="NoSQL数据库安装"></a>NoSQL数据库安装</h2><p>（Redis键值对非关系型数据库）</p><h3 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">tar -xf redis-5.0.5.tar.gz<br>mv redis-5.0.5 <span class="hljs-string">/opt/redis</span><br><span class="hljs-keyword">cd</span> <span class="hljs-string">/opt/redis</span><br>yum install -y gcc automake autoconf libtool<br><span class="hljs-comment">#编译安装</span><br>make &amp;&amp; make install<br><span class="hljs-keyword">cd</span> src<br>[root@yjx48 src]<span class="hljs-comment"># ./redis-server</span><br>5861<span class="hljs-function">:C</span> 30 Mar 2023 08<span class="hljs-function">:49</span><span class="hljs-function">:48.699</span> <span class="hljs-comment"># oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span><br>5861<span class="hljs-function">:C</span> 30 Mar 2023 08<span class="hljs-function">:49</span><span class="hljs-function">:48.699</span> <span class="hljs-comment"># Redis version=5.0.5, bits=64, commit=00000000, modified=0, pid=5861, just started</span><br>5861<span class="hljs-function">:C</span> 30 Mar 2023 08<span class="hljs-function">:49</span><span class="hljs-function">:48.699</span> <span class="hljs-comment"># Warning: no config file specified, using the default config. In order to specify a config file use ./redis-server /path/to/redis.conf</span><br>5861<span class="hljs-function">:M</span> 30 Mar 2023 08<span class="hljs-function">:49</span><span class="hljs-function">:48.699</span> * Increased maximum number of open files to 10032 <span class="hljs-params">(it was originally set to 1024)</span>.<br>                _._<br>           _.-``__ &#x27;&#x27;-<span class="hljs-string">._</span><br>      _.-``    `.  `_.  &#x27;&#x27;-<span class="hljs-string">._</span>           Redis 5.0.5 <span class="hljs-params">(00000000/0)</span> 64 bit<br>  <span class="hljs-string">.-</span>`` <span class="hljs-string">.-</span>```.  ```\/    _.,_ &#x27;&#x27;-<span class="hljs-string">._</span><br> <span class="hljs-params">(    &#x27;      ,       .-`  | `,    )</span>     Running in standalone mode<br> |`-<span class="hljs-string">._</span>`-<span class="hljs-string">...-</span>` __.<span class="hljs-string">..-.</span>``-<span class="hljs-string">._</span>|&#x27;` _.-&#x27;|     Port: 6379<br> |    `-<span class="hljs-string">._</span>   `<span class="hljs-string">._</span>    /     _.-&#x27;    |     PID: 5861<br>  `-<span class="hljs-string">._</span>    `-<span class="hljs-string">._</span>  `-<span class="hljs-string">./</span>  _.-&#x27;    _.-&#x27;<br> |`-<span class="hljs-string">._</span>`-<span class="hljs-string">._</span>    `-<span class="hljs-string">.__.-</span>&#x27;    _.-&#x27;_.-&#x27;|<br> |    `-<span class="hljs-string">._</span>`-<span class="hljs-string">._</span>        _.-&#x27;_.-&#x27;    |           http:<span class="hljs-string">//redis.io</span><br>  `-<span class="hljs-string">._</span>    `-<span class="hljs-string">._</span>`-<span class="hljs-string">.__.-</span>&#x27;_.-&#x27;    _.-&#x27;<br> |`-<span class="hljs-string">._</span>`-<span class="hljs-string">._</span>    `-<span class="hljs-string">.__.-</span>&#x27;    _.-&#x27;_.-&#x27;|<br> |    `-<span class="hljs-string">._</span>`-<span class="hljs-string">._</span>        _.-&#x27;_.-&#x27;    |<br>  `-<span class="hljs-string">._</span>    `-<span class="hljs-string">._</span>`-<span class="hljs-string">.__.-</span>&#x27;_.-&#x27;    _.-&#x27;<br>      `-<span class="hljs-string">._</span>    `-<span class="hljs-string">.__.-</span>&#x27;    _.-&#x27;<br>          `-<span class="hljs-string">._</span>        _.-&#x27;<br>              `-<span class="hljs-string">.__.-</span>&#x27;<br><br>5861<span class="hljs-function">:M</span> 30 Mar 2023 08<span class="hljs-function">:49</span><span class="hljs-function">:48.700</span> <span class="hljs-comment"># WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</span><br></code></pre></td></tr></table></figure><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">#另开一个会话<br><span class="hljs-string">[root@yjx48 ~]</span># cd /opt/redis/src<br><span class="hljs-string">[root@yjx48 src]</span># ./redis-cli<br><span class="hljs-number">127.0.0.1:6379</span>&gt; set hello world<br>OK<br><span class="hljs-number">127.0.0.1:6379</span>&gt; get hello<br><span class="hljs-string">&quot;world&quot;</span><br><span class="hljs-number">127.0.0.1:6379</span>&gt; exit<br><span class="hljs-string">[root@yjx48 src]</span>#<br></code></pre></td></tr></table></figure><h3 id="数据库管理"><a href="#数据库管理" class="headerlink" title="数据库管理"></a>数据库管理</h3><p><img src="/../img/Hadoop%E7%BB%84%E4%BB%B6%E9%83%A8%E7%BD%B2/23833340d878c73b11cf4064c0a4ab51ecc4b4d3.png" alt="image-20230330112542140"></p><h3 id="redis语法"><a href="#redis语法" class="headerlink" title="redis语法"></a>redis语法</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#插入数据</span><br><span class="hljs-built_in">set</span> student:2015001:sname zhangsan<br><span class="hljs-built_in">get</span> student:2015001:sname<br><span class="hljs-built_in">set</span> student:2015001:sex male<br><span class="hljs-built_in">get</span> student:2015001:sex<br><span class="hljs-comment">#修改数据</span><br><span class="hljs-built_in">set</span> student:2015001:sname zhangxiaosan<br><span class="hljs-built_in">get</span> student:2015001:sname<br><span class="hljs-comment">#删除数据</span><br><span class="hljs-built_in">get</span> <span class="hljs-built_in">set</span> student:2015001:sname<br>del <span class="hljs-built_in">set</span> student:2015001:sname<br><span class="hljs-built_in">get</span> <span class="hljs-built_in">set</span> student:2015001:sname<br><span class="hljs-comment">#没数据了</span><br></code></pre></td></tr></table></figure><h3 id="Hash数据库"><a href="#Hash数据库" class="headerlink" title="Hash数据库"></a>Hash数据库</h3><p>student表</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros">2015001=&#123;<br><span class="hljs-attribute">name</span>=zhangsan<br><span class="hljs-attribute">sex</span>=male<br><span class="hljs-attribute">age</span>=23<br>&#125;<br></code></pre></td></tr></table></figure><p>插入和查询数据</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">hset</span> student:<span class="hljs-number">2015001</span> name zhangsan<br><span class="hljs-attribute">hset</span> student:<span class="hljs-number">2015001</span> sex male<br><span class="hljs-attribute">hset</span> student:<span class="hljs-number">2015001</span> age <span class="hljs-number">23</span><br><span class="hljs-attribute">hget</span> student:<span class="hljs-number">2015001</span> name <br><span class="hljs-attribute">hget</span> student:<span class="hljs-number">2015001</span> sex<br><span class="hljs-attribute">hgetall</span> student:<span class="hljs-number">2015001</span><br></code></pre></td></tr></table></figure><p>修改数据</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">hset</span> student:<span class="hljs-number">2015001</span> sex female<br><span class="hljs-attribute">hget</span> student:<span class="hljs-number">2015001</span> sex female<br></code></pre></td></tr></table></figure><p>删除数据</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">hdel</span> student:<span class="hljs-number">2015001</span> sex<br><span class="hljs-attribute">hget</span> student:<span class="hljs-number">2015001</span> sex<br><span class="hljs-comment">#无数据</span><br></code></pre></td></tr></table></figure><h2 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h2><p>​Mongodb是一个基于分布式文件存储的文档数据库，介于关系数据库和非关系数据库之间，是非关系数<br>据库当中功能最丰富、最像关系数据库的一种 NOSQL数据库。<br>​Mongo最大的特点是支持的查询语言非常强大，语法有点类似于面向对象的查询语言，几乎可以实现类<br>似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。<br>​Mongodb支持的数据结构非常松散，是类似json的bson格式，因此可以存储比较复杂的数据类型。</p><h3 id="JSON语法"><a href="#JSON语法" class="headerlink" title="JSON语法"></a>JSON语法</h3><p>JSON 语法是 JavaScript 语法的子集。</p><h4 id="JSON-数字"><a href="#JSON-数字" class="headerlink" title="JSON 数字"></a>JSON 数字</h4><p>JSON 数字可以是整型或者浮点型：<br>{ “age”:30 }</p><h4 id="JSON-对象"><a href="#JSON-对象" class="headerlink" title="JSON 对象"></a>JSON 对象</h4><p>JSON 对象在大括号 {} 中书写：<br>对象可以包含多个名称&#x2F;值对：</p><h4 id="JSON-数组"><a href="#JSON-数组" class="headerlink" title="JSON 数组"></a>JSON 数组</h4><p>JSON 数组在中括号 [] 中书写：<br>数组可包含多个对象：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ada">[<br>&#123; key1 : <span class="hljs-type">value1</span>-<span class="hljs-number">1</span> , key2:value1-<span class="hljs-number">2</span> &#125;,<br>&#123; key1 : <span class="hljs-type">value2</span>-<span class="hljs-number">1</span> , key2:value2-<span class="hljs-number">2</span> &#125;,<br>&#123; key1 : <span class="hljs-type">value3</span>-<span class="hljs-number">1</span> , key2:value3-<span class="hljs-number">2</span> &#125;,<br>...<br>&#123; key1 : <span class="hljs-type">valueN</span>-<span class="hljs-number">1</span> , key2:valueN-<span class="hljs-number">2</span> &#125;,<br>]<br><br>&#123;<br><span class="hljs-string">&quot;sites&quot;</span>: [<br>        &#123; <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;菜鸟教程&quot;</span> , <span class="hljs-string">&quot;url&quot;</span>:<span class="hljs-string">&quot;www.runoob.com&quot;</span> &#125;,<br>        &#123; <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;google&quot;</span> , <span class="hljs-string">&quot;url&quot;</span>:<span class="hljs-string">&quot;www.google.com&quot;</span> &#125;,<br>        &#123; <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;微博&quot;</span> , <span class="hljs-string">&quot;url&quot;</span>:<span class="hljs-string">&quot;www.weibo.com&quot;</span> &#125;<br>       ]<br>&#125;<br></code></pre></td></tr></table></figure><p>在上面的例子中，对象 sites 是包含三个对象的数组。每个对象代表一条关于某个网站（name、url）<br>的记录。</p><h4 id="JSON-布尔值"><a href="#JSON-布尔值" class="headerlink" title="JSON 布尔值"></a>JSON 布尔值</h4><p>JSON 布尔值可以是 true 或者 false：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;flag&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h4 id="JSON-null"><a href="#JSON-null" class="headerlink" title="JSON null"></a>JSON null</h4><p>JSON 可以设置 null 值：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;runoob&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">null</span></span> <span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="MongoDB安装"><a href="#MongoDB安装" class="headerlink" title="MongoDB安装"></a>MongoDB安装</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gradle">tar -xf mongodb-linux-x86_64-rhel70-<span class="hljs-number">5.0</span>.<span class="hljs-number">5</span>.tgz <br>mv mongodb-linux-x86_64-rhel70-<span class="hljs-number">5.0</span>.<span class="hljs-number">5</span> <span class="hljs-regexp">/opt/m</span>ongodb<br>cd <span class="hljs-regexp">/opt/m</span>ongodb/bin<br>./mongo -version<br><br>#默认情况下 MongoDB 启动后会初始化以下两个目录，事先创建好：<br>#数据存储目录：<span class="hljs-regexp">/var/</span>lib/mongodb<br>#日志文件目录：<span class="hljs-regexp">/var/</span>log/mongodb<br>mkdir -p <span class="hljs-regexp">/var/</span>lib/mongo<br>mkdir -p <span class="hljs-regexp">/var/</span>log/mongodb<br>#启动mongodb服务<br>cd <span class="hljs-regexp">/opt/m</span>ongodb/bin<br>.<span class="hljs-regexp">/mongod --dbpath /</span>var<span class="hljs-regexp">/lib/m</span>ongo --logpath <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/mongodb/m</span>ongod.log --fork<br>ps ax | <span class="hljs-keyword">grep</span> mongod<br>./mongo<br></code></pre></td></tr></table></figure><h3 id="数据库管理-1"><a href="#数据库管理-1" class="headerlink" title="数据库管理"></a>数据库管理</h3><h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><p>#列出所有数据库</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&gt;<span class="hljs-keyword">show</span> dbs<br><span class="hljs-keyword">admin</span> <span class="hljs-number">0.000</span>GB<br>config <span class="hljs-number">0.000</span>GB<br><span class="hljs-keyword">local</span> <span class="hljs-number">0.000</span>GB<br></code></pre></td></tr></table></figure><p>#切换数据库</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&gt;use <span class="hljs-keyword">admin</span><br>switched <span class="hljs-keyword">to</span> db <span class="hljs-keyword">admin</span><br></code></pre></td></tr></table></figure><p>#显示当前数据库的所有集合</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&gt;<span class="hljs-keyword">show</span> collections<br><span class="hljs-keyword">system</span>.<span class="hljs-keyword">version</span><br></code></pre></td></tr></table></figure><p>#显示集合的所有数据</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">&gt;db<span class="hljs-selector-class">.system</span><span class="hljs-selector-class">.version</span><span class="hljs-selector-class">.find</span>()<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;featureCompatibilityVersion&quot;</span>, <span class="hljs-string">&quot;version&quot;</span> : <span class="hljs-string">&quot;5.0&quot;</span> &#125;<br></code></pre></td></tr></table></figure><h4 id="创建数据库和集合"><a href="#创建数据库和集合" class="headerlink" title="创建数据库和集合"></a>创建数据库和集合</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment">#mongodb没有创建数据库命令</span><br>&gt; use <span class="hljs-keyword">school</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">switched </span>to db <span class="hljs-keyword">school</span><br><span class="hljs-keyword"></span><span class="hljs-comment">#创建集合，同时会自动创建以上的数据库</span><br>&gt; db.createCollection(<span class="hljs-string">&#x27;student&#x27;</span>)<br>&#123; <span class="hljs-string">&quot;ok&quot;</span> : <span class="hljs-number">1</span> &#125;<br>&gt; <span class="hljs-keyword">show </span>dbs<br>admin <span class="hljs-number">0</span>.<span class="hljs-number">000</span>GB<br><span class="hljs-built_in">config</span> <span class="hljs-number">0</span>.<span class="hljs-number">000</span>GB<br>local <span class="hljs-number">0</span>.<span class="hljs-number">000</span>GB<br><span class="hljs-keyword">school </span><span class="hljs-number">0</span>.<span class="hljs-number">000</span>GB<br>&gt; <span class="hljs-keyword">show </span>collections<br>Student<br></code></pre></td></tr></table></figure><h4 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs stylus">#两种方法插入数据：insert和save<br>#_id可以手动输入，否则会自动生成<br>&gt;db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.insert</span>(&#123;<br>  sno: <span class="hljs-number">2015001</span>,<br>  name: <span class="hljs-string">&quot;zhangsan&quot;</span>,<br>  sex: <span class="hljs-string">&quot;male&quot;</span>,<br>  age: <span class="hljs-number">23</span><br>&#125;)<br><span class="hljs-function"><span class="hljs-title">WriteResult</span><span class="hljs-params">(&#123; <span class="hljs-string">&quot;nInserted&quot;</span> : <span class="hljs-number">1</span> &#125;)</span></span><br><br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>()<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e21279c9d145e592fda70&quot;</span>), <span class="hljs-string">&quot;sno&quot;</span> : <span class="hljs-number">2015001</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;male&quot;</span>, <span class="hljs-string">&quot;age&quot;</span> : <span class="hljs-number">23</span> &#125;<br><br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.save</span>(&#123;sno:<span class="hljs-number">2015002</span>,name:<span class="hljs-string">&#x27;marry&#x27;</span>,sex:<span class="hljs-string">&#x27;female&#x27;</span>,age:<span class="hljs-number">22</span>&#125;)<br><span class="hljs-function"><span class="hljs-title">WriteResult</span><span class="hljs-params">(&#123; <span class="hljs-string">&quot;nInserted&quot;</span> : <span class="hljs-number">1</span> &#125;)</span></span><br><br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>()<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259014c45ed3f90756c0&quot;</span>), <span class="hljs-string">&quot;sno&quot;</span> : <span class="hljs-number">2015001</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;male&quot;</span>, <span class="hljs-string">&quot;age&quot;</span> : <span class="hljs-number">23</span> &#125;<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259614c45ed3f90756c1&quot;</span>), <span class="hljs-string">&quot;sno&quot;</span> : <span class="hljs-number">2015002</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;marry&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;female&quot;</span>, <span class="hljs-string">&quot;age&quot;</span> : <span class="hljs-number">22</span> &#125;<br></code></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs stylus">#insert和save区别：手动插入一行时，如_id已经存在，insert则出错，save则替代原值。<br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.insert</span>(&#123;<span class="hljs-string">&quot;_id&quot;</span>: <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259014c45ed3f90756c0&quot;</span>),   <span class="hljs-string">&quot;sno&quot;</span>: <span class="hljs-number">2015001</span>,   <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;zhangsan&quot;</span>,   <span class="hljs-string">&quot;sex&quot;</span>: <span class="hljs-string">&quot;male&quot;</span>,   <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">23</span> &#125;)<br><br><span class="hljs-built_in">WriteResult</span>(&#123;<br>        <span class="hljs-string">&quot;nInserted&quot;</span> : <span class="hljs-number">0</span>,<br>        <span class="hljs-string">&quot;writeError&quot;</span> : &#123;<br>                <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">11000</span>,<br>                <span class="hljs-string">&quot;errmsg&quot;</span> : <span class="hljs-string">&quot;E11000 duplicate key error collection: test.student index: _id_ dup key: &#123; _id: ObjectId(&#x27;642e21279c9d145e592fda70&#x27;) &#125;&quot;</span><br>        &#125;<br>&#125;)<br>#更改年龄<span class="hljs-number">23</span>→<span class="hljs-number">24</span><br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.save</span>(&#123;<span class="hljs-string">&quot;_id&quot;</span>: <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259014c45ed3f90756c0&quot;</span>),   <span class="hljs-string">&quot;sno&quot;</span>: <span class="hljs-number">2015001</span>,   <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;zhangsan&quot;</span>,   <span class="hljs-string">&quot;sex&quot;</span>: <span class="hljs-string">&quot;male&quot;</span>,   <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">24</span> &#125;)<br><span class="hljs-function"><span class="hljs-title">WriteResult</span><span class="hljs-params">(&#123; <span class="hljs-string">&quot;nMatched&quot;</span> : <span class="hljs-number">1</span>, <span class="hljs-string">&quot;nUpserted&quot;</span> : <span class="hljs-number">0</span>, <span class="hljs-string">&quot;nModified&quot;</span> : <span class="hljs-number">1</span> &#125;)</span></span><br><br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>()<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259014c45ed3f90756c0&quot;</span>), <span class="hljs-string">&quot;sno&quot;</span> : <span class="hljs-number">2015001</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;male&quot;</span>, <span class="hljs-string">&quot;age&quot;</span> : <span class="hljs-number">24</span> &#125;<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259614c45ed3f90756c1&quot;</span>), <span class="hljs-string">&quot;sno&quot;</span> : <span class="hljs-number">2015002</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;marry&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;female&quot;</span>, <span class="hljs-string">&quot;age&quot;</span> : <span class="hljs-number">22</span> &#125;<br></code></pre></td></tr></table></figure><h4 id="查找数据"><a href="#查找数据" class="headerlink" title="查找数据"></a>查找数据</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs stylus">#查询<br>#查询格式：<span class="hljs-built_in">find</span>(<span class="hljs-selector-attr">[query]</span>,<span class="hljs-selector-attr">[fields]</span>)，类似于sql的select语句，query相当于where，fields相当<br>于显示的列<br>#查询名字为zhangsan的数据<br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>(&#123;name:<span class="hljs-string">&#x27;zhangsan&#x27;</span>&#125;)<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259014c45ed3f90756c0&quot;</span>), <span class="hljs-string">&quot;sno&quot;</span> : <span class="hljs-number">2015001</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;male&quot;</span>, <span class="hljs-string">&quot;age&quot;</span> : <span class="hljs-number">24</span> &#125;<br>#查询名字为zhangsan的人的性别<br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>(&#123;name:<span class="hljs-string">&#x27;zhangsan&#x27;</span>&#125;,&#123;name:<span class="hljs-number">1</span>,sex:<span class="hljs-number">1</span>&#125;)<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259014c45ed3f90756c0&quot;</span>), <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;male&quot;</span> &#125;<br>#不显示_id<br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>(&#123;name:<span class="hljs-string">&#x27;zhangsan&#x27;</span>&#125;,&#123;_id:<span class="hljs-number">0</span>,name:<span class="hljs-number">1</span>,sex:<span class="hljs-number">1</span>&#125;)<br>&#123; <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;male&quot;</span> &#125;<br>#查询指定列<br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>(&#123;&#125;,&#123;name:<span class="hljs-number">1</span>&#125;)<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259014c45ed3f90756c0&quot;</span>), <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;zhangsan&quot;</span> &#125;<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259614c45ed3f90756c1&quot;</span>), <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;marry&quot;</span> &#125;<br>#and查询条件 <br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>(&#123;name:<span class="hljs-string">&#x27;zhangsan&#x27;</span>,sex:<span class="hljs-string">&#x27;female&#x27;</span>&#125;)<br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>(&#123;name:<span class="hljs-string">&#x27;zhangsan&#x27;</span>,sex:<span class="hljs-string">&#x27;male&#x27;</span>&#125;)<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259014c45ed3f90756c0&quot;</span>), <span class="hljs-string">&quot;sno&quot;</span> : <span class="hljs-number">2015001</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;male&quot;</span>, <span class="hljs-string">&quot;age&quot;</span> : <span class="hljs-number">24</span> &#125;<br>&gt;db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>(&#123;<span class="hljs-variable">$or</span>:<span class="hljs-selector-attr">[&#123;age:24&#125;,&#123;age:22&#125;]</span>&#125;)<br>#or查询<br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>(&#123;  <span class="hljs-variable">$or</span>:<span class="hljs-selector-attr">[&#123;age:24&#125;,&#123;age:22&#125;]</span>  &#125;)<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259014c45ed3f90756c0&quot;</span>), <span class="hljs-string">&quot;sno&quot;</span> : <span class="hljs-number">2015001</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;male&quot;</span>, <span class="hljs-string">&quot;age&quot;</span> : <span class="hljs-number">24</span> &#125;<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259614c45ed3f90756c1&quot;</span>), <span class="hljs-string">&quot;sno&quot;</span> : <span class="hljs-number">2015002</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;marry&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;female&quot;</span>, <span class="hljs-string">&quot;age&quot;</span> : <span class="hljs-number">22</span> &#125;<br></code></pre></td></tr></table></figure><h4 id="修改数据-1"><a href="#修改数据-1" class="headerlink" title="修改数据"></a>修改数据</h4><p>#格式：update( query, <update object or pipeline>[, upsert_bool, multi_bool] )<br>#query : update的查询条件，类似sql update查询内where后面的。<br>#update : update的对象和一些更新的操作符（如$,$inc…）等，也可以理解为sql update查询内<br>set后面的<br>#upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是<br>false，不插入。<br>#multi : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查<br>出来多条记录全部更新。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.update</span>(&#123;name:<span class="hljs-string">&#x27;zhangsan&#x27;</span>&#125;,&#123;<span class="hljs-variable">$set</span>:&#123;age:<span class="hljs-number">23</span>&#125;&#125;)<br><span class="hljs-function"><span class="hljs-title">WriteResult</span><span class="hljs-params">(&#123; <span class="hljs-string">&quot;nMatched&quot;</span> : <span class="hljs-number">1</span>, <span class="hljs-string">&quot;nUpserted&quot;</span> : <span class="hljs-number">0</span>, <span class="hljs-string">&quot;nModified&quot;</span> : <span class="hljs-number">1</span> &#125;)</span></span><br><br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>()<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259014c45ed3f90756c0&quot;</span>), <span class="hljs-string">&quot;sno&quot;</span> : <span class="hljs-number">2015001</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;male&quot;</span>, <span class="hljs-string">&quot;age&quot;</span> : <span class="hljs-number">23</span> &#125;<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259614c45ed3f90756c1&quot;</span>), <span class="hljs-string">&quot;sno&quot;</span> : <span class="hljs-number">2015002</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;marry&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;female&quot;</span>, <span class="hljs-string">&quot;age&quot;</span> : <span class="hljs-number">22</span> &#125;<br></code></pre></td></tr></table></figure><h4 id="删除数据-1"><a href="#删除数据-1" class="headerlink" title="删除数据"></a>删除数据</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.remove</span>(&#123;name:<span class="hljs-string">&#x27;zhangsan&#x27;</span>&#125;)<br><span class="hljs-function"><span class="hljs-title">WriteResult</span><span class="hljs-params">(&#123; <span class="hljs-string">&quot;nRemoved&quot;</span> : <span class="hljs-number">1</span> &#125;)</span></span><br>&gt; db<span class="hljs-selector-class">.student</span><span class="hljs-selector-class">.find</span>()<br>&#123; <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-built_in">ObjectId</span>(<span class="hljs-string">&quot;642e259614c45ed3f90756c1&quot;</span>), <span class="hljs-string">&quot;sno&quot;</span> : <span class="hljs-number">2015002</span>, <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;marry&quot;</span>, <span class="hljs-string">&quot;sex&quot;</span> : <span class="hljs-string">&quot;female&quot;</span>, <span class="hljs-string">&quot;age&quot;</span> : <span class="hljs-number">22</span> &#125;<br></code></pre></td></tr></table></figure><h4 id="删除集合"><a href="#删除集合" class="headerlink" title="删除集合"></a>删除集合</h4><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs node-repl"><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">db.<span class="hljs-title function_">createCollection</span>(<span class="hljs-string">&#x27;course&#x27;</span>)</span><br>&#123; &quot;ok&quot; : 1 &#125;<br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">show collections</span><br>course<br>student<br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">db.<span class="hljs-property">course</span>.<span class="hljs-title function_">drop</span>()</span><br>true<br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">show collections</span><br>student<br><br></code></pre></td></tr></table></figure><h2 id="Hive数据仓库安装"><a href="#Hive数据仓库安装" class="headerlink" title="Hive数据仓库安装"></a>Hive数据仓库安装</h2><p>hive 是一种底层封装了Hadoop 的数据仓库处理工具，使用类SQL 的hiveSQL 语言实现数据查询，所有hive 的数据都存储在Hadoop 兼容的文件系统（例如，[Amazon S3](<a href="https://baike.baidu.com/item/Amazon">https://baike.baidu.com/item/Amazon</a> S3&#x2F;10809744)、HDFS）中。hive 在加载数据过程中不会对数据进行任何的修改，只是将数据移动到HDFS 中hive 设定的目录下，因此，hive 不支持对数据的改写和添加，所有的数据都是在加载的时候确定的。</p><p><strong>用户接口Client</strong></p><p>用户接口主要有三个：CLI，Client 和 WUI。其中最常用的是 Cli，Cli 启动的时候，会同时启动一个 hive 副本。Client 是 hive 的客户端，用户连接至 hive Server。在启动 Client 模式的时候，需要指出 hive Server 所在节点，并且在该节点启动 hive Server。 WUI 是通过浏览器访问 hive。</p><p><strong>元数据存储 Metastore</strong></p><p>hive 将元数据存储在数据库中，如 mysql、derby。hive 中的元数据包括表的名字，表的列和分区及其属性，表的属性（是否为外部表等），表的数据所在目录等。</p><p><strong>驱动器：Driver 解释器、编译器、优化器、执行器</strong></p><p>解释器、编译器、优化器完成 HQL 查询语句从词法分析、语法分析、编译、优化以及查询计划的生成。生成的查询计划存储在 HDFS 中，并在随后由 MapReduce 调用执行。</p><p><strong>Hadoop</strong></p><p>hive 的数据存储在 HDFS 中，大部分的查询由 MapReduce 完成（不包含 * 的查询，比如 select * from tbl 不会生成 MapReduce 任务）。</p><p><img src="/../img/Hadoop%E7%BB%84%E4%BB%B6%E9%83%A8%E7%BD%B2/f79d1b048d8f3badd95b31cb952d9b151e4db804.png" alt="image-20230413095240448"></p><p><img src="/../img/Hadoop%E7%BB%84%E4%BB%B6%E9%83%A8%E7%BD%B2/9a7cd6b9a3e1e3b57b9dde839c2a59cb113cdec9.png" alt="image-20230413095305455"></p><h3 id="安装hive"><a href="#安装hive" class="headerlink" title="安装hive"></a>安装hive</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs xml">tar -xf apache-hive-3.1.2-bin.tar.gz<br>mv apache-hive-3.1.2-bin /usr/local/hive<br>echo &quot;export HIVE_HOME=/usr/local/hive&quot; &gt;&gt; /etc/profile<br>echo &quot;export PATH=\$HIVE_HOME/bin:\$PATH&quot; &gt;&gt; /etc/profile<br>source /etc/profile<br>cd /usr/local/hive/conf/<br>cp hive-default.xml.template hive-default.xml<br>vi hive-site.xml<br><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> standalone=<span class="hljs-string">&quot;no&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;?xml-stylesheet type=<span class="hljs-string">&quot;text/xsl&quot;</span> href=<span class="hljs-string">&quot;configuration.xsl&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>jdbc:mysql://yjx48:3306/hive?useSSL=false<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>JDBC connect string for a JDBC metastore<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Driver class name for a JDBC metastore<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>root<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>username to use against metastore database<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Yjx@666.<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>password to use against metastore database<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p>其中Yjx@666.是mysql密码</p><h3 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cd</span><br><span class="hljs-attribute">yum</span> remove mariadb-libs.x86_64 -y<br><span class="hljs-attribute">yum</span> install -y net-tools<br><span class="hljs-attribute">mkdir</span> mysql<br><span class="hljs-attribute">tar</span> -xf mysql-<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">37</span>-<span class="hljs-number">1</span>.el7.x86_64.rpm-bundle.tar -C mysql<br><span class="hljs-attribute">cd</span> mysql<br><span class="hljs-attribute">rpm</span> -ivh mysql-community-common-<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">37</span>-<span class="hljs-number">1</span>.el7.x86_64.rpm<br><span class="hljs-attribute">rpm</span> -ivh mysql-community-libs-<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">37</span>-<span class="hljs-number">1</span>.el7.x86_64.rpm<br><span class="hljs-attribute">rpm</span> -ivh mysql-community-libs-compat-<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">37</span>-<span class="hljs-number">1</span>.el7.x86_64.rpm<br><span class="hljs-attribute">rpm</span> -ivh mysql-community-client-<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">37</span>-<span class="hljs-number">1</span>.el7.x86_64.rpm<br><span class="hljs-attribute">rpm</span> -ivh mysql-community-devel-<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">37</span>-<span class="hljs-number">1</span>.el7.x86_64.rpm<br><span class="hljs-attribute">rpm</span> -ivh mysql-community-server-<span class="hljs-number">5</span>.<span class="hljs-number">7</span>.<span class="hljs-number">37</span>-<span class="hljs-number">1</span>.el7.x86_64.rpm<br><span class="hljs-attribute">systemctl</span> enable --now mysqld<br><span class="hljs-attribute">grep</span>  &#x27;temporary password&#x27; /var/log/mysqld.log<br><span class="hljs-attribute">mysqladmin</span> -uroot -p&#x27;darm4hb.<span class="hljs-number">2</span>Rsy&#x27; password &#x27;Yjx@<span class="hljs-number">666</span>.&#x27;<br><span class="hljs-attribute">mysql</span> -uroot -pYjx@<span class="hljs-number">666</span>.<br><span class="hljs-comment">#给root用户授权</span><br><span class="hljs-attribute">grant</span> <span class="hljs-literal">all</span> privileges <span class="hljs-literal">on</span> *.* to &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;Yjx@<span class="hljs-number">666</span>.&#x27; with grant option;<br><span class="hljs-attribute">grant</span> <span class="hljs-literal">all</span> privileges <span class="hljs-literal">on</span> *.* to &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;Yjx@<span class="hljs-number">666</span>.&#x27; with grant option;<br><span class="hljs-attribute">flush</span> privileges;<br><span class="hljs-attribute">create</span> database hive;<br><span class="hljs-attribute">exit</span><br></code></pre></td></tr></table></figure><h3 id="配置和启动hive"><a href="#配置和启动hive" class="headerlink" title="配置和启动hive"></a>配置和启动hive</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd<br>tar -xf mysql-connector-java-<span class="hljs-number">5.1</span>.<span class="hljs-number">40</span>.tar.gz<br>cp mysql-connector-java-<span class="hljs-number">5.1</span>.<span class="hljs-number">40</span><span class="hljs-regexp">/mysql-connector-java-5.1.40-bin.jar /u</span>sr<span class="hljs-regexp">/local/</span>hive<span class="hljs-regexp">/lib/</span><br>mv <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hive/</span>lib/guava-<span class="hljs-number">19.0</span>.jar&#123;,.bak&#125;<br>cp <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>share<span class="hljs-regexp">/hadoop/</span>common<span class="hljs-regexp">/lib/gu</span>ava-<span class="hljs-number">27.0</span>-jre.jar  <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hive/</span>lib<br>start-all.sh <br>schematool -dbType mysql -initSchema<br>hive<br></code></pre></td></tr></table></figure><h3 id="Hive数据类型"><a href="#Hive数据类型" class="headerlink" title="Hive数据类型"></a>Hive数据类型</h3><table><thead><tr><th align="center">类型</th><th align="center">描述</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center">TINYINT（tinyint）</td><td align="center">一个字节（8位）有符号整数，  -128~127</td><td align="center">1</td></tr><tr><td align="center">SMALLINT（smallint）</td><td align="center">2字节（16位）有符号整数，-32768~32767</td><td align="center">1</td></tr><tr><td align="center">INT（int）</td><td align="center">4字节（32位）有符号整数</td><td align="center">1</td></tr><tr><td align="center">BIGINT（bigint）</td><td align="center">8字节（64位）有符号整数</td><td align="center">1</td></tr><tr><td align="center">FLOAT（float）</td><td align="center">4字节（32位）单精度浮点数</td><td align="center">1</td></tr><tr><td align="center">DOUBLE（double）</td><td align="center">8字节（64位）双精度浮点数</td><td align="center">1</td></tr><tr><td align="center">DECIMAL(decimal)</td><td align="center">任意精度的带符号小数</td><td align="center">1</td></tr><tr><td align="center">BOOLEAN（boolean）</td><td align="center">true&#x2F;false</td><td align="center">true&#x2F;false</td></tr><tr><td align="center">STRING（string）</td><td align="center">字符串，变长</td><td align="center">‘a’,‘b’,‘1’</td></tr><tr><td align="center">VARCHAR（varchar）</td><td align="center">变长字符串</td><td align="center">‘a’</td></tr><tr><td align="center">CHAR（char）</td><td align="center">固定长度字符串</td><td align="center">‘a’</td></tr><tr><td align="center">BINANY（binany）</td><td align="center">字节数组</td><td align="center">无法表示</td></tr><tr><td align="center">TIMESTAMP（timestamp）</td><td align="center">时间戳，纳秒精度</td><td align="center">1.22327E+11</td></tr><tr><td align="center">DATE（date）</td><td align="center">日期</td><td align="center">‘2016-03-29’</td></tr></tbody></table><h3 id="hive的集合数据类型"><a href="#hive的集合数据类型" class="headerlink" title="hive的集合数据类型"></a>hive的集合数据类型</h3><table><thead><tr><th align="center">类型</th><th align="center">描述</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center">ARRAY</td><td align="center">有序数组，字段的类型必须相同</td><td align="center">Array（1，2）</td></tr><tr><td align="center">MAP</td><td align="center">一组无序的键值对，键的类型必须是原始数据类型，他的值可以是任何类型，同一个映射的键的类型必须相同，值得类型也必须相同</td><td align="center">Map（‘a’,1）</td></tr><tr><td align="center">STRUCT</td><td align="center">一组命名的字段,字段类型可以不同</td><td align="center">Struct（‘a’,1,2.0</td></tr><tr><td align="center">UNION</td><td align="center">UNION则类似于C语言中的UNION结构，在给定的任何一个时间点，UNION类型可以保存指定数据类型中的任意一种</td><td align="center"></td></tr></tbody></table><h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><h4 id="创建数据库和表"><a href="#创建数据库和表" class="headerlink" title="创建数据库和表"></a>创建数据库和表</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> hive;<br>use hive;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> usr(id <span class="hljs-type">int</span>,<span class="hljs-type">name</span> string,age <span class="hljs-type">int</span>);<br></code></pre></td></tr></table></figure><h4 id="查看和描述数据库和表"><a href="#查看和描述数据库和表" class="headerlink" title="查看和描述数据库和表"></a>查看和描述数据库和表</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">show databases<span class="hljs-comment">;</span><br>show tables<span class="hljs-comment">;</span><br>describe database hive<span class="hljs-comment">;</span><br>describe hive.usr<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h4 id="向表中装载数据"><a href="#向表中装载数据" class="headerlink" title="向表中装载数据"></a>向表中装载数据</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> usr <span class="hljs-keyword">values</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;sina&#x27;</span>,<span class="hljs-number">20</span>);<br><br>#从linux读取数据<br>[root@yjx48 ~]# echo &quot;2,zhangsan,22&quot; &gt;&gt; /opt/data<br>hive&gt; use hive;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> usr1(id <span class="hljs-type">int</span>,<span class="hljs-type">name</span> string,age <span class="hljs-type">int</span>) <span class="hljs-keyword">row</span> <span class="hljs-keyword">format</span> delimited fields terminated <span class="hljs-keyword">by</span> &quot;,&quot;;<br><span class="hljs-keyword">load</span> data <span class="hljs-keyword">local</span> inpath <span class="hljs-string">&#x27;/opt/data&#x27;</span> overwrite <span class="hljs-keyword">into</span> <span class="hljs-keyword">table</span> usr1;<br></code></pre></td></tr></table></figure><h4 id="从hdfs中读取数据"><a href="#从hdfs中读取数据" class="headerlink" title="从hdfs中读取数据"></a>从hdfs中读取数据</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gradle">echo <span class="hljs-string">&quot;3,lisi,25&quot;</span> &gt;&gt; <span class="hljs-regexp">/opt/</span>test.txt<br>hdfs dfs -put <span class="hljs-regexp">/opt/</span>test.txt /<br>hive<br>load data inpath <span class="hljs-string">&#x27;hdfs://yjx48:9000/test.txt&#x27;</span> overwrite <span class="hljs-keyword">into</span> table usr1;<br></code></pre></td></tr></table></figure><h4 id="从别的表中读取数据"><a href="#从别的表中读取数据" class="headerlink" title="从别的表中读取数据"></a>从别的表中读取数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql">hive<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> usr;<br>OK<br><span class="hljs-number">1</span>       sina    <span class="hljs-number">20</span><br><br>hive<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> usr1;<br>OK<br><span class="hljs-number">3</span>       lisi    <span class="hljs-number">25</span><br>#读取usr1的id<span class="hljs-operator">=</span><span class="hljs-number">3</span>的数据到usr<br><span class="hljs-keyword">insert</span> overwrite <span class="hljs-keyword">table</span> usr <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> usr1 <span class="hljs-keyword">where</span> id<span class="hljs-operator">=</span><span class="hljs-number">3</span>;<br><br>hive<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> usr;<br>OK<br><span class="hljs-number">3</span>       lisi    <span class="hljs-number">25</span><br></code></pre></td></tr></table></figure><h4 id="查询表中数据"><a href="#查询表中数据" class="headerlink" title="查询表中数据"></a>查询表中数据</h4><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> usr1;<br></code></pre></td></tr></table></figure><h3 id="Hive实验：词频统计"><a href="#Hive实验：词频统计" class="headerlink" title="Hive实验：词频统计"></a>Hive实验：词频统计</h3><h4 id="在linux上创建输入目录：-x2F-opt-x2F-input；"><a href="#在linux上创建输入目录：-x2F-opt-x2F-input；" class="headerlink" title="在linux上创建输入目录：&#x2F;opt&#x2F;input；"></a>在linux上创建输入目录：&#x2F;opt&#x2F;input；</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-built_in">mkdir</span> /<span class="hljs-keyword">opt</span>/<span class="hljs-built_in">input</span><br></code></pre></td></tr></table></figure><h4 id="在以上输入目录中添加多个文本文件，其中文件中包含单词：姓名学号，例如：yjx48；"><a href="#在以上输入目录中添加多个文本文件，其中文件中包含单词：姓名学号，例如：yjx48；" class="headerlink" title="在以上输入目录中添加多个文本文件，其中文件中包含单词：姓名学号，例如：yjx48；"></a>在以上输入目录中添加多个文本文件，其中文件中包含单词：姓名学号，例如：yjx48；</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;hello1 yjx48&quot;</span> &gt;&gt; /<span class="hljs-keyword">opt</span>/<span class="hljs-built_in">input</span>/text1.txt<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;hello2 yjx48&quot;</span> &gt;&gt; /<span class="hljs-keyword">opt</span>/<span class="hljs-built_in">input</span>/text2.txt<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;hello3 yjx48&quot;</span> &gt;&gt; /<span class="hljs-keyword">opt</span>/<span class="hljs-built_in">input</span>/text3.txt<br></code></pre></td></tr></table></figure><h4 id="在Hive中创建表“docs”，并把输入目录的文件数据加载到该表中；"><a href="#在Hive中创建表“docs”，并把输入目录的文件数据加载到该表中；" class="headerlink" title="在Hive中创建表“docs”，并把输入目录的文件数据加载到该表中；"></a>在Hive中创建表“docs”，并把输入目录的文件数据加载到该表中；</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">use hive;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> docs(<span class="hljs-type">line</span> string);<br><span class="hljs-keyword">load</span> data <span class="hljs-keyword">local</span> inpath <span class="hljs-string">&#x27;/opt/input&#x27;</span> overwrite <span class="hljs-keyword">into</span> <span class="hljs-keyword">table</span> docs;<br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> docs;<br></code></pre></td></tr></table></figure><h4 id="编写HiveQL语句对输入目录的文本进行词频统计，统计单词“姓名学号”出现的次数。"><a href="#编写HiveQL语句对输入目录的文本进行词频统计，统计单词“姓名学号”出现的次数。" class="headerlink" title="编写HiveQL语句对输入目录的文本进行词频统计，统计单词“姓名学号”出现的次数。"></a>编写HiveQL语句对输入目录的文本进行词频统计，统计单词“姓名学号”出现的次数。</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> table word_count <span class="hljs-keyword">as</span><br><span class="hljs-keyword">select</span> word,<span class="hljs-built_in">count</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">count</span> <span class="hljs-keyword">from</span><br>(<span class="hljs-keyword">select</span> explode(<span class="hljs-built_in">split</span>(line,<span class="hljs-string">&#x27; &#x27;</span>)) <span class="hljs-keyword">as</span> word <span class="hljs-keyword">from</span> docs) w<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> word<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> word;<br><br><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> word_count;<br>describe word_count;<br></code></pre></td></tr></table></figure><p><img src="/../img/Hadoop%E7%BB%84%E4%BB%B6%E9%83%A8%E7%BD%B2/d20f98bec8ed685fde8bfd0e4db5fb446cc84539.png" alt="image-20230413214018276"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Hadoop</tag>
      
      <tag>Zookeeper</tag>
      
      <tag>HBase</tag>
      
      <tag>NoSQL</tag>
      
      <tag>MongoDB</tag>
      
      <tag>Hive</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OpenStack-Train双节点部署</title>
    <link href="/2023/04/02/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/"/>
    <url>/2023/04/02/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="OpenStack-Train双节点部署"><a href="#OpenStack-Train双节点部署" class="headerlink" title="OpenStack-Train双节点部署"></a>OpenStack-Train双节点部署</h1><h2 id="节点架构图（最小配置）"><a href="#节点架构图（最小配置）" class="headerlink" title="节点架构图（最小配置）"></a>节点架构图（最小配置）</h2><table><thead><tr><th align="center">主机名</th><th align="center">ip1（NAT）</th><th align="center">ip2（仅主机）</th><th align="center">硬盘</th><th align="center">内存</th></tr></thead><tbody><tr><td align="center">controller-48</td><td align="center">192.168.48.10</td><td align="center">192.168.148.10</td><td align="center">100G</td><td align="center">8G</td></tr><tr><td align="center">computer-48</td><td align="center">192.168.48.20</td><td align="center">192.168.148.20</td><td align="center">100G</td><td align="center">3G</td></tr></tbody></table><p>双节点均采用<a href="http://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-DVD-2009.iso?spm=a2c6h.25603864.0.0.60196aeaV18bmR">CentOS-7-x86_64-DVD-2009.iso</a>英文最小化安装，安装过程不做解释</p><p><font color='cornflowerred'>Computer-48需要特别注意加硬盘</font></p><p>c<font color='red'>omputer-48需要勾选处理器虚拟化</font></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/image-20240301134940011-1709275202729-27.png" alt="image-20240301134940011"></p><h3 id="网络设置"><a href="#网络设置" class="headerlink" title="网络设置"></a>网络设置</h3><p><font color='red'>控制节点网络设置</font></p><p><font color='red'>ens33</font></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/image-20240301140048584-1709275708072-155.png" alt="image-20240301140048584"></p><p><font color='red'>ens36</font></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/image-20240301140239316-1709275708073-156.png" alt="image-20240301140239316"></p><p><font color='red'>计算节点</font></p><p>原理和控制节点一样，第二张网卡不用设置网关</p><p><font color='red'>ens33</font></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/image-20240301140500814-1709275708073-157.png" alt="image-20240301140500814"></p><p>ens36</p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/image-20240301140612238-1709275708073-158.png" alt="image-20240301140612238"></p><p><font color='red'>温馨提示（小贴士）</font></p><blockquote><p>  这里就说一下为什么第二张仅主机网卡不用设置网关，因为我们本意是通过NAT进行与外网做数据交换和获取外网资源可以连接互联网的，仅主机仅仅只是用于进行虚拟机内部资源的数据交换，不具备与外网连接的作用，是无法访问互联网的，如果两张网卡同时设置了网关，可能会造成无法访问openstack里创建的虚拟机无法访问互联网，或者本机无法访问互联网的情况，原因是默认路由可能会以仅主机网卡的网络进行与外网链接，但是没办法联网。所以请不要在第二块网卡设置网关</p></blockquote><p>版本对照表</p><table><thead><tr><th align="center">OpenStack 版本</th><th align="center">CentOS 版本</th></tr></thead><tbody><tr><td align="center">Train 以及更早</td><td align="center">7</td></tr><tr><td align="center">Ussuri and Victoria</td><td align="center">8</td></tr><tr><td align="center">Wallaby 到 Yoga</td><td align="center">Stream 8</td></tr></tbody></table><h2 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h2><h3 id="基本用户信息"><a href="#基本用户信息" class="headerlink" title="基本用户信息"></a>基本用户信息</h3><p>OpenStack 各组件都需要在控制节点数据库中注册专属账户以存放数据信息，故需要设置密码，强烈建议各组件的密码以及宿主机密码各不相同。</p><table><thead><tr><th align="center">OpenStack 组件</th><th align="center">密码</th></tr></thead><tbody><tr><td align="center">控制节点 root</td><td align="center">123456</td></tr><tr><td align="center">计算节点 root</td><td align="center">123456</td></tr><tr><td align="center">Metadata 元数据密钥</td><td align="center">METADATA_SECRET</td></tr><tr><td align="center">Mariadb root 账户</td><td align="center">MARIADB_PASS</td></tr><tr><td align="center">RabbitMQ 服务</td><td align="center">RABBIT_PASS</td></tr><tr><td align="center">OpenStack admin</td><td align="center">ADMIN_PASS</td></tr><tr><td align="center">Placement 服务</td><td align="center">PLACEMENT_PASS</td></tr><tr><td align="center">Keystone 数据库</td><td align="center">KEYSTONE_DBPASS</td></tr><tr><td align="center">Glance 服务</td><td align="center">GLANCE_PASS</td></tr><tr><td align="center">Glance 数据库</td><td align="center">GLANCE_DBPASS</td></tr><tr><td align="center">Nova 服务</td><td align="center">NOVA_PASS</td></tr><tr><td align="center">Nova 数据库</td><td align="center">NOVA_DBPASS</td></tr><tr><td align="center">Neutron 服务</td><td align="center">NEUTRON_PASS</td></tr><tr><td align="center">Neutron 数据库</td><td align="center">NEUTRON_DBPASS</td></tr><tr><td align="center">Cinder 服务</td><td align="center">CINDER_PASS</td></tr><tr><td align="center">Cinder 数据库</td><td align="center">CINDER_DBPASS</td></tr><tr><td align="center">Horizon 数据库</td><td align="center">DASH_DBPASS</td></tr><tr><td align="center">Swift服务</td><td align="center">SWIFT_PASS</td></tr><tr><td align="center">Heat服务</td><td align="center">HEAT_PASS</td></tr><tr><td align="center">Heat数据库服务</td><td align="center">HEAT_DBPASS</td></tr><tr><td align="center">heat_domain_admin用户</td><td align="center">HEAT_DOMAIN_USER_PASS</td></tr></tbody></table><h3 id="身份验证"><a href="#身份验证" class="headerlink" title="身份验证"></a>身份验证</h3><p>控制节点管理 OpenStack 服务时需要进行身份认证，可将认证信息导入到控制节点环境变量中，方便后续安装配置使用。<br>admin-openrc.sh 文件需提前编写并放入控制节点中，后续安装将不再说明由来</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs routeros">cat &gt;&gt; admin-openrc.sh &lt;&lt; EOF<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_PROJECT_DOMAIN_NAME</span>=Default<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_USER_DOMAIN_NAME</span>=Default<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_PROJECT_NAME</span>=admin<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_USERNAME</span>=admin<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_PASSWORD</span>=123456<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_AUTH_URL</span>=http://controller-48:5000/v3<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_IDENTITY_API_VERSION</span>=3<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_IMAGE_API_VERSION</span>=2<br>EOF<br><br>cat &gt;&gt; user_dog-openrc.sh &lt;&lt; EOF<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_USERNAME</span>=user_dog<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_PASSWORD</span>=123456<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_PROJECT_NAME</span>=Train<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_USER_DOMAIN_NAME</span>=RegionOne<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_PROJECT_DOMAIN_NAME</span>=RegionOne<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_AUTH_URL</span>=http://controller-48:5000/v3<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_IDENTITY_API_VERSION</span>=3<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">OS_IMAGE_API_VERSION</span>=2<br>EOF<br><br><span class="hljs-comment"># OS_USERNAME  登录 OpenStack 服务的用户名</span><br><span class="hljs-comment"># OS_PASSWORD  登录 OpenStack 服务的用户密码</span><br><span class="hljs-comment"># OS_PROJECT_NAME 登录时进入的项目名</span><br><span class="hljs-comment"># OS_USER_DOMAIN_NAME  登录时进入的域名</span><br><span class="hljs-comment"># OS_PROJECT_DOMAIN_NAME  登录时进入的项目域名</span><br><span class="hljs-comment"># OS_AUTH_URL 指定 Keystone（身份认证服务）的 URL  </span><br><span class="hljs-comment"># 如未部署 DNS 服务器，则需要在 hosts中指定 controller-48 映射，或将 controller-48 用控制节点 IP 替代</span><br><span class="hljs-comment"># OS_IDENTITY_API_VERSION 身份认证服务的 API 版本号 </span><br><span class="hljs-comment"># OS_IMAGE_API_VERSION 镜像服务的 API 版本号</span><br></code></pre></td></tr></table></figure><h3 id="测试用户"><a href="#测试用户" class="headerlink" title="测试用户"></a>测试用户</h3><table><thead><tr><th>用户</th><th>密码</th></tr></thead><tbody><tr><td>admin</td><td>123456</td></tr><tr><td>use_dog</td><td>123456</td></tr></tbody></table><h3 id="物理节点关闭顺序"><a href="#物理节点关闭顺序" class="headerlink" title="物理节点关闭顺序"></a>物理节点关闭顺序</h3><p>给每台机都加上两个脚本</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs nsis">cat &gt;&gt; stop.sh &lt;&lt; EOF<br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment"># 关闭所有 OpenStack 节点</span><br><span class="hljs-comment"># 依次关闭计算节点、网络节点、控制节点</span><br>for server in \$(openstack server list -f value -c ID)<span class="hljs-comment">; do</span><br>    openstack server stop \<span class="hljs-variable">$server</span><br>done<br><span class="hljs-comment"># 关闭计算节点</span><br>echo <span class="hljs-string">&quot;Stopping compute services...&quot;</span><br><span class="hljs-params">system</span>ctl stop openstack-nova-compute.service<br><span class="hljs-params">system</span>ctl stop libvirtd.service<br><span class="hljs-comment"># 关闭网络节点</span><br>echo <span class="hljs-string">&quot;Stopping network services...&quot;</span><br><span class="hljs-params">system</span>ctl stop openvswitch.service<br><span class="hljs-params">system</span>ctl stop neutron-server.service<br><span class="hljs-params">system</span>ctl stop neutron-linuxbridge-agent.service<br><span class="hljs-params">system</span>ctl stop neutron-dhcp-agent.service<br><span class="hljs-params">system</span>ctl stop neutron-metadata-agent.service<br><span class="hljs-params">system</span>ctl stop neutron-l3-agent.service<br><span class="hljs-comment"># 关闭控制节点</span><br>echo <span class="hljs-string">&quot;Stopping control services...&quot;</span><br><span class="hljs-params">system</span>ctl stop mariadb.service<br><span class="hljs-params">system</span>ctl stop rabbitmq-server.service<br><span class="hljs-params">system</span>ctl stop memcached.service<br><span class="hljs-params">system</span>ctl stop httpd.service<br><span class="hljs-params">system</span>ctl stop openstack-glance-api.service<br><span class="hljs-params">system</span>ctl stop openstack-glance-registry.service<br><span class="hljs-params">system</span>ctl stop openstack-cinder-api.service<br><span class="hljs-params">system</span>ctl stop openstack-cinder-scheduler.service<br><span class="hljs-params">system</span>ctl stop openstack-cinder-volume.service<br><span class="hljs-params">system</span>ctl stop openstack-nova-api.service<br><span class="hljs-params">system</span>ctl stop openstack-nova-scheduler.service<br><span class="hljs-params">system</span>ctl stop openstack-nova-conductor.service<br><span class="hljs-params">system</span>ctl stop openstack-nova-novncproxy.service<br><span class="hljs-params">system</span>ctl stop openstack-nova-consoleauth.service<br><span class="hljs-params">system</span>ctl stop openstack-keystone.service<br><span class="hljs-params">system</span>ctl stop openstack-heat-api.service<br><span class="hljs-params">system</span>ctl stop openstack-heat-api-cfn.service<br><span class="hljs-params">system</span>ctl stop openstack-heat-engine.service<br><span class="hljs-params">system</span>ctl stop openstack-swift-proxy.service<br><span class="hljs-params">system</span>ctl stop openstack-swift-account.service<br><span class="hljs-params">system</span>ctl stop openstack-swift-container.service<br><span class="hljs-params">system</span>ctl stop openstack-swift-object.service<br>echo <span class="hljs-string">&quot;Stopping all services...&quot;</span><br><span class="hljs-params">system</span>ctl stop --<span class="hljs-literal">all</span><br><span class="hljs-comment"># 关闭电源</span><br>echo <span class="hljs-string">&quot;Shutting down the system...&quot;</span><br>poweroff<br>EOF<br><br>cat &gt;&gt; start.sh &lt;&lt; EOF<br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment"># 重新启动 OpenStack 服务</span><br><span class="hljs-comment"># 依次启动控制节点、网络节点、计算节点</span><br><span class="hljs-comment"># 启动控制节点</span><br>echo <span class="hljs-string">&quot;Starting control services...&quot;</span><br><span class="hljs-params">system</span>ctl start mariadb.service<br><span class="hljs-params">system</span>ctl start rabbitmq-server.service<br><span class="hljs-params">system</span>ctl start memcached.service<br><span class="hljs-params">system</span>ctl start httpd.service<br><span class="hljs-params">system</span>ctl start openstack-glance-api.service<br><span class="hljs-params">system</span>ctl start openstack-glance-registry.service<br><span class="hljs-params">system</span>ctl start openstack-cinder-api.service<br><span class="hljs-params">system</span>ctl start openstack-cinder-scheduler.service<br><span class="hljs-params">system</span>ctl start openstack-cinder-volume.service<br><span class="hljs-params">system</span>ctl start openstack-nova-api.service<br><span class="hljs-params">system</span>ctl start openstack-nova-scheduler.service<br><span class="hljs-params">system</span>ctl start openstack-nova-conductor.service<br><span class="hljs-params">system</span>ctl start openstack-nova-novncproxy.service<br><span class="hljs-params">system</span>ctl start openstack-nova-consoleauth.service<br><span class="hljs-params">system</span>ctl start openstack-keystone.service<br><span class="hljs-params">system</span>ctl start openstack-heat-api.service<br><span class="hljs-params">system</span>ctl start openstack-heat-api-cfn.service<br><span class="hljs-params">system</span>ctl start openstack-heat-engine.service<br><span class="hljs-params">system</span>ctl start openstack-swift-proxy.service<br><span class="hljs-params">system</span>ctl start openstack-swift-account.service<br><span class="hljs-params">system</span>ctl start openstack-swift-container.service<br><span class="hljs-params">system</span>ctl start openstack-swift-object.service<br><span class="hljs-comment"># 启动网络节点</span><br>echo <span class="hljs-string">&quot;Starting network services...&quot;</span><br><span class="hljs-params">system</span>ctl start openvswitch.service<br><span class="hljs-params">system</span>ctl start neutron-server.service<br><span class="hljs-params">system</span>ctl start neutron-linuxbridge-agent.service<br><span class="hljs-params">system</span>ctl start neutron-dhcp-agent.service<br><span class="hljs-params">system</span>ctl start neutron-metadata-agent.service<br><span class="hljs-params">system</span>ctl start neutron-l3-agent.service<br><span class="hljs-comment"># 启动计算节点</span><br>echo <span class="hljs-string">&quot;Starting compute services...&quot;</span><br><span class="hljs-params">system</span>ctl start libvirtd.service<br><span class="hljs-params">system</span>ctl start openstack-nova-compute.service<br>EOF<br></code></pre></td></tr></table></figure><p><font color='red'>（先给两个计算节点执行-最后等计算节点完全关闭，再给控制节点执行）</font></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">关闭物理机的时候运行<br><span class="hljs-keyword">sh</span> <span class="hljs-keyword">stop</span>.<span class="hljs-keyword">sh</span><br>(运行的时候可能会提示你有些服务找不到，报错，这个没关系，一般情况下是没问题的<br></code></pre></td></tr></table></figure><h3 id="物理节点开启顺序"><a href="#物理节点开启顺序" class="headerlink" title="物理节点开启顺序"></a>物理节点开启顺序</h3><blockquote><p><font color='red'>先给controller-48运行start.sh再给计算节点运行start.sh</font></p><p>sh start.sh</p></blockquote><h2 id="基础环境"><a href="#基础环境" class="headerlink" title="基础环境"></a>基础环境</h2><h3 id="修改主机名和防火墙"><a href="#修改主机名和防火墙" class="headerlink" title="修改主机名和防火墙"></a>修改主机名和防火墙</h3><p>controller-48节点</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gams">hostnamectl <span class="hljs-keyword">set</span>-hostname <span class="hljs-comment">controller-48 &amp;&amp; bash</span><br>systemctl <span class="hljs-comment">disable firewalld --now</span><br>sed <span class="hljs-comment">-i</span> <span class="hljs-comment">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/<span class="hljs-comment">sysconfig</span>/selinux<br>sed -i <span class="hljs-comment">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /<span class="hljs-comment">etc</span>/selinux/<span class="hljs-comment">config</span><br>echo <span class="hljs-comment">&quot;192.168.48.10 controller-48&quot;</span> <span class="hljs-comment">&gt;&gt;</span> /etc/<span class="hljs-comment">hosts</span><br>echo <span class="hljs-comment">&quot;192.168.48.20 computer-48&quot;</span> <span class="hljs-comment">&gt;&gt;</span> /etc/<span class="hljs-comment">hosts</span><br>setenforce <span class="hljs-comment">0</span><br>reboot<br></code></pre></td></tr></table></figure><p>computer-48节点</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gams">hostnamectl <span class="hljs-keyword">set</span>-hostname <span class="hljs-comment">computer-48 &amp;&amp; bash</span><br>systemctl <span class="hljs-comment">disable firewalld --now</span><br>sed <span class="hljs-comment">-i</span> <span class="hljs-comment">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/<span class="hljs-comment">sysconfig</span>/selinux<br>sed -i <span class="hljs-comment">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /<span class="hljs-comment">etc</span>/selinux/<span class="hljs-comment">config</span><br>echo <span class="hljs-comment">&quot;192.168.48.10 controller-48&quot;</span> <span class="hljs-comment">&gt;&gt;</span> /etc/<span class="hljs-comment">hosts</span><br>echo <span class="hljs-comment">&quot;192.168.48.20 computer-48&quot;</span> <span class="hljs-comment">&gt;&gt;</span> /etc/<span class="hljs-comment">hosts</span><br>setenforce <span class="hljs-comment">0</span><br>reboot<br></code></pre></td></tr></table></figure><h3 id="修改yum"><a href="#修改yum" class="headerlink" title="修改yum"></a>修改yum</h3><p>controller-48和computer-48节点</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs awk">rm -rf <span class="hljs-regexp">/etc/yum</span>.repos.d/*<br>curl -o <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/epel.repo http:/</span><span class="hljs-regexp">/mirrors.aliyun.com/</span>repo/epel-<span class="hljs-number">7</span>.repo<br>curl -o <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/CentOS-Base.repo http:/</span><span class="hljs-regexp">/mirrors.aliyun.com/</span>repo/Centos-<span class="hljs-number">7</span>.repo<br>cat &gt;&gt;<span class="hljs-regexp">/etc/yum</span>.repos.d/openstack.repo&lt;&lt;EOF<br>[openstack]<br>name=openstack<br>baseurl=https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/centos/</span><span class="hljs-number">7</span><span class="hljs-regexp">/cloud/</span>x86_64<span class="hljs-regexp">/openstack-train/</span><br>gpgcheck=<span class="hljs-number">0</span> <br>enabled=<span class="hljs-number">1</span><br>EOF<br>yum clean all &amp;&amp; yum makecache<br>yum update -y<br></code></pre></td></tr></table></figure><h3 id="SSH免密"><a href="#SSH免密" class="headerlink" title="SSH免密"></a>SSH免密</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#各节点</span><br>yum install -y sshpass <br><span class="hljs-built_in">cat</span> &gt; sshmianmi.sh &lt;&lt; <span class="hljs-string">&quot;EOF&quot;</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment"># 目标主机列表</span><br>hosts=(<span class="hljs-string">&quot;controller-48&quot;</span> <span class="hljs-string">&quot;computer-48&quot;</span>)<br><span class="hljs-comment"># 密码（注意修改）</span><br>password=<span class="hljs-string">&quot;123456&quot;</span><br><span class="hljs-comment"># 生成 SSH 密钥对</span><br>ssh-keygen -t rsa -N <span class="hljs-string">&quot;&quot;</span> -f ~/.ssh/id_rsa<br><br><span class="hljs-comment"># 循环遍历目标主机</span><br><span class="hljs-keyword">for</span> host <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;hosts[@]&#125;</span>&quot;</span><br><span class="hljs-keyword">do</span><br>    <span class="hljs-comment"># 复制公钥到目标主机</span><br>    sshpass -p <span class="hljs-string">&quot;<span class="hljs-variable">$password</span>&quot;</span> ssh-copy-id -o StrictHostKeyChecking=no <span class="hljs-string">&quot;<span class="hljs-variable">$host</span>&quot;</span><br>    <br>    <span class="hljs-comment"># 验证免密登录</span><br>    sshpass -p <span class="hljs-string">&quot;<span class="hljs-variable">$password</span>&quot;</span> ssh -o StrictHostKeyChecking=no <span class="hljs-string">&quot;<span class="hljs-variable">$host</span>&quot;</span> <span class="hljs-string">&quot;echo &#x27;免密登录成功&#x27;&quot;</span><br><span class="hljs-keyword">done</span><br>EOF<br><br>sh sshmianmi.sh<br></code></pre></td></tr></table></figure><h2 id="安装OpenStack包"><a href="#安装OpenStack包" class="headerlink" title="安装OpenStack包"></a>安装OpenStack包</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#各节点</span><br>yum -y <span class="hljs-keyword">install</span> openstack-utils openstack-selinux python-openstackclient<br>yum upgrade<br></code></pre></td></tr></table></figure><h2 id="依赖组件"><a href="#依赖组件" class="headerlink" title="依赖组件"></a>依赖组件</h2><p>四个组件安装在controller-48节点上</p><h3 id="Mariadb数据库"><a href="#Mariadb数据库" class="headerlink" title="Mariadb数据库"></a>Mariadb数据库</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">yum install mariadb mariadb-<span class="hljs-keyword">server</span> python2-PyMySQL -y<br>cat &gt;&gt;/etc/my.cnf.d/openstack.cnf&lt;&lt;EOF<br>[mysqld]<br>bind-address =<span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.10</span><br><span class="hljs-keyword">default</span>-<span class="hljs-keyword">storage</span>-engine = innodb<br>innodb_file_per_table = <span class="hljs-keyword">on</span><br>max_connections =<span class="hljs-number">4096</span><br><span class="hljs-keyword">collation</span>-<span class="hljs-keyword">server</span> = utf8_general_ci<br><span class="hljs-type">character</span>-<span class="hljs-keyword">set</span>-<span class="hljs-keyword">server</span> = utf8<br>EOF<br>systemctl <span class="hljs-keyword">enable</span> mariadb <span class="hljs-comment">--now</span><br>mysql_secure_installation<br>Enter <span class="hljs-keyword">current</span> <span class="hljs-keyword">password</span> <span class="hljs-keyword">for</span> root (enter <span class="hljs-keyword">for</span> <span class="hljs-keyword">none</span>): 回车<br><span class="hljs-keyword">Set</span> root <span class="hljs-keyword">password</span>? [Y/n] y<br># 将要求输入数据库 root 账户密码 MARIADB_PASS<br>Remove anonymous users? [Y/n] y<br>Disallow root <span class="hljs-keyword">login</span> remotely? [Y/n] n<br>Remove test <span class="hljs-keyword">database</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">access</span> <span class="hljs-keyword">to</span> it? [Y/n] y<br>Reload privilege <span class="hljs-keyword">tables</span> now? [Y/n] y<br># 验证<br>mysql -u root -pMARIADB_PASS<br></code></pre></td></tr></table></figure><h3 id="Rabbitmq"><a href="#Rabbitmq" class="headerlink" title="Rabbitmq"></a>Rabbitmq</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">yum install rabbitmq-<span class="hljs-keyword">server</span> -y<br>systemctl <span class="hljs-keyword">enable</span> rabbitmq-<span class="hljs-keyword">server</span> <span class="hljs-comment">--now</span><br>rabbitmqctl add_user openstack RABBIT_PASS<br># 注意将 RABBIT_PASS  修改为 Rabbitmq消息队列密码<br>rabbitmqctl set_permissions openstack &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;<br></code></pre></td></tr></table></figure><h3 id="Memcached"><a href="#Memcached" class="headerlink" title="Memcached"></a>Memcached</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lsl">yum install memcached python-memcached -y<br>sed -i <span class="hljs-string">&quot;s/OPTIONS=<span class="hljs-subst">\&quot;</span>-l 127.0.0.1,::1<span class="hljs-subst">\&quot;</span>/OPTIONS=<span class="hljs-subst">\&quot;</span>-l 127.0.0.1,::1,controller-48<span class="hljs-subst">\&quot;</span>/g&quot;</span> /etc/sysconfig/memcached<br>systemctl enable memcached --now<br></code></pre></td></tr></table></figure><p>注意这里的-l 127.0.0.1,::1,controller-48中controller-48是你的主机名，后续不做解释</p><h3 id="etcd"><a href="#etcd" class="headerlink" title="etcd"></a>etcd</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs routeros">yum install -y etcd<br>mv /etc/etcd/etcd.conf&#123;,.bak&#125; <br>cat &gt;&gt; /etc/etcd/etcd.conf &lt;&lt; EOF<br><span class="hljs-comment">#[Member]</span><br><span class="hljs-attribute">ETCD_DATA_DIR</span>=<span class="hljs-string">&quot;/var/lib/etcd/default.etcd&quot;</span><br><span class="hljs-attribute">ETCD_LISTEN_PEER_URLS</span>=<span class="hljs-string">&quot;http://192.168.48.10:2380&quot;</span><br><span class="hljs-attribute">ETCD_LISTEN_CLIENT_URLS</span>=<span class="hljs-string">&quot;http://192.168.48.10:2379&quot;</span><br><span class="hljs-attribute">ETCD_NAME</span>=<span class="hljs-string">&quot;controller-48&quot;</span><br><span class="hljs-comment">#controller-48是你的主机名</span><br><span class="hljs-comment">#[Clustering]</span><br><span class="hljs-attribute">ETCD_INITIAL_ADVERTISE_PEER_URLS</span>=<span class="hljs-string">&quot;http://192.168.48.10:2380&quot;</span><br><span class="hljs-attribute">ETCD_ADVERTISE_CLIENT_URLS</span>=<span class="hljs-string">&quot;http://192.168.48.10:2379&quot;</span><br><span class="hljs-attribute">ETCD_INITIAL_CLUSTER</span>=<span class="hljs-string">&quot;controller-48=http://192.168.48.10:2380&quot;</span><br><span class="hljs-attribute">ETCD_INITIAL_CLUSTER_TOKEN</span>=<span class="hljs-string">&quot;etcd-cluster-01&quot;</span><br><span class="hljs-attribute">ETCD_INITIAL_CLUSTER_STATE</span>=<span class="hljs-string">&quot;new&quot;</span><br>EOF<br>systemctl <span class="hljs-built_in">enable</span> etcd --now<br></code></pre></td></tr></table></figure><h2 id="Keystone-身份验证服务"><a href="#Keystone-身份验证服务" class="headerlink" title="Keystone(身份验证服务)"></a>Keystone(身份验证服务)</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#controller-48节点</span><br>mysql -u root -pMARIADB_PASS<br>CREATE DATABASE keystone;<br>GRANT ALL PRIVILEGES ON keystone.* TO <span class="hljs-string">&#x27;keystone&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="hljs-string">&#x27;KEYSTONE_DBPASS&#x27;</span>;<br>GRANT ALL PRIVILEGES ON keystone.* TO <span class="hljs-string">&#x27;keystone&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="hljs-string">&#x27;KEYSTONE_DBPASS&#x27;</span>;<br>flush privileges;<br><span class="hljs-keyword">exit</span><br><span class="hljs-comment"># KEYSTONE_DBPASS  为 Keystone 数据库密码</span><br>yum -y install yum-utils<br>yum -y install qpid-proton-c-<span class="hljs-number">0.26</span>.<span class="hljs-number">0</span>-<span class="hljs-number">2</span>.el7.x86_64<br>yum install -y openstack-keystone httpd mod_wsgi <br>mv <span class="hljs-regexp">/etc/</span>keystone/keystone.conf&#123;,.bak&#125;<br>cat&gt;&gt; <span class="hljs-regexp">/etc/</span>keystone/keystone.conf &lt;&lt; EOF<br>[database]<br>connection = mysql+pymysql:<span class="hljs-regexp">//</span>keystone:KEYSTONE_DBPASS@controller-<span class="hljs-number">48</span>/keystone<br>[token]<br>provider = fernet<br>EOF<br><span class="hljs-comment">#同步服务器</span><br>su -s <span class="hljs-regexp">/bin/</span>sh -c <span class="hljs-string">&quot;keystone-manage db_sync&quot;</span> keystone<br><span class="hljs-comment">#查看是否成功</span><br>mysql -u keystone -p<span class="hljs-string">&quot;KEYSTONE_DBPASS&quot;</span><br>use keystone;<br>show tables;<br><span class="hljs-keyword">exit</span><br><span class="hljs-comment">#有表就行</span><br><br><span class="hljs-comment">#配置</span><br>keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone<br>keystone-manage credential_setup --keystone-user keystone --keystone-group keystone<br>keystone-manage bootstrap --bootstrap-password <span class="hljs-number">123456</span> \<br>  --bootstrap-admin-url http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><span class="hljs-regexp">/v3/</span> \<br>  --bootstrap-internal-url http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><span class="hljs-regexp">/v3/</span> \<br>  --bootstrap-public-url http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><span class="hljs-regexp">/v3/</span> \<br>  --bootstrap-region-id RegionOne<br><span class="hljs-comment"># 123456 为 admin 账户密码</span><br><br>cp <span class="hljs-regexp">/etc/</span>httpd<span class="hljs-regexp">/conf/</span>httpd.conf&#123;,.bak&#125;<br>sed -i <span class="hljs-string">&quot;s/#ServerName www.example.com:80/ServerName controller-48/g&quot;</span> <span class="hljs-regexp">/etc/</span>httpd<span class="hljs-regexp">/conf/</span>httpd.conf<br>ln -s <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/keystone/</span>wsgi-keystone.conf <span class="hljs-regexp">/etc/</span>httpd<span class="hljs-regexp">/conf.d/</span><br>systemctl enable httpd  --now<br><br><span class="hljs-comment">#创建域、项目、用户、角色</span><br>source admin-openrc.sh<br><span class="hljs-comment"># service 项目 创建在 default 用于 OpenStack 服务</span><br>openstack project create --domain default \<br>  --description <span class="hljs-string">&quot;Service Project&quot;</span> service<br><span class="hljs-comment"># 创建一个 RegionOne 域名作为后续云实例创建域名</span><br>openstack domain create --description <span class="hljs-string">&quot;RegionOne Domain&quot;</span> RegionOne<br><span class="hljs-comment"># 在 RegionOne 域中创建一个 Train 项目</span><br>openstack project create --domain RegionOne \<br>  --description <span class="hljs-string">&quot;Train Project&quot;</span> Train<br><span class="hljs-comment"># 在 RegionOne 域中创建普通用户 user_dog </span><br>openstack user create --domain RegionOne \<br>  --password <span class="hljs-number">123456</span> user_dog<br><span class="hljs-comment"># 创建普通用户 user_dog  的规则 user_dog_role</span><br>openstack role create user_dog_role<br><span class="hljs-comment"># 将规则与用户绑定</span><br>openstack role add --project Train --user user_dog user_dog_role<br><span class="hljs-comment"># 注：可以重复上边步骤以创建更多项目、用户及规则</span><br><br><span class="hljs-comment"># 验证服务可用性</span><br><span class="hljs-comment"># 卸载 admin 用户的环境</span><br>unset OS_AUTH_URL OS_PASSWORD<br><span class="hljs-comment"># 验证 admin 用户可用性</span><br>openstack --os-auth-url http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span>/v3 \<br>  --os-project-domain-name Default --os-user-domain-name Default --os-project-name admin --os-username admin token issue<br><span class="hljs-comment"># 输入后将要求输入 管理员 admin 的密码</span><br><span class="hljs-comment"># 返回  token 信息则服务正常</span><br><br><span class="hljs-comment"># 验证 user_dog 用户可用性</span><br>openstack --os-auth-url http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span>/v3 \<br>  --os-project-domain-name RegionOne --os-user-domain-name RegionOne --os-project-name Train --os-username user_dog token issue<br><br>source admin-openrc.sh<br><span class="hljs-comment"># 列举当前所有域名</span><br>openstack domain list<br>+----------------------------------+-----------+---------+--------------------+<br>| ID                               | Name      | Enabled | Description        |<br>+----------------------------------+-----------+---------+--------------------+<br>| <span class="hljs-number">7</span>fcb64a8c47f40a48265a9db94f0c963 | RegionOne | True    | RegionOne Domain   |<br>| default                          | Default   | True    | The default domain |<br>+----------------------------------+-----------+---------+--------------------+<br></code></pre></td></tr></table></figure><h2 id="Glance-镜像服务"><a href="#Glance-镜像服务" class="headerlink" title="Glance(镜像服务)"></a>Glance(镜像服务)</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#控制节点</span><br>mysql -u root -pMARIADB_PASS<br>CREATE DATABASE glance;<br>GRANT ALL PRIVILEGES ON glance.* TO <span class="hljs-string">&#x27;glance&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> \<br>  IDENTIFIED BY <span class="hljs-string">&#x27;GLANCE_DBPASS&#x27;</span>;<br>GRANT ALL PRIVILEGES ON glance.* TO <span class="hljs-string">&#x27;glance&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> \<br>  IDENTIFIED BY <span class="hljs-string">&#x27;GLANCE_DBPASS&#x27;</span>;<br>flush privileges;<br><span class="hljs-keyword">exit</span><br><span class="hljs-comment">#将 GLANCE_DBPASS 替换为 glance数据库服务的密码</span><br>source admin-openrc.sh<br><span class="hljs-comment">#创建用户服务和api端点</span><br>openstack user create --domain default --password GLANCE_PASS glance<br><span class="hljs-comment">#GLANCE_PASS 为 glance 服务的密码</span><br><br><span class="hljs-comment"># 为 Glance 用户添加 admin 规则到系统项目 service</span><br>openstack role add --project service --user glance admin<br><span class="hljs-comment"># 没有输出内容</span><br><br><span class="hljs-comment"># 为 Glance 添加管理镜像的服务</span><br>openstack service create --name glance \<br>  --description <span class="hljs-string">&quot;OpenStack Image&quot;</span> image<br><br><span class="hljs-comment"># 为 RegionOne 域名添加服务接口</span><br>openstack endpoint create --region RegionOne \<br>  image public http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">9292</span><br><br>openstack endpoint create --region RegionOne \<br>  image internal http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">9292</span><br><br>openstack endpoint create --region RegionOne \<br>  image admin http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">9292</span><br><br><span class="hljs-comment">#安装glance服务</span><br>yum install openstack-glance -y<br>mv <span class="hljs-regexp">/etc/g</span>lance/glance-api.conf&#123;,.bak&#125;<br>cat &gt;&gt;<span class="hljs-regexp">/etc/g</span>lance/glance-api.conf &lt;&lt; EOF<br>[DEFAULT]<br>use_keystone_quotas = True<br>log_file = <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/glance/g</span>lance.log<br>[database]<br>connection = mysql+pymysql:<span class="hljs-regexp">//g</span>lance:GLANCE_DBPASS@controller-<span class="hljs-number">48</span>/glance<br><span class="hljs-comment"># GLANCE_DBPASS 为 Glance 服务的数据库账户密码</span><br>[keystone_authtoken]<br>www_authenticate_uri  = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>auth_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>memcached_servers = controller-<span class="hljs-number">48</span>:<span class="hljs-number">11211</span><br>auth_type = password<br>project_domain_name = Default<br>user_domain_name = Default<br>project_name = service<br>username = glance<br>password = GLANCE_PASS<br>service_token_roles_required = true<br><span class="hljs-comment"># GLANCE_PASS 为 Glance 服务的数据库账户密码</span><br>[paste_deploy]<br>flavor = keystone<br>[glance_store]<br>stores = file,http<br>default_store = file<br>default_backend = &#123;<span class="hljs-string">&#x27;store_one&#x27;</span>: <span class="hljs-string">&#x27;http&#x27;</span>, <span class="hljs-string">&#x27;store_two&#x27;</span>: <span class="hljs-string">&#x27;file&#x27;</span>&#125;<br>filesystem_store_datadir = <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/glance/im</span>ages/<br>EOF<br><span class="hljs-comment"># 同步 Glance 数据到数据库</span><br>su -s <span class="hljs-regexp">/bin/</span>sh -c <span class="hljs-string">&quot;glance-manage db_sync&quot;</span> glance<br>systemctl enable openstack-glance-api  --now<br><span class="hljs-comment"># 验证服务可用性</span><br>source admin-openrc.sh<br>wget https:<span class="hljs-regexp">//</span>download.cirros-cloud.net<span class="hljs-regexp">/0.3.3/</span>cirros-<span class="hljs-number">0.3</span>.<span class="hljs-number">3</span>-x86_64-disk.img<br><span class="hljs-comment">#可能会拉取失败，可以自行复制网址，去浏览器下载，然后上传到/root/目录下</span><br><br>glance image-create --name <span class="hljs-string">&quot;cirros&quot;</span> \<br>  --file cirros-<span class="hljs-number">0.3</span>.<span class="hljs-number">3</span>-x86_64-disk.img \<br>  --disk-format qcow2 --container-format bare \<br>  --visibility=public<br><br>openstack image list<br><span class="hljs-comment"># +--------------------------------------+--------+--------+</span><br><span class="hljs-comment"># | ID                                   | Name   | Status |</span><br><span class="hljs-comment"># +--------------------------------------+--------+--------+</span><br><span class="hljs-comment"># | 4e022193-03c2-40c4-872f-0adb606f31e4 | cirros | active |</span><br><span class="hljs-comment"># +--------------------------------------+--------+--------+</span><br></code></pre></td></tr></table></figure><h2 id="Placement（资源调度）"><a href="#Placement（资源调度）" class="headerlink" title="Placement（资源调度）"></a>Placement（资源调度）</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs awk">mysql -u root -pMARIADB_PASS<br>CREATE DATABASE placement;<br>GRANT ALL PRIVILEGES ON placement.* TO <span class="hljs-string">&#x27;placement&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span>  IDENTIFIED BY <span class="hljs-string">&#x27;PLACEMENT_DBPASS&#x27;</span>;<br>GRANT ALL PRIVILEGES ON placement.* TO <span class="hljs-string">&#x27;placement&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="hljs-string">&#x27;PLACEMENT_DBPASS&#x27;</span>;<br>flush privileges;<br><span class="hljs-keyword">exit</span><br><span class="hljs-comment">#PLACEMENT_DBPASS 为 placement 服务的密码</span><br>source admin-openrc.sh<br>openstack user create --domain default --password PLACEMENT_PASS placement<br>openstack role add --project service --user placement admin<br>openstack service create --name placement \<br>  --description <span class="hljs-string">&quot;Placement API&quot;</span> placement<br>openstack endpoint create --region RegionOne \<br>  placement public http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">8778</span><br>openstack endpoint create --region RegionOne \<br>  placement internal http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">8778</span><br>openstack endpoint create --region RegionOne \<br>  placement admin http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">8778</span><br>yum install openstack-placement-api -y<br>mv <span class="hljs-regexp">/etc/</span>placement/placement.conf&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>placement/placement.conf &lt;&lt; EOF<br>[placement_database]<br>connection = mysql+pymysql:<span class="hljs-regexp">//</span>placement:PLACEMENT_DBPASS@controller-<span class="hljs-number">48</span>/placement<br><span class="hljs-comment"># PLACEMENT_DBPASS 为 placement 服务的数据库账户密码</span><br>[api]<br>auth_strategy = keystone<br>[keystone_authtoken]<br>auth_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span>/v3<br>memcached_servers = controller-<span class="hljs-number">48</span>:<span class="hljs-number">11211</span><br>auth_type = password<br>project_domain_name = Default<br>user_domain_name = Default<br>project_name = service<br>username = placement<br>password = PLACEMENT_PASS<br><span class="hljs-comment"># PLACEMENT_PASS 为 placement 服务的密码</span><br>EOF<br><br><span class="hljs-comment">#同步数据库</span><br>su -s <span class="hljs-regexp">/bin/</span>sh -c <span class="hljs-string">&quot;placement-manage db sync&quot;</span> placement<br>cp <span class="hljs-regexp">/etc/</span>httpd<span class="hljs-regexp">/conf.d/</span><span class="hljs-number">00</span>-placement-api.conf&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>httpd<span class="hljs-regexp">/conf.d/</span><span class="hljs-number">00</span>-placement-api.conf &lt;&lt; EOF<br><span class="hljs-comment">#在#SSLCertificateKeyFile ...下添加</span><br>&lt;Directory <span class="hljs-regexp">/usr/</span>bin&gt;<br>&lt;IfVersion &gt;= <span class="hljs-number">2.4</span>&gt;<br>Require all granted<br>&lt;/IfVersion&gt;<br>&lt;IfVersion &lt; <span class="hljs-number">2.4</span>&gt;<br>Order allow,deny<br>Allow from all<br>&lt;/IfVersion&gt;<br>&lt;/Directory&gt;<br>EOF<br>systemctl restart httpd<br><br><span class="hljs-comment"># 验证服务</span><br>source admin-openrc.sh<br>placement-status upgrade check<br><span class="hljs-comment">#安装pip osc组件验证资源</span><br>yum install python-pip -y<br>pip install osc-placement==<span class="hljs-number">2.2</span>.<span class="hljs-number">0</span><br>systemctl restart httpd<br><br><span class="hljs-comment"># 验证</span><br>openstack --os-placement-api-version <span class="hljs-number">1.2</span> resource class list --sort-column name<br><span class="hljs-comment"># +----------------------------------------+</span><br><span class="hljs-comment"># | name                                   |</span><br><span class="hljs-comment"># +----------------------------------------+</span><br><span class="hljs-comment"># | DISK_GB                                |</span><br>......<br><br>openstack --os-placement-api-version <span class="hljs-number">1.6</span> trait list --sort-column name<br><span class="hljs-comment"># +---------------------------------------+</span><br><span class="hljs-comment"># | name                                  |</span><br><span class="hljs-comment"># +---------------------------------------+</span><br><span class="hljs-comment"># | computer-48_ACCELERATORS                  |</span><br><span class="hljs-comment"># | computer-48_ARCH_AARCH64                  |</span><br><span class="hljs-comment"># ...</span><br></code></pre></td></tr></table></figure><h2 id="Nova-计算服务"><a href="#Nova-计算服务" class="headerlink" title="Nova(计算服务)"></a>Nova(计算服务)</h2><h3 id="控制节点"><a href="#控制节点" class="headerlink" title="控制节点"></a>控制节点</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">#控制节点controller<span class="hljs-number">-48</span><br>mysql -u root -pMARIADB_PASS<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> nova_api;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> nova;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> nova_cell0;<br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> nova_api.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;nova&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> \<br>  IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;NOVA_DBPASS&#x27;</span>;<br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> nova_api.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;nova&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> \<br>  IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;NOVA_DBPASS&#x27;</span>;<br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> nova.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;nova&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> \<br>  IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;NOVA_DBPASS&#x27;</span>;<br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> nova.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;nova&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> \<br>  IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;NOVA_DBPASS&#x27;</span>;<br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> nova_cell0.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;nova&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> \<br>  IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;NOVA_DBPASS&#x27;</span>;<br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> nova_cell0.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;nova&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> \<br>  IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;NOVA_DBPASS&#x27;</span>;<br>flush <span class="hljs-keyword">privileges</span>;<br><span class="hljs-keyword">exit</span><br><br># NOVA_DBPASS 为 nova 服务的密码<br><br>source <span class="hljs-keyword">admin</span>-openrc.sh<br>openstack <span class="hljs-keyword">user</span> <span class="hljs-keyword">create</span> <span class="hljs-comment">--domain default --password NOVA_PASS nova</span><br>openstack <span class="hljs-keyword">role</span> <span class="hljs-keyword">add</span> <span class="hljs-comment">--project service --user nova admin</span><br>openstack service <span class="hljs-keyword">create</span> <span class="hljs-comment">--name nova \</span><br>  <span class="hljs-comment">--description &quot;OpenStack Compute&quot; compute</span><br>openstack endpoint <span class="hljs-keyword">create</span> <span class="hljs-comment">--region RegionOne \</span><br>  compute <span class="hljs-built_in">public</span> http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">8774</span>/v2<span class="hljs-number">.1</span><br>openstack endpoint <span class="hljs-keyword">create</span> <span class="hljs-comment">--region RegionOne \</span><br>  compute <span class="hljs-type">internal</span> http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">8774</span>/v2<span class="hljs-number">.1</span><br>openstack endpoint <span class="hljs-keyword">create</span> <span class="hljs-comment">--region RegionOne \</span><br>  compute <span class="hljs-keyword">admin</span> http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">8774</span>/v2<span class="hljs-number">.1</span><br>mv /etc/yum.repos.d/epel.repo&#123;,.bak&#125; <br>yum install -y \<br>    openstack-nova-api \<br>    openstack-nova-scheduler \<br>    openstack-nova-conductor \<br>    openstack-nova-novncproxy<br>mv /etc/yum.repos.d/epel.repo&#123;.bak,&#125; <br>mv /etc/nova/nova.conf&#123;,.bak&#125;<br>cat &gt;&gt; /etc/nova/nova.conf &lt;&lt;EOF<br>[<span class="hljs-keyword">DEFAULT</span>]<br>enabled_apis = osapi_compute,metadata<br>transport_url = rabbit://openstack:RABBIT_PASS@controller<span class="hljs-number">-48</span>:<span class="hljs-number">5672</span>/<br># RABBIT_PASS为 rabbitmq 密码<br>my_ip = <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.10</span><br># 控制节点控制网络的 IP<br>log_file = /var/<span class="hljs-keyword">log</span>/nova/nova-controller.<span class="hljs-keyword">log</span><br>rootwrap_config = /etc/nova/rootwrap.conf<br>[api_database]<br><span class="hljs-keyword">connection</span> = mysql+pymysql://nova:NOVA_DBPASS@controller<span class="hljs-number">-48</span>/nova_api<br># NOVA_DBPASS 为数据库 Nova 账户密码<br>[<span class="hljs-keyword">database</span>]<br><span class="hljs-keyword">connection</span> = mysql+pymysql://nova:NOVA_DBPASS@controller<span class="hljs-number">-48</span>/nova<br># NOVA_DBPASS 为数据库 Nova 账户密码<br>[api]<br>auth_strategy = keystone<br>[keystone_authtoken]<br>www_authenticate_uri = http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">5000</span>/<br>auth_url = http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">5000</span>/<br>memcached_servers = controller<span class="hljs-number">-48</span>:<span class="hljs-number">11211</span><br>auth_type = <span class="hljs-keyword">password</span><br>project_domain_name = <span class="hljs-keyword">Default</span><br>user_domain_name = <span class="hljs-keyword">Default</span><br>project_name = service<br>username = nova<br><span class="hljs-keyword">password</span> =NOVA_PASS<br># NOVA_PASS 为 Nova 服务的密码<br>[vnc]<br>enabled = <span class="hljs-keyword">true</span><br>server_listen = \$my_ip<br>server_proxyclient_address = \$my_ip<br>[glance]<br>api_servers = http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">9292</span><br>[oslo_concurrency]<br>lock_path = /var/run/nova<br>[placement]<br>region_name = RegionOne<br>project_domain_name = <span class="hljs-keyword">Default</span><br>project_name = service<br>auth_type = <span class="hljs-keyword">password</span><br>user_domain_name = <span class="hljs-keyword">Default</span><br>auth_url = http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">5000</span>/v3<br>username = placement<br><span class="hljs-keyword">password</span> = PLACEMENT_PASS<br># PLACEMENT_PASS 为 placement 服务的密码<br>EOF<br>su -s /bin/sh -c &quot;nova-manage api_db sync&quot; nova<br>su -s /bin/sh -c &quot;nova-manage cell_v2 map_cell0&quot; nova<br>su -s /bin/sh -c &quot;nova-manage cell_v2 create_cell --name=cell1 --verbose&quot; nova<br>su -s /bin/sh -c &quot;nova-manage db sync&quot; nova<br><br># 验证<br><br>su -s /bin/sh -c &quot;nova-manage cell_v2 list_cells&quot; nova<br><br>systemctl <span class="hljs-keyword">enable</span> <span class="hljs-comment">--now \</span><br>    openstack-nova-api.service \<br>    openstack-nova-scheduler.service \<br>    openstack-nova-conductor.service \<br>    openstack-nova-novncproxy.service<br>    <br>systemctl status \<br>    openstack-nova-api.service \<br>    openstack-nova-scheduler.service \<br>    openstack-nova-conductor.service \<br>    openstack-nova-novncproxy.service<br>    <br></code></pre></td></tr></table></figure><h3 id="计算节点"><a href="#计算节点" class="headerlink" title="计算节点"></a>计算节点</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">##computer-48计算节点</span><br>cat &gt;&gt;<span class="hljs-regexp">/etc/yum</span>.repos.d/CentOS-Base.repo&lt;&lt;EOF<br>[Virt]<br>name=CentOS-\<span class="hljs-variable">$releasever</span> - Base<br>baseurl=http:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/centos/</span><span class="hljs-number">7.9</span>.<span class="hljs-number">2009</span><span class="hljs-regexp">/virt/</span>x86_64<span class="hljs-regexp">/kvm-common/</span><br>gpgcheck=<span class="hljs-number">0</span><br>gpgkey=file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/rpm-gpg/</span>RPM-GPG-KEY-CentOS-<span class="hljs-number">7</span><br>EOF<br>yum install qpid-proton-c-<span class="hljs-number">0.26</span>.<span class="hljs-number">0</span>-<span class="hljs-number">2</span>.el7.x86_64 -y<br>yum install openstack-nova-compute -y<br>mv <span class="hljs-regexp">/etc/</span>nova/nova.conf&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>nova/nova.conf &lt;&lt;EOF<br>[DEFAULT]<br>enabled_apis = osapi_compute,metadata<br>transport_url = rabbit:<span class="hljs-regexp">//</span>openstack:RABBIT_PASS@controller-<span class="hljs-number">48</span><br>my_ip = <span class="hljs-number">192.168</span>.<span class="hljs-number">48.20</span><br>compute_driver=libvirt.LibvirtDriver<br>log_file = <span class="hljs-regexp">/var/</span>log<span class="hljs-regexp">/nova/</span>nova-compute.log<br><span class="hljs-comment"># 192.168.48.20替换为 计算节点管理网络 IP 地址</span><br>[api]<br>auth_strategy = keystone<br>[keystone_authtoken]<br>www_authenticate_uri = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span>/<br>auth_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span>/<br>memcached_servers = controller-<span class="hljs-number">48</span>:<span class="hljs-number">11211</span><br>auth_type = password<br>project_domain_name = Default<br>user_domain_name = Default<br>project_name = service<br>username = nova<br>password = NOVA_PASS<br><span class="hljs-comment">#NOVA_PASS为nova服务密码</span><br>[vnc]<br>enabled = true<br>server_listen = <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span><br>server_proxyclient_address = \<span class="hljs-variable">$my_ip</span><br>novncproxy_base_url = http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.10</span>:<span class="hljs-number">6080</span>/vnc_auto.html<br><span class="hljs-comment"># 将 192.168.48.10修改为控制节点管理网络 IP </span><br>[glance]<br>api_servers = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">9292</span><br>[oslo_concurrency]<br>lock_path = <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/nova/</span>tmp<br>[placement]<br>region_name = RegionOne<br>project_domain_name = Default<br>project_name = service<br>auth_type = password<br>user_domain_name = Default<br>auth_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span>/v3<br>username = placement<br>password = PLACEMENT_PASS<br><span class="hljs-comment">#PLACEMENT_PASS 为 Placement 服务密码</span><br>[neutron]<br>auth_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>auth_type = password<br>project_domain_name = default<br>user_domain_name = default<br>region_name = RegionOne<br>project_name = service<br>username = neutron<br>password = NEUTRON_PASS<br><span class="hljs-comment"># NEUTRON_PASS 为 Neutron 服务密码</span><br>EOF<br><br>egrep -c <span class="hljs-string">&#x27;(vmx|svm)&#x27;</span> <span class="hljs-regexp">/proc/</span>cpuinfo<br>---------------------------------------------------------------------------------<br><span class="hljs-comment"># 如果返回值大于 1 则说明已经开启硬件虚拟化，无需配置 qemu</span><br><span class="hljs-comment"># 如等于 0 ，则需要配置 qemu 以代替默认的 kvm</span><br>vi <span class="hljs-regexp">/etc/</span>nova/nova.conf<br>[libvirt]<br><span class="hljs-comment"># ...</span><br>virt_type = qemu<br><br><span class="hljs-comment"># 以上配置仅当 egrep -c &#x27;(vmx|svm)&#x27; /proc/cpuinfo 结果为 0 时才进行配置</span><br>---------------------------------------------------------------------------------<br>systemctl enable libvirtd.service openstack-nova-compute.service --now<br>systemctl status libvirtd.service openstack-nova-compute.service <br></code></pre></td></tr></table></figure><h3 id="控制节点验证"><a href="#控制节点验证" class="headerlink" title="控制节点验证"></a>控制节点验证</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><span class="hljs-comment"># 在控制节点执行验证</span><br>source admin-openrc.sh<br>openstack compute service list --service nova-compute<br>+----+--------------+----------+------+---------+-------+----------------------------+<br>|<span class="hljs-string"> ID </span>|<span class="hljs-string"> Binary       </span>|<span class="hljs-string"> Host     </span>|<span class="hljs-string"> Zone </span>|<span class="hljs-string"> Status  </span>|<span class="hljs-string"> State </span>|<span class="hljs-string"> Updated At                 </span>|<br>+----+--------------+----------+------+---------+-------+----------------------------+<br>|<span class="hljs-string"> 10 </span>|<span class="hljs-string"> nova-computer </span>|<span class="hljs-string"> computer-48 </span>|<span class="hljs-string"> nova </span>|<span class="hljs-string"> enabled </span>|<span class="hljs-string"> up    </span>|<span class="hljs-string"> 2023-04-02T17:17:08.000000 </span>|<br>+----+--------------+----------+------+---------+-------+----------------------------+<br><br><span class="hljs-comment"># 在控制节点执行验证</span><br>su -s /bin/sh -c <span class="hljs-string">&quot;nova-manage cell_v2 discover_hosts --verbose&quot;</span> nova<br><span class="hljs-comment">####</span><br>Found 2 cell mappings.<br>Skipping cell0 since it does not contain hosts.<br>Getting computer-48s from cell &#x27;cell1&#x27;: 89e02b18-2a3c-437a-8dd5-15deb98676a4<br>Checking host mapping for computer-48 host &#x27;computer-48r-48&#x27;: e862bd61-8f56-4d3a-a2b2-21ab7db90ede<br>Creating host mapping for computer-48 host &#x27;computer-48r-48&#x27;: e862bd61-8f56-4d3a-a2b2-21ab7db90ede<br>Found 1 unmapped computer-48s in cell: 89e02b18-2a3c-437a-8dd5-15deb98676a4<br><br><br>openstack compute service list<br>[root<span class="hljs-meta">@controller-48</span> ~]<span class="hljs-comment"># openstack compute service list</span><br>+----+----------------+---------------+----------+---------+-------+----------------------------+<br>|<span class="hljs-string"> ID </span>|<span class="hljs-string"> Binary         </span>|<span class="hljs-string"> Host          </span>|<span class="hljs-string"> Zone     </span>|<span class="hljs-string"> Status  </span>|<span class="hljs-string"> State </span>|<span class="hljs-string"> Updated At                 </span>|<br>+----+----------------+---------------+----------+---------+-------+----------------------------+<br>|<span class="hljs-string">  1 </span>|<span class="hljs-string"> nova-conductor </span>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> internal </span>|<span class="hljs-string"> enabled </span>|<span class="hljs-string"> up    </span>|<span class="hljs-string"> 2023-05-27T17:44:38.000000 </span>|<br>|<span class="hljs-string">  4 </span>|<span class="hljs-string"> nova-scheduler </span>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> internal </span>|<span class="hljs-string"> enabled </span>|<span class="hljs-string"> up    </span>|<span class="hljs-string"> 2023-05-27T17:44:40.000000 </span>|<br>|<span class="hljs-string">  5 </span>|<span class="hljs-string"> nova-compute   </span>|<span class="hljs-string"> computer-48   </span>|<span class="hljs-string"> nova     </span>|<span class="hljs-string"> enabled </span>|<span class="hljs-string"> up    </span>|<span class="hljs-string"> 2023-05-27T17:44:43.000000 </span>|<br>+----+----------------+---------------+----------+---------+-------+----------------------------+<br><br>openstack catalog list<br>+-----------+-----------+----------------------------------------------------------------------+<br>|<span class="hljs-string"> Name      </span>|<span class="hljs-string"> Type      </span>|<span class="hljs-string"> Endpoints                                                            </span>|<br>+-----------+-----------+----------------------------------------------------------------------+<br>|<span class="hljs-string"> placement </span>|<span class="hljs-string"> placement </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   internal: http://controller-48:8778                                   </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   admin: http://controller-48:8778                                      </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   public: http://controller-48:8778                                     </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">                                                                      </span>|<br>|<span class="hljs-string"> keystone  </span>|<span class="hljs-string"> identity  </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   admin: http://controller-48:5000/v3/                                  </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   internal: http://controller-48:5000/v3/                               </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   public: http://controller-48:5000/v3/                                 </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">                                                                      </span>|<br>|<span class="hljs-string"> neutron   </span>|<span class="hljs-string"> network   </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   public: http://controller-48:9696                                     </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   internal: http://controller-48:9696                                   </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   admin: http://controller-48:9696                                      </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">                                                                      </span>|<br>|<span class="hljs-string"> glance    </span>|<span class="hljs-string"> image     </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   admin: http://controller-48:9292                                      </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   internal: http://controller-48:9292                                   </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   public: http://controller-48:9292                                     </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">                                                                      </span>|<br>|<span class="hljs-string"> nova      </span>|<span class="hljs-string"> computer-48   </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   admin: http://controller-48:8774/v2.1                                 </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   internal: http://controller-48:8774/v2.1                              </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string"> RegionOne                                                            </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">   public: http://controller-48:8774/v2.1                                </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">                                                                      </span>|<br>|<span class="hljs-string">           </span>|<span class="hljs-string">           </span>|<span class="hljs-string">                                                                      </span>|<br>+-----------+-----------+----------------------------------------------------------------------+<br><br>openstack image list<br>+--------------------------------------+--------+--------+<br>|<span class="hljs-string"> ID                                   </span>|<span class="hljs-string"> Name   </span>|<span class="hljs-string"> Status </span>|<br>+--------------------------------------+--------+--------+<br>|<span class="hljs-string"> 4e022193-03c2-40c4-872f-0adb606f31e4 </span>|<span class="hljs-string"> cirros </span>|<span class="hljs-string"> active </span>|<br>+--------------------------------------+--------+--------+<br><br><br>nova-status upgrade check<br>[root<span class="hljs-meta">@controller-48</span> ~]<span class="hljs-comment"># nova-status upgrade check</span><br>+--------------------------------+<br>|<span class="hljs-string"> Upgrade Check Results          </span>|<br>+--------------------------------+<br>|<span class="hljs-string"> Check: Cells v2                </span>|<br>|<span class="hljs-string"> Result: Success                </span>|<br>|<span class="hljs-string"> Details: None                  </span>|<br>+--------------------------------+<br>|<span class="hljs-string"> Check: Placement API           </span>|<br>|<span class="hljs-string"> Result: Success                </span>|<br>|<span class="hljs-string"> Details: None                  </span>|<br>+--------------------------------+<br>|<span class="hljs-string"> Check: Ironic Flavor Migration </span>|<br>|<span class="hljs-string"> Result: Success                </span>|<br>|<span class="hljs-string"> Details: None                  </span>|<br>+--------------------------------+<br>|<span class="hljs-string"> Check: Cinder API              </span>|<br>|<span class="hljs-string"> Result: Success                </span>|<br>|<span class="hljs-string"> Details: None                  </span>|<br>+--------------------------------+<br><br><span class="hljs-comment">#在控制节点修改自动注册nova-computer-48节点</span><br>cat &gt;&gt; /etc/nova/nova.conf <span class="hljs-variable">&lt;&lt; EOF</span><br><span class="hljs-variable">[scheduler]</span><br><span class="hljs-variable">discover_hosts_in_cells_interval = 300</span><br><span class="hljs-variable">EOF</span><br><span class="hljs-variable"></span><br></code></pre></td></tr></table></figure><h2 id="Neutron（网络服务）"><a href="#Neutron（网络服务）" class="headerlink" title="Neutron（网络服务）"></a>Neutron（网络服务）</h2><h3 id="控制节点-1"><a href="#控制节点-1" class="headerlink" title="控制节点"></a>控制节点</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">##控制节点controller-48</span><br>mysql -u root -pMARIADB_PASS<br>CREATE DATABASE neutron;<br>GRANT ALL PRIVILEGES ON neutron.* TO <span class="hljs-string">&#x27;neutron&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> \<br>  IDENTIFIED BY <span class="hljs-string">&#x27;NEUTRON_DBPASS&#x27;</span>;<br>GRANT ALL PRIVILEGES ON neutron.* TO <span class="hljs-string">&#x27;neutron&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> \<br>  IDENTIFIED BY <span class="hljs-string">&#x27;NEUTRON_DBPASS&#x27;</span>;<br>flush privileges;<br><span class="hljs-keyword">exit</span><br>source admin-openrc.sh<br>openstack user create --domain default --password NEUTRON_PASS neutron<br>openstack role add --project service --user neutron admin<br>openstack service create --name neutron \<br>  --description <span class="hljs-string">&quot;OpenStack Networking&quot;</span> network<br>openstack endpoint create --region RegionOne \<br>  network public http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">9696</span><br>openstack endpoint create --region RegionOne \<br>  network internal http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">9696</span><br>openstack endpoint create --region RegionOne \<br>  network admin http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">9696</span><br><span class="hljs-comment"># 选择安装 大二层 网络</span><br>yum install openstack-neutron openstack-neutron-ml2 \<br>  openstack-neutron-linuxbridge ebtables -y<br><br>mv <span class="hljs-regexp">/etc/</span>neutron/neutron.conf&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>neutron/neutron.conf &lt;&lt;EOF<br>[database]<br>connection = mysql+pymysql:<span class="hljs-regexp">//</span>neutron:NEUTRON_DBPASS@controller-<span class="hljs-number">48</span>/neutron<br><span class="hljs-comment">#NEUTRON_DBPASS为 数据库 neutron 账户密码</span><br>[DEFAULT]<br>core_plugin = ml2<br>service_plugins = router<br>allow_overlapping_ips = true<br>transport_url = rabbit:<span class="hljs-regexp">//</span>openstack:RABBIT_PASS@controller-<span class="hljs-number">48</span><br>auth_strategy = keystone<br>notify_nova_on_port_status_changes = true<br>notify_nova_on_port_data_changes = true<br><span class="hljs-comment"># RABBIT_PASS 为 消息队列密码</span><br>[keystone_authtoken]<br>www_authenticate_uri = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>auth_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>memcached_servers = controller-<span class="hljs-number">48</span>:<span class="hljs-number">11211</span><br>auth_type = password<br>project_domain_name = default<br>user_domain_name = default<br>project_name = service<br>username = neutron<br>password = NEUTRON_PASS<br><span class="hljs-comment"># NEUTRON_PASS为 neutron 服务密码</span><br>[nova]<br>auth_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>auth_type = password<br>project_domain_name = default<br>user_domain_name = default<br>region_name = RegionOne<br>project_name = service<br>username = nova<br>password = NOVA_PASS<br><span class="hljs-comment"># [nova]  没有则添加</span><br><span class="hljs-comment"># NOVA_PASS为 Nova 服务密码</span><br>[oslo_concurrency]<br>EOF<br><br>mv <span class="hljs-regexp">/etc/</span>neutron<span class="hljs-regexp">/plugins/m</span>l2/ml2_conf.ini&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>neutron<span class="hljs-regexp">/plugins/m</span>l2/ml2_conf.ini &lt;&lt; EOF<br>[ml2]<br>type_drivers = flat,vlan,vxlan<br>tenant_network_types = vxlan<br>mechanism_drivers = linuxbridge,l2population<br>extension_drivers = port_security<br>[ml2_type_flat]<br>flat_networks = provider<br>[ml2_type_vxlan]<br>vni_ranges = <span class="hljs-number">1</span>:<span class="hljs-number">1000</span><br>[securitygroup]<br>enable_ipset = true<br>EOF<br><br>mv <span class="hljs-regexp">/etc/</span>neutron<span class="hljs-regexp">/plugins/m</span>l2/linuxbridge_agent.ini&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>neutron<span class="hljs-regexp">/plugins/m</span>l2/linuxbridge_agent.ini &lt;&lt;EOF<br>[linux_bridge]<br>physical_interface_mappings = provider:ens33<br><span class="hljs-comment"># ens33 为第一块网卡名称</span><br>[vxlan]<br>enable_vxlan = true<br>local_ip = <span class="hljs-number">192.168</span>.<span class="hljs-number">48.10</span><br>l2_population = true<br><span class="hljs-comment"># 192.168.48.10 为管理网络 控制节点的 IP  即 controller-48 IP</span><br>[securitygroup]<br>enable_security_group = true<br>firewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver<br>EOF<br><br>mv <span class="hljs-regexp">/etc/</span>neutron/l3_agent.ini&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>neutron/l3_agent.ini &lt;&lt; EOF<br>[DEFAULT]<br>interface_driver = linuxbridge<br>EOF<br><br>mv <span class="hljs-regexp">/etc/</span>neutron/dhcp_agent.ini&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>neutron/dhcp_agent.ini &lt;&lt; EOF<br>[DEFAULT]<br>interface_driver = linuxbridge<br>dhcp_driver = neutron.agent.linux.dhcp.Dnsmasq<br>enable_isolated_metadata = true<br>EOF<br><br>----------------------<br>modprobe br_netfilter<br>cat &gt;&gt;<span class="hljs-regexp">/etc/</span>rc.sysinit&lt;&lt;EOF<br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/</span>*.modules ; <span class="hljs-keyword">do</span><br>[ -x <span class="hljs-variable">$file</span> ] &amp;&amp; <span class="hljs-variable">$file</span><br>done<br>EOF<br>echo <span class="hljs-string">&quot;modprobe br_netfilter&quot;</span> &gt;<span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/</span>br_netfilter.modules<br>chmod <span class="hljs-number">755</span> <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/</span>br_netfilter.modules<br>sysctl -a | grep net.bridge.bridge-nf-call<br>----------------------<br>mv <span class="hljs-regexp">/etc/</span>neutron/metadata_agent.ini&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>neutron/metadata_agent.ini &lt;&lt; EOF<br>[DEFAULT]<br>nova_metadata_host = controller-<span class="hljs-number">48</span><br>metadata_proxy_shared_secret = METADATA_SECRET<br><span class="hljs-comment"># METADATA_SECRET 为 元数据 的密钥</span><br>EOF<br><br>-------------------<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>nova/nova.conf &lt;&lt; EOF<br><span class="hljs-comment">#追加在末尾</span><br>[neutron]<br>auth_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>auth_type = password<br>project_domain_name = default<br>user_domain_name = default<br>region_name = RegionOne<br>project_name = service<br>username = neutron<br>password = NEUTRON_PASS<br>service_metadata_proxy = true<br>metadata_proxy_shared_secret = METADATA_SECRET<br><span class="hljs-comment"># NEUTRON_PASS  为 neutron 服务的密码</span><br><span class="hljs-comment"># METADATA_SECRET 为上边设置的元数据密钥</span><br>EOF<br><br>-------------------<br>ln -s <span class="hljs-regexp">/etc/</span>neutron<span class="hljs-regexp">/plugins/m</span>l2<span class="hljs-regexp">/ml2_conf.ini /</span>etc<span class="hljs-regexp">/neutron/</span>plugin.ini<br><br>su -s <span class="hljs-regexp">/bin/</span>sh -c <span class="hljs-string">&quot;neutron-db-manage --config-file /etc/neutron/neutron.conf --config-file /etc/neutron/plugins/ml2/ml2_conf.ini upgrade head&quot;</span> neutron<br><br>sudo ip route del default<br>sudo ip route add default via <span class="hljs-number">192.168</span>.<span class="hljs-number">48.2</span> dev ens33<br><span class="hljs-comment">#192.168.48.2为ens33网关</span><br><br>systemctl enable --now neutron-server.service neutron-linuxbridge-agent.service neutron-dhcp-agent.service neutron-metadata-agent.service neutron-l3-agent.service<br><br>systemctl status neutron-server.service  neutron-linuxbridge-agent.service neutron-dhcp-agent.service   neutron-metadata-agent.service  neutron-l3-agent.service<br><br></code></pre></td></tr></table></figure><h3 id="计算节点-1"><a href="#计算节点-1" class="headerlink" title="计算节点"></a>计算节点</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs gradle">###compute计算节点<br>yum install openstack-neutron-linuxbridge ebtables ipset -y <br><br>mv <span class="hljs-regexp">/etc/</span>neutron/neutron.conf&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>neutron/neutron.conf &lt;&lt; EOF<br>[<span class="hljs-keyword">DEFAULT</span>]<br>transport_url = rabbit:<span class="hljs-comment">//openstack:RABBIT_PASS@controller-48</span><br>#RABBIT_PASS为 控制节点 消息队列 密码<br>auth_strategy = keystone<br>[keystone_authtoken]<br>www_authenticate_uri = http:<span class="hljs-comment">//controller-48:5000</span><br>auth_url = http:<span class="hljs-comment">//controller-48:5000</span><br>memcached_servers = controller-<span class="hljs-number">48</span>:<span class="hljs-number">11211</span><br>auth_type = password<br>project_domain_name = <span class="hljs-keyword">default</span><br>user_domain_name = <span class="hljs-keyword">default</span><br>project_name = service<br>username = neutron<br>password = NEUTRON_PASS<br># NEUTRON_PASS  为控制节点 neutron 服务密码<br>[oslo_concurrency]<br>lock_path = <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/neutron/</span>tmp<br>EOF<br><br>mv <span class="hljs-regexp">/etc/</span>neutron<span class="hljs-regexp">/plugins/m</span>l2/linuxbridge_agent.ini&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>neutron<span class="hljs-regexp">/plugins/m</span>l2/linuxbridge_agent.ini &lt;&lt;EOF<br>[linux_bridge]<br>physical_interface_mappings = provider:ens36<br># ens36 为 第二块网卡名字<br>[vxlan]<br>enable_vxlan = <span class="hljs-keyword">true</span><br>local_ip = <span class="hljs-number">192.168</span>.<span class="hljs-number">48.20</span><br>l2_population = <span class="hljs-keyword">true</span><br># <span class="hljs-number">192.168</span>.<span class="hljs-number">48.20</span>  为 计算节点 管理网络的 IP 地址<br>[securitygroup]<br>enable_security_group = <span class="hljs-keyword">true</span><br>firewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver<br>EOF<br>-------------------<br>modprobe br_netfilter<br>cat &gt;&gt;<span class="hljs-regexp">/etc/</span>rc.sysinit&lt;&lt;EOF<br>#!<span class="hljs-regexp">/bin/</span>bash<br><span class="hljs-keyword">for</span> <span class="hljs-keyword">file</span> in <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/</span>*.modules ; <span class="hljs-keyword">do</span><br>[ -x $<span class="hljs-keyword">file</span> ] &amp;&amp; $<span class="hljs-keyword">file</span><br>done<br>EOF<br>echo <span class="hljs-string">&quot;modprobe br_netfilter&quot;</span> &gt;<span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/</span>br_netfilter.modules<br>chmod <span class="hljs-number">755</span> <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/modules/</span>br_netfilter.modules<br>sysctl -a | <span class="hljs-keyword">grep</span> net.bridge.bridrge-nf-<span class="hljs-keyword">call</span><br>-------------------<br><br>systemctl enable neutron-linuxbridge-agent.service --now<br>systemctl restart openstack-nova-compute.service neutron-linuxbridge-agent.service<br>systemctl status neutron-linuxbridge-agent.service<br><br></code></pre></td></tr></table></figure><h3 id="控制节点验证-1"><a href="#控制节点验证-1" class="headerlink" title="控制节点验证"></a>控制节点验证</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><span class="hljs-comment"># 验证</span><br><span class="hljs-comment"># 控制节点执行</span><br>source admin-openrc.sh<br>openstack network agent list<br><span class="hljs-comment">###等几分钟</span><br>[root<span class="hljs-meta">@controller-48</span> ~]<span class="hljs-comment"># openstack network agent list</span><br>+--------------------------------------+--------------------+---------------+-------------------+-------+-------+---------------------------+<br>|<span class="hljs-string"> ID                                   </span>|<span class="hljs-string"> Agent Type         </span>|<span class="hljs-string"> Host          </span>|<span class="hljs-string"> Availability Zone </span>|<span class="hljs-string"> Alive </span>|<span class="hljs-string"> State </span>|<span class="hljs-string"> Binary                    </span>|<br>+--------------------------------------+--------------------+---------------+-------------------+-------+-------+---------------------------+<br>|<span class="hljs-string"> 201870b9-aac0-4830-9788-03da13b125c7 </span>|<span class="hljs-string"> Metadata agent     </span>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> None              </span>|<span class="hljs-string"> :-)   </span>|<span class="hljs-string"> UP    </span>|<span class="hljs-string"> neutron-metadata-agent    </span>|<br>|<span class="hljs-string"> 55ae2391-4cd6-4cd1-bf4f-4465f1b561a1 </span>|<span class="hljs-string"> L3 agent           </span>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> nova              </span>|<span class="hljs-string"> :-)   </span>|<span class="hljs-string"> UP    </span>|<span class="hljs-string"> neutron-l3-agent          </span>|<br>|<span class="hljs-string"> bae3fe77-a005-4cdf-aee6-8cfe3cf918ba </span>|<span class="hljs-string"> Linux bridge agent </span>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> None              </span>|<span class="hljs-string"> :-)   </span>|<span class="hljs-string"> UP    </span>|<span class="hljs-string"> neutron-linuxbridge-agent </span>|<br>|<span class="hljs-string"> f0bd6fbc-2889-4558-80fa-8f2a08989b74 </span>|<span class="hljs-string"> Linux bridge agent </span>|<span class="hljs-string"> computer-48   </span>|<span class="hljs-string"> None              </span>|<span class="hljs-string"> :-)   </span>|<span class="hljs-string"> UP    </span>|<span class="hljs-string"> neutron-linuxbridge-agent </span>|<br>|<span class="hljs-string"> f5546196-9950-4c5a-b709-060a1bba5944 </span>|<span class="hljs-string"> DHCP agent         </span>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> nova              </span>|<span class="hljs-string"> :-)   </span>|<span class="hljs-string"> UP    </span>|<span class="hljs-string"> neutron-dhcp-agent        </span>|<br>+--------------------------------------+--------------------+---------------+-------------------+-------+-------+---------------------------+<br><br><span class="hljs-comment"># 确保以上五个 Agent 都为 :-) 及 UP</span><br><br></code></pre></td></tr></table></figure><h2 id="Horizon-Web管理页面"><a href="#Horizon-Web管理页面" class="headerlink" title="Horizon(Web管理页面)"></a>Horizon(Web管理页面)</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs gradle">systemctl restart neutron* openstack-nova*<br>###控制节点<br>yum install openstack-dashboard -y<br>cp <span class="hljs-regexp">/etc/</span>openstack-dashboard/local_settings&#123;,.bak&#125;<br>#注释以下信息<br>sed -i <span class="hljs-string">&#x27;s/^ALLOWED_HOSTS/#&amp;/&#x27;</span> <span class="hljs-regexp">/etc/</span>openstack-dashboard/local_settings<br>sed -i <span class="hljs-string">&#x27;s/^OPENSTACK_HOST/#&amp;/&#x27;</span> <span class="hljs-regexp">/etc/</span>openstack-dashboard/local_settings<br>sed -i <span class="hljs-string">&#x27;s/^OPENSTACK_KEYSTONE_URL/#&amp;/&#x27;</span> <span class="hljs-regexp">/etc/</span>openstack-dashboard/local_settings<br>sed -i <span class="hljs-string">&#x27;s/^TIME_ZONE/#&amp;/&#x27;</span> <span class="hljs-regexp">/etc/</span>openstack-dashboard/local_settings<br><br>追加内容<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>openstack-dashboard/local_settings &lt;&lt;EOF<br>ALLOWED_HOSTS = [<span class="hljs-string">&#x27;*&#x27;</span>]<br>SESSION_ENGINE = <span class="hljs-string">&#x27;django.contrib.sessions.backends.cache&#x27;</span><br>CACHES = &#123;<br>    <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>         <span class="hljs-string">&#x27;BACKEND&#x27;</span>: <span class="hljs-string">&#x27;django.core.cache.backends.memcached.MemcachedCache&#x27;</span>,<br>         <span class="hljs-string">&#x27;LOCATION&#x27;</span>: <span class="hljs-string">&#x27;controller-48:11211&#x27;</span>,<br>    &#125;<br>&#125;<br>OPENSTACK_HOST = <span class="hljs-string">&quot;controller-48&quot;</span><br>OPENSTACK_KEYSTONE_URL = <span class="hljs-string">&quot;http://%s:5000/identity/v3&quot;</span> % OPENSTACK_HOST<br>OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT = <span class="hljs-keyword">True</span><br>OPENSTACK_API_VERSIONS = &#123;<br>    <span class="hljs-string">&quot;identity&quot;</span>: <span class="hljs-number">3</span>,<br>    <span class="hljs-string">&quot;image&quot;</span>: <span class="hljs-number">2</span>,<br>    <span class="hljs-string">&quot;volume&quot;</span>: <span class="hljs-number">3</span>,<br>&#125;<br>OPENSTACK_KEYSTONE_DEFAULT_DOMAIN = <span class="hljs-string">&quot;Default&quot;</span><br>OPENSTACK_KEYSTONE_DEFAULT_ROLE = <span class="hljs-string">&quot;user&quot;</span><br>TIME_ZONE = <span class="hljs-string">&quot;Asia/Shanghai&quot;</span><br># 有则修改没有则添加<br>EOF<br><br>cp <span class="hljs-regexp">/etc/</span>httpd<span class="hljs-regexp">/conf.d/</span>openstack-dashboard.conf&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>httpd<span class="hljs-regexp">/conf.d/</span>openstack-dashboard.conf &lt;&lt; EOF<br>WSGIApplicationGroup %&#123;GLOBAL&#125;<br>EOF<br>------------------------------------------------------------------------------------<br>#把下面所有文件里面有WEBROOT = <span class="hljs-string">&#x27;/&#x27;</span> 中的 <span class="hljs-regexp">/ 改成 /</span>dashboard<br>sed -i.bak <span class="hljs-string">&quot;s#WEBROOT\s*=.*#WEBROOT = &#x27;/dashboard&#x27;#&quot;</span> <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/openstack-dashboard/</span>openstack_dashboard/defaults.py<br>sed -i.bak <span class="hljs-string">&quot;s#WEBROOT\s*=.*#WEBROOT = &#x27;/dashboard&#x27;#&quot;</span>  <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/openstack-dashboard/</span>openstack_dashboard<span class="hljs-regexp">/test/</span>settings.py<br>sed -i.bak <span class="hljs-string">&#x27;s|WEBROOT\s*=.*|WEBROOT = &quot;/dashboard&quot;|&#x27;</span> <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/openstack-dashboard/</span><span class="hljs-keyword">static</span><span class="hljs-regexp">/dashboard/</span>js/<span class="hljs-number">1453</span>ede06e9f.js<br>#如果第三条不行，注意一下<span class="hljs-number">1453</span>ede06e9f.js是否存在，若不存在，则看下面三个文件中有WEBROOT = <span class="hljs-string">&#x27;/&#x27;</span>替换文件名即可<br>[root@controller-<span class="hljs-number">48</span> ~]# cd <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/openstack-dashboard/</span><span class="hljs-keyword">static</span><span class="hljs-regexp">/dashboard/</span>js/<br>[root@controller-<span class="hljs-number">48</span> js]# ll<br>total <span class="hljs-number">2472</span>   #以下几个文件也要改 ，我这里就一个文件有<br>-rw-r--r-- <span class="hljs-number">1</span> root root  <span class="hljs-number">606959</span> May <span class="hljs-number">17</span>  <span class="hljs-number">2021</span> <span class="hljs-number">1453</span>ede06e9f.js<br>-rw-r--r-- <span class="hljs-number">1</span> root root <span class="hljs-number">1659039</span> May <span class="hljs-number">17</span>  <span class="hljs-number">2021</span> b5e88d434bd1.js<br>-rw-r--r-- <span class="hljs-number">1</span> root root  <span class="hljs-number">254022</span> May <span class="hljs-number">17</span>  <span class="hljs-number">2021</span> eb687af7228a.js<br>------------------------------------------------------------------------------------<br>systemctl restart httpd memcached<br>systemctl status httpd memcached<br><br><br># 验证<br># 访问 http:<span class="hljs-comment">//192.168.48.10/dashboard  （控制节点ip）</span><br># 登录用户密码 可使用 admin 或 user_dog<br># 域名 使用 <span class="hljs-keyword">Default</span><br></code></pre></td></tr></table></figure><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/bf319a6ff702ffea01d5eb18616705db479b66b2-1709275202730-28.png" alt="image-20230402220424221"></p><h2 id="cinder（块存储服务）"><a href="#cinder（块存储服务）" class="headerlink" title="cinder（块存储服务）"></a>cinder（块存储服务）</h2><h3 id="控制节点-2"><a href="#控制节点-2" class="headerlink" title="控制节点"></a>控制节点</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">###控制节点</span><br>mysql -u root -pMARIADB_PASS<br>CREATE DATABASE cinder;<br>GRANT ALL PRIVILEGES ON cinder.* TO <span class="hljs-string">&#x27;cinder&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> \<br>  IDENTIFIED BY <span class="hljs-string">&#x27;CINDER_DBPASS&#x27;</span>;<br>GRANT ALL PRIVILEGES ON cinder.* TO <span class="hljs-string">&#x27;cinder&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> \<br>  IDENTIFIED BY <span class="hljs-string">&#x27;CINDER_DBPASS&#x27;</span>;<br><span class="hljs-keyword">exit</span><br><span class="hljs-comment"># CINDER_DBPASS 为 cinder 数据库账户密码</span><br>source admin-openrc.sh<br>openstack user create --domain default --password CINDER_PASS cinder<br>openstack role add --project service --user cinder admin<br>  openstack service create --name cinderv3 \<br>  --description <span class="hljs-string">&quot;OpenStack Block Storage&quot;</span> volumev3<br>openstack endpoint create --region RegionOne \<br>  volumev3 public http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">8776</span><span class="hljs-regexp">/v3/</span>%\(project_id\)s<br>openstack endpoint create --region RegionOne \<br>  volumev3 internal http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">8776</span><span class="hljs-regexp">/v3/</span>%\(project_id\)s<br>openstack endpoint create --region RegionOne \<br>  volumev3 admin http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">8776</span><span class="hljs-regexp">/v3/</span>%\(project_id\)s<br><br>yum install openstack-cinder -y<br>mv <span class="hljs-regexp">/etc/</span>cinder/cinder.conf&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>cinder/cinder.conf &lt;&lt; EOF<br>[DEFAULT]<br>transport_url = rabbit:<span class="hljs-regexp">//</span>openstack:RABBIT_PASS@controller-<span class="hljs-number">48</span><br>auth_strategy = keystone<br>my_ip = <span class="hljs-number">192.168</span>.<span class="hljs-number">48.10</span><br><span class="hljs-comment"># 控制节点管理网络 IP</span><br>[database]<br>connection = mysql+pymysql:<span class="hljs-regexp">//</span>cinder:CINDER_DBPASS@controller-<span class="hljs-number">48</span>/cinder<br><span class="hljs-comment"># CINDER_DBPASS 为数据库 Cinder 账户密码</span><br>[keystone_authtoken]<br>www_authenticate_uri = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>auth_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>memcached_servers = controller-<span class="hljs-number">48</span>:<span class="hljs-number">11211</span><br>auth_type = password<br>project_domain_name = default<br>user_domain_name = default<br>project_name = service<br>username = cinder<br>password = CINDER_PASS<br><span class="hljs-comment"># CINDER_PASS 为 Cinder 服务密码</span><br>[oslo_concurrency]<br>lock_path = <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/cinder/</span>tmp<br>EOF<br><br>su -s <span class="hljs-regexp">/bin/</span>sh -c <span class="hljs-string">&quot;cinder-manage db sync&quot;</span> cinder<br><br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>nova/nova.conf &lt;&lt; EOF<br>[cinder]<br>os_region_name = RegionOne<br>EOF<br><br>systemctl restart openstack-nova-api.service<br>systemctl status openstack-nova-api.service<br>systemctl enable --now openstack-cinder-api.service openstack-cinder-scheduler.service<br>systemctl status openstack-cinder-api.service openstack-cinder-scheduler.service<br><br></code></pre></td></tr></table></figure><h3 id="计算节点-2"><a href="#计算节点-2" class="headerlink" title="计算节点"></a>计算节点</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">###computer-48节点</span><br><br>添加一块物理磁盘<br>[root@computer-<span class="hljs-number">48</span> ~]<span class="hljs-comment"># lsblk</span><br>NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT<br>sda               <span class="hljs-number">8</span>:<span class="hljs-number">0</span>    <span class="hljs-number">0</span>  <span class="hljs-number">100</span>G  <span class="hljs-number">0</span> disk<br>├─sda1            <span class="hljs-number">8</span>:<span class="hljs-number">1</span>    <span class="hljs-number">0</span>    <span class="hljs-number">1</span>G  <span class="hljs-number">0</span> part /boot<br>└─sda2            <span class="hljs-number">8</span>:<span class="hljs-number">2</span>    <span class="hljs-number">0</span>   <span class="hljs-number">99</span>G  <span class="hljs-number">0</span> part<br>  ├─centos-root <span class="hljs-number">253</span>:<span class="hljs-number">0</span>    <span class="hljs-number">0</span>   <span class="hljs-number">50</span>G  <span class="hljs-number">0</span> lvm  /<br>  ├─centos-swap <span class="hljs-number">253</span>:<span class="hljs-number">1</span>    <span class="hljs-number">0</span>  <span class="hljs-number">3.6</span>G  <span class="hljs-number">0</span> lvm  [SWAP]<br>  └─centos-home <span class="hljs-number">253</span>:<span class="hljs-number">2</span>    <span class="hljs-number">0</span> <span class="hljs-number">45.4</span>G  <span class="hljs-number">0</span> lvm  /home<br>sdb               <span class="hljs-number">8</span>:<span class="hljs-number">16</span>   <span class="hljs-number">0</span>  <span class="hljs-number">100</span>G  <span class="hljs-number">0</span> disk<br>sr0              <span class="hljs-number">11</span>:<span class="hljs-number">0</span>    <span class="hljs-number">1</span> <span class="hljs-number">1024</span>M  <span class="hljs-number">0</span> rom<br><br>yum install lvm2 device-mapper-persistent-data -y<br>systemctl enable lvm2-lvmetad.service --now<br><span class="hljs-comment"># 如显示不存在则说明系统默认安装了 lvm  以上步骤可忽略</span><br><br><span class="hljs-comment">#创建/dev/sdb卷组</span><br>pvcreate <span class="hljs-regexp">/dev/</span>sdb<br><span class="hljs-comment"># Physical volume &quot;/dev/sdb&quot; successfully created.</span><br><br>vgcreate cinder-volumes <span class="hljs-regexp">/dev/</span>sdb<br><span class="hljs-comment"># Volume group &quot;cinder-volumes&quot; successfully created</span><br><span class="hljs-comment"># sdb 为划分给块存储使用的磁盘</span><br><span class="hljs-comment"># 如有多个磁盘，则需重复以上两个命令</span><br><br><br>cp <span class="hljs-regexp">/etc/</span>lvm/lvm.conf&#123;,.bak&#125;<br>sed -i <span class="hljs-string">&#x27;130 a\filter = [ &quot;a/sdb/&quot;,&quot;r/.*/&quot;]&#x27;</span> <span class="hljs-regexp">/etc/</span>lvm/lvm.conf<br><span class="hljs-comment">#sdb是上面添加的新的物理磁盘</span><br><span class="hljs-comment"># 如有多个磁盘，则将磁盘编号以固定格式添加到过滤设备中，例如有两个磁盘 sdb sdc ，则为 filter = [ &quot;a/sdb/&quot;, &quot;a/sdc/&quot;,&quot;r/.*/&quot;]</span><br><br><br>yum install openstack-cinder targetcli python-keystone -y<br>mv <span class="hljs-regexp">/etc/</span>cinder/cinder.conf&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>cinder/cinder.conf &lt;&lt; EOF<br>[DEFAULT]<br>transport_url = rabbit:<span class="hljs-regexp">//</span>openstack:RABBIT_PASS@controller-<span class="hljs-number">48</span><br>auth_strategy = keystone<br>my_ip = <span class="hljs-number">192.168</span>.<span class="hljs-number">48.20</span><br>enabled_backends = lvm<br>glance_api_servers = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">9292</span><br><span class="hljs-comment"># 192.168.48.20  为块存储节点 computer-48管理网络 的接口IP</span><br>[database]<br>connection = mysql+pymysql:<span class="hljs-regexp">//</span>cinder:CINDER_DBPASS@controller-<span class="hljs-number">48</span>/cinder<br><span class="hljs-comment"># CINDER_DBPASS 为数据库 Cinder 账户密码</span><br>[keystone_authtoken]<br>www_authenticate_uri = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>auth_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>memcached_servers = controller-<span class="hljs-number">48</span>:<span class="hljs-number">11211</span><br>auth_type = password<br>project_domain_name = default<br>user_domain_name = default<br>project_name = service<br>username = cinder<br>password = CINDER_PASS<br><span class="hljs-comment"># CINDER_PASS 为 cinder 数据库账户密码</span><br>[lvm]<br>volume_driver = cinder.volume.drivers.lvm.LVMVolumeDriver<br>volume_group = cinder-volumes<br>target_protocol = iscsi<br>target_helper = lioadm<br><span class="hljs-comment"># [lvm]  没有则新建</span><br>[oslo_concurrency]<br>lock_path = <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/cinder/</span>tmp<br>EOF<br><br>systemctl enable openstack-cinder-volume.service target.service --now<br>systemctl status openstack-cinder-volume.service target.service<br><br></code></pre></td></tr></table></figure><h3 id="控制节点验证-2"><a href="#控制节点验证-2" class="headerlink" title="控制节点验证"></a>控制节点验证</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><span class="hljs-comment"># 验证</span><br><span class="hljs-comment"># 控制节点执行</span><br>source admin-openrc.sh<br>openstack volume service list<br>systemctl restart httpd memcached<br>[root<span class="hljs-meta">@controller-48</span> ~]<span class="hljs-comment"># openstack volume service list</span><br>+------------------+-------------+------+---------+-------+----------------------------+<br>|<span class="hljs-string"> Binary           </span>|<span class="hljs-string"> Host        </span>|<span class="hljs-string"> Zone </span>|<span class="hljs-string"> Status  </span>|<span class="hljs-string"> State </span>|<span class="hljs-string"> Updated At                 </span>|<br>+------------------+-------------+------+---------+-------+----------------------------+<br>|<span class="hljs-string"> cinder-scheduler </span>|<span class="hljs-string"> controller-48  </span>|<span class="hljs-string"> nova </span>|<span class="hljs-string"> enabled </span>|<span class="hljs-string"> up    </span>|<span class="hljs-string"> 2023-05-24T08:24:18.000000 </span>|<br>|<span class="hljs-string"> cinder-volume    </span>|<span class="hljs-string"> computer-48@lvm </span>|<span class="hljs-string"> nova </span>|<span class="hljs-string"> enabled </span>|<span class="hljs-string"> up    </span>|<span class="hljs-string"> 2023-05-24T08:24:17.000000 </span>|<br>+------------------+-------------+------+---------+-------+----------------------------+<br><br></code></pre></td></tr></table></figure><h2 id="Swift（对象存储）"><a href="#Swift（对象存储）" class="headerlink" title="Swift（对象存储）"></a>Swift（对象存储）</h2><h3 id="控制节点-3"><a href="#控制节点-3" class="headerlink" title="控制节点"></a>控制节点</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-comment">###控制节点</span><br>source admin-openrc.sh<br>openstack user create --domain default --password SWIFT_PASS swift<br>openstack role add --project service --user swift admin<br><span class="hljs-comment">#创建swift服务实体：</span><br>openstack service create --name swift \<br>  --description <span class="hljs-string">&quot;OpenStack Object Storage&quot;</span> object-store<br><span class="hljs-comment">#创建swift服务实体：</span><br>openstack endpoint create --region RegionOne \<br>object-store public http://controller-48:8080/v1/AUTH_%\(project_id\)s<br><br>openstack endpoint create --region RegionOne \<br>object-store internal http://controller-48:8080/v1/AUTH_%\(project_id\)s<br><br>openstack endpoint create --region RegionOne \<br>object-store admin http://controller-48:8080/v1<br><br><span class="hljs-comment">#安装swift组件</span><br>yum install -y openstack-swift-proxy python-swiftclient \<br>  python-keystoneclient python-keystonemiddleware \<br>  Memcached<br><br>mv /etc/swift/proxy-server.conf&#123;,.bak&#125;<br>cat&gt; /etc/swift/proxy-server.conf&lt;&lt;EOF<br>[DEFAULT]<br>bind_ip = 0.0.0.0<br>bind_port = 8080<br>user = swift<br><span class="hljs-section">[pipeline:main]</span><br>pipeline = catch_errors gatekeeper healthcheck proxy-logging cache container_sync bulk ratelimit authtoken keystoneauth container-quotas account-quotas slo dlo versioned_writes proxy-logging proxy-server<br><span class="hljs-section">[app:proxy-server]</span><br>use = egg:swift<span class="hljs-comment">#proxy</span><br>allow_account_management = true<br>account_autocreate = true<br><span class="hljs-comment">#Keystone auth info</span><br><span class="hljs-section">[filter:authtoken]</span><br>paste.filter_factory = keystonemiddleware.auth_token:filter_factory<br>www_authenticate_uri = http://controller-48:5000<br>auth_url = http://controller-48:5000/v3<br>memcached_servers = controller-48:11211<br>auth_type = password<br>project_domain_name = default<br>user_domain_name = default<br>project_name = service<br>username = swift<br>password = SWIFT_PASS<br>delay_auth_decision = true<br>service_token_roles_required = True<br><span class="hljs-section">[filter:keystoneauth]</span><br>use = egg:swift<span class="hljs-comment">#keystoneauth</span><br>operator_roles = admin,user<br><span class="hljs-section">[filter:healthcheck]</span><br>use = egg:swift<span class="hljs-comment">#healthcheck</span><br><span class="hljs-section">[filter:cache]</span><br>use = egg:swift<span class="hljs-comment">#memcache</span><br>memcache_servers = controller-48:11211<br><span class="hljs-section">[filter:ratelimit]</span><br>use = egg:swift<span class="hljs-comment">#ratelimit</span><br><span class="hljs-section">[filter:domain_remap]</span><br>use = egg:swift<span class="hljs-comment">#domain_remap</span><br><span class="hljs-section">[filter:catch_errors]</span><br>use = egg:swift<span class="hljs-comment">#catch_errors</span><br><span class="hljs-section">[filter:cname_lookup]</span><br>use = egg:swift<span class="hljs-comment">#cname_lookup</span><br><span class="hljs-section">[filter:staticweb]</span><br>use = egg:swift<span class="hljs-comment">#staticweb</span><br><span class="hljs-section">[filter:tempurl]</span><br>use = egg:swift<span class="hljs-comment">#tempurl</span><br><span class="hljs-section">[filter:formpost]</span><br>use = egg:swift<span class="hljs-comment">#formpost</span><br><span class="hljs-section">[filter:name_check]</span><br>use = egg:swift<span class="hljs-comment">#name_check</span><br><span class="hljs-section">[filter:list-endpoints]</span><br>use = egg:swift<span class="hljs-comment">#list_endpoints</span><br><span class="hljs-section">[filter:proxy-logging]</span><br>use = egg:swift<span class="hljs-comment">#proxy_logging</span><br><span class="hljs-section">[filter:bulk]</span><br>use = egg:swift<span class="hljs-comment">#bulk</span><br><span class="hljs-section">[filter:slo]</span><br>use = egg:swift<span class="hljs-comment">#slo</span><br><span class="hljs-section">[filter:dlo]</span><br>use = egg:swift<span class="hljs-comment">#dlo</span><br><span class="hljs-section">[filter:container-quotas]</span><br>use = egg:swift<span class="hljs-comment">#container_quotas</span><br><span class="hljs-section">[filter:account-quotas]</span><br>use = egg:swift<span class="hljs-comment">#account_quotas</span><br><span class="hljs-section">[filter:gatekeeper]</span><br>use = egg:swift<span class="hljs-comment">#gatekeeper</span><br><span class="hljs-section">[filter:container_sync]</span><br>use = egg:swift<span class="hljs-comment">#container_sync</span><br><span class="hljs-section">[filter:xprofile]</span><br>use = egg:swift<span class="hljs-comment">#xprofile</span><br><span class="hljs-section">[filter:versioned_writes]</span><br>use = egg:swift<span class="hljs-comment">#versioned_writes</span><br>EOF<br></code></pre></td></tr></table></figure><h3 id="computer-48"><a href="#computer-48" class="headerlink" title="computer-48"></a>computer-48</h3><p>添加4张硬盘</p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/65a2b757e9272dea0844d5ed3b29915a881521da-1709275202730-29.png" alt="image-20230527155112604"></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/9f33d320e2c43241ab5a4c74f10441445310ecd2-1709275202730-30.png" alt="image-20230524083115643"></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#conpute节点</span><br>yum install xfsprogs rsync -y<br><br>lsblk<br><span class="hljs-comment">#将/dev/sdb和/dev/sdc设备格式化为XFS：</span><br>mkfs.xfs <span class="hljs-regexp">/dev/</span>sdc<br>mkfs.xfs <span class="hljs-regexp">/dev/</span>sdd<br>mkfs.xfs <span class="hljs-regexp">/dev/</span>sde<br>mkfs.xfs <span class="hljs-regexp">/dev/</span>sdf<br><span class="hljs-comment">#创建安装点目录结构：</span><br>mkdir -p <span class="hljs-regexp">/srv/</span>node/sdc<br>mkdir -p <span class="hljs-regexp">/srv/</span>node/sdd<br>mkdir -p <span class="hljs-regexp">/srv/</span>node/sde<br>mkdir -p <span class="hljs-regexp">/srv/</span>node/sdf<br><br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>fstab &lt;&lt; EOF<br><span class="hljs-regexp">/dev/</span>sdc <span class="hljs-regexp">/srv/</span>node/sdc xfs noatime,nodiratime,nobarrier,logbufs=<span class="hljs-number">8</span> <span class="hljs-number">0</span> <span class="hljs-number">2</span><br><span class="hljs-regexp">/dev/</span>sdd <span class="hljs-regexp">/srv/</span>node/sdd xfs noatime,nodiratime,nobarrier,logbufs=<span class="hljs-number">8</span> <span class="hljs-number">0</span> <span class="hljs-number">2</span><br><span class="hljs-regexp">/dev/</span>sdc <span class="hljs-regexp">/srv/</span>node/sde xfs noatime,nodiratime,nobarrier,logbufs=<span class="hljs-number">8</span> <span class="hljs-number">0</span> <span class="hljs-number">2</span><br><span class="hljs-regexp">/dev/</span>sdd <span class="hljs-regexp">/srv/</span>node/sdf xfs noatime,nodiratime,nobarrier,logbufs=<span class="hljs-number">8</span> <span class="hljs-number">0</span> <span class="hljs-number">2</span><br>EOF<br><br><span class="hljs-comment">#安装设备</span><br>mount <span class="hljs-regexp">/srv/</span>node/sdc<br>mount <span class="hljs-regexp">/srv/</span>node/sdd<br>mount <span class="hljs-regexp">/srv/</span>node/sde<br>mount <span class="hljs-regexp">/srv/</span>node/sdf<br><br>cat&gt;<span class="hljs-regexp">/etc/</span>rsyncd.conf&lt;&lt;EOF<br>uid = swift<br>gid = swift<br>log file = <span class="hljs-regexp">/var/</span>log/rsyncd.log<br>pid file = <span class="hljs-regexp">/var/</span>run/rsyncd.pid<br>address = <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span><br><br>[account]<br>max connections = <span class="hljs-number">2</span><br>path = <span class="hljs-regexp">/srv/</span>node/<br>read only = False<br>lock file = <span class="hljs-regexp">/var/</span>lock/account.lock<br><br>[container]<br>max connections = <span class="hljs-number">2</span><br>path = <span class="hljs-regexp">/srv/</span>node/<br>read only = False<br>lock file = <span class="hljs-regexp">/var/</span>lock/container.lock<br><br>[object]<br>max connections = <span class="hljs-number">2</span><br>path = <span class="hljs-regexp">/srv/</span>node/<br>read only = False<br>lock file = <span class="hljs-regexp">/var/</span>lock/object.lock<br>EOF<br><br><span class="hljs-comment">#重启服务</span><br>systemctl enable rsyncd.service<br>systemctl start rsyncd.service<br><br><span class="hljs-comment">#安装swift组件</span><br>yum install -y openstack-swift-account openstack-swift-container \<br>  openstack-swift-object<br>  <br>mv <span class="hljs-regexp">/etc/</span>swift/account-server.conf&#123;,.bak&#125;<br>cat&gt; <span class="hljs-regexp">/etc/</span>swift/account-server.conf&lt;&lt;EOF<br>[DEFAULT]<br>bind_ip = <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span><br>bind_port = <span class="hljs-number">6202</span><br>user = swift<br>swift_dir = <span class="hljs-regexp">/etc/</span>swift<br>devices = <span class="hljs-regexp">/srv/</span>node<br>mount_check = true<br>[pipeline:main]<br>pipeline = healthcheck recon account-server<br>[app:account-server]<br>use = egg:swift<span class="hljs-comment">#account</span><br>[filter:healthcheck]<br>use = egg:swift<span class="hljs-comment">#healthcheck</span><br>[filter:recon]<br>use = egg:swift<span class="hljs-comment">#recon</span><br>recon_cache_path = <span class="hljs-regexp">/var/</span>cache/swift<br>[account-replicator]<br>[account-auditor]<br>[account-reaper]<br>[filter:xprofile]<br>use = egg:swift<span class="hljs-comment">#xprofile</span><br>EOF<br><br>mv <span class="hljs-regexp">/etc/</span>swift/container-server.conf&#123;,.bak&#125;<br>cat&gt; <span class="hljs-regexp">/etc/</span>swift/container-server.conf&lt;&lt;EOF<br>[DEFAULT]<br>bind_ip = <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span><br>bind_port = <span class="hljs-number">6201</span><br>user = swift<br>swift_dir = <span class="hljs-regexp">/etc/</span>swift<br>devices = <span class="hljs-regexp">/srv/</span>node<br>mount_check = true<br>[pipeline:main]<br>pipeline = healthcheck recon container-server<br>[app:container-server]<br>use = egg:swift<span class="hljs-comment">#container</span><br>[filter:healthcheck]<br>use = egg:swift<span class="hljs-comment">#healthcheck</span><br>[filter:recon]<br>use = egg:swift<span class="hljs-comment">#recon</span><br>[container-replicator]<br>[container-updater]<br>[container-auditor]<br>[container-sync]<br>[filter:xprofile]<br>use = egg:swift<span class="hljs-comment">#xprofile</span><br>[container-sharder]<br>EOF<br><br>mv <span class="hljs-regexp">/etc/</span>swift/object-server.conf&#123;,.bak&#125;<br>cat&gt; <span class="hljs-regexp">/etc/</span>swift/object-server.conf&lt;&lt;EOF<br>[DEFAULT]<br>bind_ip = <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span><br>bind_port = <span class="hljs-number">6200</span><br>user = swift<br>swift_dir = <span class="hljs-regexp">/etc/</span>swift<br>devices = <span class="hljs-regexp">/srv/</span>node<br>mount_check = true<br>[pipeline:main]<br>pipeline = healthcheck recon object-server<br>[app:object-server]<br>use = egg:swift<span class="hljs-comment">#object</span><br>recon_cache_path = <span class="hljs-regexp">/var/</span>cache/swift<br>recon_lock_path = <span class="hljs-regexp">/var/</span>lock<br>[filter:healthcheck]<br>use = egg:swift<span class="hljs-comment">#healthcheck</span><br>[filter:recon]<br>use = egg:swift<span class="hljs-comment">#recon</span><br>[object-replicator]<br>[object-reconstructor]<br>[object-updater]<br>[object-expirer]<br>[filter:xprofile]<br>use = egg:swift<span class="hljs-comment">#xprofile</span><br>[object-relinker]<br>[object-auditor]<br>log_name = object-auditor<br>log_facility = LOG_LOCAL0<br>log_level = INFO<br>log_address=<span class="hljs-regexp">/dev/</span>log   <br>EOF<br><span class="hljs-comment">#确保对安装点目录结构拥有适当的所有权：</span><br>chown -R swift:swift <span class="hljs-regexp">/srv/</span>node<br><br><span class="hljs-comment">#创建recon目录并确保对其拥有适当的所有权：</span><br> mkdir -p <span class="hljs-regexp">/var/</span>cache/swift<br> chown -R root:swift <span class="hljs-regexp">/var/</span>cache/swift<br> chmod -R <span class="hljs-number">775</span> <span class="hljs-regexp">/var/</span>cache/swift<br> <br><span class="hljs-comment"># 在防火墙中启用必要的访问(实验忽略)</span><br>firewall-cmd --permanent --add-port=<span class="hljs-number">6200</span>/tcp<br>firewall-cmd --permanent --add-port=<span class="hljs-number">6201</span>/tcp<br>firewall-cmd --permanent --add-port=<span class="hljs-number">6202</span>/tcp<br><br></code></pre></td></tr></table></figure><h3 id="创建和分发初始环-controller-48"><a href="#创建和分发初始环-controller-48" class="headerlink" title="创建和分发初始环 controller-48"></a>创建和分发初始环 controller-48</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs stylus">#控制节点<br>转到/etc/swift目录。(所以操作在此目录，执行)<br>创建用户环account.builder文件：<br>cd /etc/swift<br>##第一部分（<span class="hljs-number">6202</span>）创建用户环<br>swift-ring-builder account<span class="hljs-selector-class">.builder</span> create <span class="hljs-number">10</span> <span class="hljs-number">3</span> <span class="hljs-number">1</span><br>swift-ring-builder account<span class="hljs-selector-class">.builder</span> add \<br>   <span class="hljs-attr">--region</span> <span class="hljs-number">1</span> <span class="hljs-attr">--zone</span> <span class="hljs-number">1</span> <span class="hljs-attr">--ip</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span> <span class="hljs-attr">--port</span> <span class="hljs-number">6202</span> <span class="hljs-attr">--device</span> sdc <span class="hljs-attr">--weight</span> <span class="hljs-number">100</span><br>swift-ring-builder account<span class="hljs-selector-class">.builder</span> add \<br>   <span class="hljs-attr">--region</span> <span class="hljs-number">1</span> <span class="hljs-attr">--zone</span> <span class="hljs-number">1</span> <span class="hljs-attr">--ip</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span> <span class="hljs-attr">--port</span> <span class="hljs-number">6202</span> <span class="hljs-attr">--device</span> sdd <span class="hljs-attr">--weight</span> <span class="hljs-number">100</span><br>swift-ring-builder account<span class="hljs-selector-class">.builder</span> add \<br>   <span class="hljs-attr">--region</span> <span class="hljs-number">1</span> <span class="hljs-attr">--zone</span> <span class="hljs-number">2</span> <span class="hljs-attr">--ip</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span> <span class="hljs-attr">--port</span> <span class="hljs-number">6202</span> <span class="hljs-attr">--device</span> sde <span class="hljs-attr">--weight</span> <span class="hljs-number">100</span><br>swift-ring-builder account<span class="hljs-selector-class">.builder</span> add \<br>   <span class="hljs-attr">--region</span> <span class="hljs-number">1</span> <span class="hljs-attr">--zone</span> <span class="hljs-number">2</span> <span class="hljs-attr">--ip</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span> <span class="hljs-attr">--port</span> <span class="hljs-number">6202</span> <span class="hljs-attr">--device</span> sdf <span class="hljs-attr">--weight</span> <span class="hljs-number">100</span><br>swift-ring-builder account<span class="hljs-selector-class">.builder</span><br>##重新平衡环且验证<br>swift-ring-builder account<span class="hljs-selector-class">.builder</span> rebalance<br>swift-ring-builder account<span class="hljs-selector-class">.builder</span><br><br><br>##第二部分（<span class="hljs-number">6201</span>）创建容器环<br>swift-ring-builder container<span class="hljs-selector-class">.builder</span> create <span class="hljs-number">10</span> <span class="hljs-number">3</span> <span class="hljs-number">1</span><br>swift-ring-builder container<span class="hljs-selector-class">.builder</span> add \<br>   <span class="hljs-attr">--region</span> <span class="hljs-number">1</span> <span class="hljs-attr">--zone</span> <span class="hljs-number">1</span> <span class="hljs-attr">--ip</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span> <span class="hljs-attr">--port</span> <span class="hljs-number">6201</span> <span class="hljs-attr">--device</span> sdc <span class="hljs-attr">--weight</span> <span class="hljs-number">100</span><br>swift-ring-builder container<span class="hljs-selector-class">.builder</span> add \<br>   <span class="hljs-attr">--region</span> <span class="hljs-number">1</span> <span class="hljs-attr">--zone</span> <span class="hljs-number">1</span> <span class="hljs-attr">--ip</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span> <span class="hljs-attr">--port</span> <span class="hljs-number">6201</span> <span class="hljs-attr">--device</span> sdd <span class="hljs-attr">--weight</span> <span class="hljs-number">100</span><br>swift-ring-builder container<span class="hljs-selector-class">.builder</span> add \<br>   <span class="hljs-attr">--region</span> <span class="hljs-number">1</span> <span class="hljs-attr">--zone</span> <span class="hljs-number">2</span> <span class="hljs-attr">--ip</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span> <span class="hljs-attr">--port</span> <span class="hljs-number">6201</span> <span class="hljs-attr">--device</span> sde <span class="hljs-attr">--weight</span> <span class="hljs-number">100</span><br>swift-ring-builder container<span class="hljs-selector-class">.builder</span> add \<br>   <span class="hljs-attr">--region</span> <span class="hljs-number">1</span> <span class="hljs-attr">--zone</span> <span class="hljs-number">2</span> <span class="hljs-attr">--ip</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span> <span class="hljs-attr">--port</span> <span class="hljs-number">6201</span> <span class="hljs-attr">--device</span> sdf <span class="hljs-attr">--weight</span> <span class="hljs-number">100</span><br>swift-ring-builder container<span class="hljs-selector-class">.builder</span><br>swift-ring-builder container<span class="hljs-selector-class">.builder</span> rebalance<br><br>##第三部分（<span class="hljs-number">6200</span>）创建对象环<br>swift-ring-builder <span class="hljs-selector-tag">object</span><span class="hljs-selector-class">.builder</span> create <span class="hljs-number">10</span> <span class="hljs-number">3</span> <span class="hljs-number">1</span><br>swift-ring-builder <span class="hljs-selector-tag">object</span><span class="hljs-selector-class">.builder</span> add \<br>   <span class="hljs-attr">--region</span> <span class="hljs-number">1</span> <span class="hljs-attr">--zone</span> <span class="hljs-number">1</span> <span class="hljs-attr">--ip</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span> <span class="hljs-attr">--port</span> <span class="hljs-number">6200</span> <span class="hljs-attr">--device</span> sdc <span class="hljs-attr">--weight</span> <span class="hljs-number">100</span><br>swift-ring-builder <span class="hljs-selector-tag">object</span><span class="hljs-selector-class">.builder</span> add \<br>   <span class="hljs-attr">--region</span> <span class="hljs-number">1</span> <span class="hljs-attr">--zone</span> <span class="hljs-number">1</span> <span class="hljs-attr">--ip</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span> <span class="hljs-attr">--port</span> <span class="hljs-number">6200</span> <span class="hljs-attr">--device</span> sdd <span class="hljs-attr">--weight</span> <span class="hljs-number">100</span><br>swift-ring-builder <span class="hljs-selector-tag">object</span><span class="hljs-selector-class">.builder</span> add \<br>   <span class="hljs-attr">--region</span> <span class="hljs-number">1</span> <span class="hljs-attr">--zone</span> <span class="hljs-number">2</span> <span class="hljs-attr">--ip</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span> <span class="hljs-attr">--port</span> <span class="hljs-number">6200</span> <span class="hljs-attr">--device</span> sde <span class="hljs-attr">--weight</span> <span class="hljs-number">100</span><br>swift-ring-builder <span class="hljs-selector-tag">object</span><span class="hljs-selector-class">.builder</span> add \<br>   <span class="hljs-attr">--region</span> <span class="hljs-number">1</span> <span class="hljs-attr">--zone</span> <span class="hljs-number">2</span> <span class="hljs-attr">--ip</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span> <span class="hljs-attr">--port</span> <span class="hljs-number">6200</span> <span class="hljs-attr">--device</span> sdf <span class="hljs-attr">--weight</span> <span class="hljs-number">100</span><br>swift-ring-builder <span class="hljs-selector-tag">object</span><span class="hljs-selector-class">.builder</span><br>swift-ring-builder <span class="hljs-selector-tag">object</span><span class="hljs-selector-class">.builder</span> rebalance<br><br>将swift目录下生成三个.gz文件复制到存储节点的swift目录下<br>scp account<span class="hljs-selector-class">.ring</span><span class="hljs-selector-class">.gz</span> container<span class="hljs-selector-class">.ring</span><span class="hljs-selector-class">.gz</span> <span class="hljs-selector-tag">object</span><span class="hljs-selector-class">.ring</span><span class="hljs-selector-class">.gz</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span>:/etc/swift<br><br>##完成安装 controller-<span class="hljs-number">48</span><br>mv  /etc/swift/swift.conf&#123;,.bak&#125;<br>cat&gt; /etc/swift/swift.conf&lt;&lt;EOF<br><span class="hljs-selector-attr">[swift-hash]</span><br>swift_hash_path_suffix = swift<br>swift_hash_path_prefix = swift<br><span class="hljs-selector-attr">[storage-policy:0]</span><br>name = Policy-<span class="hljs-number">0</span><br>default = yes<br>EOF<br><br>#复制到存储节点<br>scp swift<span class="hljs-selector-class">.conf</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">148.20</span>:/etc/swift<br>swift_hash_path_suffix和swift_hash_path_prefix作为哈希算法的一部分用于确定数据在集群中的位置。<br>这些值应该保持机密，并且在部署集群之后不能更改丢失。可自定义<br>在所有节点确保对配置目录拥有适当的所有权：<br>####存储节点与控制节点同时执行（注意！！！！两个节点同时执行）<br>chown -R root:swift /etc/swift <br>在控制器节点和任何其他运行代理服务的节点上，启动对象存储代理服务及其相关性，并将它们配置为在系统启动时启动(存储节点无代理服务)<br><br>#重启服务<br>systemctl enable openstack-swift-proxy<span class="hljs-selector-class">.service</span> memcached<span class="hljs-selector-class">.service</span> <span class="hljs-attr">--now</span><br>systemctl restart openstack-swift-proxy<span class="hljs-selector-class">.service</span> memcached.service<br></code></pre></td></tr></table></figure><h3 id="计算节点-3"><a href="#计算节点-3" class="headerlink" title="计算节点"></a>计算节点</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus">在存储节点启动所有服务<br> systemctl enable openstack-swift-account<span class="hljs-selector-class">.service</span> openstack-swift-account-auditor<span class="hljs-selector-class">.service</span> \<br>  openstack-swift-account-reaper<span class="hljs-selector-class">.service</span> openstack-swift-account-replicator<span class="hljs-selector-class">.service</span><br> systemctl start openstack-swift-account<span class="hljs-selector-class">.service</span> openstack-swift-account-auditor<span class="hljs-selector-class">.service</span> \<br>  openstack-swift-account-reaper<span class="hljs-selector-class">.service</span> openstack-swift-account-replicator<span class="hljs-selector-class">.service</span><br> systemctl enable openstack-swift-container<span class="hljs-selector-class">.service</span> \<br>  openstack-swift-container-auditor<span class="hljs-selector-class">.service</span> openstack-swift-container-replicator<span class="hljs-selector-class">.service</span> \<br>  openstack-swift-container-updater<span class="hljs-selector-class">.service</span><br> systemctl start openstack-swift-container<span class="hljs-selector-class">.service</span> \<br>  openstack-swift-container-auditor<span class="hljs-selector-class">.service</span> openstack-swift-container-replicator<span class="hljs-selector-class">.service</span> \<br>  openstack-swift-container-updater<span class="hljs-selector-class">.service</span><br> systemctl enable openstack-swift-<span class="hljs-selector-tag">object</span><span class="hljs-selector-class">.service</span> openstack-swift-object-auditor<span class="hljs-selector-class">.service</span> \<br>  openstack-swift-object-replicator<span class="hljs-selector-class">.service</span> openstack-swift-object-updater<span class="hljs-selector-class">.service</span><br> systemctl start openstack-swift-<span class="hljs-selector-tag">object</span><span class="hljs-selector-class">.service</span> openstack-swift-object-auditor<span class="hljs-selector-class">.service</span> \<br>  openstack-swift-object-replicator<span class="hljs-selector-class">.service</span> openstack-swift-object-updater.service<br></code></pre></td></tr></table></figure><h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">root@controller-48</span> <span class="hljs-string">swift</span>]<span class="hljs-comment"># swift stat</span><br>               <span class="hljs-attr">Account:</span> <span class="hljs-string">AUTH_07a1ce96dca54f1bb0d3b968f1343617</span><br>            <span class="hljs-attr">Containers:</span> <span class="hljs-number">0</span><br>               <span class="hljs-attr">Objects:</span> <span class="hljs-number">0</span><br>                 <span class="hljs-attr">Bytes:</span> <span class="hljs-number">0</span><br>       <span class="hljs-attr">X-Put-Timestamp:</span> <span class="hljs-number">1684919814.32783</span><br>           <span class="hljs-attr">X-Timestamp:</span> <span class="hljs-number">1684919814.32783</span><br>            <span class="hljs-attr">X-Trans-Id:</span> <span class="hljs-string">txd6f3affa0140455b935ff-00646dd605</span><br>          <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">text/plain;</span> <span class="hljs-string">charset=utf-8</span><br><span class="hljs-attr">X-Openstack-Request-Id:</span> <span class="hljs-string">txd6f3affa0140455b935ff-00646dd605</span><br>[<span class="hljs-string">root@controller-48</span> <span class="hljs-string">swift</span>]<span class="hljs-comment"># cd</span><br>[<span class="hljs-string">root@controller-48</span> <span class="hljs-string">~</span>]<span class="hljs-comment"># swift upload demo cirros-0.5.2-x86_64-disk.img --object-name image</span><br><span class="hljs-string">image</span><br><br><span class="hljs-comment">##重启nova服务</span><br><span class="hljs-string">sudo</span> <span class="hljs-string">systemctl</span> <span class="hljs-string">restart</span> <span class="hljs-string">openstack-nova*</span><br><br></code></pre></td></tr></table></figure><h2 id="Heat（编排）"><a href="#Heat（编排）" class="headerlink" title="Heat（编排）"></a>Heat（编排）</h2><h3 id="控制节点-4"><a href="#控制节点-4" class="headerlink" title="控制节点"></a>控制节点</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">#创建heat数据库和用户<br>mysql -u root -pMARIADB_PASS<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> heat;<br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> heat.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;heat&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> \<br>  IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;HEAT_DBPASS&#x27;</span>;<br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> heat.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;heat&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> \<br>  IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;HEAT_DBPASS&#x27;</span>;<br>flush <span class="hljs-keyword">privileges</span>;<br><span class="hljs-keyword">exit</span><br><br>source <span class="hljs-keyword">admin</span>-openrc.sh<br>openstack <span class="hljs-keyword">user</span> <span class="hljs-keyword">create</span> <span class="hljs-comment">--domain default --password HEAT_PASS heat</span><br>#添加 <span class="hljs-keyword">admin</span> 角色到 heat 用户上<br>openstack <span class="hljs-keyword">role</span> <span class="hljs-keyword">add</span> <span class="hljs-comment">--project service --user heat admin</span><br>##创建heat和 heat-cfn 服务实体<br>openstack service <span class="hljs-keyword">create</span> <span class="hljs-comment">--name heat \</span><br>  <span class="hljs-comment">--description &quot;Orchestration&quot; orchestration</span><br>openstack service <span class="hljs-keyword">create</span> <span class="hljs-comment">--name heat-cfn \</span><br>  <span class="hljs-comment">--description &quot;Orchestration&quot;  cloudformation  </span><br>##创建 Orchestration 服务的 API 端点<br>openstack endpoint <span class="hljs-keyword">create</span> <span class="hljs-comment">--region RegionOne \</span><br>  orchestration <span class="hljs-built_in">public</span> http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">8004</span>/v1/%\(tenant_id\)s<br>openstack endpoint <span class="hljs-keyword">create</span> <span class="hljs-comment">--region RegionOne \</span><br>  orchestration <span class="hljs-type">internal</span> http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">8004</span>/v1/%\(tenant_id\)s<br>openstack endpoint <span class="hljs-keyword">create</span> <span class="hljs-comment">--region RegionOne \</span><br>  orchestration <span class="hljs-keyword">admin</span> http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">8004</span>/v1/%\(tenant_id\)s<br><br>openstack endpoint <span class="hljs-keyword">create</span> <span class="hljs-comment">--region RegionOne \</span><br>  cloudformation <span class="hljs-built_in">public</span> http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">8000</span>/v1<br>openstack endpoint <span class="hljs-keyword">create</span> <span class="hljs-comment">--region RegionOne \</span><br>  cloudformation <span class="hljs-type">internal</span> http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">8000</span>/v1<br>openstack endpoint <span class="hljs-keyword">create</span> <span class="hljs-comment">--region RegionOne \</span><br>  cloudformation <span class="hljs-keyword">admin</span> http://controller<span class="hljs-number">-48</span>:<span class="hljs-number">8000</span>/v1<br></code></pre></td></tr></table></figure><p>为了管理栈，在认证服务中Orchestration需要更多信息</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-comment">#控制节点</span><br><span class="hljs-comment">#为栈创建 heat 包含项目和用户的域</span><br>openstack domain create --description <span class="hljs-string">&quot;Stack projects and users&quot;</span> heat<br><br><span class="hljs-comment">#在 heat 域中创建管理项目和用户的heat_domain_admin用户：</span><br>openstack <span class="hljs-keyword">user</span> <span class="hljs-title">create</span> --domain heat --<span class="hljs-attr">password=</span>HEAT_DOMAIN_USER_PASS heat_domain_admin<br><br><span class="hljs-comment">#)添加admin角色到 heat 域 中的heat_domain_admin用户，启用heat_domain_admin用户#管理栈的管理权限</span><br>openstack <span class="hljs-keyword">role</span> <span class="hljs-title">add</span> --domain heat --user-domain heat --<span class="hljs-keyword">user</span> <span class="hljs-title">heat_domain_admin</span> admin<br><br><span class="hljs-comment">#为栈创建 heat 包含项目和用户的域</span><br>openstack <span class="hljs-keyword">role</span> <span class="hljs-title">create</span> heat_stack_owner<br><br><span class="hljs-comment">#添加heat_stack_owner 角色到demo 项目和用户，启用demo 用户管理栈。</span><br>openstack <span class="hljs-keyword">role</span> <span class="hljs-title">add</span> --project demo --<span class="hljs-keyword">user</span> <span class="hljs-title">demo</span> heat_stack_owner<br><span class="hljs-comment">#必须添加 heat_stack_owner 角色到每个管理栈的用户。</span><br><br><span class="hljs-comment">#heat_stack_user 角色</span><br>openstack <span class="hljs-keyword">role</span> <span class="hljs-title">create</span> heat_stack_user<br><br></code></pre></td></tr></table></figure><p>安装并配置Heat组件相关软件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#控制节点</span><br>yum install openstack-heat-api openstack-heat-api-cfn \<br>  openstack-heat-engine -y<br><br>mv <span class="hljs-regexp">/etc/</span>heat/heat.conf&#123;,.bak&#125;<br>cat &gt;&gt; <span class="hljs-regexp">/etc/</span>heat/heat.conf &lt;&lt; EOF<br>[database]<br>connection = mysql+pymysql:<span class="hljs-regexp">//</span>heat:HEAT_DBPASS@controller-<span class="hljs-number">48</span>/heat  <br><span class="hljs-comment">#HEAT_DBPASS是HEAT数据库密码</span><br>[DEFAULT]<br>transport_url = rabbit:<span class="hljs-regexp">//</span>openstack:RABBIT_PASS@controller-<span class="hljs-number">48</span><br><span class="hljs-comment">#RABBIT_PASS为Rabbitmq服务密码 用户名是openstack</span><br>[keystone_authtoken]<br>www_authenticate_uri = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>auth_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>memcached_servers = controller-<span class="hljs-number">48</span>:<span class="hljs-number">11211</span><br>auth_type = password<br>project_domain_name = default<br>user_domain_name = default<br>project_name = service<br>username = heat<br>password = HEAT_PASS<br><span class="hljs-comment">#HEAT_PASS是heat用户密码</span><br>[trustee]<br>auth_type = password<br>auth_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>username = heat<br>password = HEAT_PASS<br><span class="hljs-comment">#HEAT_PASS是heat用户密码</span><br>user_domain_name = default<br>[clients_keystone]<br>auth_uri = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">5000</span><br>[DEFAULT]<br>heat_metadata_server_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">8000</span><br>heat_waitcondition_server_url = http:<span class="hljs-regexp">//</span>controller-<span class="hljs-number">48</span>:<span class="hljs-number">8000</span><span class="hljs-regexp">/v1/</span>waitcondition<br>[DEFAULT]<br>stack_domain_admin = heat_domain_admin<br>stack_domain_admin_password = HEAT_DOMAIN_USER_PASS<br>stack_user_domain_name = heat<br>EOF<br><br>su -s <span class="hljs-regexp">/bin/</span>sh -c <span class="hljs-string">&quot;heat-manage db_sync&quot;</span> heat<br><span class="hljs-comment">##启动 Orchestration 编排服务heat组件并将其设置为随系统启动</span><br>systemctl enable openstack-heat-api.service \<br>  openstack-heat-api-cfn.service openstack-heat-engine.service<br><br>systemctl restart openstack-heat-api.service \<br>  openstack-heat-api-cfn.service openstack-heat-engine.service<br>  <br>[root@controller-<span class="hljs-number">48</span> ~]<span class="hljs-comment"># systemctl list-unit-files |grep openstack-heat*</span><br>openstack-heat-api-cfn.service                enabled<br>openstack-heat-api.service                    enabled<br>openstack-heat-engine.service                 enabled<br><br></code></pre></td></tr></table></figure><h3 id="验证-1"><a href="#验证-1" class="headerlink" title="验证"></a>验证</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">cd<br>source admin-openrc.sh<br>openstack service list<br>openstack orchestration service list<br>该输出显示表明在控制节点上有应该四个heat-engine组件。<br><br>[root<span class="hljs-meta">@controller-48</span> ~]<span class="hljs-comment"># openstack orchestration service list</span><br>+------------+-------------+--------------------------------------+------------+--------+----------------------------+--------+<br>|<span class="hljs-string"> Hostname   </span>|<span class="hljs-string"> Binary      </span>|<span class="hljs-string"> Engine ID                            </span>|<span class="hljs-string"> Host       </span>|<span class="hljs-string"> Topic  </span>|<span class="hljs-string"> Updated At                 </span>|<span class="hljs-string"> Status </span>|<br>+------------+-------------+--------------------------------------+------------+--------+----------------------------+--------+<br>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> heat-engine </span>|<span class="hljs-string"> 230ae8e8-3c9f-4b82-b0ca-caef3d5497f1 </span>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> engine </span>|<span class="hljs-string"> 2023-05-27T14:42:52.000000 </span>|<span class="hljs-string"> up     </span>|<br>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> heat-engine </span>|<span class="hljs-string"> 626e74a4-918b-46b8-8993-d6db92eb861e </span>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> engine </span>|<span class="hljs-string"> 2023-05-27T14:42:52.000000 </span>|<span class="hljs-string"> up     </span>|<br>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> heat-engine </span>|<span class="hljs-string"> f648e766-cdb9-4e06-b190-a713baf33df8 </span>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> engine </span>|<span class="hljs-string"> 2023-05-27T14:42:52.000000 </span>|<span class="hljs-string"> up     </span>|<br>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> heat-engine </span>|<span class="hljs-string"> 2cb3dfd3-0636-432c-8d59-f22d850510d5 </span>|<span class="hljs-string"> controller-48 </span>|<span class="hljs-string"> engine </span>|<span class="hljs-string"> 2023-05-27T14:42:52.000000 </span>|<span class="hljs-string"> up     </span>|<br>+------------+-------------+--------------------------------------+------------+--------+----------------------------+--------+<br><br></code></pre></td></tr></table></figure><h2 id="创建实例"><a href="#创建实例" class="headerlink" title="创建实例"></a>创建实例</h2><h3 id="创建实例类型"><a href="#创建实例类型" class="headerlink" title="创建实例类型"></a>创建实例类型</h3><p>左侧选择管理员，点击计算，点击实例类型，右侧点击创建实例类型。</p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/55d5112b942c438d89818b728d7d3062697559838-1709275708073-159.png" alt="image-20240106230035149"></p><p>根据以上图片步骤依次填入：实例名称、VCPU数量、内存大小、根磁盘大小，确认无误后点击创建实例类型。</p><h3 id="创建镜像"><a href="#创建镜像" class="headerlink" title="创建镜像"></a>创建镜像</h3><p>测试镜像：<a href="https://download.cirros-cloud.net/0.6.2/cirros-0.6.2-x86_64-disk.img">https://download.cirros-cloud.net/0.6.2/cirros-0.6.2-x86_64-disk.img</a></p><p><font color='red'>有两种上传方式（二选一）！！！</font></p><p><font color='red'>1.Windows上传镜像方式</font></p><p>左侧选择管理员，点击计算，点击镜像，右侧点击创建镜像。</p><p>Windows下载到本地即可</p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/f2ea42f3b57b4b7a5fb9bd242f78e526697559838-1709275708073-160.png" alt="image-20240106230649633"></p><p>根据以上图片步骤依次填入：镜像名称、选择文件、镜像格式，确认无误后点击创建镜像。<br><strong>注</strong>：演示上传的 img 镜像格式需选用 QCOW2 - QEMU模拟器 才可正常加载。</p><p><font color='red'>2.Linux上传镜像方式</font></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">source admin-openrc<br>wget https://download.cirros-cloud.net/0.6.2/cirros-0.6.2-x86<span class="hljs-emphasis">_64-disk.img</span><br><span class="hljs-emphasis">#可能会下载不到，可以复制链接到浏览器下载，然后移到/root/目录下</span><br><span class="hljs-emphasis">glance image-create --name &quot;cirros&quot; \</span><br><span class="hljs-emphasis">  --file cirros-0.6.2-x86_</span>64-disk.img \<br><span class="hljs-code">  --disk-format qcow2 --container-format bare \</span><br><span class="hljs-code">  --visibility=public</span><br><br>openstack image list<br><br>[root@controller-1 ~]# openstack image list<br><span class="hljs-code">+--------------------------------------+</span>--------<span class="hljs-code">+--------+</span><br><span class="hljs-section">| ID                                   | Name   | Status |</span><br><span class="hljs-section">+--------------------------------------+--------+--------+</span><br><span class="hljs-section">| 627761da-7f8c-4780-842a-e50e62f5c464 | cirros | active |</span><br><span class="hljs-section">+--------------------------------------+--------+--------+</span><br><br></code></pre></td></tr></table></figure><h3 id="创建内部网络"><a href="#创建内部网络" class="headerlink" title="创建内部网络"></a>创建内部网络</h3><p>左侧选择管理员，点击网络，点击网络，右侧点击创建网络。</p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/cea509bcbba7395e7c5710616943c0bd697559838-1709275708073-161.png" alt="image-20240106231124036"></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/6bab28f65a2c56a624df71c4b9866347697559838-1709275708073-162.png" alt="image-20240106231151367"></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/0b1b24f8d99f5c3f49662532c68ac046697559838-1709275708073-163.png" alt="image-20240106231323081"></p><h3 id="创建外部网络"><a href="#创建外部网络" class="headerlink" title="创建外部网络"></a>创建外部网络</h3><p>左侧选择管理员，点击网络，点击网络，右侧点击创建网络。</p><p><font color='red'>如果你是按照本文档搭建的，就填provider</font></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/5fbbf082bc66e60949bdd81825facd02697559838-1709275708073-164.png" alt="image-20240106231633793"></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/070d5393f9a1b8dd7dee9d2fea10086e697559838-1709275708073-165.png" alt="image-20240106231854446"></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/d0a471b28e40019c7fc79bc8918cda04697559838-1709275708074-166.png" alt="image-20240106232011057"></p><h3 id="创建路由"><a href="#创建路由" class="headerlink" title="创建路由"></a>创建路由</h3><p>左侧选择管理员，点击网络，点击路由，右侧点击创建路由。</p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/31d170f9b1e99be47760fd014bb6809d697559838-1709275708074-167.png" alt="image-20240106232138022"></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/cb31565a3cfeb2dc853ac38cded0043e697559838-1709275708074-168.png" alt="image-20240106232201129"></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/ce7823ed963eca1a54ca8b97f14928e5697559838-1709275708074-169.png" alt="image-20240106232242376"></p><h3 id="添加安全组规则"><a href="#添加安全组规则" class="headerlink" title="添加安全组规则"></a>添加安全组规则</h3><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/757fee2ef006d00f258da6008163fe91697559838-1709275708074-170.png" alt="image-20240106232342515"></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/b99fadf3fe10a6ddba4ba221b3c2ff87697559838-1709275708074-171.png" alt="image-20240106232725982"></p><p>最后效果长这样</p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/485233affd839f8fbce7ea1c0ae2765d697559838-1709275708074-172.png" alt="image-20240106232758711"></p><h3 id="创建实例-1"><a href="#创建实例-1" class="headerlink" title="创建实例"></a>创建实例</h3><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/0105c7af8682dc647d6cf79473cd9fbc697559838-1709275708074-173.png" alt="image-20240106232939110"></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/86ffdba6219b46e5a387f8b67fa5edf7697559838-1709275708074-174.png" alt="image-20240106233038731"></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/8bf413d2923a38d956d41f905d1a4f6b697559838-1709275708074-175.png" alt="image-20240106233101509"></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/3083c4669cd60df3c5a53b7b5f661629697559838-1709275708074-176.png" alt="image-20240106233129659"></p><p>然后点击创建实例</p><p>分配浮动ip</p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/bfb7b78b90815059f8171048bcb0683b697559838-1709275708074-177.png" alt="image-20240106233251169"></p><p><img src="/../img/OpenStack-Train%E5%8F%8C%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2/f584f2ac4bb92bb8043c2c07c670dbf4697559838-1709275708075-178.png" alt="image-20240106233418787"></p><p><font color='red'>结论：创建实例成功</font></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>OpenStack</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker笔记</title>
    <link href="/2023/03/26/Docker%20node/"/>
    <url>/2023/03/26/Docker%20node/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Docker笔记"><a href="#Docker笔记" class="headerlink" title="Docker笔记"></a>Docker笔记</h1><p>结合<a href="https://blog.qianyios.top/2023/01/17/docker/">Centos 8 使用Docker实现容器 - 严千屹 (qianyios.top)</a>搭建的Docker实现本次笔记的所有内容及例子</p><p>也可以使用以下Centos7部署Docker CE 19.03实现本实验的所有例子</p><h2 id="Centos7部署Docker-CE-19-03"><a href="#Centos7部署Docker-CE-19-03" class="headerlink" title="Centos7部署Docker CE 19.03"></a>Centos7部署Docker CE 19.03</h2><p>（2023年4月8日01点00分）当前最常用的 Docker 版本是 Docker CE 19.03。这是 Docker 社区版（Community Edition）的最新版本，它包括一些更新和新功能，如多阶段构建、Dockerfile 中的 ARG 和 FROM 指令以及与 Kubernetes 的更好集成等。另外，Docker CE 19.03 支持 Windows、MacOS 和 Linux 操作系统。</p><h3 id="卸载旧版本"><a href="#卸载旧版本" class="headerlink" title="卸载旧版本"></a>卸载旧版本</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs livescript">sudo yum -y remove docker <span class="hljs-string">\</span><br>                  docker-client <span class="hljs-string">\</span><br>                  docker-client-latest <span class="hljs-string">\</span><br>                  docker-common <span class="hljs-string">\</span><br>                  docker-latest <span class="hljs-string">\</span><br>                  docker-latest-logrotate <span class="hljs-string">\</span><br>                  docker-logrotate <span class="hljs-string">\</span><br>                  docker-selinux <span class="hljs-string">\</span><br>                  docker-engine-selinux <span class="hljs-string">\</span><br>                  docker-engine<br>sudo yum remove docker-ce docker-ce-cli containerd.io docker-compose docker-machine docker-swarm<br>sudo rm /etc/yum.repos.d/docker-ce.repo<br>sudo rm -rf /<span class="hljs-keyword">var</span>/lib/docker<br></code></pre></td></tr></table></figure><h3 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo yum install -y yum-utils device-mapper-persistent-data lvm2<br>sudo yum-config-manager --add-repo https:<span class="hljs-regexp">//</span>download.docker.com<span class="hljs-regexp">/linux/</span>centos/docker-ce.repo<br>sudo yum install docker-ce docker-ce-cli containerd.io -y<br>sudo systemctl start docker<br>docker version<br>sudo curl -L <span class="hljs-string">&quot;https://github.com/docker/compose/releases/download/1.28.6/docker-compose-$(uname -s)-$(uname -m)&quot;</span> -o <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>docker-compose<br>sudo chmod +x <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>docker-compose<br>docker-compose --version<br></code></pre></td></tr></table></figure><h2 id="Docker的常用命令"><a href="#Docker的常用命令" class="headerlink" title="Docker的常用命令"></a>Docker的常用命令</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">docker <span class="hljs-keyword">version</span>   <span class="hljs-comment"># 显示docker的版本信息</span><br>docker info   <span class="hljs-comment"># 显示docker的系统信息,包括镜像和容器的数量</span><br>docker 命令 <span class="hljs-params">--help</span>    <span class="hljs-comment"># 帮助命令</span><br></code></pre></td></tr></table></figure><h2 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h2><h3 id="镜像命令-1"><a href="#镜像命令-1" class="headerlink" title="镜像命令"></a>镜像命令</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">docker images<span class="hljs-comment"># 查看所有本地的主机上的镜像</span><br>-a,--al1<span class="hljs-comment"># 列出所有镜像</span><br>-q,--quiet<span class="hljs-comment"># 只显示镜像的id</span><br><span class="hljs-comment"># 解释</span><br>REPOSITORY        <span class="hljs-keyword">TAG</span>         <span class="hljs-title">IMAGE</span> ID        CREATED          SIZE<br>镜像的仓库源      镜像的标签  镜像的id        镜像的创建时间   镜像的大小<br></code></pre></td></tr></table></figure><h3 id="搜索命令"><a href="#搜索命令" class="headerlink" title="搜索命令"></a>搜索命令</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@docker</span> ~]<span class="hljs-meta"># docker search centos</span><br>NAME    DESCRIPTION    STARS                               OFFICIAL  AUTOMATED<br>centos  DEPRECATED<span class="hljs-comment">;    The official build of CentOS.       7537      [OK]</span><br>检索Docker仓库中的Ubuntu镜像<br></code></pre></td></tr></table></figure><h3 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@docker ~]<span class="hljs-comment"># docke pull 镜像名[:tag]#下载镜像</span><br><span class="hljs-comment"># 如果不写tag，默认就是latest</span><br><br>[root@docker ~]<span class="hljs-comment"># docker pull centos</span><br>Using <span class="hljs-keyword">default</span> tag: latest<br>latest: Pulling <span class="hljs-keyword">from</span> library/centos<br>a1d0c7532777: Pull complete<br>Digest: sha256:a27fd8080b517143cbbbab9dfb7c8571c40d67d534bbdee55bd6c473f432b177<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> centos:latest<br>docker.io/library/centos:latest<br>从docker库拉去centos镜像<br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY   TAG       IMAGE ID       CREATED         SIZE<br>centos       latest    <span class="hljs-number">5</span>d0da3dc9764   <span class="hljs-number">18</span> months ago   <span class="hljs-number">231</span>MB<br><br></code></pre></td></tr></table></figure><h3 id="删除镜像"><a href="#删除镜像" class="headerlink" title="删除镜像"></a>删除镜像</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs powershell">docker rmi <span class="hljs-operator">-f</span> 镜像名/id<span class="hljs-comment"># 删除指定镜像</span><br>docker rmi <span class="hljs-operator">-f</span> 镜像名<span class="hljs-number">1</span> 镜像名<span class="hljs-number">2</span> 镜像名<span class="hljs-number">3</span> <span class="hljs-comment"># 一次删除指定多个镜像</span><br>docker rmi <span class="hljs-operator">-f</span> <span class="hljs-variable">$</span>(docker images <span class="hljs-literal">-aq</span>)<span class="hljs-comment"># 删除全部容器</span><br><br>[<span class="hljs-type">root</span>@<span class="hljs-type">docker</span> ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY   TAG       IMAGE ID       CREATED         SIZE<br>centos       latest    <span class="hljs-number">5</span>d0da3dc9764   <span class="hljs-number">18</span> months ago   <span class="hljs-number">231</span>MB<br>[<span class="hljs-type">root</span>@<span class="hljs-type">docker</span> ~]<span class="hljs-comment"># docker rmi 5d0</span><br>Untagged: centos:latest<br>。。。。。。<br>（一般情况下 删除镜像id 只需要输入前面<span class="hljs-number">3</span>个字符就行了）<br></code></pre></td></tr></table></figure><h3 id="查看镜像分层"><a href="#查看镜像分层" class="headerlink" title="查看镜像分层"></a>查看镜像分层</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@docker ~]<span class="hljs-comment"># docker image inspect 镜像id</span><br></code></pre></td></tr></table></figure><h3 id="镜像资源包"><a href="#镜像资源包" class="headerlink" title="镜像资源包"></a>镜像资源包</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl -O http:<span class="hljs-regexp">//mi</span>rrors.douxuedu.com<span class="hljs-regexp">/cloud/</span>docker.zip<br>unzip docker.zip<br>docker load &lt; 镜像名.tar<br>例如：<br>[root@localhost ~]<span class="hljs-comment"># docker load &lt; docker/centos_latest.tar</span><br></code></pre></td></tr></table></figure><h2 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h2><h3 id="新建容器并启动"><a href="#新建容器并启动" class="headerlink" title="新建容器并启动"></a>新建容器并启动</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run [可选参数] 镜像名<span class="hljs-comment"># 新建容器并启动</span><br>--name=Name<span class="hljs-comment"># 容器名字用来区分容器</span><br>-d<span class="hljs-comment"># 后台方式运行</span><br>-it<span class="hljs-comment"># 使用交互方式运行，进入容器查看内容</span><br>-p<span class="hljs-comment"># 指定容器的端口-p 8080:8080</span><br>-P<span class="hljs-comment"># 随机指定端口</span><br>进入容器<br>[root@docker ~]<span class="hljs-comment"># docker run -it --name test centos</span><br>[root@<span class="hljs-number">4018</span>f9ac2f33 /]<span class="hljs-comment"># pwd</span><br>/<br><span class="hljs-keyword">exit</span>         <span class="hljs-comment"># 退出</span><br>Ctrl+P+Q     <span class="hljs-comment"># 容器不停止退出</span><br></code></pre></td></tr></table></figure><h3 id="查看容器列表"><a href="#查看容器列表" class="headerlink" title="查看容器列表"></a>查看容器列表</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cmake">查看容器列表   （若加 -a可以查看所有容器包括为运行的）<br>[root@docker ~]<span class="hljs-comment"># docker ps [可选参数]</span><br>CONTAINER ID   IMAGE     <span class="hljs-keyword">COMMAND</span>       CREATED              STATUS              PORTS     NAMES<br><span class="hljs-number">4018</span>f9ac2f33   centos    <span class="hljs-string">&quot;/bin/bash&quot;</span>   About a minute ago   Up About a minute             <span class="hljs-keyword">test</span><br>[可选参数]<br>-a<span class="hljs-comment"># 列出当前正在运行的容器+带出历史运行过的容器</span><br>-n=?<span class="hljs-comment"># 显示最近创建的容器</span><br>-q<span class="hljs-comment"># 只显示容器的编号</span><br></code></pre></td></tr></table></figure><h3 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs powershell">（一般情况下 删除容器id 只需要输入前面<span class="hljs-number">3</span>个字符就行了）<br>docker <span class="hljs-built_in">rm</span> 容器id<span class="hljs-comment"># 删除指定的容器，不能删除正在运行的容器，如果要强制删除 rm -f</span><br>docker <span class="hljs-built_in">rm</span> <span class="hljs-operator">-f</span> <span class="hljs-variable">$</span> (docker <span class="hljs-built_in">ps</span> <span class="hljs-literal">-aq</span>)<span class="hljs-comment"># 强制删除所有的容器</span><br>docker <span class="hljs-built_in">ps</span> <span class="hljs-literal">-a</span> <span class="hljs-literal">-q</span>|xargs docker <span class="hljs-built_in">rm</span><span class="hljs-comment"># 删除所有的容器</span><br></code></pre></td></tr></table></figure><h3 id="启动和停止容器"><a href="#启动和停止容器" class="headerlink" title="启动和停止容器"></a>启动和停止容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker start 容器<span class="hljs-built_in">id</span><span class="hljs-comment"># 启动容器</span><br>docker restart 容器<span class="hljs-built_in">id</span><span class="hljs-comment"># 重启容器</span><br>docker stop 容器<span class="hljs-built_in">id</span><span class="hljs-comment"># 停止当前正在运行的容器</span><br>docker <span class="hljs-built_in">kill</span> 容器<span class="hljs-built_in">id</span><span class="hljs-comment"># 强制停止当前容器</span><br></code></pre></td></tr></table></figure><h3 id="进入正在运行的容器"><a href="#进入正在运行的容器" class="headerlink" title="进入正在运行的容器"></a>进入正在运行的容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">进入容器后开启一个新的终端，可以在里面操作<br>docker <span class="hljs-built_in">exec</span> -it 容器<span class="hljs-built_in">id</span> /bin/bash<br>进入容器正在执行的终端，不会启动新的进程<br>docker attach 容器<span class="hljs-built_in">id</span><br></code></pre></td></tr></table></figure><h3 id="拷贝容器内的文件到主机上"><a href="#拷贝容器内的文件到主机上" class="headerlink" title="拷贝容器内的文件到主机上"></a>拷贝容器内的文件到主机上</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs autoit">docker cp 容器id:容器内路径 目的主机路径<br><br>[root<span class="hljs-symbol">@docker</span> ~]<span class="hljs-meta"># docker exec -it 401 /bin/bash</span><br>[root<span class="hljs-symbol">@4018f9ac2f33</span> /]<span class="hljs-meta"># echo <span class="hljs-string">&quot;11&quot;</span> &gt; test.txt</span><br>[root<span class="hljs-symbol">@4018f9ac2f33</span> /]<span class="hljs-meta"># cat test.txt</span><br><span class="hljs-number">11</span><br>Ctrl+P+Q     <span class="hljs-meta"># 容器不停止退出</span><br>[root<span class="hljs-symbol">@docker</span> ~]<span class="hljs-meta"># docker cp 401:test.txt /root/</span><br>Preparing <span class="hljs-keyword">to</span> copy...<br>Successfully copied <span class="hljs-number">2.048</span>kB <span class="hljs-keyword">to</span> /root/<br>[root<span class="hljs-symbol">@docker</span> ~]<span class="hljs-meta"># cat test.txt</span><br><span class="hljs-number">11</span><br><br></code></pre></td></tr></table></figure><h3 id="停止容器，将容器打包成新镜像"><a href="#停止容器，将容器打包成新镜像" class="headerlink" title="停止容器，将容器打包成新镜像"></a>停止容器，将容器打包成新镜像</h3><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ldif">[root@docker ~]<span class="hljs-comment"># docker commit [可选参数] 容器id REPOSITORY:TAG</span><br>[可选参数]：<br><span class="hljs-literal">-</span>a :提交的镜像作者；<br><span class="hljs-literal">-</span>c :使用Dockerfile指令来创建镜像；<br><span class="hljs-literal">-</span>m :提交时的说明文字；<br><span class="hljs-literal">-</span>p :在commit时，将容器暂停。<br><br><br>[root@localhost ~]<span class="hljs-comment"># docker commit -a qianyios -m &quot;创建了test.txt&quot; 401 test/centos:v1</span><br><span class="hljs-attribute">sha256</span>:29ffb8423a78853c5a49918c99e8d513239f9c3365cca06e1fc0027f589b7f59<br>[root@localhost ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY    TAG       IMAGE ID       CREATED         SIZE<br>test/centos   v1        29ffb8423a78   3 seconds ago   233MB<br>centos        latest    5d0da3dc9764   18 months ago   231MB<br><br></code></pre></td></tr></table></figure><h2 id="Docker数据卷"><a href="#Docker数据卷" class="headerlink" title="Docker数据卷"></a>Docker数据卷</h2><ul><li>数据卷用途：使容器内部的文件跟容器外面的文件同步</li><li>数据卷的特点:<ol><li>数据卷可在容器之间共享或重用数据</li><li>卷中的更改可以直接生效</li><li>数据卷中的更改不会包含在镜像的更新中</li><li>数据卷的生命周期一直持续到没有容器使用它为止</li></ol></li></ul><h3 id="数据卷基本命令"><a href="#数据卷基本命令" class="headerlink" title="数据卷基本命令"></a>数据卷基本命令</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">docker <span class="hljs-keyword">volume</span><span class="language-bash"> <span class="hljs-built_in">ls</span><span class="hljs-comment"># 查看所有挂载的数据卷</span></span><br>docker <span class="hljs-keyword">volume</span><span class="language-bash"> inspect 卷名<span class="hljs-comment"># 查看数据卷所在的路径</span></span><br></code></pre></td></tr></table></figure><h3 id="指定路径挂载"><a href="#指定路径挂载" class="headerlink" title="指定路径挂载"></a>指定路径挂载</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker <span class="hljs-built_in">run</span> -v 主机目录:容器内目录<br></code></pre></td></tr></table></figure><h3 id="卷名挂载"><a href="#卷名挂载" class="headerlink" title="卷名挂载"></a>卷名挂载</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker <span class="hljs-built_in">run</span> -v 卷名(不是目录了):容器内 目录<br></code></pre></td></tr></table></figure><h3 id="匿名挂载"><a href="#匿名挂载" class="headerlink" title="匿名挂载"></a>匿名挂载</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker <span class="hljs-built_in">run</span> -v 容器内目录<br></code></pre></td></tr></table></figure><h3 id="数据卷权限"><a href="#数据卷权限" class="headerlink" title="数据卷权限"></a>数据卷权限</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">docker <span class="hljs-built_in">run</span> -v 主机目录:容器内目录:ro<span class="hljs-comment"># ro readonly 只读</span><br>docker <span class="hljs-built_in">run</span> -v 主机目录:容器内目录:rw<span class="hljs-comment"># rw readwrite 可读可写</span><br><span class="hljs-comment"># ro只能在主机上面来操作目录，容器无法操作</span><br></code></pre></td></tr></table></figure><h3 id="数据卷容器"><a href="#数据卷容器" class="headerlink" title="数据卷容器"></a>数据卷容器</h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">--volumes-<span class="hljs-keyword">from</span> 要同步文件的容器<span class="hljs-meta"># 实现多个容器的数据同步与共享</span><br></code></pre></td></tr></table></figure><ul><li>例子：三个MySQL同步数据</li></ul><p>1、数据库1使用的命令</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run -d -p 主机端口:<span class="hljs-number">3306</span> /<br>-v <span class="hljs-regexp">/etc/my</span>sql<span class="hljs-regexp">/conf.d -v /</span>var<span class="hljs-regexp">/1ib/my</span>sql /<br>-e MYSQL_ROOT_PASSWORD=数据库密码 --name mysql01 mysql<br></code></pre></td></tr></table></figure><p>2、数据库2使用的命令</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker <span class="hljs-built_in">run</span> -d -p 主机端口:3306 /<br>--volumes-from mysql01 /<br>-e <span class="hljs-attribute">MYSQL_ROOT_PASSWORD</span>=数据库密码 --name mysql02 mysql<br>Copy<br></code></pre></td></tr></table></figure><p>3、数据库3使用的命令</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker <span class="hljs-built_in">run</span> -d -p 主机端口:3306 /<br>--volumes-from mysql01 /<br>-e <span class="hljs-attribute">MYSQL_ROOT_PASSWORD</span>=数据库密码 --name mysql03 mysql<br></code></pre></td></tr></table></figure><h2 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h2><p>DockerFile是用来构建Docker镜像的构建文件。</p><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="!注意事项"></a><span style="color:red">!</span>注意事项</h3><ul><li>1、每个保留关键字（指令）都是必须是大写字母</li><li>2、执行从上到下顺序执行</li><li>3、#表示注释</li><li>4、每一个指令都会创建提交一个新的镜像层，并提交</li></ul><img src="../img/Docker node/2009e0e056c3fe3dbff4bae26643fd5eb7e965c6.png" alt="image-20230325152651663" style="zoom: 50%;" /><h3 id="DockerFile命令"><a href="#DockerFile命令" class="headerlink" title="DockerFile命令"></a>DockerFile命令</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span>          <span class="hljs-comment"># 基础镜镜像,—切从这里开始构建</span><br><span class="hljs-keyword">MAINTAINER</span>    <span class="hljs-comment"># 镜像的作者,姓名&lt;邮箱&gt;</span><br><span class="hljs-keyword">RUN</span><span class="language-bash">           <span class="hljs-comment"># 镜像构建的时候需要运行的命令</span></span><br><span class="hljs-keyword">ADD</span><span class="language-bash">           <span class="hljs-comment"># 添加内容，添加压缩包会自动解压</span></span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> <span class="hljs-comment"># 镜像的工作目录</span></span><br><span class="hljs-keyword">VOLUME</span><span class="language-bash">        <span class="hljs-comment"># 挂载的目录</span></span><br><span class="hljs-keyword">EXPOSE</span>        <span class="hljs-comment"># 保留端口配置</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"><span class="hljs-comment"># 指定这个容器启动的时候要运行的命令,只有最后一个会生效，可被替代</span></span><br><span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash">    <span class="hljs-comment"># 指定这个容器启动的时候要运行的命令,可以追加命令</span></span><br><span class="hljs-keyword">ONBUILD</span> <span class="hljs-comment"># 当构建一个被继承DockerFile这个时候就会运行ONBUILD 的指令。触发指令。</span><br><span class="hljs-keyword">COPY</span><span class="language-bash">          <span class="hljs-comment"># 类似ADD ，将我们文件拷贝到镜像中</span></span><br><span class="hljs-keyword">ENV</span>           <span class="hljs-comment"># 构建的时候设置环境变量!</span><br></code></pre></td></tr></table></figure><h3 id="用DockerFile文件创建镜像"><a href="#用DockerFile文件创建镜像" class="headerlink" title="用DockerFile文件创建镜像"></a>用DockerFile文件创建镜像</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">docker <span class="hljs-keyword">build </span>-f DockerFile文件名 -t 镜像名:版本号 .<br><span class="hljs-comment"># -f指定Dockfile文件，若Dockerfile文件名就是Dockerfile，则不用-f再指定。系统则自动判定此文件是Dockerfile文件。</span><br><span class="hljs-comment"># 最后一个是 . 一定加上</span><br></code></pre></td></tr></table></figure><p>例子：</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">[root@docker ~]<span class="hljs-comment"># mkdir centos</span><br>[root@docker ~]<span class="hljs-comment"># cd centos/</span><br>[root@docker centos]<span class="hljs-comment"># touch DockerFile</span><br>[root@docker centos]<span class="hljs-comment"># vi DockerFile</span><br><span class="hljs-comment">#基础镜像信息</span><br><span class="hljs-keyword">FROM</span> centos:latest<br><span class="hljs-comment">#维护者信息</span><br><span class="hljs-keyword">MAINTAINER</span> qianyios xiaoohu2002@<span class="hljs-number">163</span>.com<br><span class="hljs-comment">#镜像操作指令</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> sed -i <span class="hljs-string">&#x27;s/mirrorlist/#mirrorlist/g&#x27;</span> /etc/yum.repos.d/CentOS-*</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> sed -i <span class="hljs-string">&#x27;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#x27;</span> /etc/yum.repos.d/CentOS-*</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum install -y wget</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum clean all &amp;&amp; yum makecache</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">mkdir</span> /test </span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;test&#x27;</span> &gt; /test/test.txt</span><br><br>[root@docker centos]<span class="hljs-comment"># docker build -f /root/centos/DockerFile -t centos-test:v1 .</span><br>[root@docker centos]<span class="hljs-comment"># docker images</span><br>REPOSITORY    TAG       IMAGE ID       CREATED         SIZE<br>centos-test   v1        b1f4c91e59ee   <span class="hljs-number">2</span> minutes ago   <span class="hljs-number">328</span>MB<br><span class="hljs-comment">#此时已经有一个镜像了</span><br></code></pre></td></tr></table></figure><p>用这个镜像创建容器，且将容器中的&#x2F;test挂载到主机目录下的&#x2F;opt&#x2F;test</p><p>b1f是镜像id前三个字符</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run -it -v <span class="hljs-regexp">/opt/</span>test:<span class="hljs-regexp">/test --name test -p 80:80 b1f /</span>bin/bash<br><span class="hljs-keyword">exit</span><br>退出<span class="hljs-keyword">exit</span>之后查看<span class="hljs-regexp">/opt/</span>test是否有test.txt文件<br>[root@docker ~]<span class="hljs-comment"># cat /opt/test/test.txt</span><br>test<br>成功！！！<br></code></pre></td></tr></table></figure><h2 id="配置镜像加速器"><a href="#配置镜像加速器" class="headerlink" title="配置镜像加速器"></a>配置镜像加速器</h2><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-comment"># 设置 Docker 镜像加速器</span><br>cat &gt; /etc/docker/daemon.json &lt;&lt; EOF<br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<br>    <span class="hljs-string">&quot;http://hub-mirror.c.163.com&quot;</span>,<br>    <span class="hljs-string">&quot;https://docker.mirrors.ustc.edu.cn/&quot;</span><br>  ],<br>  <span class="hljs-string">&quot;insecure-registries&quot;</span>: [],<br>  <span class="hljs-string">&quot;debug&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;experimental&quot;</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;features&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;buildkit&quot;</span>: <span class="hljs-literal">true</span><br>  &#125;<br>&#125;<br>EOF<br><br>sudo <span class="hljs-params">system</span>ctl daemon-reload<br>sudo <span class="hljs-params">system</span>ctl restart docker<br></code></pre></td></tr></table></figure><h2 id="Docker-网络"><a href="#Docker-网络" class="headerlink" title="Docker 网络"></a>Docker 网络</h2><p>docker网络主要是解决容器联网问题，也是我们使用容器中最重要的一个环节，如果容器没有网络则无法向网络中提供服务。</p><h3 id="网络管理命令：docker-network"><a href="#网络管理命令：docker-network" class="headerlink" title="网络管理命令：docker network"></a>网络管理命令：docker network</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql">[root<span class="hljs-variable">@docker</span> <span class="hljs-operator">~</span>]# docker network <span class="hljs-comment">--help</span><br>Usage:docker network COMMAND<br>Manage networks<br>Commands:<br>  <span class="hljs-keyword">connect</span>        连接容器到网络<br>  <span class="hljs-keyword">create</span>          创建网络<br>  <span class="hljs-keyword">disconnect</span>    断开容器与网络的连接<br>  inspect         显示一个或多个网络的详细信息<br>  ls                 列表网络<br>  prune           删除所有未使用的网络<br>  rm               删除一个或多个网络<br></code></pre></td></tr></table></figure><h3 id="docker网络类型"><a href="#docker网络类型" class="headerlink" title="docker网络类型"></a>docker网络类型</h3><p>创建容器的时候可以通过—network命令来指定容器的网络，网络类型有以下四种</p><ul><li>bridge</li><li>host</li><li>none</li><li>容器网络或联盟网络</li></ul><h4 id="bridge"><a href="#bridge" class="headerlink" title="bridge"></a>bridge</h4><p>桥接网络是指容器通过桥接的方式将<strong>容器网卡</strong>桥接到<strong>宿主机的docker0网桥</strong>，然后在通过宿主机防火墙的NAT表实现与外网的联系。</p><h4 id="宿主机docker0网桥"><a href="#宿主机docker0网桥" class="headerlink" title="宿主机docker0网桥"></a>宿主机docker0网桥</h4><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs pf">[root@docker ~]<span class="hljs-comment"># ifconfig </span><br><span class="hljs-comment">#docker0网桥</span><br>docker0: <span class="hljs-keyword">flags</span>=<span class="hljs-number">4163</span><span class="hljs-variable">&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;</span>  mtu <span class="hljs-number">1500</span><br>        <span class="hljs-keyword">inet</span> <span class="hljs-number">172.17</span>.<span class="hljs-number">0.1</span>  netmask <span class="hljs-number">255.255</span>.<span class="hljs-number">0.0</span>  broadcast <span class="hljs-number">172.17</span>.<span class="hljs-number">255.255</span><br>        <span class="hljs-keyword">inet6</span> fe80::<span class="hljs-number">42</span>:c7ff:fe37:<span class="hljs-number">8</span>e8  prefixlen <span class="hljs-number">64</span>  scopeid <span class="hljs-number">0</span>x20<span class="hljs-variable">&lt;link&gt;</span><br>        ether <span class="hljs-number">02</span>:<span class="hljs-number">42</span>:c7:<span class="hljs-number">37</span>:<span class="hljs-number">08</span>:e8  txqueuelen <span class="hljs-number">0</span>  (Ethernet)<br>        RX packets <span class="hljs-number">6618</span>  bytes <span class="hljs-number">277975</span> (<span class="hljs-number">271.4</span> KiB)<br>        RX errors <span class="hljs-number">0</span>  dropped <span class="hljs-number">0</span>  overruns <span class="hljs-number">0</span>  frame <span class="hljs-number">0</span><br>        TX packets <span class="hljs-number">8152</span>  bytes <span class="hljs-number">24675021</span> (<span class="hljs-number">23.5</span> MiB)<br>        TX errors <span class="hljs-number">0</span>  dropped <span class="hljs-number">0</span> overruns <span class="hljs-number">0</span>  carrier <span class="hljs-number">0</span>  collisions <span class="hljs-number">0</span><br><br>.....省略了本机的网卡信息<br><span class="hljs-comment">#容器网卡，每创建一个桥接网络的容器就会生成一个对应的网卡</span><br>vethf75a942: <span class="hljs-keyword">flags</span>=<span class="hljs-number">4163</span><span class="hljs-variable">&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;</span>  mtu <span class="hljs-number">1500</span><br>        <span class="hljs-keyword">inet6</span> fe80::<span class="hljs-number">9085</span>:f5ff:fe34:<span class="hljs-number">77</span>b5  prefixlen <span class="hljs-number">64</span>  scopeid <span class="hljs-number">0</span>x20<span class="hljs-variable">&lt;link&gt;</span><br>        ether <span class="hljs-number">92</span>:<span class="hljs-number">85</span>:f5:<span class="hljs-number">34</span>:<span class="hljs-number">77</span>:b5  txqueuelen <span class="hljs-number">0</span>  (Ethernet)<br>        RX packets <span class="hljs-number">2850</span>  bytes <span class="hljs-number">158484</span> (<span class="hljs-number">154.7</span> KiB)<br>        RX errors <span class="hljs-number">0</span>  dropped <span class="hljs-number">0</span>  overruns <span class="hljs-number">0</span>  frame <span class="hljs-number">0</span><br>        TX packets <span class="hljs-number">3397</span>  bytes <span class="hljs-number">11613136</span> (<span class="hljs-number">11.0</span> MiB)<br>        TX errors <span class="hljs-number">0</span>  dropped <span class="hljs-number">0</span> overruns <span class="hljs-number">0</span>  carrier <span class="hljs-number">0</span>  collisions <span class="hljs-number">0</span><br>        <br>        <br>        <br>如果想看更清楚一下  可以使用  ip  add  show命令<br>[root@docker ~]<span class="hljs-comment"># ip add show</span><br><br><span class="hljs-number">4</span>: docker0: <span class="hljs-variable">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noqueue <span class="hljs-keyword">state</span> UP <span class="hljs-keyword">group</span> <span class="hljs-keyword">default</span> <br>    link/ether <span class="hljs-number">02</span>:<span class="hljs-number">42</span>:c7:<span class="hljs-number">37</span>:<span class="hljs-number">08</span>:e8 brd ff:ff:ff:ff:ff:ff<br>    <span class="hljs-keyword">inet</span> <span class="hljs-number">172.17</span>.<span class="hljs-number">0.1</span>/<span class="hljs-number">16</span> brd <span class="hljs-number">172.17</span>.<span class="hljs-number">255.255</span> scope <span class="hljs-keyword">global</span> docker0<br>       valid_lft forever preferred_lft forever<br>    <span class="hljs-keyword">inet6</span> fe80::<span class="hljs-number">42</span>:c7ff:fe37:<span class="hljs-number">8</span>e8/<span class="hljs-number">64</span> scope link <br>       valid_lft forever preferred_lft forever<br><br>容器网卡<br><span class="hljs-number">14</span>: vethf75a942@if13: <span class="hljs-variable">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noqueue master docker0 <span class="hljs-keyword">state</span> UP <span class="hljs-keyword">group</span> <span class="hljs-keyword">default</span> <br>    link/ether <span class="hljs-number">92</span>:<span class="hljs-number">85</span>:f5:<span class="hljs-number">34</span>:<span class="hljs-number">77</span>:b5 brd ff:ff:ff:ff:ff:ff link-netnsid <span class="hljs-number">1</span><br>    <span class="hljs-keyword">inet6</span> fe80::<span class="hljs-number">9085</span>:f5ff:fe34:<span class="hljs-number">77</span>b5/<span class="hljs-number">64</span> scope link <br>       valid_lft forever preferred_lft forever<br><br><br>注意：<br>这里的vethf75a942@if13指的就是容器网卡，V代表虚拟网卡的意思，eth 以太网卡，f75a942网卡编号，if13指的是宿主机网桥(docekr0)的一个端口，对应容器的网卡编号加一。<br>所以容器内的网卡编号应该是 eth0@if14<br><br>通过在容器中执行命令  ip add show 也可以看到<br>[root@docker ~]<span class="hljs-comment"># docker exec a5f ip add show</span><br><span class="hljs-number">1</span>: lo: <span class="hljs-variable">&lt;LOOPBACK,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">65536</span> qdisc noqueue <span class="hljs-keyword">state</span> UNKNOWN <span class="hljs-keyword">group</span> <span class="hljs-keyword">default</span> qlen <span class="hljs-number">1000</span><br>    link/loopback <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> brd <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>    <span class="hljs-keyword">inet</span> <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>/<span class="hljs-number">8</span> scope host lo<br>       valid_lft forever preferred_lft forever<br><span class="hljs-number">13</span>: eth0@if14: <span class="hljs-variable">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">1500</span> qdisc noqueue <span class="hljs-keyword">state</span> UP <span class="hljs-keyword">group</span> <span class="hljs-keyword">default</span> <br>    link/ether <span class="hljs-number">02</span>:<span class="hljs-number">42</span>:ac:<span class="hljs-number">11</span>:<span class="hljs-number">00</span>:<span class="hljs-number">03</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="hljs-number">0</span><br>    <span class="hljs-keyword">inet</span> <span class="hljs-number">172.17</span>.<span class="hljs-number">0.3</span>/<span class="hljs-number">16</span> brd <span class="hljs-number">172.17</span>.<span class="hljs-number">255.255</span> scope <span class="hljs-keyword">global</span> eth0<br>       valid_lft forever preferred_lft forever<br></code></pre></td></tr></table></figure><h4 id="防火墙的NAT表内容"><a href="#防火墙的NAT表内容" class="headerlink" title="防火墙的NAT表内容"></a>防火墙的NAT表内容</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vim">[root@docker ~]# iptables -t nat -L<br>Chain PREROUTING (policy ACCEPT)<br>target     prot <span class="hljs-keyword">opt</span> <span class="hljs-keyword">source</span>               destination         <br>DOCKER     <span class="hljs-keyword">all</span>  --  anywhere             anywhere             ADDRTYPE <span class="hljs-keyword">match</span> dst-<span class="hljs-built_in">type</span> LOCAL<br><br>Chain INPUT (policy ACCEPT)<br>target     prot <span class="hljs-keyword">opt</span> <span class="hljs-keyword">source</span>               destination         <br><br>Chain OUTPUT (policy ACCEPT)<br>target     prot <span class="hljs-keyword">opt</span> <span class="hljs-keyword">source</span>               destination         <br>DOCKER     <span class="hljs-keyword">all</span>  --  anywhere            !loopback/<span class="hljs-number">8</span>           ADDRTYPE <span class="hljs-keyword">match</span> dst-<span class="hljs-built_in">type</span> LOCAL<br><br>Chain POSTROUTING (policy ACCEPT)<br>target     prot <span class="hljs-keyword">opt</span> <span class="hljs-keyword">source</span>               destination         <br>MASQUERADE  <span class="hljs-keyword">all</span>  --  <span class="hljs-number">172.17</span>.<span class="hljs-number">0.0</span>/<span class="hljs-number">16</span>        anywhere            <br><br>Chain DOCKER (<span class="hljs-number">2</span> references)<br>target     prot <span class="hljs-keyword">opt</span> <span class="hljs-keyword">source</span>               destination         <br>RETURN     <span class="hljs-keyword">all</span>  --  anywhere             anywhere        <br></code></pre></td></tr></table></figure><h4 id="docker0-与容器网卡桥接"><a href="#docker0-与容器网卡桥接" class="headerlink" title="docker0 与容器网卡桥接"></a>docker0 与容器网卡桥接</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">通过<span class="hljs-keyword">brctl </span><span class="hljs-keyword">show命令可以看到容器网卡和docker0网卡的桥接信息</span><br><span class="hljs-keyword"></span>[root@docker ~]<span class="hljs-comment"># brctl show</span><br><span class="hljs-keyword">bridge </span>name<span class="hljs-keyword">bridge </span>idSTP enabledinterfaces<br>docker0<span class="hljs-number">8000</span>.<span class="hljs-number">0242</span>c73708e8novethf75a942<br></code></pre></td></tr></table></figure><p><strong>创建一个网络为bridge类型的容器，不指定默认也是这个类型</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[root@docker ~]</span># docker run -d <span class="hljs-attr">--network</span> bridge <span class="hljs-attr">--name</span> centos1 baishuming2020/centos_nginx<br></code></pre></td></tr></table></figure><h3 id="host"><a href="#host" class="headerlink" title="host"></a>host</h3><p><strong>容器和真机共用网卡及对应的端口，缺点就是同一个端口只能宿主机或者某个容器使用，其他容器不能用。</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">创建一个网络类型host的容器<br><span class="hljs-selector-attr">[root@docker ~]</span># docker run -d <span class="hljs-attr">--network</span> host <span class="hljs-attr">--name</span> centos2 baishuming2020/centos_nginx<br></code></pre></td></tr></table></figure><h3 id="none"><a href="#none" class="headerlink" title="none"></a>none</h3><p><strong>容器仅有lo网卡，是一个不能联网的本地容器</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">创建一个网络类型为lo的容器<br><span class="hljs-selector-attr">[root@docker ~]</span># docker run -d <span class="hljs-attr">--network</span> <span class="hljs-attribute">none</span> <span class="hljs-attr">--name</span> centos3 baishuming2020/centos_nginx<br></code></pre></td></tr></table></figure><h3 id="实现网桥网络"><a href="#实现网桥网络" class="headerlink" title="实现网桥网络"></a>实现网桥网络</h3><p>目的：不同的服务容器组应用不同的网桥，避免同一网络内容器太多，保持容器网络独立性。</p><p>关于新网桥联网问题：创建网桥后，宿主机会自动帮你做NAT，所以不用担心联网问题</p><h4 id="查看网络-ls"><a href="#查看网络-ls" class="headerlink" title="查看网络-ls"></a>查看网络-ls</h4><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sqf">[root@docker ~]<span class="hljs-meta"># docker network ls</span><br>NETWORK ID          <span class="hljs-built_in">NAME</span>                <span class="hljs-built_in">DRIVER</span>              SCOPE<br><span class="hljs-number">80982</span>d2613cd        bridge              bridge              <span class="hljs-built_in">local</span><br><span class="hljs-number">40</span>c179ab420a        docker1             bridge              <span class="hljs-built_in">local</span><br><span class="hljs-number">04</span>aadb7475c0        docker100           bridge              <span class="hljs-built_in">local</span><br>ce79e9d7525a        host                host                <span class="hljs-built_in">local</span><br><span class="hljs-number">8</span>f0358469e57        none                null                <span class="hljs-built_in">local</span><br><br>NETWORK ID     网桥ID   <br><span class="hljs-built_in">NAME</span>           名称<br><span class="hljs-built_in">DRIVER</span>         网络类型  <br>SCOPE      作用范围<br></code></pre></td></tr></table></figure><h4 id="创建网桥-create"><a href="#创建网桥-create" class="headerlink" title="创建网桥-create"></a>创建网桥-create</h4><figure class="highlight golo"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs golo">[root<span class="hljs-meta">@docker</span> ~]<span class="hljs-comment"># docker network create -d bridge --subnet 192.168.148.0/24 --gateway 192.168.148.2 a1</span><br><span class="hljs-number">6</span>a410e27b66ea587142d967f7dff6f36c04ced3c27116a79831412f3743aba56<br><br>[root<span class="hljs-meta">@docker</span> ~]<span class="hljs-comment"># docker network ls</span><br>NETWORK ID          NAME                DRIVER              SCOPE<br><span class="hljs-number">6</span>ee1e928b710        bridge              bridge              <span class="hljs-keyword">local</span><br>ce79e9d7525a        host                host                <span class="hljs-keyword">local</span><br><span class="hljs-number">6</span>a410e27b66e        mydocker0           bridge              <span class="hljs-keyword">local</span><br><span class="hljs-number">8</span>f0358469e57        none                <span class="hljs-literal">null</span>                <span class="hljs-keyword">local</span><br><br><br>修改docker网桥名字<br><span class="hljs-number">1</span>、修改名字<br>[root<span class="hljs-meta">@docker</span> ~]<span class="hljs-comment"># docker network rename old_name new_name</span><br><span class="hljs-number">2</span>、重启docker服务<br>[root<span class="hljs-meta">@docker</span> ~]<span class="hljs-comment"># systemctl restart docker</span><br></code></pre></td></tr></table></figure><h4 id="删除未使用的网桥-prune"><a href="#删除未使用的网桥-prune" class="headerlink" title="删除未使用的网桥-prune"></a>删除未使用的网桥-prune</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">[root@docker ~]<span class="hljs-comment"># docker network prune </span><br>WARNING! This will remove all networks <span class="hljs-keyword">not</span> used <span class="hljs-keyword">by</span> <span class="hljs-keyword">at</span> least one container.<br>Are you sure you want <span class="hljs-keyword">to</span> <span class="hljs-keyword">continue</span>? [y/N] y<br>Deleted Networks:<br>docker1<br></code></pre></td></tr></table></figure><h4 id="删除某个网桥-rm"><a href="#删除某个网桥-rm" class="headerlink" title="删除某个网桥-rm"></a>删除某个网桥-rm</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@docker</span> ~]<span class="hljs-meta"># docker network rm docker100</span><br>docker100<br><br>注意：<br>不能被活动容器占用<br></code></pre></td></tr></table></figure><h4 id="容器连接到网桥"><a href="#容器连接到网桥" class="headerlink" title="容器连接到网桥"></a>容器连接到网桥</h4><p>前提是该容器是桥接网络</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs tap">docker network connect 网卡 容器<br>[root@docker ~]<span class="hljs-comment"># docker network connect docker1 centos1</span><br>[root@docker ~]<span class="hljs-comment"># docker exec centos1 ifconfig</span><br>eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500<br>        inet 172.17.0.2  netmask 255.255.0.0  broadcast 172.17.255.255<br>        ether 02:42:ac:11:00:02  txqueuelen<span class="hljs-number"> 0 </span> (Ethernet)<br>        RX packets<span class="hljs-number"> 8 </span> bytes<span class="hljs-number"> 656 </span>(656.0 B)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br>发现centos1容器多了一块网卡，使用的正是docker1的网段<br>eth1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500<br>        inet 192.168.1.2  netmask 255.255.255.0  broadcast 192.168.1.255<br>        ether 02:42:c0:a8:01:02  txqueuelen<span class="hljs-number"> 0 </span> (Ethernet)<br>        RX packets<span class="hljs-number"> 16 </span> bytes<span class="hljs-number"> 1312 </span>(1.2 KiB)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br><br>lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536<br>        inet 127.0.0.1  netmask 255.0.0.0<br>        loop  txqueuelen<span class="hljs-number"> 1000 </span> (Local Loopback)<br>        RX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        RX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span> overruns<span class="hljs-number"> 0 </span> frame 0<br>        TX packets<span class="hljs-number"> 0 </span> bytes<span class="hljs-number"> 0 </span>(0.0 B)<br>        TX errors<span class="hljs-number"> 0 </span> dropped<span class="hljs-number"> 0 </span>overruns<span class="hljs-number"> 0 </span> carrier<span class="hljs-number"> 0 </span> collisions 0<br></code></pre></td></tr></table></figure><h4 id="容器断开网桥"><a href="#容器断开网桥" class="headerlink" title="容器断开网桥"></a>容器断开网桥</h4><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">将centos1容器的网络从docker1网桥断开<br>[root@docker ~]<span class="hljs-comment"># docker network disconnect docker1 centos1</span><br></code></pre></td></tr></table></figure><h3 id="常见故障"><a href="#常见故障" class="headerlink" title="常见故障"></a>常见故障</h3><h4 id="FAQ1：使用改名后的新网桥的容器可能无法解析域名"><a href="#FAQ1：使用改名后的新网桥的容器可能无法解析域名" class="headerlink" title="FAQ1：使用改名后的新网桥的容器可能无法解析域名"></a>FAQ1：使用改名后的新网桥的容器可能无法解析域名</h4><p>原因：没有配置新网桥的DNS</p><p>解决方法：为容器手动配置一个DNS地址即可</p><h4 id="FAQ2：Networking-will-not-work"><a href="#FAQ2：Networking-will-not-work" class="headerlink" title="FAQ2：Networking will not work"></a>FAQ2：Networking will not work</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">[root@docker ~]# docker run -d --network docker100 --name centos4 baishuming2020/centos_nginx<br><span class="hljs-symbol">WARNING: </span>IPv4 forwarding is disabled. Networking will not work.<br>67f2c276123c993cd66b9d7a99ba22402331a13f9ea8817e57324a934896b805<br><br>解决方案<br>1、打开转发<br>[root@docker ~]# echo &quot;net.ipv4.ip_forward=1&quot; &gt;&gt;  /usr/lib/sysctl.d/00-system.conf<br><br>2、重启网络<br>[root@docker ~]# systemctl restart network<br></code></pre></td></tr></table></figure><h3 id="不同主机间的容器通信"><a href="#不同主机间的容器通信" class="headerlink" title="不同主机间的容器通信"></a>不同主机间的容器通信</h3><h4 id="macvlan"><a href="#macvlan" class="headerlink" title="macvlan"></a>macvlan</h4><p>在 Docker 中，macvlan 是众多 Docker 网络模型中的一种，并且是一种跨主机的网络模型，作为一种驱动启用，Docker macvlan 只支持 bridge 模式</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#macvlan 需要一块独立的网卡来进行使用，所以我们需要新添加一块网卡</span><br><br>docker<span class="hljs-built_in"> network </span>create -d macvlan <span class="hljs-attribute">--subnet</span>=172.16.10.0/24 <span class="hljs-attribute">--gateway</span>=172.16.10.1  -o <span class="hljs-attribute">parent</span>=ens224  mtacvlan-1<br><br>-o <span class="hljs-attribute">parent</span>=网卡名称  指定用来给 macvlan 网络使用的物理网卡<br><br>注意，要在所有需要运行 macvlan 的主机上执行这条命令，但是要记得更改网关的地址，避免造成IP冲突<br><br>docker <span class="hljs-built_in">run</span> -itd --network macvlan-1 centos /bin/bash<br></code></pre></td></tr></table></figure><h4 id="overlay"><a href="#overlay" class="headerlink" title="overlay"></a>overlay</h4><p>在 Docker 中，overlay 是众多 Docker 网络模型中的一种，并且是一种跨主机的全局网络模型，有一个数据库专门的来存储网络分配信息，避免 IP 冲突，同时内部还有一个小型的 DNS 我们可以直接通过主机名进行访问</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">consul 服务端：<br>docker run -itd -h consul <span class="hljs-comment">--name consul --restart=always -p 8500:8500 progrium/consul -server -bootstrap</span><br><br>-h 主机名<br>–<span class="hljs-type">name</span> 容器名<br>–<span class="hljs-keyword">restart</span>=<span class="hljs-keyword">always</span> 重启策略<br>progrium/consul 镜像名称<br>-<span class="hljs-keyword">server</span> 以服务节点启动<br>-bootstrap预期的启动节点数：自举<br><br>在浏览器内输入 IP地址+端口号 可以看到 web 页面<br><br>在所有主机上编辑 daemon.json 文件：<br>&#123;<br>&quot;hosts&quot;: [&quot;tcp://0.0.0.0:2375&quot;,&quot;unix:///var/run/docker.sock&quot;]， 监听相关端口<br>&quot;cluster-store&quot;:&quot;consul://192.168.1.150:8500&quot;,   集群的主机地址<br>&quot;cluster-advertise&quot;:&quot;192.168.1.150:2375”宣告自己的地址 <br>&#125;<br><br>重启 docker 服务<br><br>创建 overlay 网络（全局网络）：一台主机上创建自动同步<br><br>docker network create -d overlay overlay-1<br><br>启动容器测试：<br><br>docker run -it --name docker-1 --network=overlay-1 centos /bin/bash<br><br>docker run -it --name docker-2 --network=overlay-1 centos /bin/bash<br><br>验证：ping docker-1<br></code></pre></td></tr></table></figure><h3 id="常见故障-1"><a href="#常见故障-1" class="headerlink" title="常见故障"></a>常见故障</h3><p>如发现各容器内分配的ip之间相互ping不通</p><figure class="highlight graphql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs graphql">原因：可能由于防火墙问题引起的,默认forward链是drop状态，需要打开才可以<br><br><br>解决方案<span class="hljs-punctuation">:</span><br>执行下面操作，保证<span class="hljs-keyword">INPUT</span>  FORWARD链都是ACCEPT状态<br>清除其他规则<br><span class="hljs-punctuation">[</span>root<span class="hljs-meta">@docker_node1</span> ~<span class="hljs-punctuation">]</span><span class="hljs-comment"># iptables -P INPUT ACCEPT</span><br><span class="hljs-punctuation">[</span>root<span class="hljs-meta">@docker_node1</span> ~<span class="hljs-punctuation">]</span><span class="hljs-comment"># iptables -P FORWARD ACCEPT</span><br><span class="hljs-punctuation">[</span>root<span class="hljs-meta">@docker_node1</span> ~<span class="hljs-punctuation">]</span><span class="hljs-comment"># iptables -F</span><br><span class="hljs-punctuation">[</span>root<span class="hljs-meta">@docker_node1</span> ~<span class="hljs-punctuation">]</span><span class="hljs-comment"># iptables -L -n</span><br><br><br><span class="hljs-punctuation">[</span>root<span class="hljs-meta">@docker_node2</span> ~<span class="hljs-punctuation">]</span><span class="hljs-comment"># iptables -P INPUT ACCEPT</span><br><span class="hljs-punctuation">[</span>root<span class="hljs-meta">@docker_node2</span> ~<span class="hljs-punctuation">]</span><span class="hljs-comment"># iptables -P FORWARD ACCEPT</span><br><span class="hljs-punctuation">[</span>root<span class="hljs-meta">@docker_node2</span> ~<span class="hljs-punctuation">]</span><span class="hljs-comment"># iptables -F</span><br><span class="hljs-punctuation">[</span>root<span class="hljs-meta">@docker_node2</span> ~<span class="hljs-punctuation">]</span><span class="hljs-comment"># iptables -L -n</span><br></code></pre></td></tr></table></figure><h2 id="Docker私有仓库"><a href="#Docker私有仓库" class="headerlink" title="Docker私有仓库"></a>Docker私有仓库</h2><p>在Docker中，当我们执行 docker pull xxx 的时候 ，它实际上是从 hub.docker.com 这个地址去查找，这就是 Docker 公司为我们提供的公共仓库。在工作中，我们不可能把企业项目 push 到公有仓库进行管理。所以为了更好的管理镜像，Docker 不仅提供了一个中央仓库，同时也允许我们搭建本地私有仓库。</p><p>docker容器镜像仓库分类：</p><ul><li>公网仓库：docker hub</li><li>私网仓库: registry、harbor</li></ul><h3 id="部署步骤"><a href="#部署步骤" class="headerlink" title="部署步骤"></a>部署步骤</h3><p>拉取registry镜像</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">docker pull registry</span> <br></code></pre></td></tr></table></figure><p>创建registry仓库容器</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">1</span>、创建持久化存储，将容器镜像存储目录<span class="hljs-regexp">/var/</span>lib/registry<br>挂载到本地<span class="hljs-regexp">/opt/</span>qyck下：<br><br>mkdir <span class="hljs-regexp">/opt/</span>qyck<br><br><span class="hljs-number">2</span>、创建 registry 容器：<br><br>docker run -itd -p <span class="hljs-number">5000</span>:<span class="hljs-number">5000</span> \<br>-v <span class="hljs-regexp">/opt/</span>qyck:<span class="hljs-regexp">/var/</span>lib/registry  \<br>--restart=always registry:latest<br><br><span class="hljs-number">3</span>、查看容器是否运行<br>[root@qyck ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID   IMAGE             COMMAND                  CREATED          STATUS         PORTS                                       NAMES<br>d1ea79cc023f   registry:latest   <span class="hljs-string">&quot;/entrypoint.sh /etc…&quot;</span>   <span class="hljs-number">10</span> seconds ago   Up <span class="hljs-number">9</span> seconds   <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">5000</span>-&gt;<span class="hljs-number">5000</span><span class="hljs-regexp">/tcp, :::5000-&gt;5000/</span>tcp   trusting_gates<br><br></code></pre></td></tr></table></figure><p>测试容器应用</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elixir">[root<span class="hljs-variable">@zutuanxue_manage01</span> ~]<span class="hljs-comment"># curl 192.168.48.128:5000/v2/_catalog</span><br>&#123;<span class="hljs-string">&quot;repositories&quot;</span><span class="hljs-symbol">:[]</span>&#125;<br><br>显示仓库中没有任何镜像<br></code></pre></td></tr></table></figure><h3 id="上传镜像"><a href="#上传镜像" class="headerlink" title="上传镜像"></a>上传镜像</h3><p>测试：拉取nginx镜像</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">docker pull nginx<br>[root@qyck ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY   <span class="hljs-keyword">TAG</span>       <span class="hljs-title">IMAGE</span> ID       CREATED       SIZE<br>registry     latest    <span class="hljs-number">65</span>f3b3441f04   <span class="hljs-number">9</span> days ago    <span class="hljs-number">24M</span>B<br>nginx        latest    <span class="hljs-number">448</span>a08f1d2f9   <span class="hljs-number">2</span> weeks ago   <span class="hljs-number">142M</span>B<br><br></code></pre></td></tr></table></figure><p>设置docker仓库为registry本地仓库</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs gradle">#<span class="hljs-number">1</span>、修改docker进程启动文件，修改其启动方式，目的是为了让通过docker配置文件启动<br>[root@qyck ~]# sed -i.bak <span class="hljs-string">&#x27;/^ExecStart=/c\ExecStart=\/usr\/bin\/dockerd&#x27;</span> <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system/docker.service<br><br>#<span class="hljs-number">2</span>、设置docker 守护进程的配置文件 <span class="hljs-regexp">/etc/</span>docker/daemon.json,默认没有该文件<br>[root@qyck ~]# cat <span class="hljs-regexp">/etc/</span>docker/daemon.json <br>&#123;<br> <span class="hljs-string">&quot;insecure-registries&quot;</span>: [<span class="hljs-string">&quot;http://192.168.48.128:5000&quot;</span>]<br>&#125;<br><br>insecure-registries 指定非安全的仓库地址，多个用逗号隔开<br><br>#<span class="hljs-number">3</span>、重启docker生效配置文件<br>systemctl daemon-reload<br>systemctl restart docker<br></code></pre></td></tr></table></figure><p>将镜像打tag</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-string">[root@qyck ~]</span># docker tag nginx:latest <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">48</span>.<span class="hljs-number">128</span>:<span class="hljs-number">5000</span>/nginx:v1<br><span class="hljs-string">[root@qyck ~]</span># docker images<br>REPOSITORY                  TAG       IMAGE ID       CREATED       SIZE<br><span class="hljs-number">192.168.48.128:5000</span>/nginx   v1        448a08f1d2f9   <span class="hljs-number">2</span> weeks ago   142MB<br></code></pre></td></tr></table></figure><p>推送镜像到仓库</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[root@qyck ~]# docker <span class="hljs-keyword">push</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">48.128</span>:<span class="hljs-number">5000</span>/nginx:v1<br>The <span class="hljs-keyword">push</span> refers to repository [<span class="hljs-number">192.168</span>.<span class="hljs-number">48.128</span>:<span class="hljs-number">5000</span>/nginx]<br><span class="hljs-number">1040838</span>fe30e: Pushed<br><span class="hljs-number">93</span>ee76f39c97: Pushed<br><span class="hljs-number">5684</span>be535bf1: Pushed<br><span class="hljs-number">6</span>bc8ae8fb3cf: Pushed<br>a29cc9587af6: Pushed<br><span class="hljs-number">8553</span>b91047da: Pushed<br>v1: digest: sha256:<span class="hljs-number">3</span>f01b0094e21f7d55b9eb7179d01c49fdf9c3e1e3419d315b81a9e0bae1b6a90 <span class="hljs-keyword">size</span>: <span class="hljs-number">1570</span><br><br><br>#<span class="hljs-number">2</span>、查看上传<br>[root@qyck ~]# curl http:<span class="hljs-comment">//192.168.48.128:5000/v2/_catalog</span><br>&#123;<span class="hljs-string">&quot;repositories&quot;</span>:[<span class="hljs-string">&quot;nginx&quot;</span>]&#125;<br><br>#查看存储文件夹<br>[root@qyck ~]# ls <span class="hljs-regexp">/opt/</span>qyck<span class="hljs-regexp">/docker/</span>registry<span class="hljs-regexp">/v2/</span><span class="hljs-keyword">repositories</span>/<br>nginx<br><br></code></pre></td></tr></table></figure><h3 id="拉取镜像-1"><a href="#拉取镜像-1" class="headerlink" title="拉取镜像"></a>拉取镜像</h3><p>在另外一台机拉取nginx镜像</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-meta">#1、设置docker启动文件</span><br>[root<span class="hljs-symbol">@zutuanxue_node1</span> ~]<span class="hljs-meta"># sed -i.bak <span class="hljs-string">&#x27;/^ExecStart=/c\ExecStart=\/usr\/bin\/dockerd&#x27;</span> /usr/lib/systemd/system/docker.service</span><br><br><span class="hljs-meta">#2、设置docker配置文件</span><br>[root<span class="hljs-symbol">@zutuanxue_node1</span> ~]<span class="hljs-meta"># cat  /etc/docker/daemon.json </span><br>&#123;<br> <span class="hljs-string">&quot;insecure-registries&quot;</span>: [<span class="hljs-string">&quot;http://192.168.48.128:5000&quot;</span>]<br>&#125;<br><br>systemctl daemon-reload<br>systemctl restart docker<br></code></pre></td></tr></table></figure><p>拉取镜像</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs makefile">[root@qyck ~]<span class="hljs-comment"># docker pull 192.168.48.128:5000/nginx:v1</span><br><span class="hljs-section">v1: Pulling from nginx</span><br><span class="hljs-section">9e3ea8720c6d: Pull complete</span><br><span class="hljs-section">bf36b6466679: Pull complete</span><br><span class="hljs-section">15a97cf85bb8: Pull complete</span><br><span class="hljs-section">9c2d6be5a61d: Pull complete</span><br><span class="hljs-section">6b7e4a5c7c7a: Pull complete</span><br><span class="hljs-section">8db4caa19df8: Pull complete</span><br><span class="hljs-section">Digest: sha256:3f01b0094e21f7d55b9eb7179d01c49fdf9c3e1e3419d315b81a9e0bae1b6a90</span><br><span class="hljs-section">Status: Downloaded newer image for 192.168.48.128:5000/nginx:v1</span><br><span class="hljs-section">192.168.48.128:5000/nginx:v1</span><br>[root@qyck ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY                  TAG       IMAGE ID       CREATED       SIZE<br>registry                    latest    65f3b3441f04   9 days ago    24MB<br><span class="hljs-section">192.168.48.128:5000/nginx   v1        448a08f1d2f9   2 weeks ago   142MB</span><br><br><br></code></pre></td></tr></table></figure><h2 id="Docker学习总结"><a href="#Docker学习总结" class="headerlink" title="Docker学习总结"></a>Docker学习总结</h2><p>![1](..&#x2F;img&#x2F;Docker node&#x2F;f8242ed25c3cc4a0f16a604d1d53b5f885684b49.png)</p><h2 id="docker-run-参数解析"><a href="#docker-run-参数解析" class="headerlink" title="docker run 参数解析"></a>docker run 参数解析</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs stylus">-d: 后台运行容器，并返回容器ID；<br><br>-<span class="hljs-selector-tag">i</span>: 以交互模式运行容器，通常与 -t 同时使用；<br><br>-P: 随机端口映射，容器内部端口随机映射到主机的端口<br><br>-<span class="hljs-selector-tag">p</span>: 指定端口映射，格式为：主机(宿主)端口:容器端口<br><br>-t: 为容器重新分配一个伪输入终端，通常与 -<span class="hljs-selector-tag">i</span> 同时使用；<br><br><span class="hljs-attr">--name</span>=<span class="hljs-string">&quot;nginx-lb&quot;</span>: 为容器指定一个名称；<br><br><span class="hljs-attr">--dns</span> <span class="hljs-number">8.8</span>.<span class="hljs-number">8.8</span>: 指定容器使用的DNS服务器，默认和宿主一致；<br><br><span class="hljs-attr">--dns-search</span> example<span class="hljs-selector-class">.com</span>: 指定容器DNS搜索域名，默认和宿主一致；<br><br>-h <span class="hljs-string">&quot;mars&quot;</span>: 指定容器的hostname；<br><br>-e username=<span class="hljs-string">&quot;ritchie&quot;</span>: 设置环境变量；<br><br><span class="hljs-attr">--env-file</span>=<span class="hljs-selector-attr">[]</span>: 从指定文件读入环境变量；<br><br><span class="hljs-attr">--cpuset</span>=<span class="hljs-string">&quot;0-2&quot;</span> or <span class="hljs-attr">--cpuset</span>=<span class="hljs-string">&quot;0,1,2&quot;</span>: 绑定容器到指定CPU运行；<br><br>-m :设置容器使用内存最大值；<br><br><span class="hljs-attr">--net</span>=<span class="hljs-string">&quot;bridge&quot;</span>: 指定容器的网络连接类型，支持 bridge/host/<span class="hljs-attribute">none</span>/container: 四种类型；<br><br><span class="hljs-attr">--link</span>=<span class="hljs-selector-attr">[]</span>: 添加链接到另一个容器；<br><br><span class="hljs-attr">--expose</span>=<span class="hljs-selector-attr">[]</span>: 开放一个端口或一组端口；<br><br><span class="hljs-attr">--volume</span> , -v: 绑定一个卷<br></code></pre></td></tr></table></figure><p>此笔记参考 <a href="https://blog.kbai.cc/">开摆工作室</a>&#x2F;<a href="https://blog.kbai.cc/2022/04/25/Docker%20%E5%9F%BA%E7%A1%80/#%F0%9F%9A%80Docker%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93">Docker基础</a>精心整理</p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hadoop部署</title>
    <link href="/2023/03/24/Hadoop/"/>
    <url>/2023/03/24/Hadoop/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Hadoop部署"><a href="#Hadoop部署" class="headerlink" title="Hadoop部署"></a>Hadoop部署</h1><p>本笔记分伪分布和分布式两大块，但建议从头开始观看</p><p>文章所需资源可<a href="https://pan.quark.cn/s/a2886f170a7f">点击这里</a>下载</p><h2 id="伪分布"><a href="#伪分布" class="headerlink" title="伪分布"></a>伪分布</h2><p>单节点 masteryjx48 （Centos 7.9）</p><table><thead><tr><th>名称</th><th>ip1（NAT）</th><th>内存</th><th>硬盘</th></tr></thead><tbody><tr><td>masteryjx48</td><td>192.168.48.11</td><td>5G</td><td>100G</td></tr></tbody></table><h3 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h3><p>本地yum配置，自行挂载本地Centos7.9镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> repo.bak<br><span class="hljs-built_in">mv</span> /etc/yum.repos.d/* repo.bak/<br>mount /dev/cdrom /mnt<br><span class="hljs-built_in">cat</span> &gt;&gt;/etc/yum.repos.d/local.repo&lt;&lt;<span class="hljs-string">EOF</span><br><span class="hljs-string">[local]</span><br><span class="hljs-string">name=local</span><br><span class="hljs-string">baseurl=file:///mnt</span><br><span class="hljs-string">gpgcheck=0</span><br><span class="hljs-string">enabled=1</span><br><span class="hljs-string">EOF</span><br>yum clean all &amp;&amp; yum makecache<br>systemctl <span class="hljs-built_in">disable</span> firewalld --now<br>sed -i <span class="hljs-string">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/sysconfig/selinux<br></code></pre></td></tr></table></figure><h3 id="更改hosts"><a href="#更改hosts" class="headerlink" title="更改hosts"></a>更改hosts</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo <span class="hljs-string">&quot;192.168.48.11 masteryjx48&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>hosts<br></code></pre></td></tr></table></figure><h3 id="配置主机名"><a href="#配置主机名" class="headerlink" title="配置主机名"></a>配置主机名</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">masteryjx48</span> &amp;&amp; <span class="hljs-string">bash</span><br></code></pre></td></tr></table></figure><h3 id="配置ssh免密登入"><a href="#配置ssh免密登入" class="headerlink" title="配置ssh免密登入"></a>配置ssh免密登入</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">ssh-keygen -t rsa<br>cat ~<span class="hljs-regexp">/.ssh/i</span>d_rsa.pub &gt;&gt; ~<span class="hljs-regexp">/.ssh/</span>authorized_keys<br>ssh-copy-id masteryjx48<br>ssh masteryjx48<br><span class="hljs-keyword">exit</span><br></code></pre></td></tr></table></figure><h3 id="安装JAVA环境"><a href="#安装JAVA环境" class="headerlink" title="安装JAVA环境"></a>安装JAVA环境</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle">mkdir <span class="hljs-regexp">/usr/</span>lib/jvm<br>tar -xf <span class="hljs-regexp">/root/</span>jdk-<span class="hljs-number">8</span>u162-linux-x64.tar.gz -C <span class="hljs-regexp">/usr/</span>lib/jvm<br>echo <span class="hljs-string">&quot;export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_162&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br>echo <span class="hljs-string">&quot;export PATH=\$JAVA_HOME/bin:\$PATH&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br><span class="hljs-keyword">source</span> <span class="hljs-regexp">/etc/</span>profile<br>java -version<br></code></pre></td></tr></table></figure><h3 id="安装Hadoop"><a href="#安装Hadoop" class="headerlink" title="安装Hadoop"></a>安装Hadoop</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle">tar -zxf hadoop-<span class="hljs-number">3.1</span>.<span class="hljs-number">3</span>.tar.gz -C <span class="hljs-regexp">/usr/</span>local<br>mv <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop-3.1.3/</span> <span class="hljs-regexp">/usr/</span>local/hadoop<br>echo <span class="hljs-string">&quot;export HADOOP_HOME=/usr/local/hadoop&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br>echo <span class="hljs-string">&quot;export PATH=\$HADOOP_HOME/bin/:\$HADOOP_HOME/sbin/:\$PATH&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br><span class="hljs-keyword">source</span> <span class="hljs-regexp">/etc/</span>profile<br>hadoop version<br></code></pre></td></tr></table></figure><p>打个快照，方便做分布式部署,做分布式的直接跳到2.分布式</p><h3 id="编写配置文件"><a href="#编写配置文件" class="headerlink" title="编写配置文件"></a>编写配置文件</h3><h4 id="编写cort-site-yaml文件"><a href="#编写cort-site-yaml文件" class="headerlink" title="编写cort-site.yaml文件"></a>编写cort-site.yaml文件</h4><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">[root<span class="hljs-meta">@masteryjx48</span> ~]<span class="hljs-comment"># cat /usr/local/hadoop/etc/hadoop/core-site.xml</span><br><span class="hljs-variable">&lt;configuration&gt;</span><br>    <span class="hljs-variable">&lt;property&gt;</span><br>        <span class="hljs-variable">&lt;name&gt;</span>hadoop.tmp.dir<span class="hljs-variable">&lt;/name&gt;</span><br>        <span class="hljs-variable">&lt;value&gt;</span>file:/usr/local/hadoop/tmp<span class="hljs-variable">&lt;/value&gt;</span><br>        <span class="hljs-variable">&lt;description&gt;</span>Abase for other temporary directories.<span class="hljs-variable">&lt;/description&gt;</span><br>    <span class="hljs-variable">&lt;/property&gt;</span><br>    <span class="hljs-variable">&lt;property&gt;</span><br>        <span class="hljs-variable">&lt;name&gt;</span>fs.defaultFS<span class="hljs-variable">&lt;/name&gt;</span><br>        <span class="hljs-variable">&lt;value&gt;</span>hdfs://masteryjx48:9000<span class="hljs-variable">&lt;/value&gt;</span><br>    <span class="hljs-variable">&lt;/property&gt;</span><br><span class="hljs-variable">&lt;/configuration&gt;</span><br></code></pre></td></tr></table></figure><h4 id="编写hdfs-site-xml"><a href="#编写hdfs-site-xml" class="headerlink" title="编写hdfs-site.xml"></a>编写hdfs-site.xml</h4><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">[root<span class="hljs-meta">@masteryjx48</span> ~]<span class="hljs-comment"># cat /usr/local/hadoop/etc/hadoop/hdfs-site.xml</span><br><span class="hljs-variable">&lt;configuration&gt;</span><br>    <span class="hljs-variable">&lt;property&gt;</span><br>        <span class="hljs-variable">&lt;name&gt;</span>dfs.replication<span class="hljs-variable">&lt;/name&gt;</span><br>        <span class="hljs-variable">&lt;value&gt;</span>1<span class="hljs-variable">&lt;/value&gt;</span><br>    <span class="hljs-variable">&lt;/property&gt;</span><br>    <span class="hljs-variable">&lt;property&gt;</span><br>        <span class="hljs-variable">&lt;name&gt;</span>dfs.namenode.name.dir<span class="hljs-variable">&lt;/name&gt;</span><br>        <span class="hljs-variable">&lt;value&gt;</span>file:/usr/local/hadoop/tmp/dfs/name<span class="hljs-variable">&lt;/value&gt;</span><br>    <span class="hljs-variable">&lt;/property&gt;</span><br>    <span class="hljs-variable">&lt;property&gt;</span><br>        <span class="hljs-variable">&lt;name&gt;</span>dfs.datanode.data.dir<span class="hljs-variable">&lt;/name&gt;</span><br>        <span class="hljs-variable">&lt;value&gt;</span>file:/usr/local/hadoop/tmp/dfs/data<span class="hljs-variable">&lt;/value&gt;</span><br>    <span class="hljs-variable">&lt;/property&gt;</span><br><span class="hljs-variable">&lt;/configuration&gt;</span><br></code></pre></td></tr></table></figure><h3 id="启动hdfs服务"><a href="#启动hdfs服务" class="headerlink" title="启动hdfs服务"></a>启动hdfs服务</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">hdfs namenode -<span class="hljs-built_in">format</span><br></code></pre></td></tr></table></figure><h3 id="添加环境变量"><a href="#添加环境变量" class="headerlink" title="添加环境变量"></a>添加环境变量</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle">echo <span class="hljs-string">&quot;export HDFS_NAMENODE_USER=root&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br>echo <span class="hljs-string">&quot;export HDFS_DATANODE_USER=root&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br>echo <span class="hljs-string">&quot;export HDFS_SECONDARYNAMENODE_USER=root&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br>echo <span class="hljs-string">&quot;export YARN_RESOURCEMANAGER_USER=root&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br>echo <span class="hljs-string">&quot;export YARN_NODEMANAGER_USER=root&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br><span class="hljs-keyword">source</span> <span class="hljs-regexp">/etc/</span>profile<br></code></pre></td></tr></table></figure><h3 id="修改hadoop配置文件"><a href="#修改hadoop配置文件" class="headerlink" title="修改hadoop配置文件"></a>修改hadoop配置文件</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">echo <span class="hljs-string">&quot;export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_162&quot;</span> &gt;&gt; <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>etc<span class="hljs-regexp">/hadoop/</span>hadoop-env.sh<br></code></pre></td></tr></table></figure><h3 id="启动hadoop服务"><a href="#启动hadoop服务" class="headerlink" title="启动hadoop服务"></a>启动hadoop服务</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@masteryjx48 ~]# <span class="hljs-keyword">start</span>-<span class="hljs-keyword">all</span>.sh<br>Starting namenodes <span class="hljs-keyword">on</span> [masteryjx48]<br>Last <span class="hljs-keyword">login</span>: Thu Mar  <span class="hljs-number">9</span> <span class="hljs-number">07</span>:<span class="hljs-number">12</span>:<span class="hljs-number">02</span> CST <span class="hljs-number">2023</span> <span class="hljs-keyword">on</span> pts/<span class="hljs-number">0</span><br>Starting datanodes<br>Last <span class="hljs-keyword">login</span>: Thu Mar  <span class="hljs-number">9</span> <span class="hljs-number">07</span>:<span class="hljs-number">14</span>:<span class="hljs-number">08</span> CST <span class="hljs-number">2023</span> <span class="hljs-keyword">on</span> pts/<span class="hljs-number">0</span><br>Starting secondary namenodes [masteryjx48]<br>Last <span class="hljs-keyword">login</span>: Thu Mar  <span class="hljs-number">9</span> <span class="hljs-number">07</span>:<span class="hljs-number">14</span>:<span class="hljs-number">11</span> CST <span class="hljs-number">2023</span> <span class="hljs-keyword">on</span> pts/<span class="hljs-number">0</span><br>Starting resourcemanager<br>Last <span class="hljs-keyword">login</span>: Thu Mar  <span class="hljs-number">9</span> <span class="hljs-number">07</span>:<span class="hljs-number">14</span>:<span class="hljs-number">15</span> CST <span class="hljs-number">2023</span> <span class="hljs-keyword">on</span> pts/<span class="hljs-number">0</span><br>Starting nodemanagers<br>Last <span class="hljs-keyword">login</span>: Thu Mar  <span class="hljs-number">9</span> <span class="hljs-number">07</span>:<span class="hljs-number">14</span>:<span class="hljs-number">20</span> CST <span class="hljs-number">2023</span> <span class="hljs-keyword">on</span> pts/<span class="hljs-number">0</span><br><br></code></pre></td></tr></table></figure><p>关闭hadoop服务  stop-dfs.sh </p><h3 id="启动historyserver服务"><a href="#启动historyserver服务" class="headerlink" title="启动historyserver服务"></a>启动historyserver服务</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">mr-jobhistory-daemon.sh <span class="hljs-literal">start</span> historyserver<br></code></pre></td></tr></table></figure><h3 id="查看java进程"><a href="#查看java进程" class="headerlink" title="查看java进程"></a>查看java进程</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">root@masteryjx48</span> <span class="hljs-string">~</span>]<span class="hljs-comment"># jps</span><br><span class="hljs-number">9280 </span><span class="hljs-string">ResourceManager</span><br><span class="hljs-number">8785 </span><span class="hljs-string">DataNode</span><br><span class="hljs-number">9443 </span><span class="hljs-string">NodeManager</span><br><span class="hljs-number">9014 </span><span class="hljs-string">SecondaryNameNode</span><br><span class="hljs-number">8599 </span><span class="hljs-string">NameNode</span><br><span class="hljs-number">11127</span> <span class="hljs-string">Jps</span><br><span class="hljs-number">11034</span> <span class="hljs-string">JobHistoryServer</span><br></code></pre></td></tr></table></figure><h3 id="访问网页ip-9870查看hdfs"><a href="#访问网页ip-9870查看hdfs" class="headerlink" title="访问网页ip:9870查看hdfs"></a>访问网页ip:9870查看hdfs</h3><p><img src="/../img/Hadoop/cb7e7cebcd11b82c8393eb37e88631c1087202ed.png" alt="image-20230308231858685"></p><h3 id="访问网页ip-8088查看hadoop"><a href="#访问网页ip-8088查看hadoop" class="headerlink" title="访问网页ip:8088查看hadoop"></a>访问网页ip:8088查看hadoop</h3><p><img src="/../img/Hadoop/afb72b93d2cbcea5b9201e4809dc3b738bcf4a88.png" alt="image-20230308232003637"></p><h2 id="分布式"><a href="#分布式" class="headerlink" title="分布式"></a>分布式</h2><p>❗❗❗❗这里就克隆前面创建好的快照（1.6步骤），修改好ip</p><table><thead><tr><th>主机</th><th>ip</th><th>系统和软件</th><th>内存</th></tr></thead><tbody><tr><td>master</td><td>192.168.48.11</td><td>Centos7.9、Hadoop</td><td>5G</td></tr><tr><td>slave1</td><td>192.168.48.12</td><td>Centos7.9、Hadoop</td><td>5G</td></tr></tbody></table><h3 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h3><p>修改hosts 把之前添加的删掉</p><p>master</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">master</span><br><span class="hljs-string">bash</span><br></code></pre></td></tr></table></figure><p>slave1</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">slave1</span><br><span class="hljs-string">bash</span><br><span class="hljs-string">echo</span> <span class="hljs-string">&quot;192.168.48.11 master&quot;</span> &gt;&gt; /<span class="hljs-string">etc</span>/<span class="hljs-string">hosts</span><br><span class="hljs-string">echo</span> <span class="hljs-string">&quot;192.168.48.12 slave1&quot;</span> &gt;&gt; /<span class="hljs-string">etc</span>/<span class="hljs-string">hosts</span><br><span class="hljs-string">scp</span> /<span class="hljs-string">etc</span>/<span class="hljs-string">hosts</span> <span class="hljs-string">root</span>@<span class="hljs-string">master</span>:/<span class="hljs-string">etc</span>/<span class="hljs-string">hosts</span><br></code></pre></td></tr></table></figure><h3 id="SSH免密登入设置"><a href="#SSH免密登入设置" class="headerlink" title="SSH免密登入设置"></a>SSH免密登入设置</h3><p>master</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">ssh-keygen -t rsa<br>cat ~<span class="hljs-regexp">/.ssh/i</span>d_rsa.pub &gt;&gt; ~<span class="hljs-regexp">/.ssh/</span>authorized_keys<br>ssh master<br><span class="hljs-keyword">exit</span><br>ssh-copy-id -i root@slave1<br>ssh slave1<br>ll<br><span class="hljs-keyword">exit</span><br></code></pre></td></tr></table></figure><p>slave1</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">ssh-keygen -t rsa<br>cat ~<span class="hljs-regexp">/.ssh/i</span>d_rsa.pub &gt;&gt; ~<span class="hljs-regexp">/.ssh/</span>authorized_keys<br>ssh slave1<br><span class="hljs-keyword">exit</span><br>ssh-copy-id -i root@master<br>ssh master<br>ll<br><span class="hljs-keyword">exit</span><br></code></pre></td></tr></table></figure><h3 id="检查java和hadoop环境"><a href="#检查java和hadoop环境" class="headerlink" title="检查java和hadoop环境"></a>检查java和hadoop环境</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">master<br>[root@master ~]# java -<span class="hljs-keyword">version</span><br>java <span class="hljs-keyword">version</span> &quot;1.8.0_162&quot;<br>Java(TM) SE Runtime Environment (build <span class="hljs-number">1.8</span><span class="hljs-number">.0</span>_162-b12)<br>Java HotSpot(TM) <span class="hljs-number">64</span>-<span class="hljs-type">Bit</span> <span class="hljs-keyword">Server</span> VM (build <span class="hljs-number">25.162</span>-b12, mixed mode)<br>[root@master ~]# hadoop <span class="hljs-keyword">version</span><br>Hadoop <span class="hljs-number">3.1</span><span class="hljs-number">.3</span><br>Source code repository https://gitbox.apache.org/repos/asf/hadoop.git -r ba631c436b806728f8ec2f54ab1e289526c90579<br>Compiled <span class="hljs-keyword">by</span> ztang <span class="hljs-keyword">on</span> <span class="hljs-number">2019</span><span class="hljs-number">-09</span><span class="hljs-number">-12</span>T02:<span class="hljs-number">47</span>Z<br>Compiled <span class="hljs-keyword">with</span> protoc <span class="hljs-number">2.5</span><span class="hljs-number">.0</span><br><span class="hljs-keyword">From</span> source <span class="hljs-keyword">with</span> checksum ec785077c385118ac91aadde5ec9799<br>This command was run <span class="hljs-keyword">using</span> /usr/<span class="hljs-keyword">local</span>/hadoop/<span class="hljs-keyword">share</span>/hadoop/common/hadoop-common<span class="hljs-number">-3.1</span><span class="hljs-number">.3</span>.jar<br><br>slave1<br><br>[root@slave1 ~]# java -<span class="hljs-keyword">version</span><br>java <span class="hljs-keyword">version</span> &quot;1.8.0_162&quot;<br>Java(TM) SE Runtime Environment (build <span class="hljs-number">1.8</span><span class="hljs-number">.0</span>_162-b12)<br>Java HotSpot(TM) <span class="hljs-number">64</span>-<span class="hljs-type">Bit</span> <span class="hljs-keyword">Server</span> VM (build <span class="hljs-number">25.162</span>-b12, mixed mode)<br><br>[root@slave1 ~]# hadoop <span class="hljs-keyword">version</span><br>Hadoop <span class="hljs-number">3.1</span><span class="hljs-number">.3</span><br>Source code repository https://gitbox.apache.org/repos/asf/hadoop.git -r ba631c436b806728f8ec2f54ab1e289526c90579<br>Compiled <span class="hljs-keyword">by</span> ztang <span class="hljs-keyword">on</span> <span class="hljs-number">2019</span><span class="hljs-number">-09</span><span class="hljs-number">-12</span>T02:<span class="hljs-number">47</span>Z<br>Compiled <span class="hljs-keyword">with</span> protoc <span class="hljs-number">2.5</span><span class="hljs-number">.0</span><br><span class="hljs-keyword">From</span> source <span class="hljs-keyword">with</span> checksum ec785077c385118ac91aadde5ec9799<br>This command was run <span class="hljs-keyword">using</span> /usr/<span class="hljs-keyword">local</span>/hadoop/<span class="hljs-keyword">share</span>/hadoop/common/hadoop-common<span class="hljs-number">-3.1</span><span class="hljs-number">.3</span>.jar<br></code></pre></td></tr></table></figure><h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p>修改workers配置文件</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@<span class="hljs-keyword">master</span> <span class="hljs-title">hadoop</span>]<span class="hljs-comment"># cd /usr/local/hadoop/etc/hadoop</span><br>[root@<span class="hljs-keyword">master</span> <span class="hljs-title">hadoop</span>]<span class="hljs-comment"># cat workers</span><br>slave1<br></code></pre></td></tr></table></figure><p>修改core-site.xml</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">[root<span class="hljs-meta">@master</span> hadoop]<span class="hljs-comment"># cat core-site.xml</span><br><span class="hljs-variable">&lt;configuration&gt;</span><br>        <span class="hljs-variable">&lt;property&gt;</span><br>                <span class="hljs-variable">&lt;name&gt;</span>fs.defaultFS<span class="hljs-variable">&lt;/name&gt;</span><br>                <span class="hljs-variable">&lt;value&gt;</span>hdfs://master:9000<span class="hljs-variable">&lt;/value&gt;</span><br>        <span class="hljs-variable">&lt;/property&gt;</span><br>        <span class="hljs-variable">&lt;property&gt;</span><br>                <span class="hljs-variable">&lt;name&gt;</span>hadoop.tmp.dir<span class="hljs-variable">&lt;/name&gt;</span><br>                <span class="hljs-variable">&lt;value&gt;</span>file:/usr/local/hadoop/tmp<span class="hljs-variable">&lt;/value&gt;</span><br>                <span class="hljs-variable">&lt;description&gt;</span>Abase for other temporary directories.<span class="hljs-variable">&lt;/description&gt;</span><br>        <span class="hljs-variable">&lt;/property&gt;</span><br><span class="hljs-variable">&lt;/configuration&gt;</span><br></code></pre></td></tr></table></figure><p>修改hdfs-site.xml</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">[root<span class="hljs-meta">@master</span> hadoop]<span class="hljs-comment"># cat hdfs-site.xml</span><br><span class="hljs-variable">&lt;configuration&gt;</span><br>        <span class="hljs-variable">&lt;property&gt;</span><br>                <span class="hljs-variable">&lt;name&gt;</span>dfs.namenode.secondary.http-address<span class="hljs-variable">&lt;/name&gt;</span><br>                <span class="hljs-variable">&lt;value&gt;</span>master:50090<span class="hljs-variable">&lt;/value&gt;</span><br>        <span class="hljs-variable">&lt;/property&gt;</span><br>        <span class="hljs-variable">&lt;property&gt;</span><br>                <span class="hljs-variable">&lt;name&gt;</span>dfs.replication<span class="hljs-variable">&lt;/name&gt;</span><br>                <span class="hljs-variable">&lt;value&gt;</span>1<span class="hljs-variable">&lt;/value&gt;</span><br>        <span class="hljs-variable">&lt;/property&gt;</span><br>        <span class="hljs-variable">&lt;property&gt;</span><br>                <span class="hljs-variable">&lt;name&gt;</span>dfs.namenode.name.dir<span class="hljs-variable">&lt;/name&gt;</span><br>                <span class="hljs-variable">&lt;value&gt;</span>file:/usr/local/hadoop/tmp/dfs/name<span class="hljs-variable">&lt;/value&gt;</span><br>        <span class="hljs-variable">&lt;/property&gt;</span><br>        <span class="hljs-variable">&lt;property&gt;</span><br>                <span class="hljs-variable">&lt;name&gt;</span>dfs.datanode.data.dir<span class="hljs-variable">&lt;/name&gt;</span><br>                <span class="hljs-variable">&lt;value&gt;</span>file:/usr/local/hadoop/tmp/dfs/data<span class="hljs-variable">&lt;/value&gt;</span><br>        <span class="hljs-variable">&lt;/property&gt;</span><br><span class="hljs-variable">&lt;/configuration&gt;</span><br></code></pre></td></tr></table></figure><p>修改mapred-site.xml配置文件</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">[root<span class="hljs-meta">@master</span> hadoop]<span class="hljs-comment"># cat mapred-site.xml</span><br><span class="hljs-variable">&lt;configuration&gt;</span><br>        <span class="hljs-variable">&lt;property&gt;</span><br>                <span class="hljs-variable">&lt;name&gt;</span>mapreduce.framework.name<span class="hljs-variable">&lt;/name&gt;</span><br>                <span class="hljs-variable">&lt;value&gt;</span>yarn<span class="hljs-variable">&lt;/value&gt;</span><br>        <span class="hljs-variable">&lt;/property&gt;</span><br>        <span class="hljs-variable">&lt;property&gt;</span><br>                <span class="hljs-variable">&lt;name&gt;</span>mapreduce.jobhistory.address<span class="hljs-variable">&lt;/name&gt;</span><br>                <span class="hljs-variable">&lt;value&gt;</span>master:10020<span class="hljs-variable">&lt;/value&gt;</span><br>        <span class="hljs-variable">&lt;/property&gt;</span><br>        <span class="hljs-variable">&lt;property&gt;</span><br>                <span class="hljs-variable">&lt;name&gt;</span>mapreduce.jobhistory.webapp.address<span class="hljs-variable">&lt;/name&gt;</span><br>                <span class="hljs-variable">&lt;value&gt;</span>master:19888<span class="hljs-variable">&lt;/value&gt;</span><br>        <span class="hljs-variable">&lt;/property&gt;</span><br>        <span class="hljs-variable">&lt;property&gt;</span><br><span class="hljs-variable">&lt;name&gt;</span>yarn.app.mapreduce.am.env<span class="hljs-variable">&lt;/name&gt;</span><br><span class="hljs-variable">&lt;value&gt;</span>HADOOP_MAPRED_HOME=/usr/local/hadoop<span class="hljs-variable">&lt;/value&gt;</span><br><span class="hljs-variable">&lt;/property&gt;</span><br><span class="hljs-variable">&lt;property&gt;</span><br><span class="hljs-variable">&lt;name&gt;</span>mapreduce.map.env<span class="hljs-variable">&lt;/name&gt;</span><br><span class="hljs-variable">&lt;value&gt;</span>HADOOP_MAPRED_HOME=/usr/local/hadoop<span class="hljs-variable">&lt;/value&gt;</span><br><span class="hljs-variable">&lt;/property&gt;</span><br><span class="hljs-variable">&lt;property&gt;</span><br><span class="hljs-variable">&lt;name&gt;</span>mapreduce.reduce.env<span class="hljs-variable">&lt;/name&gt;</span><br><span class="hljs-variable">&lt;value&gt;</span>HADOOP_MAPRED_HOME=/usr/local/hadoop<span class="hljs-variable">&lt;/value&gt;</span><br><span class="hljs-variable">&lt;/property&gt;</span><br><span class="hljs-variable">&lt;/configuration&gt;</span><br></code></pre></td></tr></table></figure><p>修改yarn-site.xml文件</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">[root<span class="hljs-meta">@master</span> hadoop]<span class="hljs-comment"># cat yarn-site.xml</span><br><span class="hljs-variable">&lt;configuration&gt;</span><br>        <span class="hljs-variable">&lt;property&gt;</span><br>                <span class="hljs-variable">&lt;name&gt;</span>yarn.resourcemanager.hostname<span class="hljs-variable">&lt;/name&gt;</span><br>                <span class="hljs-variable">&lt;value&gt;</span>master<span class="hljs-variable">&lt;/value&gt;</span><br>        <span class="hljs-variable">&lt;/property&gt;</span><br>        <span class="hljs-variable">&lt;property&gt;</span><br>                <span class="hljs-variable">&lt;name&gt;</span>yarn.nodemanager.aux-services<span class="hljs-variable">&lt;/name&gt;</span><br>                <span class="hljs-variable">&lt;value&gt;</span>mapreduce_shuffle<span class="hljs-variable">&lt;/value&gt;</span><br>        <span class="hljs-variable">&lt;/property&gt;</span><br><span class="hljs-variable">&lt;/configuration&gt;</span><br></code></pre></td></tr></table></figure><h3 id="将上述配置拷贝到slave1上"><a href="#将上述配置拷贝到slave1上" class="headerlink" title="将上述配置拷贝到slave1上"></a>将上述配置拷贝到slave1上</h3><p>master</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>etc<span class="hljs-regexp">/hadoop/</span><br>scp core-site.xml slave1:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>etc<span class="hljs-regexp">/hadoop/</span><br>scp hdfs-site.xml slave1:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>etc<span class="hljs-regexp">/hadoop/</span><br>scp mapred-site.xml slave1:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>etc<span class="hljs-regexp">/hadoop/</span><br>scp workers slave1:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>etc<span class="hljs-regexp">/hadoop/</span><br>scp yarn-site.xml slave1:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>etc<span class="hljs-regexp">/hadoop/</span><br></code></pre></td></tr></table></figure><h3 id="修改环境变量拷贝到slave1"><a href="#修改环境变量拷贝到slave1" class="headerlink" title="修改环境变量拷贝到slave1"></a>修改环境变量拷贝到slave1</h3><p>master</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gradle">echo <span class="hljs-string">&quot;export HDFS_NAMENODE_USER=root&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br>echo <span class="hljs-string">&quot;export HDFS_DATANODE_USER=root&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br>echo <span class="hljs-string">&quot;export HDFS_SECONDARYNAMENODE_USER=root&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br>echo <span class="hljs-string">&quot;export YARN_RESOURCEMANAGER_USER=root&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br>echo <span class="hljs-string">&quot;export YARN_NODEMANAGER_USER=root&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile<br><span class="hljs-keyword">source</span> <span class="hljs-regexp">/etc/</span>profile<br>scp <span class="hljs-regexp">/etc/</span>profile slave1:<span class="hljs-regexp">/etc/</span>profile<br><span class="hljs-keyword">source</span> <span class="hljs-regexp">/etc/</span>profile<br></code></pre></td></tr></table></figure><h3 id="修改hadoop环境配置文件并将配置文件拷贝到slave1"><a href="#修改hadoop环境配置文件并将配置文件拷贝到slave1" class="headerlink" title="修改hadoop环境配置文件并将配置文件拷贝到slave1"></a>修改<strong>hadoop</strong>环境配置文件并将配置文件拷贝到slave1</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">echo <span class="hljs-string">&quot;export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_162&quot;</span> &gt;&gt; <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>etc<span class="hljs-regexp">/hadoop/</span>hadoop-env.sh<br><br>scp <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>etc<span class="hljs-regexp">/hadoop/</span>hadoop-env.sh slave1:<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/hadoop/</span>etc<span class="hljs-regexp">/hadoop/</span>hadoop-env.sh<br></code></pre></td></tr></table></figure><h3 id="集群配置启动"><a href="#集群配置启动" class="headerlink" title="集群配置启动"></a>集群配置启动</h3><p>master初始化</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">hdfs namenode -<span class="hljs-built_in">format</span><br></code></pre></td></tr></table></figure><h3 id="启动hadoop"><a href="#启动hadoop" class="headerlink" title="启动hadoop"></a>启动hadoop</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">start</span>-<span class="hljs-keyword">all</span>.sh<br></code></pre></td></tr></table></figure><h3 id="启动historyserver"><a href="#启动historyserver" class="headerlink" title="启动historyserver"></a>启动historyserver</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">mr-jobhistory-daemon.sh <span class="hljs-literal">start</span> historyserver<br></code></pre></td></tr></table></figure><h3 id="查看java进程-1"><a href="#查看java进程-1" class="headerlink" title="查看java进程"></a>查看java进程</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@<span class="hljs-keyword">master</span> <span class="hljs-title">hadoop</span>]<span class="hljs-comment"># jps</span><br><span class="hljs-number">35863</span> ResourceManager<br><span class="hljs-number">2841</span> JobHistoryServer<br><span class="hljs-number">39065</span> NameNode<br><span class="hljs-number">39771</span> Jps<br><span class="hljs-number">35597</span> SecondaryNameNode<br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">root@slave1</span> <span class="hljs-string">~</span>]<span class="hljs-comment"># jps</span><br><span class="hljs-number">5587 </span><span class="hljs-string">NodeManager</span><br><span class="hljs-number">5492 </span><span class="hljs-string">DataNode</span><br><span class="hljs-number">6215 </span><span class="hljs-string">Jps</span><br></code></pre></td></tr></table></figure><p><img src="/../img/Hadoop/a4c2ec34465b36c3404a54688306cca6070cba87.png" alt="image-20230309000335285"></p><p><img src="/../img/Hadoop/a8202fe3fd3b0a107d68473e2086601457d6aac4.png" alt="image-20230309002207394"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>Hadoop</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Shell</title>
    <link href="/2023/02/26/Shell/"/>
    <url>/2023/02/26/Shell/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Shell是一个<span style="color:red;">命令行解释器</span>，他接收应用程序&#x2F;用户命令，然后调用操作系统内核</p><p><img src="/../img/Shell/b8682c9a5af9d2af835aa15626c8789178af345a.png" alt="image-20230125165047995"></p><p>Shell还是一个功能相当强大的编辑语言，易编写，易调试，灵活性强。</p><h2 id="Shell解析器"><a href="#Shell解析器" class="headerlink" title="Shell解析器"></a>Shell解析器</h2><h3 id="Linux提供的Shell解析器有6种："><a href="#Linux提供的Shell解析器有6种：" class="headerlink" title="Linux提供的Shell解析器有6种："></a>Linux提供的Shell解析器有6种：</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[root@Shell ~]# cat <span class="hljs-regexp">/etc/</span>Shells<br><span class="hljs-regexp">/bin/</span>sh<br><span class="hljs-regexp">/bin/</span>bash<br><span class="hljs-regexp">/usr/</span>bin/sh<br><span class="hljs-regexp">/usr/</span>bin/bash<br><span class="hljs-regexp">/bin/</span>tcsh<br><span class="hljs-regexp">/bin/</span>csh<br></code></pre></td></tr></table></figure><h3 id="bash和sh的关系是"><a href="#bash和sh的关系是" class="headerlink" title="bash和sh的关系是"></a>bash和sh的关系是</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@Shell ~]<span class="hljs-comment"># ll /bin/ | grep bash</span><br>-rwxr-xr-x.<span class="hljs-number"> 1 </span>root root    <span class="hljs-number"> 964536 </span>4月  <span class="hljs-number"> 1 </span>2020 bash<br>lrwxrwxrwx.<span class="hljs-number"> 1 </span>root root         <span class="hljs-number"> 4 </span>9月 <span class="hljs-number"> 28 </span>07:56 sh -&gt; bash<br>软连接<br></code></pre></td></tr></table></figure><h3 id="Centos默认的解析器是bash"><a href="#Centos默认的解析器是bash" class="headerlink" title="Centos默认的解析器是bash"></a>Centos默认的解析器是bash</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@Shell ~]<span class="hljs-comment"># echo $Shell</span><br><span class="hljs-regexp">/bin/</span>bash<br></code></pre></td></tr></table></figure><h2 id="Shell脚本入门"><a href="#Shell脚本入门" class="headerlink" title="Shell脚本入门"></a>Shell脚本入门</h2><h3 id="脚本格式"><a href="#脚本格式" class="headerlink" title="脚本格式"></a>脚本格式</h3><p>脚本以<span style="color:red;">#!&#x2F;bin&#x2F;bash</span>开头（指向解析器）</p><h3 id="第一个Shell脚本：helloworld"><a href="#第一个Shell脚本：helloworld" class="headerlink" title="第一个Shell脚本：helloworld"></a>第一个Shell脚本：helloworld</h3><p>需求：创建一个Shell脚本，输出helloworld</p><p>实例操作：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@Shell</span> ~]<span class="hljs-meta"># mkdir datas          ---创建一个脚本文件夹</span><br>[root<span class="hljs-symbol">@Shell</span> ~]<span class="hljs-meta"># cd datas/            ---以后所有脚本放在这</span><br>[root<span class="hljs-symbol">@Shell</span> datas]<span class="hljs-meta"># touch helloworld.sh</span><br>[root<span class="hljs-symbol">@Shell</span> datas]<span class="hljs-meta"># vi helloworld.sh</span><br><span class="hljs-meta">#!/bin/bash</span><br>echo <span class="hljs-string">&quot;helloworld  严千屹&quot;</span><br>~<br>[root<span class="hljs-symbol">@Shell</span> datas]<span class="hljs-meta"># sh helloworld.sh        ---相对路径</span><br>helloworld  严千屹<br>[root<span class="hljs-symbol">@Shell</span> ~]<span class="hljs-meta"># bash datas/helloworld.sh    ---绝对路径</span><br>helloworld  严千屹<br><span class="hljs-meta">#上面都是bash和sh帮你执行脚本，脚本本身不需要执行权限。</span><br><span class="hljs-meta">#下面本质是脚本需要自己执行，所以需要执行权限</span><br>[root<span class="hljs-symbol">@Shell</span> datas]<span class="hljs-meta"># ./helloworld.sh</span><br>-bash: ./helloworld.sh: 权限不够<br>[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># chmod 777 helloworld.sh   ---给予权限</span><br>[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># ./helloworld.sh</span><br>helloworld  严千屹<br></code></pre></td></tr></table></figure><h3 id="第二个Shell脚本：多命令处理"><a href="#第二个Shell脚本：多命令处理" class="headerlink" title="第二个Shell脚本：多命令处理"></a>第二个Shell脚本：多命令处理</h3><p>需求：</p><p>在&#x2F;root&#x2F;datas&#x2F;目录下创建一个qianyi.txt,在 qianyi.txt 文件中增加“qianyios”</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@shell datas]<span class="hljs-comment"># touch qy.sh</span><br>[root@shell datas]<span class="hljs-comment"># vi qy.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br>cd /root/datas/<br>touch qianyi.txt<br>echo &quot;qianyios&quot; &gt;&gt; qianyi.txt<br>[root@shell datas]<span class="hljs-comment"># bash qy.sh</span><br><span class="hljs-comment">#执行完成后会出现qianyi.txt</span><br>[root@shell datas]<span class="hljs-comment"># ll</span><br>总用量 12<br>-rwxrwxrwx<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 43 </span>1月 <span class="hljs-number"> 25 </span>17:06 helloworld.sh<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root <span class="hljs-number"> 9 </span>1月 <span class="hljs-number"> 25 </span>17:22 qianyi.txt<br>-rw-r--r--<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 76 </span>1月 <span class="hljs-number"> 25 </span>17:22 qy.sh<br>[root@shell datas]<span class="hljs-comment"># cat qianyi.txt</span><br>qianyios<br></code></pre></td></tr></table></figure><h2 id="Shell中的变量"><a href="#Shell中的变量" class="headerlink" title="Shell中的变量"></a>Shell中的变量</h2><h3 id="常用的系统变量"><a href="#常用的系统变量" class="headerlink" title="常用的系统变量"></a>常用的系统变量</h3><p>​$HOME   $PWD   $SHELL  $USER等</p><h3 id="实例操作"><a href="#实例操作" class="headerlink" title="实例操作"></a>实例操作</h3><p>查看系统变量的值</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># echo $HOME</span><br>/root<br>显示家目录<br></code></pre></td></tr></table></figure><p>显示当前Shell中所有的变量：set</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs makefile">[root@shell datas]<span class="hljs-comment"># set</span><br>ABRT_DEBUG_LOG=/dev/null<br>BASH=/usr/bin/bash<br>BASH_ALIASES=()<br>BASH_ARGC=()<br>BASH_ARGV=()<br>BASH_CMDS=()<br>......<br></code></pre></td></tr></table></figure><h3 id="自定义变量"><a href="#自定义变量" class="headerlink" title="自定义变量"></a>自定义变量</h3><h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><ol><li>定义变量：变量&#x3D;值</li><li>撤销变量：unset 变量</li><li>声明静态变量：readonly 变量   注意不能unset</li></ol><h4 id="变量定义规则"><a href="#变量定义规则" class="headerlink" title="变量定义规则"></a>变量定义规则</h4><ol><li>变量名称可以有字母，数字和下划线组成，但是不能以数字开头，<span style="color:red;">环境变量名建议全部大写</span></li><li><span style="color:red;">等号两侧不能有空格</span></li><li>在bash中，变量默认类型都是字符串类型，无法直接进行数值运算</li><li>变量的值如果有<span style="color:red;">空格</span>，需要使用双引号或单引号括起来</li></ol><h4 id="实例操作-1"><a href="#实例操作-1" class="headerlink" title="实例操作"></a>实例操作</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment">#自定义变量</span><br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># QY=qianyi</span><br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># echo $QY</span><br>qianyi<br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># QY=&quot;qian yi&quot;</span><br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># echo $QY</span><br>qian yi<br><br>变量为空和未定义变量是两个不同的概念<br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># echo $age      ---未定义</span><br><br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># age=&quot;&quot;</span><br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># echo $age      ---已定义</span><br><br><span class="hljs-comment">#两个没办法辨认</span><br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># set -u        ---调用为声明变量会报错</span><br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># echo $add</span><br>-<span class="hljs-keyword">bash: </span><span class="hljs-keyword">add: </span>unbound variable<br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># add=123</span><br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># echo $add</span><br><span class="hljs-number">123</span><br><span class="hljs-comment">#删除变量  不需要加$add</span><br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># echo $add</span><br><span class="hljs-number">123</span><br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># unset add</span><br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># echo $add</span><br>-<span class="hljs-keyword">bash: </span><span class="hljs-keyword">add: </span>unbound variable<br></code></pre></td></tr></table></figure><h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><ol><li>环境变量设置</li></ol><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">[root@shell ~]# <span class="hljs-keyword">export</span> qyage=<span class="hljs-string">&quot;18&quot;</span><br>#使用<span class="hljs-keyword">export</span>声明的变量即是环境变量<br></code></pre></td></tr></table></figure><ol start="2"><li>环境变量查询  set可以查看所有变量，env只能查看环境变量</li></ol><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@shell ~]</span><span class="hljs-comment"># env | grep qyage</span><br><span class="hljs-attr">qyage</span>=<span class="hljs-number">18</span><br></code></pre></td></tr></table></figure><ol start="3"><li>系统默认环境变量</li></ol><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@shell ~]</span><span class="hljs-comment"># env</span><br><span class="hljs-attr">XDG_SESSION_ID</span>=<span class="hljs-number">10</span><br><span class="hljs-attr">HOSTNAME</span>=shell<br><span class="hljs-attr">TERM</span>=xterm<br><span class="hljs-attr">SHELL</span>=/bin/bash<br><span class="hljs-attr">HISTSIZE</span>=<span class="hljs-number">1000</span><br><span class="hljs-attr">qyage</span>=<span class="hljs-number">18</span><br></code></pre></td></tr></table></figure><ol start="4"><li>PATH变量：系统查找命令的路径</li></ol><p>先查询下PATH环境变量的值：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@shell ~]<span class="hljs-comment"># echo $PATH</span><br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/sbin:/u</span>sr<span class="hljs-regexp">/local/</span>bin:<span class="hljs-regexp">/usr/</span>sbin:<span class="hljs-regexp">/usr/</span>bin:<span class="hljs-regexp">/root/</span>bin<br><br></code></pre></td></tr></table></figure><p>  PATH 变量的值是用“:”分割的路径，这些路径就是系统查找命令的路径。也就是说当我们输入了一个程序名，如果没有写入路径，系统就会到 PATH 变量定义的路径中去寻找，是否有可以执行的程序。如果找到则执行，否则会报“命令没有发现”的错误。</p><p>  那么是不是我们把自己的脚本拷贝到 PATH 变量定义的路径中，我们自己写的脚本也可以不输入路径而直接运行呢?</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@<span class="hljs-keyword">shell</span> ~]# cp datas/helloworld.<span class="hljs-keyword">sh</span> /usr/bin/<br>[root@<span class="hljs-keyword">shell</span> ~]# helloworld.<span class="hljs-keyword">sh</span><br>helloworld  严千屹<br>[root@<span class="hljs-keyword">shell</span> ~]# <span class="hljs-keyword">rm</span> -rf /usr/bin/helloworld.<span class="hljs-keyword">sh</span><br>[root@<span class="hljs-keyword">shell</span> ~]# helloworld.<span class="hljs-keyword">sh</span><br>-bash: /usr/bin/helloworld.<span class="hljs-keyword">sh</span>: 没有那个文件或目录<br></code></pre></td></tr></table></figure><p>那么我们是不是可以修改 PATH变量的值，而不是把程序脚本复制到&#x2F;bin&#x2F;目录中。当然是可以的,我们通过变量的叠加就可以实现了:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@shell ~]<span class="hljs-comment"># PATH=&quot;$PATH&quot;:/root/datas</span><br>[root@shell ~]<span class="hljs-comment"># echo $PATH</span><br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/sbin:/u</span>sr<span class="hljs-regexp">/local/</span>bin:<span class="hljs-regexp">/usr/</span>sbin:<span class="hljs-regexp">/usr/</span>bin:<span class="hljs-regexp">/root/</span>bin:<span class="hljs-regexp">/root/</span>datas<br>[root@shell ~]<span class="hljs-comment"># helloworld.sh</span><br>helloworld  严千屹<br></code></pre></td></tr></table></figure><h3 id="PS1变量：命令提示符设置"><a href="#PS1变量：命令提示符设置" class="headerlink" title="PS1变量：命令提示符设置"></a>PS1变量：命令提示符设置</h3><p>PS1是一个很有意思的变量，是用来定义命令行的提示符，可以安装我们自己的需求来定义自己喜欢的提示符。PS1可以支持以下这些选项：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\d</span> ：<span class="hljs-comment">#代表日期，格式为weekday month date，例如：&quot;Mon Aug 1&quot;   </span><br><span class="hljs-string">\H</span> ：<span class="hljs-comment">#完整的主机名称。   </span><br><span class="hljs-string">\h</span> ：<span class="hljs-comment">#仅取主机的第一个名字。 </span><br><span class="hljs-string">\t</span> ：<span class="hljs-comment">#显示时间为24小时格式，如：HH：MM：SS   </span><br><span class="hljs-string">\T</span> ：<span class="hljs-comment">#显示时间为12小时格式   </span><br><span class="hljs-string">\A</span> ：<span class="hljs-comment">#显示时间为24小时格式：HH：MM   </span><br><span class="hljs-string">\u</span> ：<span class="hljs-comment">#当前用户的账号名称   </span><br><span class="hljs-string">\v</span> ：<span class="hljs-comment">#BASH的版本信息   </span><br><span class="hljs-string">\w</span> ：<span class="hljs-comment">#完整的工作目录名称。家目录会以 ~代替   </span><br><span class="hljs-string">\W</span> ：<span class="hljs-comment">#利用basename取得工作目录名称，所以只会列出最后一个目录 </span><br><span class="hljs-string">\#</span> ：<span class="hljs-comment">#下达的第几个命令   </span><br><span class="hljs-string">\$</span> ：<span class="hljs-comment">#提示字符，如果是root时，提示符为：# ，普通用户则为：$  </span><br></code></pre></td></tr></table></figure><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">格式 <span class="hljs-title class_">PS1</span>=<span class="hljs-string">&#x27;[ ]\$ &#x27;</span>     \<span class="hljs-variable">$空</span>格<span class="hljs-string">&#x27;  有个空格  一定要单引号</span><br></code></pre></td></tr></table></figure><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># echo $PS1</span><br>[\u<span class="hljs-symbol">@\h</span> \W]\$<br>[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># PS1=<span class="hljs-string">&#x27;[\u@\t \w]\$ &#x27;</span></span><br>[root<span class="hljs-symbol">@20</span>:<span class="hljs-number">14</span>:<span class="hljs-number">51</span> ~]<span class="hljs-meta"># cd datas/</span><br>[root<span class="hljs-symbol">@20</span>:<span class="hljs-number">14</span>:<span class="hljs-number">54</span> ~/datas]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h3 id="位置参数变量"><a href="#位置参数变量" class="headerlink" title="位置参数变量"></a>位置参数变量</h3><table><thead><tr><th>位置参数变量</th><th>作用</th></tr></thead><tbody><tr><td>$n</td><td>表示第n个参数，$1则表示第一个参数，$2表示第二个参数……如果有10以上的参数用${10}</td></tr><tr><td>$0</td><td>当前程序的名称，也就是命令本身。</td></tr><tr><td>$*</td><td>传递给程序的所有参数组成的字符串（参数）。</td></tr><tr><td>$@</td><td>以“参数1”、“参数2”……保存所有的参数。</td></tr><tr><td>$#</td><td>代表命令行中所有参数个数</td></tr><tr><td>$?</td><td>上一个代码或者Shell程序在Shell中退出的情况，如果正常退出则返回0，否则返回非0值。</td></tr><tr><td>$$</td><td>本程序的（进程ID）PID。</td></tr><tr><td>$!</td><td>上一个命令的PID。</td></tr></tbody></table><h4 id="实例操作-2"><a href="#实例操作-2" class="headerlink" title="实例操作"></a>实例操作</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@shell datas]<span class="hljs-comment"># vi count.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br>a=<span class="hljs-variable">$1</span><br>b=<span class="hljs-variable">$2</span><br><span class="hljs-built_in">sum</span>=$((<span class="hljs-variable">$a</span>+<span class="hljs-variable">$b</span>))<br><span class="hljs-comment">#$((  ))双小括号才能进行数字运算，$( )运行命令</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$sum</span><br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$0</span><br>[root@shell datas]<span class="hljs-comment"># chmod 755 count.sh</span><br>[root@shell datas]<span class="hljs-comment"># ./count.sh 22 33</span><br>55<br>./count.sh       <span class="hljs-comment">#$0输出命令本身</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@shell datas]<span class="hljs-comment"># vi para.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;\$* is $*&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;\$@ is <span class="hljs-variable">$@</span>&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;\$# is <span class="hljs-variable">$#</span>&quot;</span><br>[root@shell datas]<span class="hljs-comment"># chmod 777 para.sh</span><br>[root@shell datas]<span class="hljs-comment"># ./para.sh 11 22 33 44</span><br>$* is 11 22 33 44   <span class="hljs-comment">#&#123;11 22 33 44&#125;看成一个整体 </span><br><span class="hljs-variable">$@</span> is 11 22 33 44   <span class="hljs-comment">#&#123;11&#125;,&#123;22&#125;,&#123;33&#125;,&#123;44&#125;</span><br><span class="hljs-variable">$#</span> is 4             <span class="hljs-comment">#个数</span><br>验证过程<br>[root@shell datas]<span class="hljs-comment"># vi para2.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment">#for循环，有多少次出现多少次</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span>  <span class="hljs-string">&quot;$*&quot;</span><br>      <span class="hljs-keyword">do</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-variable">$i</span><br>      <span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;------------------&quot;</span><br><span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span>  <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span><br>        <span class="hljs-keyword">do</span><br>         <span class="hljs-built_in">echo</span> <span class="hljs-variable">$y</span><br>      <span class="hljs-keyword">done</span><br>[root@shell datas]<span class="hljs-comment"># ./para2.sh 11 22 33 44</span><br>11 22 33 44             <span class="hljs-comment">#整体，循环1次</span><br>------------------<br>11                      <span class="hljs-comment">#4个，循环4次</span><br>22<br>33<br>44<br></code></pre></td></tr></table></figure><h3 id="预定义变量"><a href="#预定义变量" class="headerlink" title="预定义变量"></a>预定义变量</h3><table><thead><tr><th>$?</th><th>最后一次执行的命令的返回状态。如果这个变量的值为 0，证明上一个命令正确执行:如果这个变量的值为非 0(具体是哪个数，由命令自己来决定)，则证明上一个命令执行不正确了。</th></tr></thead><tbody><tr><td>$$</td><td>当前进程的进程号(PID)</td></tr><tr><td>$!</td><td>后台运行的最后一个进程的进程号(PID)</td></tr></tbody></table><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># ls</span><br>anaconda-ks.cfg  <span class="hljs-keyword">bin </span> datas  repo.<span class="hljs-keyword">bak</span><br><span class="hljs-keyword"></span>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># echo $?</span><br><span class="hljs-number">0</span><br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># sjkdhasjkd</span><br>-<span class="hljs-keyword">bash: </span>sjkdhasjkd: 未找到命令<br>[root@<span class="hljs-keyword">shell </span>~]<span class="hljs-comment"># echo $?</span><br><span class="hljs-number">127</span><br></code></pre></td></tr></table></figure><h2 id="read键盘接收"><a href="#read键盘接收" class="headerlink" title="read键盘接收"></a>read键盘接收</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>[root@shell datas]# read –help<br>-bash: read: –: 无效选项<br>read: 用法:   read [选项] [变量名]</p><p>read [-ers]</p><p>[-a 数组] </p><p>[-d 分隔符] </p><p>[-i 缓冲区文字] </p><p>[-n 读取字符数] </p><p>[-N 读取字符数] </p><p>[-p 提示符] </p><p>[-t 超时] </p><p>[-u 文件描述符] </p><p>[名称 …]名称指的是变量名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@shell datas]<span class="hljs-comment"># vi count2.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-built_in">read</span> -t 30 -p <span class="hljs-string">&quot;请输入第一个数字：&quot;</span> num1<br><span class="hljs-built_in">read</span> -t 30 -p <span class="hljs-string">&quot;请输入第二个数字：&quot;</span> num2<br><span class="hljs-built_in">sum</span>=$((<span class="hljs-variable">$num1</span>+<span class="hljs-variable">$num2</span>))<br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$sum</span><br>[root@shell datas]<span class="hljs-comment"># chmod 777 count2.sh</span><br>[root@shell datas]<span class="hljs-comment"># ./count2.sh</span><br>请输入第一个数字：1<br>请输入第二个数字：1<br>2<br><br><br><span class="hljs-comment">#########前者需要回车，下面的不需要回车</span><br>[root@shell datas]<span class="hljs-comment"># vi count2.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-built_in">read</span> -n 1 -t 30 -p <span class="hljs-string">&quot;请输入第一个数字：&quot;</span> num1   <span class="hljs-comment">#-n 1 限制输入1个字符数</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\n&quot;</span><br><span class="hljs-built_in">read</span> -s -t 30 -p <span class="hljs-string">&quot;请输入第二个数字：&quot;</span> num2     <span class="hljs-comment">#-s 是隐藏</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;\n&quot;</span><br><span class="hljs-built_in">sum</span>=$((<span class="hljs-variable">$num1</span>+<span class="hljs-variable">$num2</span>))<br><span class="hljs-built_in">echo</span> <span class="hljs-variable">$sum</span><br>[root@shell datas]<span class="hljs-comment"># ./count2.sh</span><br>请输入第一个数字：1<br><br>请输入第二个数字：         <span class="hljs-comment">#我这里输入的是12</span><br><br>13<br></code></pre></td></tr></table></figure><h2 id="declare声明变量类型"><a href="#declare声明变量类型" class="headerlink" title="declare声明变量类型"></a>declare声明变量类型</h2><h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><p>既然所有变量的默认类型是字符串型，那么只要我们把变量声明为整数型不就可以运算了吗？</p><blockquote><p>-:给变量设定类型属性</p><p>+:取消变量的类型属性</p><p>-a:将变量声明为数组型</p><p>-i:将变量声明为整数型(integer)</p><p>-x:将变量声明为环境变量</p><p>-r:将变量声明为只读变量，注意，一旦设置为只读变量，既不能修改变量的值，也不能删除变量，甚至不能通过+r取消只读属性</p><p>-p:显示指定变量的被声明的类型、</p></blockquote><h3 id="声明数值进行运算"><a href="#声明数值进行运算" class="headerlink" title="声明数值进行运算"></a>声明数值进行运算</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># a=1</span><br>[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># b=2</span><br>[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># c=$a+$b</span><br>[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># echo $c</span><br><span class="hljs-number">1</span>+<span class="hljs-number">2</span><br>[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># declare -i c=$a+$b      #声明整数类型才可以进行数值运行</span><br>[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># echo $c</span><br><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># declare -a name[0]=<span class="hljs-string">&quot;qy&quot;</span>  #声明数组</span><br>[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># name[1]=<span class="hljs-string">&quot;qy1&quot;</span>   #也可以不用declare，就知道你在声明数组</span><br>[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># name[2]=<span class="hljs-string">&quot;qy2&quot;</span></span><br>[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># echo $&#123;name[*]&#125;</span><br>qy qy1 qy2<br></code></pre></td></tr></table></figure><h3 id="环境变量-1"><a href="#环境变量-1" class="headerlink" title="环境变量"></a>环境变量</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">两个声明变量作用一样<br>[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># export test</span><br>[root<span class="hljs-symbol">@shell</span> datas]<span class="hljs-meta"># declare -x test=<span class="hljs-string">&quot;123&quot;</span></span><br></code></pre></td></tr></table></figure><h3 id="只读属性"><a href="#只读属性" class="headerlink" title="只读属性"></a>只读属性</h3><p>注意，一旦设置为只读变量，既不能修改变量的值，也不能删除变量，甚至不能通过+r取消只读属性</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">[root@<span class="hljs-keyword">shell </span>datas]<span class="hljs-comment"># declare -r test        #添加只读属性</span><br>[root@<span class="hljs-keyword">shell </span>datas]<span class="hljs-comment"># declare -p</span><br>......<br>declare -rx test=<span class="hljs-string">&quot;123&quot;</span><br>[root@<span class="hljs-keyword">shell </span>datas]<span class="hljs-comment"># echo $test</span><br><span class="hljs-number">123</span><br>[root@<span class="hljs-keyword">shell </span>datas]<span class="hljs-comment"># test=1           #无法改值</span><br>-<span class="hljs-keyword">bash: </span>test: 只读变量<br>[root@<span class="hljs-keyword">shell </span>datas]<span class="hljs-comment"># unset test        #无法删除变量</span><br>-<span class="hljs-keyword">bash: </span>unset: test: 无法反设定: 只读 variable<br>[root@<span class="hljs-keyword">shell </span>datas]<span class="hljs-comment"># declare +r test      #无法删除属性</span><br>-<span class="hljs-keyword">bash: </span>declare: test: 只读变量<br></code></pre></td></tr></table></figure><p>不过好在这个变量是命令行声明的，所以重启或重新登入，这个变量就会消失</p><h2 id="数值运算"><a href="#数值运算" class="headerlink" title="数值运算"></a>数值运算</h2><h3 id="使用expr或let数值运算工具"><a href="#使用expr或let数值运算工具" class="headerlink" title="使用expr或let数值运算工具"></a>使用expr或let数值运算工具</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@shell ~]# <span class="hljs-attribute">aa</span>=11<br>[root@shell ~]# <span class="hljs-attribute">bb</span>=22<br>[root@shell ~]# <span class="hljs-attribute">dd</span>=$(expr <span class="hljs-variable">$aa</span> + <span class="hljs-variable">$bb</span>)<br>[root@shell ~]# echo <span class="hljs-variable">$dd</span><br>33<br><span class="hljs-comment">#dd的值是aa和bb的和。注意“+”号两侧比有空格</span><br><span class="hljs-comment">#如果是let呢</span><br>[root@shell ~]# let <span class="hljs-attribute">e</span>=<span class="hljs-variable">$aa</span>+$bb<br>[root@shell ~]# echo <span class="hljs-variable">$e</span><br>33<br></code></pre></td></tr></table></figure><h3 id="使用双小括号-运算式子-或-运算式子-的方式运算-（看个人习惯，看你喜欢用哪种）"><a href="#使用双小括号-运算式子-或-运算式子-的方式运算-（看个人习惯，看你喜欢用哪种）" class="headerlink" title="使用双小括号 $((运算式子))  或$[运算式子] 的方式运算 （看个人习惯，看你喜欢用哪种）"></a>使用双小括号 $((运算式子))  或$[运算式子] 的方式运算 （看个人习惯，看你喜欢用哪种）</h3><blockquote><p>区分单小括号$(  )调用的是系统命令  双小括号是计算数学运算的</p></blockquote><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mel">[root@shell ~]# aa=<span class="hljs-number">11</span><br>[root@shell ~]# bb=<span class="hljs-number">22</span><br>[root@shell ~]# ff=$(($aa+$bb))<br>[root@shell ~]# echo $ff<br><span class="hljs-number">33</span><br>[root@shell ~]# gg=$[$aa+$bb]<br>[root@shell ~]# echo $gg<br><span class="hljs-number">33</span><br></code></pre></td></tr></table></figure><h3 id="Shell常用运算符"><a href="#Shell常用运算符" class="headerlink" title="Shell常用运算符"></a>Shell常用运算符</h3><table><thead><tr><th>优先级</th><th>运算符</th><th>说明</th></tr></thead><tbody><tr><td>13</td><td>-，+</td><td>单目负，单目正</td></tr><tr><td>12</td><td>!,~</td><td>逻辑非，按位取反或补码</td></tr><tr><td>11</td><td>*,&#x2F;,%</td><td>乘、除、取模</td></tr><tr><td>10</td><td>+,-</td><td>加、减</td></tr><tr><td>9</td><td>&lt;&lt;,&gt;&gt;</td><td>按位左移，按位右移</td></tr><tr><td>8</td><td>&lt; &#x3D; ,&gt; &#x3D; ,&lt; , &gt;</td><td>小于或等于、大于或等于、小于、大于</td></tr><tr><td>7</td><td>&#x3D;&#x3D;, !&#x3D;</td><td>等于</td></tr><tr><td>6</td><td>&amp;</td><td>按位与</td></tr><tr><td>5</td><td>^</td><td>按位异或</td></tr><tr><td>4</td><td>|</td><td>按位或</td></tr><tr><td>3</td><td>&amp;&amp;</td><td>逻辑与</td></tr><tr><td>2</td><td>||</td><td>逻辑或</td></tr><tr><td>1</td><td>&#x3D;,<em>&#x3D;,-&#x3D;,</em>&#x3D;,&#x2F;&#x3D;,%&#x3D;,&amp;&#x3D;,^&#x3D;,|&#x3D;,&lt;&lt;&#x3D;,&gt;&gt;&#x3D;</td><td>赋值，运算且赋值</td></tr></tbody></table><h3 id="取模运算"><a href="#取模运算" class="headerlink" title="取模运算"></a>取模运算</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># bb=$((14%5))</span><br>[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># echo $bb</span><br><span class="hljs-number">4</span><br><span class="hljs-meta">#14不能被5整除，余数是4</span><br></code></pre></td></tr></table></figure><h3 id="逻辑与"><a href="#逻辑与" class="headerlink" title="逻辑与"></a>逻辑与</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># cc=$((1&amp;&amp;0))</span><br>[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># echo $cc</span><br><span class="hljs-number">0</span><br>逻辑与运算只有想与的两边都是<span class="hljs-number">1</span>，与的结果才是<span class="hljs-number">1</span>，否则与的结果是<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h3 id="四则运算练习"><a href="#四则运算练习" class="headerlink" title="四则运算练习"></a>四则运算练习</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs crystal">[root<span class="hljs-variable">@shell</span> ~]<span class="hljs-comment"># vi count3.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br>vaule=<span class="hljs-variable">$(</span>(<span class="hljs-variable">$1</span> <span class="hljs-variable">$2</span> <span class="hljs-variable">$3</span>))<br>echo <span class="hljs-variable">$vaule</span><br>[root<span class="hljs-variable">@shell</span> ~]<span class="hljs-comment"># ./count3.sh 11 + 11</span><br><span class="hljs-number">22</span><br>[root<span class="hljs-variable">@shell</span> ~]<span class="hljs-comment"># ./count3.sh 11 / 11</span><br><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>但是上面会有bug不能用</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@shell datas]<span class="hljs-comment"># vi count4.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br>read -t <span class="hljs-number">30</span> -p <span class="hljs-string">&quot;please input num1:&quot;</span> num1<br>read -t <span class="hljs-number">30</span> -p <span class="hljs-string">&quot;please input num2:&quot;</span> num2<br>read -n <span class="hljs-number">1</span> -t <span class="hljs-number">30</span> -p <span class="hljs-string">&quot;please inpute operato[+-*/]:&quot;</span> oper<br>echo -e “\n”<br>[ <span class="hljs-string">&quot;$oper&quot;</span> == <span class="hljs-string">&quot;+&quot;</span> ] &amp;&amp; echo <span class="hljs-string">&quot;$(($num1 + $num2))&quot;</span> &amp;&amp; <span class="hljs-keyword">exit</span><br>[ <span class="hljs-string">&quot;$oper&quot;</span> == <span class="hljs-string">&quot;-&quot;</span> ] &amp;&amp; echo <span class="hljs-string">&quot;$(($num1 - $num2))&quot;</span> &amp;&amp; <span class="hljs-keyword">exit</span><br>[ <span class="hljs-string">&quot;$oper&quot;</span> == <span class="hljs-string">&quot;*&quot;</span> ] &amp;&amp; echo <span class="hljs-string">&quot;$(($num1 * $num2))&quot;</span> &amp;&amp; <span class="hljs-keyword">exit</span><br>[ <span class="hljs-string">&quot;$oper&quot;</span> == <span class="hljs-string">&quot;/&quot;</span> ] &amp;&amp; echo <span class="hljs-string">&quot;$(($num1 / $num2))&quot;</span> &amp;&amp; <span class="hljs-keyword">exit</span><br><br>echo <span class="hljs-string">&quot;please input right oper&quot;</span><br>[空格<span class="hljs-string">&quot;$oper&quot;</span>空格==空格<span class="hljs-string">&quot;+&quot;</span>空格]<br></code></pre></td></tr></table></figure><h2 id="变量的测试与内容置换"><a href="#变量的测试与内容置换" class="headerlink" title="变量的测试与内容置换"></a>变量的测试与内容置换</h2><table><thead><tr><th>变量置换方式</th><th>变量y没有设置</th><th>变量y为空值</th><th>变量y设置值</th></tr></thead><tbody><tr><td>x&#x3D;${y-新值}</td><td>x&#x3D; 新值</td><td>x 为空</td><td>x&#x3D;$y</td></tr><tr><td>x&#x3D;${y:-新值}</td><td>x&#x3D; 新值</td><td>x&#x3D; 新值</td><td>x&#x3D;$y</td></tr><tr><td>x&#x3D;${y+新值}</td><td>x 为空</td><td>x&#x3D; 新值</td><td>x&#x3D;新值</td></tr><tr><td>x&#x3D;${y:+新值}</td><td>x 为空</td><td>x 为空</td><td>x&#x3D;新值</td></tr><tr><td>x&#x3D;${y&#x3D;新值}</td><td>x&#x3D; 新值</td><td>x 为空</td><td>x&#x3D;$y</td></tr><tr><td>同上</td><td>y&#x3D; 新值</td><td>y 值不变</td><td>y值不变</td></tr><tr><td>x&#x3D;${y:&#x3D;新值}</td><td>x&#x3D; 新值</td><td>X&#x3D; 新值</td><td>x&#x3D;$y</td></tr><tr><td>同上</td><td>y&#x3D; 新值</td><td>y&#x3D; 新值</td><td>y值不变</td></tr><tr><td>x&#x3D;${y?新值}</td><td>新值输出到标准错误输出（屏幕）</td><td>x 为空</td><td>x&#x3D;$y</td></tr><tr><td>x&#x3D;${y:?新值}</td><td>新值输出到标准错误输出</td><td>新值输出到标准错误输出</td><td>x&#x3D;$y</td></tr></tbody></table><p>假设我们要测b变量，现在b变量我们从来没有设置过</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs autoit">以下可以判断变b不存在<br>[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># x=$&#123;b-new&#125;</span><br>[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># echo $x</span><br>new<br>以下可以判断是否为空<br>[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># b=<span class="hljs-string">&quot;&quot;</span></span><br>[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># x=$&#123;b-new&#125;</span><br>[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># echo $x</span><br>以下可以判断是否有值<br>[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># b=123</span><br>[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># x=$&#123;b-new&#125;</span><br>[root<span class="hljs-symbol">@shell</span> ~]<span class="hljs-meta"># echo $x</span><br><span class="hljs-number">123</span><br></code></pre></td></tr></table></figure><h2 id="环境变量配置文件"><a href="#环境变量配置文件" class="headerlink" title="环境变量配置文件"></a>环境变量配置文件</h2><p>1、让环境变量生效的命令  source 配置文件  或  . 配置文件</p><p>2、环境变量配置文件</p><p>登录时生效的环境变量配置文件</p><p>在 Linux 系统登录时主要生效的环境变量配置文件有以下五个:</p><p>&#x2F;etc&#x2F;profile</p><p>&#x2F;etc&#x2F;profile.d&#x2F;*.sh</p><p>&#x2F;etc&#x2F;bashrc</p><p>~&#x2F;.bash_profile</p><p>~&#x2F;.bashrc</p><p>写在前三个的配置文件对所有用户生效，写在最后两个对当前用户生效</p><h2 id="基础正则"><a href="#基础正则" class="headerlink" title="基础正则"></a>基础正则</h2><p>基础正则表达式</p><table><thead><tr><th>元字符</th><th align="left">作用</th></tr></thead><tbody><tr><td>*</td><td align="left">前一个字符匹配 0 次或任意多次。</td></tr><tr><td>.</td><td align="left">匹配除了换行符外任意一个字符。</td></tr><tr><td>^</td><td align="left">匹配行首。例如：^hello 会匹配以 hello 开头的行。</td></tr><tr><td>$</td><td align="left">匹配行尾。例如：hello&amp;会匹配以 hello 结尾的行。</td></tr><tr><td>[]</td><td align="left">匹配中括号中指定的任意一个字符，只匹配一个字符。例如：[aoeiu] 匹配任意一个元音字母，[0-9] 匹配任意一位数字，[a-z][0-9]匹配小写字和一位数字构成的两位字符。</td></tr><tr><td>[^]</td><td align="left">匹配除中括号的字符以外的任意一个字符。例如：[^0-9] 匹配任意一位非数字字符，[^a-z] 表示任意一位非小写字母。</td></tr><tr><td>\</td><td align="left">转义符。用于取消讲特殊符号的含义取消。</td></tr><tr><td>{n}</td><td align="left">表示其前面的字符恰好出现 n 次。例如：[0-9]{4} 匹配 4 位数字，[1][3-8][0-9]{9} 匹配手机号码。</td></tr><tr><td>{n,}</td><td align="left">表示其前面的字符出现不小于 n 次。例如： [0-9]{2,} 表示两位及以上的数字。</td></tr><tr><td>{n,m}</td><td align="left">表示其前面的字符至少出现n 次，最多出现m 次。例如：[a-z]{6,8}匹配 6 到 8 位的小写字母。</td></tr></tbody></table><h3 id="x2F-bashrc-文件中建立这个别名："><a href="#x2F-bashrc-文件中建立这个别名：" class="headerlink" title="~&#x2F;.bashrc 文件中建立这个别名："></a>~&#x2F;.bashrc 文件中建立这个别名：</h3><p>实现grep能显示颜色</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo <span class="hljs-string">&quot;alias grep=\&#x27;grep --color=auto\&#x27;&quot;</span> &gt;&gt; <span class="hljs-regexp">/root/</span>.bashrc <br></code></pre></td></tr></table></figure><p>建立练习文档</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@<span class="hljs-keyword">shell</span> datas]# vi <span class="hljs-keyword">test</span>.txt<br>Mr. <span class="hljs-keyword">Li</span> Ming said:<br><span class="hljs-keyword">he</span> was the most honest <span class="hljs-keyword">man</span>.<br>123despise him.<br>google<br>gooooogle<br>ggle<br>gogle<br>soooooid<br>But since Mr. shen Chao came, <span class="hljs-keyword">he</span> never saaaid those words. 5555nice!<br>because,actuaaaally,<br>Mr. Shen Chao is the most honest <span class="hljs-keyword">man</span><br>Later,Mr. <span class="hljs-keyword">Li</span> ming soid his hot body.<br>hello is<br>hello was<br></code></pre></td></tr></table></figure><p>练习*号</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment"># a*意思是最少包含0个a或无数个a</span><br>[root@<span class="hljs-keyword">shell </span>datas]<span class="hljs-comment"># grep &quot;a*&quot; test.txt</span><br>Mr. Li Ming said:<br>he was the most honest man.<br><span class="hljs-number">123</span>despise him.<br><span class="hljs-keyword">But </span>since Mr. <span class="hljs-keyword">shen </span>Chao came, he never saaaid those words. <span class="hljs-number">5555</span>nice!<br><span class="hljs-keyword">because,actuaaaally,</span><br><span class="hljs-keyword"></span>Mr. <span class="hljs-keyword">Shen </span>Chao is the most honest man<br>Later,Mr. Li ming soid his hot <span class="hljs-keyword">body.</span><br><span class="hljs-keyword"></span><br><span class="hljs-comment"># aa*意思是最少包含1个a或无数个a</span><br>[root@<span class="hljs-keyword">shell </span>datas]<span class="hljs-comment"># grep &quot;aa*&quot; test.txt</span><br>Mr. Li Ming said:<br>he was the most honest man.<br><span class="hljs-keyword">But </span>since Mr. <span class="hljs-keyword">shen </span>Chao came, he never saaaid those words. <span class="hljs-number">5555</span>nice!<br><span class="hljs-keyword">because,actuaaaally,</span><br><span class="hljs-keyword"></span>Mr. <span class="hljs-keyword">Shen </span>Chao is the most honest man<br>Later,Mr. Li ming soid his hot <span class="hljs-keyword">body.</span><br><span class="hljs-keyword"></span><br><span class="hljs-comment"># aaa*意思是最少包含2个a或无数个a</span><br>[root@<span class="hljs-keyword">shell </span>datas]<span class="hljs-comment"># grep &quot;aaa*&quot; test.txt</span><br><span class="hljs-keyword">But </span>since Mr. <span class="hljs-keyword">shen </span>Chao came, he never saaaid those words. <span class="hljs-number">5555</span>nice!<br><span class="hljs-keyword">because,actuaaaally,</span><br><span class="hljs-keyword"></span><br>grep <span class="hljs-string">&quot;a&quot;</span> count4.<span class="hljs-keyword">sh </span>  也行<br><br></code></pre></td></tr></table></figure><p>练习 . 号   正则表达式“.”只能匹配一个字符，这个字符可以是任意字符</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@<span class="hljs-keyword">shell</span> datas]# grep <span class="hljs-string">&quot;s..d&quot;</span> <span class="hljs-keyword">test</span>.txt<br>Mr. <span class="hljs-keyword">Li</span> Ming said:<br>Later,Mr. <span class="hljs-keyword">Li</span> ming soid his hot body.<br></code></pre></td></tr></table></figure><p>[root@shell datas]# grep “s.*d” test.txt<br>Mr. Li Ming <strong>said</strong>:<br>But <strong>since Mr. shen Chao came, he never saaaid those word</strong>s. 5555nice!<br>Later,Mr. Li ming <strong>soid his hot bod</strong>y.</p><p>“[]”会匹配中括号中指定任意一个字符，注意只能匹配一个字符。比如[ao]要不会匹配一个 a</p><p>字符，要不会匹配一个 o 字符：</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@<span class="hljs-keyword">shell</span> datas]# grep <span class="hljs-string">&quot;s[ao]id&quot;</span> <span class="hljs-keyword">test</span>.txt<br>Mr. <span class="hljs-keyword">Li</span> Ming said:<br>Later,Mr. <span class="hljs-keyword">Li</span> ming soid his hot body.<br>[root@<span class="hljs-keyword">shell</span> datas]# grep <span class="hljs-string">&quot;[0-9]&quot;</span> <span class="hljs-keyword">test</span>.txt<br>123despise him.<br>But since Mr. shen Chao came, <span class="hljs-keyword">he</span> never saaaid those words. 5555nice!<br></code></pre></td></tr></table></figure><h2 id="扩展正则"><a href="#扩展正则" class="headerlink" title="扩展正则"></a>扩展正则</h2><table><thead><tr><th>扩展元字符</th><th>作用</th></tr></thead><tbody><tr><td>+</td><td>前一个字符匹配 1 次或任意多次。如“go+gle”会匹配“gogle”、“google”或“gooogle”，当然如果“o”有更多个，也能匹配。</td></tr><tr><td>？</td><td>前一个字符匹配 0 次或 1 次。如“colou?r”可以匹配“colour”或“color”。</td></tr><tr><td>|</td><td>匹配两个或多个分支选择。如“was|his”会匹配既包含“was”的行，也匹配包含“his”的行。</td></tr><tr><td>（）</td><td>匹配其整体为一个字符，即模式单元。可以理解为由多个单个字符组成的大字符。<br />如“(dog)+”会匹配“dog”、“dogdog”、“dogdogdog”等，因为被（）包含的字符会当成一个整体。但“hello （world|earth）”会匹配“hello world”及“hello earth”。</td></tr></tbody></table><h2 id="grep-参数列表"><a href="#grep-参数列表" class="headerlink" title="grep 参数列表"></a>grep 参数列表</h2><ol><li><code>-i</code> : 忽略大小写</li><li><code>-v</code> : 查找不包含指定字符串的所有行（取反）</li><li><code>-r</code> : 递归查找文件夹下的文件</li><li><code>-n</code> : 显示匹配行所在位置（行号）</li><li><code>-l</code> : 只显示包含搜索字符串的文件名，而非每个匹配行</li><li><code>-c</code> : 统计符合条件的行数</li><li><code>-e pattern</code> : 指定要查找的正则表达式模式</li><li><code>-w</code> : 匹配整个单词，即只匹配独立的单词而非单词内的字符</li><li><code>-A num</code> : 输出匹配行后 N 行内容</li><li><code>-B num</code> : 输出匹配行前 N 行内容</li><li><code>-C[num]</code> 或者 <code>--context[=num]</code>: 输出匹配行前后总共 N 行内容。</li><li><code>--exclude</code> : 排除指定文件类型，多个文件类型用 “,” 隔开</li></ol><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs vim">[root@localhost <span class="hljs-keyword">sh</span>]# <span class="hljs-keyword">grep</span> -E <span class="hljs-string">&quot;go*gle&quot;</span> test.txt<br>google<br>gooooogle<br>ggle<br>gogle<br>[root@localhost <span class="hljs-keyword">sh</span>]# <span class="hljs-keyword">grep</span> -E <span class="hljs-string">&quot;go+gle&quot;</span> test.txt<br>google<br>gooooogle<br>gogle<br>[root@localhost <span class="hljs-keyword">sh</span>]# <span class="hljs-keyword">grep</span> -E <span class="hljs-string">&quot;go?gle&quot;</span> test.txt<br>ggle<br>gogle<br>[root@localhost <span class="hljs-keyword">sh</span>]# <span class="hljs-keyword">grep</span> -E <span class="hljs-string">&quot;go+&quot;</span> test.txt<br>google<br>gooooogle<br>gogle<br>[root@localhost <span class="hljs-keyword">sh</span>]# <span class="hljs-keyword">grep</span> -E <span class="hljs-string">&quot;g(oo)+&quot;</span> test.txt<br>google<br>gooooogle<br>[root@localhost <span class="hljs-keyword">sh</span>]# <span class="hljs-keyword">grep</span> -E <span class="hljs-string">&quot;g(ooo)+&quot;</span> test.txt<br>gooooogle<br>[root@localhost <span class="hljs-keyword">sh</span>]# <span class="hljs-keyword">grep</span> -E <span class="hljs-string">&quot;hello (was|is)&quot;</span> test.txt<br>hello <span class="hljs-keyword">is</span><br>hello was<br><br></code></pre></td></tr></table></figure><p>匹配邮箱</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">grep -E <span class="hljs-string">&quot;<span class="hljs-subst">[0-9a-zA-Z_]</span>+@<span class="hljs-subst">[0-9a-zA-Z_]</span>+(\.<span class="hljs-subst">[0-9a-zA-Z_]</span>+)&#123;1,3&#125;&quot;</span> test.txt<br></code></pre></td></tr></table></figure><h2 id="字符截取和替换命令"><a href="#字符截取和替换命令" class="headerlink" title="字符截取和替换命令"></a>字符截取和替换命令</h2><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs excel">[root@localhost ~]# cut [选项] 文件名选项：<br>-f 列号：          提取第几列<br>-d 分隔符：     按照指定分隔符分割列<br>-c 字符范围：    不依赖分隔符来区分列，而是通过字符范围（行首为 <span class="hljs-number">0</span>）来进行字段提取。“<span class="hljs-built_in">n</span>-”表示从第 <span class="hljs-built_in">n</span> 个字符到行尾；“<span class="hljs-built_in">n</span>-m”从第 <span class="hljs-built_in">n</span> 个字符到第 m个字符；“-m”表示从第 <span class="hljs-number">1</span> 个字符到第 m 个字符。<br></code></pre></td></tr></table></figure><p>测试文件</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stata">[root@localhost ~]# <span class="hljs-keyword">cat</span> student.txt<br>ID      Name    gender  <span class="hljs-keyword">Mark</span><br>1       Liming  <span class="hljs-keyword">M</span>       86<br>2       <span class="hljs-keyword">Sc</span>      <span class="hljs-keyword">M</span>       90<br>3       Tg      <span class="hljs-keyword">M</span>       83<br>用<span class="hljs-keyword">tab</span>键隔开所有列，不要空格<br></code></pre></td></tr></table></figure><p>测试</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># cut -f 2 student.txt</span><br>Name<br>Liming<br>Sc<br>Tg<br><span class="hljs-meta">#提取多列</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># cut -f 2,3 student.txt</span><br>Name    gender<br>Liming  M<br>Sc        M<br>Tg       M<br><span class="hljs-meta">##cut 可以按照字符进行提取，需要注意“8-”代表的是提取所有行的第八个字符开始到行尾，而 “10-20”代表提取所有行的第十个字符到第二十个字符，而“-8”代表提取所有行从行首到第八个</span><br>字符：<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># cut -c 9- student.txt</span><br>gender Mark<br> M <span class="hljs-number">86</span><br><span class="hljs-number">0</span><br><span class="hljs-number">3</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># cut -c -9 student.txt</span><br>ID Name g<br><span class="hljs-number">1</span> Liming<br><span class="hljs-number">2</span> Sc M <span class="hljs-number">90</span><br><span class="hljs-number">3</span> Tg M <span class="hljs-number">83</span><br><br></code></pre></td></tr></table></figure><h2 id="awk编程"><a href="#awk编程" class="headerlink" title="awk编程"></a>awk编程</h2><h3 id="printf-格式化输出"><a href="#printf-格式化输出" class="headerlink" title="printf 格式化输出"></a>printf 格式化输出</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[root@localhost ~]<span class="hljs-comment"># printf ‘输出类型输出格式’ 输出内容输出类型：</span><br>%ns：输出字符串。n 是数字指代输出几个字符<br>%ni：输出整数。n 是数字指代输出几个数字<br>%m.nf：输出浮点数。m 和 n 是数字，指代输出的整数位数和小数位数。如%<span class="hljs-number">8.2f</span>代表  共输出 <span class="hljs-number">8</span> 位数，其中 <span class="hljs-number">2</span> 位是小数，<span class="hljs-number">6</span> 位是整数。<br>输出格式：<br><span class="hljs-string">\a:</span>输出警告声音<br><span class="hljs-string">\b:</span>输出退格键，也就是 Backspace 键<br><span class="hljs-string">\f:</span>清除屏幕<br><span class="hljs-string">\n:</span>换行<br><span class="hljs-string">\r:</span>回车，也就是 Enter 键<br><span class="hljs-string">\t:</span>水平输出退格键，也就是 Tab 键<br><span class="hljs-string">\v:</span>垂直输出退格键，也就是 Tab 键<br></code></pre></td></tr></table></figure><p>建立测试文件</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">vi</span> student.txt<br><span class="hljs-attribute">ID</span>       Name    PHP     Linux   MySQL   Average<br><span class="hljs-attribute">1</span>        Liming   <span class="hljs-number">82</span>      <span class="hljs-number">95</span>      <span class="hljs-number">86</span>      <span class="hljs-number">87</span>.<span class="hljs-number">66</span><br><span class="hljs-attribute">2</span>        Sc        <span class="hljs-number">74</span>      <span class="hljs-number">96</span>      <span class="hljs-number">87</span>      <span class="hljs-number">85</span>.<span class="hljs-number">66</span><br><span class="hljs-attribute">3</span>        Tg        <span class="hljs-number">99</span>      <span class="hljs-number">83</span>      <span class="hljs-number">93</span>      <span class="hljs-number">91</span>.<span class="hljs-number">66</span><br></code></pre></td></tr></table></figure><p>不指定格式输出</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># printf <span class="hljs-string">&#x27;%s&#x27;</span> $(cat student.txt)</span><br>IDNamePHPLinuxMySQLAverage1Liming82958687<span class="hljs-number">.662</span>Sc74968785<span class="hljs-number">.663</span>Tg99839391<span class="hljs-number">.66</span><br><span class="hljs-meta">#乱作一锅粥</span><br></code></pre></td></tr></table></figure><p>指定格式输出</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># printf &#x27;%s\t %s\t %s\t %s\t %s\t %s\t \n&#x27; $(cat student.txt)</span><br>ID       Name    PHP     Linux   MySQL   Average<br>1        Liming <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2        Sc     <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3        Tg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br><br></code></pre></td></tr></table></figure><h3 id="awk条件"><a href="#awk条件" class="headerlink" title="awk条件"></a>awk条件</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># awk <span class="hljs-string">&#x27;条件 1&#123;动作 1&#125; 条件 2&#123;动作 2&#125;…&#x27;</span> 文件名</span><br></code></pre></td></tr></table></figure><p>awk条件（Pattern）</p><p>一般使用关系表达式作为条件。这些关系表达式非常多，具体参考表 12-3 所示，例如：</p><p>x &gt; 10 判断变量 x 是否大于 10</p><p>x &#x3D;&#x3D; y 判断变量 x 是否等于变量 y</p><p>A ~ B判断字符串 A 中是否包含能匹配 B 表达式的子字符串</p><p>A !~ B 判断字符串 A 中是否不包含能匹配 B 表达式的子字符串</p><p>动作（Action）：</p><p>格式化输出 流程控制语句</p><p><img src="/../img/Shell/205fa6cf17277f79e65555cc1c7a9afe7819b814.png" alt="image-20230421143849290"></p><p>awk内置变量</p><p><img src="/../img/Shell/2e8746e3feacb88db27cc8f033f27d3b5b52f28a.png" alt="image-20230421190306772"></p><p>例子：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@localhost</span> <span class="hljs-operator">~</span>]# awk &#x27;&#123;printf <span class="hljs-variable">$2</span> <span class="hljs-string">&quot;<span class="hljs-subst">\t</span>&quot;</span> <span class="hljs-variable">$6</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span>&#125;&#x27; student.txt<br>#输出第二列和第六列<br></code></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs gradle">假设我要提取根分区<span class="hljs-regexp">/dev/</span>sda1 第五列的使用率<br>[root@localhost ~]# df -h<br>Filesystem               <span class="hljs-keyword">Size</span>  Used Avail Use% Mounted on<br>devtmpfs                 <span class="hljs-number">475</span>M     <span class="hljs-number">0</span>  <span class="hljs-number">475</span>M   <span class="hljs-number">0</span>% /dev<br>tmpfs                    <span class="hljs-number">487</span>M     <span class="hljs-number">0</span>  <span class="hljs-number">487</span>M   <span class="hljs-number">0</span>% <span class="hljs-regexp">/dev/</span>shm<br>tmpfs                    <span class="hljs-number">487</span>M  <span class="hljs-number">7.7</span>M  <span class="hljs-number">479</span>M   <span class="hljs-number">2</span>% /run<br>tmpfs                    <span class="hljs-number">487</span>M     <span class="hljs-number">0</span>  <span class="hljs-number">487</span>M   <span class="hljs-number">0</span>% <span class="hljs-regexp">/sys/</span>fs/cgroup<br><span class="hljs-regexp">/dev/m</span>apper<span class="hljs-regexp">/centos-root   50G  1.5G   49G   3% /</span><br><span class="hljs-regexp">/dev/m</span>apper<span class="hljs-regexp">/centos-home   47G   33M   47G   1% /</span>home<br><span class="hljs-regexp">/dev/</span>sda1               <span class="hljs-number">1014</span>M  <span class="hljs-number">141</span>M  <span class="hljs-number">874</span>M  <span class="hljs-number">14</span>% /boot<br>tmpfs                     <span class="hljs-number">98</span>M     <span class="hljs-number">0</span>   <span class="hljs-number">98</span>M   <span class="hljs-number">0</span>% <span class="hljs-regexp">/run/u</span>ser/<span class="hljs-number">0</span><br>[root@localhost ~]# df -h | <span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;/dev/sda1&quot;</span>| awk <span class="hljs-string">&#x27;&#123;print $5&#125;&#x27;</span>| cut -d <span class="hljs-string">&quot;%&quot;</span> -f <span class="hljs-number">1</span><br><span class="hljs-number">14</span><br></code></pre></td></tr></table></figure><p>Begin</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@localhost</span> <span class="hljs-operator">~</span>]# awk &#x27;<span class="hljs-type">BEGIN</span>&#123;printf <span class="hljs-string">&quot;11111111<span class="hljs-subst">\n</span>&quot;</span> &#125; &#123;printf <span class="hljs-variable">$2</span> <span class="hljs-string">&quot;<span class="hljs-subst">\t</span>&quot;</span> <span class="hljs-variable">$6</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span>&#125;&#x27; student.txt<br><span class="hljs-number">11111111</span><br><span class="hljs-type">Name</span>    <span class="hljs-type">Average</span><br><span class="hljs-type">Liming</span>  <span class="hljs-number">87.66</span><br><span class="hljs-type">Sc</span>      <span class="hljs-number">85.66</span><br><span class="hljs-type">Tg</span>      <span class="hljs-number">91.66</span><br></code></pre></td></tr></table></figure><p>End</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@localhost</span> <span class="hljs-operator">~</span>]# awk &#x27;<span class="hljs-type">END</span>&#123;printf <span class="hljs-string">&quot;111111111<span class="hljs-subst">\n</span>&quot;</span> &#125; &#123;printf <span class="hljs-variable">$2</span> <span class="hljs-string">&quot;<span class="hljs-subst">\t</span>&quot;</span> <span class="hljs-variable">$6</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span>&#125;&#x27; student.txt<br><span class="hljs-type">Name</span>    <span class="hljs-type">Average</span><br><span class="hljs-type">Liming</span>  <span class="hljs-number">87.66</span><br><span class="hljs-type">Sc</span>      <span class="hljs-number">85.66</span><br><span class="hljs-type">Tg</span>      <span class="hljs-number">91.66</span><br><span class="hljs-number">111111111</span><br></code></pre></td></tr></table></figure><p>假设我想看看平均成绩大于等于 87 分的学员是谁</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># cat student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>1       Liming <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       Sc     <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Tg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br>[root@localhost ~]<span class="hljs-comment"># cat student.txt | grep -v &quot;Name&quot; | awk &#x27;$6 &gt;= 87&#123;print $2&#125;&#x27;</span><br>Liming<br>Tg<br><br></code></pre></td></tr></table></figure><blockquote><p>加入了条件之后，只有条件成立动作才会执行，如果条件不满足，则动作则不运行。通过这个实验，大家可以发现，虽然 awk 是列提取命令，但是也要按行来读入的。这个命令的执行过程是这样的：</p><p>1） 如果有 BEGIN 条件，则先执行 BEGIN 定义的动作</p><p>2） 如果没有 BEGIN 条件，则读入第一行，把第一行的数据依次赋予$0、$1、$2 等变量。其中$0代表此行的整体数据，$1 代表第一字段，$2 代表第二字段。</p><p>3） 依据条件类型判断动作是否执行。如果条件符合，则执行动作，否则读入下一行数据。如果没有条件，则每行都执行动作。</p><p>4） 读入下一行数据，重复执行以上步骤。</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs swift">例子 <span class="hljs-number">2</span>：<br>[root<span class="hljs-meta">@localhost</span> <span class="hljs-operator">~</span>]# awk &#x27;<span class="hljs-variable">$2</span> <span class="hljs-operator">~</span> <span class="hljs-operator">/</span><span class="hljs-type">Sc</span><span class="hljs-operator">/</span> &#123;printf <span class="hljs-variable">$6</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span>&#125;&#x27; student.txt<br>#如果第二字段中输入包含有“<span class="hljs-type">Sc</span>”字符，则打印第六字段数据<br><span class="hljs-number">85.66</span><br></code></pre></td></tr></table></figure><p>这里要注意在 awk 中，使用“&#x2F;&#x2F;”包含的字符串，awk 命令才会查找。也就是说字符串必须用“&#x2F;&#x2F;”包含，awk 命令才能正确识别。<br>如果要想让 awk 识别字符串，必须使用“&#x2F;&#x2F;”包含，例如：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># awk &#x27;/Liming/ &#123;print&#125;&#x27; student.txt</span><br>1       Liming <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br><span class="hljs-comment">#打印 Liming 的成绩</span><br></code></pre></td></tr></table></figure><p>当使用 df 命令查看分区使用情况是，如果我只想查看真正的系统分区的使用状况，而不想查看光盘和临时分区的使用状况，则可以：</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@localhost</span> <span class="hljs-operator">~</span>]# df <span class="hljs-operator">-</span>h <span class="hljs-operator">|</span> awk &#x27;<span class="hljs-operator">/</span>sda[<span class="hljs-number">0</span><span class="hljs-operator">-</span><span class="hljs-number">9</span>]<span class="hljs-operator">/</span> &#123;printf <span class="hljs-variable">$1</span> <span class="hljs-string">&quot;<span class="hljs-subst">\t</span>&quot;</span> <span class="hljs-variable">$5</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span>&#125; &#x27;<br><span class="hljs-operator">/</span>dev<span class="hljs-operator">/</span>sda1       <span class="hljs-number">14</span><span class="hljs-operator">%</span><br>#查询包含有 sda 数字的行，并打印第一字段和第五字段<br></code></pre></td></tr></table></figure><p>查看&#x2F;etc&#x2F;passwd文件</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs ruby">[root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment"># useradd user1</span><br>[root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment"># useradd user2</span><br>[root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment"># cat /etc/passwd | grep &quot;/bin/bash&quot;</span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">user1:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1000</span><span class="hljs-symbol">:</span><span class="hljs-number">1000</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/user1</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">user2:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1001</span><span class="hljs-symbol">:</span><span class="hljs-number">1001</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/user2</span><span class="hljs-symbol">:/bin/bash</span><br>[root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment"># cat /etc/passwd | grep &quot;/bin/bash&quot; |  awk &#x27;&#123;FS=&quot;:&quot;&#125; &#123;print $1&#125;&#x27;</span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br>user1<br>user2<br><span class="hljs-comment">#第一行root好像没有以冒号为分割读取第一列</span><br>是因为awk 先把第一行数据读取了<br>才进行&#123;<span class="hljs-variable constant_">FS</span>=<span class="hljs-string">&quot;:&quot;</span>&#125;<br>直到上一步之后，才发现要以冒号作为分隔符<br>后面的user1 user2 才正常<br><span class="hljs-comment">###所以正确写法是BEGIN &#123;FS=&quot;:&quot;&#125;  在读取数据之前，先执行&#123;FS=&quot;:&quot;&#125;</span><br>[root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment"># cat /etc/passwd | grep &quot;/bin/bash&quot; |  awk &#x27;BEGIN &#123;FS=&quot;:&quot;&#125; &#123;print $1&#125;&#x27;</span><br>root<br>user1<br>user2<br></code></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@localhost</span> <span class="hljs-operator">~</span>]# cat <span class="hljs-operator">/</span>etc<span class="hljs-operator">/</span>passwd <span class="hljs-operator">|</span> grep <span class="hljs-string">&quot;/bin/bash&quot;</span> <span class="hljs-operator">|</span> awk &#x27;<span class="hljs-type">BEGIN</span>&#123;<span class="hljs-type">FS</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;:&quot;</span>&#125; <span class="hljs-variable">$3</span><span class="hljs-operator">==</span><span class="hljs-string">&quot;1000&quot;</span> &#123;print <span class="hljs-variable">$1</span>&#125;&#x27;<br>user1<br>判断是否相等 要用双＝号<br></code></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs swift">[root<span class="hljs-meta">@localhost</span> <span class="hljs-operator">~</span>]# cat <span class="hljs-operator">/</span>etc<span class="hljs-operator">/</span>passwd <span class="hljs-operator">|</span> grep <span class="hljs-string">&quot;/bin/bash&quot;</span> <span class="hljs-operator">|</span> \<br><span class="hljs-operator">&gt;</span> awk &#x27;<span class="hljs-type">BEGIN</span> &#123;<span class="hljs-type">FS</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;:&quot;</span>&#125; &#123;printf <span class="hljs-variable">$1</span> <span class="hljs-string">&quot;<span class="hljs-subst">\t</span>&quot;</span> <span class="hljs-variable">$3</span> <span class="hljs-string">&quot;<span class="hljs-subst">\t</span> 行号：&quot;</span> <span class="hljs-type">NR</span> <span class="hljs-string">&quot;<span class="hljs-subst">\t</span> 字段数：&quot;</span> <span class="hljs-type">NF</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span>&#125;&#x27;<br>root    <span class="hljs-number">0</span>        行号：<span class="hljs-number">1</span>         字段数：<span class="hljs-number">7</span><br>user1   <span class="hljs-number">1000</span>     行号：<span class="hljs-number">2</span>         字段数：<span class="hljs-number">7</span><br>user2   <span class="hljs-number">1001</span>     行号：<span class="hljs-number">3</span>         字段数：<span class="hljs-number">7</span><br><br>#如果我只想看sshd<br>[root<span class="hljs-meta">@localhost</span> <span class="hljs-operator">~</span>]# cat <span class="hljs-operator">/</span>etc<span class="hljs-operator">/</span>passwd <span class="hljs-operator">|</span> awk &#x27;<span class="hljs-type">BEGIN</span> &#123;<span class="hljs-type">FS</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;:&quot;</span>&#125; <span class="hljs-variable">$1</span><span class="hljs-operator">==</span><span class="hljs-string">&quot;sshd&quot;</span> &#123;printf <span class="hljs-variable">$1</span> <span class="hljs-string">&quot;<span class="hljs-subst">\t</span>&quot;</span> <span class="hljs-variable">$3</span> <span class="hljs-string">&quot;<span class="hljs-subst">\t</span> 行号：&quot;</span><span class="hljs-type">NR</span> <span class="hljs-string">&quot;<span class="hljs-subst">\t</span> 字段数：&quot;</span><span class="hljs-type">NF</span> <span class="hljs-string">&quot;<span class="hljs-subst">\n</span>&quot;</span>&#125;&#x27;<br>sshd    <span class="hljs-number">74</span>       行号：<span class="hljs-number">20</span>        字段数：<span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><h2 id="Sed"><a href="#Sed" class="headerlink" title="Sed"></a>Sed</h2><p>sed命令</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[root@localhost ~]<span class="hljs-comment"># sed [选项] ‘[动作]’ 文件名</span><br>选项：<br>-n：  一般 sed 命令会把所有数据都输出到屏幕，如果加入此选择，则只会把经过 sed 命令处理的行输出到屏幕。<br>-e：允许对输入数据应用多条 sed 命令编辑。<br>-f     脚本文件名： 从 sed 脚本中读入 sed 操作。和 awk 命令的-f 非常类似。<br>-r：在 sed 中支持扩展正则表达式。<br>-i：用 sed 的修改结果直接修改读取数据的文件，而不是由屏幕输出动作：<br>a <span class="hljs-string">\：</span> 追加，在当前行后添加一行或多行。添加多行时，除最后 一行外，<br>每行末尾需要用“<span class="hljs-string">\”代表数据未完结。</span><br>c <span class="hljs-string">\：</span> 行替换，用 c 后面的字符串替换原数据行，替换多行时，除最后一行外，每行末尾需用“<span class="hljs-string">\”代表数据未完结。</span><br>i <span class="hljs-string">\：插入，在当期行前插入一行或多行。插入多行时，除最后</span> 一行外，每行末尾需要用“<span class="hljs-string">\”代表数据未完结。</span><br>d：删除，删除指定的行。<br></code></pre></td></tr></table></figure><p>打印p</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># sed 2p student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>1       Liming <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>1       Liming <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       Sc     <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Tg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br><span class="hljs-comment">#你会发现第二行多打印了一遍，只有加-n才不会</span><br>[root@localhost ~]<span class="hljs-comment"># sed -n &#x27;2p&#x27; student.txt</span><br>1       Liming <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br></code></pre></td></tr></table></figure><p>删除d（删除2到4行）</p><p>此操作并不会写入文件中，只是输出的时候删除了</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># sed &#x27;2,4d&#x27; student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>[root@localhost ~]<span class="hljs-comment"># cat student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>1       Liming <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       Sc     <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Tg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br>若想直接修改读取数据到文件的话加入 -i<br>[root@localhost ~]<span class="hljs-comment"># sed -i &#x27;2,4d&#x27; student.txt</span><br>[root@localhost ~]<span class="hljs-comment"># cat student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br><br></code></pre></td></tr></table></figure><p>前追加i</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tap"><span class="hljs-comment">#在第二行前面插入内容</span><br>[root@localhost ~]<span class="hljs-comment"># sed &#x27;2i 前面新内容1  \</span><br>&gt; 前面新内容（大量）<span class="hljs-number"> 2222222222222222222 </span>&#x27; student.txt<br>ID      Name    PHP     Linux   MySQL   Average<br>前面新内容1<br>前面新内容（大量） 2222222222222222222<br>1       Liming <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       Sc     <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Tg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br></code></pre></td></tr></table></figure><p>后追加a</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tap">在第二行后追加内容<br>[root@localhost ~]<span class="hljs-comment"># sed -i &#x27;2a 新内容&#x27; student.txt</span><br>[root@localhost ~]<span class="hljs-comment"># cat student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>1       Liming <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>新内容<br>2       Sc     <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Tg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br></code></pre></td></tr></table></figure><p>替换c</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs tap"><span class="hljs-comment">#把2行新内容替换为其他数据</span><br>[root@localhost ~]<span class="hljs-comment"># cat student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>1       Liming <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       Sc     <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Tg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br>[root@localhost ~]<span class="hljs-comment"># sed &#x27;2c 0 xiaoshan 83 55 11 44.2&#x27; student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>0 xiaoshan<span class="hljs-number"> 83 </span>55<span class="hljs-number"> 11 </span>44.2<br>2       Sc     <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Tg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br><span class="hljs-comment">#我前面是空格，若对齐用\t且\t后没有空格</span><br>[root@localhost ~]<span class="hljs-comment"># sed &#x27;2c 0 \txiaos\t83 \t55 \t11 \t44.2&#x27; student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>0       xiaos  <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 55 </span>    <span class="hljs-number"> 11 </span>     44.2<br>2       Sc     <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Tg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br></code></pre></td></tr></table></figure><p>多命令执行e</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># cat student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>前面新内容1<br>前面新内容1<br>1       Liming <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       Sc     <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Tg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br><span class="hljs-comment">##同时删除第二和第三行</span><br>[root@localhost ~]<span class="hljs-comment"># sed  -i -e &#x27;2d;3d&#x27; student.txt</span><br>[root@localhost ~]<span class="hljs-comment"># cat student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>1       Liming <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       Sc     <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Tg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br></code></pre></td></tr></table></figure><p>替换字符串 s&#x2F;旧内容&#x2F;新内容&#x2F;g</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs tap"><span class="hljs-comment">#替换Liming为Lm</span><br>[root@localhost ~]<span class="hljs-comment"># sed -i &#x27;s/Liming/Lm/g&#x27; student.txt</span><br>[root@localhost ~]<span class="hljs-comment"># cat student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>1       Lm     <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       Sc     <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Tg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br><span class="hljs-comment">#多命令执行，分号隔开</span><br>[root@localhost ~]<span class="hljs-comment"># sed -i &#x27;s/Sc/sc1/g; s/Tg/Eg/g&#x27; student.txt</span><br>[root@localhost ~]<span class="hljs-comment"># cat student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>1       Lm     <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       sc1    <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Eg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br><span class="hljs-comment">#也可以多行执行</span><br>[root@localhost ~]<span class="hljs-comment"># sed -i &#x27;s/Sc/sc1/g</span><br>s/Tg/Eg/g&#x27; student.txt<br><span class="hljs-comment">#替换字符串为空值</span><br>[root@localhost ~]<span class="hljs-comment"># sed -i &#x27;s/Lm//g&#x27; student.txt</span><br>[root@localhost ~]<span class="hljs-comment"># cat student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>1                <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       sc1    <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Eg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br><br></code></pre></td></tr></table></figure><h2 id="字符串处理命令"><a href="#字符串处理命令" class="headerlink" title="字符串处理命令"></a>字符串处理命令</h2><p>sort排序命令</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ldif">[root@localhost ~]<span class="hljs-comment"># sort [选项] 文件名选项：</span><br><span class="hljs-literal">-</span>f：忽略大小写<br><span class="hljs-literal">-</span>b：忽略每行前面的空白部分<br><span class="hljs-literal">-</span>n：以数值型进行排序，默认使用字符串型排序<br><span class="hljs-literal">-</span>r：反向排序<br><span class="hljs-literal">-</span>u：删除重复行。就是 uniq 命令<br><span class="hljs-literal">-</span>t：指定分隔符，默认是分隔符是制表符<br><span class="hljs-literal">-</span>k n[,m]： 按照指定的字段范围排序。从第 n 字段开始，m 字段结束（默认到行尾）<br></code></pre></td></tr></table></figure><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-comment">#默认按开头字符排序</span><br>[root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment"># sort /etc/passwd</span><br><span class="hljs-symbol">abrt:</span><span class="hljs-symbol">x:</span><span class="hljs-number">173</span><span class="hljs-symbol">:</span><span class="hljs-number">173</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/etc/abrt</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">adm:</span><span class="hljs-symbol">x:</span><span class="hljs-number">3</span><span class="hljs-symbol">:</span><span class="hljs-number">4</span><span class="hljs-symbol">:adm</span><span class="hljs-symbol">:/var/adm</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">bin:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1</span><span class="hljs-symbol">:</span><span class="hljs-number">1</span><span class="hljs-symbol">:bin</span><span class="hljs-symbol">:/bin</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">chrony:</span><span class="hljs-symbol">x:</span><span class="hljs-number">997</span><span class="hljs-symbol">:</span><span class="hljs-number">995</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/var/lib/chrony</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-comment">#反向排序</span><br>[root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment"># sort -r /etc/passwd</span><br><span class="hljs-symbol">user2:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1001</span><span class="hljs-symbol">:</span><span class="hljs-number">1001</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/user2</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">user1:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1000</span><span class="hljs-symbol">:</span><span class="hljs-number">1000</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/user1</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">tcpdump:</span><span class="hljs-symbol">x:</span><span class="hljs-number">72</span><span class="hljs-symbol">:</span><span class="hljs-number">72</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/</span><span class="hljs-symbol">:/sbin/nologin</span><br>systemd-<span class="hljs-symbol">network:</span><span class="hljs-symbol">x:</span><span class="hljs-number">192</span><span class="hljs-symbol">:</span><span class="hljs-number">192</span><span class="hljs-symbol">:systemd</span> <span class="hljs-title class_">Network</span> <span class="hljs-title class_">Management</span><span class="hljs-symbol">:/</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">sync:</span><span class="hljs-symbol">x:</span><span class="hljs-number">5</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:sync</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/bin/sync</span><br></code></pre></td></tr></table></figure><p>指定字段排序</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-comment">#如UID</span><br>[root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment"># sort -t &quot;:&quot; -k 3,3 /etc/passwd</span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">bin:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1</span><span class="hljs-symbol">:</span><span class="hljs-number">1</span><span class="hljs-symbol">:bin</span><span class="hljs-symbol">:/bin</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">user1:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1000</span><span class="hljs-symbol">:</span><span class="hljs-number">1000</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/user1</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">user2:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1001</span><span class="hljs-symbol">:</span><span class="hljs-number">1001</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/home/user2</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">operator:</span><span class="hljs-symbol">x:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:operator</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">games:</span><span class="hljs-symbol">x:</span><span class="hljs-number">12</span><span class="hljs-symbol">:</span><span class="hljs-number">100</span><span class="hljs-symbol">:games</span><span class="hljs-symbol">:/usr/games</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">ftp:</span><span class="hljs-symbol">x:</span><span class="hljs-number">14</span><span class="hljs-symbol">:</span><span class="hljs-number">50</span><span class="hljs-symbol">:FTP</span> <span class="hljs-title class_">User</span><span class="hljs-symbol">:/var/ftp</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">abrt:</span><span class="hljs-symbol">x:</span><span class="hljs-number">173</span><span class="hljs-symbol">:</span><span class="hljs-number">173</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:/etc/abrt</span><span class="hljs-symbol">:/sbin/nologin</span><br>systemd-<span class="hljs-symbol">network:</span><span class="hljs-symbol">x:</span><span class="hljs-number">192</span><span class="hljs-symbol">:</span><span class="hljs-number">192</span><span class="hljs-symbol">:systemd</span> <span class="hljs-title class_">Network</span> <span class="hljs-title class_">Management</span><span class="hljs-symbol">:/</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">daemon:</span><span class="hljs-symbol">x:</span><span class="hljs-number">2</span><span class="hljs-symbol">:</span><span class="hljs-number">2</span><span class="hljs-symbol">:daemon</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">adm:</span><span class="hljs-symbol">x:</span><span class="hljs-number">3</span><span class="hljs-symbol">:</span><span class="hljs-number">4</span><span class="hljs-symbol">:adm</span><span class="hljs-symbol">:/var/adm</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-comment">#你会发现他先排第一位数字1，再排2。、</span><br><span class="hljs-comment">#就是1  12  13  到  2  22 23 并没有123456排下去</span><br><span class="hljs-comment">#所以要加上 -n    -n：以数值型进行排序，默认使用字符串型排序</span><br>[root<span class="hljs-variable">@localhost</span> ~]<span class="hljs-comment"># sort -nt &quot;:&quot; -k 3,3 /etc/passwd</span><br><span class="hljs-symbol">root:</span><span class="hljs-symbol">x:</span><span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:root</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/bin/bash</span><br><span class="hljs-symbol">bin:</span><span class="hljs-symbol">x:</span><span class="hljs-number">1</span><span class="hljs-symbol">:</span><span class="hljs-number">1</span><span class="hljs-symbol">:bin</span><span class="hljs-symbol">:/bin</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">daemon:</span><span class="hljs-symbol">x:</span><span class="hljs-number">2</span><span class="hljs-symbol">:</span><span class="hljs-number">2</span><span class="hljs-symbol">:daemon</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">adm:</span><span class="hljs-symbol">x:</span><span class="hljs-number">3</span><span class="hljs-symbol">:</span><span class="hljs-number">4</span><span class="hljs-symbol">:adm</span><span class="hljs-symbol">:/var/adm</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">lp:</span><span class="hljs-symbol">x:</span><span class="hljs-number">4</span><span class="hljs-symbol">:</span><span class="hljs-number">7</span><span class="hljs-symbol">:lp</span><span class="hljs-symbol">:/var/spool/lpd</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">sync:</span><span class="hljs-symbol">x:</span><span class="hljs-number">5</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:sync</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/bin/sync</span><br><span class="hljs-symbol">shutdown:</span><span class="hljs-symbol">x:</span><span class="hljs-number">6</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:shutdown</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/sbin/shutdown</span><br><span class="hljs-symbol">halt:</span><span class="hljs-symbol">x:</span><span class="hljs-number">7</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:halt</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/sbin/halt</span><br><span class="hljs-symbol">mail:</span><span class="hljs-symbol">x:</span><span class="hljs-number">8</span><span class="hljs-symbol">:</span><span class="hljs-number">12</span><span class="hljs-symbol">:mail</span><span class="hljs-symbol">:/var/spool/mail</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">operator:</span><span class="hljs-symbol">x:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span><span class="hljs-symbol">:operator</span><span class="hljs-symbol">:/root</span><span class="hljs-symbol">:/sbin/nologin</span><br><span class="hljs-symbol">games:</span><span class="hljs-symbol">x:</span><span class="hljs-number">12</span><span class="hljs-symbol">:</span><span class="hljs-number">100</span><span class="hljs-symbol">:games</span><span class="hljs-symbol">:/usr/games</span><span class="hljs-symbol">:/sbin/nologin</span><br></code></pre></td></tr></table></figure><p>uniq取消重复行</p><p>uniq 命令是用来取消重复行的命令，其实和“sort -u”选项是一样的。命令格式如下</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[root@localhost ~]</span># uniq <span class="hljs-selector-attr">[选项]</span> 文件名选项：<br>-<span class="hljs-selector-tag">i</span>：忽略大小写<br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># cat student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>1              <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>1              <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       sc1    <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Eg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br>[root@localhost ~]<span class="hljs-comment"># uniq student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>1              <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       sc1    <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Eg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br></code></pre></td></tr></table></figure><p>wc统计命令</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ldif">[root@localhost ~]<span class="hljs-comment"># wc [选项] 文件名选项：</span><br><span class="hljs-literal">-</span>l：只统计行数<br><span class="hljs-literal">-</span>w：只统计单词数<br><span class="hljs-literal">-</span>m：只统计字符数<br></code></pre></td></tr></table></figure><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># cat student.txt</span><br>ID      Name    PHP     Linux   MySQL   Average<br>1              <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>1              <span class="hljs-number"> 82 </span>    <span class="hljs-number"> 95 </span>    <span class="hljs-number"> 86 </span>     87.66<br>2       sc1    <span class="hljs-number"> 74 </span>    <span class="hljs-number"> 96 </span>    <span class="hljs-number"> 87 </span>     85.66<br>3       Eg     <span class="hljs-number"> 99 </span>    <span class="hljs-number"> 83 </span>    <span class="hljs-number"> 93 </span>     91.66<br>[root@localhost ~]<span class="hljs-comment"># wc -l student.txt</span><br>5 student.txt<br>[root@localhost ~]<span class="hljs-comment"># wc -w student.txt</span><br>28 student.txt<br>[root@localhost ~]<span class="hljs-comment"># wc -m student.txt</span><br>109 student.txt<br><br></code></pre></td></tr></table></figure><h2 id="条件判断（test命令）"><a href="#条件判断（test命令）" class="headerlink" title="条件判断（test命令）"></a>条件判断（test命令）</h2><ol><li>按照文件类型进行判断(test)</li></ol><table><thead><tr><th>测试选项</th><th>作用</th></tr></thead><tbody><tr><td>-b 文件</td><td>判断该文件是否存在，并且是否为块设备文件（是块设备文件为真）</td></tr><tr><td>-c 文件</td><td>判断该文件是否存在，并且是否为字符设备文件（是字符设备文件为真）</td></tr><tr><td>-d 文件</td><td>判断该文件是否存在，并且是否为目录文件（是目录为真）</td></tr><tr><td>-e 文件</td><td>判断该文件是否存在（存在为真）</td></tr><tr><td>-f 文件</td><td>判断该文件是否存在，并且是否为普通文件（是普通文件为真）</td></tr><tr><td>-L 文件</td><td>判断该文件是否存在，并且是否为符号链接文件（是符号链接文件为真）</td></tr><tr><td>-p 文件</td><td>判断该文件是否存在，并且是否为管道文件（是管道文件为真）</td></tr><tr><td>-s 文件</td><td>判断该文件是否存在，并且是否为非空（非空为真）</td></tr><tr><td>-S 文件</td><td>判断该文件是否存在，并且是否为套接字文件（是套接字文件为真）</td></tr></tbody></table><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># ls</span><br>anaconda-ks.cfg  file.txt  file.txtn  netstart.bak  student.txt<br>第一种格式：<span class="hljs-meta">#-e 判断该文件是否存在（存在为真）</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># test -e file.txt</span><br><span class="hljs-meta">#输出为0即为真</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># echo $?</span><br><span class="hljs-number">0</span><br>第一种格式：<span class="hljs-meta">#-e 判断不存在的文件</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># [ -e abc ]</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># echo $?</span><br><span class="hljs-number">1</span><br><span class="hljs-meta">#输出为非0即为假</span><br></code></pre></td></tr></table></figure><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs clean">###判断该文件是否存在，并且是否为目录文件<br>[root@localhost ~]# [ -d student.txt ] &amp;&amp; echo yes || echo no<br>no<br>###判断该文件是否存在，并且是否为普通文件<br>[root@localhost ~]# [ -f student.txt ] &amp;&amp; echo yes || echo no<br>yes<br><br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vim">###判断文件是否有数据<br>[root@localhost ~]# [ -s <span class="hljs-keyword">abc</span> ] &amp;&amp; <span class="hljs-keyword">echo</span> yes || <span class="hljs-keyword">echo</span> <span class="hljs-keyword">no</span><br><span class="hljs-keyword">no</span><br>[root@localhost ~]# <span class="hljs-keyword">echo</span> <span class="hljs-number">111</span> &gt;&gt; <span class="hljs-keyword">abc</span><br>[root@localhost ~]# [ -s <span class="hljs-keyword">abc</span> ] &amp;&amp; <span class="hljs-keyword">echo</span> yes || <span class="hljs-keyword">echo</span> <span class="hljs-keyword">no</span><br>yes<br></code></pre></td></tr></table></figure><ol start="2"><li>按照文件权限判断</li></ol><table><thead><tr><th>测试选项</th><th>作    用</th></tr></thead><tbody><tr><td>-r 文件</td><td>判断该文件是否存在，并且是否该文件拥有读权限（有读权限为真）</td></tr><tr><td>-w 文件</td><td>判断该文件是否存在，并且是否该文件拥有写权限（有写权限为真）</td></tr><tr><td>-x 文件</td><td>判断该文件是否存在，并且是否该文件拥有执行权限（有执行权限为真）</td></tr><tr><td>-u 文件</td><td>判断该文件是否存在，并且是否该文件拥有  SUID 权限（有 SUID 权限为真）</td></tr><tr><td>-g 文件</td><td>判断该文件是否存在，并且是否该文件拥有  SGID 权限（有 SGID 权限为真）</td></tr><tr><td>-k 文件</td><td>判断该文件是否存在，并且是否该文件拥有  SBit 权限（有 SBit 权限为真）</td></tr></tbody></table><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vim">##判断文件是否有写的权限<br>[root@localhost ~]# [ -<span class="hljs-keyword">w</span> <span class="hljs-keyword">abc</span> ] &amp;&amp; <span class="hljs-keyword">echo</span> yes || <span class="hljs-keyword">echo</span> <span class="hljs-keyword">no</span><br>yes<br>[root@localhost ~]# [ -<span class="hljs-keyword">u</span> <span class="hljs-keyword">abc</span> ] &amp;&amp; <span class="hljs-keyword">echo</span> yes || <span class="hljs-keyword">echo</span> <span class="hljs-keyword">no</span><br><span class="hljs-keyword">no</span><br>##判断文件是否有SUID的权限<br>[root@localhost ~]# chmod <span class="hljs-keyword">u</span>+s <span class="hljs-keyword">abc</span><br>[root@localhost ~]# [ -<span class="hljs-keyword">u</span> <span class="hljs-keyword">abc</span> ] &amp;&amp; <span class="hljs-keyword">echo</span> yes || <span class="hljs-keyword">echo</span> <span class="hljs-keyword">no</span><br>yes<br>[root@localhost ~]# <span class="hljs-keyword">ll</span><br>total <span class="hljs-number">24</span><br>-rwSr--r--  <span class="hljs-number">1</span> root root    <span class="hljs-number">4</span> May  <span class="hljs-number">2</span> <span class="hljs-number">03</span>:<span class="hljs-number">02</span> <span class="hljs-keyword">abc</span><br><br></code></pre></td></tr></table></figure><ol start="3"><li>两个文件之间进行比较</li></ol><table><thead><tr><th align="left">测试选项</th><th>作    用</th></tr></thead><tbody><tr><td align="left">文件 1 -nt 文件 2</td><td>判断文件 1 的修改时间是否比文件 2 的新（如果新则为真）</td></tr><tr><td align="left">文件 1 -ot 文件 2</td><td>判断文件 1 的修改时间是否比文件 2 的旧（如果旧则为真）</td></tr><tr><td align="left">文件 1 -ef 文件 2</td><td>判断文件 1 是否和文件 2 的 Inode 号一致，可以理解为两个文件是否  为同一个文件。这个判断用于判断硬链接是很好的方法</td></tr></tbody></table><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gradle">##判断两个文件是否是硬链接<br>[root@localhost ~]# ln <span class="hljs-regexp">/root/</span>abc <span class="hljs-regexp">/tmp/</span>abc<br>[root@localhost ~]# ll <span class="hljs-regexp">/tmp/</span>abc<br>-rw-r--r-- <span class="hljs-number">2</span> root root <span class="hljs-number">4</span> May  <span class="hljs-number">2</span> <span class="hljs-number">03</span>:<span class="hljs-number">02</span> <span class="hljs-regexp">/tmp/</span>abc<br><br>[root@localhost ~]# [ <span class="hljs-regexp">/root/</span>abc -ef <span class="hljs-regexp">/tmp/</span>abc ] &amp;&amp; echo yes || echo no<br>yes<br><br></code></pre></td></tr></table></figure><ol start="4"><li>两个整数之间比较</li></ol><table><thead><tr><th>测试选项</th><th>作    用</th></tr></thead><tbody><tr><td>整数 1 -eq 整数 2</td><td>判断整数 1 是否和整数 2 相等（相等为真）</td></tr><tr><td>整数 1 -ne 整数 2</td><td>判断整数 1 是否和整数 2 不相等（不相等位置）</td></tr><tr><td>整数 1 -gt 整数 2</td><td>判断整数 1 是否大于整数 2（大于为真）</td></tr><tr><td>整数 1 -lt 整数 2</td><td>判断整数 1 是否小于整数 2（小于位置）</td></tr><tr><td>整数 1 -ge 整数 2</td><td>判断整数 1 是否大于等于整数 2（大于等于为真）</td></tr><tr><td>整数 1 -le 整数 2</td><td>判断整数 1 是否小于等于整数 2（小于等于为真）</td></tr></tbody></table><p>-eq: equal : 相等               -ne: not equal : 不相等</p><p>-gt: greater than : 大于       -lt: less than : 小于</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs gams">##判断整数<span class="hljs-number">1</span>是否等于整数<span class="hljs-number">2</span><br>[root@localhost ~]# [ <span class="hljs-number">22</span> -<span class="hljs-keyword">eq</span> <span class="hljs-number">22</span> ] &amp;&amp; echo <span class="hljs-keyword">yes</span> || echo <span class="hljs-keyword">no</span><br><span class="hljs-keyword">yes</span><br>##判断整数<span class="hljs-number">1</span>是否小于整数<span class="hljs-number">2</span><br>[root@localhost ~]# [ <span class="hljs-number">22</span> -<span class="hljs-keyword">lt</span> <span class="hljs-number">22</span> ] &amp;&amp; echo <span class="hljs-keyword">yes</span> || echo <span class="hljs-keyword">no</span><br><span class="hljs-keyword">no</span><br>[root@localhost ~]# [ <span class="hljs-number">21</span> -<span class="hljs-keyword">lt</span> <span class="hljs-number">22</span> ] &amp;&amp; echo <span class="hljs-keyword">yes</span> || echo <span class="hljs-keyword">no</span><br><span class="hljs-keyword">yes</span><br><br></code></pre></td></tr></table></figure><ol start="5"><li>字符串判断</li></ol><table><thead><tr><th>测试选项</th><th>作    用</th></tr></thead><tbody><tr><td>-z 字符串</td><td>判断字符串是否为空（为空返回真）</td></tr><tr><td>-n 字符串</td><td>判断字符串是否为非空（非空返回真）</td></tr><tr><td>字串 1 &#x3D;&#x3D;字串 2</td><td>判断字符串  1 是否和字符串 2 相等（相等返回真）</td></tr><tr><td>字串 1 !&#x3D; 字串 2</td><td>判断字符串  1 是否和字符串 2 不相等（不相等返回真）</td></tr></tbody></table><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">##判断两个字符串相等</span><br>[root@localhost ~]# <span class="hljs-attribute">aa</span>=11<br>[root@localhost ~]# <span class="hljs-attribute">bb</span>=22<br>[root@localhost ~]# [ <span class="hljs-string">&quot;<span class="hljs-variable">$aa</span>&quot;</span> == 8 ] &amp;&amp; echo <span class="hljs-literal">yes</span> || echo <span class="hljs-literal">no</span><br><span class="hljs-literal">no</span><br>[root@localhost ~]# [ <span class="hljs-variable">$aa</span> == <span class="hljs-variable">$bb</span> ] &amp;&amp; echo <span class="hljs-literal">yes</span> || echo <span class="hljs-literal">no</span><br><span class="hljs-literal">no</span><br>[root@localhost ~]# [ <span class="hljs-string">&quot;<span class="hljs-variable">$aa</span>&quot;</span> == 11 ] &amp;&amp; echo <span class="hljs-literal">yes</span> || echo <span class="hljs-literal">no</span><br><span class="hljs-literal">yes</span><br><span class="hljs-comment">##判断字符是否为空</span><br>[root@localhost ~]# <span class="hljs-attribute">name</span>=xx<br>[root@localhost ~]# [ -z <span class="hljs-variable">$name</span> ] &amp;&amp; echo <span class="hljs-literal">yes</span> || echo <span class="hljs-literal">no</span><br><span class="hljs-literal">no</span><br></code></pre></td></tr></table></figure><ol start="6"><li>多重条件判断</li></ol><table><thead><tr><th>测试选项</th><th>作    用</th></tr></thead><tbody><tr><td>判断 1 -a 判断 2</td><td>逻辑与，判断  1 和判断 2 都成立，最终的结果才为真</td></tr><tr><td>判断 1 -o 判断 2</td><td>逻辑或，判断  1 和判断 2 有一个成立，最终的结果就为真</td></tr><tr><td>！判断</td><td>逻辑非，使原始的判断式取反</td></tr></tbody></table><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#先给aa赋值</span><br>[root@localhost ~]# <span class="hljs-attribute">aa</span>=24<br><span class="hljs-comment">#-n先判断是否为空，明显不为空则为真，真就继续判断是否大于23</span><br>[root@localhost ~]# [ -n <span class="hljs-string">&quot;<span class="hljs-variable">$aa</span>&quot;</span> -a <span class="hljs-string">&quot;<span class="hljs-variable">$aa</span>&quot;</span> -gt 23 ] &amp;&amp; echo <span class="hljs-literal">yes</span> || echo <span class="hljs-literal">no</span><br><span class="hljs-literal">yes</span><br></code></pre></td></tr></table></figure><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-meta">##逻辑非</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># [ ! -n <span class="hljs-string">&quot;$aa&quot;</span> ] &amp;&amp; echo <span class="hljs-string">&quot;yes&quot;</span> || echo <span class="hljs-string">&quot;no&quot;</span></span><br>no<br><span class="hljs-meta">#本来“-n”选项是变量 aa 不为空，返回值就是真。</span><br><span class="hljs-meta">#加入！之后，判断值就会取反，所以当变量 aa 有值时，返回值是假</span><br><br></code></pre></td></tr></table></figure><h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="if条件判断"><a href="#if条件判断" class="headerlink" title="if条件判断"></a>if条件判断</h3><ol><li>单分支 if 条件语句</li></ol><p>单分支条件语句最为简单，就是只有一个判断条件，如果符合条件则执行某个程序，否则什么事情都不做。语法如下：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">if</span> [ 条件判断式 ];<span class="hljs-attribute">then</span><br>     程序<br>fi<br></code></pre></td></tr></table></figure><p>单分支条件语句需要注意几个点：</p><p>·if 语句使用 fi 结尾，和一般语言使用大括号结尾不同</p><p>· [ 条件判断式 ]就是使用 test 命令判断，所以中括号和条件判断式之间必须有空格</p><p>· then 后面跟符合条件之后执行的程序，可以放在[]之后，用“；”分割。也可以换行写入，就不需要“；”了，比如单分支 if 语句还可以这样写：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ 条件判断式 ]<br>   <span class="hljs-keyword">then</span><br>     程序<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>例子：判断sda1并设置警告信息</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># df -h</span><br>Filesystem               Size  Used Avail Use% Mounted on<br>/dev/sda1               <span class="hljs-number">1014</span>M  <span class="hljs-number">141</span>M  <span class="hljs-number">874</span>M  <span class="hljs-number">14</span>% /boot<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># df -h | grep <span class="hljs-string">&quot;/dev/sda1&quot;</span> | awk <span class="hljs-string">&#x27;&#123;print $5&#125;&#x27;</span> | cut -d <span class="hljs-string">&quot;%&quot;</span> -f 1</span><br><span class="hljs-number">14</span><br><br><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># vi if1.sh</span><br><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-meta">#统计分区使用率</span><br>rate=$(df -h | grep <span class="hljs-string">&quot;/dev/sda1&quot;</span> | awk <span class="hljs-string">&#x27;&#123;print $5&#125;&#x27;</span>| cut -d <span class="hljs-string">&quot;%&quot;</span> -f <span class="hljs-number">1</span>)<br><br><span class="hljs-meta">#把根分区使用率作为变量值赋予变量rate</span><br><span class="hljs-keyword">if</span> [ $rate -ge <span class="hljs-number">14</span> ]<br><span class="hljs-meta">#判断 rate 的值如果大于等于 14，则执行then 程序</span><br><span class="hljs-keyword">then</span><br>echo <span class="hljs-string">&quot;Warning! /dev/sda1 快满了!&quot;</span><br><span class="hljs-meta">#打印警告信息。在实际工作中，也可以向管理员发送邮件。</span><br>fi<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># sh if1.sh</span><br>Warning! /dev/sda1 快满了!<br></code></pre></td></tr></table></figure><ol start="2"><li>双分支if语句</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ 条件判断式 ]<br>       <span class="hljs-keyword">then</span><br>条件成立时，执行的程序<br><span class="hljs-keyword">else</span><br>条件不成立时，执行的另一个程序<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>数据备份的例子</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#备份mysql数据库（并不完善，但可以使用）</span><br>[root@localhost ~]<span class="hljs-comment"># vi sh/bakmysql.sh </span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment">#备份 mysql 数据库。</span><br><span class="hljs-comment">#同步系统时间</span><br>ntpdate asia.pool.ntp.org &amp;&gt;<span class="hljs-regexp">/dev/</span>null<br><span class="hljs-comment">#把当前系统时间按照“年月日”格式赋予变量date</span><br>date=$(date +%y%m%d)<br><span class="hljs-comment">#统计 mysql 数据库的大小，并把大小赋予size 变量</span><br>size=$(du -sh <span class="hljs-regexp">/var/</span>lib/mysql)<br><br><span class="hljs-keyword">if</span> [ -d <span class="hljs-regexp">/tmp/</span>dbbak ]<br>    <span class="hljs-comment">#判断备份目录是否存在，是否为目录</span><br>  then<br>    <span class="hljs-comment">#如果判断为真，执行以下脚本</span><br>echo <span class="hljs-string">&quot;Date : $date!&quot;</span> &gt; <span class="hljs-regexp">/tmp/</span>dbbak/dbinfo.txt<br><span class="hljs-comment">#把当前日期写入临时文件</span><br>echo <span class="hljs-string">&quot;Data size : $size&quot;</span> &gt;&gt; <span class="hljs-regexp">/tmp/</span>dbbak/dbinfo.txt<br><span class="hljs-comment">#把数据库大小写入临时文件</span><br>cd <span class="hljs-regexp">/tmp/</span>dbbak<br><span class="hljs-comment">#进入备份目录</span><br>tar -zcf mysql-lib-<span class="hljs-variable">$date</span>.tar.gz <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/mysql dbinfo.txt &amp;&gt;/</span>dev/null<br><span class="hljs-comment">#打包压缩数据库与临时文件，把所有输出丢入垃圾箱（不想看到任何输出）</span><br>rm -rf <span class="hljs-regexp">/tmp/</span>dbbak/dbinfo.txt<br><span class="hljs-comment">#删除临时文件</span><br>  <span class="hljs-keyword">else</span><br>mkdir <span class="hljs-regexp">/tmp/</span>dbbak<br><span class="hljs-comment">#如果判断为假，则建立备份目录</span><br>echo <span class="hljs-string">&quot;Date : $date!&quot;</span> &gt; <span class="hljs-regexp">/tmp/</span>dbbak<span class="hljs-regexp">/dbinfo.txt echo &quot;Data size : $size&quot; &gt;&gt; /</span>tmp<span class="hljs-regexp">/dbbak/</span>dbinfo.txt <span class="hljs-comment">#把日期和数据库大小保存如临时文件</span><br>cd <span class="hljs-regexp">/tmp/</span>dbbak<br>tar -zcf mysql-lib-<span class="hljs-variable">$date</span>.tar.gz dbinfo.txt <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/mysql &amp;&gt;/</span>dev/null<br><span class="hljs-comment">#压缩备份数据库与临时文件</span><br>rm -rf <span class="hljs-regexp">/tmp/</span>dbbak/dbinfo.txt<br><span class="hljs-comment">#删除临时文件</span><br>fi<br><br></code></pre></td></tr></table></figure><h2 id="常用字符表"><a href="#常用字符表" class="headerlink" title="常用字符表"></a>常用字符表</h2><h3 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h3><p>在 echo 命令中如果使用了“-e”选项，则可以支持控制字符，如表 11-2 所示：</p><table><thead><tr><th>控制字符</th><th>作用</th></tr></thead><tbody><tr><td>\</td><td>输出\本身</td></tr><tr><td>\a</td><td>输出警告音</td></tr><tr><td>\b</td><td>退格键，也就是向左删除键</td></tr><tr><td>\c</td><td>取消输出行末的换行符。和“-n”选项一致</td></tr><tr><td>\e</td><td>ESCAPE 键</td></tr><tr><td>\f</td><td>换页符</td></tr><tr><td>\n</td><td>换行符</td></tr><tr><td>\r</td><td>回车键</td></tr><tr><td>\t</td><td>制表符，也就是 Tab 键</td></tr><tr><td>\v</td><td>垂直制表符</td></tr><tr><td>\0nnn</td><td>按照八进制 ASCII 码表输出字符。其中 0 为数字零，nnn 是三位八进制数</td></tr><tr><td>\xhh</td><td>按照十六进制 ASCII 码表输出字符。其中 hh 是两位十六进制数</td></tr></tbody></table><h3 id="Bash常用快捷键"><a href="#Bash常用快捷键" class="headerlink" title="Bash常用快捷键"></a>Bash常用快捷键</h3><table><thead><tr><th>快捷键</th><th>作用</th></tr></thead><tbody><tr><td>ctrl+A</td><td>把光标移动到命令行开头。如果我们输入的命令过长，想要把光标移动到命令行开头时使用。</td></tr><tr><td>ctrl+E</td><td>把光标移动到命令行结尾。</td></tr><tr><td><strong>ctrl+C</strong></td><td>强制终止当前的命令。</td></tr><tr><td><strong>ctrl+L</strong></td><td>清屏，相当于 clear 命令。</td></tr><tr><td><strong>ctrl+U</strong></td><td>删除或剪切光标之前的命令。我输入了一行很长的命令，不用使用退格键一个一个字符的删除，使用这个快捷键会更加方便</td></tr><tr><td>ctrl+K</td><td>删除或剪切光标之后的内容。</td></tr><tr><td><strong>ctrl+Y</strong></td><td>粘贴 ctrl+U 或 ctrl+K 剪切的内容。</td></tr><tr><td><strong>ctrl+R</strong></td><td>在历史命令中搜索，按下ctrl+R 之后，就会出现搜索界面，只要输入搜索内容，就会从历史命令中搜索。</td></tr></tbody></table><table><thead><tr><th><strong>ctrl+D</strong></th><th>退出当前终端。</th></tr></thead><tbody><tr><td>ctrl+Z</td><td>暂停，并放入后台。这个快捷键牵扯工作管理的内容，我们在系统管理章节详细介绍。</td></tr><tr><td>ctrl+S</td><td>暂停屏幕输出。</td></tr><tr><td>ctrl+Q</td><td>恢复屏幕输出。</td></tr></tbody></table><h3 id="基础正则表达式"><a href="#基础正则表达式" class="headerlink" title="基础正则表达式"></a>基础正则表达式</h3><table><thead><tr><th>元字符</th><th align="left">作用</th></tr></thead><tbody><tr><td>*</td><td align="left">前一个字符匹配 0 次或任意多次。</td></tr><tr><td>.</td><td align="left">匹配除了换行符外任意一个字符。</td></tr><tr><td>^</td><td align="left">匹配行首。例如：^hello 会匹配以 hello 开头的行。</td></tr><tr><td>$</td><td align="left">匹配行尾。例如：hello&amp;会匹配以 hello 结尾的行。</td></tr><tr><td>[]</td><td align="left">匹配中括号中指定的任意一个字符，只匹配一个字符。例如：[aoeiu] 匹配任意一个元音字母，[0-9] 匹配任意一位数字，[a-z][0-9]匹配小写字和一位数字构成的两位字符。</td></tr><tr><td>[^]</td><td align="left">匹配除中括号的字符以外的任意一个字符。例如：[^0-9] 匹配任意一位非数字字符，[^a-z] 表示任意一位非小写字母。</td></tr><tr><td>\</td><td align="left">转义符。用于取消讲特殊符号的含义取消。</td></tr><tr><td>{n}</td><td align="left">表示其前面的字符恰好出现 n 次。例如：[0-9]{4} 匹配 4 位数字，[1][3-8][0-9]{9} 匹配手机号码。</td></tr><tr><td>{n,}</td><td align="left">表示其前面的字符出现不小于 n 次。例如： [0-9]{2,} 表示两位及以上的数字。</td></tr><tr><td>{n,m}</td><td align="left">表示其前面的字符至少出现n 次，最多出现m 次。例如：[a-z]{6,8}匹配 6 到 8 位的小写字母。</td></tr></tbody></table><h3 id="扩展正则-1"><a href="#扩展正则-1" class="headerlink" title="扩展正则"></a>扩展正则</h3><table><thead><tr><th>扩展元字符</th><th>作用</th></tr></thead><tbody><tr><td>+</td><td>前一个字符匹配 1 次或任意多次。如“go+gle”会匹配“gogle”、“google”或“gooogle”，当然如果“o”有更多个，也能匹配。</td></tr><tr><td>？</td><td>前一个字符匹配 0 次或 1 次。如“colou?r”可以匹配“colour”或“color”。</td></tr><tr><td>|</td><td>匹配两个或多个分支选择。如“was|his”会匹配既包含“was”的行，也匹配包含“his”的行。</td></tr><tr><td>（）</td><td>匹配其整体为一个字符，即模式单元。可以理解为由多个单个字符组成的大字符。<br />如“(dog)+”会匹配“dog”、“dogdog”、“dogdogdog”等，因为被（）包含的字符会当成一个整体。但“hello （world|earth）”会匹配“hello world”及“hello earth”。</td></tr></tbody></table><h3 id="grep-参数列表-1"><a href="#grep-参数列表-1" class="headerlink" title="grep 参数列表"></a>grep 参数列表</h3><ol><li><code>-i</code> : 忽略大小写</li><li><code>-v</code> : 查找不包含指定字符串的所有行（取反）</li><li><code>-r</code> : 递归查找文件夹下的文件</li><li><code>-n</code> : 显示匹配行所在位置（行号）</li><li><code>-l</code> : 只显示包含搜索字符串的文件名，而非每个匹配行</li><li><code>-c</code> : 统计符合条件的行数</li><li><code>-e pattern</code> : 指定要查找的正则表达式模式</li><li><code>-w</code> : 匹配整个单词，即只匹配独立的单词而非单词内的字符</li><li><code>-A num</code> : 输出匹配行后 N 行内容</li><li><code>-B num</code> : 输出匹配行前 N 行内容</li><li><code>-C[num]</code> 或者 <code>--context[=num]</code>: 输出匹配行前后总共 N 行内容。</li><li><code>--exclude</code> : 排除指定文件类型，多个文件类型用 “,” 隔开</li></ol><h3 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs excel">[root@localhost ~]# cut [选项] 文件名选项：<br>-f 列号：          提取第几列<br>-d 分隔符：     按照指定分隔符分割列<br>-c 字符范围：    不依赖分隔符来区分列，而是通过字符范围（行首为 <span class="hljs-number">0</span>）来进行字段提取。“<span class="hljs-built_in">n</span>-”表示从第 <span class="hljs-built_in">n</span> 个字符到行尾；“<span class="hljs-built_in">n</span>-m”从第 <span class="hljs-built_in">n</span> 个字符到第 m个字符；“-m”表示从第 <span class="hljs-number">1</span> 个字符到第 m 个字符。<br></code></pre></td></tr></table></figure><h3 id="awk条件（Pattern）"><a href="#awk条件（Pattern）" class="headerlink" title="awk条件（Pattern）"></a>awk条件（Pattern）</h3><p><img src="/../img/Shell/205fa6cf17277f79e65555cc1c7a9afe7819b814.png" alt="image-20230421143849290"></p><h3 id="awk内置变量"><a href="#awk内置变量" class="headerlink" title="awk内置变量"></a>awk内置变量</h3><p><img src="/../img/Shell/2e8746e3feacb88db27cc8f033f27d3b5b52f28a.png" alt="image-20230421190306772"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>图形化Centos7部署kvm</title>
    <link href="/2023/02/26/%E5%9B%BE%E5%BD%A2%E5%8C%96Centos7%E9%83%A8%E7%BD%B2kvm/"/>
    <url>/2023/02/26/%E5%9B%BE%E5%BD%A2%E5%8C%96Centos7%E9%83%A8%E7%BD%B2kvm/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="图形化Centos7部署kvm"><a href="#图形化Centos7部署kvm" class="headerlink" title="图形化Centos7部署kvm"></a>图形化Centos7部署kvm</h1><h2 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> repo.bak<br><span class="hljs-built_in">mv</span> /etc/yum.repos.d/* repo.bak/<br>mount /dev/cdrom /mnt<br><span class="hljs-built_in">cat</span> &gt;&gt;/etc/yum.repos.d/local.repo&lt;&lt;<span class="hljs-string">EOF</span><br><span class="hljs-string">[local]</span><br><span class="hljs-string">name=local</span><br><span class="hljs-string">baseurl=file:///mnt</span><br><span class="hljs-string">gpgcheck=0</span><br><span class="hljs-string">enabled=1</span><br><span class="hljs-string">EOF</span><br>yum clean all &amp;&amp; yum makecache<br>systemctl <span class="hljs-built_in">disable</span> firewalld --now<br>sed -i <span class="hljs-string">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/sysconfig/selinux<br></code></pre></td></tr></table></figure><h2 id="安装kvm"><a href="#安装kvm" class="headerlink" title="安装kvm"></a>安装kvm</h2><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># yum -y groupinstall <span class="hljs-string">&quot;Virtualization&quot;</span> <span class="hljs-string">&quot;Virtualization Client&quot;</span> <span class="hljs-string">&quot;Virtualization Platform&quot;</span> <span class="hljs-string">&quot;Virtualization Tools&quot;</span></span><br><span class="hljs-meta">#启动libvirtd服务</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># service libvirtd start</span><br>Redirecting <span class="hljs-keyword">to</span> /bin/systemctl start libvirtd.service<br><span class="hljs-meta">#查看是否安装成功</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># virsh list --all</span><br> Id    名称                         状态<br>----------------------------------------------------<br></code></pre></td></tr></table></figure><h2 id="配置桥接网卡"><a href="#配置桥接网卡" class="headerlink" title="配置桥接网卡"></a>配置桥接网卡</h2><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># cd /etc/sysconfig/network-scripts/</span><br>[root<span class="hljs-symbol">@localhost</span> network-scripts]<span class="hljs-meta"># cp ifcfg-ens33 ifcfg-br0</span><br></code></pre></td></tr></table></figure><p>ens33删除多余留下4条</p><p><img src="/../img/%E5%9B%BE%E5%BD%A2%E5%8C%96Centos7%E9%83%A8%E7%BD%B2kvm/b624fa4c78ac00d8f6edb8e8f7375e10e8bf0cf8.png" alt="image-20230301145758180"></p><p>br0桥接网卡就按顺序加信息，第一行的type改成bridge</p><p><img src="/../img/%E5%9B%BE%E5%BD%A2%E5%8C%96Centos7%E9%83%A8%E7%BD%B2kvm/cb0a8bc610dee78519cd430edd5ce03dd002a19a.png" alt="image-20230301145818079"></p><h2 id="安装测试虚拟机"><a href="#安装测试虚拟机" class="headerlink" title="安装测试虚拟机"></a>安装测试虚拟机</h2><h3 id="上传镜像"><a href="#上传镜像" class="headerlink" title="上传镜像"></a>上传镜像</h3><p><img src="/../img/%E5%9B%BE%E5%BD%A2%E5%8C%96Centos7%E9%83%A8%E7%BD%B2kvm/0ae63b3a7759551ff5f038fd6dd9bf955e9c4d6d.png" alt="image-20230301153148509"></p><h3 id="创建虚拟机，选择镜像"><a href="#创建虚拟机，选择镜像" class="headerlink" title="创建虚拟机，选择镜像"></a>创建虚拟机，选择镜像</h3><p><img src="/../img/%E5%9B%BE%E5%BD%A2%E5%8C%96Centos7%E9%83%A8%E7%BD%B2kvm/2adf355bccaf343fa218034c52e79f965bd4ab5e.png" alt="image-20230301153600273"></p><h3 id="选择运行内存和cpu，磁盘内存"><a href="#选择运行内存和cpu，磁盘内存" class="headerlink" title="选择运行内存和cpu，磁盘内存"></a>选择运行内存和cpu，磁盘内存</h3><p><img src="/../img/%E5%9B%BE%E5%BD%A2%E5%8C%96Centos7%E9%83%A8%E7%BD%B2kvm/e9eb78b5a5a5bf27f989e354de708a25bbfc5f2e.png" alt="image-20230301153801786"></p><p>这里只给了8G，我原本的虚拟机只设置了20G，可以根据自己需要把自己原本的虚拟机扩大，这样kvm里的虚拟机也就可以扩大内存了</p><p><img src="/../img/%E5%9B%BE%E5%BD%A2%E5%8C%96Centos7%E9%83%A8%E7%BD%B2kvm/847b09e961ce3b899105142bddeff96b7b4591f3.png" alt="image-20230301153801786"></p><h3 id="选择br0网络（桥接网卡）"><a href="#选择br0网络（桥接网卡）" class="headerlink" title="选择br0网络（桥接网卡）"></a>选择br0网络（桥接网卡）</h3><p><img src="/../img/%E5%9B%BE%E5%BD%A2%E5%8C%96Centos7%E9%83%A8%E7%BD%B2kvm/86425102daf8e44330e379ba089d8b780b83a801.png" alt="image-20230301153925557"></p><p>点击完成之后就可以开始安装了</p><p><img src="/../img/%E5%9B%BE%E5%BD%A2%E5%8C%96Centos7%E9%83%A8%E7%BD%B2kvm/be8252948161e83885b7dda93120451680975988.png" alt="image-20230301154047563"></p><p><img src="/../img/%E5%9B%BE%E5%BD%A2%E5%8C%96Centos7%E9%83%A8%E7%BD%B2kvm/fa9bef9d7a850fd7d2a88b397e8fd1b42a682d8a.png" alt="image-20230301154141311"></p><p>测试ping百度</p><p><img src="/../img/%E5%9B%BE%E5%BD%A2%E5%8C%96Centos7%E9%83%A8%E7%BD%B2kvm/c35c3d2d17edddb99d4016ef0a8b1d62e9ed4b6b.png" alt="image-20230301154617535"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>KVM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu 22.04 LTS 基础配置</title>
    <link href="/2023/02/09/Ubuntu%2022.04%20LTS%20%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/"/>
    <url>/2023/02/09/Ubuntu%2022.04%20LTS%20%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="Ubuntu-22-04LTS-基础配置"><a href="#Ubuntu-22-04LTS-基础配置" class="headerlink" title="Ubuntu 22.04LTS 基础配置"></a><a href="https://cn.ubuntu.com/download/desktop">Ubuntu 22.04LTS</a> 基础配置</h1><p>官网镜像下载：<a href="https://cn.ubuntu.com/download/desktop">[点击这里]</a></p><h2 id="设置root用户密码"><a href="#设置root用户密码" class="headerlink" title="设置root用户密码"></a>设置root用户密码</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-meta"># 登录系统 shell 命令行设置 root 用户密码</span><br>demo@demo-<span class="hljs-keyword">virtual</span>-machine:~/Desktop$ sudo passwd<br>[<span class="hljs-meta">sudo</span>] password <span class="hljs-keyword">for</span> demo:<span class="hljs-meta"># 输入 demo 用户密码 123456</span><br>New password:                       <span class="hljs-meta"># 设置 root 用户密码 123456</span><br>Retype <span class="hljs-keyword">new</span> password:<br>passwd: password updated successfully <br><span class="hljs-meta"># 切换 root 用户登录系统</span><br>demo@demo-<span class="hljs-keyword">virtual</span>-machine:~/Desktop$ su root <br>Password:<br>root@demo-<span class="hljs-keyword">virtual</span>-machine:/home/demo/Desktop<span class="hljs-meta"># cd</span><br>root@demo-<span class="hljs-keyword">virtual</span>-machine:~<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h2 id="配置阿里系统安装源"><a href="#配置阿里系统安装源" class="headerlink" title="配置阿里系统安装源"></a>配置阿里系统安装源</h2><p>配置系统安装源（自选一个）</p><figure class="highlight roboconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs roboconf"><span class="hljs-comment">#清华</span><br>sudo mv /etc/apt/sources.list&#123;,.<span class="hljs-attribute">bak&#125;</span><br><span class="hljs-attribute">sudo bash -c &quot;cat &gt;&gt; /etc/apt/sources.list &lt;&lt; EOF</span><br><span class="hljs-attribute">deb https</span>://mirrors<span class="hljs-variable">.tuna</span><span class="hljs-variable">.tsinghua</span><span class="hljs-variable">.edu</span><span class="hljs-variable">.cn</span>/ubuntu/ jammy main restricted universe multiverse<br>deb https://mirrors<span class="hljs-variable">.tuna</span><span class="hljs-variable">.tsinghua</span><span class="hljs-variable">.edu</span><span class="hljs-variable">.cn</span>/ubuntu/ jammy-updates main restricted universe multiverse<br>deb https://mirrors<span class="hljs-variable">.tuna</span><span class="hljs-variable">.tsinghua</span><span class="hljs-variable">.edu</span><span class="hljs-variable">.cn</span>/ubuntu/ jammy-backports main restricted universe multiverse<br>deb http://security<span class="hljs-variable">.ubuntu</span><span class="hljs-variable">.com</span>/ubuntu/ jammy-security main restricted universe multiverse<br>EOF&quot;<br><br>sudo apt-get update<br>#阿里<br>sudo mv /etc/apt/sources<span class="hljs-variable">.list</span>&#123;,<span class="hljs-variable">.bak</span>&#125;<br>sudo bash -c cat &gt;&gt; /etc/apt/sources<span class="hljs-variable">.list</span> &lt;&lt; EOF<br>deb http://mirrors<span class="hljs-variable">.aliyun</span><span class="hljs-variable">.com</span>/ubuntu/ jammy main restricted universe multiverse<br>deb-src http://mirrors<span class="hljs-variable">.aliyun</span><span class="hljs-variable">.com</span>/ubuntu/ jammy main restricted universe multiverse<br>deb http://mirrors<span class="hljs-variable">.aliyun</span><span class="hljs-variable">.com</span>/ubuntu/ jammy-security main restricted universe multiverse<br>deb-src http://mirrors<span class="hljs-variable">.aliyun</span><span class="hljs-variable">.com</span>/ubuntu/ jammy-security main restricted universe multiverse<br>deb http://mirrors<span class="hljs-variable">.aliyun</span><span class="hljs-variable">.com</span>/ubuntu/ jammy-updates main restricted universe multiverse<br>deb-src http://mirrors<span class="hljs-variable">.aliyun</span><span class="hljs-variable">.com</span>/ubuntu/ jammy-updates main restricted universe multiverse<br>deb http://mirrors<span class="hljs-variable">.aliyun</span><span class="hljs-variable">.com</span>/ubuntu/ jammy-proposed main restricted universe multiverse<br>deb-src http://mirrors<span class="hljs-variable">.aliyun</span><span class="hljs-variable">.com</span>/ubuntu/ jammy-proposed main restricted universe multiverse<br>deb http://mirrors<span class="hljs-variable">.aliyun</span><span class="hljs-variable">.com</span>/ubuntu/ jammy-backports main restricted universe multiverse<br>deb-src http://mirrors<span class="hljs-variable">.aliyun</span><span class="hljs-variable">.com</span>/ubuntu/ jammy-backports main restricted universe multiverse<br>EOF<br>sudo apt-get update<br></code></pre></td></tr></table></figure><h2 id="安装小工具"><a href="#安装小工具" class="headerlink" title="安装小工具"></a>安装小工具</h2><h3 id="安装Networkmanager-openssh-server-vim-inetutils-ping-net-tools服务"><a href="#安装Networkmanager-openssh-server-vim-inetutils-ping-net-tools服务" class="headerlink" title="安装Networkmanager,openssh-server,vim,inetutils-ping,net-tools服务"></a>安装Networkmanager,openssh-server,vim,inetutils-ping,net-tools服务</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">sudo apt-get install network-manager openssh-server vim inetutils-<span class="hljs-built_in">ping</span> <span class="hljs-built_in">net</span>-tools -y<br></code></pre></td></tr></table></figure><h3 id="开启-root-远程连接服务"><a href="#开启-root-远程连接服务" class="headerlink" title="开启 root 远程连接服务"></a>开启 root 远程连接服务</h3><h4 id="修改-sshd-config-文件"><a href="#修改-sshd-config-文件" class="headerlink" title="修改 sshd_config 文件"></a>修改 sshd_config 文件</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo  vim <span class="hljs-regexp">/etc/</span>ssh/sshd_config<br><span class="hljs-comment"># 配置文件末尾处添加如下</span><br>PermitRootLogin yes<br></code></pre></td></tr></table></figure><h4 id="重启-SSH-服务"><a href="#重启-SSH-服务" class="headerlink" title="重启 SSH 服务"></a>重启 SSH 服务</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo service ssh restart</span><br></code></pre></td></tr></table></figure><h2 id="设置静态ip"><a href="#设置静态ip" class="headerlink" title="设置静态ip"></a>设置静态ip</h2><h3 id="进入配置文件夹"><a href="#进入配置文件夹" class="headerlink" title="进入配置文件夹"></a>进入配置文件夹</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tap">root@demo-virtual-machine:~<span class="hljs-comment">#  cd /etc/netplan</span><br>root@demo-virtual-machine:~<span class="hljs-comment">#  ll</span><br>-rw-r--r--  <span class="hljs-number"> 1 </span>root root  <span class="hljs-number"> 104 </span> 8月 <span class="hljs-number"> 9 </span><span class="hljs-number"> 2022 </span>01-network-manager-all.yaml<br><span class="hljs-comment">##很显然我这里有一个01....</span><br></code></pre></td></tr></table></figure><h3 id="备份旧配置文件"><a href="#备份旧配置文件" class="headerlink" title="备份旧配置文件"></a>备份旧配置文件</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">root</span>@demo-virtual-machine:~# sudo cp <span class="hljs-number">01</span>-network-manager-<span class="hljs-literal">all</span>.yaml&#123;,.bak&#125;<br></code></pre></td></tr></table></figure><h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext">root@demo-virtual-machine:~# sudo vim 01-network-manager-all.yaml<br><span class="hljs-comment">#直接复制</span><br><span class="hljs-attribute">network</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">ethernets</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">ens33</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-attribute">dhcp4</span><span class="hljs-punctuation">:</span> <span class="hljs-string">false</span><br>      <span class="hljs-attribute">addresses</span><span class="hljs-punctuation">:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">192.168.48.10/24</span><br>      <span class="hljs-attribute">routes</span><span class="hljs-punctuation">:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">to: default</span><br>          <span class="hljs-attribute">via</span><span class="hljs-punctuation">:</span> <span class="hljs-string">192.168.48.2</span><br>      <span class="hljs-attribute">nameservers</span><span class="hljs-punctuation">:</span><br>        <span class="hljs-attribute">addresses</span><span class="hljs-punctuation">:</span> <span class="hljs-string">[192.168.48.2,114.114.114.114]</span><br>  <span class="hljs-attribute">version</span><span class="hljs-punctuation">:</span> <span class="hljs-string">2</span><br>  <br>:wq<br><br>sudo netplan apply<br></code></pre></td></tr></table></figure><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Ubuntu</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>搭建Flarum社区论坛</title>
    <link href="/2023/02/08/flarum/"/>
    <url>/2023/02/08/flarum/</url>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"/><h1 id="搭建Flarum社区论坛"><a href="#搭建Flarum社区论坛" class="headerlink" title="搭建Flarum社区论坛"></a>搭建Flarum社区论坛</h1><h2 id="关于Flarum"><a href="#关于Flarum" class="headerlink" title="关于Flarum"></a>关于<a href="https://flarum.org/"><span style="color:green">Flarum</span></a></h2><p>Flarum 是一款非常简洁的开源论坛程序。它响应快速、简便易用，拥有打造高质量社区的一切功能。同时，Flarum 高度可扩展，你可以对它进行深度定制。</p><p><img src="/../img/flarum/4789350102abb48ae2e6c9583fbb320232748d55.png"></p><p>Flarum 的前身是 <a href="https://github.com/esotalk/esoTalk">esoTalk</a> 和 <a href="https://fluxbb.org/">FluxBB</a>。它生来被设计如此：</p><ul><li><strong>快速、简单。</strong>不杂乱不臃肿，没有庞杂的依赖关系。Flarum 基于 PHP 语言编写，部署方便。采用 <a href="https://mithril.js.org/">Mithril</a> 界面框架，小巧而性能高。</li><li><strong>漂亮、响应式。</strong>以人为本的设计，一致直观的跨平台体验。</li><li><strong>强大、可扩展。</strong><a href="https://docs.flarum.org.cn/zh/extend">强大全面的 API</a>，灵活至极的架构。满足您定制、扩展或集成 Flarum 的需求。</li><li><strong>免费、开源</strong> Flarum 基于 <a href="https://github.com/flarum/flarum/blob/master/LICENSE">MIT 协议</a> 发布，使用无忧。</li></ul><p>您可以在这里阅读更多 <a href="https://discuss.flarum.org/d/28869-flarum-philosophy-and-values">Flarum 的哲学理念和价值观</a>。</p><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><h3 id="Composer-依赖管理"><a href="#Composer-依赖管理" class="headerlink" title="Composer 依赖管理"></a>Composer 依赖管理</h3><p>Flarum 使用 <a href="https://getcomposer.org/">Composer</a> 管理自身依赖和扩展程序。 以下情况，你会用到 Composer：</p><ul><li>安装或更新 Flarum</li><li>安装、更新或卸载 Flarum 扩展程序</li></ul><p>本指南仅让您简要了解 Composer。更多信息请访问 <a href="https://getcomposer.org/doc/00-intro.md">官方文档</a>。</p><blockquote><p>COMPOSER 2.0 版本</p><p>1.0 时代，Composer 对内存的过大占用，在共享主机上导致了诸多问题。于是 2020 年 <a href="https://blog.packagist.com/composer-2-0-is-now-available/">Composer 2.0 发布</a>，这个版本对性能及内存占用问题进行了大幅改进和改善。建议您始终使用 Composer 2.0 版本。</p></blockquote><p>与其他软件一样，安装 Flarum 前，您必须先在服务器上 <a href="https://getcomposer.org/download/">安装 Composer</a> 。</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><h4 id="服务器环境要求"><a href="#服务器环境要求" class="headerlink" title="服务器环境要求"></a>服务器环境要求</h4><p>我用的是Centos7</p><ul><li><strong>Apache</strong>（需要启用 mod_rewrite 重写模块) 或 <strong>Nginx</strong>  （我用的是Nginx）</li><li>**PHP 7.3+**，需要启用 curl, dom, exif, fileinfo, gd, json, mbstring, openssl, pdo_mysql, tokenizer, zip 扩展</li><li><strong>MySQL 5.6+&#x2F;8.0.23+</strong> 或 <strong>MariaDB 10.0.5+</strong></li><li><strong>SSH（命令行）权限</strong>，用于执行 Composer</li></ul><h4 id="安装php7-4"><a href="#安装php7-4" class="headerlink" title="安装php7.4"></a>安装php7.4</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># rpm -ivh https://dl.fedoraproject.org/pub/epel/7/aarch64/Packages/e/epel-release-7-12.noarch.rpm</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># rpm -ivh http://rpms.remirepo.net/enterprise/remi-release-7.rpm</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta">#  yum install -y php74-php php74-php-fpm php74-php-cli php74-php-common php74-php-devel php74-php-gd php74-php-pdo php74-php-mysql php74-php-mbstring php74-php-bcmath php74-php-xml php74-php-pecl-redis php74-php-process php74-php-intl php74-php-xmlrpc php74-php-soap php74-php-ldap php74-php-opcache </span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># systemctlstart php74-php-fpm &amp;&amp; systemctl enable php74-php-fpm</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># cp /usr/bin/php74 /usr/bin/php</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># chmod +x /usr/bin/php</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># php -v</span><br></code></pre></td></tr></table></figure><h4 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># yum install -y nginx</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># systemctl enable --now nginx</span><br></code></pre></td></tr></table></figure><h4 id="安装mariadb"><a href="#安装mariadb" class="headerlink" title="安装mariadb"></a>安装mariadb</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@localhost ~]<span class="hljs-comment"># vim /etc/yum.repos.d/MariaDB.repo</span><br><br>[mariadb]<br>name = MariaDB<br>baseurl = http:<span class="hljs-regexp">//yum</span>.mariadb.org<span class="hljs-regexp">/10.3/</span>centos7-amd64/<br>gpgkey = https:<span class="hljs-regexp">//yum</span>.mariadb.org/RPM-GPG-KEY-MariaDB<br>gpgcheck = <span class="hljs-number">1</span><br>[root@localhost ~]<span class="hljs-comment"># yum clean all &amp;&amp; yum makecache</span><br>[root@localhost ~]<span class="hljs-comment"># yum install -y mariadb mariadb-server</span><br>[root@localhost ~]<span class="hljs-comment"># systemctl enable --now mariadb</span><br>[root@localhost ~]<span class="hljs-comment"># mysqladmin -uroot password &quot;000000&quot;</span><br>[root@localhost ~]<span class="hljs-comment"># mysql -uroot -p000000</span><br>MariaDB [(none)]&gt; create database flarum;<br>MariaDB [(none)]&gt; <span class="hljs-keyword">exit</span><br></code></pre></td></tr></table></figure><h3 id="安装flarum"><a href="#安装flarum" class="headerlink" title="安装flarum"></a>安装flarum</h3><p>Flarum 使用 <a href="https://getcomposer.org/">Composer</a> 来管理其依赖包和扩展程序。如果你还不认识 Composer，可以先 <a href="https://docs.flarum.org.cn/zh/composer">简单了解</a> 一下。安装 Composer 后，在要安装 Flarum 的空白目录下执行此命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">composer create-project flarum/flarum .<br></code></pre></td></tr></table></figure><p>等待安装的空隙，您可以先去配置 Web 服务器。请确保网站根目录（Webroot）设置为 <code>/&lt;Flarum 根目录路径&gt;/public</code>，并按照下面的说明设置 <a href="https://docs.flarum.org.cn/zh/install#url-%E9%87%8D%E5%86%99">URL 重写</a>。</p><p>一切就绪后，在浏览器中访问您的论坛网址，并根据安装向导完成安装。</p><h4 id="安装flarum源码"><a href="#安装flarum源码" class="headerlink" title="安装flarum源码"></a>安装flarum源码</h4><p>在一个空目录里进行安装</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># mkdir /flarum</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># cd /flarum/</span><br>[root<span class="hljs-symbol">@localhost</span> flarum]<span class="hljs-meta"># composer create-project flarum/flarum .</span><br></code></pre></td></tr></table></figure><h4 id="更改nginx配置文件"><a href="#更改nginx配置文件" class="headerlink" title="更改nginx配置文件"></a>更改nginx配置文件</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@localhost ~]<span class="hljs-comment"># vi /etc/nginx/nginx.conf</span><br>server &#123;<br>    listen <span class="hljs-number">80</span>;<br>    server_name qianyios;<br>    root <span class="hljs-regexp">/flarum/</span>public;<br>    index index.html index.htm index.php;<br>    location / &#123;<br>        try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span><span class="hljs-regexp">/ /i</span>ndex.php<span class="hljs-variable">$is_args</span><span class="hljs-variable">$args</span>;<br>        include <span class="hljs-regexp">/flarum/</span>.nginx.conf;<br>    &#125;<br>    location ~ \.php$ &#123;<br>        try_files <span class="hljs-variable">$uri</span> =<span class="hljs-number">404</span>;<br>        include fastcgi.conf;<br>        fastcgi_pass <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">9000</span>;<br>    &#125;<br>&#125;<br>[root@localhost ~]<span class="hljs-comment"># nginx -s reload</span><br></code></pre></td></tr></table></figure><h4 id="赋予权限"><a href="#赋予权限" class="headerlink" title="赋予权限"></a>赋予权限</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># chmod 775 -R /flarum</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># chown -R apache:apache /flarum</span><br>以下权限确保在selinux开启的状态下运行<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># getenforce</span><br>Enforcing<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># chcon -R -t httpd_sys_rw_content_t /flarum</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># nginx -s reload</span><br></code></pre></td></tr></table></figure><h3 id="访问网页"><a href="#访问网页" class="headerlink" title="访问网页"></a>访问网页</h3><p>去浏览器访问你的ip即刻</p><p><img src="/../img/flarum/7fe81939650343fa628053ad69ade49ef551569b.png" alt="image-20230208161549333"></p><p><img src="/../img/flarum/f775d97bf895b9c34061a39d9bdc7a859ab992fc.png" alt="image-20230208161651938"></p><h2 id="更改中文语言"><a href="#更改中文语言" class="headerlink" title="更改中文语言"></a>更改中文语言</h2><h3 id="安装中文汉化包"><a href="#安装中文汉化包" class="headerlink" title="安装中文汉化包"></a>安装中文汉化包</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> flarum]<span class="hljs-meta"># composer require flarum-lang/chinese-simplified</span><br>[root<span class="hljs-symbol">@localhost</span> flarum]<span class="hljs-meta"># php flarum cache:clear</span><br></code></pre></td></tr></table></figure><p><img src="/../img/flarum/93333810bb1eb7e23af05dd2ca7e390d06298b4a.png" alt="image-20230208161723663"></p><p><img src="/../img/flarum/ac7eee7ff5552d45114ccd3d7f25a77672360843.png" alt="image-20230208162107235"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>Lnmp</tag>
      
      <tag>Flarum</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基于Lnmp部署WordPress博客</title>
    <link href="/2023/01/23/wordpress/"/>
    <url>/2023/01/23/wordpress/</url>
    
    <content type="html"><![CDATA[<h1 id="基于Lnmp部署WordPress博客"><a href="#基于Lnmp部署WordPress博客" class="headerlink" title="基于Lnmp部署WordPress博客"></a>基于Lnmp部署WordPress博客</h1><h2 id="配置基础环境"><a href="#配置基础环境" class="headerlink" title="配置基础环境"></a>配置基础环境</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir repo.bak<br>mv <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/* repo.bak/</span><br>wget -O <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/CentOS-Base.repo https:/</span><span class="hljs-regexp">/mirrors.aliyun.com/</span>repo/Centos-<span class="hljs-number">7</span>.repo<br>yum clean all &amp;&amp; yum makecache<br>systemctl disable firewalld --now<br>sed -i <span class="hljs-string">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> <span class="hljs-regexp">/etc/</span>sysconfig/selinux<br>setenforce <span class="hljs-number">0</span><br>yum update -y<br></code></pre></td></tr></table></figure><h2 id="安装epel-release源和安装remi源"><a href="#安装epel-release源和安装remi源" class="headerlink" title="安装epel-release源和安装remi源"></a>安装epel-release源和安装remi源</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">rpm -ivh https:<span class="hljs-regexp">//</span>dl.fedoraproject.org<span class="hljs-regexp">/pub/</span>epel<span class="hljs-regexp">/7/</span>aarch64<span class="hljs-regexp">/Packages/</span>e/epel-release-<span class="hljs-number">7</span>-<span class="hljs-number">12</span>.noarch.rpm<br>rpm -ivh http:<span class="hljs-regexp">//</span>rpms.remirepo.net<span class="hljs-regexp">/enterprise/</span>remi-release-<span class="hljs-number">7</span>.rpm<br>yum clean all &amp;&amp; yum makecache<br></code></pre></td></tr></table></figure><h2 id="安装PHP扩展"><a href="#安装PHP扩展" class="headerlink" title="安装PHP扩展"></a>安装PHP扩展</h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs smali"> yum install -y php74-php php74-php-fpm php74-php-cli php74-php-common php74-php-devel php74-php-gd php74-php-pdo php74-php-mysql php74-php-mbstring php74-php-bcmath php74-php-xml php74-php-pecl-redis php74-php-process php74-php-intl php74-php-xmlrpc php74-php-soap php74-php-ldap php74-php-opcache <span class="hljs-keyword"></span><br><span class="hljs-keyword">system</span>ctl enable --now php74-php-fpm<span class="hljs-keyword"></span><br><span class="hljs-keyword">system</span>ctl restart nginx<br><span class="hljs-comment">#将php74版本替换原来的php版本</span><br>cp /usr/bin/php74 /usr/bin/php<br>chmod +x /usr/bin/php<br>php -v<br><br></code></pre></td></tr></table></figure><h2 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">yum install -y nginx<br>systemctl <span class="hljs-keyword">enable</span> <span class="hljs-comment">--now nginx</span><br></code></pre></td></tr></table></figure><h2 id="编辑Nginx配置文件"><a href="#编辑Nginx配置文件" class="headerlink" title="编辑Nginx配置文件"></a>编辑Nginx配置文件</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">vi <span class="hljs-string">/etc/nginx/nginx.conf</span>    <br>    <br>    server &#123;<br>        listen       80;<br>        listen       [::]<span class="hljs-function">:80</span>;<br>        server_name  _;<br>        root         <span class="hljs-string">/opt/qianyios</span>;   <span class="hljs-params">----</span>设置网站目录<br>        index        index.php;       <span class="hljs-params">----</span>设置默认文件<br>        <span class="hljs-comment"># Load configuration files for the default server block.</span><br>        include <span class="hljs-string">/etc/nginx/default.d/</span>*<span class="hljs-string">.conf</span>;<br><br>        error_page 404 <span class="hljs-string">/404.html</span>;<br>        location = <span class="hljs-string">/404.html</span> &#123;<br>        &#125;<br><br>        error_page 500 502 503 504 <span class="hljs-string">/50x.html</span>;<br>        location = <span class="hljs-string">/50x.html</span> &#123;<br>        &#125;<br>         location ~ \<span class="hljs-string">.php</span>$ &#123;               <span class="hljs-params">------</span><br>         root       <span class="hljs-string">/opt/qianyios</span>;<br>         fastcgi_pass   127.0.0.1<span class="hljs-function">:9000</span>;<br>         fastcgi_index  index.php;<br>         fastcgi_param  SCRIPT_FILENAME<br>$document_root$fastcgi_script_name;<br>         include       fastcgi_params;<br>        &#125;                                  <span class="hljs-params">------</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="安装mariadb"><a href="#安装mariadb" class="headerlink" title="安装mariadb"></a>安装mariadb</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">yum install -y mariadb mariadb-server<br>systemctl enable --now mariadb<br>mysqladmin -uroot password <span class="hljs-string">&quot;000000&quot;</span><br>mysql -uroot -p000000<br>create database wordpress;<br><span class="hljs-keyword">exit</span><br><br></code></pre></td></tr></table></figure><h2 id="安装wordpress"><a href="#安装wordpress" class="headerlink" title="安装wordpress"></a>安装wordpress</h2><p><a href="https://cn.wordpress.org/download/#download-install">点此下载</a>最新版tar.gz文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//</span>cn.wordpress.org/wordpress-<span class="hljs-number">6.1</span>.<span class="hljs-number">1</span>-zh_CN.tar.gz<br>tar -xf wordpress-<span class="hljs-number">6.1</span>.<span class="hljs-number">1</span>-zh_CN.tar.gz<br>mkdir <span class="hljs-regexp">/opt/</span>qianyios<br>mv wordpress<span class="hljs-regexp">/* /</span>opt<span class="hljs-regexp">/qianyios/</span><br>cd <span class="hljs-regexp">/opt/</span>qianyios/<br>cp wp-config-sample.php wp-config.php<br>vi wp-config.php<br><span class="hljs-regexp">/** The name of the database for WordPress */</span><br>define( <span class="hljs-string">&#x27;DB_NAME&#x27;</span>, <span class="hljs-string">&#x27;wordpress&#x27;</span> );    ----设置数据库名字<br><br><span class="hljs-regexp">/** Database username */</span><br>define( <span class="hljs-string">&#x27;DB_USER&#x27;</span>, <span class="hljs-string">&#x27;root&#x27;</span> );         ----设置数据库用户名<br><br><span class="hljs-regexp">/** Database password */</span><br>define( <span class="hljs-string">&#x27;DB_PASSWORD&#x27;</span>, <span class="hljs-string">&#x27;000000&#x27;</span> );   ----设置数据库密码<br><br>退出<br>nginx -s reload<br></code></pre></td></tr></table></figure><p>随后就可以访问<a href="http://ip/">http://ip/</a>   去安装wordpress了</p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>Lnmp</tag>
      
      <tag>WordPress</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基于Docker部署Hexo框架</title>
    <link href="/2023/01/21/hexo/"/>
    <url>/2023/01/21/hexo/</url>
    
    <content type="html"><![CDATA[<h1 id="基于Docker部署Hexo框架"><a href="#基于Docker部署Hexo框架" class="headerlink" title="基于Docker部署Hexo框架"></a>基于Docker部署Hexo框架</h1><h2 id="创建dockerfile文件夹"><a href="#创建dockerfile文件夹" class="headerlink" title="创建dockerfile文件夹"></a>创建dockerfile文件夹</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">mkdir dockerfile<br></code></pre></td></tr></table></figure><h2 id="使用vim创建和编辑Dockerfile"><a href="#使用vim创建和编辑Dockerfile" class="headerlink" title="使用vim创建和编辑Dockerfile"></a>使用vim创建和编辑Dockerfile</h2><p>vim dockerfile&#x2F;Dockerfile</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># 使用最新的node镜像作为基础环境  </span><br><span class="hljs-keyword">FROM</span> node:latest  <br><span class="hljs-comment"># 设置临时工作目录  </span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /usr/blog</span><br><span class="hljs-comment"># 配置 npm 镜像站点  </span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> npm config <span class="hljs-built_in">set</span> registry https://registry.npm.taobao.org  </span><br><span class="hljs-comment"># 安装 hexo-cli  </span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> npm install hexo-cli -g  </span><br><span class="hljs-comment"># 初始化 hexo blog  </span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> hexo init  </span><br><span class="hljs-comment"># hexo 默认端口号 4000  </span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">4000</span><br></code></pre></td></tr></table></figure><h2 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker build -t hexo-image <span class="hljs-regexp">/root/</span>dockerfile/<br></code></pre></td></tr></table></figure><h2 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run -itd -v <span class="hljs-regexp">/root/</span>blog:<span class="hljs-regexp">/usr/</span>blog -p <span class="hljs-number">4000</span>:<span class="hljs-number">4000</span> --name hexo-blog hexo-image<br></code></pre></td></tr></table></figure><p>-v &#x2F;root&#x2F;blog:&#x2F;usr&#x2F;blog  可以实现把容器中的&#x2F;usr&#x2F;blog挂载到宿主机的&#x2F;root&#x2F;blog，非常方便</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker update hexo-blog <span class="hljs-attribute">--restart</span>=always <br><span class="hljs-comment">#增加开机自启动属性</span><br></code></pre></td></tr></table></figure><h2 id="查看容器id"><a href="#查看容器id" class="headerlink" title="查看容器id"></a>查看容器id</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">docker ps -<span class="hljs-selector-tag">a</span><br></code></pre></td></tr></table></figure><h2 id="加入容器"><a href="#加入容器" class="headerlink" title="加入容器"></a>加入容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker <span class="hljs-built_in">exec</span> -it 容器<span class="hljs-built_in">id</span> /bin/bash<br><span class="hljs-comment">#也可以是名字</span><br>docker <span class="hljs-built_in">exec</span> -it hexo-blog /bin/bash<br></code></pre></td></tr></table></figure><h2 id="开启服务"><a href="#开启服务" class="headerlink" title="开启服务"></a>开启服务</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo s</span><br></code></pre></td></tr></table></figure><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 8</tag>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>基于LAMP部署Discuz论坛</title>
    <link href="/2023/01/20/LAMP/"/>
    <url>/2023/01/20/LAMP/</url>
    
    <content type="html"><![CDATA[<h1 id="基于LAMP部署Discuz论坛"><a href="#基于LAMP部署Discuz论坛" class="headerlink" title="基于LAMP部署Discuz论坛"></a>基于LAMP部署Discuz论坛</h1><p>系统：Centos 7</p><h2 id="配置阿里yum"><a href="#配置阿里yum" class="headerlink" title="配置阿里yum"></a>配置阿里yum</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir repo.bak<br>mv <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/* repo.bak/</span><br>wget -O <span class="hljs-regexp">/etc/yum</span>.repos.d<span class="hljs-regexp">/CentOS-Base.repo https:/</span><span class="hljs-regexp">/mirrors.aliyun.com/</span>repo/Centos-<span class="hljs-number">7</span>.repo<br>yum clean all &amp;&amp; yum makecache<br>systemctl disable firewalld --now<br>sed -i <span class="hljs-string">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> <span class="hljs-regexp">/etc/</span>sysconfig/selinux<br>setenforce <span class="hljs-number">0</span><br>yum update -y<br></code></pre></td></tr></table></figure><h2 id="安装apache"><a href="#安装apache" class="headerlink" title="安装apache"></a>安装apache</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">yum install -y httpd<br>systemctl <span class="hljs-keyword">enable</span> <span class="hljs-comment">--now httpd</span><br></code></pre></td></tr></table></figure><h2 id="安装epel-release源和安装remi源"><a href="#安装epel-release源和安装remi源" class="headerlink" title="安装epel-release源和安装remi源"></a>安装epel-release源和安装remi源</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">rpm -ivh https:<span class="hljs-regexp">//</span>dl.fedoraproject.org<span class="hljs-regexp">/pub/</span>epel<span class="hljs-regexp">/7/</span>aarch64<span class="hljs-regexp">/Packages/</span>e/epel-release-<span class="hljs-number">7</span>-<span class="hljs-number">12</span>.noarch.rpm<br>rpm -ivh http:<span class="hljs-regexp">//</span>rpms.remirepo.net<span class="hljs-regexp">/enterprise/</span>remi-release-<span class="hljs-number">7</span>.rpm<br></code></pre></td></tr></table></figure><h2 id="安装PHP扩展"><a href="#安装PHP扩展" class="headerlink" title="安装PHP扩展"></a>安装PHP扩展</h2><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs smali"> yum install -y php74-php php74-php-fpm php74-php-cli php74-php-common php74-php-devel php74-php-gd php74-php-pdo php74-php-mysql php74-php-mbstring php74-php-bcmath php74-php-xml php74-php-pecl-redis php74-php-process php74-php-intl php74-php-xmlrpc php74-php-soap php74-php-ldap php74-php-opcache <span class="hljs-keyword"></span><br><span class="hljs-keyword">system</span>ctl restart httpd<br><span class="hljs-comment">#将php74版本替换原来的php版本</span><br>cp /usr/bin/php74 /usr/bin/php<br>chmod +x /usr/bin/php<br>php -v<br></code></pre></td></tr></table></figure><h2 id="安装mariadb数据库并且修改密码"><a href="#安装mariadb数据库并且修改密码" class="headerlink" title="安装mariadb数据库并且修改密码"></a>安装mariadb数据库并且修改密码</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"> yum install -y mariadb mariadb-<span class="hljs-keyword">server</span><br> systemctl <span class="hljs-keyword">enable</span> <span class="hljs-comment">--now mariadb</span><br> mysqladmin -uroot <span class="hljs-keyword">password</span> &quot;000000&quot;<br> <br> [root@lamp ~]# mysql -uroot -p000000<br>Welcome <span class="hljs-keyword">to</span> the MariaDB monitor.  Commands <span class="hljs-keyword">end</span> <span class="hljs-keyword">with</span> ; <span class="hljs-keyword">or</span> \g.<br>Your MariaDB <span class="hljs-keyword">connection</span> id <span class="hljs-keyword">is</span> <span class="hljs-number">6</span><br><span class="hljs-keyword">Server</span> <span class="hljs-keyword">version</span>: <span class="hljs-number">5.5</span><span class="hljs-number">.68</span>-MariaDB MariaDB <span class="hljs-keyword">Server</span><br><br>Copyright (c) <span class="hljs-number">2000</span>, <span class="hljs-number">2018</span>, Oracle, MariaDB Corporation Ab <span class="hljs-keyword">and</span> others.<br><br><span class="hljs-keyword">Type</span> <span class="hljs-string">&#x27;help;&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;\h&#x27;</span> <span class="hljs-keyword">for</span> help. <span class="hljs-keyword">Type</span> <span class="hljs-string">&#x27;\c&#x27;</span> <span class="hljs-keyword">to</span> clear the <span class="hljs-keyword">current</span> <span class="hljs-keyword">input</span> <span class="hljs-keyword">statement</span>.<br><br>MariaDB [(<span class="hljs-keyword">none</span>)]&gt; <span class="hljs-keyword">show</span> databases;<br>+<span class="hljs-comment">--------------------+</span><br>| <span class="hljs-keyword">Database</span>           |<br>+<span class="hljs-comment">--------------------+</span><br>| information_schema |<br>| mysql              |<br>| performance_schema |<br>| test               |<br>+<span class="hljs-comment">--------------------+</span><br><span class="hljs-number">4</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br></code></pre></td></tr></table></figure><h2 id="安装Discuz！"><a href="#安装Discuz！" class="headerlink" title="安装Discuz！"></a>安装Discuz！</h2><p>前往<a href="https://www.discuz.net/download.html">官网</a>下载最新 【简体中文】zip 下载之后上传到root目录下  我这里下载的是X3.5 简体中文</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@localhost ~]<span class="hljs-comment"># ll</span><br>total <span class="hljs-number">11424</span><br>-rw-------. <span class="hljs-number">1</span> root root     <span class="hljs-number">1284</span> Nov <span class="hljs-number">19</span> <span class="hljs-number">17</span>:<span class="hljs-number">27</span> anaconda-ks.cfg<br>-rw-r--r--. <span class="hljs-number">1</span> root root <span class="hljs-number">11693954</span> Jan <span class="hljs-number">20</span> <span class="hljs-number">22</span>:<span class="hljs-number">48</span> Discuz_X3.<span class="hljs-number">5</span>_SC_UTF8_20221231.zip<br>drwxr-xr-x. <span class="hljs-number">2</span> root root      <span class="hljs-number">238</span> Nov <span class="hljs-number">19</span> <span class="hljs-number">17</span>:<span class="hljs-number">59</span> repo.bak<br><span class="hljs-comment">#安装解压工具，并解压</span><br>yum install -y unzip<br>unzip Discuz_X3.<span class="hljs-number">5</span>_SC_UTF8_20221231.zip -d discuz<br>cp -rf discuz<span class="hljs-regexp">/upload/</span>* <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span><br>chmod <span class="hljs-number">777</span> -R <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span><br>systemctl restart httpd<br></code></pre></td></tr></table></figure><p>然后你就可以访问<a href="http://ip/%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85%E4%BA%86">http://ip/进行安装了</a></p><p>数据库用户名:  root</p><p>数据库密码:000000  （我上面设置的是这个）</p><p>管理员账户和密码，要记好！</p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>Lamp</tag>
      
      <tag>Discuz</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mysql笔记</title>
    <link href="/2023/01/20/mysql/"/>
    <url>/2023/01/20/mysql/</url>
    
    <content type="html"><![CDATA[<h1 id="Mysql笔记"><a href="#Mysql笔记" class="headerlink" title="Mysql笔记"></a>Mysql笔记</h1><h2 id="数据库的创建和管理"><a href="#数据库的创建和管理" class="headerlink" title="数据库的创建和管理"></a>数据库的创建和管理</h2><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> 数据库名字<br><span class="hljs-keyword">default</span> <span class="hljs-type">character</span> <span class="hljs-keyword">set</span> 字符集名字<br><span class="hljs-keyword">Default</span> <span class="hljs-keyword">collate</span> 排序规则名 ;<br>例子：<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> webinfo<br><span class="hljs-keyword">default</span> <span class="hljs-type">character</span> <span class="hljs-keyword">set</span> utf8mb4<br><span class="hljs-keyword">Default</span> <span class="hljs-keyword">collate</span> utf8mb4_general_ci;<br></code></pre></td></tr></table></figure><h3 id="显示当前所有的数据库列表"><a href="#显示当前所有的数据库列表" class="headerlink" title="显示当前所有的数据库列表"></a>显示当前所有的数据库列表</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">Show databases<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h3 id="指定默认的数据库列表"><a href="#指定默认的数据库列表" class="headerlink" title="指定默认的数据库列表"></a>指定默认的数据库列表</h3><p>Use 数据库名字;</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">use stuinfo<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h3 id="使用alter-database-语句修改数据库"><a href="#使用alter-database-语句修改数据库" class="headerlink" title="使用alter database 语句修改数据库"></a>使用alter database 语句修改数据库</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Alter</span> <span class="hljs-keyword">database</span> 数据库名字<br><span class="hljs-keyword">Default</span> <span class="hljs-type">character</span> <span class="hljs-keyword">set</span> 字符集名<br><span class="hljs-keyword">Default</span> <span class="hljs-keyword">collate</span> 排序规则名字;<br>例子：<br><span class="hljs-keyword">Alter</span> <span class="hljs-keyword">database</span> stuinfo<br><span class="hljs-keyword">Default</span> <span class="hljs-type">character</span> <span class="hljs-keyword">set</span> utf8<br><span class="hljs-keyword">Default</span> <span class="hljs-keyword">collate</span> utf8_general_ci;<br></code></pre></td></tr></table></figure><h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">Drop</span> <span class="hljs-keyword">database</span> 数据库名字;<br></code></pre></td></tr></table></figure><h2 id="数据表的创建和管理"><a href="#数据表的创建和管理" class="headerlink" title="数据表的创建和管理"></a>数据表的创建和管理</h2><h3 id="使用create-table-语句创建数据表"><a href="#使用create-table-语句创建数据表" class="headerlink" title="使用create table 语句创建数据表"></a>使用create table 语句创建数据表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">Create</span> <span class="hljs-keyword">table</span> 表名 (<br>字段名<span class="hljs-number">1</span> 数据类型 \[属性\] \[索引\] ,<br>字段名<span class="hljs-number">1</span> 数据类型 \[属性\] \[索引\],<br>.......<br>字段名<span class="hljs-number">1</span> 数据类型 \[属性\] \[索引\]<br>);<br>例子：<br><br><span class="hljs-keyword">Create</span> <span class="hljs-keyword">table</span> student (<br>Id <span class="hljs-type">int</span> unsigned <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> auto_increment comment <span class="hljs-string">&#x27;学生ID&#x27;</span>,<br>sNo <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;学号&#x27;</span>,<br>sName <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;姓名&#x27;</span>,<br>sex <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&#x27;男&#x27;</span> comment <span class="hljs-string">&#x27;性别&#x27;</span>,<br>birthday <span class="hljs-type">Date</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;出生日期&#x27;</span>,<br>depyName <span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;班级名称&#x27;</span>,<br>remark <span class="hljs-type">Varchar</span>(<span class="hljs-number">80</span>) comment <span class="hljs-string">&#x27;备注&#x27;</span>,<br><span class="hljs-keyword">primary</span> key (id), <span class="hljs-operator">/</span>    \<span class="hljs-operator">*</span>设置id为主键\<span class="hljs-operator">*</span><span class="hljs-operator">/</span><br><span class="hljs-keyword">unique</span> (sNo), <span class="hljs-operator">/</span>        \<span class="hljs-operator">*</span>设置sNo为唯一性索引\<span class="hljs-operator">*</span><span class="hljs-operator">/</span><br>index (sName) <span class="hljs-operator">/</span>         \<span class="hljs-operator">*</span>设置sName为普通索引\<span class="hljs-operator">*</span><span class="hljs-operator">/</span><br>); ENGINE<span class="hljs-operator">=</span>InnoDB;<br></code></pre></td></tr></table></figure><p>Not null 不为空 unsigned无符号 auto_increment自动增加</p><h3 id="查看数据表"><a href="#查看数据表" class="headerlink" title="查看数据表"></a>查看数据表</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Show</span> <span class="hljs-keyword">tables</span>;<br></code></pre></td></tr></table></figure><h3 id="复制数据表"><a href="#复制数据表" class="headerlink" title="复制数据表"></a>复制数据表</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Create</span> <span class="hljs-keyword">table</span> 新表名 <span class="hljs-keyword">like</span> 旧表名;<br></code></pre></td></tr></table></figure><h3 id="创建临时表"><a href="#创建临时表" class="headerlink" title="创建临时表"></a>创建临时表</h3><p>新建之后，当mysql关闭后会自动删除</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Create</span> <span class="hljs-keyword">temporary</span> <span class="hljs-keyword">table</span> student (<br>Id <span class="hljs-type">int</span> unsigned <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> auto_increment <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;学生ID&#x27;</span>,<br>sNo <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;学号&#x27;</span>,<br>sName <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;姓名&#x27;</span>,<br>sex <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&#x27;男&#x27;</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;性别&#x27;</span>,<br>birthday <span class="hljs-type">Date</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;出生日期&#x27;</span>,<br>depyName <span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;班级名称&#x27;</span>,<br>remark <span class="hljs-type">Varchar</span>(<span class="hljs-number">80</span>) <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;备注&#x27;</span>,<br><span class="hljs-keyword">primary key</span> (id), /            \*设置id为主键\*/<br><span class="hljs-keyword">unique</span> (sNo), /                \*设置sNo为唯一性索引\*/<br><span class="hljs-keyword">index</span> (sName) /                \*设置sName为普通索引\*/<br>); ENGINE=InnoDB;<br></code></pre></td></tr></table></figure><p>Not null 不为空 unsigned无符号 auto_increment自动增加</p><h3 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h3><p>Describe | desc 表名;</p><p>例子：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">desc 表名<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h3 id="查看表的结构-sql语句"><a href="#查看表的结构-sql语句" class="headerlink" title="查看表的结构  sql语句"></a>查看表的结构  sql语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">Show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> 表名;<br></code></pre></td></tr></table></figure><h2 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h2><h3 id="使用alter-table-修改表结构"><a href="#使用alter-table-修改表结构" class="headerlink" title="使用alter table 修改表结构"></a>使用alter table 修改表结构</h3><p>Alter table 表名</p><p>Add字段名 数据类型 [属性] [索引] [First | after 字段名] –添加新字段</p><p>Modify 字段名 数据类型 [属性] [索引] ---更改指定数据类型</p><p>Change 字段名 新字段名 数据类型 [属性] [索引] ---更改指定数据类型同时更改名字</p><p>Drop 字段名 ----删除指定字段</p><p>Rename as 新表名 ---用来给数据表重新命名</p><p>例子：</p><p><img src="/../img/mysql/8b6f5da2799c869593bdbc5522d2685dd2381ca7.png"></p><h3 id="使用insert操作表中数据"><a href="#使用insert操作表中数据" class="headerlink" title="使用insert操作表中数据"></a>使用insert操作表中数据</h3><p>Insert into 表名 (字段名1，字段名2，字段名3)</p><p>Values (值1, 值2, 值3 ), (值1, 值2, 值3 ), (值1, 值2, 值3 )</p><p>例子：</p><p><img src="/../img/mysql/870d7fcb430882fa05e29c2babcf653dbf65ba4c.png"></p><p><img src="/../img/mysql/03291da3b57489d326e70ed42cccd7b74fe47ff0.png"></p><p><img src="/../img/mysql/8d5d3502faf255bf0994763b7e5265d08fdb4ea0.png"></p><h3 id="使用update修改表中数据"><a href="#使用update修改表中数据" class="headerlink" title="使用update修改表中数据"></a>使用update修改表中数据</h3><p>Update 表名</p><p>Set 字段名1&#x3D;值1 , 字段名2&#x3D;值2[,…]</p><p>[where 条件]</p><p><img src="/../img/mysql/829ab7cd4862fa144d806ef85ec5bcb1355c0294.png"></p><h3 id="使用delete删除表中数据"><a href="#使用delete删除表中数据" class="headerlink" title="使用delete删除表中数据"></a>使用delete删除表中数据</h3><p>Delete from 表名</p><p>[where 条件]</p><p>例子：</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">Delete</span> <span class="hljs-keyword">from</span> student <span class="hljs-keyword">where</span> sNo=<span class="hljs-string">&#x27;1308013105&#x27;</span>;<br></code></pre></td></tr></table></figure><blockquote><p>会删除所在字段（sNo）的那一行的数据，不是只单单删除sNo</p></blockquote><h3 id="使用truncate语句清空表中数据"><a href="#使用truncate语句清空表中数据" class="headerlink" title="使用truncate语句清空表中数据"></a>使用truncate语句清空表中数据</h3><p>Truncate [table] 表名</p><h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">Use</span> 数据库名字;<br><span class="hljs-keyword">Drop</span> <span class="hljs-keyword">table</span> 表名;<br></code></pre></td></tr></table></figure><h2 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>MySQL 的索引类型主要有以下几种。</p><p>• 普通索引（NDEX）：最基本的索引，它没有任何限制，是用来提升数据库性能、提高</p><p>数据查询效率的一项重要的技术。</p><p>• 唯一性索引（UNIQUE)）：索引列的值必须唯一，但允许有空值。一张表中可以有多个</p><p>唯一性索引。如果是组合索引，则列值的组合必须唯一。</p><p>• 主键索引（PRIMARY KEY)：一种特殊的唯一性索引，但不允许有空值。一张表中只能</p><p>有一个主键。为了有效实现数据的管理，每张表都应该有自己的主键，一般是在建表的</p><p>同时创建主键索引。</p><p>• 全文索引（FULLITEXT)：主要用来查找文本中的关键字，而不是直接与索引中的值相</p><p>比较。全文索引跟其他索引大不相同，它更像是一个搜索引擎，而不是简单的 WHERE</p><p>语句的参数匹配。全文索引配合 MATCH AGAINST 操作使用，而不是一般的 WHERE</p><p>语句加 LIKE。目前只有 CHAR、VARCHAR、TEXT 列上可以创建全文索引。</p><h3 id="在create-table创建索引"><a href="#在create-table创建索引" class="headerlink" title="在create table创建索引"></a>在create table创建索引</h3><p>Create table 表名 (</p><p>字段名1 | 索引项…,</p><p>)</p><p>索引项的语法：</p><p>Primary key 索引名 (字段名)</p><p>Unique 索引名 (字段名)</p><p>Index | key 索引名 (字段名)</p><p>Fulltext 索引名 (字段名)</p><p>例子</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Create</span> <span class="hljs-keyword">table</span> student (<br>Id <span class="hljs-type">int</span> unsigned <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> auto_increment <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;学生ID&#x27;</span>,<br>sNo <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;学号&#x27;</span>,<br>sName <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;姓名&#x27;</span>,<br>sex <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&#x27;男&#x27;</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;性别&#x27;</span>,<br>birthday <span class="hljs-type">Date</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;出生日期&#x27;</span>,<br>depyName <span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;班级名称&#x27;</span>,<br>remark <span class="hljs-type">Varchar</span>(<span class="hljs-number">80</span>) <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;备注&#x27;</span>,<br><span class="hljs-keyword">primary key</span> (id), /         \*设置id为主键\*/<br><span class="hljs-keyword">unique</span> (sNo), /             \*设置sNo为唯一性索引\*/<br><span class="hljs-keyword">index</span> (sName) /             \*设置sName为普通索引\*/<br>); ENGINE=InnoDB;<br></code></pre></td></tr></table></figure><p>Not null 不为空 unsigned无符号 auto_increment自动增加</p><h3 id="使用alter-table-语句创建索引"><a href="#使用alter-table-语句创建索引" class="headerlink" title="使用alter table 语句创建索引"></a>使用alter table 语句创建索引</h3><p>Alter table 表名</p><p>​Add 索引项;</p><p>例子:</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Alter</span> <span class="hljs-keyword">table</span> course <br>   <span class="hljs-keyword">Add</span> <span class="hljs-keyword">unique</span> ux_cNo(cNo),<br>   <span class="hljs-keyword">Add</span> <span class="hljs-keyword">index</span> ix_cName(cName);<br></code></pre></td></tr></table></figure><h3 id="使用create-index语句创建索引"><a href="#使用create-index语句创建索引" class="headerlink" title="使用create index语句创建索引"></a>使用create index语句创建索引</h3><p>Create [unique] | [fulltext] index 索引名</p><p>On 表名 (字段名)</p><p>例子：</p><p>在成绩表上创建唯一性索引（组合索引）</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">Create</span> <span class="hljs-keyword">unique</span> <span class="hljs-keyword">index</span> ux_sId_cId<br>  <span class="hljs-keyword">ON</span> score (sId,cId);<br></code></pre></td></tr></table></figure><h3 id="使用Show-index-语句查看索引"><a href="#使用Show-index-语句查看索引" class="headerlink" title="使用Show index 语句查看索引"></a>使用Show index 语句查看索引</h3><p>Show index from &lt;表名&gt; [from &lt;数据库名字&gt;]</p><p>例子：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Show</span> <span class="hljs-keyword">index</span> <span class="hljs-keyword">from</span> student;<br></code></pre></td></tr></table></figure><p>查看学生表中的索引</p><h2 id="Select查询"><a href="#Select查询" class="headerlink" title="Select查询"></a>Select查询</h2><p>应该是到这会用到sql语句，<a href="https://qianyios.top/img/mysql/mysql.sql">[点此下载]</a></p><h3 id="选择字段进行查询"><a href="#选择字段进行查询" class="headerlink" title="选择字段进行查询"></a>选择字段进行查询</h3><p>Select 字段1 [,字段2,字段3] from 表名;</p><p>例子：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Select</span> deptname,<span class="hljs-type">name</span>,sNo,sex <span class="hljs-keyword">from</span> student;<br></code></pre></td></tr></table></figure><h3 id="定义字段别名"><a href="#定义字段别名" class="headerlink" title="定义字段别名"></a>定义字段别名</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">Select</span> sNo <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;学号&#x27;</span> , sName <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;姓名&#x27;</span> <span class="hljs-keyword">from</span> student;<br></code></pre></td></tr></table></figure><h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><p><img src="/../img/mysql/02b82bb8513212355e8b349a521dd61352fa83ab.png"></p><p><img src="/../img/mysql/0869742823f759f5ef48ea5f6a8f212372a07306.png"></p><p><img src="/../img/mysql/dc7ea9e3a84db07ccd8c1d472ef16f831fad3426.png"></p><h3 id="使用like模糊查询"><a href="#使用like模糊查询" class="headerlink" title="使用like模糊查询"></a>使用like模糊查询</h3><p><img src="/../img/mysql/6bbc28deea707327f633a79a9ac2ea993492b6f5.png"></p><h3 id="使用in-进行范围查询"><a href="#使用in-进行范围查询" class="headerlink" title="使用in 进行范围查询"></a>使用in 进行范围查询</h3><p><img src="/../img/mysql/4b38a89d27f92c66b4f55b09b22571b41b2ff6c3.png"></p><h3 id="使用order-by-子句对查询结果"><a href="#使用order-by-子句对查询结果" class="headerlink" title="使用order by 子句对查询结果"></a>使用order by 子句对查询结果</h3><p>降序</p><p><img src="/../img/mysql/c4e74778d15b3e25dcb87ad2ec9b04c019c599b6.png"></p><p>中文名拼音排序</p><p><img src="/../img/mysql/48dc17ccb73d158d933bf667457f976eabe78571.png"></p><p>先按班级升序排列，同一个班级内出生日期降序排列</p><p><img src="/../img/mysql/4129c38cb1145c4c31a10e67a4bdbf53ab912a02.png"></p><h3 id="使用limit子句限制返回记录的行数"><a href="#使用limit子句限制返回记录的行数" class="headerlink" title="使用limit子句限制返回记录的行数"></a>使用limit子句限制返回记录的行数</h3><p><img src="/../img/mysql/6ef0e0ae9356a9bd35a73381331280a84b5f36e8.png"></p><h3 id="使用distinct关键字过滤重复记录"><a href="#使用distinct关键字过滤重复记录" class="headerlink" title="使用distinct关键字过滤重复记录"></a>使用distinct关键字过滤重复记录</h3><p><img src="/../img/mysql/3da439822e837155ff79dd886f279e0e092a401c.png"></p><h3 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h3><p><img src="/../img/mysql/74f1484406a0109e04a42774390fc77908378d87.png"></p><h3 id="使用统计函数对数据进行统计汇总"><a href="#使用统计函数对数据进行统计汇总" class="headerlink" title="使用统计函数对数据进行统计汇总"></a>使用统计函数对数据进行统计汇总</h3><p><img src="/../img/mysql/edbb900f843983091f50c8678b3fa4f25f54a9c0.png"></p><p><img src="/../img/mysql/1936d5b3fc30d96fd6504fad3971c68a7a68ff62.png"></p><h3 id="使用group-by进行分组查询"><a href="#使用group-by进行分组查询" class="headerlink" title="使用group by进行分组查询"></a>使用group by进行分组查询</h3><p><img src="/../img/mysql/54660d6d3fde2a35c69acba916a16fa91ed11f36.png"></p><h3 id="使用having子句对分组汇总结果进行筛选"><a href="#使用having子句对分组汇总结果进行筛选" class="headerlink" title="使用having子句对分组汇总结果进行筛选"></a>使用having子句对分组汇总结果进行筛选</h3><p><img src="/../img/mysql/3db2b7135bda4f3f009cc75b3c23b318902d822f.png"></p><h3 id="使用exists关键字创建子查询"><a href="#使用exists关键字创建子查询" class="headerlink" title="使用exists关键字创建子查询"></a>使用exists关键字创建子查询</h3><p>查询选修课程的女生名单</p><p><img src="/../img/mysql/0a0f67652b270bf9a6c44bf15441c4d79703f59d.png"></p><h2 id="薄弱盲区"><a href="#薄弱盲区" class="headerlink" title="薄弱盲区"></a>薄弱盲区</h2><h3 id="复制表到新表"><a href="#复制表到新表" class="headerlink" title="复制表到新表"></a>复制表到新表</h3><p><img src="/../img/mysql/94311847f82a568ae2d73e53970b45e5af4a22b5.png"></p><h3 id="向表中插入子查询结果"><a href="#向表中插入子查询结果" class="headerlink" title="向表中插入子查询结果"></a>向表中插入子查询结果</h3><p><img src="/../img/mysql/92a788abdb0eb28c8a3e5f874ea5f55f6d16e5cf.png"></p><h3 id="带子查询的修改语句"><a href="#带子查询的修改语句" class="headerlink" title="带子查询的修改语句"></a>带子查询的修改语句</h3><p><img src="/../img/mysql/e479bfcdbf3598eb81b216d7dc9dde78ba16a96b.png"></p><h3 id="带子查询的删除语句"><a href="#带子查询的删除语句" class="headerlink" title="带子查询的删除语句"></a>带子查询的删除语句</h3><p><img src="/../img/mysql/a4b432f0b05697044d85067e2da30284ed5e1f2d.png"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Mysql</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos 8部署Docker</title>
    <link href="/2023/01/17/Centos8%20docker/"/>
    <url>/2023/01/17/Centos8%20docker/</url>
    
    <content type="html"><![CDATA[<h1 id="Centos-8部署Docker"><a href="#Centos-8部署Docker" class="headerlink" title="Centos 8部署Docker"></a>Centos 8部署Docker</h1><h2 id="基础信息"><a href="#基础信息" class="headerlink" title="基础信息"></a>基础信息</h2><table><thead><tr><th>系统</th><th>ip  (NAT)</th><th>内存</th><th>硬盘</th></tr></thead><tbody><tr><td>Centos 8.5</td><td>192.168.48.10</td><td>2G</td><td>40G</td></tr></tbody></table><p>基本配置好可以访问互联网即可</p><h3 id="切换阿里yum"><a href="#切换阿里yum" class="headerlink" title="切换阿里yum"></a>切换阿里yum</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># mkdir repo.bak</span><br>[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># cp /etc/yum.repos.d/* repo.bak/</span><br>[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># rename <span class="hljs-string">&#x27;.repo&#x27;</span> <span class="hljs-string">&#x27;.repo.bak&#x27;</span> /etc/yum.repos.d/*.repo</span><br>[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo</span><br>[root<span class="hljs-symbol">@Docker</span>~]<span class="hljs-meta"># yum clean all &amp;&amp; yum makecache</span><br>[root<span class="hljs-symbol">@Docker</span>~]<span class="hljs-meta"># systemctl disable --now firewalld</span><br>[root<span class="hljs-symbol">@Docker</span>~]<span class="hljs-meta"># sed -i <span class="hljs-string">&#x27;s/^SELINUX=.*/SELINUX=disabled/&#x27;</span> /etc/selinux/config</span><br>[root<span class="hljs-symbol">@Docker</span>~]<span class="hljs-meta"># yum update -y</span><br></code></pre></td></tr></table></figure><h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2><h3 id="删除旧版docker"><a href="#删除旧版docker" class="headerlink" title="删除旧版docker"></a>删除旧版docker</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@Docker ~]<span class="hljs-comment"># sudo yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine -y</span><br></code></pre></td></tr></table></figure><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></code></pre></td></tr></table></figure><h3 id="添加阿里docker存储库"><a href="#添加阿里docker存储库" class="headerlink" title="添加阿里docker存储库"></a>添加阿里docker存储库</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@Docker ~]<span class="hljs-comment"># dnf config-manager --add-repo=https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br>[root@Docker ~]<span class="hljs-comment"># yum clean all &amp;&amp; yum makecache </span><br></code></pre></td></tr></table></figure><h3 id="安装docker软件"><a href="#安装docker软件" class="headerlink" title="安装docker软件"></a>安装docker软件</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># yum install -y --allowerasing docker-ce docker-ce-cli</span><br></code></pre></td></tr></table></figure><h3 id="启动docker服务"><a href="#启动docker服务" class="headerlink" title="启动docker服务"></a>启动docker服务</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@Docker ~]<span class="hljs-comment"># systemctl enable docker --now</span><br></code></pre></td></tr></table></figure><h3 id="验证是否安装成功"><a href="#验证是否安装成功" class="headerlink" title="验证是否安装成功"></a>验证是否安装成功</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[root@Docker ~]<span class="hljs-comment"># docker run hello-world</span><br><span class="hljs-comment">#未检测到hello-world镜像</span><br>Unable <span class="hljs-keyword">to</span> find image <span class="hljs-string">&#x27;hello-world:latest&#x27;</span> locally<br><span class="hljs-comment">#从远程的DockerHub仓库拉取镜像</span><br>latest: Pulling <span class="hljs-keyword">from</span> library/hello-world<br><span class="hljs-number">2db</span>29710123e: Pull complete<br>Digest: sha256:aa0cc8055b82dc2509bed2e19b275c8f463506616377219d9642221ab53cf9fe<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> hello-world:latest<br><span class="hljs-comment">#出现下面说明docker运行成功</span><br>Hello <span class="hljs-keyword">from</span> Docker!  -------<br>This message shows <span class="hljs-literal">that</span> your installation appears <span class="hljs-keyword">to</span> be working correctly.<br><br>To generate this message, Docker took the following steps:<br> <span class="hljs-number">1.</span> The Docker client contacted the Docker daemon.<br> <span class="hljs-number">2.</span> The Docker daemon pulled the <span class="hljs-string">&quot;hello-world&quot;</span> image <span class="hljs-keyword">from</span> the Docker Hub.<br>    (amd64)<br> <span class="hljs-number">3.</span> The Docker daemon created a <span class="hljs-keyword">new</span> container <span class="hljs-keyword">from</span> <span class="hljs-literal">that</span> image which runs the<br>    executable <span class="hljs-literal">that</span> produces the output you are currently reading.<br> <span class="hljs-number">4.</span> The Docker daemon streamed <span class="hljs-literal">that</span> output <span class="hljs-keyword">to</span> the Docker client, which sent <span class="hljs-literal">it</span><br>    <span class="hljs-keyword">to</span> your terminal.<br>To <span class="hljs-keyword">try</span> something more ambitious, you can run an Ubuntu container with:<br> $ docker run -<span class="hljs-literal">it</span> ubuntu bash<br>Share images, automate workflows, <span class="hljs-keyword">and</span> more <span class="hljs-keyword">with</span> a free Docker ID:<br> https:<span class="hljs-regexp">//hub.docker.com/</span><br><span class="hljs-regexp">For more examples and ideas, visit:</span><br><span class="hljs-regexp"> https://</span>docs.docker.com<span class="hljs-regexp">/get-started/</span><br><br></code></pre></td></tr></table></figure><h2 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker compose"></a>安装docker compose</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 设置 Docker 镜像加速器</span><br>sudo mkdir -p <span class="hljs-regexp">/etc/</span>docker<br>sudo tee <span class="hljs-regexp">/etc/</span>docker/daemon.json &lt;&lt;-<span class="hljs-string">&#x27;EOF&#x27;</span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://registry.docker-cn.com&quot;</span>]<br>&#125;<br>EOF<br>sudo systemctl daemon-reload<br>sudo systemctl restart docker<br><br><span class="hljs-comment"># 安装 Docker Compose</span><br>sudo curl -L <span class="hljs-string">&quot;https://get.daocloud.io/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot;</span> -o <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>docker-compose<br>sudo chmod +x <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>docker-compose<br>sudo systemctl enable docker --now<br>sudo systemctl restart docker<br><br>sudo usermod -aG docker <span class="hljs-variable">$USER</span><br></code></pre></td></tr></table></figure><h2 id="使用Docker创建新的镜像"><a href="#使用Docker创建新的镜像" class="headerlink" title="使用Docker创建新的镜像"></a>使用Docker创建新的镜像</h2><h3 id="检索Docker仓库中的Ubuntu镜像"><a href="#检索Docker仓库中的Ubuntu镜像" class="headerlink" title="检索Docker仓库中的Ubuntu镜像"></a>检索Docker仓库中的Ubuntu镜像</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@Docker ~]<span class="hljs-comment"># docker search ubuntu</span><br>NAME                             DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED<br>ubuntu                           Ubuntu <span class="hljs-keyword">is</span> a Debian-based Linux operating sys…   <span class="hljs-number">15464</span>     [OK]     <br>......<br></code></pre></td></tr></table></figure><h3 id="获取Ubuntu镜像"><a href="#获取Ubuntu镜像" class="headerlink" title="获取Ubuntu镜像"></a>获取Ubuntu镜像</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs makefile">[root@Docker ~]<span class="hljs-comment"># docker pull ubuntu</span><br>Using default tag: latest<br><span class="hljs-section">latest: Pulling from library/ubuntu</span><br><span class="hljs-section">6e3729cf69e0: Pull complete</span><br><span class="hljs-section">Digest: sha256:27cb6e6ccef575a4698b66f5de06c7ecd61589132d5a91d098f7f3f9285415a9</span><br><span class="hljs-section">Status: Downloaded newer image for ubuntu:latest</span><br><span class="hljs-section">docker.io/library/ubuntu:latest</span><br></code></pre></td></tr></table></figure><h3 id="查看本地Docker镜像"><a href="#查看本地Docker镜像" class="headerlink" title="查看本地Docker镜像"></a>查看本地Docker镜像</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[root@Docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY    <span class="hljs-keyword">TAG</span>       <span class="hljs-title">IMAGE</span> ID       CREATED         SIZE<br>ubuntu        latest    <span class="hljs-number">6</span>b7dfa7e8fdb   <span class="hljs-number">5</span> weeks ago     <span class="hljs-number">77.8M</span>B<br>hello-world   latest    feb5d9fea6a5   <span class="hljs-number">16</span> months ago   <span class="hljs-number">13.3</span>kB<br></code></pre></td></tr></table></figure><blockquote><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">Docker镜像列表选项字段说明如下。<br>REPOSITORY  镜像的名称<br><span class="hljs-keyword">TAG</span>       <span class="hljs-title">镜像的标签</span><br><span class="hljs-title">IMAGE</span> ID      镜像的ID<br>CREATED       镜像创建时间<br>SIZE             镜像大小<br></code></pre></td></tr></table></figure></blockquote><h3 id="启动docker容器"><a href="#启动docker容器" class="headerlink" title="启动docker容器"></a>启动docker容器</h3><blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros">使用docker <span class="hljs-built_in">run</span> 命令可启动容器，Docker 启动时其执行过程如下。<br>· 检查本地是否存在指定的Docker 镜像，如果不存在将从Docker仓库下载。<br>· 使用Docker 镜像创建并启动Docker 容器。<br>· 为Docker容器分配一个文件系统，并在只读的镜像层外面挂载一层可读写层。<br>· 从Docker宿主机中配置的网桥接口中桥接一个虚拟接口到容器。<br>· 从Docker 网络的地址池中分配一个IP地址给当前容器。<br>· 执行用户指定的程序。<br>` 执行完毕后终止容器。<br></code></pre></td></tr></table></figure></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">创建基于本地ubuntu镜像的docker容器<br>[root@Docker ~]<span class="hljs-comment"># docker run -it ubuntu /bin/bash</span><br>root@<span class="hljs-number">136156</span>e4c448:/<span class="hljs-comment">#</span><br>root@<span class="hljs-number">136156</span>e4c448:/<span class="hljs-comment"># exit</span><br><span class="hljs-keyword">exit</span><br>[root@Docker ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><h3 id="更新并创建Docker镜像"><a href="#更新并创建Docker镜像" class="headerlink" title="更新并创建Docker镜像"></a>更新并创建Docker镜像</h3><h4 id="更新ubuntu镜像添加ping"><a href="#更新ubuntu镜像添加ping" class="headerlink" title="更新ubuntu镜像添加ping"></a>更新ubuntu镜像添加ping</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs autoit">当本地的镜像不能满足日常需求，可从已创建的容器中更新并提交镜像。最新版的ubuntu没有安装<span class="hljs-built_in">ping</span>，本步骤将在ubuntu安装<span class="hljs-built_in">ping</span>，并建立新的镜像<br><span class="hljs-meta">#启动 ubuntu容器，每次创建容器会产生新的id（9eac21a09449）要记录好</span><br>[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># docker run -t -i  ubuntu:latest /bin/bash</span><br>root<span class="hljs-symbol">@9eac21a09449</span>:/<span class="hljs-meta"># apt update</span><br>Get:<span class="hljs-number">1</span> http://security.ubuntu.com/ubuntu jammy-security InRelease [<span class="hljs-number">110</span> kB]<br>......<br>root<span class="hljs-symbol">@9eac21a09449</span>:/<span class="hljs-meta"># ping jd.com</span><br>bash: <span class="hljs-built_in">ping</span>: command <span class="hljs-literal">not</span> found<br><span class="hljs-meta">#安装ping</span><br>root<span class="hljs-symbol">@9eac21a09449</span>:/<span class="hljs-meta"># apt-get install -y iputils-ping</span><br>Reading package lists... Done<br>root<span class="hljs-symbol">@9eac21a09449</span>:/<span class="hljs-meta"># ping -c 2 jd.com</span><br><span class="hljs-built_in">PING</span> jd.com (<span class="hljs-number">111.13</span><span class="hljs-number">.149</span><span class="hljs-number">.108</span>) <span class="hljs-number">56</span>(<span class="hljs-number">84</span>) bytes of data.<br><span class="hljs-number">64</span> bytes from <span class="hljs-number">111.13</span><span class="hljs-number">.149</span><span class="hljs-number">.108</span> (<span class="hljs-number">111.13</span><span class="hljs-number">.149</span><span class="hljs-number">.108</span>): icmp_seq=<span class="hljs-number">1</span> ttl=<span class="hljs-number">127</span> time=<span class="hljs-number">43.7</span> ms<br><span class="hljs-number">64</span> bytes from <span class="hljs-number">111.13</span><span class="hljs-number">.149</span><span class="hljs-number">.108</span>: icmp_seq=<span class="hljs-number">2</span> ttl=<span class="hljs-number">127</span> time=<span class="hljs-number">44.6</span> ms<br><span class="hljs-meta">#退出</span><br>root<span class="hljs-symbol">@9eac21a09449</span>:/<span class="hljs-meta"># exit</span><br><span class="hljs-keyword">exit</span><br><span class="hljs-meta">#操作完成后可基于该docker容器创建新的docker镜像</span><br><span class="hljs-meta">#创建新的docker镜像</span><br>[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># docker commit -m <span class="hljs-string">&#x27;ubuntu增加ping命令&#x27;</span> -a <span class="hljs-string">&#x27;docker&#x27;</span> 9eac21a09449 ping/ubuntu:v2</span><br>sha256:<span class="hljs-number">7655</span>d7758bcfa635dde3cf8064602a32ac625100a1b7763e7856ff6052c8abee<br>[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># docker images</span><br>REPOSITORY    TAG       IMAGE ID       CREATED          SIZE<br><span class="hljs-built_in">ping</span>/ubuntu   v2        <span class="hljs-number">7655</span>d7758bcf   <span class="hljs-number">10</span> seconds ago   <span class="hljs-number">120</span>MB<br>ubuntu        latest    <span class="hljs-number">6</span>b7dfa7e8fdb   <span class="hljs-number">5</span> weeks ago      <span class="hljs-number">77.8</span>MB<br>hello-world   latest    feb5d9fea6a5   <span class="hljs-number">16</span> months ago    <span class="hljs-number">13.3</span>kB<br><span class="hljs-meta">#运行新创建的容器，测试ping</span><br>[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># docker run -it ping/ubuntu:v2 /bin/bash</span><br>root<span class="hljs-symbol">@7015378380d7</span>:/<span class="hljs-meta"># ping jd.com -c 3</span><br><span class="hljs-built_in">PING</span> jd.com (<span class="hljs-number">111.13</span><span class="hljs-number">.149</span><span class="hljs-number">.108</span>) <span class="hljs-number">56</span>(<span class="hljs-number">84</span>) bytes of data.<br><span class="hljs-number">64</span> bytes from <span class="hljs-number">111.13</span><span class="hljs-number">.149</span><span class="hljs-number">.108</span> (<span class="hljs-number">111.13</span><span class="hljs-number">.149</span><span class="hljs-number">.108</span>): icmp_seq=<span class="hljs-number">1</span> ttl=<span class="hljs-number">127</span> time=<span class="hljs-number">44.1</span> ms<br><span class="hljs-number">64</span> bytes from <span class="hljs-number">111.13</span><span class="hljs-number">.149</span><span class="hljs-number">.108</span> (<span class="hljs-number">111.13</span><span class="hljs-number">.149</span><span class="hljs-number">.108</span>): icmp_seq=<span class="hljs-number">2</span> ttl=<span class="hljs-number">127</span> time=<span class="hljs-number">44.9</span> ms<br><span class="hljs-number">64</span> bytes from <span class="hljs-number">111.13</span><span class="hljs-number">.149</span><span class="hljs-number">.108</span>: icmp_seq=<span class="hljs-number">3</span> ttl=<span class="hljs-number">127</span> time=<span class="hljs-number">45.1</span> ms<br><br></code></pre></td></tr></table></figure><h4 id="使用dockerfile创建镜像"><a href="#使用dockerfile创建镜像" class="headerlink" title="使用dockerfile创建镜像"></a>使用dockerfile创建镜像</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">Dockerfile是由一系列命令和参数脚本构成的脚本，这些命令可在基础镜像上一次执行，最终创建一个新的Docker镜像<br></code></pre></td></tr></table></figure><p>编辑dockerfile</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">[root@Docker ~]<span class="hljs-comment"># vi /root/Dockerfile</span><br><span class="hljs-comment">#基础镜像信息</span><br><span class="hljs-keyword">FROM</span> ubuntu<br><span class="hljs-comment">#维护者信息</span><br><span class="hljs-keyword">MAINTAINER</span> book_user book@<span class="hljs-number">123</span>.com<br><span class="hljs-comment">#镜像操作指令</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt update</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get install -y iputils-ping</span><br><span class="hljs-comment">#容器启动时执行的命令</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> <span class="hljs-built_in">cd</span> /opt</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;new docker&#x27;</span> &gt; readme.txt</span><br></code></pre></td></tr></table></figure><blockquote><p>Dockerfile中每一个指令都会在镜像上创建一个新的镜像层，每一个指令的前缀都必须是大写的，其创建过程如下</p></blockquote><p>使用docker build 命令从dockerfile文件创建镜像</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># docker build -t <span class="hljs-string">&quot;book/ubuntu:v3&quot;</span> .</span><br><span class="hljs-meta">#末尾小数点别忘了，接下来，他就会按照dockerfile文件中的命令一一执行</span><br><br>[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># docker images</span><br>REPOSITORY    TAG       IMAGE ID       CREATED          SIZE<br>book/ubuntu   v3        <span class="hljs-number">90</span>bbd384b2a3   <span class="hljs-number">59</span> seconds ago   <span class="hljs-number">120</span>MB<br><span class="hljs-built_in">ping</span>/ubuntu   v2        <span class="hljs-number">7655</span>d7758bcf   <span class="hljs-number">17</span> minutes ago   <span class="hljs-number">120</span>MB<br>ubuntu        latest    <span class="hljs-number">6</span>b7dfa7e8fdb   <span class="hljs-number">5</span> weeks ago      <span class="hljs-number">77.8</span>MB<br>hello-world   latest    feb5d9fea6a5   <span class="hljs-number">16</span> months ago    <span class="hljs-number">13.3</span>kB<br><br><span class="hljs-meta">#删除本地的docker镜像</span><br>[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># docker rmi hello-world</span><br>Error response from daemon: conflict: unable <span class="hljs-keyword">to</span> remove repository reference <span class="hljs-string">&quot;hello-world&quot;</span> (must force) - container <span class="hljs-number">5542</span>ae3caafa is using its referenced image feb5d9fea6a5<br>出现报错说明container使用到了这个images，删除镜像前需要删除基于此镜像创建的容器<br><br><span class="hljs-meta">#查询容器列表</span><br>[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># docker ps -a</span><br>CONTAINER ID   IMAGE            COMMAND       CREATED          STATUS                        PORTS     NAMES<br><span class="hljs-number">7015378380</span>d7   <span class="hljs-built_in">ping</span>/ubuntu:v2   <span class="hljs-string">&quot;/bin/bash&quot;</span>   <span class="hljs-number">19</span> minutes ago   Exited (<span class="hljs-number">127</span>) <span class="hljs-number">15</span> minutes ago             nervous_lamarr<br><span class="hljs-number">37</span>ac7bf75dbc   <span class="hljs-built_in">ping</span>/ubuntu:v2   <span class="hljs-string">&quot;/bin/bash&quot;</span>   <span class="hljs-number">19</span> minutes ago   Exited (<span class="hljs-number">0</span>) <span class="hljs-number">19</span> minutes ago               peaceful_galois<br><span class="hljs-number">9</span>eac21a09449   ubuntu:latest    <span class="hljs-string">&quot;/bin/bash&quot;</span>   <span class="hljs-number">32</span> minutes ago   Exited (<span class="hljs-number">130</span>) <span class="hljs-number">26</span> minutes ago             angry_golick<br><span class="hljs-number">136156e4</span>c448   ubuntu           <span class="hljs-string">&quot;/bin/bash&quot;</span>   <span class="hljs-number">34</span> minutes ago   Exited (<span class="hljs-number">130</span>) <span class="hljs-number">33</span> minutes ago             intelligent_proskuriakova<br><span class="hljs-number">5542</span>ae3caafa   hello-world      <span class="hljs-string">&quot;/hello&quot;</span>      <span class="hljs-number">46</span> minutes ago   Exited (<span class="hljs-number">0</span>) <span class="hljs-number">46</span> minutes ago               pensive_newton<br><span class="hljs-meta">#删除容器</span><br>[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># docker rm 5542ae3caafa</span><br><span class="hljs-number">5542</span>ae3caafa<br>删除镜像<br>[root<span class="hljs-symbol">@Docker</span> ~]<span class="hljs-meta"># docker rmi hello-world</span><br>Untagged: hello-world:latest<br>Untagged: hello-world<span class="hljs-symbol">@sha256</span>:aa0cc8055b82dc2509bed2e19b275c8f463506616377219d9642221ab53cf9fe<br>Deleted: sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412<br>Deleted: sha256:e07ee1baac5fae6a26f30cabfe54a36d3402f96afda318fe0a96cec4ca393359<br><br></code></pre></td></tr></table></figure><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 8</tag>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos 8 stream 初始配置</title>
    <link href="/2023/01/14/C8/"/>
    <url>/2023/01/14/C8/</url>
    
    <content type="html"><![CDATA[<h1 id="Centos-8-strean-初始配置"><a href="#Centos-8-strean-初始配置" class="headerlink" title="Centos 8 strean 初始配置"></a>Centos 8 strean 初始配置</h1><h2 id="配置网络yum"><a href="#配置网络yum" class="headerlink" title="配置网络yum"></a>配置网络yum</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> /etc/yum.repos.d/CentOS-Stream-BaseOS.repo /etc/yum.repos.d/CentOS-Stream-BaseOS.repo.bak<br><br>sed -i <span class="hljs-string">&#x27;s/mirrorlist/#mirrorlist/&#x27;</span> /etc/yum.repos.d/CentOS-Stream-BaseOS.repo<br><br>sed -i <span class="hljs-string">&#x27;s/#baseurl=http:\/\/mirror.centos.org/baseurl=http:\/\/mirrors.aliyun.com/g&#x27;</span> /etc/yum.repos.d/CentOS-Stream-BaseOS.repo<br></code></pre></td></tr></table></figure><h2 id="配置本地yum"><a href="#配置本地yum" class="headerlink" title="配置本地yum"></a>配置本地yum</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@localhost ~]</span><span class="hljs-comment"># mkdir repo.bak</span><br><span class="hljs-section">[root@localhost ~]</span><span class="hljs-comment"># mv /etc/yum.repos.d/* repo.bak/</span><br><span class="hljs-section">[root@localhost ~]</span><span class="hljs-comment"># vi /etc/yum.repos.d/centos.repo</span><br>    <span class="hljs-section">[BaseOS]</span><br>    <span class="hljs-attr">name</span>=BaseOS<br>    <span class="hljs-attr">baseurl</span>=file:///mnt/BaseOS<br>    <span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">0</span><br>    <span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span><br><br>    <span class="hljs-section">[AppStream]</span><br>    <span class="hljs-attr">name</span>=AppStream<br>    <span class="hljs-attr">baseurl</span>=file:///mnt/AppStream<br>    <span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">0</span><br>    <span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span><br><span class="hljs-section">[root@localhost ~]</span><span class="hljs-comment"># yum clean all &amp;&amp; yum makecache</span><br></code></pre></td></tr></table></figure><h2 id="配置防火墙和Selinux"><a href="#配置防火墙和Selinux" class="headerlink" title="配置防火墙和Selinux"></a>配置防火墙和Selinux</h2><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># systemctl disable --now firewalld</span><br>    Removed <span class="hljs-string">&quot;/etc/systemd/system/multi-user.target.wants/firewalld.service&quot;</span>.<br>    Removed <span class="hljs-string">&quot;/etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service&quot;</span>.<br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># sed -i <span class="hljs-string">&#x27;s/^SELINUX=.*/SELINUX=disabled/&#x27;</span> /etc/selinux/config</span><br></code></pre></td></tr></table></figure><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 8 stream</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos 7 部署 NFS 服务</title>
    <link href="/2023/01/14/NFS/"/>
    <url>/2023/01/14/NFS/</url>
    
    <content type="html"><![CDATA[<h1 id="Centos7-部署-NFS-服务"><a href="#Centos7-部署-NFS-服务" class="headerlink" title="Centos7 部署 NFS 服务"></a>Centos7 部署 NFS 服务</h1><h2 id="环境部署"><a href="#环境部署" class="headerlink" title="环境部署"></a>环境部署</h2><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@localhost ~]<span class="hljs-comment"># mkdir repo.bak</span><br>[root@localhost ~]<span class="hljs-comment"># mv /etc/yum.repos.d/* repo.bak/</span><br>[root@localhost ~]<span class="hljs-comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.ali yun.com/repo/Centos-7.repo</span><br>[root@localhost ~]<span class="hljs-comment"># yum clean all &amp;&amp; yum makecache</span><br>[root@localhost ~]<span class="hljs-comment"># systemctl disable firewalld --now</span><br>[root@localhost ~]<span class="hljs-comment"># sed -i &#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27; /etc/sysconfig/selinux</span><br>[root@localhost ~]<span class="hljs-comment"># yum update -y</span><br></code></pre></td></tr></table></figure><h2 id="安装NFS服务"><a href="#安装NFS服务" class="headerlink" title="安装NFS服务"></a>安装NFS服务</h2><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># yum install -y nfs-utils</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># systemcenable --now rpcbind nfs-server</span><br></code></pre></td></tr></table></figure><h2 id="配置NFS服务"><a href="#配置NFS服务" class="headerlink" title="配置NFS服务"></a>配置NFS服务</h2><h3 id="创建共享目录"><a href="#创建共享目录" class="headerlink" title="创建共享目录"></a>创建共享目录</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># mkdir /nfs</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># chmod -R 777 /nfs</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># cp /etc/exports /etc/exports.bak</span><br>[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># vi /etc/exports</span><br>     /nfs *(rw,sync,no_root_squash)<br></code></pre></td></tr></table></figure><h3 id="重启NFS服务"><a href="#重启NFS服务" class="headerlink" title="重启NFS服务"></a>重启NFS服务</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># systemctl restart nfs-server</span><br></code></pre></td></tr></table></figure><h2 id="挂载NFS磁盘"><a href="#挂载NFS磁盘" class="headerlink" title="挂载NFS磁盘"></a>挂载NFS磁盘</h2><h3 id="确认nfs模式开了没"><a href="#确认nfs模式开了没" class="headerlink" title="确认nfs模式开了没"></a>确认nfs模式开了没</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@localhost ~]# systemctl status rpcbind nfs-server<br>● rpcbind.service - RPC bind<span class="hljs-built_in"> service</span><br><span class="hljs-built_in"></span>   Loaded: loaded (/usr/lib/systemd/system/rpcbind.service; enabled; vendor preset: enabled)<br>   Active: active (running) since Fri 2023-01-13 20:27:13 CST; 1h 46min ago<br>  Process: 727 <span class="hljs-attribute">ExecStart</span>=/sbin/rpcbind -w <span class="hljs-variable">$RPCBIND_ARGS</span> (<span class="hljs-attribute">code</span>=exited, <span class="hljs-attribute">status</span>=0/SUCCESS)<br> Main PID: 736 (rpcbind)<br>   CGroup: /system.slice/rpcbind.service<br>           └─736 /sbin/rpcbind -w<br><br>Jan 13 20:27:13 localhost.localdomain systemd[1]: Starting RPC bind service<span class="hljs-built_in">..</span>.<br>Jan 13 20:27:13 localhost.localdomain systemd[1]: Started RPC bind service.<br><br>● nfs-server.service - NFS<span class="hljs-built_in"> server </span><span class="hljs-keyword">and</span> services<br>   Loaded: loaded (/usr/lib/systemd/system/nfs-server.service; enabled; vendor preset: disabled)<br>  Drop-In: /run/systemd/generator/nfs-server.service.d<br>           └─order-with-mounts.conf<br>   Active: active (exited) since Fri 2023-01-13 20:27:16 CST; 1h 46min ago<br>  Process: 1118 <span class="hljs-attribute">ExecStartPost</span>=/bin/sh -c <span class="hljs-keyword">if</span> systemctl -q is-active gssproxy; then systemctl reload gssproxy ; fi (<span class="hljs-attribute">code</span>=exited, <span class="hljs-attribute">status</span>=0/SUCCESS)<br>  Process: 1069 <span class="hljs-attribute">ExecStart</span>=/usr/sbin/rpc.nfsd <span class="hljs-variable">$RPCNFSDARGS</span> (<span class="hljs-attribute">code</span>=exited, <span class="hljs-attribute">status</span>=0/SUCCESS)<br>  Process: 1067 <span class="hljs-attribute">ExecStartPre</span>=/usr/sbin/exportfs -r (<span class="hljs-attribute">code</span>=exited, <span class="hljs-attribute">status</span>=1/FAILURE)<br> Main PID: 1069 (<span class="hljs-attribute">code</span>=exited, <span class="hljs-attribute">status</span>=0/SUCCESS)<br><br></code></pre></td></tr></table></figure><h3 id="在此电脑中挂载"><a href="#在此电脑中挂载" class="headerlink" title="在此电脑中挂载"></a>在此电脑中挂载</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># showmount -e 192.168.48.128</span><br>Export list <span class="hljs-keyword">for</span> <span class="hljs-number">192.168</span><span class="hljs-number">.48</span><span class="hljs-number">.128</span>:<br>/nfs *<br></code></pre></td></tr></table></figure><p>等你不要了，一定要先断开连接，否则等你关了服务器，你再点他会卡住，而且删不掉</p><p><img src="/../img/NFS/nfs.png" alt="image"></p><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 7</tag>
      
      <tag>NFS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos 8 stream 部署 kvm</title>
    <link href="/2023/01/12/KVM/"/>
    <url>/2023/01/12/KVM/</url>
    
    <content type="html"><![CDATA[<h1 id="Centos-8-stream-部署-kvm"><a href="#Centos-8-stream-部署-kvm" class="headerlink" title="Centos 8 stream 部署 kvm"></a>Centos 8 stream 部署 kvm</h1><h2 id="环境部署"><a href="#环境部署" class="headerlink" title="环境部署"></a>环境部署</h2><table><thead><tr><th>网卡模式</th><th align="left">NAT模式</th></tr></thead><tbody><tr><td>ip</td><td align="left">192.168.48.10</td></tr><tr><td>内存</td><td align="left">4G</td></tr><tr><td>核心</td><td align="left">4</td></tr><tr><td>硬盘</td><td align="left">100G</td></tr><tr><td>功能</td><td align="left">AMD-V</td></tr></tbody></table><h3 id="设置主机名"><a href="#设置主机名" class="headerlink" title="设置主机名"></a>设置主机名</h3><figure class="highlight graphql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs graphql"><span class="hljs-punctuation">[</span>root<span class="hljs-meta">@localhost</span> ~<span class="hljs-punctuation">]</span><span class="hljs-comment"># hostnamectl set-hostname KVM &amp;&amp; bash</span><br><span class="hljs-punctuation">[</span>root<span class="hljs-meta">@KVM</span> ~<span class="hljs-punctuation">]</span><span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><h3 id="设置网络"><a href="#设置网络" class="headerlink" title="设置网络"></a>设置网络</h3><h4 id="设置虚拟机网络（ens160是NAT模式）"><a href="#设置虚拟机网络（ens160是NAT模式）" class="headerlink" title="设置虚拟机网络（ens160是NAT模式）"></a>设置虚拟机网络（ens160是NAT模式）</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[root@KVM ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens160<br><span class="hljs-attribute">BOOTPROTO</span>=static<br><span class="hljs-attribute">ONBOOT</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attribute">IPADDR</span>=192.168.48.10<br><span class="hljs-attribute">PREFIX</span>=24<br><span class="hljs-attribute">GATEWAY</span>=192.168.48.2<br><span class="hljs-attribute">DNS1</span>=192.168.48.2<br><span class="hljs-attribute">DOMAIN</span>=114.114.114.114<br>[root@KVM ~]# nmcli c reload<br>[root@KVM ~]# nmcli c up ens160<span class="hljs-built_in"></span><br><span class="hljs-built_in">Connection </span>successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/4)<br>[root@KVM ~]#<span class="hljs-built_in"> ip </span>a<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN<span class="hljs-built_in"> group default </span>qlen 1000<br>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    inet 127.0.0.1/8 scope host lo<br>       valid_lft forever preferred_lft forever<br>    inet6 ::1/128 scope host<br>       valid_lft forever preferred_lft forever<br>2: ens160: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP<span class="hljs-built_in"> group default </span>qlen 1000<br>    link/ether 00:0c:29:ce:a9:48 brd ff:ff:ff:ff:ff:ff<br>    altname enp3s0<br>    inet 192.168.48.10/24 brd 192.168.48.255 scope global noprefixroute ens160<br>       valid_lft forever preferred_lft forever<br>    inet6 fe80::20c:29ff:fece:a948/64 scope link noprefixroute<br>       valid_lft forever preferred_lft forever<br>[root@KVM ~]#<span class="hljs-built_in"> ping </span>-c 4 jd.com<span class="hljs-built_in"></span><br><span class="hljs-built_in">PING </span>jd.com (111.13.149.108) 56(84) bytes of data.<br>64 bytes <span class="hljs-keyword">from</span> 111.13.149.108 (111.13.149.108): <span class="hljs-attribute">icmp_seq</span>=1 <span class="hljs-attribute">ttl</span>=48 <span class="hljs-attribute">time</span>=47.8 ms<br>64 bytes <span class="hljs-keyword">from</span> 111.13.149.108 (111.13.149.108): <span class="hljs-attribute">icmp_seq</span>=2 <span class="hljs-attribute">ttl</span>=48 <span class="hljs-attribute">time</span>=48.2 ms<br>64 bytes <span class="hljs-keyword">from</span> 111.13.149.108 (111.13.149.108): <span class="hljs-attribute">icmp_seq</span>=3 <span class="hljs-attribute">ttl</span>=48 <span class="hljs-attribute">time</span>=48.2 ms<br>64 bytes <span class="hljs-keyword">from</span> 111.13.149.108 (111.13.149.108): <span class="hljs-attribute">icmp_seq</span>=4 <span class="hljs-attribute">ttl</span>=48 <span class="hljs-attribute">time</span>=48.3 ms<br><br>--- jd.com<span class="hljs-built_in"> ping </span>statistics ---<br>4 packets transmitted, 4 received, 0% packet loss, time 6077ms<br>rtt min/avg/max/mdev = 47.845/48.146/48.297/0.235 ms<br></code></pre></td></tr></table></figure><h3 id="检查虚拟机是否支持虚拟化"><a href="#检查虚拟机是否支持虚拟化" class="headerlink" title="检查虚拟机是否支持虚拟化"></a>检查虚拟机是否支持虚拟化</h3><h4 id="勾选cpu虚拟化（宿主机是amd芯片）"><a href="#勾选cpu虚拟化（宿主机是amd芯片）" class="headerlink" title="勾选cpu虚拟化（宿主机是amd芯片）"></a>勾选cpu虚拟化（宿主机是amd芯片）</h4><p><img src="/../img/KVM/fbd0cd3b97a357db355dd55a12499b7aa272a7bd.png" alt="image-20230209225201606"></p><h4 id="查看虚拟化是否支持"><a href="#查看虚拟化是否支持" class="headerlink" title="查看虚拟化是否支持"></a>查看虚拟化是否支持</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@KVM</span> ~]<span class="hljs-meta"># lscpu</span><br>Virtualization:      AMD-V<br>说明已支持虚拟化<br></code></pre></td></tr></table></figure><h3 id="设置阿里yum源"><a href="#设置阿里yum源" class="headerlink" title="设置阿里yum源"></a>设置阿里yum源</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@KVM ~]<span class="hljs-comment"># cp /etc/yum.repos.d/CentOS-Stream-BaseOS.repo /etc/yum.repos.d/CentOS-Stream-BaseOS.repo.bak</span><br>[root@KVM ~]<span class="hljs-comment"># sed -i &#x27;s/mirrorlist/#mirrorlist/&#x27; /etc/yum.repos.d/CentOS-Stream-BaseOS.repo</span><br>[root@KVM ~]<span class="hljs-comment"># sed -i &#x27;s/#baseurl=http:\/\/mirror.centos.org/baseurl=http:\/\/mirrors.aliyun.com/g&#x27; /etc/yum.repos.d/CentOS-Stream-BaseOS.repo</span><br>[root@KVM ~]<span class="hljs-comment"># yum clean all &amp;&amp; yum makecache</span><br>0 files removed<br>CentOS Stream<span class="hljs-number"> 8 </span>- AppStream                                       <span class="hljs-number"> 14 </span>MB/s | <span class="hljs-number"> 27 </span>MB     00:01<br>CentOS Stream<span class="hljs-number"> 8 </span>- BaseOS                                          4.0 MB/s | <span class="hljs-number"> 26 </span>MB     00:06<br>CentOS Stream<span class="hljs-number"> 8 </span>- Extras                                          <span class="hljs-number"> 28 </span>kB/s | <span class="hljs-number"> 18 </span>kB     00:00<br>CentOS Stream<span class="hljs-number"> 8 </span>- Extras common packages                          8.2 kB/s | 5.2 kB     00:00<br>Metadata cache created.<br>[root@KVM ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><h2 id="安装kvm"><a href="#安装kvm" class="headerlink" title="安装kvm"></a>安装kvm</h2><h3 id="安装kvm及其工具"><a href="#安装kvm及其工具" class="headerlink" title="安装kvm及其工具"></a>安装kvm及其工具</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs ada">[root@KVM ~]# yum install qemu-kvm qemu-img  virt-manager libvirt virt-manager libvirt-client virt-install virt-viewer -y<br>Waiting <span class="hljs-keyword">for</span> process <span class="hljs-keyword">with</span> pid <span class="hljs-number">8674</span> to finish.<br>Last metadata expiration check: <span class="hljs-number">0</span>:<span class="hljs-number">00</span>:<span class="hljs-number">05</span> ago on Sun <span class="hljs-number">08</span> Jan <span class="hljs-number">2023</span> <span class="hljs-number">06</span>:<span class="hljs-number">03</span>:<span class="hljs-number">34</span> AM EST.<br><span class="hljs-keyword">Package</span> <span class="hljs-title">qemu-kvm-15:6.2.0-20.module_el8.7.0+1218+f626c2ff.1.x86_64 </span><span class="hljs-keyword">is</span> already installed.<br><span class="hljs-keyword">Package</span> <span class="hljs-title">qemu-img-15:6.2.0-20.module_el8.7.0+1218+f626c2ff.1.x86_64 </span><span class="hljs-keyword">is</span> already installed.<br><span class="hljs-keyword">Package</span> <span class="hljs-title">virt-manager-3.2.0-4.el8.noarch </span><span class="hljs-keyword">is</span> already installed.<br><span class="hljs-keyword">Package</span> <span class="hljs-title">libvirt-8.0.0-10.module_el8.7.0+1218+f626c2ff.x86_64 </span><span class="hljs-keyword">is</span> already installed.<br><span class="hljs-keyword">Package</span> <span class="hljs-title">libvirt-client-8.0.0-10.module_el8.7.0+1218+f626c2ff.x86_64 </span><span class="hljs-keyword">is</span> already installed.<br><span class="hljs-keyword">Package</span> <span class="hljs-title">virt-install-3.2.0-4.el8.noarch </span><span class="hljs-keyword">is</span> already installed.<br><span class="hljs-keyword">Package</span> <span class="hljs-title">virt-viewer-9.0-11.el8.x86_64 </span><span class="hljs-keyword">is</span> already installed.<br>Dependencies resolved.<br>Nothing to <span class="hljs-keyword">do</span>.<br>Complete!<br></code></pre></td></tr></table></figure><h3 id="启动libvirtd服务"><a href="#启动libvirtd服务" class="headerlink" title="启动libvirtd服务"></a>启动libvirtd服务</h3><p>启动服务并设置韦开机自启动，查看状态</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dts">[root@KVM ~]<span class="hljs-meta"># systemctl enable --now libvirtd</span><br>[root@KVM ~]<span class="hljs-meta"># systemctl status libvirtd</span><br>● libvirtd.service - Virtualization daemon<br><span class="hljs-symbol">   Loaded:</span> loaded (<span class="hljs-keyword">/usr/</span>lib<span class="hljs-keyword">/systemd/</span>system/libvirtd.<span class="hljs-attr">service</span><span class="hljs-punctuation">;</span> <span class="hljs-attr">enabled</span><span class="hljs-punctuation">;</span> vendor preset: enabled)<br><span class="hljs-symbol">   Active:</span> active (running) since Sun <span class="hljs-number">2023</span><span class="hljs-number">-01</span><span class="hljs-number">-08</span> <span class="hljs-number">06</span>:<span class="hljs-number">05</span>:<span class="hljs-number">12</span> EST<span class="hljs-punctuation">;</span> <span class="hljs-number">12</span>s ago<br><span class="hljs-symbol">     Docs:</span> man:libvirtd(<span class="hljs-number">8</span>)<br><span class="hljs-symbol">           https:</span><span class="hljs-comment">//libvirt.org</span><br></code></pre></td></tr></table></figure><h3 id="验证是否已加载kvm模块"><a href="#验证是否已加载kvm模块" class="headerlink" title="验证是否已加载kvm模块"></a>验证是否已加载kvm模块</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@KVM ~]<span class="hljs-comment"># lsmod | grep kvm</span><br>kvm_amd              <span class="hljs-number"> 143360 </span> 0<br>ccp                  <span class="hljs-number"> 106496 </span><span class="hljs-number"> 1 </span>kvm_amd<br>kvm                  <span class="hljs-number"> 942080 </span><span class="hljs-number"> 1 </span>kvm_amd<br>irqbypass             <span class="hljs-number"> 16384 </span><span class="hljs-number"> 1 </span>kvm<br></code></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">[root@KVM ~]# virsh list<br><span class="hljs-section"> Id   Name   State</span><br><span class="hljs-section">--------------------</span><br>说明kvm安装成功<br></code></pre></td></tr></table></figure><h2 id="设置宿主机网络（kvm这个机子）"><a href="#设置宿主机网络（kvm这个机子）" class="headerlink" title="设置宿主机网络（kvm这个机子）"></a>设置宿主机网络（kvm这个机子）</h2><h3 id="查看网络情况"><a href="#查看网络情况" class="headerlink" title="查看网络情况"></a>查看网络情况</h3><p>KVN软件安装后默认以NAT方式实现网络通信。为了让KVM虚拟机能够与宿主机、本地主机、互联网相互通信，需将宿主机（KVM这个机子）网络设置为bridge方式。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">ip <span class="hljs-selector-tag">a</span><br></code></pre></td></tr></table></figure><p>lo为回环接口，该接口不从外界接收和发送数据包，仅在操作系统内部接收和发送数据包</p><p>ens160是以太网接口，与网卡对应，每个硬件网卡对应一个以太网接口</p><p>virbr0为虚拟网络接口，由kvm创建，为连接其上的kvm虚拟机网络提供访问外部网络的功能</p><h3 id="创建bridge"><a href="#创建bridge" class="headerlink" title="创建bridge"></a>创建bridge</h3><p>创建 bridge 时需使用nmcli命令创建 br0，并将其绑定到可以正常工作的网络接口上，同时让br0成为连接宿主机与互联网的接口。</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@KVM</span> ~]# nmcli connection <span class="hljs-keyword">add</span> <span class="hljs-keyword">type</span> bridge con-name <span class="hljs-keyword">br</span><span class="hljs-number">0</span> ifname <span class="hljs-keyword">br</span><span class="hljs-number">0</span> autoconnect yes<br><br>Connection &#x27;<span class="hljs-keyword">br</span><span class="hljs-number">0</span>&#x27; (ac<span class="hljs-number">3429</span>bc<span class="hljs-number">-907</span><span class="hljs-keyword">c</span><span class="hljs-number">-4</span>ad<span class="hljs-number">1</span>-bd<span class="hljs-number">54</span>-bbf<span class="hljs-number">39</span>d<span class="hljs-number">853</span>a<span class="hljs-number">53</span>) successfully added.<br>查看是否创建成功<br>[root<span class="hljs-title">@KVM</span> ~]# nmcli <span class="hljs-keyword">c</span><br>NAME    UUID                                  TYPE      DEVICE<br><span class="hljs-keyword">br</span><span class="hljs-number">0</span>     ac<span class="hljs-number">3429</span>bc<span class="hljs-number">-907</span><span class="hljs-keyword">c</span><span class="hljs-number">-4</span>ad<span class="hljs-number">1</span>-bd<span class="hljs-number">54</span>-bbf<span class="hljs-number">39</span>d<span class="hljs-number">853</span>a<span class="hljs-number">53</span>  bridge    <span class="hljs-keyword">br</span><span class="hljs-number">0</span><br>ens<span class="hljs-number">160</span>  <span class="hljs-number">0</span>d<span class="hljs-number">45e631</span>-b<span class="hljs-number">256</span><span class="hljs-number">-4e08</span>-b<span class="hljs-number">8</span>d<span class="hljs-number">8</span><span class="hljs-number">-2</span><span class="hljs-keyword">c</span><span class="hljs-number">42</span>b<span class="hljs-number">9481594</span>  ethernet  ens<span class="hljs-number">160</span><br>virbr<span class="hljs-number">0</span>  <span class="hljs-number">7075</span>d<span class="hljs-number">19</span>e-a<span class="hljs-number">20</span><span class="hljs-keyword">c</span><span class="hljs-number">-43</span>da-b<span class="hljs-number">161</span>-e<span class="hljs-number">7</span><span class="hljs-keyword">c</span><span class="hljs-number">7519</span>febdb  bridge    virbr<span class="hljs-number">0</span><br>网桥创建成功后会自动生成配置文件<br>[root<span class="hljs-title">@KVM</span> ~]# ls -l /etc/sysconfig/network-scripts/<br>-rw-r--r--. <span class="hljs-number">1</span> root root <span class="hljs-number">312</span> Jan  <span class="hljs-number">8</span> <span class="hljs-number">06</span>:<span class="hljs-number">20</span> ifcfg-<span class="hljs-keyword">br</span><span class="hljs-number">0</span><br>-rw-r--r--. <span class="hljs-number">1</span> root root <span class="hljs-number">365</span> Jan  <span class="hljs-number">8</span> <span class="hljs-number">05</span>:<span class="hljs-number">40</span> ifcfg-ens<span class="hljs-number">160</span><br></code></pre></td></tr></table></figure><h3 id="设置br0和ens160网卡"><a href="#设置br0和ens160网卡" class="headerlink" title="设置br0和ens160网卡"></a>设置br0和ens160网卡</h3><p>将br0桥接到ens160</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs llvm">[root<span class="hljs-title">@KVM</span> ~]# vi /etc/sysconfig/network-scripts/ifcfg-<span class="hljs-keyword">br</span><span class="hljs-number">0</span><br>BOOTPROTO<span class="hljs-operator">=</span>static<br>IPADDR<span class="hljs-operator">=</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.10</span><br>GATEWAY<span class="hljs-operator">=</span><span class="hljs-number">192.168</span>.<span class="hljs-number">48.2</span><br>PREFIX<span class="hljs-operator">=</span><span class="hljs-number">24</span><br>DNS<span class="hljs-operator">=</span><span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span><br>[root<span class="hljs-title">@KVM</span> ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens<span class="hljs-number">160</span><br>BOOTPROTO<span class="hljs-operator">=</span>none<br>BRIDGE<span class="hljs-operator">=</span><span class="hljs-keyword">br</span><span class="hljs-number">0</span><br>[root<span class="hljs-title">@KVM</span> ~]# nmcli <span class="hljs-keyword">c</span> reload<br>[root<span class="hljs-title">@KVM</span> ~]# nmcli <span class="hljs-keyword">c</span> drow <span class="hljs-keyword">br</span><span class="hljs-number">0</span>r<br>此时如果你是用ssh工具连着的，你会断开，此时你要去vm那里输入<br>[root<span class="hljs-title">@KVM</span> ~]# nmcli <span class="hljs-keyword">c</span> up <span class="hljs-keyword">br</span><span class="hljs-number">0</span><br>[root<span class="hljs-title">@KVM</span> ~]# nmcli <span class="hljs-keyword">c</span> up ens<span class="hljs-number">160</span><br>然后等<span class="hljs-number">1</span>分钟左右，就可以连上ssh工具了<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros">测试网络连通性<br>[root@KVM ~]#<span class="hljs-built_in"> ping </span>-c 2 jd.com<span class="hljs-built_in"></span><br><span class="hljs-built_in">PING </span>jd.com (211.144.24.218) 56(84) bytes of data.<br>64 bytes <span class="hljs-keyword">from</span> 211.144.24.218 (211.144.24.218): <span class="hljs-attribute">icmp_seq</span>=1 <span class="hljs-attribute">ttl</span>=128 <span class="hljs-attribute">time</span>=50.7 ms<br>64 bytes <span class="hljs-keyword">from</span> 211.144.24.218 (211.144.24.218): <span class="hljs-attribute">icmp_seq</span>=2 <span class="hljs-attribute">ttl</span>=128 <span class="hljs-attribute">time</span>=51.9 ms<br><br>--- jd.com<span class="hljs-built_in"> ping </span>statistics ---<br>2 packets transmitted, 2 received, 0% packet loss, time 1002ms<br>rtt min/avg/max/mdev = 50.683/51.286/51.890/0.644 ms<br>[root@KVM ~]#<br></code></pre></td></tr></table></figure><h2 id="创建kvm虚拟机"><a href="#创建kvm虚拟机" class="headerlink" title="创建kvm虚拟机"></a>创建kvm虚拟机</h2><table><thead><tr><th>存储池</th><th>存放目录</th><th>内容规划</th></tr></thead><tbody><tr><td>disk</td><td>&#x2F;opt&#x2F;disk</td><td>存放KVM磁盘文件</td></tr><tr><td>存放iso</td><td>&#x2F;opt&#x2F;iso</td><td>存放待安装的ISO文件</td></tr></tbody></table><h3 id="创建iso存储池"><a href="#创建iso存储池" class="headerlink" title="创建iso存储池"></a>创建iso存储池</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@KVM ~]<span class="hljs-comment"># mkdir -p /opt/iso</span><br>[root@KVM ~]<span class="hljs-comment"># chown root:root /opt/iso/</span><br>[root@KVM ~]<span class="hljs-comment"># chmod 777 /opt/iso/</span><br>[root@KVM ~]<span class="hljs-comment"># virsh pool-define-as iso --type dir --target /opt/iso/ </span><br>Pool iso--type defined<br><span class="hljs-comment">#名称为iso的存储池定义成功</span><br>如果名字打错 用<br>virsh pool-destroy [名字]<br>virsh pool-undefine [名字] 删除<br>[root@KVM ~]<span class="hljs-comment"># virsh pool-list --all</span><br> Name   State      Autostart<br>------------------------------<br> iso    inactive   <span class="hljs-literal">no</span><br><br>[root@KVM ~]<span class="hljs-comment"># virsh pool-build iso</span><br>Pool iso built<br><span class="hljs-comment">#创建名为iso的存储池</span><br>[root@KVM ~]<span class="hljs-comment"># virsh pool-start iso</span><br>Pool iso started<br><span class="hljs-comment">#启动iso存储池</span><br>[root@KVM ~]<span class="hljs-comment"># virsh pool-autostart iso</span><br>Pool iso marked <span class="hljs-keyword">as</span> autostarted<br><span class="hljs-comment">#设置iso存储池自启动</span><br>查看iso信息<br>[root@KVM ~]<span class="hljs-comment"># virsh pool-info iso</span><br>Name:           iso<br>UUID:           a966995e<span class="hljs-number">-2722</span><span class="hljs-number">-4</span>a3f-a318-e158a642439e<br>State:          running<br>Persistent:     <span class="hljs-literal">yes</span><br>Autostart:      <span class="hljs-literal">yes</span><br>Capacity:       <span class="hljs-number">63.84</span> GiB<br>Allocation:     <span class="hljs-number">2.75</span> GiB<br>Available:      <span class="hljs-number">61.09</span> GiB<br></code></pre></td></tr></table></figure><h3 id="创建disk存储池"><a href="#创建disk存储池" class="headerlink" title="创建disk存储池"></a>创建disk存储池</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@KVM ~]<span class="hljs-comment"># mkdir -p /opt/disk</span><br>[root@KVM ~]<span class="hljs-comment"># chown root:root /opt/disk/</span><br>[root@KVM ~]<span class="hljs-comment"># chmod 777 /opt/disk/</span><br>[root@KVM ~]<span class="hljs-comment"># virsh pool-define-as disk --type dir --target /opt/disk/ </span><br>Pool disk defined<br><br>[root@KVM ~]<span class="hljs-comment"># virsh pool-build disk</span><br>Pool disk built<br><br>[root@KVM ~]<span class="hljs-comment"># virsh pool-start disk</span><br>Pool disk started<br><br>[root@KVM ~]<span class="hljs-comment"># virsh pool-autostart disk</span><br>Pool disk marked <span class="hljs-keyword">as</span> autostarted<br><br>[root@KVM ~]<span class="hljs-comment"># virsh pool-info disk</span><br>Name:           disk<br>UUID:           <span class="hljs-number">30</span>d784dc<span class="hljs-number">-386</span>b<span class="hljs-number">-46e6</span>-a22b<span class="hljs-number">-79</span>a3b3447354<br>State:          running<br>Persistent:     <span class="hljs-literal">yes</span><br>Autostart:      <span class="hljs-literal">yes</span><br>Capacity:       <span class="hljs-number">63.84</span> GiB<br>Allocation:     <span class="hljs-number">2.75</span> GiB<br>Available:      <span class="hljs-number">61.09</span> GiB<br></code></pre></td></tr></table></figure><h3 id="获取Centos7"><a href="#获取Centos7" class="headerlink" title="获取Centos7"></a>获取Centos7</h3><h4 id="下载Centos7最小化版本到ISO目录下（网络方式）"><a href="#下载Centos7最小化版本到ISO目录下（网络方式）" class="headerlink" title="下载Centos7最小化版本到ISO目录下（网络方式）"></a>下载Centos7最小化版本到ISO目录下（网络方式）</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[root@KVM ~]# yum install -y wget<br>[root@KVM ~]# wget -O <span class="hljs-regexp">/opt/i</span>so<span class="hljs-regexp">/Centos7.iso https:/</span><span class="hljs-regexp">/mirrors.aliyun.com/</span>centos<span class="hljs-regexp">/7.9.2009/i</span>sos<span class="hljs-regexp">/x86_64/</span>CentOS-<span class="hljs-number">7</span>-x86_64-Minimal-<span class="hljs-number">2009</span>.iso<br>--<span class="hljs-number">2023</span>-<span class="hljs-number">01</span>-<span class="hljs-number">08</span> <span class="hljs-number">08</span>:<span class="hljs-number">09</span>:<span class="hljs-number">00</span>--  https:<span class="hljs-comment">//mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-Minimal-2009.iso</span><br>Resolving mirrors.aliyun.com (mirrors.aliyun.com)... <span class="hljs-number">120.241</span>.<span class="hljs-number">238.243</span>, <span class="hljs-number">120.241</span>.<span class="hljs-number">238.242</span>, <span class="hljs-number">120.241</span>.<span class="hljs-number">238.241</span>, ...<br>Connecting to mirrors.aliyun.com (mirrors.aliyun.com)|<span class="hljs-number">120.241</span>.<span class="hljs-number">238.243</span>|:<span class="hljs-number">443</span>... connected.<br>HTTP request sent, awaiting response... <span class="hljs-number">200</span> OK<br>Length: <span class="hljs-number">1020264448</span> (<span class="hljs-number">973</span>M) [application/x-cd-image]<br>Saving to: ‘<span class="hljs-regexp">/opt/i</span>so/Centos7.iso’<br><br><span class="hljs-regexp">/opt/i</span>so<span class="hljs-regexp">/Centos7.iso     100%[================================&gt;] 973.00M  1.53MB/</span>s    in <span class="hljs-number">10</span>m <span class="hljs-number">54</span>s<br><br><span class="hljs-number">2023</span>-<span class="hljs-number">01</span>-<span class="hljs-number">08</span> <span class="hljs-number">08</span>:<span class="hljs-number">19</span>:<span class="hljs-number">54</span> (<span class="hljs-number">1.49</span> MB<span class="hljs-regexp">/s) - ‘/</span>opt<span class="hljs-regexp">/iso/</span>Centos7.iso’ saved [<span class="hljs-number">1020264448</span>/<span class="hljs-number">1020264448</span>]<br>[root@KVM ~]# ll <span class="hljs-regexp">/opt/i</span>so<br>total <span class="hljs-number">996352</span><br>-rw-r--r--. <span class="hljs-number">1</span> root root <span class="hljs-number">1020264448</span> Nov  <span class="hljs-number">3</span>  <span class="hljs-number">2020</span> Centos7.iso<br></code></pre></td></tr></table></figure><h4 id="也可以本地下载好后，上传至iso目录（本地方式）"><a href="#也可以本地下载好后，上传至iso目录（本地方式）" class="headerlink" title="也可以本地下载好后，上传至iso目录（本地方式）"></a>也可以本地下载好后，上传至iso目录（本地方式）</h4><p>下载连接：<a href="https://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-Minimal-2009.iso">https://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-Minimal-2009.iso</a></p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@KVM ~]<span class="hljs-comment"># ll /opt/iso</span><br>total 996352<br>-rw-r--r--.<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 1020264448 </span>Nov <span class="hljs-number"> 3 </span><span class="hljs-number"> 2020 </span>Centos7.iso<br></code></pre></td></tr></table></figure><h3 id="安装Centos7"><a href="#安装Centos7" class="headerlink" title="安装Centos7"></a>安装Centos7</h3><h4 id="无界面安装Centos7"><a href="#无界面安装Centos7" class="headerlink" title="无界面安装Centos7"></a>无界面安装Centos7</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vim">[root@KVM ~]# virt-install --virt-<span class="hljs-built_in">type</span>=kvm --name=Centos7 --vcpus=<span class="hljs-number">1</span> --memory=<span class="hljs-number">2048</span> --network bridge=br0,model=virtio --os-<span class="hljs-built_in">type</span>=linux --os-variant=rhel7.<span class="hljs-number">7</span> --location=/<span class="hljs-keyword">opt</span>/iso/Centos7.iso --disk /<span class="hljs-keyword">opt</span>/disk/Centos7.qcow2,format=qcow2,size=<span class="hljs-number">10</span> --console=pty,target_type=serial --graphics=none --extra-<span class="hljs-keyword">args</span>=<span class="hljs-string">&quot;console=tty0 console=ttyS0&quot;</span><br><br>Starting install...<br>Retrieving <span class="hljs-keyword">file</span> vmlinuz...                                                 | <span class="hljs-number">6.5</span> MB  <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>Retrieving <span class="hljs-keyword">file</span> initrd.img...                                              |  <span class="hljs-number">53</span> MB  <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>Allocating <span class="hljs-string">&#x27;Centos7.qcow2&#x27;</span>                                                 |  <span class="hljs-number">10</span> GB  <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>Running text console <span class="hljs-keyword">command</span>: virsh --connect qemu:///<span class="hljs-built_in">system</span> console Centos7<br>Connected <span class="hljs-keyword">to</span> domain <span class="hljs-string">&#x27;Centos7&#x27;</span><br>......<br>进入安装界面<br><br>Connected <span class="hljs-keyword">to</span> domain <span class="hljs-string">&#x27;Centos7&#x27;</span><br>  Please <span class="hljs-keyword">make</span> your choice from above [<span class="hljs-string">&#x27;q&#x27;</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">quit</span> | <span class="hljs-string">&#x27;b&#x27;</span> <span class="hljs-keyword">to</span> begin installation |<br>  <span class="hljs-string">&#x27;r&#x27;</span> <span class="hljs-keyword">to</span> refresh]:   Please <span class="hljs-keyword">make</span> your choice from above [<span class="hljs-string">&#x27;q&#x27;</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">quit</span> | <span class="hljs-string">&#x27;b&#x27;</span> <span class="hljs-keyword">to</span> begin installation |<br>================================================================================<br>================================================================================<br>Installation<br><br> <span class="hljs-number">1</span>) [<span class="hljs-keyword">x</span>] Language settings                 <span class="hljs-number">2</span>) [!] Time settings<br>        (English (United States))                (Timezone <span class="hljs-keyword">is</span> not <span class="hljs-keyword">set</span>.)<br> <span class="hljs-number">3</span>) [<span class="hljs-keyword">x</span>] Installation <span class="hljs-keyword">source</span>               <span class="hljs-number">4</span>) [<span class="hljs-keyword">x</span>] Software selection<br>        (Local media)                            (Minimal Install)<br> <span class="hljs-number">5</span>) [!] Installation Destination          <span class="hljs-number">6</span>) [<span class="hljs-keyword">x</span>] Kdump<br>        (No disks selected)                      (Kdump <span class="hljs-keyword">is</span> enabled)<br> <span class="hljs-number">7</span>) [ ] Network configuration             <span class="hljs-number">8</span>) [!] Root password<br>        (Not connected)                          (Password <span class="hljs-keyword">is</span> not <span class="hljs-keyword">set</span>.)<br> <span class="hljs-number">9</span>) [!] User creation<br>        (No user will <span class="hljs-keyword">be</span> created)<br>  Please <span class="hljs-keyword">make</span> your choice from above [<span class="hljs-string">&#x27;q&#x27;</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">quit</span> | <span class="hljs-string">&#x27;b&#x27;</span> <span class="hljs-keyword">to</span> begin installation |<br>  <span class="hljs-string">&#x27;r&#x27;</span> <span class="hljs-keyword">to</span> refresh]:   Please <span class="hljs-keyword">make</span> your choice from above [<span class="hljs-string">&#x27;q&#x27;</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">quit</span> | <span class="hljs-string">&#x27;b&#x27;</span> <span class="hljs-keyword">to</span> begin installation |<br><br></code></pre></td></tr></table></figure><h4 id="输入2设置时区"><a href="#输入2设置时区" class="headerlink" title="输入2设置时区"></a>输入2设置时区</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs routeros">================================================================================<br>================================================================================<br>Time<span class="hljs-built_in"> settings</span><br><span class="hljs-built_in"></span><br>Timezone: <span class="hljs-keyword">not</span> <span class="hljs-built_in">set</span><br><span class="hljs-built_in"></span><br><span class="hljs-built_in">NTP </span>servers<span class="hljs-keyword">:not</span> configured<br><br> 1)  <span class="hljs-built_in">Set</span> timezone<br> 2)  Configure<span class="hljs-built_in"> NTP </span>servers<br>  Please make your choice <span class="hljs-keyword">from</span> above [<span class="hljs-string">&#x27;q&#x27;</span> <span class="hljs-keyword">to</span> quit | <span class="hljs-string">&#x27;c&#x27;</span> <span class="hljs-keyword">to</span> continue |<br>  <span class="hljs-string">&#x27;r&#x27;</span> <span class="hljs-keyword">to</span> refresh]:<br>================================================================================<br>================================================================================<br>按1根据提示选择Asia/shanghai   然后按c<br></code></pre></td></tr></table></figure><h4 id="输入5设置磁盘（Installation-Destination-）"><a href="#输入5设置磁盘（Installation-Destination-）" class="headerlink" title="输入5设置磁盘（Installation Destination ）"></a>输入5设置磁盘（Installation Destination ）</h4><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs n1ql">Probing storage...<br>Installation Destination<br><br>[x] 1) : 10 GiB (vda)<br><br><span class="hljs-number">1</span> disk selected; 10 GiB capacity; 10 GiB free ...<br><br>  Please make your choice <span class="hljs-keyword">from</span> above [<span class="hljs-string">&#x27;q&#x27;</span> <span class="hljs-keyword">to</span> quit | <span class="hljs-string">&#x27;c&#x27;</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">continue</span> |<br>  <span class="hljs-string">&#x27;r&#x27;</span> <span class="hljs-keyword">to</span> refresh]:<br>Autopartitioning Options<br>再按c<br>================================================================================<br>[ ] <span class="hljs-number">1</span>) <span class="hljs-built_in">Replace</span> Existing Linux <span class="hljs-keyword">system</span>(s)<br><br>[x] <span class="hljs-number">2</span>) <span class="hljs-keyword">Use</span> <span class="hljs-keyword">All</span> Space<br><br>[ ] <span class="hljs-number">3</span>) <span class="hljs-keyword">Use</span> Free Space<br><br>Installation requires partitioning of your hard drive. <span class="hljs-keyword">Select</span> what space <span class="hljs-keyword">to</span> <span class="hljs-keyword">use</span><br><span class="hljs-keyword">for</span> the install target.<br><br>  Please make your choice <span class="hljs-keyword">from</span> above [<span class="hljs-string">&#x27;q&#x27;</span> <span class="hljs-keyword">to</span> quit | <span class="hljs-string">&#x27;c&#x27;</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">continue</span> |<br>  再按c<br>================================================================================<br><span class="hljs-keyword">Partition</span> Scheme Options<br><br>[ ] <span class="hljs-number">1</span>) Standard <span class="hljs-keyword">Partition</span><br><br>[ ] <span class="hljs-number">2</span>) Btrfs<br><br>[x] <span class="hljs-number">3</span>) LVM<br><br>[ ] <span class="hljs-number">4</span>) LVM Thin Provisioning<br><br><span class="hljs-keyword">Select</span> a <span class="hljs-keyword">partition</span> scheme configuration.<br><br>  Please make your choice <span class="hljs-keyword">from</span> above [<span class="hljs-string">&#x27;q&#x27;</span> <span class="hljs-keyword">to</span> quit | <span class="hljs-string">&#x27;c&#x27;</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">continue</span> |<br>  <span class="hljs-string">&#x27;r&#x27;</span> <span class="hljs-keyword">to</span> refresh]: c<br>Generating updated storage configuration<br>Checking storage configuration...<br></code></pre></td></tr></table></figure><h4 id="按8设置root密码"><a href="#按8设置root密码" class="headerlink" title="按8设置root密码"></a>按8设置root密码</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">  &#x27;r&#x27; to refresh]: 8</span><br>================================================================================<br>        (Not connected)<br> 9) [!] User creation<br>================================================================================<br>Please select new root password. You will have to type it twice.<br><br>Password:<br><span class="hljs-section">Password (confirm):</span><br><span class="hljs-section">================================================================================</span><br>================================================================================<br>Question<br><br>The password you have provided is weak: The password fails the dictionary check<br>- it is too simplistic/systematic.<br>Would you like to use it anyway?<br><br>Please respond &#x27;yes&#x27; or &#x27;no&#x27;: yes<br></code></pre></td></tr></table></figure><h4 id="全部设置完成后按b确认"><a href="#全部设置完成后按b确认" class="headerlink" title="全部设置完成后按b确认"></a>全部设置完成后按b确认</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs gradle">  <span class="hljs-string">&#x27;r&#x27;</span> to refresh]: b<br>================================================================================<br>================================================================================<br>Progress<br>Setting up the installation environment<br>.<br>Creating disklabel on <span class="hljs-regexp">/dev/</span>vda<br>.<br>Creating xfs on <span class="hljs-regexp">/dev/</span>vda1<br>.<br>Creating lvmpv on <span class="hljs-regexp">/dev/</span>vda2<br>.<br>Creating swap on <span class="hljs-regexp">/dev/m</span>apper/centos-swap<br>.<br>Creating xfs on <span class="hljs-regexp">/dev/m</span>apper/centos-root<br>.<br>Running pre-installation scripts<br>.<br>Starting <span class="hljs-keyword">package</span> installation process<br>就会开始安装<br></code></pre></td></tr></table></figure><h4 id="进入登入界面"><a href="#进入登入界面" class="headerlink" title="进入登入界面"></a>进入登入界面</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">CentOS</span> Linux <span class="hljs-number">7</span> (Core)<br><span class="hljs-attribute">Kernel</span> <span class="hljs-number">3</span>.<span class="hljs-number">10</span>.<span class="hljs-number">0</span>-<span class="hljs-number">1160</span>.el7.x86_64 <span class="hljs-literal">on</span> an x86_64<br><br><span class="hljs-attribute">localhost</span> login:<br><br></code></pre></td></tr></table></figure><h2 id="管理kvm虚拟机"><a href="#管理kvm虚拟机" class="headerlink" title="管理kvm虚拟机"></a>管理kvm虚拟机</h2><h3 id="连接KVM虚拟机"><a href="#连接KVM虚拟机" class="headerlink" title="连接KVM虚拟机"></a>连接KVM虚拟机</h3><blockquote><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs perl">[root@KVM ~]<span class="hljs-comment"># virsh console Centos7</span><br>Connected to domain <span class="hljs-string">&#x27;Centos7&#x27;</span><br>Escape character is ^] (Ctrl + ])<br>error: operation failed: Active console session <span class="hljs-keyword">exists</span> <span class="hljs-keyword">for</span> this domain<br>如果你之前连接过，没有退出，但是你与宿主机的ssh断了，就会出现这种问题，也就是你之前的连接控制台的连接还存在；<br>每次连接kvm之后要退出 ctrl+] 就可以退出<br>解决办法：<br>[root@KVM ~]<span class="hljs-comment"># ps  -ef  |grep virsh</span><br>root       <span class="hljs-number">65402</span>   <span class="hljs-number">61750</span>  <span class="hljs-number">0</span> <span class="hljs-number">02</span>:<span class="hljs-number">26</span> pts/<span class="hljs-number">0</span>    <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> virsh --<span class="hljs-keyword">connect</span> qemu:<span class="hljs-regexp">//</span><span class="hljs-regexp">/system console Centos7</span><br><span class="hljs-regexp">root       68540   66569  0 02:35 pts/</span><span class="hljs-number">2</span>    <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-keyword">grep</span> --color=auto virsh<br>[root@KVM ~]<span class="hljs-comment"># kill -9 61750</span><br>[root@KVM ~]<span class="hljs-comment"># kill -9 65402</span><br></code></pre></td></tr></table></figure></blockquote><h4 id="查看KVM虚拟机状态"><a href="#查看KVM虚拟机状态" class="headerlink" title="查看KVM虚拟机状态"></a>查看KVM虚拟机状态</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">[root@KVM ~]# virsh list<br><span class="hljs-section"> Id   Name      State</span><br><span class="hljs-section">-------------------------</span><br><span class="hljs-code"> 2    Centos7   running</span><br></code></pre></td></tr></table></figure><h4 id="连接虚拟机"><a href="#连接虚拟机" class="headerlink" title="连接虚拟机"></a>连接虚拟机</h4><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[root@KVM ~]<span class="hljs-comment"># virsh console Centos7</span><br>Connected <span class="hljs-keyword">to</span> domain <span class="hljs-string">&#x27;Centos7&#x27;</span><br>Escape character <span class="hljs-keyword">is</span> ^] (Ctrl + ])<br><br>[root@localhost ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><h3 id="初始化KVM虚拟机"><a href="#初始化KVM虚拟机" class="headerlink" title="初始化KVM虚拟机"></a>初始化KVM虚拟机</h3><h4 id="设置名字"><a href="#设置名字" class="headerlink" title="设置名字"></a>设置名字</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># hostnamectl set-hostname Centos7 &amp;&amp; bash</span><br>[root<span class="hljs-symbol">@centos7</span> ~]<span class="hljs-meta">#</span><br></code></pre></td></tr></table></figure><h4 id="设置网络-1"><a href="#设置网络-1" class="headerlink" title="设置网络"></a>设置网络</h4><h5 id="查看状态"><a href="#查看状态" class="headerlink" title="查看状态"></a>查看状态</h5><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs pf">[root@centos7 ~]<span class="hljs-comment"># ip a</span><br><span class="hljs-number">1</span>: lo: <span class="hljs-variable">&lt;LOOPBACK,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">65536</span> qdisc noqueue <span class="hljs-keyword">state</span> UNKNOWN <span class="hljs-keyword">group</span> <span class="hljs-keyword">default</span> qlen <span class="hljs-number">1000</span><br>    link/loopback <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> brd <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>    <span class="hljs-keyword">inet</span> <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>/<span class="hljs-number">8</span> scope host lo<br>       valid_lft forever preferred_lft forever<br>    <span class="hljs-keyword">inet6</span> ::<span class="hljs-number">1</span>/<span class="hljs-number">128</span> scope host<br>       valid_lft forever preferred_lft forever<br><span class="hljs-number">2</span>: eth0: <span class="hljs-variable">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">1500</span> qdisc pfifo_fast <span class="hljs-keyword">state</span> UP <span class="hljs-keyword">group</span> <span class="hljs-keyword">default</span> qlen <span class="hljs-number">1000</span><br>    link/ether <span class="hljs-number">52</span>:<span class="hljs-number">54</span>:<span class="hljs-number">00</span>:b2:b9:d1 brd ff:ff:ff:ff:ff:ff<br></code></pre></td></tr></table></figure><h5 id="编辑配置文件"><a href="#编辑配置文件" class="headerlink" title="编辑配置文件"></a>编辑配置文件</h5><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@centos7 ~]</span><span class="hljs-comment"># vi /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="hljs-attr">TYPE</span>=Ethernet<br><span class="hljs-attr">PROXY_METHOD</span>=none<br><span class="hljs-attr">BROWSER_ONLY</span>=<span class="hljs-literal">no</span><br><span class="hljs-attr">BOOTPROTO</span>=static         ---<br><span class="hljs-attr">DEFROUTE</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">IPV4_FAILURE_FATAL</span>=<span class="hljs-literal">no</span><br><span class="hljs-attr">IPV6INIT</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">IPV6_AUTOCONF</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">IPV6_DEFROUTE</span>=<span class="hljs-literal">yes</span><br><span class="hljs-attr">IPV6_FAILURE_FATAL</span>=<span class="hljs-literal">no</span><br><span class="hljs-attr">IPV6_ADDR_GEN_MODE</span>=stable-privacy<br><span class="hljs-attr">NAME</span>=eth0<br><span class="hljs-attr">UUID</span>=b7053508-<span class="hljs-number">5183</span>-<span class="hljs-number">4</span>ee4-<span class="hljs-number">8</span>af5-<span class="hljs-number">8</span>d5241f57116<br><span class="hljs-attr">DEVICE</span>=eth0<br><span class="hljs-attr">ONBOOT</span>=<span class="hljs-literal">yes</span>                  ---<br><span class="hljs-attr">IPADDR</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">48.11</span>        ---<br><span class="hljs-attr">PREFIX</span>=<span class="hljs-number">24</span>                   ---<br><span class="hljs-attr">GATEWAY</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">48.2</span>        ---<br><span class="hljs-attr">DNS1</span>=<span class="hljs-number">114.114</span>.<span class="hljs-number">114.114</span>        ---<br></code></pre></td></tr></table></figure><h5 id="查看KVM网络信息"><a href="#查看KVM网络信息" class="headerlink" title="查看KVM网络信息"></a>查看KVM网络信息</h5><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs pf">[root@centos7 ~]<span class="hljs-comment"># systemctl restart network</span><br>[root@centos7 ~]<span class="hljs-comment"># ip a</span><br><span class="hljs-number">1</span>: lo: <span class="hljs-variable">&lt;LOOPBACK,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">65536</span> qdisc noqueue <span class="hljs-keyword">state</span> UNKNOWN <span class="hljs-keyword">group</span> <span class="hljs-keyword">default</span> qlen <span class="hljs-number">1000</span><br>    link/loopback <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> brd <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span><br>    <span class="hljs-keyword">inet</span> <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>/<span class="hljs-number">8</span> scope host lo<br>       valid_lft forever preferred_lft forever<br>    <span class="hljs-keyword">inet6</span> ::<span class="hljs-number">1</span>/<span class="hljs-number">128</span> scope host<br>       valid_lft forever preferred_lft forever<br><span class="hljs-number">2</span>: eth0: <span class="hljs-variable">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> mtu <span class="hljs-number">1500</span> qdisc pfifo_fast <span class="hljs-keyword">state</span> UP <span class="hljs-keyword">group</span> <span class="hljs-keyword">default</span> qlen <span class="hljs-number">1000</span><br>    link/ether <span class="hljs-number">52</span>:<span class="hljs-number">54</span>:<span class="hljs-number">00</span>:b2:b9:d1 brd ff:ff:ff:ff:ff:ff<br>    <span class="hljs-keyword">inet</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">48.11</span>/<span class="hljs-number">24</span> brd <span class="hljs-number">192.168</span>.<span class="hljs-number">48.255</span> scope <span class="hljs-keyword">global</span> noprefixroute eth0<br>       valid_lft forever preferred_lft forever<br>    <span class="hljs-keyword">inet6</span> fe80::<span class="hljs-number">85</span>d6:dde0:<span class="hljs-number">25</span>ad:<span class="hljs-number">9</span>c43/<span class="hljs-number">64</span> scope link noprefixroute<br>       valid_lft forever preferred_lft forever<br>[root@centos7 ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><p>测试一下ssh工具是不是也可以连（cmd、MobaXterm）</p><h5 id="测试连通性"><a href="#测试连通性" class="headerlink" title="测试连通性"></a>测试连通性</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ping KVM机子<br>[root@centos7 ~]#<span class="hljs-built_in"> ping </span>192.168.48.10 -c 2<span class="hljs-built_in"></span><br><span class="hljs-built_in">PING </span>192.168.48.10 (192.168.48.10) 56(84) bytes of data.<br>64 bytes <span class="hljs-keyword">from</span> 192.168.48.10: <span class="hljs-attribute">icmp_seq</span>=1 <span class="hljs-attribute">ttl</span>=64 <span class="hljs-attribute">time</span>=0.481 ms<br>64 bytes <span class="hljs-keyword">from</span> 192.168.48.10: <span class="hljs-attribute">icmp_seq</span>=2 <span class="hljs-attribute">ttl</span>=64 <span class="hljs-attribute">time</span>=0.254 ms<br><br>--- 192.168.48.10<span class="hljs-built_in"> ping </span>statistics ---<br>2 packets transmitted, 2 received, 0% packet loss, time 1000ms<br>rtt min/avg/max/mdev = 0.254/0.367/0.481/0.115 ms<span class="hljs-built_in"></span><br><span class="hljs-built_in">ping </span>百度<br>[root@centos7 ~]#<span class="hljs-built_in"> ping </span>baidu.com -c 2<span class="hljs-built_in"></span><br><span class="hljs-built_in">PING </span>baidu.com (39.156.66.10) 56(84) bytes of data.<br>64 bytes <span class="hljs-keyword">from</span> 39.156.66.10 (39.156.66.10): <span class="hljs-attribute">icmp_seq</span>=1 <span class="hljs-attribute">ttl</span>=128 <span class="hljs-attribute">time</span>=43.5 ms<br>64 bytes <span class="hljs-keyword">from</span> 39.156.66.10 (39.156.66.10): <span class="hljs-attribute">icmp_seq</span>=2 <span class="hljs-attribute">ttl</span>=128 <span class="hljs-attribute">time</span>=44.9 ms<br><br>--- baidu.com<span class="hljs-built_in"> ping </span>statistics ---<br>2 packets transmitted, 2 received, 0% packet loss, time 1001ms<br>rtt min/avg/max/mdev = 43.599/44.258/44.917/0.659 ms<br>[root@centos7 ~]#<br></code></pre></td></tr></table></figure><h4 id="设置Centos7虚拟机随KVM宿主机开机自启动"><a href="#设置Centos7虚拟机随KVM宿主机开机自启动" class="headerlink" title="设置Centos7虚拟机随KVM宿主机开机自启动"></a>设置Centos7虚拟机随KVM宿主机开机自启动</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[root@KVM ~]# virsh autostart Centos7<br>Domain <span class="hljs-string">&#x27;Centos7&#x27;</span> marked as autostarted<br><br>开机自启动配置后，会在<span class="hljs-regexp">/etc/</span>libvirt<span class="hljs-regexp">/qemu/</span>autostart/目录中增加XML格式<br>[root@KVM ~]# ls <span class="hljs-regexp">/etc/</span>libvirt<span class="hljs-regexp">/qemu/</span>autostart/<br>Centos7.xml<br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">virsh autostart <span class="hljs-comment">--disable 关闭开机自启动</span><br>[root@KVM ~]# virsh autostart <span class="hljs-comment">--disable Centos7</span><br><span class="hljs-keyword">Domain</span> <span class="hljs-string">&#x27;Centos7&#x27;</span> unmarked <span class="hljs-keyword">as</span> autostarted<br></code></pre></td></tr></table></figure><h3 id="为KVM虚拟机增加CPU"><a href="#为KVM虚拟机增加CPU" class="headerlink" title="为KVM虚拟机增加CPU"></a>为KVM虚拟机增加CPU</h3><h4 id="查看Centos7配置信息"><a href="#查看Centos7配置信息" class="headerlink" title="查看Centos7配置信息"></a>查看Centos7配置信息</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">root@KVM</span> <span class="hljs-string">~</span>]<span class="hljs-comment"># virsh dominfo Centos7</span><br><span class="hljs-attr">Id:</span>             <span class="hljs-number">1</span><br><span class="hljs-attr">Name:</span>           <span class="hljs-string">Centos7</span><br><span class="hljs-attr">UUID:</span>           <span class="hljs-string">735f1ca1-c82a-4734-81ec-ea3e82e98bae</span><br><span class="hljs-attr">OS Type:</span>        <span class="hljs-string">hvm</span><br><span class="hljs-attr">State:</span>          <span class="hljs-string">running</span><br><span class="hljs-string">CPU(s):</span>         <span class="hljs-number">1</span><br><span class="hljs-attr">CPU time:</span>       <span class="hljs-number">17.</span><span class="hljs-string">3s</span><br><span class="hljs-attr">Max memory:</span>     <span class="hljs-number">2097152</span> <span class="hljs-string">KiB</span><br><span class="hljs-attr">Used memory:</span>    <span class="hljs-number">2097152</span> <span class="hljs-string">KiB</span><br><span class="hljs-attr">Persistent:</span>     <span class="hljs-literal">yes</span><br><span class="hljs-attr">Autostart:</span>      <span class="hljs-string">enable</span><br><span class="hljs-attr">Managed save:</span>   <span class="hljs-literal">no</span><br><span class="hljs-attr">Security model:</span> <span class="hljs-string">selinux</span><br><span class="hljs-attr">Security DOI:</span>   <span class="hljs-number">0</span><br><span class="hljs-attr">Security label:</span> <span class="hljs-string">system_u:system_r:svirt_t:s0:c202,c740</span> <span class="hljs-string">(enforcing)</span><br></code></pre></td></tr></table></figure><h4 id="关闭虚拟机"><a href="#关闭虚拟机" class="headerlink" title="关闭虚拟机"></a>关闭虚拟机</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">[root@KVM ~]# virsh shutdown Centos7<br>Domain <span class="hljs-emphasis">&#x27;Centos7&#x27;</span> is being shutdown<br>[root@KVM ~]# virsh list --all<br><span class="hljs-section"> Id   Name      State</span><br><span class="hljs-section">--------------------------</span><br><span class="hljs-code"> -    Centos7   shut off</span><br></code></pre></td></tr></table></figure><h4 id="修改Centos7-CPU核心数量"><a href="#修改Centos7-CPU核心数量" class="headerlink" title="修改Centos7 CPU核心数量"></a>修改Centos7 CPU核心数量</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml">[root@KVM ~]# vi /etc/libvirt/qemu/Centos7.xml<br><span class="hljs-tag">&lt;<span class="hljs-name">domain</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&#x27;kvm&#x27;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Centos7<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">uuid</span>&gt;</span>735f1ca1-c82a-4734-81ec-ea3e82e98bae<span class="hljs-tag">&lt;/<span class="hljs-name">uuid</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">metadata</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">libosinfo:libosinfo</span> <span class="hljs-attr">xmlns:libosinfo</span>=<span class="hljs-string">&quot;http://libosinfo.org/xmlns/libvirt/domain/1.0&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">libosinfo:os</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;http://redhat.com/rhel/7.7&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">libosinfo:libosinfo</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">metadata</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">memory</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">&#x27;KiB&#x27;</span>&gt;</span>2097152<span class="hljs-tag">&lt;/<span class="hljs-name">memory</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">currentMemory</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">&#x27;KiB&#x27;</span>&gt;</span>2097152<span class="hljs-tag">&lt;/<span class="hljs-name">currentMemory</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">vcpu</span> <span class="hljs-attr">placement</span>=<span class="hljs-string">&#x27;static&#x27;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">vcpu</span>&gt;</span>    修改为2<br>  <span class="hljs-tag">&lt;<span class="hljs-name">os</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">type</span> <span class="hljs-attr">arch</span>=<span class="hljs-string">&#x27;x86_64&#x27;</span> <span class="hljs-attr">machine</span>=<span class="hljs-string">&#x27;pc-q35-rhel8.6.0&#x27;</span>&gt;</span>hvm<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h4 id="启动虚拟机并查看配置文件"><a href="#启动虚拟机并查看配置文件" class="headerlink" title="启动虚拟机并查看配置文件"></a>启动虚拟机并查看配置文件</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs yaml">[<span class="hljs-string">root@KVM</span> <span class="hljs-string">~</span>]<span class="hljs-comment"># virsh start Centos7</span><br><span class="hljs-string">Domain</span> <span class="hljs-string">&#x27;Centos7&#x27;</span> <span class="hljs-string">started</span><br><br>[<span class="hljs-string">root@KVM</span> <span class="hljs-string">~</span>]<span class="hljs-comment"># virsh dominfo Centos7</span><br><span class="hljs-attr">Id:</span>             <span class="hljs-number">1</span><br><span class="hljs-attr">Name:</span>           <span class="hljs-string">Centos7</span><br><span class="hljs-attr">UUID:</span>           <span class="hljs-string">735f1ca1-c82a-4734-81ec-ea3e82e98bae</span><br><span class="hljs-attr">OS Type:</span>        <span class="hljs-string">hvm</span><br><span class="hljs-attr">State:</span>          <span class="hljs-string">running</span><br><span class="hljs-string">CPU(s):</span>         <span class="hljs-number">2</span><br><span class="hljs-attr">CPU time:</span>       <span class="hljs-number">13.</span><span class="hljs-string">4s</span><br><span class="hljs-attr">Max memory:</span>     <span class="hljs-number">2097152</span> <span class="hljs-string">KiB</span><br><span class="hljs-attr">Used memory:</span>    <span class="hljs-number">2097152</span> <span class="hljs-string">KiB</span><br><span class="hljs-attr">Persistent:</span>     <span class="hljs-literal">yes</span><br><span class="hljs-attr">Autostart:</span>      <span class="hljs-string">enable</span><br><span class="hljs-attr">Managed save:</span>   <span class="hljs-literal">no</span><br><span class="hljs-attr">Security model:</span> <span class="hljs-string">selinux</span><br><span class="hljs-attr">Security DOI:</span>   <span class="hljs-number">0</span><br><span class="hljs-attr">Security label:</span> <span class="hljs-string">system_u:system_r:svirt_t:s0:c414,c924</span> <span class="hljs-string">(enforcing)</span><br><br>[<span class="hljs-string">root@KVM</span> <span class="hljs-string">~</span>]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><h2 id="维护虚拟机"><a href="#维护虚拟机" class="headerlink" title="维护虚拟机"></a>维护虚拟机</h2><h3 id="挂起-x2F-恢复虚拟机"><a href="#挂起-x2F-恢复虚拟机" class="headerlink" title="挂起&#x2F;恢复虚拟机"></a>挂起&#x2F;恢复虚拟机</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">[root@KVM ~]# virsh suspend Centos7<br>Domain <span class="hljs-emphasis">&#x27;Centos7&#x27;</span> suspended<br>[root@KVM ~]# virsh list --all<br><span class="hljs-section"> Id   Name      State</span><br><span class="hljs-section">------------------------</span><br><span class="hljs-code"> 1    Centos7   paused</span><br>[root@KVM ~]# virsh resume Centos7<br>Domain <span class="hljs-emphasis">&#x27;Centos7&#x27;</span> resumed<br><br>[root@KVM ~]# virsh list --all<br><span class="hljs-section"> Id   Name      State</span><br><span class="hljs-section">-------------------------</span><br><span class="hljs-code"> 1    Centos7   running</span><br></code></pre></td></tr></table></figure><h3 id="克隆KVM虚拟机"><a href="#克隆KVM虚拟机" class="headerlink" title="克隆KVM虚拟机"></a>克隆KVM虚拟机</h3><h4 id="关闭Centos7-并且克隆Centos7为C7"><a href="#关闭Centos7-并且克隆Centos7为C7" class="headerlink" title="关闭Centos7 并且克隆Centos7为C7"></a>关闭Centos7 并且克隆Centos7为C7</h4><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">[root@KVM ~]# virsh shutdown Centos7<br>Domain <span class="hljs-emphasis">&#x27;Centos7&#x27;</span> is being shutdown<br><br>[root@KVM ~]# virsh list --all<br><span class="hljs-section"> Id   Name      State</span><br><span class="hljs-section">--------------------------</span><br><span class="hljs-code"> -    Centos7   shut off</span><br><br>[root@KVM ~]# virt-clone -o Centos7 -n C7 -f /opt/disk/C7.qcow2<br>Allocating <span class="hljs-emphasis">&#x27;C7.qcow2&#x27;</span>                                                      |  10 GB  00:00:37<br><br>Clone <span class="hljs-emphasis">&#x27;C7&#x27;</span> created successfully.<br>克隆成功<br>[root@KVM ~]# virsh list --all<br><span class="hljs-section"> Id   Name      State</span><br><span class="hljs-section">--------------------------</span><br><span class="hljs-code"> -    C7        shut off</span><br><span class="hljs-code"> -    Centos7   shut off</span><br></code></pre></td></tr></table></figure><h4 id="开启C7，登入并且修改主机名为C7"><a href="#开启C7，登入并且修改主机名为C7" class="headerlink" title="开启C7，登入并且修改主机名为C7"></a>开启C7，登入并且修改主机名为C7</h4><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[root@KVM ~]<span class="hljs-comment"># virsh start C7</span><br>Domain <span class="hljs-string">&#x27;C7&#x27;</span> started<br><br>[root@KVM ~]<span class="hljs-comment"># virsh console C7</span><br>Connected <span class="hljs-keyword">to</span> domain <span class="hljs-string">&#x27;C7&#x27;</span><br>Escape character <span class="hljs-keyword">is</span> ^] (Ctrl + ])<br>CentOS Linux <span class="hljs-number">7</span> (Core)<br>Kernel <span class="hljs-number">3.10</span>.<span class="hljs-number">0</span>-<span class="hljs-number">1160.el</span>7.x86_64 <span class="hljs-literal">on</span> an x86_64<br><br>centos7 login: root<br>Password:<br>Last login: Mon Jan  <span class="hljs-number">9</span> <span class="hljs-number">15</span>:<span class="hljs-number">56</span>:<span class="hljs-number">16</span> <span class="hljs-keyword">from</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">48.250</span><br>[root@centos7 ~]<span class="hljs-comment"># hostnamectl set-hostname C7 &amp;&amp; bash</span><br>[root@c7 ~]<span class="hljs-comment">#</span><br>克隆后ip回合Centos7一样，记得后期修改<br></code></pre></td></tr></table></figure><h3 id="设置Kvm虚拟机快照"><a href="#设置Kvm虚拟机快照" class="headerlink" title="设置Kvm虚拟机快照"></a>设置Kvm虚拟机快照</h3><h4 id="登入C7-创建-x2F-opt-x2F-dev-，关闭虚拟机，创建快照"><a href="#登入C7-创建-x2F-opt-x2F-dev-，关闭虚拟机，创建快照" class="headerlink" title="登入C7 创建&#x2F;opt&#x2F;dev ，关闭虚拟机，创建快照"></a>登入C7 创建&#x2F;opt&#x2F;dev ，关闭虚拟机，创建快照</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@c7</span> ~]<span class="hljs-meta"># mkdir /opt/dev</span><br>[root<span class="hljs-symbol">@c7</span> ~]<span class="hljs-meta"># ls /opt</span><br>dev<br>按ctrl + ] 退回到KVM宿主机<br>[root<span class="hljs-symbol">@KVM</span> ~]<span class="hljs-meta"># virsh shutdown C7</span><br>Domain <span class="hljs-string">&#x27;C7&#x27;</span> is being <span class="hljs-built_in">shutdown</span><br>创建快照<br>[root<span class="hljs-symbol">@KVM</span> ~]<span class="hljs-meta"># virsh snapshot-create C7</span><br>Domain snapshot <span class="hljs-number">1673252946</span> created<br>查看C7的快照列表<br>[root<span class="hljs-symbol">@KVM</span> ~]<span class="hljs-meta"># virsh snapshot-list C7</span><br> Name         Creation Time               State<br>---------------------------------------------------<br> <span class="hljs-number">1673252946</span>   <span class="hljs-number">2023</span><span class="hljs-number">-01</span><span class="hljs-number">-09</span> <span class="hljs-number">03</span>:<span class="hljs-number">29</span>:<span class="hljs-number">06</span> <span class="hljs-number">-0500</span>   shutoff<br></code></pre></td></tr></table></figure><h4 id="开启C7-删除-x2F-opt-x2F-dev-，恢复快照"><a href="#开启C7-删除-x2F-opt-x2F-dev-，恢复快照" class="headerlink" title="开启C7 删除&#x2F;opt&#x2F;dev ，恢复快照"></a>开启C7 删除&#x2F;opt&#x2F;dev ，恢复快照</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@KVM</span> ~]<span class="hljs-meta"># virsh start C7</span><br>Domain <span class="hljs-string">&#x27;C7&#x27;</span> started<br><br>[root<span class="hljs-symbol">@KVM</span> ~]<span class="hljs-meta"># virsh console C7</span><br>Connected <span class="hljs-keyword">to</span> domain <span class="hljs-string">&#x27;C7&#x27;</span><br><br>[root<span class="hljs-symbol">@c7</span> ~]<span class="hljs-meta"># rm -rf /opt/dev</span><br>[root<span class="hljs-symbol">@c7</span> ~]<span class="hljs-meta"># ll /opt</span><br>total <span class="hljs-number">0</span><br>按ctrl + ] 退回到KVM宿主机<br>[root<span class="hljs-symbol">@KVM</span> ~]<span class="hljs-meta"># virsh snapshot-list C7</span><br> Name         Creation Time               State<br>---------------------------------------------------<br> <span class="hljs-number">1673252946</span>   <span class="hljs-number">2023</span><span class="hljs-number">-01</span><span class="hljs-number">-09</span> <span class="hljs-number">03</span>:<span class="hljs-number">29</span>:<span class="hljs-number">06</span> <span class="hljs-number">-0500</span>   shutoff<br><br>[root<span class="hljs-symbol">@KVM</span> ~]<span class="hljs-meta"># virsh snapshot-revert C7 1673252946</span><br>virsh snapshot-revert 虚拟机名字 快照名字 <br></code></pre></td></tr></table></figure><h4 id="开启C7-查看是否恢复成功"><a href="#开启C7-查看是否恢复成功" class="headerlink" title="开启C7,查看是否恢复成功"></a>开启C7,查看是否恢复成功</h4><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[root@KVM ~]<span class="hljs-comment"># virsh start C7</span><br>Domain <span class="hljs-string">&#x27;C7&#x27;</span> started<br><br>[root@KVM ~]<span class="hljs-comment"># virsh console C7</span><br>Connected <span class="hljs-keyword">to</span> domain <span class="hljs-string">&#x27;C7&#x27;</span><br>Escape character <span class="hljs-keyword">is</span> ^] (Ctrl + ])<br><br>CentOS Linux <span class="hljs-number">7</span> (Core)<br>Kernel <span class="hljs-number">3.10</span>.<span class="hljs-number">0</span>-<span class="hljs-number">1160.el</span>7.x86_64 <span class="hljs-literal">on</span> an x86_64<br><br>c7 login: root<br>Password:<br>Last login: Mon Jan  <span class="hljs-number">9</span> <span class="hljs-number">16</span>:<span class="hljs-number">27</span>:<span class="hljs-number">07</span> <span class="hljs-literal">on</span> ttyS0<br>[root@c7 ~]<span class="hljs-comment"># ls /opt</span><br>dev<br></code></pre></td></tr></table></figure><h2 id="virsh-命令"><a href="#virsh-命令" class="headerlink" title="virsh 命令"></a>virsh 命令</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">virsh <span class="hljs-keyword">shutdown</span> 关闭KVM虚拟机 <br>virsh destroy 强制关闭KVM虚拟机，不删除虚拟机磁盘，virsh list列表里面看不见，但是磁盘还在，还是可以启动，通过virsh list <span class="hljs-params">--all</span>可以查看<br>virsh undefine 彻底删除虚拟机，包括虚拟机存储所在的位置<br>virsh start 开启KVM虚拟机<br>virsh suspend 虚拟机名称 <span class="hljs-comment">#挂起</span><br>virsh resume 虚拟机名称 <span class="hljs-comment">#恢复被挂起的</span><br></code></pre></td></tr></table></figure><div class="tbsm" style="margin-top:54px;"><div class="tbsm-top"><span><svg t="1674654360507" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="987" data-spm-anchor-id="a313x.7781069.0.i0" width="35" height="35"><path d="M410.49 97.74H155.08a56.74 56.74 0 0 0-56.84 56.73V410a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 410V154.58a56.83 56.83 0 0 0-56.83-56.84zM410.49 558.74H155.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#66EEFF" p-id="988"></path><path d="M410.49 558.74h-4.14A475 475 0 0 0 299.52 859.6a481.16 481.16 0 0 0 4.84 68.22h106.13A56.83 56.83 0 0 0 467.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84zM871.49 558.74H616.08a56.74 56.74 0 0 0-56.84 56.73V871a56.84 56.84 0 0 0 56.84 56.84h255.41A56.83 56.83 0 0 0 928.32 871V615.58a56.83 56.83 0 0 0-56.83-56.84z" fill="#C2F8FF" p-id="989"></path></svg></span><span style="font-size:30px;"> 特别声明</span></div><div class="tbsm-wz">千屹博客旗下的所有文章，是通过本人课堂学习和课外自学所精心整理的知识巨著<br/>难免会有出错的地方<br/>如果细心的你发现了小失误，可以在下方评论区告诉我，或者私信我！<br />非常感谢大家的热烈支持！</div></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos 8 stream</tag>
      
      <tag>KVM</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
